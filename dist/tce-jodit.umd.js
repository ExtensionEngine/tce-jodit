(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = global || self, factory((global.__TAILOR_CONTENT_ELEMENTS__ = global.__TAILOR_CONTENT_ELEMENTS__ || {}, global.__TAILOR_CONTENT_ELEMENTS__['@extensionengine/tce-jodit'] = {})));
}(this, (function (exports) { 'use strict';

  var name = "@extensionengine/tce-jodit";
  var version = "0.0.1";
  var tailor = {
  	label: "Html",
  	type: "JODIT_HTML",
  	ui: {
  		icon: "mdi-text",
  		forceFullWidth: false
  	}
  };

  /**
   * Checks if `value` is the
   * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
   * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
   *
   * @static
   * @memberOf _
   * @since 0.1.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is an object, else `false`.
   * @example
   *
   * _.isObject({});
   * // => true
   *
   * _.isObject([1, 2, 3]);
   * // => true
   *
   * _.isObject(_.noop);
   * // => true
   *
   * _.isObject(null);
   * // => false
   */
  function isObject(value) {
    var type = typeof value;
    return value != null && (type == 'object' || type == 'function');
  }

  var isObject_1 = isObject;

  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

  function unwrapExports (x) {
  	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
  }

  function createCommonjsModule(fn, module) {
  	return module = { exports: {} }, fn(module, module.exports), module.exports;
  }

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;

  var _freeGlobal = freeGlobal;

  /** Detect free variable `self`. */
  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

  /** Used as a reference to the global object. */
  var root = _freeGlobal || freeSelf || Function('return this')();

  var _root = root;

  /**
   * Gets the timestamp of the number of milliseconds that have elapsed since
   * the Unix epoch (1 January 1970 00:00:00 UTC).
   *
   * @static
   * @memberOf _
   * @since 2.4.0
   * @category Date
   * @returns {number} Returns the timestamp.
   * @example
   *
   * _.defer(function(stamp) {
   *   console.log(_.now() - stamp);
   * }, _.now());
   * // => Logs the number of milliseconds it took for the deferred invocation.
   */
  var now = function() {
    return _root.Date.now();
  };

  var now_1 = now;

  /** Built-in value references. */
  var Symbol$1 = _root.Symbol;

  var _Symbol = Symbol$1;

  /** Used for built-in method references. */
  var objectProto = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty = objectProto.hasOwnProperty;

  /**
   * Used to resolve the
   * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
   * of values.
   */
  var nativeObjectToString = objectProto.toString;

  /** Built-in value references. */
  var symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;

  /**
   * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
   *
   * @private
   * @param {*} value The value to query.
   * @returns {string} Returns the raw `toStringTag`.
   */
  function getRawTag(value) {
    var isOwn = hasOwnProperty.call(value, symToStringTag),
        tag = value[symToStringTag];

    try {
      value[symToStringTag] = undefined;
      var unmasked = true;
    } catch (e) {}

    var result = nativeObjectToString.call(value);
    if (unmasked) {
      if (isOwn) {
        value[symToStringTag] = tag;
      } else {
        delete value[symToStringTag];
      }
    }
    return result;
  }

  var _getRawTag = getRawTag;

  /** Used for built-in method references. */
  var objectProto$1 = Object.prototype;

  /**
   * Used to resolve the
   * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
   * of values.
   */
  var nativeObjectToString$1 = objectProto$1.toString;

  /**
   * Converts `value` to a string using `Object.prototype.toString`.
   *
   * @private
   * @param {*} value The value to convert.
   * @returns {string} Returns the converted string.
   */
  function objectToString(value) {
    return nativeObjectToString$1.call(value);
  }

  var _objectToString = objectToString;

  /** `Object#toString` result references. */
  var nullTag = '[object Null]',
      undefinedTag = '[object Undefined]';

  /** Built-in value references. */
  var symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;

  /**
   * The base implementation of `getTag` without fallbacks for buggy environments.
   *
   * @private
   * @param {*} value The value to query.
   * @returns {string} Returns the `toStringTag`.
   */
  function baseGetTag(value) {
    if (value == null) {
      return value === undefined ? undefinedTag : nullTag;
    }
    return (symToStringTag$1 && symToStringTag$1 in Object(value))
      ? _getRawTag(value)
      : _objectToString(value);
  }

  var _baseGetTag = baseGetTag;

  /**
   * Checks if `value` is object-like. A value is object-like if it's not `null`
   * and has a `typeof` result of "object".
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
   * @example
   *
   * _.isObjectLike({});
   * // => true
   *
   * _.isObjectLike([1, 2, 3]);
   * // => true
   *
   * _.isObjectLike(_.noop);
   * // => false
   *
   * _.isObjectLike(null);
   * // => false
   */
  function isObjectLike(value) {
    return value != null && typeof value == 'object';
  }

  var isObjectLike_1 = isObjectLike;

  /** `Object#toString` result references. */
  var symbolTag = '[object Symbol]';

  /**
   * Checks if `value` is classified as a `Symbol` primitive or object.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
   * @example
   *
   * _.isSymbol(Symbol.iterator);
   * // => true
   *
   * _.isSymbol('abc');
   * // => false
   */
  function isSymbol(value) {
    return typeof value == 'symbol' ||
      (isObjectLike_1(value) && _baseGetTag(value) == symbolTag);
  }

  var isSymbol_1 = isSymbol;

  /** Used as references for various `Number` constants. */
  var NAN = 0 / 0;

  /** Used to match leading and trailing whitespace. */
  var reTrim = /^\s+|\s+$/g;

  /** Used to detect bad signed hexadecimal string values. */
  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

  /** Used to detect binary string values. */
  var reIsBinary = /^0b[01]+$/i;

  /** Used to detect octal string values. */
  var reIsOctal = /^0o[0-7]+$/i;

  /** Built-in method references without a dependency on `root`. */
  var freeParseInt = parseInt;

  /**
   * Converts `value` to a number.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to process.
   * @returns {number} Returns the number.
   * @example
   *
   * _.toNumber(3.2);
   * // => 3.2
   *
   * _.toNumber(Number.MIN_VALUE);
   * // => 5e-324
   *
   * _.toNumber(Infinity);
   * // => Infinity
   *
   * _.toNumber('3.2');
   * // => 3.2
   */
  function toNumber(value) {
    if (typeof value == 'number') {
      return value;
    }
    if (isSymbol_1(value)) {
      return NAN;
    }
    if (isObject_1(value)) {
      var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
      value = isObject_1(other) ? (other + '') : other;
    }
    if (typeof value != 'string') {
      return value === 0 ? value : +value;
    }
    value = value.replace(reTrim, '');
    var isBinary = reIsBinary.test(value);
    return (isBinary || reIsOctal.test(value))
      ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
      : (reIsBadHex.test(value) ? NAN : +value);
  }

  var toNumber_1 = toNumber;

  /** Error message constants. */
  var FUNC_ERROR_TEXT = 'Expected a function';

  /* Built-in method references for those with the same name as other `lodash` methods. */
  var nativeMax = Math.max,
      nativeMin = Math.min;

  /**
   * Creates a debounced function that delays invoking `func` until after `wait`
   * milliseconds have elapsed since the last time the debounced function was
   * invoked. The debounced function comes with a `cancel` method to cancel
   * delayed `func` invocations and a `flush` method to immediately invoke them.
   * Provide `options` to indicate whether `func` should be invoked on the
   * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
   * with the last arguments provided to the debounced function. Subsequent
   * calls to the debounced function return the result of the last `func`
   * invocation.
   *
   * **Note:** If `leading` and `trailing` options are `true`, `func` is
   * invoked on the trailing edge of the timeout only if the debounced function
   * is invoked more than once during the `wait` timeout.
   *
   * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
   * until to the next tick, similar to `setTimeout` with a timeout of `0`.
   *
   * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
   * for details over the differences between `_.debounce` and `_.throttle`.
   *
   * @static
   * @memberOf _
   * @since 0.1.0
   * @category Function
   * @param {Function} func The function to debounce.
   * @param {number} [wait=0] The number of milliseconds to delay.
   * @param {Object} [options={}] The options object.
   * @param {boolean} [options.leading=false]
   *  Specify invoking on the leading edge of the timeout.
   * @param {number} [options.maxWait]
   *  The maximum time `func` is allowed to be delayed before it's invoked.
   * @param {boolean} [options.trailing=true]
   *  Specify invoking on the trailing edge of the timeout.
   * @returns {Function} Returns the new debounced function.
   * @example
   *
   * // Avoid costly calculations while the window size is in flux.
   * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
   *
   * // Invoke `sendMail` when clicked, debouncing subsequent calls.
   * jQuery(element).on('click', _.debounce(sendMail, 300, {
   *   'leading': true,
   *   'trailing': false
   * }));
   *
   * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
   * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
   * var source = new EventSource('/stream');
   * jQuery(source).on('message', debounced);
   *
   * // Cancel the trailing debounced invocation.
   * jQuery(window).on('popstate', debounced.cancel);
   */
  function debounce(func, wait, options) {
    var lastArgs,
        lastThis,
        maxWait,
        result,
        timerId,
        lastCallTime,
        lastInvokeTime = 0,
        leading = false,
        maxing = false,
        trailing = true;

    if (typeof func != 'function') {
      throw new TypeError(FUNC_ERROR_TEXT);
    }
    wait = toNumber_1(wait) || 0;
    if (isObject_1(options)) {
      leading = !!options.leading;
      maxing = 'maxWait' in options;
      maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;
      trailing = 'trailing' in options ? !!options.trailing : trailing;
    }

    function invokeFunc(time) {
      var args = lastArgs,
          thisArg = lastThis;

      lastArgs = lastThis = undefined;
      lastInvokeTime = time;
      result = func.apply(thisArg, args);
      return result;
    }

    function leadingEdge(time) {
      // Reset any `maxWait` timer.
      lastInvokeTime = time;
      // Start the timer for the trailing edge.
      timerId = setTimeout(timerExpired, wait);
      // Invoke the leading edge.
      return leading ? invokeFunc(time) : result;
    }

    function remainingWait(time) {
      var timeSinceLastCall = time - lastCallTime,
          timeSinceLastInvoke = time - lastInvokeTime,
          timeWaiting = wait - timeSinceLastCall;

      return maxing
        ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
        : timeWaiting;
    }

    function shouldInvoke(time) {
      var timeSinceLastCall = time - lastCallTime,
          timeSinceLastInvoke = time - lastInvokeTime;

      // Either this is the first call, activity has stopped and we're at the
      // trailing edge, the system time has gone backwards and we're treating
      // it as the trailing edge, or we've hit the `maxWait` limit.
      return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
        (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
    }

    function timerExpired() {
      var time = now_1();
      if (shouldInvoke(time)) {
        return trailingEdge(time);
      }
      // Restart the timer.
      timerId = setTimeout(timerExpired, remainingWait(time));
    }

    function trailingEdge(time) {
      timerId = undefined;

      // Only invoke if we have `lastArgs` which means `func` has been
      // debounced at least once.
      if (trailing && lastArgs) {
        return invokeFunc(time);
      }
      lastArgs = lastThis = undefined;
      return result;
    }

    function cancel() {
      if (timerId !== undefined) {
        clearTimeout(timerId);
      }
      lastInvokeTime = 0;
      lastArgs = lastCallTime = lastThis = timerId = undefined;
    }

    function flush() {
      return timerId === undefined ? result : trailingEdge(now_1());
    }

    function debounced() {
      var time = now_1(),
          isInvoking = shouldInvoke(time);

      lastArgs = arguments;
      lastThis = this;
      lastCallTime = time;

      if (isInvoking) {
        if (timerId === undefined) {
          return leadingEdge(lastCallTime);
        }
        if (maxing) {
          // Handle invocations in a tight loop.
          clearTimeout(timerId);
          timerId = setTimeout(timerExpired, wait);
          return invokeFunc(lastCallTime);
        }
      }
      if (timerId === undefined) {
        timerId = setTimeout(timerExpired, wait);
      }
      return result;
    }
    debounced.cancel = cancel;
    debounced.flush = flush;
    return debounced;
  }

  var debounce_1 = debounce;

  var jodit_min = createCommonjsModule(function (module, exports) {
  /*!
   jodit - Jodit is awesome and usefully wysiwyg editor with filebrowser
   Author: Chupurnov <chupurnov@gmail.com> (https://xdsoft.net/)
   Version: v3.2.60
   Url: https://xdsoft.net/jodit/
   License(s): GPL-2.0-or-later OR MIT OR Commercial
  */

  !function(e,t){module.exports=t();}(window,function(){return i={},n.m=o=[function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),i=o(4),r=o(9),s=(d.detach=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);},d.unwrap=function(e){var t=e.parentNode,o=e;if(t){for(;o.firstChild;)t.insertBefore(o.firstChild,o);d.safeRemove(o);}},d.each=function(e,t){var o=e.firstChild;if(o)for(;o;){if(!1===t.call(o,o)||!d.each(o,t))return !1;o=d.next(o,function(e){return !!e},e);}return !0},d.replace=function(e,t,o,i,n){void 0===o&&(o=!1),void 0===i&&(i=!1);var r="string"==typeof t?n.createElement(t):t;if(!i)for(;e.firstChild;)r.appendChild(e.firstChild);return o&&Array.from(e.attributes).forEach(function(e){r.setAttribute(e.name,e.value);}),e.parentNode&&e.parentNode.replaceChild(r,e),r},d.isEmptyTextNode=function(e){return e&&e.nodeType===Node.TEXT_NODE&&(!e.nodeValue||0===e.nodeValue.replace(n.INVISIBLE_SPACE_REG_EXP,"").length)},d.isEmpty=function(e,t){return void 0===t&&(t=/^(img|svg|canvas|input|textarea|form)$/),!e||(e.nodeType===Node.TEXT_NODE?null===e.nodeValue||0===r.trim(e.nodeValue).length:!e.nodeName.toLowerCase().match(t)&&d.each(e,function(e){if(e&&e.nodeType===Node.TEXT_NODE&&null!==e.nodeValue&&0!==r.trim(e.nodeValue).length||e&&e.nodeType===Node.ELEMENT_NODE&&t.test(e.nodeName.toLowerCase()))return !1}))},d.isNode=function(e,t){return !("object"!=typeof t||!t||"function"!=typeof t.Node&&"object"!=typeof t.Node)&&e instanceof t.Node},d.isCell=function(e,t){return d.isNode(e,t)&&/^(td|th)$/i.test(e.nodeName)},d.isImage=function(e,t){return d.isNode(e,t)&&/^(img|svg|picture|canvas)$/i.test(e.nodeName)},d.isBlock=function(e,t){return e&&"object"==typeof e&&d.isNode(e,t)&&n.IS_BLOCK.test(e.nodeName)},d.isInlineBlock=function(e){return !!e&&e.nodeType===Node.ELEMENT_NODE&&!!~["inline","inline-block"].indexOf(""+i.css(e,"display"))},d.canSplitBlock=function(e,t){return e&&e instanceof t.HTMLElement&&this.isBlock(e,t)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&void 0!==e.style&&!/^(fixed|absolute)/i.test(e.style.position)},d.prev=function(e,t,o,i){return void 0===i&&(i=!0),d.find(e,t,o,!1,"previousSibling",!!i&&"lastChild")},d.next=function(e,t,o,i){return void 0===i&&(i=!0),d.find(e,t,o,void 0,void 0,i?"firstChild":"")},d.prevWithClass=function(e,t){return this.prev(e,function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&e.classList.contains(t)},e.parentNode)},d.nextWithClass=function(e,t){return this.next(e,function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&e.classList.contains(t)},e.parentNode)},d.find=function(e,t,o,i,n,r){if(void 0===i&&(i=!1),void 0===n&&(n="nextSibling"),void 0===r&&(r="firstChild"),i&&t(e))return e;var s,a=e;do{if(t(s=a[n]))return s||!1;if(r&&s&&s[r]){var l=d.find(s[r],t,s,!0,n,r);if(l)return l}a=s=s||a.parentNode;}while(a&&a!==o);return !1},d.findWithCurrent=function(e,t,o,i,n){void 0===i&&(i="nextSibling"),void 0===n&&(n="firstChild");var r=e;do{if(t(r))return r||!1;if(n&&r&&r[n]){var s=d.findWithCurrent(r[n],t,r,i,n);if(s)return s}for(;r&&!r[i]&&r!==o;)r=r.parentNode;r&&r[i]&&r!==o&&(r=r[i]);}while(r&&r!==o);return !1},d.up=function(e,t,o){var i=e;if(!e)return !1;do{if(t(i))return i;if(i===o||!i.parentNode)break;i=i.parentNode;}while(i&&i!==o);return !1},d.closest=function(e,t,o){return d.up(e,"function"==typeof t?t:t instanceof RegExp?function(e){return e&&t.test(e.nodeName)}:function(e){return e&&RegExp("^("+t+")$","i").test(e.nodeName)},o)},d.after=function(e,t){var o=e.parentNode;o&&(o.lastChild===e?o.appendChild(t):o.insertBefore(t,e.nextSibling));},d.moveContent=function(e,t,o){void 0===o&&(o=!1);var i=(e.ownerDocument||document).createDocumentFragment();[].slice.call(e.childNodes).forEach(function(e){e.nodeType===Node.TEXT_NODE&&e.nodeValue===n.INVISIBLE_SPACE||i.appendChild(e);}),o&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i);},d.all=function(e,t,o){void 0===o&&(o=!1);var i=e.childNodes?Array.prototype.slice.call(e.childNodes):[];if(t(e))return e;o&&(i=i.reverse()),i.forEach(function(e){d.all(e,t,o);});},d.safeRemove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e);},d.wrapInline=function(e,t,o){for(var i,n=e,r=e,s=o.selection.save(),a=!1;a=!1,(i=n.previousSibling)&&!d.isBlock(i,o.editorWindow)&&(a=!0,n=i),a;);for(;a=!1,(i=r.nextSibling)&&!d.isBlock(i,o.editorWindow)&&(a=!0,r=i),a;);var l="string"==typeof t?o.create.inside.element(t):t;n.parentNode&&n.parentNode.insertBefore(l,n);for(var c=n;c&&(c=n.nextSibling,l.appendChild(n),n!==r&&c);)n=c;return o.selection.restore(s),l},d.wrap=function(e,t,o){var i=o.selection.save(),n="string"==typeof t?o.editorDocument.createElement(t):t;return e.parentNode?(e.parentNode.insertBefore(n,e),n.appendChild(e),o.selection.restore(i),n):null},d.findInline=function(e,t,o){var i=e,n=null;do{if(!i)break;if((n=t?i.previousSibling:i.nextSibling)||!i.parentNode||i.parentNode===o||!d.isInlineBlock(i.parentNode))break;i=i.parentNode;}while(!n);for(;n&&d.isInlineBlock(n)&&(t?n.lastChild:n.firstChild);)n=t?n.lastChild:n.firstChild;return n},d.contains=function(e,t){for(;t.parentNode;){if(t.parentNode===e)return !0;t=t.parentNode;}return !1},d.isOrContains=function(e,t,o){return void 0===o&&(o=!1),t&&e&&(e===t&&!o||d.contains(e,t))},d);function d(){}t.Dom=s;},function(e,t,o){o.r(t),o.d(t,"__extends",function(){return n}),o.d(t,"__assign",function(){return r}),o.d(t,"__rest",function(){return s}),o.d(t,"__decorate",function(){return a}),o.d(t,"__param",function(){return l}),o.d(t,"__metadata",function(){return c}),o.d(t,"__awaiter",function(){return d}),o.d(t,"__generator",function(){return u}),o.d(t,"__exportStar",function(){return f}),o.d(t,"__values",function(){return p}),o.d(t,"__read",function(){return h}),o.d(t,"__spread",function(){return v}),o.d(t,"__spreadArrays",function(){return m}),o.d(t,"__await",function(){return g}),o.d(t,"__asyncGenerator",function(){return _}),o.d(t,"__asyncDelegator",function(){return b}),o.d(t,"__asyncValues",function(){return y}),o.d(t,"__makeTemplateObject",function(){return w}),o.d(t,"__importStar",function(){return E}),o.d(t,"__importDefault",function(){return C});var i=function(e,t){return (i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);})(e,t)};function n(e,t){function o(){this.constructor=e;}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o);}var r=function(){return (r=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&!~t.indexOf(i)&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)!~t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]]);}return o}function a(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(r<3?n(s):3<r?n(t,o,s):n(t,o))||s);return 3<r&&s&&Object.defineProperty(t,o,s),s}function l(o,i){return function(e,t){i(e,t,o);}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(r,s,a,l){return new(a=a||Promise)(function(e,t){function o(e){try{n(l.next(e));}catch(e){t(e);}}function i(e){try{n(l.throw(e));}catch(e){t(e);}}function n(t){t.done?e(t.value):new a(function(e){e(t.value);}).then(o,i);}n((l=l.apply(r,s||[])).next());})}function u(o,i){var n,r,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||s[0]<t[1]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(o,a);}catch(e){t=[6,e],r=0;}finally{n=s=0;}if(5&t[0])throw t[1];return {value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function f(e,t){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o]);}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&e.length<=o&&(e=void 0),{value:e&&e[o++],done:!e}}}}function h(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value);}catch(e){n={error:e};}finally{try{i&&!i.done&&(o=r.return)&&o.call(r);}finally{if(n)throw n.error}}return s}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function m(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<o;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,n++)i[n]=r[s];return i}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function _(e,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=o.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(i){r[i]&&(n[i]=function(o){return new Promise(function(e,t){1<s.push([i,o,e,t])||a(i,o);})});}function a(e,t){try{(o=r[e](t)).value instanceof g?Promise.resolve(o.value.v).then(l,c):d(s[0][2],o);}catch(e){d(s[0][3],e);}var o;}function l(e){a("next",e);}function c(e){a("throw",e);}function d(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1]);}}function b(i){var e,n;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,o){e[t]=i[t]?function(e){return (n=!n)?{value:g(i[t](e)),done:"return"===t}:o?o(e):e}:o;}}function y(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a=p(a),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(s){e[s]=a[s]&&function(r){return new Promise(function(e,t){var o,i,n;o=e,i=t,n=(r=a[s](r)).done,Promise.resolve(r.value).then(function(e){o({value:e,done:n});},i);})};}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.INVISIBLE_SPACE="\ufeff",t.INVISIBLE_SPACE_REG_EXP=/[\uFEFF]/g,t.INVISIBLE_SPACE_REG_EXP_END=/[\uFEFF]+$/g,t.INVISIBLE_SPACE_REG_EXP_START=/^[\uFEFF]+/g,t.SPACE_REG_EXP=/[\s\n\t\r\uFEFF\u200b]+/g,t.SPACE_REG_EXP_START=/^[\s\n\t\r\uFEFF\u200b]+/g,t.SPACE_REG_EXP_END=/[\s\n\t\r\uFEFF\u200b]+$/g,t.IS_BLOCK=/^(PRE|DIV|P|LI|H[1-6]|BLOCKQUOTE|TD|TH|TABLE|BODY|HTML|FIGCAPTION|FIGURE|DT|DD)$/i,t.IS_INLINE=/^(STRONG|SPAN|I|EM|B|SUP|SUB)$/,t.MAY_BE_REMOVED_WITH_KEY=/^(IMG|BR|IFRAME|SCRIPT|INPUT|TEXTAREA|HR|JODIT|JODIT-MEDIA)$/,t.KEY_BACKSPACE=8,t.KEY_TAB=9,t.KEY_ENTER=13,t.KEY_ESC=27,t.KEY_LEFT=37,t.KEY_UP=38,t.KEY_RIGHT=39,t.KEY_DOWN=40,t.KEY_DELETE=46,t.KEY_F=70,t.KEY_R=82,t.KEY_H=72,t.KEY_Y=89,t.KEY_V=86,t.KEY_Z=90,t.KEY_F3=114,t.NEARBY=5,t.ACCURACY=10,t.COMMAND_KEYS=[t.KEY_BACKSPACE,t.KEY_DELETE,t.KEY_UP,t.KEY_DOWN,t.KEY_RIGHT,t.KEY_LEFT,t.KEY_ENTER,t.KEY_ESC,t.KEY_F3,t.KEY_TAB],t.BR="br",t.PARAGRAPH="p",t.MODE_WYSIWYG=1,t.MODE_SOURCE=2,t.MODE_SPLIT=3,t.IS_IE="undefined"!=typeof navigator&&(!!~navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)),t.URL_LIST=t.IS_IE?"url":"text/uri-list",t.TEXT_PLAIN=t.IS_IE?"text":"text/plain",t.TEXT_HTML=t.IS_IE?"text":"text/html",t.MARKER_CLASS="jodit_selection_marker",t.EMULATE_DBLCLICK_TIMEOUT=300,t.JODIT_SELECTED_CELL_MARKER="data-jodit-selected-cell",t.INSERT_AS_HTML="insert_as_html",t.INSERT_CLEAR_HTML="insert_clear_html",t.INSERT_AS_TEXT="insert_as_text",t.INSERT_ONLY_TEXT="insert_only_text",t.IS_MAC="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t.KEY_ALIASES={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:t.IS_MAC?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),i=o(2),n=o(17),c=n.Widget.TabsWidget,l=n.Widget.FileSelectorWidget,s=o(0),d=o(4),u=o(6),f=o(14),p=(Object.defineProperty(r,"defaultOptions",{get:function(){return r.__defaultOptions||(r.__defaultOptions=new r),r.__defaultOptions},enumerable:!0,configurable:!0}),r);function r(){this.iframe=!1,this.license="",this.preset="custom",this.presets={inline:{inline:!0,toolbar:!1,toolbarInline:!0,popup:{selection:["bold","underline","italic","ul","ol","outdent","indent","\n","fontsize","brush","paragraph","link","align","cut","dots"]},showXPathInStatusbar:!1,showCharsCounter:!1,showWordsCounter:!1,showPlaceholder:!1}},this.ownerDocument="undefined"!=typeof document?document:null,this.ownerWindow="undefined"!=typeof window?window:null,this.zIndex=0,this.readonly=!1,this.disabled=!1,this.activeButtonsInReadOnly=["source","fullsize","print","about","dots","selectall"],this.toolbarButtonSize="middle",this.allowTabNavigation=!1,this.inline=!1,this.theme="default",this.saveModeInStorage=!1,this.saveHeightInStorage=!1,this.spellcheck=!0,this.editorCssClass=!1,this.style=!1,this.triggerChangeEvent=!0,this.width="auto",this.minWidth="200px",this.maxWidth="100%",this.height="auto",this.minHeight=200,this.direction="",this.language="auto",this.debugLanguage=!1,this.i18n="en",this.tabIndex=-1,this.toolbar=!0,this.showTooltip=!0,this.showTooltipDelay=500,this.useNativeTooltip=!1,this.enter=i.PARAGRAPH,this.enterBlock=i.PARAGRAPH,this.defaultMode=i.MODE_WYSIWYG,this.useSplitMode=!1,this.colors={greyscale:["#000000","#434343","#666666","#999999","#B7B7B7","#CCCCCC","#D9D9D9","#EFEFEF","#F3F3F3","#FFFFFF"],palette:["#980000","#FF0000","#FF9900","#FFFF00","#00F0F0","#00FFFF","#4A86E8","#0000FF","#9900FF","#FF00FF"],full:["#E6B8AF","#F4CCCC","#FCE5CD","#FFF2CC","#D9EAD3","#D0E0E3","#C9DAF8","#CFE2F3","#D9D2E9","#EAD1DC","#DD7E6B","#EA9999","#F9CB9C","#FFE599","#B6D7A8","#A2C4C9","#A4C2F4","#9FC5E8","#B4A7D6","#D5A6BD","#CC4125","#E06666","#F6B26B","#FFD966","#93C47D","#76A5AF","#6D9EEB","#6FA8DC","#8E7CC3","#C27BA0","#A61C00","#CC0000","#E69138","#F1C232","#6AA84F","#45818E","#3C78D8","#3D85C6","#674EA7","#A64D79","#85200C","#990000","#B45F06","#BF9000","#38761D","#134F5C","#1155CC","#0B5394","#351C75","#733554","#5B0F00","#660000","#783F04","#7F6000","#274E13","#0C343D","#1C4587","#073763","#20124D","#4C1130"]},this.colorPickerDefaultTab="background",this.imageDefaultWidth=300,this.removeButtons=[],this.disablePlugins=[],this.extraButtons=[],this.sizeLG=900,this.sizeMD=700,this.sizeSM=400,this.buttons=["source","|","bold","strikethrough","underline","italic","|","superscript","subscript","|","ul","ol","|","outdent","indent","|","font","fontsize","brush","paragraph","|","image","file","video","table","link","|","align","undo","redo","\n","cut","hr","eraser","copyformat","|","symbol","fullsize","selectall","print","about"],this.buttonsMD=["source","|","bold","italic","|","ul","ol","|","font","fontsize","brush","paragraph","|","image","table","link","|","align","|","undo","redo","|","hr","eraser","copyformat","fullsize","dots"],this.buttonsSM=["source","|","bold","italic","|","ul","ol","|","fontsize","brush","paragraph","|","image","table","link","|","align","|","undo","redo","|","eraser","copyformat","fullsize","dots"],this.buttonsXS=["bold","image","|","brush","paragraph","|","align","|","undo","redo","|","eraser","dots"],this.events={},this.textIcons=!1,this.showBrowserColorPicker=!1;}t.Config=p,t.OptionsDefault=function(e){var n=this,r=p.defaultOptions,s=this;if(void 0!==(s.plainOptions=e)&&"object"==typeof e){var a=function(e,t){if("preset"===t&&void 0!==r.presets[e.preset]){var o=r.presets[e.preset];Object.keys(o).forEach(a.bind(n,o));}var i=r[t];s[t]="object"!=typeof i||null===i||["ownerWindow","ownerDocument"].includes(t)||Array.isArray(i)?e[t]:f.extend(!0,{},i,e[t]);};Object.keys(e).forEach(a.bind(this,e));}},p.prototype.controls={print:{exec:function(e){var t=window.open("","PRINT");t&&(e.options.iframe?(e.events.fire("generateDocumentStructure.iframe",t.document,e),t.document.body.innerHTML=e.value):(t.document.write('<!doctype html><html lang="'+d.defaultLanguage(e.options.language)+'"><head><title></title></head><body>'+e.value+"</body></html>"),t.document.close()),t.focus(),t.print(),t.close());},mode:i.MODE_SOURCE+i.MODE_WYSIWYG},about:{exec:function(e){var t=e.getInstance("Dialog");t.setTitle(e.i18n("About Jodit")),t.setContent('<div class="jodit_about">\t\t\t\t\t\t\t\t\t\t<div>'+e.i18n("Jodit Editor")+" v."+e.getVersion()+" </div><div>"+e.i18n("License: %s",d.isLicense(e.options.license)?d.normalizeLicense(e.options.license):e.i18n("GNU General Public License, version 2 or later"))+'</div><div><a href="https://xdsoft.net/jodit/" target="_blank">http://xdsoft.net/jodit/</a></div><div><a href="https://xdsoft.net/jodit/doc/" target="_blank">'+e.i18n("Jodit User's Guide")+"</a> "+e.i18n("contains detailed help for using")+"</div><div>"+e.i18n("Copyright © XDSoft.net - Chupurnov Valeriy. All rights reserved.")+"</div></div>"),t.open();},tooltip:"About Jodit",mode:i.MODE_SOURCE+i.MODE_WYSIWYG},hr:{command:"insertHorizontalRule",tags:["hr"],tooltip:"Insert Horizontal Line"},image:{popup:function(n,e,t,r){var s=null;return e&&e.nodeType!==Node.TEXT_NODE&&("IMG"===e.tagName||d.$$("img",e).length)&&(s="IMG"===e.tagName?e:d.$$("img",e)[0]),l(n,{filebrowser:function(o){return a.__awaiter(void 0,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:if(!o.files||!o.files.length)return [3,4];t=0,e.label=1;case 1:return t<o.files.length?[4,n.selection.insertImage(o.baseurl+o.files[t],null,n.options.imageDefaultWidth)]:[3,4];case 2:e.sent(),e.label=3;case 3:return t+=1,[3,1];case 4:return r(),[2]}})})},upload:function(o){return a.__awaiter(void 0,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:if(!o.files||!o.files.length)return [3,4];t=0,e.label=1;case 1:return t<o.files.length?[4,n.selection.insertImage(o.baseurl+o.files[t],null,n.options.imageDefaultWidth)]:[3,4];case 2:e.sent(),e.label=3;case 3:return t+=1,[3,1];case 4:return r(),[2]}})})},url:function(o,i){return a.__awaiter(void 0,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return (t=s||n.create.inside.element("img")).setAttribute("src",o),t.setAttribute("alt",i),s?[3,2]:[4,n.selection.insertImage(t,null,n.options.imageDefaultWidth)];case 1:e.sent(),e.label=2;case 2:return r(),[2]}})})}},s,r)},tags:["img"],tooltip:"Insert Image"},file:{popup:function(o,e,t,i){function n(e,t){void 0===t&&(t=""),o.selection.insertNode(o.create.inside.fromHTML('<a href="'+e+'" title="'+t+'">'+(t||e)+"</a>"));}var r=null;return e&&("A"===e.nodeName||s.Dom.closest(e,"A",o.editor))&&(r="A"===e.nodeName?e:s.Dom.closest(e,"A",o.editor)),l(o,{filebrowser:function(e){if(e.files&&e.files.length){var t=void 0;for(t=0;t<e.files.length;t+=1)n(e.baseurl+e.files[t]);}i();},upload:function(e){var t;if(e.files&&e.files.length)for(t=0;t<e.files.length;t+=1)n(e.baseurl+e.files[t]);i();},url:function(e,t){r?(r.setAttribute("href",e),r.setAttribute("title",t)):n(e,t),i();}},r,i,!1)},tags:["a"],tooltip:"Insert file"},video:{popup:function(t,e,o,i){function n(e){t.selection.restore(l),t.selection.insertHTML(e),i();}var r=t.create.fromHTML('<form class="jodit_form">\n\t\t\t\t\t\t\t\t\t\t\t\t<input required name="code" placeholder="http://" type="url"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<button type="submit">'+t.i18n("Insert")+"</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</form>"),s=t.create.fromHTML('<form class="jodit_form">\n\t\t\t\t\t\t\t\t\t\t\t\t<textarea required name="code" placeholder="'+t.i18n("Embed code")+'"></textarea>\n\t\t\t\t\t\t\t\t\t\t\t\t<button type="submit">'+t.i18n("Insert")+"</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</form>"),a={},l=t.selection.save();return t.options.textIcons?(a[t.i18n("Link")]=r,a[t.i18n("Code")]=s):(a[u.ToolbarIcon.getIcon("link")+"&nbsp;"+t.i18n("Link")]=r,a[u.ToolbarIcon.getIcon("source")+"&nbsp;"+t.i18n("Code")]=s),s.addEventListener("submit",function(e){return e.preventDefault(),d.trim(d.val(s,"textarea[name=code]"))?n(d.val(s,"textarea[name=code]")):(s.querySelector("textarea[name=code]").focus(),s.querySelector("textarea[name=code]").classList.add("jodit_error")),!1}),r.addEventListener("submit",function(e){return e.preventDefault(),d.isURL(d.val(r,"input[name=code]"))?n(d.convertMediaURLToVideoEmbed(d.val(r,"input[name=code]"))):(r.querySelector("input[name=code]").focus(),r.querySelector("input[name=code]").classList.add("jodit_error")),!1}),c(t,a)},tags:["iframe"],tooltip:"Insert youtube/vimeo video"}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(29),t),i.__exportStar(o(5),t),i.__exportStar(o(14),t),i.__exportStar(o(33),t),i.__exportStar(o(83),t),i.__exportStar(o(46),t),i.__exportStar(o(19),t),i.__exportStar(o(23),t),i.__exportStar(o(9),t),i.__exportStar(o(50),t),i.__exportStar(o(102),t),i.__exportStar(o(103),t),i.__exportStar(o(10),t),i.__exportStar(o(53),t),i.__exportStar(o(104),t),i.__exportStar(o(54),t),i.__exportStar(o(24),t),i.__exportStar(o(51),t),i.__exportStar(o(105),t),i.__exportStar(o(31),t),i.__exportStar(o(30),t),i.__exportStar(o(52),t),i.__exportStar(o(55),t),i.__exportStar(o(106),t),i.__exportStar(o(11),t),i.__exportStar(o(32),t),i.__exportStar(o(107),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(42),t),i.__exportStar(o(18),t),i.__exportStar(o(77),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=(n.exists=function(e){return void 0!==n.icons[e]},n.getIcon=function(e,t){return void 0===t&&(t="<span></span>"),n.icons[e]||n.icons[e.replace(/-/g,"_")]||n.icons[e.toLowerCase()]||t},n.icons={},n);function n(){}t.ToolbarIcon=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(8),s=(n.__extends(a,i=r.Component),a);function a(e){var t=i.call(this,e)||this;return t.destruct=function(){t.isDestructed||(t.jodit.events&&t.jodit.events.off("beforeDestruct",t.destruct),t.beforeDestruct(t.jodit),i.prototype.destruct.call(t));},e.events.on("afterInit",t.afterInit.bind(t,e)).on("beforeDestruct",t.destruct),t}t.Plugin=s;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(15),n=(Object.defineProperty(r.prototype,"isDestructed",{get:function(){return this.__isDestructed},enumerable:!0,configurable:!0}),r.prototype.destruct=function(){this.jodit&&(this.jodit=void 0),this.__isDestructed=!0;},r);function r(e){this.__isDestructed=!1,e&&e instanceof r&&i.isJoditObject(this.jodit=e)&&e.components.push(this);}t.Component=n;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(47),t),i.__exportStar(o(48),t),i.__exportStar(o(87),t),i.__exportStar(o(34),t);},function(e,p,t){Object.defineProperty(p,"__esModule",{value:!0});var h=t(21),v=t(22),m=t(49),g=t(47),_=t(48);p.css=function(e,t,o,i){void 0===i&&(i=!1);var n=/^left|top|bottom|right|width|min|max|height|margin|padding|font-size/i;if(h.isPlainObject(t)||void 0!==o){var r=function(e,t,o){null!=o&&n.test(t)&&v.isNumeric(""+o)&&(o=parseInt(""+o,10)+"px"),void 0!==o&&p.css(e,t,void 0,!0)!==m.normilizeCSSValue(t,o)&&(e.style[t]=o);};if(h.isPlainObject(t))for(var s=Object.keys(t),a=0;a<s.length;a+=1)r(e,g.camelCase(s[a]),t[s[a]]);else r(e,g.camelCase(t),o);return ""}var l=_.fromCamelCase(t),c=e.ownerDocument||document,d=!!c&&(c.defaultView||c.parentWindow),u=e.style[t],f=void 0!==u&&""!==u?u:d&&!i?d.getComputedStyle(e).getPropertyValue(l):"";return n.test(t)&&/^[\-+]?[0-9.]+px$/.test(""+f)&&(f=parseInt(""+f,10)),m.normilizeCSSValue(t,f)};},function(e,i,t){Object.defineProperty(i,"__esModule",{value:!0});var r=t(2),s=1;i.$$=function(e,t){var o;if(!/:scope/.test(e)||!r.IS_IE||t&&t.nodeType===Node.DOCUMENT_NODE)o=t.querySelectorAll(e);else{var i=t.id,n=i||"_selector_id_"+(""+Math.random()).slice(2)+s++;e=e.replace(/:scope/g,"#"+n),i||t.setAttribute("id",n),o=t.parentNode.querySelectorAll(e),i||t.removeAttribute("id");}return [].slice.call(o)},i.getXPathByElement=function(t,e){if(!t||1!==t.nodeType)return "";if(!t.parentNode||e===t)return "";if(t.id)return "//*[@id='"+t.id+"']";var o=[].filter.call(t.parentNode.childNodes,function(e){return e.nodeName===t.nodeName});return i.getXPathByElement(t.parentNode,e)+"/"+t.nodeName.toLowerCase()+(1<o.length?"["+(1+Array.from(o).indexOf(t))+"]":"")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var s=o(1),u=o(3),a=o(2),l=o(0),f=o(4),i=o(31),n=o(30),c=o(56),d=o(59),p=o(109),h=o(60),v=o(35),r=o(61),m=o(116),Jodit=function(r){function Jodit(t,i){var n=r.call(this)||this;if(n.__defaultStyleDisplayKey="data-jodit-default-style-display",n.__defaultClassesKey="data-jodit-default-classes",n.commands={},n.__selectionLocked=null,n.__wasReadOnly=!1,n.storage=new v.Storage(new h.LocalStorageProvider),n.iframe=null,n.__plugins={},n.mode=a.MODE_WYSIWYG,n.__callChangeCount=0,n.isInited=!1,n.options=new u.OptionsDefault(i),n.editorDocument=n.options.ownerDocument,n.editorWindow=n.options.ownerWindow,n.ownerDocument=n.options.ownerDocument,n.ownerWindow=n.options.ownerWindow,"string"==typeof t)try{n.element=n.ownerDocument.querySelector(t);}catch(e){throw Error('String "'+t+'" should be valid HTML selector')}else n.element=t;if(!n.element||"object"!=typeof n.element||n.element.nodeType!==Node.ELEMENT_NODE||!n.element.cloneNode)throw Error('Element "'+t+'" should be string or HTMLElement instance');n.element.attributes&&Array.from(n.element.attributes).forEach(function(e){var t=e.name,o=e.value;void 0===Jodit.defaultOptions[t]||i&&void 0!==i[t]||(~["readonly","disabled"].indexOf(t)&&(o=""===o||"true"===o),/^[0-9]+(\.)?([0-9]+)?$/.test(""+o)&&(o=+o),n.options[t]=o);}),n.options.events&&Object.keys(n.options.events).forEach(function(e){n.events.on(e,n.options.events[e]);}),n.container.classList.add("jodit_container"),n.container.setAttribute("contenteditable","false"),n.selection=new d.Select(n),n.events.on("removeMarkers",function(){n.selection&&n.selection.removeMarkers();}),n.observer=new c.Observer(n);var o=null;n.options.inline&&(~["TEXTAREA","INPUT"].indexOf(n.element.nodeName)||(n.container=n.element,n.element.setAttribute(n.__defaultClassesKey,""+n.element.className),o=n.container.innerHTML,n.container.innerHTML=""),n.container.classList.add("jodit_inline"),n.container.classList.add("jodit_container")),n.element!==n.container&&(n.element.style.display&&n.element.setAttribute(n.__defaultStyleDisplayKey,n.element.style.display),n.element.style.display="none"),n.container.classList.add("jodit_"+(n.options.theme||"default")+"_theme"),n.options.zIndex&&(n.container.style.zIndex=""+parseInt(""+n.options.zIndex,10)),n.workplace=n.create.div("jodit_workplace",{contenteditable:!1}),n.options.toolbar&&n.toolbar.build(f.splitArray(n.options.buttons).concat(n.options.extraButtons),n.container);var e=n.options.toolbarButtonSize.toLowerCase();return n.container.classList.add("jodit_toolbar_size-"+(~["middle","large","small"].indexOf(e)?e:"middle")),n.options.textIcons&&n.container.classList.add("jodit_text_icons"),n.events.on(n.ownerWindow,"resize",function(){n.events&&n.events.fire("resize");}),n.container.appendChild(n.workplace),n.statusbar=new p.StatusBar(n,n.container),n.workplace.appendChild(n.progress_bar),n.element.parentNode&&n.element!==n.container&&n.element.parentNode.insertBefore(n.container,n.element),n.id=n.element.getAttribute("id")||""+(new Date).getTime(),n.editor=n.create.div("jodit_wysiwyg",{contenteditable:!0,"aria-disabled":!1,tabindex:n.options.tabIndex}),n.workplace.appendChild(n.editor),n.setNativeEditorValue(n.getElementValue()),s.__awaiter(n,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return [4,this.beforeInitHook()];case 1:return e.sent(),[4,this.events.fire("beforeInit",this)];case 2:e.sent();try{this.__initPlugines();}catch(e){}return [4,this.__initEditor(o)];case 3:return e.sent(),this.isDestructed?[2]:((t=this.options).enableDragAndDropFileToEditor&&t.uploader&&(t.uploader.url||t.uploader.insertImageAsBase64URI)&&this.uploader.bind(this.editor),this.isInited=!0,this.events?[4,this.events.fire("afterInit",this)]:[3,5]);case 4:e.sent(),this.events.fire("afterConstructor",this),e.label=5;case 5:return [4,this.afterInitHook()];case 6:return e.sent(),[2]}})}),n}return s.__extends(Jodit,r),Object.defineProperty(Jodit.prototype,"value",{get:function(){return this.getEditorValue()},set:function(e){this.setEditorValue(e);},enumerable:!0,configurable:!0}),Object.defineProperty(Jodit.prototype,"defaultTimeout",{get:function(){return this.options&&this.options.observer?this.options.observer.timeout:Jodit.defaultOptions.observer.timeout},enumerable:!0,configurable:!0}),Jodit.Array=function(e){return new i.JoditArray(e)},Jodit.Object=function(e){return new n.JoditObject(e)},Jodit.fireEach=function(i){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];Object.keys(Jodit.instances).forEach(function(e){var t,o=Jodit.instances[e];!o.isDestructed&&o.events&&(t=o.events).fire.apply(t,s.__spreadArrays([i],n));});},Object.defineProperty(Jodit.prototype,"uploader",{get:function(){return this.getInstance("Uploader")},enumerable:!0,configurable:!0}),Object.defineProperty(Jodit.prototype,"filebrowser",{get:function(){return this.getInstance("FileBrowser")},enumerable:!0,configurable:!0}),Jodit.prototype.getElementValue=function(){return void 0!==this.element.value?this.element.value:this.element.innerHTML},Jodit.prototype.getNativeEditorValue=function(){return this.editor?this.editor.innerHTML:this.getElementValue()},Jodit.prototype.setNativeEditorValue=function(e){this.editor&&(this.editor.innerHTML=e);},Jodit.prototype.getEditorValue=function(e){var t;if(void 0===e&&(e=!0),void 0!==(t=this.events.fire("beforeGetValueFromEditor")))return t;t=this.getNativeEditorValue().replace(a.INVISIBLE_SPACE_REG_EXP,""),e&&(t=t.replace(/<span[^>]+id="jodit_selection_marker_[^>]+><\/span>/g,"")),"<br>"===t&&(t="");var o={value:t};return this.events.fire("afterGetValueFromEditor",o),o.value},Jodit.prototype.getEditorText=function(){if(this.editor)return this.editor.textContent||"";var e=this.create.inside.div();return e.innerHTML=this.getElementValue(),e.textContent||""},Jodit.prototype.setElementValue=function(e){if("string"!=typeof e&&void 0!==e)throw Error("value must be string");void 0!==e?this.element!==this.container&&(void 0!==this.element.value?this.element.value=e:this.element.innerHTML=e):e=this.getElementValue(),e!==this.getEditorValue()&&this.setEditorValue(e);},Jodit.prototype.setEditorValue=function(e){var t=this.events.fire("beforeSetValueToEditor",e);if(!1!==t)if("string"==typeof t&&(e=t),this.editor){if("string"!=typeof e&&void 0!==e)throw Error("value must be string");void 0!==e&&this.editor.innerHTML!==e&&this.setNativeEditorValue(e);var o=this.getElementValue(),i=this.getEditorValue();if(o!==i&&this.__callChangeCount<10){this.setElementValue(i),this.__callChangeCount+=1;try{this.events.fire("change",i,o);}finally{this.__callChangeCount=0;}}}else void 0!==e&&this.setElementValue(e);},Jodit.prototype.registerCommand=function(e,t){var o=e.toLowerCase();if(void 0===this.commands[o]&&(this.commands[o]=[]),this.commands[o].push(t),"function"!=typeof t){var i=this.options.commandToHotkeys[o]||this.options.commandToHotkeys[e]||t.hotkeys;i&&this.registerHotkeyToCommand(i,o);}return this},Jodit.prototype.registerHotkeyToCommand=function(e,t){var o=this,i=f.asArray(e).map(f.normalizeKeyAliases).map(function(e){return e+".hotkey"}).join(" ");this.events.off(i).on(i,function(){return o.execCommand(t)});},Jodit.prototype.execCommand=function(e,t,o){if(void 0===t&&(t=!1),void 0===o&&(o=null),!this.options.readonly||"selectall"===e){var i;if(e=e.toLowerCase(),!1!==(i=this.events.fire("beforeCommand",e,t,o))&&(i=this.execCustomCommands(e,t,o)),!1!==i)if(this.selection.focus(),"selectall"===e)this.selection.select(this.editor,!0);else try{i=this.editorDocument.execCommand(e,t,o);}catch(e){}return this.events.fire("afterCommand",e,t,o),this.setEditorValue(),i}},Jodit.prototype.execCustomCommands=function(e,t,o){var i,n;if(void 0===t&&(t=!1),void 0===o&&(o=null),e=e.toLowerCase(),void 0!==this.commands[e]){for(var r,s=0;s<this.commands[e].length;s+=1)void 0!==(n=("function"==typeof(i=this.commands[e][s])?i:i.exec).call(this,e,t,o))&&(r=n);return r}},Jodit.prototype.lock=function(e){return void 0===e&&(e="any"),!!r.prototype.lock.call(this,e)&&(this.__selectionLocked=this.selection.save(),this.editor.classList.add("jodit_disabled"),!0)},Jodit.prototype.unlock=function(){return !!r.prototype.unlock.call(this)&&(this.editor.classList.remove("jodit_disabled"),this.__selectionLocked&&this.selection.restore(this.__selectionLocked),!0)},Jodit.prototype.getMode=function(){return this.mode},Jodit.prototype.isEditorMode=function(){return this.getRealMode()===a.MODE_WYSIWYG},Jodit.prototype.getRealMode=function(){if(this.getMode()!==a.MODE_SPLIT)return this.getMode();var e=this.ownerDocument.activeElement;return e&&(l.Dom.isOrContains(this.editor,e)||l.Dom.isOrContains(this.toolbar.container,e))?a.MODE_WYSIWYG:a.MODE_SOURCE},Jodit.prototype.setMode=function(e){var t=this,o=this.getMode(),i={mode:parseInt(""+e,10)},n=["jodit_wysiwyg_mode","jodit_source_mode","jodit_split_mode"];!1!==this.events.fire("beforeSetMode",i)&&(this.mode=f.inArray(i.mode,[a.MODE_SOURCE,a.MODE_WYSIWYG,a.MODE_SPLIT])?i.mode:a.MODE_WYSIWYG,this.options.saveModeInStorage&&this.storage.set("jodit_default_mode",this.mode),n.forEach(function(e){t.container.classList.remove(e);}),this.container.classList.add(n[this.mode-1]),o!==this.getMode()&&this.events.fire("afterSetMode"));},Jodit.prototype.toggleMode=function(){var e=this.getMode();f.inArray(e+1,[a.MODE_SOURCE,a.MODE_WYSIWYG,this.options.useSplitMode?a.MODE_SPLIT:9])?e+=1:e=a.MODE_WYSIWYG,this.setMode(e);},Jodit.prototype.i18n=function(e){for(var t=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];function n(e){return o.length?f.sprintf.apply(t,[e].concat(o)):e}var r,s=void 0!==this.options&&this.options.debugLanguage,a="auto"===u.Config.defaultOptions.language?f.defaultLanguage(u.Config.defaultOptions.language):u.Config.defaultOptions.language,l=f.defaultLanguage(this.options?this.options.language:a);if(r=void 0!==this.options&&void 0!==Jodit.lang[l]?Jodit.lang[l]:void 0!==Jodit.lang[a]?Jodit.lang[a]:Jodit.lang.en,void 0!==this.options&&void 0!==this.options.i18n[l]&&this.options.i18n[l][e])return n(this.options.i18n[l][e]);if("string"==typeof r[e]&&r[e])return n(r[e]);var c=e.toLowerCase();if("string"==typeof r[c]&&r[c])return n(r[c]);var d=m.ucfirst(e);return "string"==typeof r[d]&&r[d]?n(r[d]):s?"{"+e+"}":n("string"==typeof Jodit.lang.en[e]&&Jodit.lang.en[e]?Jodit.lang.en[e]:e)},Jodit.prototype.setDisabled=function(e){this.options.disabled=e;var t=this.__wasReadOnly;this.setReadOnly(e||t),this.__wasReadOnly=t,this.editor&&(this.editor.setAttribute("aria-disabled",""+e),this.container.classList.toggle("jodit_disabled",e),this.events.fire("disabled",e));},Jodit.prototype.getDisabled=function(){return this.options.disabled},Jodit.prototype.setReadOnly=function(e){this.__wasReadOnly!==e&&(this.__wasReadOnly=e,(this.options.readonly=e)?this.editor&&this.editor.removeAttribute("contenteditable"):this.editor&&this.editor.setAttribute("contenteditable","true"),this.events&&this.events.fire("readonly",e));},Jodit.prototype.getReadOnly=function(){return this.options.readonly},Jodit.prototype.beforeInitHook=function(){},Jodit.prototype.afterInitHook=function(){},Jodit.prototype.__initPlugines=function(){var t=this,e=this.options.disablePlugins,o=Array.isArray(e)?e.map(function(e){return e.toLowerCase()}):e.toLowerCase().split(/[\s,]+/);Object.keys(Jodit.plugins).forEach(function(e){~o.indexOf(e.toLowerCase())||(t.__plugins[e]=new Jodit.plugins[e](t));});},Jodit.prototype.__initEditor=function(i){return s.__awaiter(this,void 0,void 0,function(){var t,o;return s.__generator(this,function(e){switch(e.label){case 0:return [4,this.__createEditor()];case 1:if(e.sent(),this.isDestructed)return [2];this.element!==this.container?this.setElementValue():null!==i&&this.setEditorValue(i),t=(Jodit.instances[this.id]=this).options.defaultMode,this.options.saveModeInStorage&&null!==(o=this.storage.get("jodit_default_mode"))&&(t=parseInt(o,10)),this.setMode(t),this.options.readonly&&this.setReadOnly(!0),this.options.disabled&&this.setDisabled(!0);try{this.editorDocument.execCommand("defaultParagraphSeparator",!1,this.options.enter.toLowerCase());}catch(e){}try{this.editorDocument.execCommand("enableObjectResizing",!1,"false");}catch(e){}try{this.editorDocument.execCommand("enableInlineTableEditing",!1,"false");}catch(e){}return [2]}})})},Jodit.prototype.__createEditor=function(){return s.__awaiter(this,void 0,void 0,function(){var t,o,i,n=this;return s.__generator(this,function(e){switch(e.label){case 0:return t=this.editor,[4,this.events.fire("createEditor",this)];case 1:return o=e.sent(),this.isDestructed||(!1===o&&l.Dom.safeRemove(t),this.options.editorCssClass&&this.editor.classList.add(this.options.editorCssClass),this.options.style&&f.css(this.editor,this.options.style),this.events.on("synchro",function(){n.setEditorValue();}).on(this.editor,"selectionchange selectionstart keydown keyup keypress mousedown mouseup mousepress click copy cut dragstart drop dragover paste resize touchstart touchend focus blur",function(e){if(!n.options.readonly&&n.events&&n.events.fire){if(!1===n.events.fire(e.type,e))return !1;n.setEditorValue();}}),this.options.spellcheck&&this.editor.setAttribute("spellcheck","true"),this.options.direction&&(i="rtl"==this.options.direction.toLowerCase()?"rtl":"ltr",this.editor.style.direction=i,this.container.style.direction=i,this.editor.setAttribute("dir",i),this.container.setAttribute("dir",i),this.toolbar.setDirection(i)),this.options.triggerChangeEvent&&this.events.on("change",f.debounce(function(){n.events&&n.events.fire(n.element,"change");},this.defaultTimeout))),[2]}})})},Jodit.prototype.destruct=function(){var o=this;if(!this.isDestructed&&!1!==this.events.fire("beforeDestruct")&&this.editor){var e=this.getEditorValue();if(this.element!==this.container)if(this.element.hasAttribute(this.__defaultStyleDisplayKey)){var t=this.element.getAttribute(this.__defaultStyleDisplayKey);t&&(this.element.style.display=t,this.element.removeAttribute(this.__defaultStyleDisplayKey));}else this.element.style.display="";else this.element.hasAttribute(this.__defaultClassesKey)&&(this.element.className=this.element.getAttribute(this.__defaultClassesKey)||"",this.element.removeAttribute(this.__defaultClassesKey));this.element.hasAttribute("style")&&!this.element.getAttribute("style")&&this.element.removeAttribute("style"),Object.keys(this.__plugins).forEach(function(e){var t=o.__plugins[e];void 0!==t&&void 0!==t.destruct&&"function"==typeof t.destruct&&t.destruct(),delete o.__plugins[e];}),this.observer.destruct(),this.statusbar.destruct(),delete this.observer,delete this.statusbar,delete this.storage,this.components.forEach(function(e){void 0===e.destruct||"function"!=typeof e.destruct||e.isDestructed||e.destruct();}),this.components.length=0,this.commands={},delete this.selection,this.__selectionLocked=null,this.events.off(this.ownerWindow),this.events.off(this.ownerDocument),this.events.off(this.ownerDocument.body),this.events.off(this.element),this.events.off(this.editor),l.Dom.safeRemove(this.workplace),l.Dom.safeRemove(this.editor),l.Dom.safeRemove(this.progress_bar),l.Dom.safeRemove(this.iframe),this.container!==this.element&&l.Dom.safeRemove(this.container),delete this.workplace,delete this.editor,delete this.progress_bar,delete this.iframe,this.container===this.element&&(this.element.innerHTML=e),delete Jodit.instances[this.id],r.prototype.destruct.call(this),delete this.container;}},Jodit.plugins={},Jodit.modules={},Jodit.instances={},Jodit.lang={},Jodit}(r.ViewWithToolbar);t.Jodit=Jodit;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(16);t.Dialog=i.Dialog;var n=o(136);t.Alert=n.Alert;var r=o(65);t.Promt=r.Promt;var s=o(66);t.Confirm=s.Confirm;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var h=o(30),v=o(31),m=o(32),g=o(21);t.extend=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i,n,r,s,a,l,c,d=t.length,u=t[0]||{},f=1,p=!1;for("boolean"==typeof u&&(p=u,u=t[f]||{},f+=1),"object"!=typeof u&&"function"===m.type(u)&&(u={}),f===d&&(u=this,f+=1);f<d;f+=1)if(null!=(i=t[f]))for(c=Object.keys(i),l=0;l<c.length;l+=1)r=u[n=c[l]],u!==(s=i[n])&&(p&&s&&(g.isPlainObject(s)&&!(s instanceof h.JoditObject)||Array.isArray(s)&&!(s instanceof v.JoditArray))?(a=Array.isArray(s)?r&&Array.isArray(r)?r:[]:r&&g.isPlainObject(r)?r:{},u[n]=e(p,a,s)):void 0!==s&&(u[n]=s));return u};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isJoditObject=function(e){return !!(e&&e instanceof Object&&"function"==typeof e.constructor&&"Jodit"===e.constructor.name)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(3),a=o(2),l=o(4),i=o(62),n=o(0),c=o(15);s.Config.prototype.dialog={resizable:!0,draggable:!0,buttons:["dialog.close"],removeButtons:[]},s.Config.prototype.controls.dialog={close:{icon:"cancel",exec:function(e){e.close();}},fullsize:{icon:"fullsize",getLabel:function(e,t,o){if(s.Config.prototype.controls.fullsize&&s.Config.prototype.controls.fullsize.getLabel&&"function"==typeof s.Config.prototype.controls.fullsize.getLabel)return s.Config.prototype.controls.fullsize.getLabel(e,t,o)},exec:function(e){e.toggleFullSize();}}};var d,u=(r.__extends(f,d=i.View),f.prototype.setElements=function(o,e){var i=this,n=[];l.asArray(e).forEach(function(e){var t="string"==typeof e?i.create.fromHTML(e):e;n.push(t),t.parentNode!==o&&o.appendChild(t);}),Array.from(o.childNodes).forEach(function(e){~n.indexOf(e)||o.removeChild(e);});},f.prototype.onResizerMouseDown=function(e){this.resizable=!0,this.startX=e.clientX,this.startY=e.clientY,this.startPoint.w=this.dialog.offsetWidth,this.startPoint.h=this.dialog.offsetHeight,this.lockSelect(),this.jodit.events&&this.jodit.events.fire(this,"startResize");},f.prototype.setSize=function(e,t){e&&l.css(this.dialog,"width",e),t&&l.css(this.dialog,"height",t);},f.prototype.setPosition=function(e,t){var o=this.window.innerWidth/2-this.dialog.offsetWidth/2,i=this.window.innerHeight/2-this.dialog.offsetHeight/2;o<0&&(o=0),i<0&&(i=0),void 0!==e&&void 0!==t&&(this.offsetX=e,this.offsetY=t,this.moved=100<Math.abs(e-o)||100<Math.abs(t-i)),this.dialog.style.left=(e||o)+"px",this.dialog.style.top=(t||i)+"px";},f.prototype.setTitle=function(e){this.setElements(this.dialogbox_header,e);},f.prototype.setContent=function(e){this.setElements(this.dialogbox_content,e);},f.prototype.setFooter=function(e){this.setElements(this.dialogbox_footer,e),this.dialog.classList.toggle("with_footer",!!e);},f.prototype.getZIndex=function(){return parseInt(this.container.style.zIndex||"0",10)},f.prototype.getMaxZIndexDialog=function(){var t,o,i=0,n=this;return l.$$(".jodit_dialog_box",this.destination).forEach(function(e){t=e.__jodit_dialog,o=parseInt(l.css(e,"zIndex"),10),t.isOpened()&&!isNaN(o)&&i<o&&(n=t,i=o);}),n},f.prototype.setMaxZIndex=function(){var t=0,o=0;l.$$(".jodit_dialog_box",this.destination).forEach(function(e){o=parseInt(l.css(e,"zIndex"),10),t=Math.max(isNaN(o)?0:o,t);}),this.container.style.zIndex=""+(t+1);},f.prototype.maximization=function(t){return "boolean"!=typeof t&&(t=!this.container.classList.contains("jodit_dialog_box-fullsize")),this.container.classList.toggle("jodit_dialog_box-fullsize",t),[this.destination,this.destination.parentNode].forEach(function(e){e&&e.classList&&e.classList.toggle("jodit_fullsize_box",t);}),this.iSetMaximization=t},f.prototype.open=function(e,t,o,i){this.jodit&&this.jodit.events&&!1===this.jodit.events.fire(this,"beforeOpen")||(this.destroyAfterClose=!0===o,void 0!==t&&this.setTitle(t),e&&this.setContent(e),this.container.classList.add("active"),i&&this.container.classList.add("jodit_modal"),this.setPosition(this.offsetX,this.offsetY),this.setMaxZIndex(),this.options.fullsize&&this.maximization(!0),this.jodit&&this.jodit.events&&this.jodit.events.fire("afterOpen",this));},f.prototype.isOpened=function(){return !this.isDestructed&&this.container&&this.container.classList.contains("active")},f.prototype.destruct=function(){this.isDestructed||(this.toolbar&&(this.toolbar.destruct(),delete this.toolbar),this.events&&this.events.off(this.window,"mousemove",this.onMouseMove).off(this.window,"mouseup",this.onMouseUp).off(this.window,"keydown",this.onKeyDown).off(this.window,"resize",this.onResize),!this.jodit&&this.events&&(this.events.destruct(),delete this.events),this.container&&(n.Dom.safeRemove(this.container),delete this.container),d.prototype.destruct.call(this));},f);function f(e,t){void 0===t&&(t=s.Config.prototype.dialog);var o=d.call(this,e,t)||this;o.destination=document.body,o.destroyAfterClose=!1,o.moved=!1,o.iSetMaximization=!1,o.resizable=!1,o.draggable=!1,o.startX=0,o.startY=0,o.startPoint={x:0,y:0,w:0,h:0},o.lockSelect=function(){o.container.classList.add("jodit_dialog_box-moved");},o.unlockSelect=function(){o.container.classList.remove("jodit_dialog_box-moved");},o.onMouseUp=function(){(o.draggable||o.resizable)&&(o.draggable=!1,o.resizable=!1,o.unlockSelect(),o.jodit&&o.jodit.events&&o.jodit.events.fire(o,"endResize endMove"));},o.onHeaderMouseDown=function(e){var t=e.target;!o.options.draggable||t&&t.nodeName.match(/^(INPUT|SELECT)$/)||(o.draggable=!0,o.startX=e.clientX,o.startY=e.clientY,o.startPoint.x=l.css(o.dialog,"left"),o.startPoint.y=l.css(o.dialog,"top"),o.setMaxZIndex(),e.preventDefault(),o.lockSelect(),o.jodit&&o.jodit.events&&o.jodit.events.fire(o,"startMove"));},o.onMouseMove=function(e){o.draggable&&o.options.draggable&&(o.setPosition(o.startPoint.x+e.clientX-o.startX,o.startPoint.y+e.clientY-o.startY),o.jodit&&o.jodit.events&&o.jodit.events.fire(o,"move",e.clientX-o.startX,e.clientY-o.startY),e.stopImmediatePropagation(),e.preventDefault()),o.resizable&&o.options.resizable&&(o.setSize(o.startPoint.w+e.clientX-o.startX,o.startPoint.h+e.clientY-o.startY),o.jodit&&o.jodit.events&&o.jodit.events.fire(o,"resizeDialog",e.clientX-o.startX,e.clientY-o.startY),e.stopImmediatePropagation(),e.preventDefault());},o.onKeyDown=function(e){if(o.isOpened()&&e.which===a.KEY_ESC){var t=o.getMaxZIndexDialog();t?t.close():o.close(),e.stopImmediatePropagation();}},o.onResize=function(){o.options&&o.options.resizable&&!o.moved&&o.isOpened()&&!o.offsetX&&!o.offsetY&&o.setPosition();},o.document=document,o.window=window,o.close=function(e){o.isDestructed||(e&&(e.stopImmediatePropagation(),e.preventDefault()),o.jodit&&o.jodit.events&&o.jodit.events.fire("beforeClose",o),o.container&&o.container.classList&&o.container.classList.remove("active"),o.iSetMaximization&&o.maximization(!1),o.destroyAfterClose&&o.destruct(),o.jodit&&o.jodit.events&&(o.jodit.events.fire(o,"afterClose"),o.jodit.events.fire(o.ownerWindow,"jodit_close_dialog")));},c.isJoditObject(e)&&(o.window=e.ownerWindow,o.document=e.ownerDocument,e.events.on("beforeDestruct",function(){o.destruct();}));var i=o;i.options=r.__assign(r.__assign({},e&&e.options?e.options.dialog:s.Config.prototype.dialog),i.options),i.container=o.create.fromHTML('<div style="z-index:'+i.options.zIndex+'" class="jodit jodit_dialog_box"><div class="jodit_dialog_overlay"></div><div class="jodit_dialog"><div class="jodit_dialog_header non-selected"><div class="jodit_dialog_header-title"></div><div class="jodit_dialog_header-toolbar"></div></div><div class="jodit_dialog_content"></div><div class="jodit_dialog_footer"></div>'+(i.options.resizable?'<div class="jodit_dialog_resizer"></div>':"")+"</div></div>"),e&&e.id&&i.container.setAttribute("data-editor_id",e.id),Object.defineProperty(i.container,"__jodit_dialog",{value:i}),i.dialog=i.container.querySelector(".jodit_dialog"),i.resizer=i.container.querySelector(".jodit_dialog_resizer"),i.jodit&&i.jodit.options&&i.jodit.options.textIcons&&i.container.classList.add("jodit_text_icons"),i.dialogbox_header=i.container.querySelector(".jodit_dialog_header>.jodit_dialog_header-title"),i.dialogbox_content=i.container.querySelector(".jodit_dialog_content"),i.dialogbox_footer=i.container.querySelector(".jodit_dialog_footer"),i.dialogbox_toolbar=i.container.querySelector(".jodit_dialog_header>.jodit_dialog_header-toolbar"),i.destination.appendChild(i.container),i.container.addEventListener("close_dialog",i.close),i.toolbar=h.JoditToolbarCollection.makeCollection(i),i.toolbar.build(i.options.buttons,i.dialogbox_toolbar),i.events.on(o.window,"mousemove",i.onMouseMove).on(o.window,"mouseup",i.onMouseUp).on(o.window,"keydown",i.onKeyDown).on(o.window,"resize",i.onResize);var n=i.container.querySelector(".jodit_dialog_header");return n&&n.addEventListener("mousedown",i.onHeaderMouseDown.bind(i)),i.options.resizable&&i.resizer.addEventListener("mousedown",i.onResizerMouseDown.bind(i)),p.Jodit.plugins.fullsize(i),o}t.Dialog=u;var p=o(12),h=o(37);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var u,d=o(0),f=o(4),p=o(6);(u=t.Widget||(t.Widget={})).ColorPickerWidget=function(n,r,e){function s(e,t){e.innerHTML=p.ToolbarIcon.getIcon("eye"),e.classList.add("active");var o=f.hexToRgb(t);o&&(e.firstChild.style.fill="rgb("+(255-o.r)+","+(255-o.g)+","+(255-o.b)+")");}var i=f.normalizeColor(e),a=n.create.div("jodit_colorpicker"),l=n.options.textIcons?"":p.ToolbarIcon.getIcon("eye"),t=n.options.textIcons?"<span>"+n.i18n("eraser")+"</span>":p.ToolbarIcon.getIcon("eraser"),o=n.options.textIcons?"<span>"+n.i18n("palette")+"</span>":p.ToolbarIcon.getIcon("palette"),c=function(t){var o=[];return f.isPlainObject(t)?Object.keys(t).forEach(function(e){o.push('<div class="jodit_colorpicker_group jodit_colorpicker_group-'+e+'">'),o.push(c(t[e])),o.push("</div>");}):Array.isArray(t)&&t.forEach(function(e){o.push("<a "+(i===e?' class="active" ':"")+' title="'+e+'" style="background-color:'+e+'" data-color="'+e+'" href="javascript:void(0)">'+(i===e?l:"")+"</a>");}),o.join("")};return a.appendChild(n.create.fromHTML("<div>"+c(n.options.colors)+"</div>")),a.appendChild(n.create.fromHTML("<a "+(n.options.textIcons?'class="jodit_text_icon"':"")+' data-color="" href="javascript:void(0)">'+t+"</a>")),n.options.showBrowserColorPicker&&f.hasBrowserColorPicker()&&(a.appendChild(n.create.fromHTML("<span><em "+(n.options.textIcons?'class="jodit_text_icon"':"")+">"+o+'</em><input type="color" value=""/></span>')),n.events.on(a,"change",function(e){e.stopPropagation();var t=e.target;if(t&&t.tagName&&"INPUT"==t.tagName.toUpperCase()){var o=t.value||"";o&&s(t,o),r&&"function"==typeof r&&r(o),e.preventDefault();}})),n.events.on(a,"mousedown touchend",function(e){e.stopPropagation();var t=e.target;if(t&&t.tagName&&"SVG"!=t.tagName.toUpperCase()&&"PATH"!=t.tagName.toUpperCase()||!t.parentNode||(t=d.Dom.closest(t.parentNode,"A",n.editor)),"A"==t.tagName.toUpperCase()){var o=a.querySelector("a.active");o&&(o.classList.remove("active"),o.innerHTML="");var i=t.getAttribute("data-color")||"";i&&s(t,i),r&&"function"==typeof r&&r(i),e.preventDefault();}}),a},u.TabsWidget=function(r,e,s){var t=r.create.div("jodit_tabs"),a=r.create.div("jodit_tabs_wrapper"),l=r.create.div("jodit_tabs_buttons"),c={},d="",u=0;return t.appendChild(l),t.appendChild(a),f.each(e,function(t,o){var i=r.create.div("jodit_tab"),n=r.create.element("a",{href:"javascript:void(0);"});d=d||""+t,n.innerHTML=/<svg/.test(""+t)?t:r.i18n(""+t),l.appendChild(n),i.appendChild("function"!=typeof o?o:r.create.div("jodit_tab_empty")),a.appendChild(i),r.events.on(n,"mousedown touchend",function(e){return f.$$("a",l).forEach(function(e){e.classList.remove("active");}),f.$$(".jodit_tab",a).forEach(function(e){e.classList.remove("active");}),n.classList.add("active"),i.classList.add("active"),"function"==typeof o&&o.call(r),e.stopPropagation(),s&&(s.__activeTab=""+t),!1}),c[t]={button:n,tab:i},u+=1;}),u&&(f.$$("a",l).forEach(function(e){e.style.width=(100/u).toFixed(10)+"%";}),s&&s.__activeTab&&c[s.__activeTab]?(c[s.__activeTab].button.classList.add("active"),c[s.__activeTab].tab.classList.add("active")):(c[d].button.classList.add("active"),c[d].tab.classList.add("active"))),t},u.FileSelectorWidget=function(t,o,e,i,n){var r;void 0===n&&(n=!0);var s={};if(o.upload&&t.options.uploader&&(t.options.uploader.url||t.options.uploader.insertImageAsBase64URI)){var a=t.create.fromHTML('<div class="jodit_draganddrop_file_box"><strong>'+t.i18n(n?"Drop image":"Drop file")+"</strong><span><br>"+t.i18n("or click")+'</span><input type="file" accept="'+(n?"image/*":"*")+'" tabindex="-1" dir="auto" multiple=""/></div>');t.getInstance("Uploader").bind(a,function(e){"function"==typeof o.upload&&o.upload.call(t,{baseurl:e.baseurl,files:e.files});},function(e){t.events.fire("errorMessage",e.message);}),s[(t.options.textIcons?"":p.ToolbarIcon.getIcon("upload"))+t.i18n("Upload")]=a;}if(o.filebrowser&&(t.options.filebrowser.ajax.url||t.options.filebrowser.items.url)&&(s[(t.options.textIcons?"":p.ToolbarIcon.getIcon("folder"))+t.i18n("Browse")]=function(){i&&i(),o.filebrowser&&t.getInstance("FileBrowser").open(o.filebrowser,n);}),o.url){var l=t.create.fromHTML('<form onsubmit="return false;" class="jodit_form"><input type="text" required name="url" placeholder="http://"/><input type="text" name="text" placeholder="'+t.i18n("Alternative text")+'"/><div style="text-align: right"><button>'+t.i18n("Insert")+"</button></div></form>"),c=l.querySelector("button"),d=l.querySelector("input[name=url]");r=null,e&&e.nodeType!==Node.TEXT_NODE&&("IMG"===e.tagName||f.$$("img",e).length)&&(r="IMG"===e.tagName?e:f.$$("img",e)[0],f.val(l,"input[name=url]",r.getAttribute("src")),f.val(l,"input[name=text]",r.getAttribute("alt")),c.textContent=t.i18n("Update")),e&&e.nodeType!==Node.TEXT_NODE&&"A"===e.nodeName&&(f.val(l,"input[name=url]",e.getAttribute("href")||""),f.val(l,"input[name=text]",e.getAttribute("title")||""),c.textContent=t.i18n("Update")),l.addEventListener("submit",function(e){return e.preventDefault(),e.stopPropagation(),f.val(l,"input[name=url]")?"function"==typeof o.url&&o.url.call(t,f.val(l,"input[name=url]"),f.val(l,"input[name=text]")):(d.focus(),d.classList.add("jodit_error")),!1},!1),s[(t.options.textIcons?"":p.ToolbarIcon.getIcon("link"))+" URL"]=l;}return u.TabsWidget(t,s)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeout=function(e,t,o,i,n){return t?window.setTimeout.call(window,e,t,o,i,n):(e.call(null,o,i,n),0)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(91),t),i.__exportStar(o(92),t),i.__exportStar(o(93),t),i.__exportStar(o(94),t),i.__exportStar(o(95),t),i.__exportStar(o(96),t),i.__exportStar(o(97),t),i.__exportStar(o(49),t),i.__exportStar(o(98),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a,i=o(1),n=o(36),s=o(0),l=o(10),r=o(2),c=o(15),d=(i.__extends(u,a=n.ToolbarCollection),u.prototype.buttonIsActive=function(e){var t=this,o=a.prototype.buttonIsActive.call(this,e);if(void 0!==o)return o;var i,n,r=!!this.jodit.selection&&this.jodit.selection.current();return !(!r||!((e.control.tags||e.control.options&&e.control.options.tags)&&(i=e.control.tags||e.control.options&&e.control.options.tags,s.Dom.up(r,function(e){if(e&&~i.indexOf(e.nodeName.toLowerCase()))return !0},this.jodit.editor))||(e.control.css||e.control.options&&e.control.options.css)&&(n=e.control.css||e.control.options&&e.control.options.css,s.Dom.up(r,function(e){if(e&&e.nodeType!==Node.TEXT_NODE)return t.checkActiveStatus(n,e)},this.jodit.editor))))},u.prototype.buttonIsDisabled=function(e){var t=a.prototype.buttonIsDisabled.call(this,e);if(void 0!==t)return t;var o=void 0===e.control||void 0===e.control.mode?r.MODE_WYSIWYG:e.control.mode;return !(o===r.MODE_SPLIT||o===this.jodit.getRealMode())},u.prototype.getTarget=function(e){return e.target||this.jodit.selection.current()||void 0},u.makeCollection=function(e){var t=c.isJoditObject(e)?new u(e):new n.ToolbarCollection(e);return e.options.textIcons&&t.container.classList.add("jodit_text_icons"),t},u);function u(){var s=null!==a&&a.apply(this,arguments)||this;return s.checkActiveStatus=function(o,i){var n=0,r=0;return Object.keys(o).forEach(function(e){var t=o[e];"function"==typeof t?t(s.jodit,""+l.css(i,e))&&(n+=1):~t.indexOf(""+l.css(i,e))&&(n+=1),r+=1;}),r===n},s}t.JoditToolbarCollection=d;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(43),n=o(32);t.isPlainObject=function(e){return !("object"!=typeof e||e.nodeType||i.isWindow(e)||e.constructor&&!n.hasOwn.call(e.constructor.prototype,"isPrototypeOf"))};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isNumeric=function(e){if("string"==typeof e){if(!e.match(/^([+\-])?[0-9]+(\.?)([0-9]+)?(e[0-9]+)?$/))return !1;e=parseFloat(e);}return !isNaN(e)&&isFinite(e)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(99),t),i.__exportStar(o(100),t),i.__exportStar(o(101),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.each=function(e,t){var o,i,n;if(Array.isArray(e)){for(o=e.length,n=0;n<o;n+=1)if(!1===t.call(e[n],n,e[n]))return !1}else for(i=Object.keys(e),n=0;n<i.length;n+=1)if(!1===t.call(e[i[n]],i[n],e[i[n]]))return !1;return !0};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n,i=o(1),r=o(8),s=o(36),a=o(6),l=o(0),c=o(9),d=(i.__extends(u,n=r.Component),u.prototype.focus=function(){this.container.focus();},u.prototype.destruct=function(){this.isDestructed||(l.Dom.safeRemove(this.container),this.parentToolbar=void 0,n.prototype.destruct.call(this));},u.prototype.createIcon=function(e,t){var o=t?t.icon||t.name:e;if(this.jodit.options.textIcons)return this.jodit.create.fromHTML('<span class="jodit_icon">'+this.jodit.i18n(t?t.name:e)+"</span>");var i=this.jodit.events.fire("getIcon",o,t,e),n=void 0;return t&&t.iconURL&&void 0===i?(n=this.jodit.create.element("i")).style.backgroundImage="url("+t.iconURL+")":(void 0===i&&(i=a.ToolbarIcon.exists(o)?a.ToolbarIcon.getIcon(o):a.ToolbarIcon.getIcon("empty")),n="string"==typeof i?this.jodit.create.fromHTML(c.trim(i)):i),n.classList.add("jodit_icon","jodit_icon_"+e),n},u);function u(e,t,o){void 0===t&&(t="li"),void 0===o&&(o="jodit_toolbar_btn");var i=this;return e instanceof s.ToolbarCollection?(i=n.call(this,e.jodit)||this).parentToolbar=e:i=n.call(this,e)||this,i.container=i.jodit.create.element(t),i.container.classList.add(o),i}t.ToolbarElement=d;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var c,i=o(1),d=o(0),u=o(4),n=o(25),f=o(113),p=o(27),h=o(114),v=o(15),m=o(2),g=o(6),r=(i.__extends(s,c=n.ToolbarElement),Object.defineProperty(s.prototype,"disable",{get:function(){return this.__disabled},set:function(e){this.__disabled=e,this.container.classList.toggle("jodit_disabled",e),e?this.container.hasAttribute("disabled")||this.container.setAttribute("disabled","disabled"):this.container.hasAttribute("disabled")&&this.container.removeAttribute("disabled");},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this.__actived},set:function(e){this.__actived=e,this.container.classList.toggle("jodit_active",e);},enumerable:!0,configurable:!0}),s.prototype.isDisable=function(){return !(!this.parentToolbar||!this.parentToolbar.buttonIsDisabled(this))},s.prototype.isActive=function(){return !(!this.parentToolbar||!this.parentToolbar.buttonIsActive(this))},Object.defineProperty(s.prototype,"tooltipText",{get:function(){return this.control.tooltip?this.jodit.i18n(this.control.tooltip)+(this.control.hotkeys?"<br>"+u.asArray(this.control.hotkeys).join(" "):""):""},enumerable:!0,configurable:!0}),s.prototype.focus=function(){this.anchor.focus();},s.prototype.destruct=function(){this.isDestructed||(this.jodit&&this.jodit.events&&this.jodit.events.off(this.container),c.prototype.destruct.call(this),this.tooltip&&(this.tooltip.destruct(),delete this.tooltip));},s);function s(e,t,o){var s=c.call(this,e)||this;s.__disabled=!1,s.__actived=!1,s.onMouseDown=function(e){if("keydown"!==e.type||e.which===m.KEY_ENTER){if(e.stopImmediatePropagation(),e.preventDefault(),s.disable)return !1;var t=s.control,o=function(){return s.parentToolbar&&s.parentToolbar.getTarget(s)||s.target||!1};if(t.list){var i=new f.PopupList(s.jodit,s.container,s.target);i.open(t),s.jodit.events.fire("closeAllPopups",i.container),s.anchor.setAttribute("aria-expanded","true"),s.jodit.events.on(i,"afterClose",function(){s.anchor.setAttribute("aria-expanded","false");});}else if(void 0!==t.exec&&"function"==typeof t.exec)t.exec(s.jodit,o(),t,e,s.container),s.jodit.events.fire("synchro"),s.parentToolbar&&s.parentToolbar.immedateCheckActiveButtons(),s.jodit.events.fire("closeAllPopups afterExec");else if(void 0!==t.popup&&"function"==typeof t.popup){var n=new p.Popup(s.jodit,s.container,s.target);if(!1!==s.jodit.events.fire(u.camelCase("before-"+t.name+"-OpenPopup"),o(),t,n)){var r=t.popup(s.jodit,o(),t,n.close,s);r&&n.open(r);}s.jodit.events.fire(u.camelCase("after-"+t.name+"-OpenPopup")+" closeAllPopups",n.container);}else(t.command||t.name)&&(v.isJoditObject(s.jodit)?s.jodit.execCommand(t.command||t.name,t.args&&t.args[0]||!1,t.args&&t.args[1]||null):s.jodit.ownerDocument.execCommand(t.command||t.name,t.args&&t.args[0]||!1,t.args&&t.args[1]||null),s.jodit.events.fire("closeAllPopups"));}},s.control=t,s.target=o,s.anchor=s.jodit.create.element("a",{role:"button",href:"javascript:void(0)"});var i="-1";s.jodit.options.allowTabNavigation&&(i="0"),s.anchor.setAttribute("tabindex",i),s.container.appendChild(s.anchor),s.jodit.options.showTooltip&&t.tooltip&&(s.jodit.options.useNativeTooltip?s.anchor.setAttribute("title",s.tooltipText):s.tooltip=new h.ToolbarTooltip(s),s.anchor.setAttribute("aria-label",s.tooltipText)),s.textBox=s.jodit.create.span(),s.anchor.appendChild(s.textBox);var n=t.name.replace(/[^a-zA-Z0-9]/g,"_");if(t.getContent&&"function"==typeof t.getContent){d.Dom.detach(s.container);var r=t.getContent(s.jodit,t,s);s.container.appendChild("string"==typeof r?s.jodit.create.fromHTML(r):r);}else{if(t.list&&s.anchor){var a=s.jodit.create.fromHTML(g.ToolbarIcon.getIcon("dropdown-arrow"));a.classList.add("jodit_with_dropdownlist-trigger"),s.container.classList.add("jodit_with_dropdownlist"),s.anchor.appendChild(a);}s.textBox.appendChild(s.createIcon(n,t));}if(s.container.classList.add("jodit_toolbar_btn-"+n),s.jodit.options.direction){var l=s.jodit.options.direction.toLowerCase();s.container.style.direction="rtl"==l?"rtl":"ltr";}return t.isInput?s.container.classList.add("jodit_toolbar-input"):s.jodit.events.on(s.container,"mousedown touchend keydown",s.onMouseDown).on("click-"+n+"-btn",s.onMouseDown),s}t.ToolbarButton=r;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r,i=o(1),s=o(0),a=o(4),n=o(8),l=(i.__extends(c,r=n.Component),c.prototype.calcPosition=function(){if(this.isOpened&&!this.isDestructed){var t=this.container,e=a.offset(this.jodit.container,this.jodit,this.jodit.ownerDocument,!0),o=a.offset(t,this.jodit,this.jodit.ownerDocument,!0),i=a.css(t,"marginLeft")||0;o.left-=i;var n=i,r="auto";if(n=o.left<e.left?e.left-o.left:o.left+o.width<e.left+e.width?0:-(o.left+o.width-(e.left+e.width)),o.width<e.width||(n=e.left-o.left,r=e.width),n!==i)try{t.style.setProperty("margin-left",n+"px","important");}catch(e){t.style.marginLeft=n+"px";}var s=t.querySelector(".jodit_popup_triangle");s&&(s.style.marginLeft=-n+"px"),a.css(t,"width",r);}},c.prototype.doOpen=function(e){e&&(s.Dom.detach(this.container),this.container.innerHTML='<span class="jodit_popup_triangle"></span>',this.container.appendChild(s.Dom.isNode(e,this.jodit.ownerWindow)?e:this.jodit.create.fromHTML(""+e)),this.container.style.display="block",this.container.style.removeProperty("marginLeft"));},c.prototype.doClose=function(){},c.prototype.open=function(e,t,o){void 0===o&&(o=!1),d.Jodit.fireEach("beforeOpenPopup closeAllPopups",this,e),o||this.jodit.events.on("closeAllPopups",this.close),this.container.classList.add(this.className+"-open"),this.doOpen(e),this.target.appendChild(this.container),this.jodit.options.textIcons&&this.firstInFocus(),void 0!==t&&this.container.classList.toggle("jodit_right",t),!o&&this.container.parentNode&&this.jodit.events.fire(this.container.parentNode,"afterOpenPopup",this.container),this.isOpened=!0,o||this.calcPosition();},c.prototype.firstInFocus=function(){},c.prototype.destruct=function(){this.isDestructed||(this.jodit.events.off([this.jodit.ownerWindow,this.jodit.events],"resize",this.throttleCalcPosition),s.Dom.safeRemove(this.container),delete this.container,r.prototype.destruct.call(this));},c);function c(e,t,o,i){void 0===i&&(i="jodit_toolbar_popup");var n=r.call(this,e)||this;return n.target=t,n.current=o,n.className=i,n.throttleCalcPosition=a.throttle(n.calcPosition,n.jodit.defaultTimeout),n.isOpened=!1,n.close=function(e){(n.isOpened||n.isDestructed)&&(e&&s.Dom.isOrContains(n.container,e instanceof c?e.target:e)||(n.isOpened=!1,n.jodit.events.off("closeAllPopups",n.close),n.doClose(),s.Dom.safeRemove(n.container),n.jodit.events.fire("removeMarkers"),n.jodit.events.fire(n,"afterClose")));},n.container=n.jodit.create.div(i,{"data-editor_id":e.id}),n.jodit.events.on(n.container,"mousedown touchstart touchend",function(e){e.stopPropagation();}).on([n.jodit.ownerWindow,n.jodit.events],"resize",n.throttleCalcPosition),n}t.Popup=l;var d=o(12);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var h=o(2),v=o(0),m=o(4),i=(g.addSelected=function(e){e.setAttribute(h.JODIT_SELECTED_CELL_MARKER,"1");},g.restoreSelection=function(e){e.removeAttribute(h.JODIT_SELECTED_CELL_MARKER);},g.getAllSelectedCells=function(e){return e?m.$$("td["+h.JODIT_SELECTED_CELL_MARKER+"],th["+h.JODIT_SELECTED_CELL_MARKER+"]",e):[]},g.getRowsCount=function(e){return e.rows.length},g.getColumnsCount=function(e){return g.formalMatrix(e).reduce(function(e,t){return Math.max(e,t.length)},0)},g.formalMatrix=function(e,a){for(var l=[[]],t=Array.prototype.slice.call(e.rows),o=function(e,t){void 0===l[t]&&(l[t]=[]);for(var o,i,n=e.colSpan,r=e.rowSpan,s=0;l[t][s];)s+=1;for(i=0;i<r;i+=1)for(o=0;o<n;o+=1){if(void 0===l[t+i]&&(l[t+i]=[]),a&&!1===a(e,t+i,s+o,n,r))return !1;l[t+i][s+o]=e;}},i=0,n=void 0;i<t.length;i+=1){var r=Array.prototype.slice.call(t[i].cells);for(n=0;n<r.length;n+=1)if(!1===o(r[n],i))return l}return l},g.formalCoordinate=function(e,r,s){void 0===s&&(s=!1);var a=0,l=0,c=1,d=1;return g.formalMatrix(e,function(e,t,o,i,n){if(r===e)return a=t,l=o,c=i||1,d=n||1,s&&(l+=(i||1)-1,a+=(n||1)-1),!1}),[a,l,c,d]},g.appendRow=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!0);for(var i=e.ownerDocument||document,n=g.getColumnsCount(e),r=i.createElement("tr"),s=0;s<n;s+=1)r.appendChild(i.createElement("td"));o&&t&&t.nextSibling?t.parentNode&&t.parentNode.insertBefore(r,t.nextSibling):!o&&t?t.parentNode&&t.parentNode.insertBefore(r,t):(m.$$(":scope>tbody",e)[0]||e).appendChild(r);},g.removeRow=function(r,s){var a,l=g.formalMatrix(r),c=r.rows[s];m.each(l[s],function(e,t){if(a=!1,s-1<0||l[s-1][e]!==t)if(l[s+1]&&l[s+1][e]===t){if(t.parentNode===c&&t.parentNode.nextSibling){a=!0;for(var o=e+1;l[s+1][o]===t;)o+=1;var i=v.Dom.next(t.parentNode,function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&"TR"===e.nodeName},r);l[s+1][o]?i.insertBefore(t,l[s+1][o]):i.appendChild(t);}}else v.Dom.safeRemove(t);else a=!0;if(a&&(t.parentNode===c||t!==l[s][e-1])){var n=t.rowSpan;1<n-1?t.setAttribute("rowspan",""+(n-1)):t.removeAttribute("rowspan");}}),v.Dom.safeRemove(c);},g.appendColumn=function(e,t,o){void 0===o&&(o=!0);var i,n=g.formalMatrix(e);for(void 0===t&&(t=g.getColumnsCount(e)-1),i=0;i<n.length;i+=1){var r=(e.ownerDocument||document).createElement("td"),s=n[i][t],a=!1;o?(n[i]&&s&&n[i].length<=t+1||s!==n[i][t+1])&&(s.nextSibling?s.parentNode&&s.parentNode.insertBefore(r,s.nextSibling):s.parentNode&&s.parentNode.appendChild(r),a=!0):(t-1<0||n[i][t]!==n[i][t-1]&&n[i][t].parentNode)&&(s.parentNode&&s.parentNode.insertBefore(r,n[i][t]),a=!0),a||n[i][t].setAttribute("colspan",""+(parseInt(n[i][t].getAttribute("colspan")||"1",10)+1));}},g.removeColumn=function(e,n){var r,s=g.formalMatrix(e);m.each(s,function(e,t){var o=t[n];if(r=!1,n-1<0||s[e][n-1]!==o?n+1<t.length&&s[e][n+1]===o?r=!0:v.Dom.safeRemove(o):r=!0,r&&(e-1<0||o!==s[e-1][n])){var i=o.colSpan;1<i-1?o.setAttribute("colspan",""+(i-1)):o.removeAttribute("colspan");}});},g.getSelectedBound=function(e,t){var o,i,n,r=[[1/0,1/0],[0,0]],s=g.formalMatrix(e);for(o=0;o<s.length;o+=1)for(i=0;i<s[o].length;i+=1)~t.indexOf(s[o][i])&&(r[0][0]=Math.min(o,r[0][0]),r[0][1]=Math.min(i,r[0][1]),r[1][0]=Math.max(o,r[1][0]),r[1][1]=Math.max(i,r[1][1]));for(o=r[0][0];o<=r[1][0];o+=1)for(i=r[0][n=1];i<=r[1][1];i+=1){for(;s[o][i-n]&&s[o][i]===s[o][i-n];)r[0][1]=Math.min(i-n,r[0][1]),r[1][1]=Math.max(i-n,r[1][1]),n+=1;for(n=1;s[o][i+n]&&s[o][i]===s[o][i+n];)r[0][1]=Math.min(i+n,r[0][1]),r[1][1]=Math.max(i+n,r[1][1]),n+=1;for(n=1;s[o-n]&&s[o][i]===s[o-n][i];)r[0][0]=Math.min(o-n,r[0][0]),r[1][0]=Math.max(o-n,r[1][0]),n+=1;for(n=1;s[o+n]&&s[o][i]===s[o+n][i];)r[0][0]=Math.min(o+n,r[0][0]),r[1][0]=Math.max(o+n,r[1][0]),n+=1;}return r},g.normalizeTable=function(e){var t,o,i,n,r=[],s=g.formalMatrix(e);for(o=0;o<s[0].length;o+=1){for(n=!(i=1e6),t=0;t<s.length;t+=1)if(void 0!==s[t][o]){if(s[t][o].colSpan<2){n=!0;break}i=Math.min(i,s[t][o].colSpan);}if(!n)for(t=0;t<s.length;t+=1)void 0!==s[t][o]&&g.__mark(s[t][o],"colspan",s[t][o].colSpan-i+1,r);}for(t=0;t<s.length;t+=1){for(n=!(i=1e6),o=0;o<s[t].length;o+=1)if(void 0!==s[t][o]){if(s[t][o].rowSpan<2){n=!0;break}i=Math.min(i,s[t][o].rowSpan);}if(!n)for(o=0;o<s[t].length;o+=1)void 0!==s[t][o]&&g.__mark(s[t][o],"rowspan",s[t][o].rowSpan-i+1,r);}for(t=0;t<s.length;t+=1)for(o=0;o<s[t].length;o+=1)void 0!==s[t][o]&&(s[t][o].hasAttribute("rowspan")&&1===s[t][o].rowSpan&&s[t][o].removeAttribute("rowspan"),s[t][o].hasAttribute("colspan")&&1===s[t][o].colSpan&&s[t][o].removeAttribute("colspan"),s[t][o].hasAttribute("class")&&!s[t][o].getAttribute("class")&&s[t][o].removeAttribute("class"));g.__unmark(r);},g.mergeSelected=function(e){var r,s=[],a=g.getSelectedBound(e,g.getAllSelectedCells(e)),l=0,c=null,d=0,u=0,f=0,p=[];a&&(a[0][0]-a[1][0]||a[0][1]-a[1][1])&&(g.formalMatrix(e,function(e,t,o,i,n){if(!(t<a[0][0]||a[1][0]<t||o<a[0][1]||a[1][1]<o)){if((r=e).__i_am_already_was)return;r.__i_am_already_was=!0,t===a[0][0]&&r.style.width&&(l+=r.offsetWidth),m.trim(e.innerHTML.replace(/<br(\/)?>/g,""))&&s.push(e.innerHTML),1<i&&(u+=i-1),1<n&&(f+=n-1),c?g.__mark(r,"remove",1,p):(c=e,d=o);}}),u=a[1][1]-a[0][1]+1,f=a[1][0]-a[0][0]+1,c&&(1<u&&g.__mark(c,"colspan",u,p),1<f&&g.__mark(c,"rowspan",f,p),l&&(g.__mark(c,"width",(l/e.offsetWidth*100).toFixed(h.ACCURACY)+"%",p),d&&g.setColumnWidthByDelta(e,d,0,!0,p)),c.innerHTML=s.join("<br/>"),delete c.__i_am_already_was,g.__unmark(p),g.normalizeTable(e),m.each(Array.from(e.rows),function(e,t){t.cells.length||v.Dom.safeRemove(t);})));},g.splitHorizontal=function(n){var r,e,t,s,a,l=[],o=n.ownerDocument||document;g.getAllSelectedCells(n).forEach(function(i){(e=o.createElement("td")).appendChild(o.createElement("br")),t=o.createElement("tr"),r=g.formalCoordinate(n,i),i.rowSpan<2?(g.formalMatrix(n,function(e,t,o){r[0]===t&&r[1]!==o&&e!==i&&g.__mark(e,"rowspan",e.rowSpan+1,l);}),v.Dom.after(v.Dom.closest(i,"tr",n),t),t.appendChild(e)):(g.__mark(i,"rowspan",i.rowSpan-1,l),g.formalMatrix(n,function(e,t,o){r[0]<t&&t<r[0]+i.rowSpan&&o<r[1]&&e.parentNode.rowIndex===t&&(a=e),r[0]<t&&e===i&&(s=n.rows[t]);}),a?v.Dom.after(a,e):s.insertBefore(e,s.firstChild)),1<i.colSpan&&g.__mark(e,"colspan",i.colSpan,l),g.__unmark(l),g.restoreSelection(i);}),this.normalizeTable(n);},g.splitVertical=function(t){var n,o,r,s=[],a=t.ownerDocument||document;g.getAllSelectedCells(t).forEach(function(i){n=g.formalCoordinate(t,i),i.colSpan<2?g.formalMatrix(t,function(e,t,o){n[1]===o&&n[0]!==t&&e!==i&&g.__mark(e,"colspan",e.colSpan+1,s);}):g.__mark(i,"colspan",i.colSpan-1,s),(o=a.createElement("td")).appendChild(a.createElement("br")),1<i.rowSpan&&g.__mark(o,"rowspan",i.rowSpan,s);var e=i.offsetWidth;v.Dom.after(i,o),g.__mark(i,"width",(100*(r=e/t.offsetWidth/2)).toFixed(h.ACCURACY)+"%",s),g.__mark(o,"width",(100*r).toFixed(h.ACCURACY)+"%",s),g.__unmark(s),g.restoreSelection(i);}),g.normalizeTable(t);},g.setColumnWidthByDelta=function(e,t,o,i,n){var r,s=g.formalMatrix(e);for(r=0;r<s.length;r+=1)g.__mark(s[r][t],"width",((s[r][t].offsetWidth+o)/e.offsetWidth*100).toFixed(h.ACCURACY)+"%",n);i||g.__unmark(n);},g.__mark=function(e,t,o,i){i.push(e),e.__marked_value||(e.__marked_value={}),e.__marked_value[t]=void 0===o?1:o;},g.__unmark=function(e){e.forEach(function(o){o.__marked_value&&(m.each(o.__marked_value,function(e,t){switch(e){case"remove":v.Dom.safeRemove(o);break;case"rowspan":1<t?o.setAttribute("rowspan",""+t):o.removeAttribute("rowspan");break;case"colspan":1<t?o.setAttribute("colspan",""+t):o.removeAttribute("colspan");break;case"width":o.style.width=""+t;}delete o.__marked_value[e];}),delete o.__marked_value);});},g);function g(){}t.Table=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(41);t.asArray=i.asArray;var n=o(75);t.inArray=n.inArray;var r=o(76);t.splitArray=r.splitArray;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(14);t.JoditObject=function(e){i.extend(!0,this,e);};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(14),n=(r.prototype.toString=function(){for(var e=[],t=0;t<this.length;t+=1)e[t]=this[t];return ""+e},r);function r(e){var t=this;i.extend(!(this.length=0),this,e),this.length=e.length;var o=Array.prototype;["map","forEach","reduce","push","pop","shift","unshift","slice","splice"].forEach(function(e){t[e]=o[e];});}t.JoditArray=n;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i={},n=i.toString;t.hasOwn=i.hasOwnProperty,["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol","HTMLDocument","Window","HTMLElement","HTMLBodyElement","Text","DocumentFragment","DOMStringList","HTMLCollection"].forEach(function(e){i["[object "+e+"]"]=e.toLowerCase();}),t.type=function(e){return null===e?"null":"object"==typeof e||"function"==typeof e?i[n.call(e)]||"object":typeof e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(78),t),i.__exportStar(o(79),t),i.__exportStar(o(80),t),i.__exportStar(o(81),t),i.__exportStar(o(22),t),i.__exportStar(o(21),t),i.__exportStar(o(44),t),i.__exportStar(o(43),t),i.__exportStar(o(82),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(2);t.trim=function(e){return e.replace(i.SPACE_REG_EXP_START,"").replace(i.SPACE_REG_EXP_END,"")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(9),n=(r.prototype.set=function(e,t){this.provider.set(i.camelCase(this.prefix+e),t);},r.prototype.get=function(e){return this.provider.get(i.camelCase(this.prefix+e))},r);function r(e){this.provider=e,this.prefix="Jodit_";}t.Storage=n;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,s=o(1),n=o(5),r=o(112),a=o(26),l=o(115),c=o(0),d=o(8),u=o(3),f=(s.__extends(p,i=d.Component),p.prototype.getButtonsList=function(){return this.__buttons.map(function(e){return e instanceof a.ToolbarButton?e.control.name:""}).filter(function(e){return ""!==e})},p.prototype.appendChild=function(e){this.__buttons.push(e),this.container.appendChild(e.container);},Object.defineProperty(p.prototype,"firstButton",{get:function(){return this.__buttons[0]},enumerable:!0,configurable:!0}),p.prototype.removeChild=function(e){var t=this.__buttons.indexOf(e);-1!=t&&(this.__buttons.splice(t,1),e.container.parentNode===this.container&&c.Dom.safeRemove(e.container));},p.prototype.build=function(e,t,o){var i=this,n=!1;this.clear(),("string"==typeof e?e.split(/[,\s]+/):e).map(this.__getControlType).forEach(function(e){var t=null;if(!~i.jodit.options.removeButtons.indexOf(e.name)){switch(e.name){case"\n":t=new r.ToolbarBreak(i);break;case"|":n||(n=!0,t=new l.ToolbarSeparator(i));break;default:n=!1,t=new a.ToolbarButton(i,e,o);}t&&i.appendChild(t);}}),this.container.parentNode!==t&&t.appendChild(this.container),this.immedateCheckActiveButtons();},p.prototype.clear=function(){var t=this;s.__spreadArrays(this.__buttons).forEach(function(e){t.removeChild(e),e.destruct();}),this.__buttons.length=0;},p.prototype.buttonIsActive=function(e){if("function"==typeof e.control.isActive)return e.control.isActive(this.jodit,e.control,e)},p.prototype.buttonIsDisabled=function(e){return !!this.jodit.options.disabled||!(!this.jodit.options.readonly||this.jodit.options.activeButtonsInReadOnly&&~this.jodit.options.activeButtonsInReadOnly.indexOf(e.control.name))||("function"==typeof e.control.isDisable&&(t=e.control.isDisable(this.jodit,e.control,e)),t);var t;},p.prototype.getTarget=function(e){return e.target},p.prototype.setDirection=function(e){this.container.style.direction=e,this.container.setAttribute("dir",e);},p.prototype.destruct=function(){this.isDestructed||(this.jodit.events.off(this.jodit.ownerWindow,"mousedown touchstart",this.closeAll).off(this.listenEvents,this.checkActiveButtons).off("afterSetMode focus",this.immedateCheckActiveButtons),this.clear(),c.Dom.safeRemove(this.container),delete this.container,i.prototype.destruct.call(this));},p);function p(e){var r=i.call(this,e)||this;return r.__buttons=[],r.__getControlType=function(e){var t,o=r.jodit.options.controls||u.Config.defaultOptions.controls;if("string"!=typeof e)void 0!==o[(t=s.__assign({name:"empty"},e)).name]&&(t=s.__assign(s.__assign({},o[t.name]),t));else{var i=e.split(/\./),n=o;1<i.length&&void 0!==o[i[0]]&&(n=o[i[0]],e=i[1]),t=void 0!==n[e]?s.__assign({name:e},n[e]):{name:e,command:e,tooltip:e};}return t},r.closeAll=function(){r.jodit&&r.jodit.events&&r.jodit.events.fire("closeAllPopups");},r.initEvents=function(){r.jodit.events.on(r.jodit.ownerWindow,"mousedown touchend",r.closeAll).on(r.listenEvents,r.checkActiveButtons).on("afterSetMode focus",r.immedateCheckActiveButtons);},r.listenEvents="changeStack mousedown mouseup keydown change afterInit readonly afterResize selectionchange changeSelection focus afterSetMode touchstart",r.immedateCheckActiveButtons=function(){r.isDestructed||r.jodit.isLocked()||(r.__buttons.filter(function(e){return e instanceof a.ToolbarButton}).forEach(function(e){e.disable=e.isDisable(),e.disable||(e.active=e.isActive()),"function"==typeof e.control.getLabel&&e.control.getLabel(r.jodit,e.control,e);}),r.jodit.events&&r.jodit.events.fire("updateToolbar"));},r.checkActiveButtons=n.debounce(r.immedateCheckActiveButtons,r.jodit.defaultTimeout),r.container=r.jodit.create.element("ul"),r.container.classList.add("jodit_toolbar"),r.initEvents(),r}t.ToolbarCollection=f;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(38);t.Ajax=i.Ajax;var n=o(63);t.EventsNative=n.EventsNative;var r=o(8);t.Component=r.Component;var s=o(39);t.ContextMenu=s.ContextMenu;var a=o(135);t.Cookie=a.Cookie;var l=o(13);t.Alert=l.Alert,t.Confirm=l.Confirm,t.Promt=l.Promt,t.Dialog=l.Dialog;var c=o(0);t.Dom=c.Dom;var d=o(7);t.Plugin=d.Plugin;var u=o(64);t.Create=u.Create;var f=o(137);t.FileBrowser=f.FileBrowser;var p=o(4);t.Helpers=p;var h=o(145);t.ImageEditor=h.ImageEditor;var v=o(56);t.Observer=v.Observer;var m=o(59);t.Select=m.Select;var g=o(35);t.Storage=g.Storage;var _=o(57);t.Snapshot=_.Snapshot;var b=o(28);t.Table=b.Table;var y=o(6);t.ToolbarIcon=y.ToolbarIcon;var w=o(20);t.JoditToolbarCollection=w.JoditToolbarCollection;var E=o(36);t.ToolbarCollection=E.ToolbarCollection;var C=o(26);t.ToolbarButton=C.ToolbarButton;var j=o(58);t.Stack=j.Stack;var x=o(17);t.Widget=x.Widget;var T=o(146);t.Uploader=T.Uploader;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var s=o(1),i=o(3),a=o(4),n=o(134),l=o(55);i.Config.prototype.defaultAjaxOptions={dataType:"json",method:"GET",url:"",data:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",headers:{"X-REQUESTED-WITH":"XMLHttpRequest"},withCredentials:!1,xhr:function(){return new(void 0===n.XDomainRequest?XMLHttpRequest:n.XDomainRequest)}};var r=(c.prototype.__buildParams=function(e,t){return this.options.queryBuild&&"function"==typeof this.options.queryBuild?this.options.queryBuild.call(this,e,t):"string"==typeof e||this.jodit.ownerWindow.FormData&&e instanceof this.jodit.ownerWindow.FormData?e:l.buildQuery(e)},c.prototype.abort=function(){try{this.xhr.abort();}catch(e){}return this},c.prototype.send=function(){var r=this;return new Promise(function(t,o){function i(e){var t=null;if("json"===r.options.dataType&&(t=JSON.parse(e)),!t)throw Error("No JSON format");return t}r.xhr.onabort=function(){o(Error(r.xhr.statusText));},r.xhr.onerror=function(){o(Error(r.xhr.statusText));},r.xhr.ontimeout=function(){o(Error(r.xhr.statusText));},r.xhr.onload=function(){r.response=r.xhr.responseText,r.status=r.xhr.status,t.call(r.xhr,i(r.response)||{});},r.xhr.onreadystatechange=function(){if(r.xhr.readyState===XMLHttpRequest.DONE){var e=r.xhr.responseText;r.response=e,r.status=r.xhr.status,~r.success_response_codes.indexOf(r.xhr.status)?t.call(r.xhr,i(e)):o.call(r.xhr,Error(r.xhr.statusText||r.jodit.i18n("Connection error!")));}},r.xhr.withCredentials=r.options.withCredentials||!1;var e=r.prepareRequest(),n=e.data;r.xhr.open(e.method,e.url,!0),r.options.contentType&&r.xhr.setRequestHeader&&r.xhr.setRequestHeader("Content-type",r.options.contentType),r.options.headers&&r.xhr.setRequestHeader&&a.each(r.options.headers,function(e,t){r.xhr.setRequestHeader(e,t);}),setTimeout(function(){r.xhr.send(n?r.__buildParams(n):void 0);},0);})},c.prototype.prepareRequest=function(){if(!this.options.url)throw Error("Need URL for AJAX request");var e=this.options.url,t=this.options.data,o=(this.options.method||"get").toLowerCase();if("get"==o&&t&&a.isPlainObject(t)){var i=e.indexOf("?");if(-1!=i){var n=a.parseQuery(e);e=e.substr(0,i)+"?"+l.buildQuery(s.__assign(s.__assign({},n),t));}else e+="?"+l.buildQuery(this.options.data);}var r={url:e,method:o,data:t};return c.log.splice(100),c.log.push(r),r},c.log=[],c);function c(e,t){var o=this;this.success_response_codes=[200,201,202],this.jodit=e,this.options=a.extend(!0,{},i.Config.prototype.defaultAjaxOptions,t),this.options.xhr&&(this.xhr=this.options.xhr()),e&&e.events&&e.events.on("beforeDestruct",function(){o.abort();});}t.Ajax=r;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(8),s=o(10),a=o(6),l=o(0),c=(n.__extends(d,i=r.Component),d.prototype.show=function(e,t,o,i){var n=this,r=this;Array.isArray(o)&&(i&&(this.context.style.zIndex=""+i),this.context.innerHTML="",o.forEach(function(t){if(t){var e=r.jodit.i18n(t.title||""),o=n.jodit.create.fromHTML('<a title="'+e+'" data-icon="'+t.icon+'"  href="javascript:void(0)">'+(t.icon?a.ToolbarIcon.getIcon(t.icon):"")+"<span></span></a>"),i=o.querySelector("span");o.addEventListener("click",function(e){return t.exec&&t.exec.call(r,e),r.hide(),!1}),i.textContent=e,r.context.appendChild(o);}}),s.css(r.context,{left:e,top:t}),this.jodit.events.on(this.jodit.ownerWindow,"mouseup jodit_close_dialog",r.hide),this.context.classList.add("jodit_context_menu-show"));},d.prototype.destruct=function(){l.Dom.safeRemove(this.context),delete this.context,this.jodit.events.off(this.jodit.ownerWindow,"mouseup",this.hide),i.prototype.destruct.call(this);},d);function d(e){var t=i.call(this,e)||this;return t.hide=function(){t.context.classList.remove("jodit_context_menu-show"),t.jodit.ownerWindow.removeEventListener("mouseup",t.hide);},t.context=e.create.div("jodit_context_menu",{"data-editor_id":t.jodit.id}),e.ownerDocument.body.appendChild(t.context),t}t.ContextMenu=c;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.F_CLASS="jodit_filebrowser",t.ITEM_CLASS=t.F_CLASS+"_files_item",t.ICON_LOADER='<i class="jodit_icon-loader"></i>';},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.asArray=function(e){return Array.isArray(e)?e:[e]};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(18);t.debounce=function(o,i,n,r){3===arguments.length&&"boolean"!=typeof n&&(r=n,n=!1);var s=0;return function(){var e=arguments,t=r||this;(!n||s)&&i||o.apply(t,e),i&&(clearTimeout(s),s=a.setTimeout(function(){n||o.apply(t,e),s=0;},i));}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isWindow=function(e){return null!==e&&e===e.window};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isURL=function(e){return /^(https?:\/\/)((([a-z\d]([a-z\d-]*[a-z\d])*)\.?)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i.test(e)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.colorToHex=function(e){if("rgba(0, 0, 0, 0)"===e||""===e)return !1;if(!e)return "#000000";if("#"==e.substr(0,1))return e;var t,o,i,n=/([\s\n\t\r]*?)rgb\((\d+), (\d+), (\d+)\)/.exec(e)||/([\s\n\t\r]*?)rgba\((\d+), (\d+), (\d+), ([\d.]+)\)/.exec(e);if(!n)return "#000000";for(o=parseInt(n[2],10),i=parseInt(n[3],10),t=(parseInt(n[4],10)|i<<8|o<<16).toString(16).toUpperCase();t.length<6;)t="0"+t;return n[1]+"#"+t};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(85),t),i.__exportStar(o(86),t),i.__exportStar(o(88),t),i.__exportStar(o(89),t),i.__exportStar(o(90),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=function(e){return e.replace(/([-_])(.)/g,function(e,t,o){return o.toUpperCase()})};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.fromCamelCase=function(e){return e.replace(/([A-Z]+)/g,function(e,t){return "-"+t.toLowerCase()})};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(22);t.normilizeCSSValue=function(e,t){switch(e.toLowerCase()){case"font-weight":switch((""+t).toLowerCase()){case"bold":return 700;case"normal":return 400;case"heavy":return 900}return i.isNumeric(t)?+t:t}return t};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(51);t.appendScript=function(e,t,o,i){void 0===o&&(o="");var n=i.createElement("script");return n.className=o,n.type="text/javascript",void 0!==t&&n.addEventListener("load",t),n.src=r.completeUrl(e),i.body.appendChild(n),{callback:t,element:n}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.completeUrl=function(e){return "file:"===window.location.protocol&&/^\/\//.test(e)&&(e="https:"+e),e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuery=function(e){for(var t={},o=e.substr(1).split("&"),i=0;i<o.length;i+=1){var n=o[i].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"");}return t};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ctrlKey=function(e){if("undefined"!=typeof navigator&&~navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return !0}else if(e.ctrlKey&&!e.altKey)return !0;return !1};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLanguage=function(e){return "auto"===e||void 0===e?document.documentElement&&document.documentElement.lang||navigator.language&&navigator.language.substr(0,2)||!!navigator.browserLanguage&&navigator.browserLanguage.substr(0,2)||"en":e};},function(e,a,t){Object.defineProperty(a,"__esModule",{value:!0});var l=t(33);a.buildQuery=function(e,t){var o=[],i=encodeURIComponent;for(var n in e)if(e.hasOwnProperty(n)){var r=t?t+"["+n+"]":n,s=e[n];o.push(l.isPlainObject(s)?a.buildQuery(s,r):i(r)+"="+i(s));}return o.join("&")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(8),s=o(5),a=o(57),l=o(58),c=o(108);n.Config.prototype.observer={timeout:100};var d,u=(i.__extends(f,d=r.Component),f.prototype.redo=function(){this.stack.redo()&&(this.__startValue=this.snapshot.make(),this.changeStack());},f.prototype.undo=function(){this.stack.undo()&&(this.__startValue=this.snapshot.make(),this.changeStack());},f.prototype.clear=function(){this.__startValue=this.snapshot.make(),this.stack.clear(),this.changeStack();},f.prototype.changeStack=function(){this.jodit&&!this.jodit.isDestructed&&this.jodit.events&&this.jodit.events.fire("changeStack");},f.prototype.destruct=function(){this.jodit.events&&this.jodit.events.off(".observer"),this.snapshot.destruct(),delete this.snapshot,delete this.stack,d.prototype.destruct.call(this);},f);function f(e){var t=d.call(this,e)||this;t.onChangeStack=function(){t.__newValue=t.snapshot.make(),a.Snapshot.equal(t.__newValue,t.__startValue)||(t.stack.push(new c.Command(t.__startValue,t.__newValue,t)),t.__startValue=t.__newValue,t.changeStack());},t.stack=new l.Stack,t.snapshot=new a.Snapshot(e);var o=s.debounce(t.onChangeStack,e.defaultTimeout);return e.events.on("afterInit.observer",function(){t.isDestructed||(t.__startValue=t.snapshot.make(),e.events.on("changeSelection.observer selectionstart.observer selectionchange.observer mousedown.observer mouseup.observer keydown.observer keyup.observer",function(){t.__startValue.html===t.jodit.getNativeEditorValue()&&(t.__startValue=t.snapshot.make());}).on("change.observer",function(){t.snapshot.isBlocked||o();}));}),t}t.Observer=u;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(8),s=o(0),a=(n.__extends(l,i=r.Component),l.equal=function(e,t){return e.html===t.html&&JSON.stringify(e.range)===JSON.stringify(t.range)},l.countNodesBeforeInParent=function(e){if(!e.parentNode)return 0;var t,o=e.parentNode.childNodes,i=0,n=null;for(t=0;t<o.length;t+=1){if(!n||o[t].nodeType===Node.TEXT_NODE&&""===o[t].textContent||n.nodeType===Node.TEXT_NODE&&o[t].nodeType===Node.TEXT_NODE||(i+=1),o[t]===e)return i;n=o[t];}return 0},l.strokeOffset=function(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;)(e=e.previousSibling)&&e.nodeType===Node.TEXT_NODE&&null!==e.textContent&&(t+=e.textContent.length);return t},l.prototype.calcHierarchyLadder=function(e){var t=[];if(!e||!e.parentNode||!s.Dom.isOrContains(this.jodit.editor,e))return [];for(;e&&e!==this.jodit.editor;)e&&t.push(l.countNodesBeforeInParent(e)),e=e.parentNode;return t.reverse()},l.prototype.getElementByLadder=function(e){var t,o=this.jodit.editor;for(t=0;o&&t<e.length;t+=1)o=o.childNodes[e[t]];return o},l.prototype.make=function(){var e={html:"",range:{startContainer:[],startOffset:0,endContainer:[],endOffset:0}};e.html=this.jodit.getNativeEditorValue();var t=this.jodit.selection.sel;if(t&&t.rangeCount){var o=t.getRangeAt(0),i=this.calcHierarchyLadder(o.startContainer),n=this.calcHierarchyLadder(o.endContainer),r=l.strokeOffset(o.startContainer,o.startOffset),s=l.strokeOffset(o.endContainer,o.endOffset);i.length||o.startContainer===this.jodit.editor||(r=0),n.length||o.endContainer===this.jodit.editor||(s=0),e.range={startContainer:i,startOffset:r,endContainer:n,endOffset:s};}return e},l.prototype.restore=function(e){this.isBlocked=!0,this.jodit.setEditorValue(e.html);try{if(e.range){var t=this.jodit.editorDocument.createRange();t.setStart(this.getElementByLadder(e.range.startContainer),e.range.startOffset),t.setEnd(this.getElementByLadder(e.range.endContainer),e.range.endOffset),this.jodit.selection.selectRange(t);}}catch(e){}this.isBlocked=!1;},l.prototype.destruct=function(){this.isBlocked=!1,i.prototype.destruct.call(this);},l);function l(){var e=null!==i&&i.apply(this,arguments)||this;return e.isBlocked=!1,e}t.Snapshot=a;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=(n.prototype.clearRedo=function(){this.commands.length=this.stackPosition+1;},n.prototype.clear=function(){this.commands.length=0,this.stackPosition=-1;},n.prototype.push=function(e){this.clearRedo(),this.commands.push(e),this.stackPosition+=1;},n.prototype.undo=function(){return !!this.canUndo()&&(this.commands[this.stackPosition]&&this.commands[this.stackPosition].undo(),this.stackPosition-=1,!0)},n.prototype.redo=function(){return !!this.canRedo()&&(this.stackPosition+=1,this.commands[this.stackPosition]&&this.commands[this.stackPosition].redo(),!0)},n.prototype.canUndo=function(){return 0<=this.stackPosition},n.prototype.canRedo=function(){return this.stackPosition<this.commands.length-1},n);function n(){this.commands=[],this.stackPosition=-1;}t.Stack=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var v=o(2),d=o(2),m=o(0),g=o(10),r=o(19),s=o(11),_=o(33),b=o(24),y=o(9),i=(n.prototype.errorNode=function(e){if(!m.Dom.isNode(e,this.win))throw Error("Parameter node must be instance of Node")},Object.defineProperty(n.prototype,"area",{get:function(){return this.jodit.editor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"win",{get:function(){return this.jodit.editorWindow},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return this.jodit.editorDocument},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sel",{get:function(){return this.win.getSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"range",{get:function(){var e=this.sel;return e&&e.rangeCount?e.getRangeAt(0):this.createRange()},enumerable:!0,configurable:!0}),n.prototype.createRange=function(){return this.doc.createRange()},n.prototype.remove=function(){var e=this.sel,t=this.current();if(e&&t)for(var o=0;o<e.rangeCount;o+=1)e.getRangeAt(o).deleteContents(),e.getRangeAt(o).collapse(!0);},n.prototype.insertCursorAtPoint=function(e,t){this.removeMarkers();try{var o=this.createRange();if(this.doc.caretPositionFromPoint){var i=this.doc.caretPositionFromPoint(e,t);o.setStart(i.offsetNode,i.offset);}else this.doc.caretRangeFromPoint&&(i=this.doc.caretRangeFromPoint(e,t),o.setStart(i.startContainer,i.startOffset));if(o){o.collapse(!0);var n=this.sel;n&&(n.removeAllRanges(),n.addRange(o));}else if(void 0!==this.doc.body.createTextRange){var r=this.doc.body.createTextRange();r.moveToPoint(e,t);var s=r.duplicate();s.moveToPoint(e,t),r.setEndPoint("EndToEnd",s),r.select();}return !0}catch(e){}return !1},n.prototype.removeMarkers=function(){s.$$("span[data-"+v.MARKER_CLASS+"]",this.area).forEach(m.Dom.safeRemove);},n.prototype.marker=function(e,t){void 0===e&&(e=!1);var o=null;t&&(o=t.cloneRange()).collapse(e);var i=this.jodit.create.inside.span();return i.id=v.MARKER_CLASS+"_"+ +new Date+"_"+(""+Math.random()).slice(2),i.style.lineHeight="0",i.style.display="none",i.setAttribute("data-"+v.MARKER_CLASS,e?"start":"end"),i.appendChild(this.jodit.create.inside.text(v.INVISIBLE_SPACE)),o&&m.Dom.isOrContains(this.area,e?o.startContainer:o.endContainer)&&o.insertNode(i),i},n.prototype.restore=function(e){var r=this;if(void 0===e&&(e=[]),Array.isArray(e)){var s=this.sel;s&&s.removeAllRanges(),e.forEach(function(e){var t=r.createRange(),o=r.area.querySelector("#"+e.endId),i=r.area.querySelector("#"+e.startId);if(i){if(e.collapsed||!o){var n=i.previousSibling;n&&n.nodeType===Node.TEXT_NODE?t.setStart(n,n.nodeValue?n.nodeValue.length:0):t.setStartBefore(i),m.Dom.safeRemove(i),t.collapse(!0);}else t.setStartAfter(i),m.Dom.safeRemove(i),t.setEndBefore(o),m.Dom.safeRemove(o);s&&s.addRange(t);}});}},n.prototype.save=function(){var e=this.sel;if(!e||!e.rangeCount)return [];var t,o,i,n=[],r=e.rangeCount,s=[];for(t=0;t<r;t+=1)s[t]=e.getRangeAt(t),n[t]=s[t].collapsed?{startId:(o=this.marker(!0,s[t])).id,collapsed:!0,startMarker:o.outerHTML}:(o=this.marker(!0,s[t]),i=this.marker(!1,s[t]),{startId:o.id,endId:i.id,collapsed:!1,startMarker:o.outerHTML,endMarker:i.outerHTML});for(e.removeAllRanges(),t=r-1;0<=t;--t){var a=this.doc.getElementById(n[t].startId);if(a)if(n[t].collapsed)s[t].setStartAfter(a),s[t].collapse(!0);else if(s[t].setStartBefore(a),n[t].endId){var l=this.doc.getElementById(n[t].endId);l&&s[t].setEndAfter(l);}try{e.addRange(s[t].cloneRange());}catch(e){}}return n},n.prototype.isCollapsed=function(){for(var e=this.sel,t=0;e&&t<e.rangeCount;t+=1)if(!e.getRangeAt(t).collapsed)return !1;return !0},n.prototype.isFocused=function(){return this.doc.hasFocus&&this.doc.hasFocus()&&this.area===this.doc.activeElement},n.prototype.current=function(e){if(void 0===e&&(e=!0),this.jodit.getRealMode()===v.MODE_WYSIWYG){var t=this.sel;if(t&&0<t.rangeCount){var o=t.getRangeAt(0),i=o.startContainer,n=!1,r=function(e){return n?e.lastChild:e.firstChild};if(i.nodeType!==Node.TEXT_NODE){if((i=o.startContainer.childNodes[o.startOffset])||(i=o.startContainer.childNodes[o.startOffset-1],n=!0),i&&t.isCollapsed&&i.nodeType!==Node.TEXT_NODE)if(!n&&i.previousSibling&&i.previousSibling.nodeType===Node.TEXT_NODE)i=i.previousSibling;else if(e)for(var s=r(i);s;){if(s&&s.nodeType===Node.TEXT_NODE){i=s;break}s=r(s);}if(i&&!t.isCollapsed&&i.nodeType!==Node.TEXT_NODE){for(var a=i,l=i;l=l.lastChild,(a=a.firstChild)&&l&&a.nodeType!==Node.TEXT_NODE;);a===l&&a&&a.nodeType===Node.TEXT_NODE&&(i=a);}}if(i&&m.Dom.isOrContains(this.area,i))return i}}return !1},n.prototype.insertNode=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=!0),this.errorNode(e),this.focus();var i=this.sel;if(this.isCollapsed()||this.jodit.execCommand("Delete"),i&&i.rangeCount){var n=i.getRangeAt(0);m.Dom.isOrContains(this.area,n.commonAncestorContainer)?(n.deleteContents(),n.insertNode(e)):this.area.appendChild(e);}else this.area.appendChild(e);t&&this.setCursorAfter(e),o&&this.jodit.events&&this.jodit.events.fire("synchro"),this.jodit.events&&this.jodit.events.fire("afterInsertNode",e);},n.prototype.insertHTML=function(e){if(""!==e){var t,o,i=this.jodit.create.inside.div(),n=this.jodit.create.inside.fragment();if(!this.isFocused()&&this.jodit.isEditorMode()&&this.focus(),m.Dom.isNode(e,this.win)?i.appendChild(e):i.innerHTML=""+e,(this.jodit.isEditorMode()||!1!==this.jodit.events.fire("insertHTML",i.innerHTML))&&(t=i.lastChild)){for(;i.firstChild;)n.appendChild(t=i.firstChild);for(this.insertNode(n,!1),t?this.setCursorAfter(t):this.setCursorIn(n),o=this.area.lastChild;o&&o.nodeType===Node.TEXT_NODE&&o.previousSibling&&o.nodeValue&&/^\s*$/.test(o.nodeValue);)o=o.previousSibling;t&&(o&&t===o&&t.nodeType===Node.ELEMENT_NODE&&this.area.appendChild(this.jodit.create.inside.element("br")),this.setCursorAfter(t));}}},n.prototype.insertImage=function(e,t,o){var i="string"==typeof e?this.jodit.create.inside.element("img"):e;if("string"==typeof e&&i.setAttribute("src",e),null!==o){var n=""+o;!n||"auto"===n||~(n+"").indexOf("px")||~(n+"").indexOf("%")||(n+="px"),g.css(i,"width",n);}t&&"object"==typeof t&&g.css(i,t);var r=function(){(i.naturalHeight<i.offsetHeight||i.naturalWidth<i.offsetWidth)&&(i.style.width="",i.style.height=""),i.removeEventListener("load",r);};i.addEventListener("load",r),i.complete&&r();var s=this.insertNode(i);return this.jodit.events.fire("afterInsertImage",i),s},n.prototype.setCursorAfter=function(e){var t=this;if(this.errorNode(e),!m.Dom.up(e,function(e){return e===t.area||e&&e.parentNode===t.area},this.area))throw Error("Node element must be in editor");var o=this.createRange(),i=!1;return e.nodeType!==Node.TEXT_NODE?(i=this.doc.createTextNode(v.INVISIBLE_SPACE),o.setStartAfter(e),o.insertNode(i),o.selectNode(i)):o.setEnd(e,null!==e.nodeValue?e.nodeValue.length:0),o.collapse(!1),this.selectRange(o),i},n.prototype.cursorInTheEdge=function(o,i){var e=this.sel,t=e&&e.rangeCount?e.getRangeAt(0):null;if(!t)return null;function n(e){for(;e;)if(t=e,(e=o?m.Dom.prev(t,function(e){return !!e},i):m.Dom.next(t,function(e){return !!e},i))&&!m.Dom.isEmptyTextNode(e)&&"BR"!==e.nodeName)return !1;var t;}var r=o?t.startContainer:t.endContainer;if(r.nodeType===Node.TEXT_NODE){var s=r.nodeValue||"";if(o&&t.startOffset>s.length-s.replace(d.INVISIBLE_SPACE_REG_EXP_START,"").length)return !1;if(!o&&t.startOffset<s.replace(d.INVISIBLE_SPACE_REG_EXP_END,"").length)return !1;if(!1===n(r))return !1}var a=this.current(!1);return a&&m.Dom.isOrContains(i,a,!0)?!(!o&&t.startContainer.childNodes[t.startOffset]&&a&&!m.Dom.isEmptyTextNode(a))&&!1!==n(a):null},n.prototype.setCursorBefore=function(e){var t=this;if(this.errorNode(e),!m.Dom.up(e,function(e){return e===t.area||e&&e.parentNode===t.area},this.area))throw Error("Node element must be in editor");var o=this.createRange(),i=!1;return e.nodeType!==Node.TEXT_NODE?(i=this.doc.createTextNode(v.INVISIBLE_SPACE),o.setStartBefore(e),o.collapse(!0),o.insertNode(i),o.selectNode(i)):o.setStart(e,null!==e.nodeValue?e.nodeValue.length:0),o.collapse(!0),this.selectRange(o),i},n.prototype.setCursorIn=function(e,t){var o=this;if(void 0===t&&(t=!1),this.errorNode(e),!m.Dom.up(e,function(e){return e===o.area||e&&e.parentNode===o.area},this.area))throw Error("Node element must be in editor");var i=this.createRange(),n=e,r=e;do{if(n.nodeType===Node.TEXT_NODE)break;r=n,n=t?n.firstChild:n.lastChild;}while(n);if(!n){var s=this.doc.createTextNode(v.INVISIBLE_SPACE);/^(img|br|input)$/i.test(r.nodeName)?n=r:(r.appendChild(s),r=s);}return i.selectNodeContents(n||r),i.collapse(t),this.selectRange(i),r},n.prototype.selectRange=function(e){var t=this.sel;t&&(t.removeAllRanges(),t.addRange(e)),this.jodit.events.fire("changeSelection");},n.prototype.select=function(e,t){var o=this;if(void 0===t&&(t=!1),this.errorNode(e),!m.Dom.up(e,function(e){return e===o.area||e&&e.parentNode===o.area},this.area))throw Error("Node element must be in editor");var i=this.createRange();i[t?"selectNodeContents":"selectNode"](e),this.selectRange(i);},n.prototype.getHTML=function(){var e=this.sel;if(e&&0<e.rangeCount){var t=e.getRangeAt(0).cloneContents(),o=this.jodit.create.inside.div();return o.appendChild(t),o.innerHTML}return ""},n.prototype.applyCSS=function(a,l,t){var c=this;function d(e){return null!==e&&!m.Dom.isEmptyTextNode(e)&&!c.isMarker(e)}function u(e){return !!e&&(RegExp("^"+e.nodeName+"$","i").test(l)||!(!t||("FONT"===(i=e).nodeName||i.nodeType!==Node.ELEMENT_NODE||!(_.isPlainObject(t)&&b.each(t,function(e,t){var o=g.css(i,e,void 0,!0);return null!==o&&""!==o&&!!~t.indexOf((""+o).toLowerCase())})||"function"==typeof t&&t(c.jodit,i)))))&&d(e);var i;}function f(t){u(t)&&(t.nodeName===h&&a&&Object.keys(a).forEach(function(e){0===p||g.css(t,e)===r.normilizeCSSValue(e,a[e])?(g.css(t,e,""),void 0===p&&(p=0)):(g.css(t,e,a[e]),void 0===p&&(p=1));}),m.Dom.isBlock(t,c.win)||t.getAttribute("style")&&t.nodeName===h||(m.Dom.unwrap(t),void 0===p&&(p=0)));}void 0===l&&(l="span");var p,h="SPAN";if(this.isCollapsed()){var e=!1;if(this.current()&&m.Dom.closest(this.current(),l,this.area)){e=!0;var o=m.Dom.closest(this.current(),l,this.area);o&&this.setCursorAfter(o);}if(l.toUpperCase()==h||!e){var i=this.jodit.create.inside.element(l);i.appendChild(this.jodit.create.inside.text(v.INVISIBLE_SPACE)),this.insertNode(i,!1,!1),l.toUpperCase()==h&&a&&g.css(i,a),this.setCursorIn(i);}}else{var n=this.save();r.normalizeNode(this.area.firstChild),s.$$("*[style*=font-size]",this.area).forEach(function(e){e.style&&e.style.fontSize&&e.setAttribute("data-font-size",""+e.style.fontSize);}),this.doc.execCommand("fontsize",!1,"7"),s.$$("*[data-font-size]",this.area).forEach(function(e){var t=e.getAttribute("data-font-size");e.style&&t&&(e.style.fontSize=t,e.removeAttribute("data-font-size"));}),s.$$('font[size="7"]',this.area).forEach(function(e){if(m.Dom.next(e,d,e.parentNode)||m.Dom.prev(e,d,e.parentNode)||!u(e.parentNode)||e.parentNode===c.area||m.Dom.isBlock(e.parentNode,c.win)&&!v.IS_BLOCK.test(l))if(e.firstChild&&!m.Dom.next(e.firstChild,d,e)&&!m.Dom.prev(e.firstChild,d,e)&&u(e.firstChild))f(e.firstChild);else if(m.Dom.closest(e,u,c.area)){var t=c.createRange(),o=m.Dom.closest(e,u,c.area);t.setStartBefore(o),t.setEndBefore(e);var i=t.extractContents();i.textContent&&y.trim(i.textContent).length||!i.firstChild||m.Dom.unwrap(i.firstChild),o.parentNode&&o.parentNode.insertBefore(i,o),t.setStartAfter(e),t.setEndAfter(o);var n=t.extractContents();n.textContent&&y.trim(n.textContent).length||!n.firstChild||m.Dom.unwrap(n.firstChild),m.Dom.after(o,n),f(o);}else{var r,s=[];e.firstChild&&m.Dom.find(e.firstChild,function(e){return e&&u(e)?(void 0===r&&(r=!0),s.push(e)):void 0===r&&(r=!1),!1},e,!0),s.forEach(m.Dom.unwrap),r||(void 0===p&&(p=1),1===p&&g.css(m.Dom.replace(e,l,!1,!1,c.doc),a&&l.toUpperCase()==h?a:{}));}else f(e.parentNode);e.parentNode&&m.Dom.unwrap(e);}),this.restore(n);}},n);function n(e){var c=this;this.jodit=e,this.isMarker=function(e){return m.Dom.isNode(e,c.win)&&e.nodeType===Node.ELEMENT_NODE&&"SPAN"===e.nodeName&&e.hasAttribute("data-"+v.MARKER_CLASS)},this.focus=function(){if(c.isFocused())return !1;c.jodit.iframe&&"complete"==c.doc.readyState&&c.jodit.iframe.focus(),c.win.focus(),c.area.focus();var e=c.sel,t=c.createRange();return !e||e.rangeCount&&c.current()||(t.setStart(c.area,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t)),!0},this.eachSelection=function(o){var e=c.sel;if(e&&e.rangeCount){var t=e.getRangeAt(0),i=[],n=t.startOffset,r=c.area.childNodes.length,s=t.startContainer===c.area?c.area.childNodes[n<r?n:r-1]:t.startContainer,a=t.endContainer===c.area?c.area.childNodes[t.endOffset-1]:t.endContainer;m.Dom.find(s,function(e){return !e||e===c.area||m.Dom.isEmptyTextNode(e)||c.isMarker(e)||i.push(e),e===a||e&&e.contains(a)},c.area,!0,"nextSibling",!1);var l=function(e){if(e.nodeName.match(/^(UL|OL)$/))return Array.from(e.childNodes).forEach(l);if("LI"===e.nodeName)if(e.firstChild)e=e.firstChild;else{var t=c.jodit.create.inside.text(d.INVISIBLE_SPACE);e.appendChild(t),e=t;}o(e);};0===i.length&&m.Dom.isEmptyTextNode(s)&&i.push(s),i.forEach(l);}};}t.Select=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=(n.prototype.set=function(t,o){try{localStorage.setItem(t,""+o);}catch(e){this.data[t]=""+o;}},n.prototype.get=function(e){try{return localStorage.getItem(e)}catch(e){}return this.data[e]||null},n);function n(){this.data={};}t.LocalStorageProvider=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(62),s=(n.__extends(a,i=r.View),a.prototype.destruct=function(){this.toolbar.destruct(),delete this.toolbar,i.prototype.destruct.call(this);},a);function a(){var e=null!==i&&i.apply(this,arguments)||this;return e.toolbar=l.JoditToolbarCollection.makeCollection(e),e}t.ViewWithToolbar=s;var l=o(20);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,r=o(1),n=o(63),s=o(111),a=(r.__extends(l,i=s.Panel),Object.defineProperty(l.prototype,"defaultTimeout",{get:function(){return 100},enumerable:!0,configurable:!0}),l.prototype.i18n=function(e){for(var t,o,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return this.jodit&&this.jodit!==this?(t=this.jodit).i18n.apply(t,r.__spreadArrays([e],i)):(o=c.Jodit.prototype).i18n.apply(o,r.__spreadArrays([e],i))},l.prototype.toggleFullSize=function(e){i.prototype.toggleFullSize.call(this,e),this.events&&this.events.fire("toggleFullSize",e);},l.prototype.getInstance=function(e,t){if("function"!=typeof c.Jodit.modules[e])throw Error("Need real module name");return void 0===this.__modulesInstances[e]&&(this.__modulesInstances[e]=new c.Jodit.modules[e](this.jodit||this,t)),this.__modulesInstances[e]},l.prototype.destruct=function(){this.isDestructed||(this.events&&(this.events.destruct(),delete this.events),delete this.options,i.prototype.destruct.call(this));},l);function l(e,t){var o=i.call(this,e)||this;return o.version="3.2.60",o.__modulesInstances={},o.progress_bar=o.create.div("jodit_progress_bar",o.create.div()),o.options={removeButtons:[],zIndex:100002,fullsize:!1,showTooltip:!0,useNativeTooltip:!1,buttons:[],globalFullsize:!0},o.components=[],o.getVersion=function(){return o.version},o.id=e&&e.id?e.id:""+(new Date).getTime(),o.jodit=e||o,o.events=e&&e.events?e.events:new n.EventsNative(o.ownerDocument),o.buffer=e&&e.buffer?e.buffer:{},o.options=r.__assign(r.__assign({},o.options),t),o}t.View=a;var c=o(12);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var f=o(1),p=o(110),i=(n.prototype.eachEvent=function(e,o){var i=this;e.split(/[\s,]+/).forEach(function(e){var t=e.split(".");o.call(i,t[0],t[1]||p.defaultNameSpace);});},n.prototype.getStore=function(e){if(void 0===e[this.__key]){var t=new p.EventHandlersStore;Object.defineProperty(e,this.__key,{enumerable:!1,configurable:!0,value:t});}return e[this.__key]},n.prototype.clearStore=function(e){void 0!==e[this.__key]&&delete e[this.__key];},n.prototype.triggerNativeEvent=function(e,t){var o=this.doc.createEvent("HTMLEvents");"string"==typeof t?o.initEvent(t,!0,!0):(o.initEvent(t.type,t.bubbles,t.cancelable),["screenX","screenY","clientX","clientY","target","srcElement","currentTarget","timeStamp","which","keyCode"].forEach(function(e){Object.defineProperty(o,e,{value:t[e],enumerable:!0});}),Object.defineProperty(o,"originalEvent",{value:t,enumerable:!0})),e.dispatchEvent(o);},n.prototype.removeStop=function(e){if(e){var t=this.__stopped.indexOf(e);-1!=t&&this.__stopped.splice(t,1);}},n.prototype.isStopped=function(e){return void 0!==e&&!!~this.__stopped.indexOf(e)},n.prototype.on=function(e,t,o,i,n){var r=this;void 0===n&&(n=!1);var s="string"==typeof e?this:e,a="string"==typeof t?t:e,l=o;void 0===l&&"function"==typeof t&&(l=t);var c=this.getStore(s);if("string"!=typeof a||""===a)throw Error("Need events names");if("function"!=typeof l)throw Error("Need event handler");if(Array.isArray(s))return s.forEach(function(e){r.on(e,a,l,i);}),this;var d="function"==typeof s.addEventListener,u=this,f=function(e){return l&&l.apply(this,arguments)};return d&&(f=function(e){if(u.prepareEvent(e),l&&!1===l.call(this,e))return e.preventDefault(),e.stopImmediatePropagation(),!1},i&&(f=function(e){u.prepareEvent(e);for(var t=e.target;t&&t!==this;){if(t.matches(i))return Object.defineProperty(e,"target",{value:t,configurable:!0,enumerable:!0}),l&&!1===l.call(t,e)?(e.preventDefault(),!1):void 0;t=t.parentNode;}})),this.eachEvent(a,function(e,t){if(""===e)throw Error("Need event name");!1===c.indexOf(e,t,l)&&(c.set(e,t,{event:e,originalCallback:l,syntheticCallback:f},n),d&&s.addEventListener(e,f,!1));}),this},n.prototype.off=function(e,t,o){var i=this,n="string"==typeof e?this:e,r="string"==typeof t?t:e,s=this.getStore(n),a=o;if("string"!=typeof r||!r)return s.namespaces().forEach(function(e){i.off(n,"."+e);}),this.clearStore(n),this;function l(e){c&&n.removeEventListener(e.event,e.syntheticCallback,!1);}void 0===a&&"function"==typeof t&&(a=t);var c="function"==typeof n.removeEventListener,d=function(e,t){if(""!==e){var o=s.get(e,t);if(o&&o.length)if("function"!=typeof a)o.forEach(l),o.length=0;else{var i=s.indexOf(e,t,a);!1!==i&&(l(o[i]),o.splice(i,1));}}else s.events(t).forEach(function(e){""!==e&&d(e,t);});};return this.eachEvent(r,function(t,e){e===p.defaultNameSpace?s.namespaces().forEach(function(e){d(t,e);}):d(t,e);}),this},n.prototype.stopPropagation=function(e,t){var i=this,n="string"==typeof e?this:e,o="string"==typeof e?e:t;if("string"!=typeof o)throw Error("Need event names");var r=this.getStore(n);this.eachEvent(o,function(t,e){var o=r.get(t,e);o&&i.__stopped.push(o),e===p.defaultNameSpace&&r.namespaces(!0).forEach(function(e){return i.stopPropagation(n,t+"."+e)});});},n.prototype.fire=function(e,t){for(var n=this,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var r,s=void 0,a="string"==typeof e?this:e,l="string"==typeof e?e:t,c="string"==typeof e?f.__spreadArrays([t],o):o,d="function"==typeof a.dispatchEvent;if(!d&&"string"!=typeof l)throw Error("Need events names");var u=this.getStore(a);return "string"!=typeof l&&d?this.triggerNativeEvent(a,t):this.eachEvent(l,function(o,t){if(d)n.triggerNativeEvent(a,o);else{var i=u.get(o,t);if(i)try{i.every(function(e){return !n.isStopped(i)&&(n.current.push(o),r=e.syntheticCallback.apply(a,c),n.current.pop(),void 0!==r&&(s=r),!0)});}finally{n.removeStop(i);}t!==p.defaultNameSpace||d||u.namespaces().filter(function(e){return e!==t}).forEach(function(e){var t=n.fire.apply(n,f.__spreadArrays([a,o+"."+e],c));void 0!==t&&(s=t);});}}),s},n.prototype.destruct=function(){this.isDestructed&&(this.isDestructed=!0,this.off(this),this.getStore(this).clear(),delete this[this.__key]);},n);function n(e){var o=this;this.__key="__JoditEventsNativeNamespaces",this.doc=document,this.__stopped=[],this.prepareEvent=function(t){t.cancelBubble||(t.type.match(/^touch/)&&t.changedTouches&&t.changedTouches.length&&["clientX","clientY","pageX","pageY"].forEach(function(e){Object.defineProperty(t,e,{value:t.changedTouches[0][e],configurable:!0,enumerable:!0});}),t.originalEvent||(t.originalEvent=t),"paste"===t.type&&void 0===t.clipboardData&&o.doc.defaultView.clipboardData&&Object.defineProperty(t,"clipboardData",{get:function(){return o.doc.defaultView.clipboardData},configurable:!0,enumerable:!0}));},this.current=[],this.isDestructed=!1,e&&(this.doc=e),this.__key+=(new Date).getTime();}t.EventsNative=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(21),s=o(24),a=o(41),i=o(0),l=o(4),n=(c.prototype.setDocument=function(e){this.doc=e;},c.prototype.element=function(e,t,o){var i=this,n=this.doc.createElement(e.toLowerCase());return t&&(r.isPlainObject(t)?s.each(t,function(e,t){r.isPlainObject(t)&&"style"===e?l.css(n,t):n.setAttribute(e,""+t);}):o=t),o&&a.asArray(o).forEach(function(e){return n.appendChild("string"==typeof e?i.fromHTML(e):e)}),n},c.prototype.div=function(e,t,o){var i=this.element("div",t,o);return e&&(i.className=e),i},c.prototype.span=function(e,t,o){var i=this.element("span",t,o);return e&&(i.className=e),i},c.prototype.a=function(e,t,o){var i=this.element("a",t,o);return e&&(i.className=e),i},c.prototype.text=function(e){return this.doc.createTextNode(e)},c.prototype.fragment=function(){return this.doc.createDocumentFragment()},c.prototype.fromHTML=function(e){var t=this.div();t.innerHTML=""+e;var o=t.firstChild===t.lastChild&&t.firstChild?t.firstChild:t;return i.Dom.safeRemove(o),o},c);function c(e,t){this.doc=e,null!==t&&(this.inside=t?new c(t):new c(e,null));}t.Create=n;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var f=o(16),p=o(6);t.Promt=function(e,t,o,i,n){var r=new f.Dialog,s=r.create.fromHTML('<a href="javascript:void(0)" style="float:right;" class="jodit_button">'+p.ToolbarIcon.getIcon("cancel")+"<span>"+h.Jodit.prototype.i18n("Cancel")+"</span></a>"),a=r.create.fromHTML('<a href="javascript:void(0)" style="float:left;" class="jodit_button">'+p.ToolbarIcon.getIcon("check")+"<span>"+h.Jodit.prototype.i18n("Ok")+"</span></a>"),l=r.create.element("form",{class:"jodit_promt"}),c=r.create.element("input",{autofocus:!0,class:"jodit_input"}),d=r.create.element("label");function u(){o&&"function"==typeof o&&!1===o(c.value)||r.close();}return "function"==typeof t&&(o=t,t=void 0),i&&c.setAttribute("placeholder",i),d.appendChild(r.create.text(e)),l.appendChild(d),l.appendChild(c),s.addEventListener("click",r.close,!1),a.addEventListener("click",u),l.addEventListener("submit",function(){return u(),!1}),r.setFooter([a,s]),r.open(l,t||"&nbsp;",!0,!0),c.focus(),void 0!==n&&n.length&&(c.value=n,c.select()),r};var h=o(12);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var c=o(16),d=o(6);t.Confirm=function(e,t,o){var i=new c.Dialog,n=i.create.fromHTML('<form class="jodit_promt"></form>'),r=i.create.element("label");"function"==typeof t&&(o=t,t=void 0),r.appendChild(i.create.fromHTML(e)),n.appendChild(r);var s=i.create.fromHTML('<a href="javascript:void(0)" style="float:right;" class="jodit_button">'+d.ToolbarIcon.getIcon("cancel")+"<span>"+u.Jodit.prototype.i18n("Cancel")+"</span></a>");function a(){o&&o(!0),i.close();}s.addEventListener("click",function(){o&&o(!1),i.close();});var l=i.create.fromHTML('<a href="javascript:void(0)" style="float:left;" class="jodit_button">'+d.ToolbarIcon.getIcon("check")+"<span>"+u.Jodit.prototype.i18n("Yes")+"</span></a>");return l.addEventListener("click",a),n.addEventListener("submit",function(){return a(),!1}),i.setFooter([l,s]),i.open(n,t||"&nbsp;",!0,!0),l.focus(),i};var u=o(12);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),o(68),"undefined"!=typeof window&&o(69);var i=o(12),n=o(2),r=o(117),s=o(37),a=o(147),l=o(189),c=o(3),d=o(6);function u(e){return "__esModule"!==e}Object.keys(n).forEach(function(e){i.Jodit[e]=n[e];}),Object.keys(l).filter(u).forEach(function(e){d.ToolbarIcon.icons[e.replace("_","-")]=l[e];}),Object.keys(s).filter(u).forEach(function(e){i.Jodit.modules[e]=s[e];}),["Confirm","Alert","Promt"].forEach(function(e){i.Jodit[e]=s[e];}),Object.keys(a).filter(u).forEach(function(e){i.Jodit.plugins[e]=a[e];}),Object.keys(r).filter(u).forEach(function(e){i.Jodit.lang[e]=r[e];}),i.Jodit.defaultOptions=c.Config.defaultOptions,c.OptionsDefault.prototype=i.Jodit.defaultOptions,t.Jodit=i.Jodit,t.default=i.Jodit;},function(e,t,o){},function(e,t,o){var i;Object.defineProperty(t,"__esModule",{value:!0}),o(70),o(71),(i=Element.prototype).matches||(i.matches=void 0!==i.matchesSelector?i.matchesSelector:function(e){if(!this.ownerDocument)return [];var t=this.ownerDocument.querySelectorAll(e),o=this;return Array.prototype.some.call(t,function(e){return e===o})}),Array.from||(Array.from=function(e){return [].slice.call(e)}),Array.prototype.includes||(Array.prototype.includes=function(e){return !!~this.indexOf(e)});},function(e,t){"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){if("Element"in e){var t="classList",o="prototype",i=e.Element[o],n=Object,r=String[o].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[o].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return -1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t;},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},c=function(e){for(var t=r.call(e.getAttribute("class")||""),o=t?t.split(/\s+/):[],i=0,n=o.length;i<n;i++)this.push(o[i]);this._updateClassName=function(){e.setAttribute("class",""+this);};},d=c[o]=[],u=function(){return new c(this)};if(a[o]=Error[o],d.item=function(e){return this[e]||null},d.contains=function(e){return -1!==l(this,e+="")},d.add=function(){for(var e,t=arguments,o=0,i=t.length,n=!1;-1===l(this,e=t[o]+"")&&(this.push(e),n=!0),++o<i;);n&&this._updateClassName();},d.remove=function(){var e,t,o=arguments,i=0,n=o.length,r=!1;do{for(t=l(this,e=o[i]+"");-1!==t;)this.splice(t,1),r=!0,t=l(this,e);}while(++i<n);r&&this._updateClassName();},d.toggle=function(e,t){var o=this.contains(e+=""),i=o?!0!==t&&"remove":!1!==t&&"add";return i&&this[i](e),!0===t||!1===t?t:!o},d.toString=function(){return this.join(" ")},n.defineProperty){var f={get:u,enumerable:!0,configurable:!0};try{n.defineProperty(i,t,f);}catch(e){void 0!==e.number&&-2146823252!==e.number||(f.enumerable=!1,n.defineProperty(i,t,f));}}else n[o].__defineGetter__&&i.__defineGetter__(t,u);}}(window.self),function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var i=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var t,o=arguments.length;for(t=0;t<o;t++)i.call(this,e=arguments[t]);};};t("add"),t("remove");}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:o.call(this,e)};}e=null;}());},function(e,t,o){e.exports=o(72).polyfill();},function(e,t,o){var H,W;H=o(73),W=o(74),e.exports=function(){function l(e){return "function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return "[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,n=void 0,s=function(e,t){f[i]=e,f[i+1]=t,2===(i+=2)&&(n?n(p):_());};var e="undefined"!=typeof window?window:void 0,r=e||{},a=r.MutationObserver||r.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==H&&"[object process]"==={}.toString.call(H),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(p,1)}}var f=Array(1e3);function p(){for(var e=0;e<i;e+=2){(0, f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;}i=0;}var h,v,m,g,_=void 0;function b(e,t){var o=this,i=new this.constructor(E);void 0===i[w]&&P(i);var n=o._state;if(n){var r=arguments[n-1];s(function(){return A(n,i,r,o._result)});}else I(o,i,e,t);return i}function y(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return D(t,e),t}_=c?function(){return H.nextTick(p)}:a?(v=0,m=new a(p),g=document.createTextNode(""),m.observe(g,{characterData:!0}),function(){g.data=v=++v%2;}):d?((h=new MessageChannel).port1.onmessage=p,function(){return h.port2.postMessage(0)}):void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p);}:u()}catch(e){return u()}}():u();var w=Math.random().toString(36).substring(2);function E(){}var C=void 0,j=1,x=2;function T(e,i,n){s(function(t){var o=!1,e=function(e,t,o,i){try{e.call(t,o,i);}catch(e){return e}}(n,i,function(e){o||(o=!0,i!==e?D(t,e):M(t,e));},function(e){o||(o=!0,L(t,e));});!o&&e&&(o=!0,L(t,e));},e);}function S(e,t,o){t.constructor===e.constructor&&o===b&&t.constructor.resolve===y?function(t,e){e._state===j?M(t,e._result):e._state===x?L(t,e._result):I(e,void 0,function(e){return D(t,e)},function(e){return L(t,e)});}(e,t):void 0===o?M(e,t):l(o)?T(e,t,o):M(e,t);}function D(t,e){if(t===e)L(t,new TypeError("You cannot resolve a promise with itself"));else if(function(e){var t=typeof e;return null!==e&&("object"==t||"function"==t)}(e)){var o=void 0;try{o=e.then;}catch(e){return void L(t,e)}S(t,e,o);}else M(t,e);}function q(e){e._onerror&&e._onerror(e._result),N(e);}function M(e,t){e._state===C&&(e._result=t,e._state=j,0!==e._subscribers.length&&s(N,e));}function L(e,t){e._state===C&&(e._state=x,e._result=t,s(q,e));}function I(e,t,o,i){var n=e._subscribers,r=n.length;e._onerror=null,n[r]=t,n[r+j]=o,n[r+x]=i,0===r&&e._state&&s(N,e);}function N(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var i=void 0,n=void 0,r=e._result,s=0;s<t.length;s+=3)n=t[s+o],(i=t[s])?A(o,i,n,r):n(r);e._subscribers.length=0;}}function A(e,t,o,i){var n=l(o),r=void 0,s=void 0,a=!0;if(n){try{r=o(i);}catch(e){a=!1,s=e;}if(t===r)return void L(t,new TypeError("A promises callback cannot return that same promise."))}else r=i;t._state!==C||(n&&a?D(t,r):!1===a?L(t,s):e===j?M(t,r):e===x&&L(t,r));}var k=0;function P(e){e[w]=k++,e._state=void 0,e._result=void 0,e._subscribers=[];}var O=(z.prototype._enumerate=function(e){for(var t=0;this._state===C&&t<e.length;t++)this._eachEntry(e[t],t);},z.prototype._eachEntry=function(t,e){var o=this._instanceConstructor,i=o.resolve;if(i===y){var n=void 0,r=void 0,s=!1;try{n=t.then;}catch(e){s=!0,r=e;}if(n===b&&t._state!==C)this._settledAt(t._state,e,t._result);else if("function"!=typeof n)this._remaining--,this._result[e]=t;else if(o===R){var a=new o(E);s?L(a,r):S(a,t,n),this._willSettleAt(a,e);}else this._willSettleAt(new o(function(e){return e(t)}),e);}else this._willSettleAt(i(t),e);},z.prototype._settledAt=function(e,t,o){var i=this.promise;i._state===C&&(this._remaining--,e===x?L(i,o):this._result[t]=o),0===this._remaining&&M(i,this._result);},z.prototype._willSettleAt=function(e,t){var o=this;I(e,void 0,function(e){return o._settledAt(j,t,e)},function(e){return o._settledAt(x,t,e)});},z);function z(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[w]||P(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&M(this.promise,this._result))):L(this.promise,Error("Array Methods must be provided an Array"));}var R=(B.prototype.catch=function(e){return this.then(null,e)},B.prototype.finally=function(t){var o=this.constructor;return l(t)?this.then(function(e){return o.resolve(t()).then(function(){return e})},function(e){return o.resolve(t()).then(function(){throw e})}):this.then(t,t)},B);function B(e){this[w]=k++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof B?function(t,e){try{e(function(e){D(t,e);},function(e){L(t,e);});}catch(e){L(t,e);}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}());}return R.prototype.then=b,R.all=function(e){return new O(this,e).promise},R.race=function(n){var r=this;return o(n)?new r(function(e,t){for(var o=n.length,i=0;i<o;i++)r.resolve(n[i]).then(e,t);}):new r(function(e,t){return t(new TypeError("You must pass an array to race."))})},R.resolve=y,R.reject=function(e){var t=new this(E);return L(t,e),t},R._setScheduler=function(e){n=e;},R._setAsap=function(e){s=e;},R._asap=s,R.polyfill=function(){var e=void 0;if(void 0!==W)e=W;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")();}catch(e){throw Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve());}catch(e){}if("[object Promise]"===o&&!t.cast)return}e.Promise=R;},R.Promise=R}();},function(e,t){var o,i,n=e.exports={};function r(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return (o=setTimeout)(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:r;}catch(e){o=r;}try{i="function"==typeof clearTimeout?clearTimeout:s;}catch(e){i=s;}}();var l,c=[],d=!1,u=-1;function f(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&p());}function p(){if(!d){var e=a(f);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length;}l=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return (i=clearTimeout)(t);try{i(t);}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e);}}function h(e,t){this.fun=e,this.array=t;}function v(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];c.push(new h(e,t)),1!==c.length||d||a(p);},h.prototype.run=function(){this.fun.apply(null,this.array);},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return []},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return "/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0};},function(e,t){var o;o=function(){return this}();try{o=o||Function("return this")();}catch(e){"object"==typeof window&&(o=window);}e.exports=o;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.inArray=function(e,t){return !!~t.indexOf(e)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.splitArray=function(e){return "string"==typeof e?e.split(/[,\s]+/):e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var l=o(18);t.throttle=function(t,o,i){var n,r,s,a=null;return function(){n=arguments,r=!0;var e=i||this;o?a||(s=function(){a=r?(t.apply(e,n),r=!1,l.setTimeout(s,o)):null;})():t.apply(e,n);}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTML=function(e){return /<([A-Za-z][A-Za-z0-9]*)\b[^>]*>(.*?)<\/\1>/m.test(e)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLFromWord=function(e){return -1!=e.search(/<meta.*?Microsoft Excel\s[\d].*?>/)||-1!=e.search(/<meta.*?Microsoft Word\s[\d].*?>/)||-1!=e.search(/style="[^"]*mso-/)&&-1!=e.search(/<font/)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(22);t.isInt=function(e){return "string"==typeof e&&i.isNumeric(e)&&(e=parseFloat(e)),"number"==typeof e&&Number.isFinite(e)&&!(e%1)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isLicense=function(e){return "string"==typeof e&&32===e.length&&/^[a-z0-9]+$/.test(e)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.hasBrowserColorPicker=function(){var t=!0;try{var e=document.createElement("input");t=(e.type="color")===e.type&&"number"!=typeof e.selectionStart;}catch(e){t=!1;}return t};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1);i.__exportStar(o(84),t),i.__exportStar(o(45),t);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,o,i){return t+t+o+o+i+i});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),l=o(11);t.applyStyles=function(e){if(!~e.indexOf("<html "))return e;e=(e=e.substring(e.indexOf("<html "),e.length)).substring(0,7+e.lastIndexOf("</html>"));var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);var o="",i=[];try{var n=t.contentDocument||(t.contentWindow?t.contentWindow.document:null);if(n){n.open(),n.write(e),n.close(),n.styleSheets.length&&(i=n.styleSheets[n.styleSheets.length-1].cssRules);for(var r=function(t){if(""===i[t].selectorText)return "continue";l.$$(i[t].selectorText,n.body).forEach(function(e){e.style.cssText=i[t].style.cssText.replace(/mso-[a-z\-]+:[\s]*[^;]+;/g,"").replace(/border[a-z\-]*:[\s]*[^;]+;/g,"")+e.style.cssText;});},s=0;s<i.length;s+=1)r(s);o=n.firstChild?n.body.innerHTML:"";}}catch(e){}finally{a.Dom.safeRemove(t);}return o&&(e=o),e.replace(/<(\/)?(html|colgroup|col|o:p)[^>]*>/g,"").replace(/<!--[^>]*>/g,"")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(9);t.cleanFromWord=function(e){~e.indexOf("<html ")&&(e=(e=e.substring(e.indexOf("<html "),e.length)).substring(0,7+e.lastIndexOf("</html>")));var t="";try{var o=document.createElement("div");o.innerHTML=e;var i=[];o.firstChild&&n.Dom.all(o,function(t){if(t)switch(t.nodeType){case Node.ELEMENT_NODE:switch(t.nodeName){case"STYLE":case"LINK":case"META":i.push(t);break;case"W:SDT":case"W:SDTPR":case"FONT":n.Dom.unwrap(t);break;default:Array.from(t.attributes).forEach(function(e){~["src","href","rel","content"].indexOf(e.name.toLowerCase())||t.removeAttribute(e.name);});}break;case Node.TEXT_NODE:break;default:i.push(t);}}),i.forEach(n.Dom.safeRemove),t=o.innerHTML;}catch(e){}return t&&(e=t),(e=e.split(/(\n)/).filter(r.trim).join("\n")).replace(/<(\/)?(html|colgroup|col|o:p)[^>]*>/g,"").replace(/<!--[^>]*>/g,"")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.sprintf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var g=0,_=e,o=_[g];function b(e,t,o,i){var n=e.length<t?Array(1+t-e.length>>>0).join(o):"";return i?e+n:n+e}function y(e,t,o,i,n){var r=i-e.length;return 0<r&&(e=o||!n?b(e,i," ",o):e.slice(0,t.length)+b("",r,"0",!0)+e.slice(t.length)),e}function w(e,t,o,i,n,r,s){var a=e>>>0;return y((o=o&&a&&{2:"0b",8:"0",16:"0x"}[t]||"")+b(a.toString(t),r||0,"0",!1),o,i,n,s)}function E(e,t,o,i,n){return null!=i&&(e=e.slice(0,i)),y(e,"",t,o,n)}return g+=1,o.replace(/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,function(e,t,o,i,n,r,s){if("%%"===e)return "%";for(var a=!1,l="",c=!1,d=!1,u=0;o&&u<o.length;u++)switch(o[0|u]){case" ":l=" ";break;case"+":l="+";break;case"-":a=!0;break;case"0":c=!0;break;case"#":d=!0;}if((i=i?"*"===i?+_[g++]:"*"==(""+i)[0]?+_[(""+i).slice(1,-1)]:+i:0)<0&&(i=-i,a=!0),!isFinite(i))throw Error("sprintf: (minimum-)width must be finite");r=r?"*"===r?+_[g++]:"*"===r[0]?+_[r.slice(1,-1)]:+r:~"fFeE".indexOf(s)?6:"d"===s?0:void 0;var f=t?_[t.slice(0,-1)]:_[g++];switch(s){case"s":return E(f+"",a,i,r,c);case"c":return E(String.fromCharCode(+f),a,i,r,c);case"b":return w(f,2,d,a,i,r,c);case"o":return w(f,8,d,a,i,r,c);case"x":return w(f,16,d,a,i,r,c);case"X":return w(f,16,d,a,i,r,c).toUpperCase();case"u":return w(f,10,d,a,i,r,c);case"i":case"d":return y(f=(h=(p=parseInt(""+f,10))<0?"-":l)+b(Math.abs(p)+"",r,"0",!1),h,a,i,c);case"e":case"E":case"f":case"F":case"g":case"G":var p,h=(p=+f)<0?"-":l,v=["toExponential","toFixed","toPrecision"]["efg".indexOf(s.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(s)%2];return y(f=h+Math.abs(p)[v](r),h,a,i,c)[m]();default:return e}})};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(34),n=o(2);t.clear=function(e,t){return void 0===t&&(t=!1),e=i.trim(e).replace(n.INVISIBLE_SPACE_REG_EXP,"").replace(/[\s]*class=""/g,""),t&&(e=e.replace(/<p[^>]*>[\s\n\r\t]*(&nbsp;|<br>|<br\/>)?[\s\n\r\t]*<\/p>[\n\r]*/g,"")),e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.htmlspecialchars=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.stripTags=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||""};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(9),n=o(2);t.normalizeKeyAliases=function(e){var t={};return e.replace(/\+\+/g,"+add").split(/[\s]*\+[\s]*/).map(function(e){return i.trim(e.toLowerCase())}).map(function(e){return n.KEY_ALIASES[e]||e}).sort().filter(function(e){return !t[e]&&""!==e&&(t[e]=!0)}).join("+")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeLicense=function(e,t){void 0===t&&(t=8);for(var o=[];e.length;)o.push(e.substr(0,t)),e=e.substr(t);return o[1]=o[1].replace(/./g,"*"),o[2]=o[2].replace(/./g,"*"),o.join("-")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(2),n=o(0);t.normalizeNode=function(e){if(e){if(e.nodeType===Node.TEXT_NODE&&null!==e.nodeValue&&e.parentNode)for(;e.nextSibling&&e.nextSibling.nodeType===Node.TEXT_NODE;)null!==e.nextSibling.nodeValue&&(e.nodeValue+=e.nextSibling.nodeValue),e.nodeValue=e.nodeValue.replace(i.INVISIBLE_SPACE_REG_EXP,""),n.Dom.safeRemove(e.nextSibling);else t.normalizeNode(e.firstChild);t.normalizeNode(e.nextSibling);}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(9);t.normalizePath=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return o.filter(function(e){return i.trim(e).length}).map(function(e,t){return e=e.replace(/([^:])[\\\/]+/g,"$1/"),t&&(e=e.replace(/^\//,"")),t!==o.length-1&&(e=e.replace(/\/$/,"")),e}).join("/")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeRelativePath=function(e){return e.split("/").reduce(function(e,t){switch(t){case"":case".":break;case"..":e.pop();break;default:e.push(t);}return e},[]).join("/")+(e.endsWith("/")?"/":"")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSize=function(e){return /^[0-9]+$/.test(""+e)?e+"px":""+e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeURL=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return e.length}).map(function(e){return e.replace(/\/$/,"")}).join("/").replace(/([^:])[\\\/]+/g,"$1/")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(45),r=o(34);t.normalizeColor=function(e){var t=["#"],o=n.colorToHex(e);if(!o)return !1;if(3!==(o=(o=r.trim(o.toUpperCase())).substr(1)).length)return 6<o.length&&(o=o.substr(0,6)),"#"+o;for(var i=0;i<3;i+=1)t.push(o[i]),t.push(o[i]);return t.join("")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getContentWidth=function(e,t){function o(e){return parseInt(e,10)}var i=t.getComputedStyle(e);return e.offsetWidth-o(i.getPropertyValue("padding-left")||"0")-o(i.getPropertyValue("padding-right")||"0")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.innerWidth=function(e,t){var o=t.getComputedStyle(e);return e.clientWidth-(parseFloat(o.paddingLeft||"0")+parseFloat(o.paddingRight||"0"))};},function(e,v,t){Object.defineProperty(v,"__esModule",{value:!0}),v.offset=function(e,t,o,i){void 0===i&&(i=!1);var n,r,s=e.getBoundingClientRect(),a=o.body,l=o.documentElement||{clientTop:0,clientLeft:0,scrollTop:0,scrollLeft:0},c=o.defaultView||o.parentWindow,d=c.pageYOffset||l.scrollTop||a.scrollTop,u=c.pageXOffset||l.scrollLeft||a.scrollLeft,f=l.clientTop||a.clientTop||0,p=l.clientLeft||a.clientLeft||0;if(!i&&t&&t.options&&t.options.iframe&&t.iframe){var h=v.offset(t.iframe,t,t.ownerDocument,!0);n=s.top+h.top,r=s.left+h.left;}else n=s.top+d-f,r=s.left+u-p;return {top:Math.round(n),left:Math.round(r),width:s.width,height:s.height}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.browser=function(e){var t=navigator.userAgent.toLowerCase(),o=/(firefox)[\s\/]([\w.]+)/.exec(t)||/(chrome)[\s\/]([\w.]+)/.exec(t)||/(webkit)[\s\/]([\w.]+)/.exec(t)||/(opera)(?:.*version)[\s\/]([\w.]+)/.exec(t)||/(msie)[\s]([\w.]+)/.exec(t)||/(trident)\/([\w.]+)/.exec(t)||!~t.indexOf("compatible")||[];return "version"===e?o[2]:"webkit"===e?"chrome"===o[1]||"webkit"===o[1]:"ff"===e?"firefox"===o[1]:"msie"===e?"trident"===o[1]||"msie"===o[1]:o[1]===e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(44),l=o(52);t.convertMediaURLToVideoEmbed=function(e,t,o){if(void 0===t&&(t=400),void 0===o&&(o=345),!a.isURL(e))return e;var i=document.createElement("a"),n=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g;i.href=e,t=t||400,o=o||345;var r=i.protocol||"";switch(i.hostname){case"www.vimeo.com":case"vimeo.com":return n.test(e)?e.replace(n,'<iframe width="'+t+'" height="'+o+'" src="'+r+'//player.vimeo.com/video/$1" frameborder="0" allowfullscreen></iframe>'):e;case"youtube.com":case"www.youtube.com":case"youtu.be":case"www.youtu.be":var s=i.search?l.parseQuery(i.search):{v:i.pathname.substr(1)};return s.v?'<iframe width="'+t+'" height="'+o+'" src="'+r+"//www.youtube.com/embed/"+s.v+'" frameborder="0" allowfullscreen></iframe>':e}return e};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n="JoditDataBindKey";t.dataBind=function(e,t,o){var i=e[n];if(i||Object.defineProperty(e,n,{enumerable:(i={},!1),configurable:!0,value:i}),void 0===o)return i[t];i[t]=o;};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.humanSizeToBytes=function(e){if(/^[0-9.]+$/.test(""+e))return parseFloat(e);var t=e.substr(-2,2).toUpperCase(),o=["KB","MB","GB","TB"],i=parseFloat(e.substr(0,e.length-2));return ~o.indexOf(t)?i*Math.pow(1024,1+o.indexOf(t)):parseInt(e,10)};},function(e,i,t){Object.defineProperty(i,"__esModule",{value:!0}),i.inView=function(e,t,o){var i=e.getBoundingClientRect(),n=e,r=i.top,s=i.height;do{if(n&&n.parentNode){if(r>(i=(n=n.parentNode).getBoundingClientRect()).bottom)return !1;if(r+s<=i.top)return !1}}while(n&&n!==t&&n.parentNode);return r<=(o.documentElement&&o.documentElement.clientHeight||0)},i.scrollIntoView=function(e,t,o){i.inView(e,t,o)||(t.clientHeight!==t.scrollHeight&&(t.scrollTop=e.offsetTop),i.inView(e,t,o)||e.scrollIntoView());};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.val=function(e,t,o){var i=e.querySelector(t);return i?(o&&(i.value=o),i.value):""};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=(n.prototype.undo=function(){this.observer.snapshot.restore(this.oldValue);},n.prototype.redo=function(){this.observer.snapshot.restore(this.newValue);},n);function n(e,t,o){this.observer=o,this.oldValue=e,this.newValue=t;}t.Command=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(8),s=o(0),a=(n.__extends(l,i=r.Component),l.prototype.hide=function(){this.container&&(this.container.style.display="none");},l.prototype.show=function(){this.container&&(this.container.style.display="block");},l.prototype.append=function(e,t){void 0===t&&(t=!1);var o=this.jodit.create.div("jodit_statusbar_item");t&&o.classList.add("jodit_statusbar_item-right"),o.appendChild(e),this.container.appendChild(o),this.show(),this.jodit.events.fire("resize");},l.prototype.destruct=function(){s.Dom.safeRemove(this.container),delete this.container,i.prototype.destruct.call(this);},l);function l(e,t){var o=i.call(this,e)||this;return o.target=t,o.container=e.create.div("jodit_statusbar"),t.appendChild(o.container),o.hide(),o}t.StatusBar=a;},function(e,o,t){Object.defineProperty(o,"__esModule",{value:!0}),o.defaultNameSpace="JoditEventDefaultNamespace";var i=(n.prototype.get=function(e,t){if(void 0!==this.__store[t])return this.__store[t][e]},n.prototype.indexOf=function(e,t,o){var i=this.get(e,t);if(i)for(var n=0;n<i.length;n+=1)if(i[n].originalCallback===o)return n;return !1},n.prototype.namespaces=function(e){void 0===e&&(e=!1);var t=Object.keys(this.__store);return e?t.filter(function(e){return e!==o.defaultNameSpace}):t},n.prototype.events=function(e){return this.__store[e]?Object.keys(this.__store[e]):[]},n.prototype.set=function(e,t,o,i){void 0===i&&(i=!1),void 0===this.__store[t]&&(this.__store[t]={}),void 0===this.__store[t][e]&&(this.__store[t][e]=[]),i?this.__store[t][e].unshift(o):this.__store[t][e].push(o);},n.prototype.clear=function(){delete this.__store,this.__store={};},n);function n(){this.__store={};}o.EventHandlersStore=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(8),s=o(0),a=o(64),l=o(15),c=(n.__extends(d,i=r.Component),d.prototype.destruct=function(){this.isDestructed&&(s.Dom.safeRemove(this.container),delete this.container,i.prototype.destruct.call(this));},d.prototype.lock=function(e){return void 0===e&&(e="any"),!this.isLocked()&&(this.__whoLocked=e,!0)},d.prototype.unlock=function(){return !!this.isLocked()&&!(this.__whoLocked="")},d.prototype.toggleFullSize=function(e){void 0===e&&(e=!this.__isFullSize),e!==this.__isFullSize&&(this.__isFullSize=e);},d);function d(e){var t=i.call(this,e)||this;return t.__whoLocked="",t.__isFullSize=!1,t.ownerDocument=document,t.ownerWindow=window,t.isLocked=function(){return ""!==t.__whoLocked},t.isLockedNotBy=function(e){return t.isLocked()&&t.__whoLocked!==e},t.isFullSize=function(){return t.__isFullSize},e&&e.ownerDocument&&(t.ownerDocument=e.ownerDocument,t.ownerWindow=e.ownerWindow),t.create=new a.Create(t.ownerDocument,l.isJoditObject(e)?e.editorDocument:void 0),t.container=t.create.div(),t}t.Panel=c;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(25),s=(n.__extends(a,i=r.ToolbarElement),a);function a(e){var t=i.call(this,e)||this;return t.container.classList.add("jodit_toolbar_btn-break"),t}t.ToolbarBreak=s;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r,a=o(1),i=o(4),l=o(26),n=o(27),c=o(20),s=(a.__extends(d,r=n.Popup),d.prototype.doClose=function(){this.toolbar&&(this.toolbar.destruct(),delete this.toolbar);},d.prototype.doOpen=function(r){var s=this;this.toolbar=c.JoditToolbarCollection.makeCollection(this.jodit);var e="string"==typeof r.list?r.list.split(/[\s,]+/):r.list;i.each(e,function(e,t){function o(e){return n&&n[e]}var i,n=s.jodit.options.controls;"string"==typeof t&&o(t)?i=new l.ToolbarButton(s.toolbar,a.__assign({name:""+t},o(t)),s.current):"string"==typeof e&&o(e)&&"object"==typeof t?i=new l.ToolbarButton(s.toolbar,a.__assign(a.__assign({name:""+e},o(e)),t),s.current):(i=new l.ToolbarButton(s.toolbar,{name:""+e,exec:r.exec,command:r.command,isActive:r.isActiveChild,isDisable:r.isDisableChild,mode:r.mode,args:[r.args&&r.args[0]||e,r.args&&r.args[1]||t]},s.current)).textBox.innerHTML=(r.template||s.defaultControl.template)(s.jodit,""+e,""+t),s.toolbar.appendChild(i);}),this.container.appendChild(this.toolbar.container),this.container.style.removeProperty("marginLeft"),this.toolbar.checkActiveButtons();},d.prototype.firstInFocus=function(){this.toolbar.firstButton.focus();},d.prototype.destruct=function(){this.isDestructed||(this.doClose(),r.prototype.destruct.call(this));},d);function d(e,t,o,i){void 0===i&&(i="jodit_toolbar_list");var n=r.call(this,e,t,o,i)||this;return n.target=t,n.current=o,n.className=i,n.defaultControl={template:function(e,t,o){return n.jodit.i18n(o)}},n}t.PopupList=s;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(0),s=o(5),a=o(25),l=(n.__extends(c,i=a.ToolbarElement),c.prototype.destruct=function(){return this.hide(),this.jodit&&this.jodit.events&&this.jodit.events.off("change updateToolbar scroll hidePopup closeAllPopups hideTooltip",this.hide),i.prototype.destruct.call(this)},c);function c(e){var t=i.call(this,e.parentToolbar||e.jodit,"div","jodit_tooltip")||this;return t.button=e,t.timeout=0,t.show=function(){var e=t.button.jodit.options.showTooltipDelay||10*t.button.jodit.defaultTimeout;t.button.jodit.events.fire("hideTooltip"),t.timeout=s.setTimeout(function(){t.button.container.appendChild(t.container),t.container.style.marginLeft=-(t.container.offsetWidth-t.button.container.offsetWidth)/2+"px";},e);},t.hide=function(){window.clearTimeout(t.timeout),r.Dom.safeRemove(t.container);},e.control.tooltip&&(t.container.innerHTML=e.tooltipText,e.jodit.events.on(e.anchor,"mouseenter",t.show).on(e.anchor,"mouseleave",t.hide).on("change updateToolbar scroll hidePopup closeAllPopups hideTooltip",t.hide)),t}t.ToolbarTooltip=l;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(25),s=(n.__extends(a,i=r.ToolbarElement),a);function a(e){var t=i.call(this,e)||this;return t.container.classList.add("jodit_toolbar_btn-separator"),t}t.ToolbarSeparator=s;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ucfirst=function(e){return e.length?e[0].toUpperCase()+e.substr(1):""};},function(e,t,o){var i=o(118),n=o(119),r=o(120),s=o(121),a=o(122),l=o(123),c=o(124),d=o(125),u=o(126),f=o(127),p=o(128),h=o(129),v=o(130),m=o(131),g=o(132),_=o(133),b={ar:i.default,de:r.default,cs_cz:n.default,en:_.default,es:s.default,fr:a.default,he:l.default,hu:c.default,id:d.default,it:u.default,nl:f.default,pt_br:p.default,ru:h.default,tr:v.default,zh_cn:m.default,zh_tw:g.default},y={};Array.isArray(_.default)&&_.default.forEach(function(e,t){y[t]=e;}),Object.keys(b).forEach(function(o){var e=b[o];Array.isArray(e)&&(b[o]={},e.forEach(function(e,t){b[o][y[t]]=e;}));}),e.exports=b;},function(e,t){e.exports.default=["إبدأ في الكتابة...","لتحرير"];},function(e,t){e.exports.default=["Napiš něco","Chcete-li upravit"];},function(e,t){e.exports.default=["Bitte geben Sie einen Text ein","Bearbeiten"];},function(e,t){e.exports.default=["Escriba algo...","Para editar"];},function(e,t){e.exports.default=["Ecrivez ici","Pour éditer"];},function(e,t){e.exports.default=["הקלד משהו...","כדי לערוך"];},function(e,t){e.exports.default=["Írjon be valamit","Szerkesztés"];},function(e,t){e.exports.default=["Ketik sesuatu","pensil"];},function(e,t){e.exports.default=["Scrivi qualcosa...","Per modificare"];},function(e,t){e.exports.default=["Begin met typen..","Om te bewerken"];},function(e,t){e.exports.default=["Escreva algo...","Editar"];},function(e,t){e.exports.default=["Напишите что-либо","Редактировать"];},function(e,t){e.exports.default=["Bir şey yazın.","Düzenlemek için"];},function(e,t){e.exports.default=["输入一些内容","要編輯"];},function(e,t){e.exports.default=["輸入一些內容","要編輯"];},function(e,t){e.exports.default=["Type something","pencil"];},function(e,t){},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=(n.prototype.set=function(e,t,o){var i,n;i=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toUTCString()):"",document.cookie=e+"="+t+i+"; path=/";},n.prototype.get=function(e){var t,o,i=e+"=",n=document.cookie.split(";");for(t=0;t<n.length;t+=1){for(o=n[t];" "==o[0];)o=o.substring(1,o.length);if(!o.indexOf(i))return o.substring(i.length,o.length)}return null},n.prototype.remove=function(e){this.set(e,"",-1);},n);function n(){}t.Cookie=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(16),l=o(6);t.Alert=function(e,t,o,i){void 0===i&&(i="jodit_alert"),"function"==typeof t&&(o=t,t=void 0);var n=new a.Dialog,r=n.create.div(i),s=n.create.fromHTML('<a href="javascript:void(0)" style="float:right;" class="jodit_button">'+l.ToolbarIcon.getIcon("cancel")+"<span>"+c.Jodit.prototype.i18n("Ok")+"</span></a>");return d.asArray(e).forEach(function(e){r.appendChild(u.Dom.isNode(e,n.window)?e:n.create.fromHTML(e));}),s.addEventListener("click",function(){o&&"function"==typeof o&&!1===o(n)||n.close();}),n.setFooter([s]),n.open(r,t||"&nbsp;",!0,!0),s.focus(),n};var c=o(12),d=o(29),u=o(0);},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),l=o(3),d=o(2),u=o(16),i=o(66),r=o(65),f=o(6),p=o(60),h=o(35),s=o(24),v=o(19),m=o(11),c=o(53),g=o(14),_=o(18),n=o(61);o(138);var b,y=o(0),w=o(5),E=o(13),C=o(139),j=o(140),x=o(141),T=o(142),S=o(143),D=o(144),q=o(40),M=q.ITEM_CLASS+"-active-true",L=(a.__extends(I,b=n.ViewWithToolbar),Object.defineProperty(I.prototype,"defaultTimeout",{get:function(){return this.jodit&&this.jodit!==this?this.jodit.defaultTimeout:l.Config.defaultOptions.observer.timeout},enumerable:!0,configurable:!0}),I.prototype.loadItems=function(t,o){return void 0===t&&(t=this.dataProvider.currentPath),void 0===o&&(o=this.dataProvider.currentSource),a.__awaiter(this,void 0,void 0,function(){var i=this;return a.__generator(this,function(e){return this.files.classList.add("active"),this.files.appendChild(this.loader.cloneNode(!0)),[2,this.dataProvider.items(t,o).then(function(e){var t=i.options.items.process;if(t=t||i.options.ajax.process){var o=t.call(self,e);i.generateItemsList(o.data.sources),i.state.activeElements=[];}}).catch(function(e){E.Alert(e.message),i.errorHandler(e);})]})})},I.prototype.loadTree=function(){return a.__awaiter(this,void 0,void 0,function(){var t,o,i,n,r,s=this;return a.__generator(this,function(e){return t=this.dataProvider.currentPath,o=this.dataProvider.currentSource,i=function(e){throw e instanceof Error?e:Error(e)},this.uploader&&(this.uploader.setPath(t),this.uploader.setSource(o)),this.tree.classList.add("active"),y.Dom.detach(this.tree),this.tree.appendChild(this.loader.cloneNode(!0)),this.options.showFoldersPanel?(n=this.dataProvider.tree(t,o).then(function(e){var t=s.options.folder.process;if(t=t||s.options.ajax.process){var o=t.call(self,e);s.generateFolderTree(o.data.sources);}}).catch(function(e){s.errorHandler(Error(s.jodit.i18n("Error on load folders"))),i(e);}),r=this.loadItems(t,o),[2,Promise.all([n,r]).catch(i)]):(this.tree.classList.remove("active"),[2])})})},I.prototype.deleteFile=function(o,i){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){return [2,this.dataProvider.fileRemove(this.dataProvider.currentPath,o,i).then(function(e){if(t.options.remove&&t.options.remove.process&&(e=t.options.remove.process.call(t,e)),!t.options.isSuccess(e))throw Error(t.options.getMessage(e));t.status(t.options.getMessage(e)||t.i18n('File "%s" was deleted',o),!0);}).catch(this.status)]})})},I.prototype.generateFolderTree=function(e){var i=[];s.each(e,function(t,o){o.folders.forEach(function(e){i.push({name:e,source:o,sourceName:t});});}),this.state.folders=i;},I.prototype.generateItemsList=function(e){var i=this,n=[],r=this.state;s.each(e,function(t,o){o.files&&o.files.length&&("function"==typeof i.options.sort&&o.files.sort(function(e,t){return i.options.sort(e,t,r.sortBy)}),o.files.forEach(function(e){r.filterWord.length&&void 0!==i.options.filter&&!i.options.filter(e,r.filterWord)||i.state.onlyImages&&void 0!==e.isImage&&!e.isImage||n.push(T.FileBrowserItem.create(a.__assign(a.__assign({},e),{sourceName:t,source:o})));}));}),this.state.elements=n;},I.prototype.onSelect=function(e){var t=this;return function(){if(t.state.activeElements.length){var o=[];t.state.activeElements.forEach(function(e){var t=e.fileURL;t&&o.push(t);}),t.close(),"function"==typeof e&&e({baseurl:"",files:o});}return !1}},I.prototype.isOpened=function(){return this.dialog.isOpened()&&"none"!==this.browser.style.display},I.prototype.elementToItem=function(e){return this.elementsMap[e.dataset.key||""].item},I.prototype.stateToView=function(){var l=this,e=this.state,t=this.files,c=this.create,d=this.options;e.on("beforeChange.activeElements",function(){e.activeElements.forEach(function(e){var t=l.elementsMap[e.uniqueHashKey].elm;t&&t.classList.remove(M);});}).on("change.activeElements",function(){l.events.fire("changeSelection"),e.activeElements.forEach(function(e){var t=l.elementsMap[e.uniqueHashKey].elm;t&&t.classList.add(M);});}).on("change.view",function(){t.classList.remove(q.F_CLASS+"_files_view-tiles"),t.classList.remove(q.F_CLASS+"_files_view-list"),t.classList.add(q.F_CLASS+"_files_view-"+e.view),l.storage.set(q.F_CLASS+"_view",e.view);}).on("change.sortBy",function(){l.storage.set(q.F_CLASS+"_sortby",e.sortBy);}).on("change.elements",w.debounce(function(){y.Dom.detach(t),e.elements.length?e.elements.forEach(function(e){l.files.appendChild(function(e){var t=e.uniqueHashKey;if(l.elementsMap[t])return l.elementsMap[t].elm;var o=c.fromHTML(d.getThumbTemplate.call(l,e,e.source,""+e.sourceName));return l.elementsMap[o.dataset.key=t]={item:e,elm:o},l.elementsMap[t].elm}(e));}):t.appendChild(c.div(q.F_CLASS+"_no_files",l.i18n("There are no files")));},this.defaultTimeout)).on("change.folders",w.debounce(function(){function r(e,t,o){void 0===o&&(o=!1),e&&a&&(e!==a||o)&&d.createNewFolder&&l.dataProvider.canI("FolderCreate")&&(l.tree.appendChild(c.a("jodit_button addfolder",{href:"javascript:void(0)","data-path":v.normalizePath(e.path+"/"),"data-source":t},f.ToolbarIcon.getIcon("plus")+" "+l.i18n("Add folder"))),a=e);}y.Dom.detach(l.tree);var s="default",a=null;e.folders.forEach(function(e){var t=e.name,o=e.source,i=e.sourceName;i&&i!==s&&(l.tree.appendChild(c.div(q.F_CLASS+"_source_title",i)),s=i);var n=c.a(q.F_CLASS+"_tree_item",{draggable:"draggable",href:"javascript:void(0)","data-path":v.normalizePath(o.path,t+"/"),"data-name":t,"data-source":i,"data-source-path":o.path},c.span(q.F_CLASS+"_tree_item_title",t));r(o,i),a=o,l.tree.appendChild(n),".."!==t&&"."!==t&&(d.deleteFolder&&l.dataProvider.canI("FolderRename")&&n.appendChild(c.element("i",{class:"jodit_icon_folder jodit_icon_folder_rename",title:l.i18n("Rename")},f.ToolbarIcon.getIcon("pencil"))),d.deleteFolder&&l.dataProvider.canI("FolderRemove")&&n.appendChild(c.element("i",{class:"jodit_icon_folder jodit_icon_folder_remove",title:l.i18n("Delete")},f.ToolbarIcon.getIcon("cancel"))));}),r(a,s,!0);},this.defaultTimeout));},I.prototype.initEventsListeners=function(){var t=this,o=this.state,n=this;n.events.on("view.filebrowser",function(e){e!==o.view&&(o.view=e);}).on("sort.filebrowser",function(e){e!==o.sortBy&&(o.sortBy=e,n.loadItems());}).on("filter.filebrowser",function(e){e!==o.filterWord&&(o.filterWord=e,n.loadItems());}).on("fileRemove.filebrowser",function(){n.state.activeElements.length&&i.Confirm(n.i18n("Are you sure?"),"",function(e){if(e){var t=[];n.state.activeElements.forEach(function(e){t.push(n.deleteFile(e.file||e.name||"",e.sourceName));}),n.state.activeElements=[],Promise.all(t).then(function(){return n.loadTree()});}});}).on("edit.filebrowser",function(){if(1===n.state.activeElements.length){var e=t.state.activeElements[0];n.openImageEditor(e.fileURL,e.file||"",e.path,e.sourceName);}}).on("fileRename.filebrowser",function(t,o,i){1===n.state.activeElements.length&&r.Promt(n.i18n("Enter new name"),n.i18n("Rename"),function(e){if(!D.isValidName(e))return n.status(n.i18n("Enter new name")),!1;n.dataProvider.fileRename(o,t,e,i).then(function(e){if(n.options.fileRename&&n.options.fileRename.process&&(e=n.options.fileRename.process.call(n,e)),!n.options.isSuccess(e))throw Error(n.options.getMessage(e));n.state.activeElements=[],n.status(n.options.getMessage(e),!0),n.loadItems();}).catch(n.status);},n.i18n("type name"),t);}).on("update.filebrowser",function(){n.loadTree();});},I.prototype.initNativeEventsListeners=function(){var t=this,o=!1,n=this;n.events.on(n.tree,"click",function(e){var t=this.parentNode,o=t.getAttribute("data-path")||"";return i.Confirm(n.i18n("Are you sure?"),n.i18n("Delete"),function(e){e&&n.dataProvider.folderRemove(o,t.getAttribute("data-name")||"",t.getAttribute("data-source")||"").then(function(e){if(n.options.folderRemove&&n.options.folderRemove.process&&(e=n.options.folderRemove.process.call(n,e)),!n.options.isSuccess(e))throw Error(n.options.getMessage(e));n.state.activeElements=[],n.status(n.options.getMessage(e),!0),n.loadTree();}).catch(n.status);}),e.stopImmediatePropagation(),!1},"a>.jodit_icon_folder_remove").on(n.tree,"click",function(e){var t=this.parentNode,o=t.getAttribute("data-name")||"",i=t.getAttribute("data-source-path")||"";return r.Promt(n.i18n("Enter new name"),n.i18n("Rename"),function(e){if(!D.isValidName(e))return n.status(n.i18n("Enter new name")),!1;n.dataProvider.folderRename(i,t.getAttribute("data-name")||"",e,t.getAttribute("data-source")||"").then(function(e){if(n.options.folderRename&&n.options.folderRename.process&&(e=n.options.folderRename.process.call(n,e)),!n.options.isSuccess(e))throw Error(n.options.getMessage(e));n.state.activeElements=[],n.status(n.options.getMessage(e),!0),n.loadTree();}).catch(n.status);},n.i18n("type name"),o),e.stopImmediatePropagation(),!1},"a>.jodit_icon_folder_rename").on(n.tree,"click",function(){var t=this;this.classList.contains("addfolder")?r.Promt(n.i18n("Enter Directory name"),n.i18n("Create directory"),function(e){n.dataProvider.createFolder(e,t.getAttribute("data-path")||"",t.getAttribute("data-source")||"").then(function(e){return n.options.isSuccess(e)?n.loadTree():n.status(n.options.getMessage(e)),e},n.status);},n.i18n("type name")):(n.dataProvider.currentPath=this.getAttribute("data-path")||"",n.dataProvider.currentSource=this.getAttribute("data-source")||"",n.loadTree());},"a").on(n.tree,"dragstart",function(){n.options.moveFolder&&(o=this);},"a").on(n.tree,"drop",function(){if((n.options.moveFile||n.options.moveFolder)&&o){var e=o.getAttribute("data-path")||"";if(!n.options.moveFolder&&o.classList.contains(q.F_CLASS+"_tree_item"))return !1;if(o.classList.contains(q.ITEM_CLASS)&&(e+=o.getAttribute("data-name"),!n.options.moveFile))return !1;n.dataProvider.move(e,this.getAttribute("data-path")||"",this.getAttribute("data-source")||"",o.classList.contains(q.ITEM_CLASS)).then(function(e){n.options.isSuccess(e)?n.loadTree():n.status(n.options.getMessage(e));},n.status),o=!1;}},"a").on(n.files,"contextmenu",j.default(n),"a").on(n.files,"click",function(e){c.ctrlKey(e)||(t.state.activeElements=[]);}).on(n.files,"click",function(e){var t=n.elementToItem(this);if(t)return n.state.activeElements=c.ctrlKey(e)?a.__spreadArrays(n.state.activeElements,[t]):[t],e.stopPropagation(),!1},"a").on(n.files,"dragstart",function(){n.options.moveFile&&(o=this);},"a").on(n.dialog.container,"drop",function(e){return e.preventDefault()});},I.prototype.initUploader=function(e){function t(){n.loadItems();}var o,i,n=this,r=this,s=g.extend(!0,{},l.Config.defaultOptions.uploader,r.options.uploader,a.__assign({},null===(i=null===(o=e)||void 0===o?void 0:o.options)||void 0===i?void 0:i.uploader));r.uploader=r.getInstance("Uploader",s),r.uploader.setPath(r.dataProvider.currentPath),r.uploader.setSource(r.dataProvider.currentSource),r.uploader.bind(r.browser,t,r.errorHandler),r.events.on("bindUploader.filebrowser",function(e){r.uploader.bind(e,t,r.errorHandler);});},I.prototype.destruct=function(){this.dialog.destruct(),delete this.dialog,this.events&&this.events.off(".filebrowser"),this.uploader&&this.uploader.destruct(),delete this.uploader,b.prototype.destruct.call(this);},I);function I(e,t){var c=b.call(this,e,t)||this;c.loader=c.create.div(q.F_CLASS+"_loader",q.ICON_LOADER),c.browser=c.create.div(q.F_CLASS+" non-selected"),c.status_line=c.create.div(q.F_CLASS+"_status"),c.tree=c.create.div(q.F_CLASS+"_tree"),c.files=c.create.div(q.F_CLASS+"_files"),c.state=x.ObserveObject.create({activeElements:[],elements:[],folders:[],view:"tiles",sortBy:"changed-desc",filterWord:"",onlyImages:!1}),c.errorHandler=function(e){c.status(e instanceof Error?c.i18n(e.message):c.options.getMessage(e));},c.status=function(e,t){"string"!=typeof e&&(e=e.message),clearTimeout(c.statusTimer),c.status_line.classList.remove("success"),c.status_line.classList.add("active");var o=c.create.div();o.textContent=e,c.status_line.appendChild(o),t&&c.status_line.classList.add("success"),c.statusTimer=_.setTimeout(function(){c.status_line.classList.remove("active"),y.Dom.detach(c.status_line);},c.options.howLongShowMsg);},c.close=function(){c.dialog.close();},c.open=function(n,e){return void 0===e&&(e=!1),c.state.onlyImages=e,new Promise(function(e,t){if(!c.options.items||!c.options.items.url)throw Error("Need set options.filebrowser.ajax.url");var o=0;c.events.off(c.files,"dblclick").on(c.files,"dblclick",c.onSelect(n),"a").on(c.files,"touchstart",function(){var e=(new Date).getTime();e-o<d.EMULATE_DBLCLICK_TIMEOUT&&c.onSelect(n)(),o=e;},"a").off("select.filebrowser").on("select.filebrowser",c.onSelect(n));var i=c.create.div();c.toolbar.build(c.options.buttons,i),c.dialog.dialogbox_header.classList.add(q.F_CLASS+"_title_box"),c.dialog.open(c.browser,i),c.events.fire("sort.filebrowser",c.state.sortBy),c.loadTree().then(e,t);})},c.openImageEditor=function(e,n,r,s,a,l){return c.getInstance("ImageEditor").open(e,function(e,t,o,i){("resize"===t.action?c.dataProvider.resize(r,s,n,e,t.box):c.dataProvider.crop(r,s,n,e,t.box)).then(function(e){c.options.isSuccess(e)?c.loadTree().then(function(){o(),a&&a();}):(i(Error(c.options.getMessage(e))),l&&l(Error(c.options.getMessage(e))));}).catch(function(e){i(e),l&&l(e);});})},c.elementsMap={};var o=c,i=e?e.ownerDocument:document,n=e?e.editorDocument:i;e&&(c.id=e.id),o.options=new l.OptionsDefault(g.extend(!0,{},o.options,l.Config.defaultOptions.filebrowser,t,e?e.options.filebrowser:void 0)),o.storage=new h.Storage(c.options.filebrowser.saveStateInStorage?new p.LocalStorageProvider:new S.MemoryStorageProvider),o.dataProvider=new C.default(o.options,o.jodit||o),o.dialog=new u.Dialog(e||o,{fullsize:o.options.fullsize,buttons:["dialog.fullsize","dialog.close"]}),o.options.showFoldersPanel&&o.browser.appendChild(o.tree),o.browser.appendChild(o.files),o.browser.appendChild(o.status_line),c.initEventsListeners(),c.initNativeEventsListeners(),o.dialog.setSize(o.options.width,o.options.height),["getLocalFileByUrl","crop","resize","create","fileMove","folderMove","fileRename","folderRename","fileRemove","folderRemove","folder","items","permissions"].forEach(function(e){null!==c.options[e]&&(c.options[e]=g.extend(!0,{},c.options.ajax,c.options[e]));}),o.stateToView();var r=c.storage.get(q.F_CLASS+"_view");o.state.view=r&&null===c.options.view?"list"===r?"list":"tiles":"list"===o.options.view?"list":"tiles";var s=o.storage.get(q.F_CLASS+"_sortby");if(s){var a=s.split("-");o.state.sortBy=["changed","name","size"].includes(a[0])?s:"changed-desc";}else o.state.sortBy=o.options.sortBy||"changed-desc";return o.dataProvider.currentBaseUrl=m.$$("base",n).length?m.$$("base",n)[0].getAttribute("href")||"":location.protocol+"//"+location.host,o.initUploader(e),c}t.FileBrowser=L;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(6),r=o(42),c=o(4),l=o(40);i.Config.prototype.filebrowser={filter:function(e,t){return t=t.toLowerCase(),"string"==typeof e?!!~e.toLowerCase().indexOf(t):"string"==typeof e.name?!!~e.name.toLowerCase().indexOf(t):"string"!=typeof e.file||!!~e.file.toLowerCase().indexOf(t)},sortBy:"changed-desc",sort:function(e,t,o){function i(e,t){return e<t?s?-1:1:t<e?s?1:-1:0}var n=o.toLowerCase().split("-"),r=n[0],s="asc"===n[1];if("string"==typeof e)return i(e.toLowerCase(),t.toLowerCase());if(void 0===e[r]||"name"===r)return "string"==typeof e.name?i(e.name.toLowerCase(),t.name.toLowerCase()):"string"==typeof e.file?i(e.file.toLowerCase(),t.file.toLowerCase()):0;switch(r){case"changed":var a=new Date(e.changed).getTime(),l=new Date(t.changed).getTime();return s?a-l:l-a;case"size":return a=c.humanSizeToBytes(e.size),l=c.humanSizeToBytes(t.size),s?a-l:l-a}return 0},editImage:!0,preview:!0,showPreviewNavigation:!0,showSelectButtonInPreview:!0,contextMenu:!0,howLongShowMsg:3e3,createNewFolder:!0,deleteFolder:!0,moveFolder:!0,moveFile:!0,showFoldersPanel:!0,width:859,height:400,buttons:["filebrowser.upload","filebrowser.remove","filebrowser.update","filebrowser.select","filebrowser.edit","|","filebrowser.tiles","filebrowser.list","|","filebrowser.filter","|","filebrowser.sort"],removeButtons:[],fullsize:!1,showTooltip:!0,view:null,isSuccess:function(e){return e.success},getMessage:function(e){return void 0!==e.data.messages&&Array.isArray(e.data.messages)?e.data.messages.join(" "):""},showFileName:!0,showFileSize:!0,showFileChangeTime:!0,saveStateInStorage:!0,getThumbTemplate:function(e,t,o){var i=this.options,n=i.showFileName,r=i.showFileSize&&e.size,s=i.showFileChangeTime&&e.time,a="";return void 0!==e.file&&(a=e.file),'<a data-is-file="'+(e.isImage?0:1)+'" draggable="true" class="'+l.ITEM_CLASS+'" href="'+e.fileURL+'" data-source="'+o+'" data-path="'+e.path+'" data-name="'+a+'" title="'+a+'" data-url="'+e.fileURL+'"><img data-is-file="'+(e.isImage?0:1)+'" data-src="'+e.fileURL+'" src="'+e.imageURL+'" alt="'+a+'" loading="lazy" />'+(n||r||s?'<div class="'+l.ITEM_CLASS+'-info">'+(n?'<span class="'+l.ITEM_CLASS+'-info-filename">'+a+"</span>":"")+(r?'<span class="'+l.ITEM_CLASS+'-info-filesize">'+e.size+"</span>":"")+(s?'<span class="'+l.ITEM_CLASS+'-info-filechanged">'+s+"</span>":"")+"</div>":"")+"</a>"},ajax:{url:"",async:!0,data:{},cache:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",method:"POST",processData:!0,dataType:"json",headers:{},prepareData:function(e){return e},process:function(e){return e}},create:{data:{action:"folderCreate"}},getLocalFileByUrl:{data:{action:"getLocalFileByUrl"}},resize:{data:{action:"imageResize"}},crop:{data:{action:"imageCrop"}},fileMove:{data:{action:"fileMove"}},folderMove:{data:{action:"folderMove"}},fileRename:{data:{action:"fileRename"}},folderRename:{data:{action:"folderRename"}},fileRemove:{data:{action:"fileRemove"}},folderRemove:{data:{action:"folderRemove"}},items:{data:{action:"files"}},folder:{data:{action:"folders"}},permissions:{data:{action:"permissions"}},uploader:null},i.Config.prototype.controls.filebrowser={upload:{icon:"plus",isInput:!0,exec:function(){},isDisable:function(e){return !e.dataProvider.canI("FileUpload")},getContent:function(e,t){var o=e.create.fromHTML('<span class="jodit_upload_button">'+n.ToolbarIcon.getIcon("plus")+'<input type="file" accept="'+(e.state.onlyImages?"image/*":"*")+'" tabindex="-1" dir="auto" multiple=""/></span>'),i=o.querySelector("input");return e.events.on("updateToolbar",function(){t&&t.isDisable&&(t.isDisable(e,t)?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled"));}).fire("bindUploader.filebrowser",o),o}},remove:{icon:"bin",isDisable:function(e){return !e.state.activeElements.length||!e.dataProvider.canI("FileRemove")},exec:function(e){e.events.fire("fileRemove.filebrowser");}},update:{exec:function(e){e.events.fire("update.filebrowser");}},select:{icon:"check",isDisable:function(e){return !e.state.activeElements.length},exec:function(e){e.events.fire("select.filebrowser");}},edit:{icon:"pencil",isDisable:function(e){var t=e.state.activeElements;return 1!==t.length||!t[0].isImage||!(e.dataProvider.canI("ImageCrop")||e.dataProvider.canI("ImageResize"))},exec:function(e){e.events.fire("edit.filebrowser");}},tiles:{icon:"th",isActive:function(e){return "tiles"===e.state.view},exec:function(e){e.events.fire("view.filebrowser","tiles");}},list:{icon:"th-list",isActive:function(e){return "list"===e.state.view},exec:function(e){e.events.fire("view.filebrowser","list");}},filter:{isInput:!0,getContent:function(e){var t=e.create.element("input",{class:"jodit_input",placeholder:e.i18n("Filter")});return e.events.on(t,"keydown mousedown",r.debounce(function(){e.events.fire("filter.filebrowser",t.value);},e.defaultTimeout)),t}},sort:{isInput:!0,getContent:function(e){var t=e.create.fromHTML('<select class="jodit_input"><option value="changed-asc">'+e.i18n("Sort by changed")+' (⬆)</option><option value="changed-desc">'+e.i18n("Sort by changed")+' (⬇)</option><option value="name-asc">'+e.i18n("Sort by name")+' (⬆)</option><option value="name-desc">'+e.i18n("Sort by name")+' (⬇)</option><option value="size-asc">'+e.i18n("Sort by size")+' (⬆)</option><option value="size-desc">'+e.i18n("Sort by size")+" (⬇)</option></select>");return e.events.on("sort.filebrowser",function(e){t.value!==e&&(t.value=e);}).on(t,"change",function(){e.events.fire("sort.filebrowser",t.value);}),t}}};},function(e,o,t){Object.defineProperty(o,"__esModule",{value:!0});var n=t(1),r=t(4),s=t(38);o.DEFAULT_SOURCE_NAME="default";var i=(a.prototype.canI=function(e){var t="allow"+e;return null===this.__currentPermissions||void 0===this.__currentPermissions[t]||this.__currentPermissions[t]},a.prototype.get=function(e,t,o){var i=r.extend(!0,{},this.options.ajax,void 0!==this.options[e]?this.options[e]:this.options.ajax);i.prepareData&&(i.data=i.prepareData.call(this,i.data));var n=new s.Ajax(this.parent,i).send();return t&&n.then(t),o&&n.catch(o),n},a.prototype.permissions=function(t,o){return void 0===t&&(t=this.currentPath),void 0===o&&(o=this.currentSource),n.__awaiter(this,void 0,void 0,function(){var i=this;return n.__generator(this,function(e){return this.options.permissions?(this.options.permissions.data.path=t,this.options.permissions.data.source=o,this.options.permissions.url?[2,this.get("permissions").then(function(e){var t=i.options.permissions.process;if(t=t||i.options.ajax.process){var o=t.call(self,e);o.data.permissions&&(i.__currentPermissions=o.data.permissions);}})]:[2,Promise.resolve()]):[2,Promise.resolve()]})})},a.prototype.items=function(o,i){return void 0===o&&(o=this.currentPath),void 0===i&&(i=this.currentSource),n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(e){return (t=this.options).items?(t.items.data.path=o,t.items.data.source=i,[2,this.get("items")]):[2,Promise.reject("Set Items api options")]})})},a.prototype.tree=function(t,o){return void 0===t&&(t=this.currentPath),void 0===o&&(o=this.currentSource),n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return t=r.normalizeRelativePath(t),[4,this.permissions(t,o)];case 1:return e.sent(),this.options.folder?(this.options.folder.data.path=t,this.options.folder.data.source=o,[2,this.get("folder")]):[2,Promise.reject("Set Folder Api options")]}})})},a.prototype.createFolder=function(e,t,o){var i=this;return this.options.create?(this.options.create.data.source=o,this.options.create.data.path=t,this.options.create.data.name=e,this.get("create").then(function(e){return i.currentPath=t,i.currentSource=o,e})):Promise.reject("Set Create api options")},a.prototype.move=function(e,t,o,i){var n=i?"fileMove":"folderMove",r=this.options[n];return r?(r.data.from=e,r.data.path=t,r.data.source=o,this.get(n)):Promise.reject("Set Move api options")},a.prototype.fileRemove=function(e,t,o){return this.options.fileRemove?(this.options.fileRemove.data.path=e,this.options.fileRemove.data.name=t,this.options.fileRemove.data.source=o,this.get("fileRemove")):Promise.reject("Set fileRemove api options")},a.prototype.folderRemove=function(e,t,o){return this.options.folderRemove?(this.options.folderRemove.data.path=e,this.options.folderRemove.data.name=t,this.options.folderRemove.data.source=o,this.get("folderRemove")):Promise.reject("Set folderRemove api options")},a.prototype.folderRename=function(e,t,o,i){return this.options.folderRename?(this.options.folderRename.data.path=e,this.options.folderRename.data.name=t,this.options.folderRename.data.newname=o,this.options.folderRename.data.source=i,this.get("folderRename")):Promise.reject("Set folderRename api options")},a.prototype.fileRename=function(e,t,o,i){return this.options.fileRename?(this.options.fileRename.data.path=e,this.options.fileRename.data.name=t,this.options.fileRename.data.newname=o,this.options.fileRename.data.source=i,this.get("fileRename")):Promise.reject("Set fileRename api options")},a.prototype.crop=function(e,t,o,i,n){return this.options.crop||(this.options.crop={data:{}}),void 0===this.options.crop.data&&(this.options.crop.data={action:"crop"}),this.options.crop.data.newname=i||o,n&&(this.options.crop.data.box=n),this.options.crop.data.path=e,this.options.crop.data.name=o,this.options.crop.data.source=t,this.get("crop")},a.prototype.resize=function(e,t,o,i,n){return this.options.resize||(this.options.resize={data:{}}),void 0===this.options.resize.data&&(this.options.resize.data={action:"resize"}),this.options.resize.data.newname=i||o,n&&(this.options.resize.data.box=n),this.options.resize.data.path=e,this.options.resize.data.name=o,this.options.resize.data.source=t,this.get("resize")},a);function a(e,t){var n=this;this.options=e,this.parent=t,this.__currentPermissions=null,this.currentPath="",this.currentSource=o.DEFAULT_SOURCE_NAME,this.currentBaseUrl="",this.getPathByUrl=function(e,t,o){var i="getLocalFileByUrl";return n.options[i].data.url=e,n.get(i,function(e){n.options.isSuccess(e)?t(e.data.path,e.data.name,e.data.source):o(Error(n.options.getMessage(e)));},o)};}o.default=i;},function(e,t,o){function f(e,t){return void 0===e&&(e="next"),void 0===t&&(t="right"),'<a href="javascript:void(0)" class="'+m+"navigation "+m+"navigation-"+e+'">'+s.ToolbarIcon.getIcon("angle-"+t)+"</a>"}Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),i=o(39),r=o(5),p=o(13),h=o(0),s=o(37),v=o(40),m=v.F_CLASS+"_preview_";t.default=function(u){if(!u.options.contextMenu)return function(){};var o=new i.ContextMenu(u.jodit||u);return function(e){function i(e){return c.getAttribute(e)||""}var t=this,c=this,d=u.options;return r.setTimeout(function(){o.show(e.pageX,e.pageY,[!("1"===i("data-is-file")||!d.editImage||!u.dataProvider.canI("ImageResize")&&!u.dataProvider.canI("ImageCrop"))&&{icon:"pencil",title:"Edit",exec:function(){u.openImageEditor(i("href"),i("data-name"),i("data-path"),i("data-source"));}},!!u.dataProvider.canI("FileRename")&&{icon:"italic",title:"Rename",exec:function(){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(e){return u.events.fire("fileRename.filebrowser",i("data-name"),i("data-path"),i("data-source")),[2]})})}},!!u.dataProvider.canI("FileRemove")&&{icon:"bin",title:"Delete",exec:function(){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return [4,u.deleteFile(i("data-name"),i("data-source"))];case 1:return e.sent(),u.state.activeElements=[],u.loadTree(),[2]}})})}},!!d.preview&&{icon:"eye",title:"Preview",exec:function(){function e(e){var o=u.create.element("img");o.setAttribute("src",e);var i=function(){var e,t;o.removeEventListener("load",i),r.innerHTML="",d.showPreviewNavigation&&(h.Dom.prevWithClass(c,v.ITEM_CLASS)&&r.appendChild(l),h.Dom.nextWithClass(c,v.ITEM_CLASS)&&r.appendChild(a)),r.appendChild(s),s.appendChild(o),n.setPosition(),null===(t=null===(e=u)||void 0===e?void 0:e.events)||void 0===t||t.fire("previewOpenedAndLoaded");};o.addEventListener("load",i),o.complete&&i();}var t,o,n=new p.Dialog(u),r=u.create.div(v.F_CLASS+"_preview",v.ICON_LOADER),s=u.create.div(v.F_CLASS+"_preview_box"),a=u.create.fromHTML(f()),l=u.create.fromHTML(f("prev","left"));e(i("href")),u.events.on([a,l],"click",function(){if(!(c=this.classList.contains(m+"navigation-next")?h.Dom.nextWithClass(c,v.ITEM_CLASS):h.Dom.prevWithClass(c,v.ITEM_CLASS)))throw Error("Need element");h.Dom.detach(r),h.Dom.detach(s),r.innerHTML=v.ICON_LOADER,e(i("href"));}),n.setContent(r),n.setPosition(),n.open(),null===(o=null===(t=u)||void 0===t?void 0:t.events)||void 0===o||o.fire("previewOpened");}},{icon:"upload",title:"Download",exec:function(){var e=i("href");e&&u.ownerWindow.open(e);}}],u.dialog.getZIndex()+1);},u.defaultTimeout),e.stopPropagation(),e.preventDefault(),!1}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),i=(r.prototype.on=function(e,t){var o=this;return Array.isArray(e)?e.map(function(e){return o.on(e,t)}):(this.__onEvents[e]||(this.__onEvents[e]=[]),this.__onEvents[e].push(t)),this},r.prototype.fire=function(e){for(var t=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(Array.isArray(e))e.map(function(e){return t.fire.apply(t,n.__spreadArrays([e],o))});else try{!this.__lockEvent[e]&&this.__onEvents[e]&&(this.__lockEvent[e]=!0,this.__onEvents[e].forEach(function(e){return e.call.apply(e,n.__spreadArrays([t],o))}));}catch(e){}finally{this.__lockEvent[e]=!1;}},r.create=function(e){return new r(e)},r);function r(o){var i=this;this.data=o,this.__onEvents={},this.__lockEvent={},Object.keys(o).forEach(function(t){Object.defineProperty(i,t,{set:function(e){i.fire(["beforeChange","beforeChange."+t],t,e),i.fire(["change","change."+t],t,o[t]=e);},get:function(){return o[t]}});});}t.ObserveObject=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(14),n=o(19),r=(s.create=function(e){return new s(e)},Object.defineProperty(s.prototype,"path",{get:function(){return n.normalizePath(this.data.source.path?this.data.source.path+"/":"/")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"imageURL",{get:function(){var e=""+(new Date).getTime(),t=this.data,o=t.source,i=t.thumb||t.file;return t.thumbIsAbsolute&&i?i:n.normalizeURL(o.baseurl,o.path,i||"")+"?_tmst="+e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fileURL",{get:function(){var e=this.data,t=e.name,o=e.file,i=e.source;return void 0!==o&&(t=o),e.fileIsAbsolute&&t?t:n.normalizeURL(i.baseurl,i.path,t||"")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"time",{get:function(){var e=this.data.changed;return e&&("number"==typeof e?new Date(e).toLocaleString():e)||""},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"uniqueHashKey",{get:function(){var e=this.data,t=[e.sourceName,e.name,e.file,this.time,e.thumb].join("_");return t.toLowerCase().replace(/[^0-9a-z\-.]/g,"-")},enumerable:!0,configurable:!0}),s);function s(e){this.data=e,i.extend(this,e);}t.FileBrowserItem=r;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=(n.prototype.set=function(e,t){this.data[e]=""+t;},n.prototype.get=function(e){return this.data[e]||null},n);function n(){this.data={};}t.MemoryStorageProvider=i;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.isValidName=function(e){return !!e.length&&!/[^0-9A-Za-zа-яА-ЯЁё\w\-_\.]/.test(e)};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(8),s=o(13),a=o(4),l=o(6),c=o(0);n.Config.prototype.imageeditor={min_width:20,min_height:20,closeAfterSave:!1,width:"85%",height:"85%",crop:!0,resize:!0,resizeUseRatio:!0,resizeMinWidth:20,resizeMinHeight:20,cropUseRatio:!0,cropDefaultWidth:"70%",cropDefaultHeight:"70%"};var d,u=(i.__extends(f,d=r.Component),f.prototype.destruct=function(){this.isDestructed||(this.dialog&&(this.dialog.destruct(),delete this.dialog),c.Dom.safeRemove(this.editor),delete this.widthInput,delete this.heightInput,delete this.resize_box,delete this.crop_box,delete this.sizes,delete this.resizeHandler,delete this.cropHandler,delete this.editor,this.jodit.events&&this.jodit.events.off(".jodit_image_editor"),d.prototype.destruct.call(this));},f);function f(e){var r=d.call(this,e)||this;return r.resizeUseRatio=!0,r.cropUseRatio=!0,r.clicked=!1,r.activeTab="resize",r.cropBox={x:0,y:0,w:0,h:0},r.resizeBox={w:0,h:0},r.calcValueByPercent=function(e,t){var o,i=""+t,n=parseFloat(""+e);return (o=/^[\-+]?[0-9]+(px)?$/.exec(i))?parseInt(i,10):(o=/^([\-+]?[0-9.]+)%$/.exec(i))?Math.round(n*(parseFloat(o[1])/100)):n||0},r.calcCropBox=function(){var e,t=.8*r.crop_box.parentNode.offsetWidth,o=.8*r.crop_box.parentNode.offsetHeight,i=t;e=r.naturalWidth<t&&r.naturalHeight<o?(i=r.naturalWidth,r.naturalHeight):t/o<r.ratio?r.naturalHeight*((i=t)/r.naturalWidth):(i=r.naturalWidth*(o/r.naturalHeight),o),a.css(r.crop_box,{width:i,height:e});},r.showCrop=function(){r.cropImage&&(r.calcCropBox(),r.new_w=r.calcValueByPercent(r.cropImage.offsetWidth||r.image.offsetWidth,r.options.cropDefaultWidth),r.new_h=r.cropUseRatio?r.new_w/r.ratio:r.calcValueByPercent(r.cropImage.offsetHeight||r.image.offsetHeight,r.options.cropDefaultHeight),a.css(r.cropHandler,{backgroundImage:"url("+r.cropImage.getAttribute("src")+")",width:r.new_w,height:r.new_h,left:(r.cropImage.offsetWidth||r.image.offsetWidth)/2-r.new_w/2,top:(r.cropImage.offsetHeight||r.image.offsetHeight)/2-r.new_h/2}),r.jodit.events.fire(r.cropHandler,"updatesize"));},r.updateCropBox=function(){if(r.cropImage){var e=r.cropImage.offsetWidth/r.naturalWidth,t=r.cropImage.offsetHeight/r.naturalHeight;r.cropBox.x=a.css(r.cropHandler,"left")/e,r.cropBox.y=a.css(r.cropHandler,"top")/t,r.cropBox.w=r.cropHandler.offsetWidth/e,r.cropBox.h=r.cropHandler.offsetHeight/t,r.sizes.textContent=r.cropBox.w.toFixed(0)+"x"+r.cropBox.h.toFixed(0);}},r.updateResizeBox=function(){r.resizeBox.w=r.image.offsetWidth||r.naturalWidth,r.resizeBox.h=r.image.offsetHeight||r.naturalHeight;},r.setHandlers=function(){var n=r;n.jodit.events.on([n.editor.querySelector(".jodit_bottomright"),n.cropHandler],"mousedown.jodit_image_editor",function(e){n.target=e.target||e.srcElement,e.preventDefault(),e.stopImmediatePropagation(),n.clicked=!0,n.start_x=e.clientX,n.start_y=e.clientY,n.height="crop"===n.activeTab?(n.top_x=a.css(n.cropHandler,"left"),n.top_y=a.css(n.cropHandler,"top"),n.width=n.cropHandler.offsetWidth,n.cropHandler.offsetHeight):(n.width=n.image.offsetWidth,n.image.offsetHeight);}).off(r.jodit.ownerWindow,".jodit_image_editor"+n.jodit.id).on(r.jodit.ownerWindow,"mousemove.jodit_image_editor"+n.jodit.id,a.throttle(function(e){n.clicked&&(n.diff_x=e.clientX-n.start_x,n.diff_y=e.clientY-n.start_y,"resize"===n.activeTab&&n.resizeUseRatio||"crop"===n.activeTab&&n.cropUseRatio?n.diff_x?(n.new_w=n.width+n.diff_x,n.new_h=Math.round(n.new_w/n.ratio)):(n.new_h=n.height+n.diff_y,n.new_w=Math.round(n.new_h*n.ratio)):(n.new_w=n.width+n.diff_x,n.new_h=n.height+n.diff_y),"resize"===n.activeTab?(n.options.resizeMinWidth<n.new_w&&(a.css(n.image,"width",n.new_w+"px"),n.widthInput.value=""+n.new_w),n.options.resizeMinHeight<n.new_h&&(a.css(n.image,"height",n.new_h+"px"),n.heightInput.value=""+n.new_h),r.jodit.events.fire(n.resizeHandler,"updatesize")):(n.target!==n.cropHandler?(n.cropImage.offsetWidth<n.top_x+n.new_w&&(n.new_w=n.cropImage.offsetWidth-n.top_x),n.cropImage.offsetHeight<n.top_y+n.new_h&&(n.new_h=n.cropImage.offsetHeight-n.top_y),a.css(n.cropHandler,{width:n.new_w,height:n.new_h})):(n.cropImage.offsetWidth<n.top_x+n.diff_x+n.cropHandler.offsetWidth&&(n.diff_x=n.cropImage.offsetWidth-n.top_x-n.cropHandler.offsetWidth),a.css(n.cropHandler,"left",n.top_x+n.diff_x),n.cropImage.offsetHeight<n.top_y+n.diff_y+n.cropHandler.offsetHeight&&(n.diff_y=n.cropImage.offsetHeight-n.top_y-n.cropHandler.offsetHeight),a.css(n.cropHandler,"top",n.top_y+n.diff_y)),r.jodit.events.fire(n.cropHandler,"updatesize")),e.stopImmediatePropagation());},5)).on(r.jodit.ownerWindow,"resize.jodit_image_editor"+n.jodit.id,function(){r.jodit.events.fire(n.resizeHandler,"updatesize"),n.showCrop(),r.jodit.events.fire(n.cropHandler,"updatesize");}).on(r.jodit.ownerWindow,"mouseup.jodit_image_editor"+n.jodit.id+" keydown.jodit_image_editor"+n.jodit.id,function(e){n.clicked&&(n.clicked=!1,e.stopImmediatePropagation());}),a.$$(".jodit_btn_group",n.editor).forEach(function(e){var t=e.querySelector("input");n.jodit.events.on(e,"click change",function(){a.$$("button",e).forEach(function(e){return e.classList.remove("active")}),this.classList.add("active"),t.checked=!!this.getAttribute("data-yes"),n.jodit.events.fire(t,"change");},"button");}),n.jodit.events.on(r.editor,"click.jodit_image_editor",function(){a.$$(".jodit_image_editor_slider,.jodit_image_editor_area",n.editor).forEach(function(e){return e.classList.remove("active")});var e=this.parentNode;e.classList.add("active"),n.activeTab=e.getAttribute("data-area")||"resize";var t=n.editor.querySelector(".jodit_image_editor_area.jodit_image_editor_area_"+n.activeTab);t&&t.classList.add("active"),"crop"===n.activeTab&&n.showCrop();},".jodit_image_editor_slider-title").on(n.widthInput,"change.jodit_image_editor mousedown.jodit_image_editor keydown.jodit_image_editor",a.debounce(function(){var e,t=parseInt(n.widthInput.value,10);n.options.min_width<t&&(a.css(n.image,"width",t+"px"),n.resizeUseRatio&&n.options.min_height<(e=Math.round(t/n.ratio))&&(a.css(n.image,"height",e+"px"),n.heightInput.value=""+e)),r.jodit.events.fire(n.resizeHandler,"updatesize");},200)).on(n.heightInput,"change.jodit_image_editor mousedown.jodit_image_editor keydown.jodit_image_editor",a.debounce(function(){if(!r.isDestructed){var e,t=parseInt(n.heightInput.value,10);n.options.min_height<t&&(a.css(n.image,"height",t+"px"),n.resizeUseRatio&&n.options.min_width<(e=Math.round(t*n.ratio))&&(a.css(n.image,"width",e+"px"),n.widthInput.value=""+e)),r.jodit.events.fire(n.resizeHandler,"updatesize");}},200));var e=n.editor.querySelector(".jodit_image_editor_keep_spect_ratio");e&&e.addEventListener("change",function(){n.resizeUseRatio=e.checked;});var t=n.editor.querySelector(".jodit_image_editor_keep_spect_ratio_crop");t&&t.addEventListener("change",function(){n.cropUseRatio=t.checked;}),n.jodit.events.on(n.resizeHandler,"updatesize",function(){a.css(n.resizeHandler,{top:0,left:0,width:(n.image.offsetWidth||n.naturalWidth)+"px",height:(n.image.offsetHeight||n.naturalHeight)+"px"}),r.updateResizeBox();}).on(n.cropHandler,"updatesize",function(){if(n.cropImage){var e=a.css(n.cropHandler,"left"),t=a.css(n.cropHandler,"top"),o=n.cropHandler.offsetWidth,i=n.cropHandler.offsetHeight;e<0&&(e=0),t<0&&(t=0),n.cropImage.offsetWidth<e+o&&(o=n.cropImage.offsetWidth-e,n.cropUseRatio&&(i=o/n.ratio)),n.cropImage.offsetHeight<t+i&&(i=n.cropImage.offsetHeight-t,n.cropUseRatio&&(o=i*n.ratio)),a.css(n.cropHandler,{width:o,height:i,left:e,top:t,backgroundPosition:-e-1+"px "+(-t-1)+"px",backgroundSize:n.cropImage.offsetWidth+"px "+n.cropImage.offsetHeight+"px"}),n.updateCropBox();}}),n.buttons.forEach(function(e){e.addEventListener("mousedown",function(e){e.stopImmediatePropagation();}),e.addEventListener("click",function(){var t={action:n.activeTab,box:"resize"===n.activeTab?n.resizeBox:n.cropBox};switch(e.getAttribute("data-action")){case"saveas":s.Promt(n.jodit.i18n("Enter new name"),n.jodit.i18n("Save in new file"),function(e){if(!a.trim(e))return s.Alert(n.jodit.i18n("The name should not be empty")),!1;n.onSave(e,t,n.hide,function(e){s.Alert(e.message);});});break;case"save":n.onSave(void 0,t,n.hide,function(e){s.Alert(e.message);});break;case"reset":"resize"===n.activeTab?(a.css(n.image,{width:null,height:null}),n.widthInput.value=""+n.naturalWidth,n.heightInput.value=""+n.naturalHeight,n.jodit.events.fire(n.resizeHandler,"updatesize")):n.showCrop();}});});},r.hide=function(){r.dialog.close();},r.open=function(i,n){return new Promise(function(e){var t=(new Date).getTime();r.image=r.jodit.create.element("img"),a.$$("img,.jodit_icon-loader",r.resize_box).forEach(c.Dom.safeRemove),a.$$("img,.jodit_icon-loader",r.crop_box).forEach(c.Dom.safeRemove),a.css(r.cropHandler,"background","transparent"),r.onSave=n,r.resize_box.appendChild(r.jodit.create.element("i",{class:"jodit_icon-loader"})),r.crop_box.appendChild(r.jodit.create.element("i",{class:"jodit_icon-loader"})),r.image.setAttribute("src",i+=/\?/.test(i)?"&_tst="+t:"?_tst="+t),r.dialog.open();var o=function(){r.isDestructed||(r.image.removeEventListener("load",o),r.naturalWidth=r.image.naturalWidth,r.naturalHeight=r.image.naturalHeight,r.widthInput.value=""+r.naturalWidth,r.heightInput.value=""+r.naturalHeight,r.ratio=r.naturalWidth/r.naturalHeight,r.resize_box.appendChild(r.image),r.cropImage=r.image.cloneNode(),r.crop_box.appendChild(r.cropImage),a.$$(".jodit_icon-loader",r.editor).forEach(c.Dom.safeRemove),"crop"===r.activeTab&&r.showCrop(),r.jodit.events.fire(r.resizeHandler,"updatesize"),r.jodit.events.fire(r.cropHandler,"updatesize"),r.dialog.setPosition(),r.jodit.events.fire("afterImageEditor"),e(r.dialog));};r.image.addEventListener("load",o),r.image.complete&&o();})},r.options=e&&e.options?e.options.imageeditor:n.Config.defaultOptions.imageeditor,r.resizeUseRatio=r.options.resizeUseRatio,r.cropUseRatio=r.options.cropUseRatio,r.buttons=[r.jodit.create.fromHTML('<button data-action="reset" type="button" class="jodit_btn">'+l.ToolbarIcon.getIcon("update")+"&nbsp;"+e.i18n("Reset")+"</button>"),r.jodit.create.fromHTML('<button data-action="save" type="button" class="jodit_btn jodit_btn_success">'+l.ToolbarIcon.getIcon("save")+"&nbsp;"+e.i18n("Save")+"</button>"),r.jodit.create.fromHTML('<button data-action="saveas" type="button" class="jodit_btn jodit_btn_success">'+l.ToolbarIcon.getIcon("save")+"&nbsp;"+e.i18n("Save as ...")+"</button>")],r.activeTab=r.options.resize?"resize":"crop",r.editor=r.jodit.create.fromHTML('<form class="jodit_image_editor jodit_properties"><div class="jodit_grid"><div class="jodit_col-lg-3-4">'+(r.options.resize?'<div class="jodit_image_editor_area jodit_image_editor_area_resize active">                                <div class="jodit_image_editor_box"></div>                                <div class="jodit_image_editor_resizer">                                    <i class="jodit_bottomright"></i>                                </div>                            </div>':"")+(r.options.crop?'<div class="jodit_image_editor_area jodit_image_editor_area_crop'+(r.options.resize?"":" active")+'">                                <div class="jodit_image_editor_box">                                    <div class="jodit_image_editor_croper">                                        <i class="jodit_bottomright"></i>                                        <i class="jodit_sizes"></i>                                    </div>                                </div>                            </div>':"")+'</div><div class="jodit_col-lg-1-4">'+(r.options.resize?'<div data-area="resize" class="jodit_image_editor_slider active">                                <div class="jodit_image_editor_slider-title">'+l.ToolbarIcon.getIcon("resize")+e.i18n("Resize")+'</div>                                <div class="jodit_image_editor_slider-content">                                    <div class="jodit_form_group">                                        <label for="jodit_image_editor_width">'+e.i18n("Width")+'</label>                                        <input type="number" class="jodit_image_editor_width"/>                                    </div>                                    <div class="jodit_form_group">                                        <label for="jodit_image_editor_height">'+e.i18n("Height")+'</label>                                        <input type="number" class="jodit_image_editor_height"/>                                    </div>                                    <div class="jodit_form_group">                                        <label>'+e.i18n("Keep Aspect Ratio")+'</label>                                        <div class="jodit_btn_group jodit_btn_radio_group">                                            <input '+(r.resizeUseRatio?"checked":"")+' type="checkbox" class="jodit_image_editor_keep_spect_ratio"/>                                            <button type="button"  data-yes="1"                                                 class="jodit_col6 jodit_btn jodit_btn_success '+(r.resizeUseRatio?"active":"")+'">'+e.i18n("Yes")+'</button>                                            <button type="button" class="jodit_col6 jodit_btn'+(r.resizeUseRatio?"":"active")+'">'+e.i18n("No")+"</button>                                        </div>                                    </div>                                </div>                            </div>":"")+(r.options.crop?'<div data-area="crop" class="jodit_image_editor_slider'+(r.options.resize?"":" active")+'">                                <div class="jodit_image_editor_slider-title">'+l.ToolbarIcon.getIcon("crop")+e.i18n("Crop")+'</div>                                <div class="jodit_image_editor_slider-content">                                    <div class="jodit_form_group">                                        <label>'+e.i18n("Keep Aspect Ratio")+'</label>                                        <div class="jodit_btn_group jodit_btn_radio_group">                                            <input '+(r.cropUseRatio?"checked":"")+' type="checkbox" class="jodit_image_editor_keep_spect_ratio_crop"/>                                            <button type="button" data-yes="1"                                                 class="jodit_col6 jodit_btn jodit_btn_success '+(r.cropUseRatio?"active":"")+'">'+e.i18n("Yes")+'</button>                                            <button type="button" class="jodit_col6 jodit_btn '+(r.cropUseRatio?"":"active")+'">'+e.i18n("No")+"</button>                                        </div>                                    </div>                                </div>                            </div>":"")+"</div></div></form>"),r.widthInput=r.editor.querySelector(".jodit_image_editor_width"),r.heightInput=r.editor.querySelector(".jodit_image_editor_height"),r.resize_box=r.editor.querySelector(".jodit_image_editor_area.jodit_image_editor_area_resize .jodit_image_editor_box"),r.crop_box=r.editor.querySelector(".jodit_image_editor_area.jodit_image_editor_area_crop .jodit_image_editor_box"),r.sizes=r.editor.querySelector(".jodit_image_editor_area.jodit_image_editor_area_crop .jodit_sizes"),r.resizeHandler=r.editor.querySelector(".jodit_image_editor_resizer"),r.cropHandler=r.editor.querySelector(".jodit_image_editor_croper"),r.dialog=new s.Dialog(e),r.dialog.setContent(r.editor),r.dialog.setSize(r.options.width,r.options.height),r.dialog.setTitle(r.buttons),r.setHandlers(),r}t.ImageEditor=u;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),p=o(2),r=o(38),_=o(4),h=o(0),v=o(15),s=o(8);n.Config.prototype.enableDragAndDropFileToEditor=!0,n.Config.prototype.uploader={url:"",insertImageAsBase64URI:!1,imagesExtensions:["jpg","png","jpeg","gif"],headers:null,data:null,filesVariableName:function(e){return "files["+e+"]"},withCredentials:!1,pathVariableName:"path",format:"json",method:"POST",prepareData:function(e){return e},isSuccess:function(e){return e.success},getMessage:function(e){return void 0!==e.data.messages&&Array.isArray(e.data.messages)?e.data.messages.join(" "):""},process:function(e){return e.data},error:function(e){this.jodit.events.fire("errorMessage",e.message,"error",4e3);},defaultHandlerSuccess:function(s){var a=this;s.files&&s.files.length&&s.files.forEach(function(e,t){var o=s.isImages&&s.isImages[t]?["img","src"]:["a","href"],i=o[0],n=o[1],r=a.jodit.create.inside.element(i);r.setAttribute(n,s.baseurl+e),"a"===i&&(r.textContent=s.baseurl+e),v.isJoditObject(a.jodit)&&("img"===i?a.jodit.selection.insertImage(r,null,a.jodit.options.imageDefaultWidth):a.jodit.selection.insertNode(r));});},defaultHandlerError:function(e){this.jodit.events.fire("errorMessage",e.message);},contentType:function(e){return (void 0===this.jodit.ownerWindow.FormData||"string"==typeof e)&&"application/x-www-form-urlencoded; charset=UTF-8"}};var a,l=(i.__extends(m,a=s.Component),m.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),n=new Uint8Array(i),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([n],{type:o})},m.prototype.buildData=function(t){if(this.options.buildData&&"function"==typeof this.options.buildData)return this.options.buildData.call(this,t);var e=this.jodit.ownerWindow.FormData;if(void 0===e)return t;if(t instanceof e)return t;if("string"==typeof t)return t;var o=new e;return Object.keys(t).forEach(function(e){o.append(e,t[e]);}),o},m.prototype.send=function(e,i){function t(e){var t=new r.Ajax(n.jodit||n,{xhr:function(){var e=new XMLHttpRequest;return void 0!==n.jodit.ownerWindow.FormData&&e.upload?e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;t*=100,n.jodit.progress_bar.style.display="block",n.jodit.progress_bar.style.width=t+"%",100==t&&(n.jodit.progress_bar.style.display="none");}},!1):n.jodit.progress_bar.style.display="none",e},method:n.options.method||"POST",data:e,url:n.options.url,headers:n.options.headers,queryBuild:n.options.queryBuild,contentType:n.options.contentType.call(n,e),dataType:n.options.format||"json",withCredentials:n.options.withCredentials||!1});function o(){var e=n.ajaxInstances.indexOf(t);-1!=e&&n.ajaxInstances.splice(e,1);}return n.ajaxInstances.push(t),t.send().then(function(e){o(),i.call(n,e);}).catch(function(e){o(),n.options.error.call(n,e);})}var n=this,o=this.buildData(e);return o instanceof Promise?o.then(t).catch(function(e){n.options.error.call(n,e);}):t(o)},m.prototype.sendFiles=function(e,i,t,o){var n=this;if(!e)return Promise.reject(Error("Need files"));var r=this,s=Array.from(e);if(!s.length)return Promise.reject(Error("Need files"));var a=[];if(this.options.insertImageAsBase64URI){var l,c=void 0,d=function(){if((l=s[c])&&l.type){var e=l.type.match(/\/([a-z0-9]+)/i),t=e[1]?e[1].toLowerCase():"";if(u.options.imagesExtensions.includes(t)){var o=new FileReader;a.push(new Promise(function(t,e){o.onerror=e,o.onloadend=function(){var e={baseurl:"",files:[o.result],isImages:[!0]};"function"==typeof(i||r.options.defaultHandlerSuccess)&&(i||r.options.defaultHandlerSuccess).call(r,e),t(e);},o.readAsDataURL(l);})),s[c]=null;}}},u=this;for(c=0;c<s.length;c+=1)d();}if((s=s.filter(function(e){return e})).length){var f=new FormData;f.append(this.options.pathVariableName,r.path),f.append("source",r.source);var p=void 0;for(c=0;c<s.length;c+=1)if(p=s[c]){var h=p.type.match(/\/([a-z0-9]+)/i),v=h&&h[1]?h[1].toLowerCase():"",m=s[c].name||(""+Math.random()).replace(".","");if(v){var g=v;["jpeg","jpg"].includes(g)&&(g="jpeg|jpg"),RegExp(".("+g+")$","i").test(m)||(m+="."+v);}f.append(this.options.filesVariableName(c),s[c],m);}o&&o(f),r.options.data&&_.isPlainObject(r.options.data)&&Object.keys(r.options.data).forEach(function(e){f.append(e,r.options.data[e]);}),r.options.prepareData.call(this,f),a.push(r.send(f,function(e){n.options.isSuccess.call(r,e)?"function"==typeof(i||r.options.defaultHandlerSuccess)&&(i||r.options.defaultHandlerSuccess).call(r,r.options.process.call(r,e)):(t||r.options.defaultHandlerError).call(r,Error(r.options.getMessage.call(r,e)));}).then(function(){n.jodit.events&&n.jodit.events.fire("filesWereUploaded");}));}return Promise.all(a)},m.prototype.setPath=function(e){this.path=e;},m.prototype.setSource=function(e){this.source=e;},m.prototype.bind=function(t,c,d){function e(e){function t(e){i&&(e.append("extension",n),e.append("mimetype",i.type));}var o,i,n;if(e.clipboardData&&e.clipboardData.files&&e.clipboardData.files.length)return u.sendFiles(e.clipboardData.files,c,d),!1;if(_.browser("ff")||p.IS_IE){if(e.clipboardData&&!e.clipboardData.types.length&&e.clipboardData.types[0]!==p.TEXT_PLAIN){var r=u.jodit.create.div("",{tabindex:-1,style:"left: -9999px; top: 0; width: 0; height: 100%;line-height: 140%; overflow: hidden; position: fixed; z-index: 2147483647; word-break: break-all;",contenteditable:!0});u.jodit.ownerDocument.body.appendChild(r);var s=u.jodit&&v.isJoditObject(u.jodit)?u.jodit.selection.save():null;r.focus(),setTimeout(function(){var e=r.firstChild;if(h.Dom.safeRemove(r),e&&e.hasAttribute("src")){var t=e.getAttribute("src")||"";s&&u.jodit&&v.isJoditObject(u.jodit)&&u.jodit.selection.restore(s),f.sendFiles([m.dataURItoBlob(t)],c,d);}},200);}}else if(e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length){var a=e.clipboardData.items;for(o=0;o<a.length;o+=1)if("file"===a[o].kind&&"image/png"===a[o].type){if(i=a[o].getAsFile()){var l=i.type.match(/\/([a-z0-9]+)/i);n=l[1]?l[1].toLowerCase():"",u.sendFiles([i],c,d,t);}e.preventDefault();break}}}var u=this,f=this;function o(e){return !(!e.dataTransfer||!e.dataTransfer.files||0===e.dataTransfer.files.length)}this.jodit&&this.jodit.editor!==t?f.jodit.events.on(t,"paste",e):f.jodit.events.on("beforePaste",e),f.jodit.events.on(t,"dragend dragover dragenter dragleave drop",function(e){e.preventDefault();}).on(t,"dragover",function(e){o(e)&&(t.classList.contains("jodit_draghover")||t.classList.add("jodit_draghover"),e.preventDefault());}).on(t,"dragend",function(e){o(e)&&(t.classList.contains("jodit_draghover")&&t.classList.remove("jodit_draghover"),e.preventDefault());}).on(t,"drop",function(e){t.classList.remove("jodit_draghover"),o(e)&&e.dataTransfer&&e.dataTransfer.files&&(e.preventDefault(),e.stopImmediatePropagation(),u.sendFiles(e.dataTransfer.files,c,d));});var i=t.querySelector("input[type=file]");i&&f.jodit.events.on(i,"change",function(){f.sendFiles(this.files,c,d).then(function(){i.value="",/safari/i.test(navigator.userAgent)||(i.type="",i.type="file");});});},m.prototype.uploadRemoteImage=function(e,t,o){var i=this,n=this;n.send({action:"fileUploadRemote",url:e},function(e){if(n.options.isSuccess.call(n,e))"function"==typeof t?t.call(n,i.options.process.call(i,e)):i.options.defaultHandlerSuccess.call(n,i.options.process.call(i,e));else if("function"==typeof(o||n.options.defaultHandlerError))return void(o||i.options.defaultHandlerError).call(n,Error(n.options.getMessage.call(i,e)))});},m.prototype.destruct=function(){this.ajaxInstances.forEach(function(e){try{e.abort();}catch(e){}}),delete this.options,a.prototype.destruct.call(this);},m);function m(e,t){var o=a.call(this,e)||this;return o.path="",o.source="default",o.ajaxInstances=[],o.options=_.extend(!0,{},n.Config.defaultOptions.uploader,v.isJoditObject(e)?e.options.uploader:null,t),o}t.Uploader=l;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(148);t.addNewLine=i.addNewLine;var n=o(149);t.autofocus=n.autofocus;var r=o(150);t.backspace=r.backspace;var s=o(151);t.bold=s.bold;var a=o(152);t.cleanHtml=a.cleanHtml;var l=o(153);t.color=l.color,o(154);var c=o(155);t.enter=c.enter;var d=o(156);t.errorMessages=d.errorMessages;var u=o(157);t.font=u.font;var f=o(158);t.formatBlock=f.formatBlock;var p=o(159);t.fullsize=p.fullsize;var h=o(160);t.iframe=h.iframe;var v=o(161);t.indent=v.indent;var m=o(162);t.imageProcessor=m.imageProcessor;var g=o(163);t.imageProperties=g.imageProperties;var _=o(164);t.inlinePopup=_.inlinePopup;var b=o(165);t.justify=b.justify;var y=o(166);t.link=y.link;var w=o(167);t.limit=w.limit;var E=o(168);t.media=E.media;var C=o(169);t.mobile=C.mobile;var j=o(170);t.orderedlist=j.orderedlist;var x=o(171);t.paste=x.paste;var T=o(173);t.placeholder=T.placeholder;var S=o(174);t.redoundo=S.redoundo;var D=o(175);t.resizer=D.resizer;var q=o(176);t.size=q.size;var M=o(177);t.source=M.source;var L=o(178);t.symbols=L.symbols;var I=o(179);t.hotkeys=I.hotkeys;var N=o(180);t.table=N.TableProcessor;var A=o(181);t.tableKeyboardNavigation=A.tableKeyboardNavigation;var k=o(182);t.search=k.search;var P=o(183);t.sticky=P.sticky;var O=o(184);t.stat=O.stat;var z=o(185);t.xpath=z.xpath;var R=o(186);t.DragAndDropElement=R.DragAndDropElement;var B=o(187);t.DragAndDrop=B.DragAndDrop;var H=o(188);t.pasteStorage=H.pasteStorage;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),v=o(0),r=o(5),m=o(23),g=o(6);i.Config.prototype.addNewLine=!0,i.Config.prototype.addNewLineOnDBLClick=!0,i.Config.prototype.addNewLineTagsTriggers=["table","iframe","img","hr","jodit"],t.addNewLine=function(s){if(s.options.addNewLine){var a,l,c=s.create.fromHTML('<div role="button" tabIndex="-1" title="'+s.i18n("Break")+'" class="jodit-add-new-line"><span>'+g.ToolbarIcon.getIcon("enter")+"</span></div>"),d=RegExp("^("+s.options.addNewLineTagsTriggers.join("|")+")$","i"),u=!1,f=!1,e=!1,n=function(){clearTimeout(a),e=!1,c.style.display="none",u=!0;},p=function(e){return null!==e&&v.Dom.isBlock(e,s.editorWindow)&&!/^(img|table|iframe|hr)$/i.test(e.nodeName)},h=function(){u||e||(clearTimeout(a),a=r.setTimeout(n,500));};s.events.on("beforeDestruct",function(){v.Dom.safeRemove(c);}).on("afterInit",function(){s.container.appendChild(c),s.events.on(c,"mousemove",function(e){e.stopPropagation();}).on(c,"mousedown touchstart",function(e){var t=s.editorDocument.createElement(s.options.enter);f&&l&&l.parentNode?l.parentNode.insertBefore(t,l):s.editor.appendChild(t),s.selection.setCursorIn(t),s.events.fire("synchro"),n(),e.preventDefault();});}).on("afterInit",function(){s.events.on(s.editor,"scroll",function(){n();}).on(s.container,"mouseleave",h).on(c,"mouseenter",function(){clearTimeout(a),e=!0;}).on(c,"mouseleave",function(){e=!1;}).on(s.editor,"dblclick",function(e){if(!s.options.readonly&&s.options.addNewLineOnDBLClick&&e.target===s.editor&&s.selection.isCollapsed()){var t=m.offset(s.editor,s,s.editorDocument),o=e.pageY-s.editorWindow.pageYOffset,i=s.editorDocument.createElement(s.options.enter);Math.abs(o-t.top)<Math.abs(o-(t.height+t.top))&&s.editor.firstChild?s.editor.insertBefore(i,s.editor.firstChild):s.editor.appendChild(i),s.selection.setCursorIn(i),s.setEditorValue(),n(),e.preventDefault();}}).on(s.editor,"mousemove",r.debounce(function(e){var t=s.editorDocument.elementFromPoint(e.pageX-s.editorWindow.pageXOffset,e.pageY-s.editorWindow.pageYOffset);if((!t||!v.Dom.isOrContains(c,t))&&t&&v.Dom.isOrContains(s.editor,t))if(t&&t.nodeName.match(d)&&v.Dom.isOrContains(s.editor,t)||(t=v.Dom.closest(t,d,s.editor))){if(d.test(t.nodeName)){var o=v.Dom.up(t,function(e){return v.Dom.isBlock(e,s.editorWindow)},s.editor);o&&o!==s.editor&&(t=o);}var i=m.offset(s.editor,s,s.editorDocument),n=m.offset(t,s,s.editorDocument),r=!1;Math.abs(e.pageY-n.top)<10&&((r=n.top)-i.top<20||(r-=15),f=!0),Math.abs(e.pageY-(n.top+n.height))<10&&(i.top+i.height-(r=n.top+n.height)<25||(r+=15),f=!1),!1!==r&&(f&&!v.Dom.prev(t,p,s.editor)||!f&&!v.Dom.next(t,p,s.editor))?(c.style.top=r+"px",l=t,s.options.readonly||s.isLocked()||s.container.classList.contains("jodit_popup_active")||(clearTimeout(a),c.classList.toggle("jodit-add-new-line_after",!f),c.style.display="block",c.style.width=s.editor.clientWidth+"px",u=!1)):(l=!1,h());}else h();},s.defaultTimeout));});}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(0),r=o(5);i.Config.prototype.autofocus=!1,t.autofocus=function(t){var e;t.events.on("afterInit",function(){t.options.autofocus&&(t.defaultTimeout?e=r.setTimeout(t.selection.focus,300):t.selection.focus());}).on("mousedown",function(e){t.isEditorMode()&&e.target&&n.Dom.isBlock(e.target,t.editorWindow)&&!e.target.childNodes.length&&(t.editor===e.target?t.selection.focus():t.selection.setCursorIn(e.target));}).on("beforeDestruct",function(){clearTimeout(e);});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var y=o(2),i=o(2),w=o(0),E=o(4);t.backspace=function(m){function g(e){var t,o=e;E.normalizeNode(e);do{var i=o.innerHTML.replace(y.INVISIBLE_SPACE_REG_EXP,"");if(i.length&&"<br>"!==i||w.Dom.isCell(o,m.editorWindow)||!o.parentNode||e===m.editor)break;t=o.parentNode,w.Dom.safeRemove(o),o=t;}while(o&&o!==m.editor)}function r(e){if(e&&t.test(e.nodeName))return w.Dom.safeRemove(e),!1}function _(e,t,o){if(e.node){var i=e.node;if(void 0!==c(e,t,o))return !0;if(e.node||(e.node=i.parentNode),e.node===m.editor)return !1;var n=e.node;if(!1===r(n))return !1;for(n=n&&(t?n.previousSibling:n.nextSibling);n&&n.nodeType===Node.TEXT_NODE&&n.nodeValue&&n.nodeValue.match(/^[\n\r]+$/);)n=t?n.previousSibling:n.nextSibling;return r(n)}}var c=function(e,t,o){if(e.node&&e.node.nodeType===Node.TEXT_NODE&&"string"==typeof e.node.nodeValue){for(var i=e.node.nodeValue,n=t?i.length:0,r=t?-1:1,s=n;0<=n&&n<=i.length&&i[n+(t?-1:0)]===y.INVISIBLE_SPACE;)n+=r;n!==s&&(t?i=i.substr(0,n)+i.substr(s):(i=i.substr(0,s)+i.substr(n),n=s),e.node.nodeValue=i),o.setStart(e.node,n),o.collapse(!0),m.selection.selectRange(o);var a=w.Dom.findInline(e.node,t,m.editor);if(i.length){var l=!1;if(t?n&&(l=!0):n<i.length&&(l=!0),l)return !0}else o.setStartBefore(e.node),o.collapse(!0),m.selection.selectRange(o),w.Dom.safeRemove(e.node),e.node=a;if(a&&(w.Dom.isInlineBlock(a)&&(a=t?a.lastChild:a.firstChild),a&&a.nodeType===Node.TEXT_NODE))return e.node=a,c(e,t,o)}},t=i.MAY_BE_REMOVED_WITH_KEY,b=function(e){return !(null!==e.nodeName.match(/^(TD|TH|TR|TABLE|LI)$/)||!w.Dom.isEmpty(e)&&null===e.nodeName.match(t)&&(e.nodeType===Node.TEXT_NODE&&!w.Dom.isEmptyTextNode(e)||e.childNodes.length&&!Array.from(e.childNodes).every(b)))};m.events.on("afterCommand",function(e){if("delete"===e){var t=m.selection.current();if(t&&t.firstChild&&"BR"===t.firstChild.nodeName&&w.Dom.safeRemove(t.firstChild),!(E.trim(m.editor.textContent||"")||m.editor.querySelector("img")||t&&w.Dom.closest(t,"table",m.editor))){m.editor.innerHTML="";var o=m.selection.setCursorIn(m.editor);w.Dom.safeRemove(o);}}}).on("keydown",function(e){if(e.which===y.KEY_BACKSPACE||e.which===y.KEY_DELETE){var t=e.which===y.KEY_BACKSPACE;if(m.selection.isFocused()||m.selection.focus(),!m.selection.isCollapsed())return m.execCommand("Delete"),!1;var o=m.selection.sel,i=!(!o||!o.rangeCount)&&o.getRangeAt(0);if(!i)return !1;var n=m.ownerDocument.createTextNode(y.INVISIBLE_SPACE),r=m.editorDocument.createElement("span");try{if(i.insertNode(n),!w.Dom.isOrContains(m.editor,n))return !1;var s=w.Dom.up(n,function(e){return w.Dom.isBlock(e,m.editorWindow)},m.editor),a=w.Dom.findInline(n,t,m.editor),l={node:a},c=void 0;if(a?c=_(l,t,i):n.parentNode&&(c=_({node:t?n.parentNode.previousSibling:n.parentNode.nextSibling},t,i)),void 0!==c)return !!c&&void 0;if(s&&s.nodeName.match(/^(TD)$/))return !1;var d=t?w.Dom.prev(l.node||n,function(e){return w.Dom.isBlock(e,m.editorWindow)},m.editor):w.Dom.next(l.node||n,function(e){return w.Dom.isBlock(e,m.editorWindow)},m.editor);if(!d&&s&&s.parentNode){d=m.create.inside.element(m.options.enter);for(var u=s;u&&u.parentNode&&u.parentNode!==m.editor;)u=u.parentNode;u.parentNode&&u.parentNode.insertBefore(d,u);}else if(d&&b(d))return w.Dom.safeRemove(d),!1;if(d){var f=m.selection.setCursorIn(d,!t);m.selection.insertNode(r,!1,!1),f.nodeType===Node.TEXT_NODE&&f.nodeValue===y.INVISIBLE_SPACE&&w.Dom.safeRemove(f);}if(s){if(g(s),d&&s.parentNode&&(s.nodeName===d.nodeName&&s.parentNode&&d.parentNode&&s.parentNode!==m.editor&&d.parentNode!==m.editor&&s.parentNode!==d.parentNode&&s.parentNode.nodeName===d.parentNode.nodeName&&(s=s.parentNode,d=d.parentNode),w.Dom.moveContent(s,d,!t),E.normalizeNode(d)),d&&"LI"===d.nodeName){var p=w.Dom.closest(d,"Ul|OL",m.editor);if(p){var h=p.nextSibling;h&&h.nodeName===p.nodeName&&p!==h&&(w.Dom.moveContent(h,p,!t),w.Dom.safeRemove(h));}}return g(s),!1}}finally{if(n.parentNode&&n.nodeValue===y.INVISIBLE_SPACE){var v=n.parentNode;w.Dom.safeRemove(n),!v.firstChild&&v.parentNode&&v!==m.editor&&w.Dom.safeRemove(v);}r&&w.Dom.isOrContains(m.editor,r,!0)&&(f=m.selection.setCursorBefore(r),w.Dom.safeRemove(r),f&&f.parentNode&&(w.Dom.findInline(f,!0,f.parentNode)||w.Dom.findInline(f,!0,f.parentNode))&&w.Dom.safeRemove(f)),m.setEditorValue();}return !1}});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),s=o(3);s.Config.prototype.controls.subscript={tags:["sub"],tooltip:"subscript"},s.Config.prototype.controls.superscript={tags:["sup"],tooltip:"superscript"},s.Config.prototype.controls.bold={tagRegExp:/^(strong|b)$/i,tags:["strong","b"],css:{"font-weight":["bold","700"]},tooltip:"Bold"},s.Config.prototype.controls.italic={tagRegExp:/^(em|i)$/i,tags:["em","i"],css:{"font-style":"italic"},tooltip:"Italic"},s.Config.prototype.controls.underline={tagRegExp:/^(u)$/i,tags:["u"],css:{"text-decoration":"underline"},tooltip:"Underline"},s.Config.prototype.controls.strikethrough={tagRegExp:/^(s)$/i,tags:["s"],css:{"text-decoration":"line-through"},tooltip:"Strike through"},t.bold=function(n){function e(e){var t=s.Config.defaultOptions.controls[e],o=r.__assign({},t.css),i={};return Object.keys(o).forEach(function(e){i[e]=Array.isArray(o[e])?o[e][0]:o[e];}),n.selection.applyCSS(i,t.tags?t.tags[0]:void 0,t.css),n.events.fire("synchro"),!1}n.registerCommand("bold",{exec:e,hotkeys:["ctrl+b","cmd+b"]}).registerCommand("italic",{exec:e,hotkeys:["ctrl+i","cmd+i"]}).registerCommand("underline",{exec:e,hotkeys:["ctrl+u","cmd+u"]}).registerCommand("strikethrough",{exec:e});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),l=o(2),v=o(2),m=o(0),g=o(4);i.Config.prototype.cleanHTML={timeout:300,removeEmptyElements:!0,fillEmptyParagraph:!0,replaceNBSP:!0,cleanOnPaste:!0,replaceOldTags:{i:"em",b:"strong"},allowTags:!1,denyTags:!1},i.Config.prototype.controls.eraser={command:"removeFormat",tooltip:"Clear Formatting"},t.cleanHtml=function(d){function e(t){var n={};return "string"==typeof t?(t.split(s).map(function(e){e=g.trim(e);var t=r.exec(e),o={};if(t){var i=t[2].split(s);t[1]&&(i.forEach(function(e){e=g.trim(e);var t=a.exec(e);t?o[t[1]]=t[2]:o[e]=!0;}),n[t[1].toUpperCase()]=o);}else n[e.toUpperCase()]=!0;}),n):!!t&&(Object.keys(t).forEach(function(e){n[e.toUpperCase()]=t[e];}),n)}function u(e,t){void 0===t&&(t=!1);for(var o=t?e.nextSibling:e.previousSibling;o;){if(o.nodeType===Node.ELEMENT_NODE||!m.Dom.isEmptyTextNode(o))return !0;o=t?o.nextSibling:o.previousSibling;}return !1}d.options.cleanHTML.cleanOnPaste&&d.events.on("processPaste",function(e,t){return g.cleanFromWord(t)});var f,r=/([^\[]*)\[([^\]]+)]/,s=/[\s]*,[\s]*/,a=/^(.*)[\s]*=[\s]*(.*)$/,p=e(d.options.cleanHTML.allowTags),h=e(d.options.cleanHTML.denyTags);d.events.on("change afterSetMode afterInit mousedown keydown",g.debounce(function(){if(!d.isDestructed&&d.isEditorMode()&&d.selection){f=d.selection.current();var e=null,r=!1,s=0,a=[],t=d.options.cleanHTML.replaceOldTags;if(t&&f){var o=Object.keys(t).join("|");if(d.selection.isCollapsed()){var i=m.Dom.closest(f,o,d.editor);if(i){var n=d.selection.save(),l=t[i.nodeName.toLowerCase()]||t[i.nodeName];m.Dom.replace(i,l,!0,!1,d.editorDocument),d.selection.restore(n);}}}var c=function(t){if(t){if((n=t).nodeType!==Node.TEXT_NODE&&(p&&!p[n.nodeName]||h&&h[n.nodeName])||f&&"BR"===n.nodeName&&u(n)&&!u(n,!0)&&m.Dom.up(n,function(e){return m.Dom.isBlock(e,d.editorWindow)},d.editor)!==m.Dom.up(f,function(e){return m.Dom.isBlock(e,d.editorWindow)},d.editor)||d.options.cleanHTML.removeEmptyElements&&!1!==f&&n.nodeType===Node.ELEMENT_NODE&&null!==n.nodeName.match(v.IS_INLINE)&&!d.selection.isMarker(n)&&0===g.trim(n.innerHTML).length&&!m.Dom.isOrContains(n,f))return a.push(t),c(t.nextSibling);if(d.options.cleanHTML.fillEmptyParagraph&&m.Dom.isBlock(t,d.editorWindow)&&m.Dom.isEmpty(t,/^(img|svg|canvas|input|textarea|form|br)$/)){var e=d.create.inside.element("br");t.appendChild(e);}if(p&&!0!==p[t.nodeName]){var o=t.attributes;if(o&&o.length){var i=[];for(s=0;s<o.length;s+=1)p[t.nodeName][o[s].name]&&(!0===p[t.nodeName][o[s].name]||p[t.nodeName][o[s].name]===o[s].value)||i.push(o[s].name);i.length&&(r=!0),i.forEach(function(e){t.removeAttribute(e);});}}c(t.firstChild),c(t.nextSibling);}var n;};d.editor.firstChild&&(e=d.editor.firstChild),c(e),a.forEach(m.Dom.safeRemove),(a.length||r)&&d.events&&d.events.fire("syncho");}},d.options.cleanHTML.timeout)).on("keyup",function(){if(!d.options.readonly){var t=d.selection.current();if(t){var e=m.Dom.up(t,function(e){return m.Dom.isBlock(e,d.editorWindow)},d.editor);e&&m.Dom.all(e,function(e){e&&e.nodeType===Node.TEXT_NODE&&null!==e.nodeValue&&l.INVISIBLE_SPACE_REG_EXP.test(e.nodeValue)&&0!==e.nodeValue.replace(l.INVISIBLE_SPACE_REG_EXP,"").length&&(e.nodeValue=e.nodeValue.replace(l.INVISIBLE_SPACE_REG_EXP,""),e===t&&d.selection.isCollapsed()&&d.selection.setCursorAfter(e));});}}}).on("afterCommand",function(e){var t,o,i=d.selection;switch(e.toLowerCase()){case"inserthorizontalrule":(t=d.editor.querySelector("hr[id=null]"))&&((o=m.Dom.next(t,function(e){return m.Dom.isBlock(e,d.editorWindow)},d.editor,!1))||(o=d.create.inside.element(d.options.enter))&&m.Dom.after(t,o),i.setCursorIn(o));break;case"removeformat":o=i.current();var n=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:m.Dom.each(t,n),"FONT"===t.nodeName?m.Dom.unwrap(t):([].slice.call(t.attributes).forEach(function(e){~["src","href","rel","content"].indexOf(e.name.toLowerCase())||t.removeAttribute(e.name);}),g.normalizeNode(t));break;case Node.TEXT_NODE:d.options.cleanHTML.replaceNBSP&&t.nodeType===Node.TEXT_NODE&&null!==t.nodeValue&&t.nodeValue.match(l.SPACE_REG_EXP)&&(t.nodeValue=t.nodeValue.replace(l.SPACE_REG_EXP," "));break;default:m.Dom.safeRemove(t);}};if(i.isCollapsed())for(;o&&o.nodeType!==Node.ELEMENT_NODE&&o!==d.editor;)n(o),o=o&&o.parentNode;else d.selection.eachSelection(function(e){n(e);});}});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(17),c=n.Widget.TabsWidget,d=n.Widget.ColorPickerWidget,u=o(0),f=o(4);i.Config.prototype.controls.brush={isActive:function(t,e,o){if(!o)return !0;var i=t.selection.current(),n=o.container.querySelector("svg");if(n&&n.style.fill&&n.style.removeProperty("fill"),i&&!o.isDisable()){var r=u.Dom.closest(i,function(e){return u.Dom.isBlock(e,t.editorWindow)||e&&u.Dom.isNode(e,t.editorWindow)&&e.nodeType===Node.ELEMENT_NODE},t.editor)||t.editor,s=""+f.css(r,"color"),a=""+f.css(r,"background-color");if(s!=""+f.css(t.editor,"color"))return n&&(n.style.fill=s),!0;if(a!=""+f.css(t.editor,"background-color"))return n&&(n.style.fill=a),!0}return !1},popup:function(t,e,o,i){var n="",r="",s=null;e&&e!==t.editor&&u.Dom.isNode(e,t.editorWindow)&&e.nodeType===Node.ELEMENT_NODE&&(n=""+f.css(e,"color"),r=""+f.css(e,"background-color"),s=e);var a=d(t,function(e){s?s.style.backgroundColor=e:t.execCommand("background",!1,e),i();},r),l=d(t,function(e){s?s.style.color=e:t.execCommand("forecolor",!1,e),i();},n);return c(t,"background"===t.options.colorPickerDefaultTab?{Background:a,Text:l}:{Text:l,Background:a},s)},tooltip:"Fill color or set the text color"},t.color=function(n){function e(e,t,o){var i=f.normalizeColor(o);switch(e){case"background":n.selection.applyCSS({backgroundColor:i||""});break;case"forecolor":n.selection.applyCSS({color:i||""});}return n.setEditorValue(),!1}n.registerCommand("forecolor",e).registerCommand("background",e);};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),d=o(0),u=o(4),f="copyformat",p=["fontWeight","fontStyle","fontSize","color","margin","padding","borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","textDecorationLine","fontFamily"],h=function(e,t,o,i){var n=u.css(o,t);return n===i[t]&&(n=o.parentNode&&o!==e.editor&&o.parentNode!==e.editor?h(e,t,o.parentNode,i):void 0),n};i.Config.prototype.controls.copyformat={exec:function(t,e){if(e)if(t.buffer[f])t.buffer[f]=!1,t.events.off(t.editor,"mouseup."+f);else{var o={},i=d.Dom.up(e,function(e){return e&&e.nodeType!==Node.TEXT_NODE},t.editor)||t.editor,n=t.create.inside.span();t.editor.appendChild(n),p.forEach(function(e){o[e]=u.css(n,e);}),n!==t.editor&&d.Dom.safeRemove(n);var r=(s=t,l=o,c={},(a=i)&&p.forEach(function(e){c[e]=h(s,e,a,l),e.match(/border(Style|Color)/)&&!c.borderWidth&&(c[e]=void 0);}),c);t.events.on(t.editor,"mouseup."+f,function(){t.buffer[f]=!1;var e=t.selection.current();e&&("IMG"===e.nodeName?u.css(e,r):t.selection.applyCSS(r)),t.events.off(t.editor,"mouseup."+f);}),t.buffer[f]=!0;}var s,a,l,c;},isActive:function(e){return !!e.buffer[f]},tooltip:"Paint format"};},function(e,g,t){Object.defineProperty(g,"__esModule",{value:!0});var _=t(2),b=t(0),y=t(4);g.insertParagraph=function(e,t,o,i){var n=e.create.inside.element(o),r=e.create.inside.element("br");n.appendChild(r),i&&i.cssText&&n.setAttribute("style",i.cssText),e.selection.insertNode(n,!1,!1),e.selection.setCursorBefore(r);var s=e.editorDocument.createRange();return s.setStartBefore("br"!=o.toLowerCase()?r:n),s.collapse(!0),e.selection.selectRange(s),b.Dom.safeRemove(t),y.scrollIntoView(n,e.editor,e.editorDocument),e.events&&e.events.fire("synchro"),n},g.enter=function(m){m.options.enterBlock||(m.options.enterBlock="br"==m.options.enter.toLowerCase()?_.PARAGRAPH:m.options.enter.toLowerCase()),m.events.on("keydown",function(e){if(e.which===_.KEY_ENTER){var t=m.events.fire("beforeEnter",e);if(void 0!==t)return t;m.selection.isCollapsed()||m.execCommand("Delete"),m.selection.focus();var o=m.selection.current(!1),i=m.selection.sel,n=m.selection.range;o&&o!==m.editor||(m.selection.current(),o=m.create.inside.text(_.INVISIBLE_SPACE),i&&i.rangeCount?n.insertNode(o):m.editor.appendChild(o),n.selectNode(o),n.collapse(!1),i&&(i.removeAllRanges(),i.addRange(n)));var r=!!o&&b.Dom.up(o,function(e){return b.Dom.isBlock(e,m.editorWindow)},m.editor),s=r&&"LI"===r.nodeName;if(!s&&(m.options.enter.toLowerCase()==_.BR.toLowerCase()||e.shiftKey||b.Dom.closest(o,"PRE|BLOCKQUOTE",m.editor))){var a=m.create.inside.element("br");return m.selection.insertNode(a,!0),y.scrollIntoView(a,m.editor,m.editorDocument),!1}if(!r&&o&&!b.Dom.prev(o,function(e){return b.Dom.isBlock(e,m.editorWindow)||!!e&&b.Dom.isImage(e,m.editorWindow)},m.editor)){var l=o;if(b.Dom.up(l,function(e){e&&e.hasChildNodes()&&e!==m.editor&&(l=e);},m.editor),r=b.Dom.wrapInline(l,m.options.enter,m),b.Dom.isEmpty(r)){var c=m.editorDocument.createElement("br");r.appendChild(c),m.selection.setCursorBefore(c);}n=i&&i.rangeCount?i.getRangeAt(0):m.editorDocument.createRange();}var d=!1,u=!1;if(r){if(!b.Dom.canSplitBlock(r,m.editorWindow))return a=m.create.inside.element("br"),m.selection.insertNode(a,!1),m.selection.setCursorAfter(a),!1;if(s&&b.Dom.isEmpty(r)){var f=!1,p=b.Dom.closest(r,"ol|ul",m.editor);if(b.Dom.prev(r,function(e){return e&&"LI"===e.nodeName},p))if(b.Dom.next(r,function(e){return e&&"LI"===e.nodeName},p)){(v=m.editorDocument.createRange()).setStartBefore(p),v.setEndAfter(r);var h=v.extractContents();p.parentNode&&p.parentNode.insertBefore(h,p),f=m.selection.setCursorBefore(p);}else f=m.selection.setCursorAfter(p);else f=m.selection.setCursorBefore(p);return b.Dom.safeRemove(r),g.insertParagraph(m,f,m.options.enter),y.$$("li",p).length||b.Dom.safeRemove(p),!1}if(m.selection.cursorInTheEdge(!0,r))return d=m.selection.setCursorBefore(r),g.insertParagraph(m,d,s?"li":m.options.enter,r.style),r&&m.selection.setCursorIn(r,!0),!1;var v;if(!1===m.selection.cursorInTheEdge(!1,r))(v=m.editorDocument.createRange()).setStartBefore(r),v.setEnd(n.startContainer,n.startOffset),h=v.extractContents(),r.parentNode&&r.parentNode.insertBefore(h,r),m.selection.setCursorIn(r,!0);else d=m.selection.setCursorAfter(r);}else u=!0;return (u||d)&&g.insertParagraph(m,d,s?"li":m.options.enter,r?r.style:void 0),!1}});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),a=o(0),l=o(5),c=o(4);i.Config.prototype.showMessageErrors=!0,i.Config.prototype.showMessageErrorTime=3e3,i.Config.prototype.showMessageErrorOffsetPx=3,t.errorMessages=function(n){if(n.options.showMessageErrors){var t,r=n.create.div("jodit_error_box_for_messages"),s=function(){t=5,Array.from(r.childNodes).forEach(function(e){c.css(r,"bottom",t+"px"),t+=e.offsetWidth+n.options.showMessageErrorOffsetPx;});};n.workplace.appendChild(r),n.events.on("beforeDestruct",function(){a.Dom.safeRemove(r);}).on("errorMessage",function(e,t,o){var i=n.create.div("active "+(t||""),e);r.appendChild(i),s(),l.setTimeout(function(){i.classList.remove("active"),l.setTimeout(function(){a.Dom.safeRemove(i),s();},300);},o||n.options.showMessageErrorTime);});}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),s=o(0),a=o(4);i.Config.prototype.controls.fontsize={command:"fontSize",list:["8","9","10","11","12","14","16","18","24","30","36","48","60","72","96"],template:function(e,t,o){return o},tooltip:"Font size",isActiveChild:function(t,e){var o=t.selection.current();if(o){var i=s.Dom.closest(o,function(e){return s.Dom.isBlock(e,t.editorWindow)||e&&s.Dom.isNode(e,t.editorWindow)&&e.nodeType===Node.ELEMENT_NODE},t.editor)||t.editor,n=a.css(i,"font-size");return !(!n||!e.args||""+e.args[1]!=""+n)}return !1},isActive:function(t){var e=t.selection.current();if(e){var o=s.Dom.closest(e,function(e){return s.Dom.isBlock(e,t.editorWindow)||e&&s.Dom.isNode(e,t.editorWindow)&&e.nodeType===Node.ELEMENT_NODE},t.editor)||t.editor;return ""+a.css(o,"font-size")!=""+a.css(t.editor,"font-size")}return !1}},i.Config.prototype.controls.font={command:"fontname",exec:function(e,t,o){e.execCommand(o.command,!1,o.args?o.args[0]:void 0);},list:{"Helvetica,sans-serif":"Helvetica","Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","'Times New Roman',Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},template:function(e,t,o){return '<span style="font-family: '+t+'">'+o+"</span>"},isActiveChild:function(t,e){function o(e){return e.toLowerCase().replace(/['"]+/g,"").replace(/[^a-z0-9]+/g,",")}var i=t.selection.current();if(i){var n=s.Dom.closest(i,function(e){return s.Dom.isBlock(e,t.editorWindow)||e&&s.Dom.isNode(e,t.editorWindow)&&e.nodeType===Node.ELEMENT_NODE},t.editor)||t.editor,r=""+a.css(n,"font-family");return !(!r||!e.args||o(""+e.args[0])!==o(r))}return !1},isActive:function(t){var e=t.selection.current();if(e){var o=s.Dom.closest(e,function(e){return s.Dom.isBlock(e,t.editorWindow)||s.Dom.isNode(e,t.editorWindow)&&e&&e.nodeType===Node.ELEMENT_NODE},t.editor)||t.editor;return ""+a.css(o,"font-family")!=""+a.css(t.editor,"font-family")}return !1},tooltip:"Font family"},t.font=function(i){function e(e,t,o){switch(e){case"fontsize":i.selection.applyCSS({fontSize:a.normalizeSize(o)});break;case"fontname":i.selection.applyCSS({fontFamily:o});}return i.events.fire("synchro"),!1}i.registerCommand("fontsize",e).registerCommand("fontname",e);};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),s=o(2),a=o(0);i.Config.prototype.controls.paragraph={command:"formatBlock",getLabel:function(t,e,o){var i=t.selection.current();if(i&&t.options.textIcons){var n=(a.Dom.closest(i,function(e){return a.Dom.isBlock(e,t.editorWindow)},t.editor)||t.editor).nodeName.toLowerCase(),r=e.list;o&&e.data&&e.data.currentValue!==n&&e.list&&r[n]&&(o.textBox.innerHTML="<span>"+t.i18n(r[n])+"</span>",o.textBox.firstChild.classList.add("jodit_icon"),e.data.currentValue=n);}return !1},exec:function(e,t,o){e.execCommand(o.command,!1,o.args?o.args[0]:void 0);},data:{currentValue:"left"},list:{p:"Normal",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",blockquote:"Quote"},isActiveChild:function(t,e){var o=t.selection.current();if(o){var i=a.Dom.closest(o,function(e){return a.Dom.isBlock(e,t.editorWindow)},t.editor);return i&&i!==t.editor&&void 0!==e.args&&i.nodeName.toLowerCase()===e.args[0]}return !1},isActive:function(t,e){var o=t.selection.current();if(o){var i=a.Dom.closest(o,function(e){return a.Dom.isBlock(e,t.editorWindow)},t.editor);return i&&i!==t.editor&&void 0!==e.list&&"p"!=i.nodeName.toLowerCase()&&void 0!==e.list[i.nodeName.toLowerCase()]}return !1},template:function(e,t,o){return "<"+t+' class="jodit_list_element"><span>'+e.i18n(o)+"</span></"+t+"></li>"},tooltip:"Insert format block"},t.formatBlock=function(r){r.registerCommand("formatblock",function(e,t,i){r.selection.focus();var n=!1;if(r.selection.eachSelection(function(e){var t=r.selection.save(),o=!!e&&a.Dom.up(e,function(e){return a.Dom.isBlock(e,r.editorWindow)},r.editor);o&&"LI"!==o.nodeName||!e||(o=a.Dom.wrapInline(e,r.options.enter,r)),o&&(o.tagName.match(/TD|TH|TBODY|TABLE|THEAD/i)?r.selection.isCollapsed()?a.Dom.wrapInline(e,i,r):r.selection.applyCSS({},i):i===r.options.enterBlock.toLowerCase()&&o.parentNode&&"LI"===o.parentNode.nodeName?a.Dom.unwrap(o):a.Dom.replace(o,i,!0,!1,r.editorDocument),n=!0),r.selection.restore(t);}),!n){var o=r.editorDocument.createElement(i);o.innerHTML=s.INVISIBLE_SPACE,r.selection.insertNode(o,!1),r.selection.setCursorIn(o);}return r.setEditorValue(),!1});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(2),a=o(4),r=o(6);i.Config.prototype.fullsize=!1,i.Config.prototype.globalFullsize=!0,i.Config.prototype.controls.fullsize={exec:function(e){e.toggleFullSize();},isActive:function(e){return e.isFullSize()},getLabel:function(e,t,o){var i=e.isFullSize()?"shrink":"fullsize";o&&(o.textBox.innerHTML=e.options.textIcons?"<span>"+e.i18n(i)+"</span>":r.ToolbarIcon.getIcon(i),o.textBox.firstChild.classList.add("jodit_icon"));},tooltip:"Open editor in fullsize",mode:n.MODE_SOURCE+n.MODE_WYSIWYG},t.fullsize=function(o){function i(){o.events&&(n?(t=a.css(o.container,"height"),r=a.css(o.container,"width"),a.css(o.container,{height:o.ownerWindow.innerHeight,width:o.ownerWindow.innerWidth}),s=!0):s&&a.css(o.container,{height:t||"auto",width:r||"auto"}));}function e(e){if(o.container){if(void 0===e&&(e=!o.container.classList.contains("jodit_fullsize")),o.options.fullsize=!!e,o.container.classList.toggle("jodit_fullsize",n=e),o.toolbar&&a.css(o.toolbar.container,"width","auto"),o.options.globalFullsize){for(var t=o.container.parentNode;t&&t.nodeType!==Node.DOCUMENT_NODE;)t.classList.toggle("jodit_fullsize_box",e),t=t.parentNode;i();}o.events.fire("afterResize");}}var n=!1,t=0,r=0,s=!1;o.options.globalFullsize&&o.events.on(o.ownerWindow,"resize",i),o.events.on("afterInit afterOpen",function(){o.toggleFullSize(o.options.fullsize);}).on("toggleFullSize",e).on("beforeDestruct beforeClose",function(){e(!1);}).on("beforeDestruct",function(){o.events&&o.events.off(o.ownerWindow,"resize",i);});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var s=o(1),i=o(3),n=o(54),a=o(5),l=o(10);i.Config.prototype.iframeBaseUrl="",i.Config.prototype.iframeDefaultSrc="about:blank",i.Config.prototype.iframeStyle='html{margin: 0px;min-height: 100%;}body{box-sizing: border-box;font-size: 13px;    line-height: 1.6;padding:10px;background:transparent;color:#000;position:relative;z-index: 2;user-select:auto;margin:0px;overflow:auto;}table{width:100%;border: none;border-collapse:collapse;empty-cells: show;max-width: 100%;}th,td{padding: 2px 5px;border:1px solid #ccc;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}td[data-jodit-selected-cell],th[data-jodit-selected-cell]{border: 1px double #1e88e5}p{margin-top:0;}.jodit_editor .jodit_iframe_wrapper{display: block;clear: both;user-select: none;position: relative;}.jodit_editor .jodit_iframe_wrapper:after {position:absolute;content:"";z-index:1;top:0;left:0;right: 0;bottom: 0;cursor: pointer;display: block;background: rgba(0, 0, 0, 0);} .jodit_disabled{user-select: none;-o-user-select: none;-moz-user-select: none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none}',i.Config.prototype.iframeCSSLinks=[],t.iframe=function(r){var e=this;r.events.on("afterSetMode",function(){r.isEditorMode()&&r.selection.focus();}).on("generateDocumentStructure.iframe",function(e,t){var o=e||t.iframe.contentWindow.document;if(o.open(),o.write('<!DOCTYPE html><html dir="'+t.options.direction+'" class="jodit" lang="'+n.defaultLanguage(t.options.language)+'"><head><title>Jodit Editor</title>'+(t.options.iframeBaseUrl?'<base href="'+t.options.iframeBaseUrl+'"/>':"")+'</head><body class="jodit_wysiwyg" style="outline:none" contenteditable="true"></body></html>'),o.close(),t.options.iframeCSSLinks&&t.options.iframeCSSLinks.forEach(function(e){var t=o.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),o.head&&o.head.appendChild(t);}),t.options.iframeStyle){var i=o.createElement("style");i.innerHTML=t.options.iframeStyle,o.head&&o.head.appendChild(i);}}).on("createEditor",function(){return s.__awaiter(e,void 0,void 0,function(){var o,i,n;return s.__generator(this,function(e){switch(e.label){case 0:return r.options.iframe?(delete r.editor,(o=r.create.element("iframe")).style.display="block",o.src="about:blank",o.className="jodit_wysiwyg_iframe",o.setAttribute("allowtransparency","true"),o.setAttribute("tabindex",""+r.options.tabIndex),o.setAttribute("frameborder","0"),r.workplace.appendChild(o),r.iframe=o,[4,r.events.fire("generateDocumentStructure.iframe",null,r)]):[2];case 1:return e.sent(),r.editorDocument=i=r.iframe.contentWindow.document,r.editorWindow=r.iframe.contentWindow,r.create.inside.setDocument(i),r.editor=i.body,"auto"===r.options.height&&(i.documentElement&&(i.documentElement.style.overflowY="hidden"),n=a.throttle(function(){r.editor&&r.iframe&&"auto"===r.options.height&&l.css(r.iframe,"height",r.editor.offsetHeight);},r.defaultTimeout/2),r.events.on("change afterInit afterSetMode resize",n).on([r.iframe,r.editorWindow,i.documentElement],"load",n).on(i,"readystatechange DOMContentLoaded",n)),(t=r.editorWindow.Element.prototype).matches||(t.matches=Element.prototype.matches),r.editorDocument.documentElement&&r.events.on(r.editorDocument.documentElement,"mousedown touchend",function(){r.selection.isFocused()||(r.selection.focus(),r.selection.setCursorIn(r.editor));}).on(r.editorWindow,"mousedown touchstart keydown keyup touchend click mouseup mousemove scroll",function(e){r.events&&r.events.fire&&r.events.fire(r.ownerWindow,e);}),[2,!1]}var t;})})});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),c=o(2),d=o(0);i.Config.prototype.controls.indent={tooltip:"Increase Indent"},i.Config.prototype.controls.outdent={isDisable:function(t){var e=t.selection.current();if(e){var o=d.Dom.closest(e,function(e){return d.Dom.isBlock(e,t.editorWindow)},t.editor);if(o&&o.style&&o.style.marginLeft)return parseInt(o.style.marginLeft,10)<=0}return !0},tooltip:"Decrease Indent"},i.Config.prototype.indentMargin=10,t.indent=function(l){function e(s){var a=[];return l.selection.eachSelection(function(e){var t=l.selection.save(),o=!!e&&d.Dom.up(e,function(e){return d.Dom.isBlock(e,l.editorWindow)},l.editor),i=l.options.enter;if(!o&&e&&(o=d.Dom.wrapInline(e,i!==c.BR?i:c.PARAGRAPH,l)),!o)return l.selection.restore(t),!1;var n=!!~a.indexOf(o);if(o&&o.style&&!n){a.push(o);var r=o.style.marginLeft?parseInt(o.style.marginLeft,10):0;o.style.marginLeft=0<(r+=l.options.indentMargin*("outdent"===s?-1:1))?r+"px":"",o.getAttribute("style")||o.removeAttribute("style");}l.selection.restore(t);}),l.setEditorValue(),!1}l.registerCommand("indent",{exec:e,hotkeys:["ctrl+]","cmd+]"]}),l.registerCommand("outdent",{exec:e,hotkeys:["ctrl+[","cmd+["]});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(4),n="__jodit_imageprocessor_binded";t.imageProcessor=function(o){o.events.on("change afterInit",i.debounce(function(){o.editor&&i.$$("img",o.editor).forEach(function(t){t[n]||(t[n]=!0,t.complete||t.addEventListener("load",function e(){o.events&&o.events.fire&&o.events.fire("resize"),t.removeEventListener("load",e);}),o.events.on(t,"mousedown touchstart",function(){o.selection.select(t);}));});},o.defaultTimeout));};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),x=o(13),T=o(0),S=o(4),D=o(6),n=o(17),q=n.Widget.TabsWidget,M=n.Widget.FileSelectorWidget,L=o(27);i.Config.prototype.image={openOnDblClick:!0,editSrc:!0,useImageEditor:!0,editTitle:!0,editAlt:!0,editLink:!0,editSize:!0,editBorderRadius:!0,editMargins:!0,editClass:!0,editStyle:!0,editId:!0,editAlign:!0,showPreview:!0,selectImageAfterClose:!0},t.imageProperties=function(j){function t(e){var t=this;if(!j.options.readonly){e&&e.stopImmediatePropagation();var o,i=j.create.fromHTML.bind(j.create),r=this,n=new x.Dialog(j),s=i('<a href="javascript:void(0)" style="float:right;" class="jodit_button">'+D.ToolbarIcon.getIcon("cancel")+"<span>"+j.i18n("Cancel")+"</span></a>"),a=i('<a href="javascript:void(0)" style="float:left;" class="jodit_button">'+D.ToolbarIcon.getIcon("check")+"<span>"+j.i18n("Ok")+"</span></a>"),l={remove:i('<a href="javascript:void(0)" class="jodit_button">'+D.ToolbarIcon.getIcon("bin")+" "+j.i18n("Delete")+"</a>")},c=i('<form class="jodit_properties"><div class="jodit_grid"><div class="jodit_col-lg-2-5"><div class="jodit_properties_view_box"><div style="'+(j.options.image.showPreview?"":"display:none")+'" class="jodit_properties_image_view"><img class="imageViewSrc" src="" alt=""/></div><div style="'+(j.options.image.editSize?"":"display:none")+'" class="jodit_form_group jodit_properties_image_sizes"><input type="number" class="imageWidth"/><a class="jodit_lock_helper jodit_lock_size" href="javascript:void(0)">'+D.ToolbarIcon.getIcon("lock")+'</a><input type="number" class="imageHeight"/></div></div></div><div class="jodit_col-lg-3-5 tabsbox"></div></div></form>'),d=i('<div style="'+(j.options.image.editMargins?"":"display:none")+'" class="jodit_form_group"><label>'+j.i18n("Margins")+'</label><div class="jodit_grid"><input class="jodit_col-lg-1-5 margins marginTop" data-id="marginTop" type="text" placeholder="'+j.i18n("top")+'"/><a style="text-align: center;" class="jodit_lock_helper jodit_lock_margin jodit_col-lg-1-5" href="javascript:void(0)">'+D.ToolbarIcon.getIcon("lock")+'</a><input disabled="true" class="jodit_col-lg-1-5 margins marginRight" data-id="marginRight" type="text" placeholder="'+j.i18n("right")+'"/><input disabled="true" class="jodit_col-lg-1-5 margins marginBottom" data-id="marginBottom" type="text" placeholder="'+j.i18n("bottom")+'"/><input disabled="true" class="jodit_col-lg-1-5 margins marginLeft" data-id="marginLeft" type="text" placeholder="'+j.i18n("left")+'"/></div></div><div style="'+(j.options.image.editStyle?"":"display:none")+'" class="jodit_form_group"><label>'+j.i18n("Styles")+'</label><input type="text" class="style"/></div><div style="'+(j.options.image.editClass?"":"display:none")+'" class="jodit_form_group"><label for="classes">'+j.i18n("Classes")+'</label><input type="text" class="classes"/></div><div style="'+(j.options.image.editId?"":"display:none")+'" class="jodit_form_group"><label for="id">Id</label><input type="text" class="id"/></div><div style="'+(j.options.image.editBorderRadius?"":"display:none")+'" class="jodit_form_group"><label for="border_radius">Border radius</label><input type="number" class="border_radius"/></div><div style="'+(j.options.image.editAlign?"":"display:none")+'" class="jodit_form_group"><label for="align">'+j.i18n("Align")+'</label><select class="select align"><option value="">'+j.i18n("--Not Set--")+'</option><option value="left">'+j.i18n("Left")+'</option><option value="center">'+j.i18n("Center")+'</option><option value="right">'+j.i18n("Right")+"</option></optgroup></select></div>"),u=i('<div style="'+(j.options.image.editSrc?"":"display:none")+'" class="jodit_form_group"><label>'+j.i18n("Src")+'</label><div class="jodit_input_group"><input type="text" class="imageSrc"/>'+(j.options.filebrowser.ajax.url||j.options.uploader.url?'<div class="jodit_input_group-buttons">'+(j.options.filebrowser.ajax.url||j.options.uploader.url?'<a class="jodit_button jodit_rechange" href="javascript:void(0)">'+D.ToolbarIcon.getIcon("image")+"</a>":"")+(j.options.image.useImageEditor&&j.options.filebrowser.ajax.url?'<a class="jodit_button jodit_use_image_editor" href="javascript:void(0)">'+D.ToolbarIcon.getIcon("crop")+"</a>":"")+"</div>":"")+'</div></div><div style="'+(j.options.image.editTitle?"":"display:none")+'" class="jodit_form_group"><label for="imageTitle">'+j.i18n("Title")+'</label><input type="text" class="imageTitle"/></div><div style="'+(j.options.image.editAlt?"":"display:none")+'" class="jodit_form_group"><label for="imageAlt">'+j.i18n("Alternative")+'</label><input type="text" class="imageAlt"/></div><div style="'+(j.options.image.editLink?"":"display:none")+'" class="jodit_form_group"><label for="imageLink">'+j.i18n("Link")+'</label><input type="text" class="imageLink"/></div><div style="'+(j.options.image.editLink?"":"display:none")+'" class="jodit_form_group"><input type="checkbox" class="imageLinkOpenInNewTab"/> '+j.i18n("Open link in new tab")+"</div>"),f=r.naturalWidth/r.naturalHeight||1,p=c.querySelector(".imageWidth"),h=c.querySelector(".imageHeight"),v=function(){S.val(c,".imageSrc",r.getAttribute("src")||"");var e=c.querySelector(".imageViewSrc");e&&e.setAttribute("src",r.getAttribute("src")||"");},m=function(){v(),function(){r.hasAttribute("title")&&S.val(c,".imageTitle",r.getAttribute("title")||""),r.hasAttribute("alt")&&S.val(c,".imageAlt",r.getAttribute("alt")||"");var e=T.Dom.closest(r,"a",j.editor);e&&(S.val(c,".imageLink",e.getAttribute("href")||""),c.querySelector(".imageLinkOpenInNewTab").checked="_blank"===e.getAttribute("target"));}(),p.value=""+r.offsetWidth,h.value=""+r.offsetHeight,function(){if(j.options.image.editMargins){var i=!1;S.$$(".margins",c).forEach(function(e){var t=e.getAttribute("data-id")||"",o=r.style[t];o&&(/^[0-9]+(px)?$/.test(o)&&(o=parseInt(o,10)),e.value=""+o||"",i||"marginTop"===t||e.value===S.val(c,".marginTop")||(i=!0));}),_=!i;var e=c.querySelector(".jodit_lock_margin");e&&(e.innerHTML=D.ToolbarIcon.getIcon(_?"lock":"unlock")),S.$$(".margins:not(.marginTop)",c).forEach(function(e){return _?e.setAttribute("disabled","true"):e.removeAttribute("disabled")});}}(),S.val(c,".classes",(r.getAttribute("class")||"").replace(/jodit_focused_image[\s]*/,"")),S.val(c,".id",r.getAttribute("id")||""),S.val(c,".border_radius",""+(parseInt(r.style.borderRadius||"0",10)||"0")),r.style.cssFloat&&~["left","right"].indexOf(r.style.cssFloat.toLowerCase())?S.val(c,".align",S.css(r,"float")):"block"===S.css(r,"display")&&"auto"===r.style.marginLeft&&"auto"===r.style.marginRight&&S.val(c,".align","center"),S.val(c,".style",r.getAttribute("style")||"");},g=!0,_=!0,b={},y=c.querySelector(".tabsbox");b.Image=u,b.Advanced=d,y&&y.appendChild(q(j,b)),m(),j.events.on(n,"afterClose",function(){n.destruct(),r.parentNode&&j.options.image.selectImageAfterClose&&j.selection.select(r);}),l.remove.addEventListener("click",function(){T.Dom.safeRemove(r),n.close();}),j.options.image.useImageEditor&&S.$$(".jodit_use_image_editor",u).forEach(function(e){j.events.on(e,"mousedown touchstart",function(){function t(){n.host===location.host||x.Confirm(j.i18n("You can only edit your own images. Download this image on the host?"),function(e){e&&j.uploader&&j.uploader.uploadRemoteImage(""+n.href,function(e){x.Alert(j.i18n("The image has been successfully uploaded to the host!"),function(){"string"==typeof e.newfilename&&(r.setAttribute("src",e.baseurl+e.newfilename),v());});},function(e){x.Alert(j.i18n("There was an error loading %s",e.message));});});}var i=r.getAttribute("src")||"",n=j.create.element("a");n.href=i,j.getInstance("FileBrowser").dataProvider.getPathByUrl(""+n.href,function(e,t,o){j.getInstance("FileBrowser").openImageEditor(n.href,t,e,o,function(){var e=(new Date).getTime();r.setAttribute("src",i+(~i.indexOf("?")?"":"?")+"&_tmp="+e),v();},function(e){x.Alert(e.message);});},function(e){x.Alert(e.message,t);});});}),S.$$(".jodit_rechange",u).forEach(function(o){o.addEventListener("mousedown",function(e){o.classList.toggle("active");var t=new L.Popup(j,o);t.open(M(j,{upload:function(e){e.files&&e.files.length&&r.setAttribute("src",e.baseurl+e.files[0]),m(),t.close();},filebrowser:function(e){e&&e.files&&Array.isArray(e.files)&&e.files.length&&(r.setAttribute("src",e.files[0]),t.close(),m());}},r,t.close),!0),e.stopPropagation();});});var w=c.querySelector(".jodit_lock_helper.jodit_lock_size"),E=c.querySelector(".jodit_lock_helper.jodit_lock_margin");w&&w.addEventListener("click",function(){this.innerHTML=D.ToolbarIcon.getIcon((g=!g)?"lock":"unlock"),j.events.fire(p,"change");}),E&&E.addEventListener("click",function(){this.innerHTML=D.ToolbarIcon.getIcon((_=!_)?"lock":"unlock"),_?S.$$(".margins",c).forEach(function(e){e.matches(".marginTop")||e.setAttribute("disabled","true");}):S.$$(".margins",c).forEach(function(e){e.matches(".marginTop")||e.removeAttribute("disabled");});});var C=function(e){var t=parseInt(p.value,10),o=parseInt(h.value,10);e.target===p?h.value=""+Math.round(t/f):p.value=""+Math.round(o*f);};return j.events.on([p,h],"change keydown mousedown paste",function(e){g&&(j.defaultTimeout?(clearTimeout(o),o=S.setTimeout(C.bind(t,e),j.defaultTimeout)):C(e));}),n.setTitle([j.i18n("Image properties"),l.remove]),n.setContent(c),s.addEventListener("click",function(){n.close();}),a.addEventListener("click",function(){if(j.options.image.editStyle&&(S.val(c,".style")?r.setAttribute("style",S.val(c,".style")):r.removeAttribute("style")),!S.val(c,".imageSrc"))return T.Dom.safeRemove(r),void n.close();r.setAttribute("src",S.val(c,".imageSrc")),r.style.borderRadius="0"!==S.val(c,".border_radius")&&/^[0-9]+$/.test(S.val(c,".border_radius"))?S.val(c,".border_radius")+"px":"",S.val(c,".imageTitle")?r.setAttribute("title",S.val(c,".imageTitle")):r.removeAttribute("title"),S.val(c,".imageAlt")?r.setAttribute("alt",S.val(c,".imageAlt")):r.removeAttribute("alt");var e=T.Dom.closest(r,"a",j.editor);function o(e){return e=S.trim(e),/^[0-9]+$/.test(e)?e+"px":e}function t(){"block"===S.css(r,"display")&&S.css(r,"display",""),"auto"===r.style.marginLeft&&"auto"===r.style.marginRight&&(r.style.marginLeft="",r.style.marginRight="");}S.val(c,".imageLink")?((e=e||T.Dom.wrap(r,"a",j)).setAttribute("href",S.val(c,".imageLink")),c.querySelector(".imageLinkOpenInNewTab").checked?e.setAttribute("target","_blank"):e.removeAttribute("target")):e&&e.parentNode&&e.parentNode.replaceChild(r,e),p.value===""+r.offsetWidth&&h.value===""+r.offsetHeight||S.css(r,{width:S.trim(p.value)?o(p.value):null,height:S.trim(h.value)?o(h.value):null}),j.options.image.editMargins&&(_?S.css(r,"margin",o(S.val(c,".marginTop"))):S.$$(".margins",c).forEach(function(e){var t=e.getAttribute("data-id")||"";S.css(r,t,o(e.value));})),j.options.image.editClass&&(S.val(c,".classes")?r.setAttribute("class",S.val(c,".classes")):r.removeAttribute("class")),j.options.image.editId&&(S.val(c,".id")?r.setAttribute("id",S.val(c,".id")):r.removeAttribute("id")),j.options.image.editAlign&&(S.val(c,".align")?~["right","left"].indexOf(S.val(c,".align").toLowerCase())?(S.css(r,"float",S.val(c,".align")),t()):(S.css(r,"float",""),S.css(r,{display:"block","margin-left":"auto","margin-right":"auto"})):(S.css(r,"float")&&~["right","left"].indexOf((""+S.css(r,"float")).toLowerCase())&&S.css(r,"float",""),t())),r.getAttribute("style")||r.removeAttribute("style"),j.setEditorValue(),n.close();}),n.setFooter([a,s]),n.setSize(500),n.open(),e&&e.preventDefault(),!1}}j.events.on("afterInit",function(){j.events.on(j.editor,"dblclick",j.options.image.openOnDblClick?t:function(e){e.stopImmediatePropagation(),j.selection.select(this);},"img");}).on("openImageProperties",function(e){t.call(e);});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(17),c=r.Widget.ColorPickerWidget,d=r.Widget.TabsWidget,s=o(0),u=o(4),a=o(7),f=o(28),l=o(27),p=o(20);n.Config.prototype.toolbarInline=!0,n.Config.prototype.toolbarInlineDisableFor=[],n.Config.prototype.popup={a:[{name:"eye",tooltip:"Open link",exec:function(e,t){var o=t.getAttribute("href");t&&o&&e.ownerWindow.open(o);}},{name:"link",tooltip:"Edit link",icon:"pencil"},"unlink","brush","file"],jodit:[{name:"bin",tooltip:"Delete",exec:function(e,t){t.parentNode&&(s.Dom.safeRemove(t),e.events.fire("hidePopup"));}}],"jodit-media":[{name:"bin",tooltip:"Delete",exec:function(e,t){t.parentNode&&(s.Dom.safeRemove(t),e.events.fire("hidePopup"));}}],img:[{name:"delete",icon:"bin",tooltip:"Delete",exec:function(e,t){t.parentNode&&(s.Dom.safeRemove(t),e.events.fire("hidePopup"));}},{name:"pencil",exec:function(e,t){"img"==t.tagName.toLowerCase()&&e.events.fire("openImageProperties",t);},tooltip:"Edit"},{name:"valign",list:["Top","Middle","Bottom"],tooltip:"Vertical align",exec:function(e,t,o){if("img"==t.tagName.toLowerCase()){var i=o.args&&"string"==typeof o.args[1]?o.args[1].toLowerCase():"";u.css(t,"vertical-align",i),e.events.fire("recalcPositionPopup");}}},{name:"left",list:["Left","Right","Center","Normal"],exec:function(e,t,o){if("img"==t.tagName.toLowerCase()){var i=function(){"block"===u.css(t,"display")&&u.css(t,"display",""),"auto"===t.style.marginLeft&&"auto"===t.style.marginRight&&(t.style.marginLeft="",t.style.marginRight="");},n=o.args&&"string"==typeof o.args[1]?o.args[1].toLowerCase():"";"normal"!=n?~["right","left"].indexOf(n)?(u.css(t,"float",n),i()):(u.css(t,"float",""),u.css(t,{display:"block","margin-left":"auto","margin-right":"auto"})):(u.css(t,"float")&&~["right","left"].indexOf(u.css(t,"float").toLowerCase())&&u.css(t,"float",""),i()),e.events.fire("recalcPositionPopup");}},tooltip:"Horizontal align"}],table:[{name:"brush",popup:function(e,t){var o,i,n,r,s,a,l=f.Table.getAllSelectedCells(t);return !!l.length&&(r=u.css(l[0],"color"),a=u.css(l[0],"background-color"),s=u.css(l[0],"border-color"),o=c(e,function(t){l.forEach(function(e){u.css(e,"background-color",t);}),e.setEditorValue();},a),i=c(e,function(t){l.forEach(function(e){u.css(e,"color",t);}),e.setEditorValue();},r),n=c(e,function(t){l.forEach(function(e){u.css(e,"border-color",t);}),e.setEditorValue();},s),d(e,{Background:o,Text:i,Border:n}))},tooltip:"Background"},{name:"valign",list:["Top","Middle","Bottom"],exec:function(e,t,o){var i=o.args&&"string"==typeof o.args[1]?o.args[1].toLowerCase():"";f.Table.getAllSelectedCells(t).forEach(function(e){u.css(e,"vertical-align",i);});},tooltip:"Vertical align"},{name:"splitv",list:{tablesplitv:"Split vertical",tablesplitg:"Split horizontal"},tooltip:"Split"},{name:"align",icon:"left"},"\n",{name:"merge",command:"tablemerge",tooltip:"Merge"},{name:"addcolumn",list:{tableaddcolumnbefore:"Insert column before",tableaddcolumnafter:"Insert column after"},exec:function(e,t,o){var i=o.args&&"string"==typeof o.args[0]?o.args[0].toLowerCase():"";e.execCommand(i,!1,t);},tooltip:"Add column"},{name:"addrow",list:{tableaddrowbefore:"Insert row above",tableaddrowafter:"Insert row below"},exec:function(e,t,o){var i=o.args&&"string"==typeof o.args[0]?o.args[0].toLowerCase():"";e.execCommand(i,!1,t);},tooltip:"Add row"},{name:"delete",icon:"bin",list:{tablebin:"Delete table",tablebinrow:"Delete row",tablebincolumn:"Delete column",tableempty:"Empty cell"},exec:function(e,t,o){var i=o.args&&"string"==typeof o.args[0]?o.args[0].toLowerCase():"";e.execCommand(i,!1,t),e.events.fire("hidePopup");},tooltip:"Delete"}]};var h,v=(i.__extends(m,h=a.Plugin),m.prototype.isExcludedTarget=function(e){return !!~u.splitArray(this.jodit.options.toolbarInlineDisableFor).map(function(e){return e.toLowerCase()}).indexOf(e.toLowerCase())},m.prototype.hideIfCollapsed=function(){return !!this.jodit.selection.isCollapsed()&&(this.hidePopup(),!0)},m.prototype.afterInit=function(t){var i=this;this.toolbar=p.JoditToolbarCollection.makeCollection(t),this.target=t.create.div("jodit_toolbar_popup-inline-target"),this.container=t.create.div(),this.popup=new l.Popup(t,this.target,void 0,"jodit_toolbar_popup-inline"),t.events.on(this.target,"mousedown keydown touchstart",function(e){e.stopPropagation();}).on("beforeOpenPopup hidePopup afterSetMode",this.hidePopup).on("recalcPositionPopup",this.reCalcPosition).on("getDiffButtons.mobile",function(e){if(i.toolbar===e)return u.splitArray(t.options.buttons).filter(function(e){return "|"!==e&&"\n"!==e}).filter(function(e){return !~i.toolbar.getButtonsList().indexOf(e)})}).on("selectionchange",this.onChangeSelection).on("afterCommand afterExec",function(){i.isShown&&i.isSelectionPopup&&i.onChangeSelection();}).on("showPopup",function(e,t){var o=("string"==typeof e?e:e.nodeName).toLowerCase();i.isSelectionPopup=!1,i.showPopup(t,o,"string"==typeof e?void 0:e);}).on("mousedown keydown touchstart",this.onSelectionStart).on([t.ownerWindow,t.editor],"scroll resize",this.reCalcPosition).on([t.ownerWindow],"mouseup keyup touchend",this.onSelectionEnd).on([t.ownerWindow],"mousedown keydown touchstart",this.checkIsTargetEvent);},m.prototype.beforeDestruct=function(e){this.popup&&this.popup.destruct(),delete this.popup,this.toolbar&&this.toolbar.destruct(),delete this.toolbar,s.Dom.safeRemove(this.target),s.Dom.safeRemove(this.container),e.events&&e.events.off([e.ownerWindow],"scroll resize",this.reCalcPosition).off([e.ownerWindow],"mouseup keyup touchend",this.onSelectionEnd).off([e.ownerWindow],"mousedown keydown touchstart",this.checkIsTargetEvent);},m);function m(){var a=null!==h&&h.apply(this,arguments)||this;return a._hiddenClass="jodit_toolbar_popup-inline-target-hidden",a.isSelectionStarted=!1,a.onSelectionEnd=u.debounce(function(){!a.isDestructed&&a.jodit.isEditorMode()&&(a.isSelectionStarted&&(a.isTargetAction||a.onChangeSelection()),a.isSelectionStarted=!1,a.isTargetAction=!1);},a.jodit.defaultTimeout),a.isTargetAction=!1,a.isSelectionPopup=!1,a.calcWindSizes=function(){var e=a.jodit.ownerWindow,t=a.jodit.ownerDocument.documentElement;if(!t)return {left:0,top:0,width:0,height:0};var o=a.jodit.ownerDocument.body,i=t.clientTop||o.clientTop||0,n=t.clientLeft||o.clientLeft||0;return {left:n,top:i,width:t.clientWidth+(e.pageXOffset||t.scrollLeft||o.scrollLeft)-n,height:t.clientHeight+(e.pageYOffset||t.scrollTop||o.scrollTop)-i}},a.calcPosition=function(e,t){if(!a.isDestructed){a.popup.target.classList.remove(a._hiddenClass);var o=e.left+e.width/2,i=u.offset(a.jodit.workplace,a.jodit,a.jodit.ownerDocument,!0),n=e.top+e.height+10;a.target.style.left=o+"px",a.target.style.top=n+"px",a.jodit.isFullSize()&&(a.target.style.zIndex=""+u.css(a.jodit.container,"zIndex"));var r=a.container.offsetWidth/2,s=-r;a.popup.container.classList.remove("jodit_toolbar_popup-inline-top"),t.height<n+a.container.offsetHeight&&(a.target.style.top=(n=e.top-a.container.offsetHeight-10)+"px",a.popup.container.classList.add("jodit_toolbar_popup-inline-top")),o-r<0&&(s=-(e.width/2+e.left)),t.width<o+r&&(s=-(a.container.offsetWidth-(t.width-o))),a.container.style.marginLeft=s+"px",(50<i.top-n||50<n-(i.top+i.height))&&a.popup.target.classList.add(a._hiddenClass);}},a.reCalcPosition=function(){a.__getRect&&a.calcPosition(a.__getRect(),a.calcWindSizes());},a.showPopup=function(e,t,o){if(!a.jodit.options.toolbarInline||!a.jodit.options.popup[t.toLowerCase()])return !1;if(a.isExcludedTarget(t))return !0;a.isShown=!0,a.isTargetAction=!0;var i=a.calcWindSizes();return a.target.parentNode||a.jodit.ownerDocument.body.appendChild(a.target),a.toolbar.build(a.jodit.options.popup[t.toLowerCase()],a.container,o),a.popup.open(a.container,!1,!0),a.__getRect=e,a.calcPosition(e(),i),!0},a.hidePopup=function(e){a.isDestructed||e&&(s.Dom.isNode(e,a.jodit.editorWindow||window)||e instanceof l.Popup)&&s.Dom.isOrContains(a.target,e instanceof l.Popup?e.target:e)||(a.isTargetAction=!1,a.isShown=!1,a.popup.close(),s.Dom.safeRemove(a.target));},a.onSelectionStart=function(e){if(!a.isDestructed&&a.jodit.isEditorMode()&&(a.isTargetAction=!1,a.isSelectionPopup=!1,!a.isSelectionStarted)){var t=Object.keys(a.jodit.options.popup).join("|"),o="IMG"===e.target.nodeName?e.target:s.Dom.closest(e.target,t,a.jodit.editor);o&&a.showPopup(function(){return u.offset(o,a.jodit,a.jodit.editorDocument)},o.nodeName,o)||(a.isSelectionStarted=!0);}},a.checkIsTargetEvent=function(){a.isTargetAction?a.isTargetAction=!1:a.hidePopup();},a.isShown=!1,a.onChangeSelection=function(){if(a.jodit.options.toolbarInline&&a.jodit.isEditorMode()&&!a.hideIfCollapsed()&&void 0!==a.jodit.options.popup.selection){var e=a.jodit.selection.sel;if(e&&e.rangeCount){a.isSelectionPopup=!0;var t=e.getRangeAt(0);a.showPopup(function(){return u.offset(t,a.jodit,a.jodit.editorDocument)},"selection");}}},a}t.inlinePopup=v;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),s=o(0),a=o(4),l=o(6);i.Config.prototype.controls.align={name:"left",tooltip:"Align",getLabel:function(t,e,o){var i=t.selection.current();if(i){var n=s.Dom.closest(i,function(e){return s.Dom.isBlock(e,t.editorWindow)},t.editor)||t.editor,r=""+a.css(n,"text-align");e.defaultValue&&~e.defaultValue.indexOf(r)&&(r="left"),o&&e.data&&e.data.currentValue!==r&&e.list&&~e.list.indexOf(r)&&(o.textBox.innerHTML=t.options.textIcons?"<span>"+r+"</span>":l.ToolbarIcon.getIcon(r,""),o.textBox.firstChild.classList.add("jodit_icon"),e.data.currentValue=r);}return !1},isActive:function(t,e){var o=t.selection.current();if(o&&e.defaultValue){var i=s.Dom.closest(o,function(e){return s.Dom.isBlock(e,t.editorWindow)},t.editor)||t.editor;return !~e.defaultValue.indexOf(""+a.css(i,"text-align"))}return !1},defaultValue:["left","start","inherit"],data:{currentValue:"left"},list:["center","left","right","justify"]},i.Config.prototype.controls.center={command:"justifyCenter",css:{"text-align":"center"},tooltip:"Align Center"},i.Config.prototype.controls.justify={command:"justifyFull",css:{"text-align":"justify"},tooltip:"Align Justify"},i.Config.prototype.controls.left={command:"justifyLeft",css:{"text-align":"left"},tooltip:"Align Left"},i.Config.prototype.controls.right={command:"justifyRight",css:{"text-align":"right"},tooltip:"Align Right"},t.justify=function(i){function e(t){function o(e){if(e instanceof i.editorWindow.HTMLElement)switch(t.toLowerCase()){case"justifyfull":e.style.textAlign="justify";break;case"justifyright":e.style.textAlign="right";break;case"justifyleft":e.style.textAlign="left";break;case"justifycenter":e.style.textAlign="center";}}return i.selection.focus(),i.selection.eachSelection(function(e){if(!e&&i.editor.querySelector(".jodit_selected_cell"))return a.$$(".jodit_selected_cell",i.editor).forEach(o),!1;if(e instanceof i.editorWindow.Node){var t=!!e&&s.Dom.up(e,function(e){return s.Dom.isBlock(e,i.editorWindow)},i.editor);!t&&e&&(t=s.Dom.wrapInline(e,i.options.enterBlock,i)),o(t);}}),!1}i.registerCommand("justifyfull",e),i.registerCommand("justifyright",e),i.registerCommand("justifyleft",e),i.registerCommand("justifycenter",e);};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),c=o(0),d=o(4);i.Config.prototype.link={followOnDblClick:!0,processVideoLink:!0,processPastedLink:!0,openLinkDialogAfterPost:!0,removeLinkAfterFormat:!0,noFollowCheckbox:!0,openInNewTabCheckbox:!0},i.Config.prototype.controls.unlink={exec:function(e,t){var o=c.Dom.closest(t,"A",e.editor);o&&c.Dom.unwrap(o),e.events.fire("hidePopup");}},i.Config.prototype.controls.link={isActive:function(e){var t=e.selection.current();return t&&!1!==c.Dom.closest(t,"a",e.editor)},popup:function(o,i,e,n){var t=o.selection.sel,r=o.create.fromHTML('<form class="jodit_form"><input required type="text" name="url" placeholder="http://" type="text"/><input name="text" placeholder="'+o.i18n("Text")+'" type="text"/>'+(o.options.link.openInNewTabCheckbox?'<label><input name="target" type="checkbox"/> '+o.i18n("Open in new tab")+"</label>":"")+(o.options.link.noFollowCheckbox?'<label><input name="nofollow" type="checkbox"/> '+o.i18n("No follow")+"</label>":"")+'<div style="text-align: right"><button class="jodit_unlink_button" type="button">'+o.i18n("Unlink")+'</button> &nbsp;&nbsp;<button class="jodit_link_insert_button" type="submit"></button></div><form/>');i=!(!i||!c.Dom.closest(i,"A",o.editor))&&c.Dom.closest(i,"A",o.editor);var s=r.querySelector(".jodit_link_insert_button"),a=r.querySelector(".jodit_unlink_button");i?(d.val(r,"input[name=url]",i.getAttribute("href")||""),d.val(r,"input[name=text]",i.textContent||""),o.options.link.openInNewTabCheckbox&&(r.querySelector("input[name=target]").checked="_blank"===i.getAttribute("target")),o.options.link.noFollowCheckbox&&(r.querySelector("input[name=nofollow]").checked="nofollow"===i.getAttribute("rel")),s&&(s.innerHTML=o.i18n("Update"))):(a&&(a.style.display="none"),d.val(r,"input[name=text]",t?""+t:""),s&&(s.innerHTML=o.i18n("Insert")));var l=o.selection.save();return a&&a.addEventListener("mousedown",function(e){i&&c.Dom.unwrap(i),o.selection.restore(l),n(),e.preventDefault();}),r.addEventListener("submit",function(e){e.preventDefault(),o.selection.restore(l);var t=i||o.editorDocument.createElement("a");return d.val(r,"input[name=url]")?(t.setAttribute("href",d.val(r,"input[name=url]")),t.textContent=d.val(r,"input[name=text]"),o.options.link.openInNewTabCheckbox&&(r.querySelector("input[name=target]").checked?t.setAttribute("target","_blank"):t.removeAttribute("target")),o.options.link.noFollowCheckbox&&(r.querySelector("input[name=nofollow]").checked?t.setAttribute("rel","nofollow"):t.removeAttribute("rel")),i||o.selection.insertNode(t),n()):(r.querySelector("input[name=url]").focus(),r.querySelector("input[name=url]").classList.add("jodit_error")),!1}),r},tags:["a"],tooltip:"Insert link"},t.link=function(n){n.options.link.followOnDblClick&&n.events.on("afterInit",function(){n.events.on(n.editor,"dblclick",function(e){var t=this.getAttribute("href");t&&(location.href=t,e.preventDefault());},"a");}),n.options.link.processPastedLink&&n.events.on("processPaste",function(e,t){if(d.isURL(t)){var o=d.convertMediaURLToVideoEmbed(t);if(o!==t)return n.create.inside.fromHTML(o);var i=n.create.inside.element("a");return i.setAttribute("href",t),i.textContent=t,i}}),n.options.link.removeLinkAfterFormat&&n.events.on("afterCommand",function(e){var t,o;"removeFormat"===e&&((o=n.selection.current())&&"A"!==o.nodeName&&(o=c.Dom.closest(o,"A",n.editor)),o&&"A"===o.nodeName&&(o.innerHTML===o.textContent?t=n.editorDocument.createTextNode(o.innerHTML):(t=n.editorDocument.createElement("span")).innerHTML=o.innerHTML,o.parentNode&&(o.parentNode.replaceChild(t,o),n.selection.setCursorIn(t,!0))));});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(2),r=o(5),s=o(46);i.Config.prototype.limitWords=!1,i.Config.prototype.limitChars=!1,i.Config.prototype.limitHTML=!1,t.limit=function(i){if(i&&(i.options.limitWords||i.options.limitChars)){var o=function(e,t){void 0===t&&(t="");var o=(t||(i.options.limitHTML?i.value:i.getEditorText())).replace(n.INVISIBLE_SPACE_REG_EXP,"").split(n.SPACE_REG_EXP).filter(function(e){return e.length});if(!e||!~n.COMMAND_KEYS.indexOf(e.which))return i.options.limitWords&&i.options.limitWords<=o.length?i.options.limitWords===o.length:i.options.limitChars&&i.options.limitChars<=o.join("").length?i.options.limitChars===o.join("").length:void 0},e=null;i.events.on("beforePaste",function(){e=i.observer.snapshot.make();}).on("keydown keyup beforeEnter beforePaste",function(e){if(void 0!==o(e))return !1}).on("change",r.debounce(function(e,t){!1===o(null,i.options.limitHTML?e:s.stripTags(e))&&(i.value=t);},i.defaultTimeout)).on("afterPaste",function(){if(!1===o(null)&&e)return i.observer.snapshot.restore(e),!1});}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),r=o(2),s=o(5),a=o(11);i.Config.prototype.mediaFakeTag="jodit-media",i.Config.prototype.mediaInFakeBlock=!0,i.Config.prototype.mediaBlocks=["video","audio"],t.media=function(o){var i="jodit_fake_wrapper",e=o.options,n=e.mediaFakeTag,t=e.mediaBlocks;e.mediaInFakeBlock&&o.events.on("afterGetValueFromEditor",function(e){var t=RegExp("<"+n+"[^>]+data-"+i+"[^>]+>(.+?)</"+n+">","ig");t.test(e.value)&&(e.value=e.value.replace(t,"$1"));}).on("change afterInit afterSetMode",s.debounce(function(){o.isDestructed||o.getMode()===r.MODE_SOURCE||a.$$(t.join(","),o.editor).forEach(function(e){e["__"+i]||(e["__"+i]=!0,function(e){if(e.parentNode&&e.parentNode.getAttribute("data-jodit_iframe_wrapper"))e=e.parentNode;else{var t=void 0;(t=o.create.inside.fromHTML("<"+n+' data-jodit-temp="1" contenteditable="false" draggable="true" data-'+i+'="1"></'+n+">")).style.display="inline-block"===e.style.display?"inline-block":"block",t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",e.parentNode&&e.parentNode.insertBefore(t,e),t.appendChild(e),e=t;}o.events.off(e,"mousedown.select touchstart.select").on(e,"mousedown.select touchstart.select",function(){o.selection.setCursorAfter(e);});}(e));});},o.defaultTimeout));};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(2),s=o(29),a=o(20);i.Config.prototype.mobileTapTimeout=300,i.Config.prototype.toolbarAdaptive=!0,i.Config.prototype.controls.dots={mode:n.MODE_SOURCE+n.MODE_WYSIWYG,popup:function(t,e,o,i,n){var r=o.data;return void 0===r&&((r={container:t.create.div(),toolbar:a.JoditToolbarCollection.makeCollection(t),rebuild:function(){if(n){var e=t.events.fire("getDiffButtons.mobile",n.parentToolbar);e&&r&&r.toolbar.build(s.splitArray(e),r.container);}}}).container.style.width="100px",o.data=r),r.rebuild(),r.container}},t.mobile=function(o){var t,i=0,n=s.splitArray(o.options.buttons);o.events.on("touchend",function(e){e.changedTouches&&e.changedTouches.length&&(t=(new Date).getTime(),o.options.mobileTapTimeout<t-i&&(i=t,o.selection.insertCursorAtPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)));}).on("getDiffButtons.mobile",function(e){if(e===o.toolbar)return s.splitArray(o.options.buttons).filter(function(e){return !~n.indexOf(e)})}),o.options.toolbarAdaptive&&o.events.on("resize afterInit",function(){if(o.options.toolbar){var e,t=o.container.offsetWidth;""+(e=s.splitArray(t<o.options.sizeLG?t<o.options.sizeMD?t<o.options.sizeSM?o.options.buttonsXS:o.options.buttonsSM:o.options.buttonsMD:o.options.buttons))!=""+n&&o.toolbar.build((n=e).concat(o.options.extraButtons),o.container);}});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(0);i.Config.prototype.controls.ul={command:"insertUnorderedList",controlName:"ul",tags:["ul"],tooltip:"Insert Unordered List"},i.Config.prototype.controls.ol={command:"insertOrderedList",controlName:"ol",tags:["ol"],tooltip:"Insert Ordered List"},t.orderedlist=function(i){i.events.on("afterCommand",function(e){if(/insert(un)?orderedlist/i.test(e)){var t=n.Dom.up(i.selection.current(),function(e){return e&&/^UL|OL$/i.test(e.nodeName)},i.editor);if(t&&t.parentNode&&"P"===t.parentNode.nodeName){var o=i.selection.save();n.Dom.unwrap(t.parentNode),Array.from(t.childNodes).forEach(function(e){e.lastChild&&e.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===e.lastChild.nodeName&&n.Dom.safeRemove(e.lastChild);}),i.selection.restore(o);}i.setEditorValue();}});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),v=o(2),m=o(13),g=o(4),_=o(0),n=o(172);i.Config.prototype.askBeforePasteHTML=!0,i.Config.prototype.askBeforePasteFromWord=!0,i.Config.prototype.nl2brInPlainText=!0,i.Config.prototype.defaultActionOnPaste=v.INSERT_AS_HTML,i.Config.prototype.controls.cut={command:"cut",isDisable:function(e){var t=e.selection.sel;return !t||t.isCollapsed},tooltip:"Cut selection"},t.paste=function(d){function c(e,t,o,i,n){if(void 0===i&&(i="Clean"),void 0===n&&(n="Insert only Text"),!d.events||!1!==d.events.fire("beforeOpenPasteDialog",e,t,o,i,n)){var r=m.Confirm('<div style="word-break: normal; white-space: normal">'+e+"</div>",t,o);r.container.setAttribute("data-editor_id",d.id);var s=r.create.fromHTML('<a href="javascript:void(0)" style="float:left;" class="jodit_button"><span>'+d.i18n("Keep")+"</span></a>"),a=r.create.fromHTML('<a href="javascript:void(0)" style="float:left;" class="jodit_button"><span>'+d.i18n(i)+"</span></a>"),l=r.create.fromHTML('<a href="javascript:void(0)" style="float:left;" class="jodit_button"><span>'+d.i18n(n)+"</span></a>"),c=r.create.fromHTML('<a href="javascript:void(0)" style="float:right;" class="jodit_button"><span>'+d.i18n("Cancel")+"</span></a>");return d.events.on(s,"click",function(){r.close(),o&&o(!0);}),d.events.on(a,"click",function(){r.close(),o&&o(!1);}),d.events.on(l,"click",function(){r.close(),o&&o(0);}),d.events.on(c,"click",function(){r.close();}),r.setFooter([s,a,n?l:"",c]),d.events&&d.events.fire("afterOpenPasteDialog",r,e,t,o,i,n),r}}function s(e,t){if("string"==typeof e)switch(t){case v.INSERT_CLEAR_HTML:e=g.cleanFromWord(e);break;case v.INSERT_ONLY_TEXT:e=g.stripTags(e);break;case v.INSERT_AS_TEXT:e=g.htmlspecialchars(e);}d.selection.insertHTML(e);}function u(o,i){if(g.isHTML(o)&&h!==p(o))return d.events.stopPropagation("beforePaste"),o=p(o),c(d.i18n("Your code is similar to HTML. Keep as HTML?"),d.i18n("Paste as HTML"),function(e){var t=v.INSERT_AS_HTML;!1===e&&(t=v.INSERT_AS_TEXT),0===e&&(t=v.INSERT_ONLY_TEXT),"drop"===i.type&&d.selection.insertCursorAtPoint(i.clientX,i.clientY),s(o,t),d.setEditorValue();},"Insert as Text"),!1}function f(e){return e.clipboardData?e.clipboardData:e.dataTransfer||new DataTransfer}function p(e){var t=e.search(/<!--StartFragment-->/i);-1!=t&&(e=e.substr(20+t));var o=e.search(/<!--EndFragment-->/i);return -1!=o&&(e=e.substr(0,o)),e}var h="";d.events.on("copy cut",function(e){var t=d.selection.getHTML(),o=f(e)||f(d.editorWindow)||f(e.originalEvent);o&&(o.setData(v.TEXT_PLAIN,g.stripTags(t)),o.setData(v.TEXT_HTML,t)),h=t,"cut"===e.type&&(d.selection.remove(),d.selection.focus()),e.preventDefault(),d.events.fire("afterCopy",t);}).on("paste",function(e){if(!1===d.events.fire("beforePaste",e))return e.preventDefault(),!1;var t=f(e);if(e&&t){var o=t.types,i="",n="";if(Array.isArray(o)||"domstringlist"===g.type(o))for(var r=0;r<o.length;r+=1)i+=o[r]+";";else i=o+";";/text\/html/i.test(i)?n=t.getData("text/html"):/text\/rtf/i.test(i)&&g.browser("safari")?n=t.getData("text/rtf"):/text\/plain/i.test(i)&&!g.browser("mozilla")?n=t.getData(v.TEXT_PLAIN):/text/i.test(i)&&v.IS_IE&&(n=t.getData(v.TEXT_PLAIN)),(n instanceof d.editorWindow.Node||g.trim(n))&&(n=p(n),h!==n&&(n=d.events.fire("processPaste",e,n,i)),"string"!=typeof n&&!_.Dom.isNode(n,d.editorWindow)||("drop"===e.type&&d.selection.insertCursorAtPoint(e.clientX,e.clientY),s(n,d.options.defaultActionOnPaste)),e.preventDefault(),e.stopPropagation());}return !1!==d.events.fire("afterPaste",e)&&void 0}),d.options.askBeforePasteHTML&&d.events.on("beforePaste",function(e){var t=f(e);if(e&&t&&t.getData(v.TEXT_PLAIN))return u(t.getData(v.TEXT_PLAIN),e)}),d.options.askBeforePasteFromWord&&d.events.on("beforePaste",function(e){var t=f(e);if(e&&t&&t.getData&&t.getData(v.TEXT_HTML)){var o=function(t){if(g.isHTML(t)&&h!==p(t))return g.isHTMLFromWord(t)?c(d.i18n("The pasted content is coming from a Microsoft Word/Excel document. Do you want to keep the format or clean it up?"),d.i18n("Word Paste Detected"),function(e){!0===e&&(t=g.applyStyles(t),d.options.beautifyHTML&&d.ownerWindow.html_beautify&&(t=d.ownerWindow.html_beautify(t))),!1===e&&(t=g.cleanFromWord(t)),0===e&&(t=g.stripTags(g.cleanFromWord(t))),d.selection.insertHTML(t),d.setEditorValue();}):u(t,e),!1};if(t.types&&~Array.from(t.types).indexOf("text/html")){var i=t.getData(v.TEXT_HTML);return o(i)}if("drop"!==e.type){var n=d.create.div("",{tabindex:-1,contenteditable:!0,style:{left:-9999,top:0,width:0,height:"100%",lineHeight:"140%",overflow:"hidden",position:"fixed",zIndex:2147483647,wordBreak:"break-all"}});d.container.appendChild(n);var r=d.selection.save();n.focus();var s=0,a=function(){_.Dom.safeRemove(n),d.selection&&d.selection.restore(r);},l=function(){if(s+=1,n.childNodes&&0<n.childNodes.length){var e=n.innerHTML;a(),!1!==o(e)&&d.selection.insertHTML(e);}else s<5?g.setTimeout(l,20):a();};l();}}}),d.options.nl2brInPlainText&&d.events.on("processPaste",function(e,t,o){if(o===v.TEXT_PLAIN+";"&&!g.isHTML(t))return n.nl2br(t)});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.nl2br=function(e){return e.replace(/([^>])([\n\r]+)/g,"$1<br/>$2")};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),s=o(2),a=o(10),l=o(5),c=o(0);i.Config.prototype.showPlaceholder=!0,i.Config.prototype.useInputsPlaceholder=!0,i.Config.prototype.placeholder="Type something",t.placeholder=function(n){if(n.options.showPlaceholder){this.destruct=function(){c.Dom.safeRemove(r);};var t=function(){r.parentNode&&(r.style.display="none");},o=l.debounce(function(){if(null!==r.parentNode&&n.editor){if(n.getRealMode()!==s.MODE_WYSIWYG)return t();var e=n.getEditorValue();e&&!/^<(p|div|h[1-6])><\/\1>$/.test(e)?t():function(){if(r.parentNode&&!n.options.readonly){var e=0,t=0,o=n.editorWindow.getComputedStyle(n.editor);if(n.editor.firstChild&&n.editor.firstChild.nodeType===Node.ELEMENT_NODE){var i=n.editorWindow.getComputedStyle(n.editor.firstChild);e=parseInt(i.getPropertyValue("margin-top"),10),t=parseInt(i.getPropertyValue("margin-left"),10),r.style.fontSize=parseInt(i.getPropertyValue("font-size"),10)+"px",r.style.lineHeight=i.getPropertyValue("line-height");}else r.style.fontSize=parseInt(o.getPropertyValue("font-size"),10)+"px",r.style.lineHeight=o.getPropertyValue("line-height");a.css(r,{display:"block",marginTop:Math.max(parseInt(o.getPropertyValue("margin-top"),10),e),marginLeft:Math.max(parseInt(o.getPropertyValue("margin-left"),10),t)});}}();}},n.defaultTimeout/10),r=n.create.fromHTML('<span style="display: none;" class="jodit_placeholder">'+n.i18n(n.options.placeholder)+"</span>");"rtl"===n.options.direction&&(r.style.right="0px",r.style.direction="rtl"),n.options.useInputsPlaceholder&&n.element.hasAttribute("placeholder")&&(r.innerHTML=n.element.getAttribute("placeholder")||""),n.events.on("readonly",function(e){e?t():o();}).on("afterInit",function(){n.workplace.appendChild(r),o(),n.events.fire("placeholder",r.innerHTML),n.events.on("change keyup mouseup keydown mousedown afterSetMode",o).on(window,"load",o);});}};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(2),s=o(7);n.Config.prototype.controls.redo={mode:r.MODE_SPLIT,isDisable:function(e){return !e.observer.stack.canRedo()},tooltip:"Redo"},n.Config.prototype.controls.undo={mode:r.MODE_SPLIT,isDisable:function(e){return !e.observer.stack.canUndo()},tooltip:"Undo"};var a,l=(i.__extends(c,a=s.Plugin),c.prototype.beforeDestruct=function(){},c.prototype.afterInit=function(t){function e(e){return t.getRealMode()===r.MODE_WYSIWYG&&t.observer[e](),!1}t.registerCommand("redo",{exec:e,hotkeys:["ctrl+y","ctrl+shift+z","cmd+y","cmd+shift+z"]}),t.registerCommand("undo",{exec:e,hotkeys:["ctrl+z","cmd+z"]});},c);function c(){return null!==a&&a.apply(this,arguments)||this}t.redoundo=l;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),x=o(2),T=o(2),S=o(0),D=o(11),q=o(5),M=o(23),L=o(4);i.Config.prototype.useIframeResizer=!0,i.Config.prototype.useTableResizer=!0,i.Config.prototype.useImageResizer=!0,i.Config.prototype.resizer={showSize:!0,hideSizeTimeout:1e3,min_width:10,min_height:10},t.resizer=function(r){function n(){w=y=!1,c=null,C.style.display="none";}function s(){j.style.opacity="0";}function a(){if(w&&c&&C){var e=M.offset(C.parentNode||r.ownerDocument.documentElement,r,r.ownerDocument,!0),t=M.offset(c,r,r.editorDocument),o=parseInt(C.style.left||"0",10),i=t.top-1-e.top,n=t.left-1-e.left;parseInt(C.style.top||"0",10)===i&&o===n&&C.offsetWidth===c.offsetWidth&&C.offsetHeight===c.offsetHeight||(C.style.top=i+"px",C.style.left=n+"px",C.style.width=c.offsetWidth+"px",C.style.height=c.offsetHeight+"px",r.events&&(r.events.fire(c,"changesize"),isNaN(o)||r.events.fire("resize")));}}var l,c,d,u,f,p,h,v,m,g,_,b=!1,y=!1,w=!1,E=0,C=r.create.fromHTML('<div data-editor_id="'+r.id+'" style="display:none" class="jodit_resizer"><i class="jodit_resizer-topleft"></i><i class="jodit_resizer-topright"></i><i class="jodit_resizer-bottomright"></i><i class="jodit_resizer-bottomleft"></i><span>100x100</span></div>'),j=C.getElementsByTagName("span")[0];D.$$("i",C).forEach(function(t){r.events.on(t,"mousedown touchstart",function(e){if(!c||!c.parentNode)return n(),!1;l=t,e.preventDefault(),e.stopImmediatePropagation(),h=(f=c.offsetWidth)/(p=c.offsetHeight),y=!0,d=e.clientX,u=e.clientY,r.events.fire("hidePopup"),r.lock("resizer");});}),r.events.on("readonly",function(e){e&&n();}).on("beforeDestruct",function(){S.Dom.safeRemove(C);}).on("afterInit",function(){r.events.on(r.editor,"keydown",function(e){w&&e.which===x.KEY_DELETE&&c&&"table"!=c.tagName.toLowerCase()&&("JODIT"!==c.tagName?r.selection.select(c):(S.Dom.safeRemove(c),n(),e.preventDefault()));}).on(r.ownerWindow,"mousemove touchmove",function(e){if(y){if(g=e.clientX-d,_=e.clientY-u,!c)return;var t=l.className;"IMG"===c.tagName?(g?(m=f+(t.match(/left/)?-1:1)*g,v=Math.round(m/h)):(v=p+(t.match(/top/)?-1:1)*_,m=Math.round(v*h)),m>M.innerWidth(r.editor,r.ownerWindow)&&(m=M.innerWidth(r.editor,r.ownerWindow),v=Math.round(m/h))):(m=f+(t.match(/left/)?-1:1)*g,v=p+(t.match(/top/)?-1:1)*_),r.options.resizer.min_width<m&&(c.style.width=m<C.parentNode.offsetWidth?m+"px":"100%"),r.options.resizer.min_height<v&&(c.style.height=v+"px"),a(),o=c.offsetWidth,i=c.offsetHeight,r.options.resizer.showSize&&(o<j.offsetWidth||i<j.offsetHeight?s():(j.style.opacity="1",j.innerHTML=o+" x "+i,clearTimeout(E),E=q.setTimeout(s,r.options.resizer.hideSizeTimeout))),e.stopImmediatePropagation();}var o,i;}).on(r.ownerWindow,"resize",function(){w&&a();}).on(r.ownerWindow,"mouseup keydown touchend",function(e){w&&!b&&(y?(r.unlock(),y=!1,r.setEditorValue(),e.stopImmediatePropagation()):n());}).on([r.ownerWindow,r.editor],"scroll",function(){w&&!y&&n();});}).on("afterGetValueFromEditor",function(e){var t=/<jodit[^>]+data-jodit_iframe_wrapper[^>]+>(.*?<iframe[^>]+>[\s\n\r]*<\/iframe>.*?)<\/jodit>/gi;t.test(e.value)&&(e.value=e.value.replace(t,"$1"));}).on("hideResizer",n).on("change afterInit afterSetMode",q.debounce(function(){w&&(c&&c.parentNode?a():n()),r.isDestructed||D.$$("img, table, iframe",r.editor).forEach(function(e){r.getMode()!==x.MODE_SOURCE&&!e.__jodit_resizer_binded&&("IFRAME"===e.tagName&&r.options.useIframeResizer||"IMG"===e.tagName&&r.options.useImageResizer||"TABLE"===e.tagName&&r.options.useTableResizer)&&(e.__jodit_resizer_binded=!0,function(t){var e,o;if("IFRAME"===t.tagName){var i=t;t=t.parentNode&&t.parentNode.getAttribute("data-jodit_iframe_wrapper")?t.parentNode:((e=r.create.inside.fromHTML('<jodit data-jodit-temp="1" contenteditable="false" draggable="true" data-jodit_iframe_wrapper="1"></jodit>')).style.display="inline-block"===t.style.display?"inline-block":"block",e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px",t.parentNode&&t.parentNode.insertBefore(e,t),e.appendChild(t),e),r.events.off(t,"mousedown.select touchstart.select").on(t,"mousedown.select touchstart.select",function(){r.selection.select(t);}),r.events.off(t,"changesize").on(t,"changesize",function(){i.setAttribute("width",t.offsetWidth+"px"),i.setAttribute("height",t.offsetHeight+"px");});}r.events.on(t,"dragstart",n).on(t,"mousedown",function(e){T.IS_IE&&"IMG"===t.nodeName&&e.preventDefault();}).on(t,"mousedown touchstart",function(){b||(b=!0,c=t,r.options.readonly||(C.parentNode||r.workplace.appendChild(C),w=!0,C.style.display="block",r.isFullSize()&&(C.style.zIndex=""+L.css(r.container,"zIndex")),a()),"IMG"!==c.tagName||c.complete||c.addEventListener("load",function e(){a(),c&&c.removeEventListener("load",e);}),clearTimeout(o)),o=q.setTimeout(function(){b=!1;},400);});}(e));});},r.defaultTimeout));};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),u=o(5),f=o(10);i.Config.prototype.allowResizeX=!1,i.Config.prototype.allowResizeY=!0,t.size=function(i){function o(e){f.css(i.container,"height",e),i.options.saveHeightInStorage&&i.storage.set("height",e);}function n(e){return f.css(i.container,"width",e)}function t(e){return f.css(i.workplace,"height",e)}if("auto"!==i.options.height&&(i.options.allowResizeX||i.options.allowResizeY)){var r=i.create.div("jodit_editor_resize",'<a tabindex="-1" href="javascript:void(0)"></a>'),s={x:0,y:0,w:0,h:0},a=!1;i.events.on(r,"mousedown touchstart",function(e){a=!0,s.x=e.clientX,s.y=e.clientY,s.w=i.container.offsetWidth,s.h=i.container.offsetHeight,i.lock(),e.preventDefault();}).on(i.ownerWindow,"mousemove touchmove",u.throttle(function(e){a&&(i.options.allowResizeY&&o(s.h+e.clientY-s.y),i.options.allowResizeX&&n(s.w+e.clientX-s.x),c(),i.events.fire("resize"));},i.defaultTimeout/10)).on(i.ownerWindow,"mouseup touchsend",function(){a&&(a=!1,i.unlock());}).on("afterInit",function(){i.container.appendChild(r);}).on("toggleFullSize",function(e){r.style.display=e?"none":"block";});}function e(){return (i.options.toolbar?i.toolbar.container.offsetHeight:0)+(i.statusbar?i.statusbar.container.offsetHeight:0)}function l(){if(i.container&&i.container.parentNode){var o=f.css(i.container,"minHeight")-e();[i.workplace,i.iframe,i.editor].map(function(e){var t=e===i.editor?o-2:o;e&&f.css(e,"minHeight",t),i.events.fire("setMinHeight",t);});}}var c=function(){i&&!i.isDestructed&&i.options&&!i.options.inline&&(l(),i.container&&("auto"!==i.options.height||i.isFullSize())&&t(i.container.offsetHeight-e()));},d=u.debounce(c,i.defaultTimeout);i.events.on("toggleFullSize",function(e){e||"auto"!==i.options.height||(t("auto"),l());}).on("afterInit",function(){i.options.inline||(f.css(i.editor,{minHeight:"100%"}),f.css(i.container,{minHeight:i.options.minHeight,minWidth:i.options.minWidth,maxWidth:i.options.maxWidth}));var e=i.options.height;if(i.options.saveHeightInStorage&&"auto"!==e){var t=i.storage.get("height");t&&(e=t);}i.options.inline||(o(e),n(i.options.width)),c();},void 0,void 0,!0).on(window,"load",d).on("afterInit resize updateToolbar scroll afterResize",d);};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),u=o(2),r=o(2),s=o(7),a=o(50),l=o(5),f=o(11),c=o(10),d=o(0);n.Config.prototype.beautifyHTML=!0,n.Config.prototype.useAceEditor=!0,n.Config.prototype.sourceEditorNativeOptions={showGutter:!0,theme:"ace/theme/idle_fingers",mode:"ace/mode/html",wrap:!0,highlightActiveLine:!0},n.Config.prototype.sourceEditorCDNUrlsJS=["https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.5/ace.js"],n.Config.prototype.beautifyHTMLCDNUrlsJS=["https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.10.0/beautify.min.js","https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.10.0/beautify-html.min.js"],n.Config.prototype.controls.source={mode:u.MODE_SPLIT,exec:function(e){e.toggleMode();},isActive:function(e){return e.getRealMode()===u.MODE_SOURCE},tooltip:"Change mode"};var p,h=(i.__extends(v,p=s.Plugin),v.prototype.getMirrorValue=function(){return this.mirror.value},v.prototype.setMirrorValue=function(e){this.mirror.value=e;},v.prototype.setFocusToMirror=function(){this.mirror.focus();},v.prototype.replaceMirrorToACE=function(){function t(){i&&c.getRealMode()===u.MODE_SOURCE&&(c.events.fire("canRedo",i.hasRedo()),c.events.fire("canUndo",i.hasUndo()));}function n(e){return a.session.getLine(e).length}function r(){for(var e=a.session.getLength(),t=[],o=0,i=0;i<e;i++)o+=n(i),0<i&&(o+=1),t[i]=o;return t}function s(e){var t=r();if(e<=t[0])return {row:0,column:e};for(var o=1,i=1;i<t.length;i++)t[i]<e&&(o=i+1);return {row:o,column:e-t[o-1]-1}}function o(e,t){return r()[e]-n(e)+t}var a,i,l=this,c=this.jodit,d=function(){if(void 0===a&&void 0!==l.jodit.ownerWindow.ace){l.jodit.events.off(l.jodit.ownerWindow,"aceReady",d);var e=l.jodit.create.div("jodit_source_mirror-fake");l.mirrorContainer.insertBefore(e,l.mirrorContainer.firstChild),l.aceEditor=a=l.jodit.ownerWindow.ace.edit(e),a.setTheme(c.options.sourceEditorNativeOptions.theme),a.renderer.setShowGutter(c.options.sourceEditorNativeOptions.showGutter),a.getSession().setMode(c.options.sourceEditorNativeOptions.mode),a.setHighlightActiveLine(c.options.sourceEditorNativeOptions.highlightActiveLine),a.getSession().setUseWrapMode(!0),a.setOption("indentedSoftWrap",!1),a.setOption("wrap",c.options.sourceEditorNativeOptions.wrap),a.getSession().setUseWorker(!1),a.$blockScrolling=1/0,a.setOptions({maxLines:1/0}),a.on("change",l.toWYSIWYG),a.on("focus",l.__proxyOnFocus),a.on("mousedown",l.__proxyOnMouseDown),l.mirror.style.display="none",i=a.getSession().getUndoManager(),l.setMirrorValue=function(e){a.setValue(c.options.beautifyHTML&&c.ownerWindow.html_beautify?c.ownerWindow.html_beautify(e):e),a.clearSelection(),t();},l.jodit.getRealMode()!==u.MODE_WYSIWYG&&l.setMirrorValue(l.getMirrorValue()),l.getMirrorValue=function(){return a.getValue()},l.setFocusToMirror=function(){a.focus();},l.getSelectionStart=function(){var e=a.selection.getRange();return o(e.start.row,e.start.column)},l.getSelectionEnd=function(){var e=a.selection.getRange();return o(e.end.row,e.end.column)},l.selectAll=function(){a.selection.selectAll();},l.insertHTML=function(e){var t=a.selection.getCursor(),o=a.session.insert(t,e);a.selection.setRange({start:t,end:o},!1);},l.setMirrorSelectionRange=function(e,t){var o,i,n;o=t,i=s(e),n=s(o),a.getSelection().setSelectionRange({start:i,end:n});},c.events.on("afterResize",function(){a.resize();}).fire("aceInited",c);}};c.events.on(this.jodit.ownerWindow,"aceReady",d).on("aceReady",d).on("afterSetMode",function(){c.getRealMode()!==u.MODE_SOURCE&&c.getMode()!==u.MODE_SPLIT||(l.fromWYSIWYG(),d());}).on("beforeCommand",function(e){if(c.getRealMode()!==u.MODE_WYSIWYG&&("redo"===e||"undo"===e)&&i)return i["has"+e.substr(0,1).toUpperCase()+e.substr(1)]&&a[e](),t(),!1}),d(),void 0!==this.jodit.ownerWindow.ace||f.$$("script."+this.className,this.jodit.ownerDocument.body).length||this.loadNext(0,c.options.sourceEditorCDNUrlsJS,"aceReady",this.className);},v.prototype.afterInit=function(t){var o=this;function e(){t.events.off("beforeSetMode.source afterSetMode.source").on("beforeSetMode.source",o.saveSelection).on("afterSetMode.source",o.restoreSelection);}this.mirrorContainer=t.create.div("jodit_source"),this.mirror=t.create.fromHTML('<textarea class="jodit_source_mirror"/>'),e(),this.onReadonlyReact(),t.events.on(this.mirror,"mousedown keydown touchstart input",l.debounce(this.toWYSIWYG,t.defaultTimeout)).on(this.mirror,"change keydown mousedown touchstart input",this.autosize).on("afterSetMode.source",this.autosize).on(this.mirror,"mousedown focus",function(e){t.events.fire(e.type,e);}),t.events.on("setMinHeight.source",function(e){o.mirror&&c.css(o.mirror,"minHeight",e);}).on("insertHTML.source",function(e){if(!t.options.readonly&&!o.jodit.isEditorMode())return o.insertHTML(e),!1}).on("aceInited",function(){o.onReadonlyReact(),e();},void 0,void 0,!0).on("readonly.source",this.onReadonlyReact).on("placeholder.source",function(e){o.mirror.setAttribute("placeholder",e);}).on("beforeCommand.source",this.onSelectAll).on("change.source",this.fromWYSIWYG),this.mirrorContainer.appendChild(this.mirror),t.workplace.appendChild(this.mirrorContainer),this.autosize();var i="beutyfy_html_jodit_helper";t.options.beautifyHTML&&void 0===t.ownerWindow.html_beautify&&!f.$$("script."+i,t.ownerDocument.body).length&&this.loadNext(0,t.options.beautifyHTMLCDNUrlsJS,!1,i),t.options.useAceEditor&&this.replaceMirrorToACE(),this.fromWYSIWYG();},v.prototype.beforeDestruct=function(e){d.Dom.safeRemove(this.mirrorContainer),d.Dom.safeRemove(this.mirror),e&&e.events&&e.events.off("aceInited.source"),this.aceEditor&&(this.setFocusToMirror=function(){},this.aceEditor.off("change",this.toWYSIWYG),this.aceEditor.off("focus",this.__proxyOnFocus),this.aceEditor.off("mousedown",this.__proxyOnMouseDown),this.aceEditor.destroy(),delete this.aceEditor),this.lastTuple&&this.lastTuple.element.removeEventListener("load",this.lastTuple.callback);},v);function v(){var s=null!==p&&p.apply(this,arguments)||this;return s.className="jodit_ace_editor",s.__lock=!1,s.__oldMirrorValue="",s.autosize=l.debounce(function(){s.mirror.style.height="auto",s.mirror.style.height=s.mirror.scrollHeight+"px";},s.jodit.defaultTimeout),s.tempMarkerStart="{start-jodit-selection}",s.tempMarkerStartReg=/{start-jodit-selection}/g,s.tempMarkerEnd="{end-jodit-selection}",s.tempMarkerEndReg=/{end-jodit-selection}/g,s.selInfo=[],s.lastTuple=null,s.loadNext=function(e,t,o,i){if(void 0===o&&(o="aceReady"),void 0===i&&(i=s.className),o&&void 0===t[e]&&!s.isDestructed)return s.jodit&&s.jodit.events&&s.jodit.events.fire(o),void(s.jodit&&s.jodit.events&&s.jodit.events.fire(s.jodit.ownerWindow,o));void 0!==t[e]&&(s.lastTuple&&s.lastTuple.element.removeEventListener("load",s.lastTuple.callback),s.lastTuple=a.appendScript(t[e],function(){s.isDestructed||s.loadNext(e+1,t,o,i);},i,s.jodit.ownerDocument));},s.insertHTML=function(e){if(s.mirror.selectionStart||0===s.mirror.selectionStart){var t=s.mirror.selectionEnd;s.mirror.value=s.mirror.value.substring(0,s.mirror.selectionStart)+e+s.mirror.value.substring(t,s.mirror.value.length);}else s.mirror.value+=s.mirror;s.toWYSIWYG();},s.fromWYSIWYG=function(e){if(void 0===e&&(e=!1),!s.__lock||!0===e){s.__lock=!0;var t=s.jodit.getEditorValue(!1);t!==s.getMirrorValue()&&s.setMirrorValue(t),s.__lock=!1;}},s.toWYSIWYG=function(){if(!s.__lock){var e=s.getMirrorValue();e!==s.__oldMirrorValue&&(s.__lock=!0,s.jodit.setEditorValue(e),s.__lock=!1,s.__oldMirrorValue=e);}},s.getNormalPosition=function(e,t){for(var o=e;0<o;){if("<"===t[--o]&&void 0!==t[o+1]&&t[o+1].match(/[\w\/]+/i))return o;if(">"===t[o])return e}return e},s.__clear=function(e){return e.replace(u.INVISIBLE_SPACE_REG_EXP,"")},s.selectAll=function(){s.mirror.select();},s.onSelectAll=function(e){if("selectall"==e.toLowerCase()&&s.jodit.getRealMode()===r.MODE_SOURCE)return s.selectAll(),!1},s.getSelectionStart=function(){return s.mirror.selectionStart},s.getSelectionEnd=function(){return s.mirror.selectionEnd},s.saveSelection=function(){if(s.jodit.getRealMode()===u.MODE_WYSIWYG)s.selInfo=s.jodit.selection.save()||[],s.jodit.setEditorValue(),s.fromWYSIWYG(!0);else{s.selInfo.length=0;var e=s.getMirrorValue();if(s.getSelectionStart()===s.getSelectionEnd()){var t=s.jodit.selection.marker(!0);s.selInfo[0]={startId:t.id,collapsed:!0,startMarker:t.outerHTML};var o=s.getNormalPosition(s.getSelectionStart(),s.getMirrorValue());s.setMirrorValue(e.substr(0,o)+s.__clear(s.selInfo[0].startMarker)+e.substr(o));}else{var i=s.jodit.selection.marker(!0),n=s.jodit.selection.marker(!1);s.selInfo[0]={startId:i.id,endId:n.id,collapsed:!1,startMarker:s.__clear(i.outerHTML),endMarker:s.__clear(n.outerHTML)},o=s.getNormalPosition(s.getSelectionStart(),e);var r=s.getNormalPosition(s.getSelectionEnd(),e);s.setMirrorValue(e.substr(0,o)+s.selInfo[0].startMarker+e.substr(o,r-o)+s.selInfo[0].endMarker+e.substr(r));}s.toWYSIWYG();}},s.restoreSelection=function(){if(s.selInfo.length){if(s.jodit.getRealMode()===u.MODE_WYSIWYG)return s.__lock=!0,s.jodit.selection.restore(s.selInfo),void(s.__lock=!1);var e=s.getMirrorValue(),t=0,o=0;try{s.selInfo[0].startMarker&&(e=e.replace(/<span[^>]+data-jodit_selection_marker="start"[^>]*>[<>]*?<\/span>/gim,s.tempMarkerStart)),s.selInfo[0].endMarker&&(e=e.replace(/<span[^>]+data-jodit_selection_marker="end"[^>]*>[<>]*?<\/span>/gim,s.tempMarkerEnd)),s.jodit.ownerWindow.html_beautify&&s.jodit.options.beautifyHTML&&(e=s.jodit.ownerWindow.html_beautify(e)),o=t=e.indexOf(s.tempMarkerStart),e=e.replace(s.tempMarkerStartReg,""),s.selInfo[0].collapsed&&-1!==t||(o=e.indexOf(s.tempMarkerEnd),-1===t&&(t=o)),e=e.replace(s.tempMarkerEndReg,"");}finally{e=e.replace(s.tempMarkerEndReg,"").replace(s.tempMarkerStartReg,"");}s.setMirrorValue(e),s.setMirrorSelectionRange(t,o),s.toWYSIWYG(),s.setFocusToMirror();}},s.__proxyOnFocus=function(e){s.jodit.events.fire("focus",e);},s.__proxyOnMouseDown=function(e){s.jodit.events.fire("mousedown",e);},s.setMirrorSelectionRange=function(e,t){s.mirror.setSelectionRange(e,t);},s.onReadonlyReact=function(){var e=s.jodit.options.readonly;e?s.mirror.setAttribute("readonly","true"):s.mirror.removeAttribute("readonly"),s.aceEditor&&s.aceEditor.setReadOnly(e);},s}t.source=h;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),f=o(2),l=o(13);i.Config.prototype.usePopupForSpecialCharacters=!1,i.Config.prototype.specialCharacters=["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&raquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],i.Config.prototype.controls.symbol={icon:"omega",hotkeys:["ctrl+shift+i","cmd+shift+i"],tooltip:"Insert Special Character",popup:function(e,t,o,i){var n=e.events.fire("generateSpecialCharactersTable.symbols");if(n){if(e.options.usePopupForSpecialCharacters){var r=e.ownerDocument.createElement("div");return r.classList.add("jodit_symbols"),r.appendChild(n),e.events.on(n,"close_dialog",i),r}var s=l.Alert(n,e.i18n("Select Special Character"),void 0,"jodit_symbols"),a=n.querySelector("a");a&&a.focus(),e.events.on("beforeDestruct",function(){s&&s.close();});}}},t.symbols=function(d){var u=this;this.countInRow=17,d.events.on("generateSpecialCharactersTable.symbols",function(){for(var e=d.create.fromHTML('<div class="jodit_symbols-container"><div class="jodit_symbols-container_table"><table><tbody></tbody></table></div><div class="jodit_symbols-container_preview"><div class="jodit_symbols-preview"></div></div></div>'),t=e.querySelector(".jodit_symbols-preview"),o=e.querySelector("table").tBodies[0],r=[],i=0;i<d.options.specialCharacters.length;){for(var n=d.create.element("tr"),s=0;s<u.countInRow&&i<d.options.specialCharacters.length;s+=1,i+=1){var a=d.create.element("td"),l=d.create.fromHTML('<a\n                                    data-index="'+i+'"\n                                    data-index-j="'+s+'"\n                                    href="javascript:void(0)"\n                                    role="option"\n                                    tabindex="-1"\n                                >'+d.options.specialCharacters[i]+"</a>");r.push(l),a.appendChild(l),n.appendChild(a);}o.appendChild(n);}var c=u;return d.events.on(r,"focus",function(){t.innerHTML=this.innerHTML;}).on(r,"mousedown",function(e){this&&"A"===this.nodeName&&(d.selection.focus(),d.selection.insertHTML(this.innerHTML),d.events.fire(this,"close_dialog"),e&&e.preventDefault(),e&&e.stopImmediatePropagation());}).on(r,"mouseenter",function(){this&&"A"===this.nodeName&&this.focus();}).on(r,"keydown",function(e){var t=e.target;if(t&&"A"===t.nodeName){var o=parseInt(t.getAttribute("data-index")||"0",10),i=parseInt(t.getAttribute("data-index-j")||"0",10),n=void 0;switch(e.which){case f.KEY_UP:case f.KEY_DOWN:void 0===r[n=e.which===f.KEY_UP?o-c.countInRow:o+c.countInRow]&&r.length-1<(n=e.which===f.KEY_UP?Math.floor(r.length/c.countInRow)*c.countInRow+i:i)&&(n-=c.countInRow),r[n]&&r[n].focus();break;case f.KEY_RIGHT:case f.KEY_LEFT:void 0===r[n=e.which===f.KEY_LEFT?o-1:o+1]&&(n=e.which===f.KEY_LEFT?r.length-1:0),r[n]&&r[n].focus();break;case f.KEY_ENTER:d.events.fire(t,"mousedown"),e.stopImmediatePropagation(),e.preventDefault();}}}),e});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(7),s=o(19);n.Config.prototype.commandToHotkeys={removeFormat:["ctrl+shift+m","cmd+shift+m"],insertOrderedList:["ctrl+shift+7","cmd+shift+7"],insertUnorderedList:["ctrl+shift+8, cmd+shift+8"],selectall:["ctrl+a","cmd+a"]};var a,l=(i.__extends(c,a=r.Plugin),c.prototype.afterInit=function(o){var i=this;Object.keys(o.options.commandToHotkeys).forEach(function(e){var t=o.options.commandToHotkeys[e];t&&o.registerHotkeyToCommand(t,e);});var n=!1;o.events.on("keydown.hotkeys",function(e){var t=i.onKeyPress(e);if(!1===i.jodit.events.fire(t+".hotkey",e.type))return n=!0,o.events.stopPropagation("keydown"),!1},void 0,void 0,!0).on("keyup.hotkeys",function(){if(n)return n=!1,o.events.stopPropagation("keyup"),!1},void 0,void 0,!0);},c.prototype.beforeDestruct=function(e){e.events&&e.events.off(".hotkeys");},c);function c(){var n=null!==a&&a.apply(this,arguments)||this;return n.onKeyPress=function(t){var o=n.specialKeys[t.which],e=(t.key||String.fromCharCode(t.which)).toLowerCase(),i=[o||e];return ["alt","ctrl","shift","meta"].forEach(function(e){t[e+"Key"]&&o!==e&&i.push(e);}),s.normalizeKeyAliases(i.join("+"))},n.specialKeys={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},n}t.hotkeys=l;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),c=o(2),r=o(7),b=o(0),f=o(28),y=o(4),s=o(5);n.Config.prototype.useTableProcessor=!0,n.Config.prototype.useExtraClassesOptions=!0,n.Config.prototype.controls.table={data:{cols:10,rows:10,classList:{"table table-bordered":"Bootstrap Bordered","table table-striped":"Bootstrap Striped","table table-dark":"Bootstrap Dark"}},popup:function(v,e,i,m,t){var n=i.data&&i.data.rows?i.data.rows:10,g=i.data&&i.data.cols?i.data.cols:10,o=v.create.fromHTML('<form class="jodit_form jodit_form_inserter"><label><span>1</span> &times; <span>1</span></label><div class="jodit_form-table-creator-box"><div class="jodit_form-container"></div><div class="jodit_form-options">'+function(){if(!v.options.useExtraClassesOptions)return "";var t=[];if(i.data){var o=i.data.classList;Object.keys(o).forEach(function(e){t.push('<label><input value="'+e+'" type="checkbox"/>'+o[e]+"</label>");});}return t.join("")}()+"</div></div></form>"),a=o.querySelectorAll("span")[0],l=o.querySelectorAll("span")[1],r=o.querySelector(".jodit_form-container"),s=o.querySelector(".jodit_form-table-creator-box"),_=o.querySelector(".jodit_form-options"),c=[];return r.addEventListener("mousemove",function(e,t){var o=e.target;if(o&&"DIV"===o.tagName){for(var i=void 0===t||isNaN(t)?parseInt(o.getAttribute("data-index")||"0",10):t||0,n=Math.ceil((i+1)/g),r=i%g+1,s=0;s<c.length;s+=1)c[s].className=r<s%g+1||n<Math.ceil((s+1)/g)?"":"hovered";l.textContent=""+r,a.textContent=""+n;}}),v.events.on(r,"touchstart mousedown",function(e){var t=e.target;if(e.preventDefault(),e.stopImmediatePropagation(),"DIV"===t.tagName){var o=parseInt(t.getAttribute("data-index")||"0",10),i=Math.ceil((o+1)/g),n=o%g+1,r=v.create.inside,s=r.element("tbody"),a=r.element("table");a.appendChild(s),a.style.width="100%";for(var l,c,d=null,u=1;u<=i;u+=1){l=r.element("tr");for(var f=1;f<=n;f+=1)c=r.element("td"),d=d||c,c.appendChild(r.element("br")),l.appendChild(r.text("\n")),l.appendChild(r.text("\t")),l.appendChild(c);s.appendChild(r.text("\n")),s.appendChild(l);}var p=v.selection.current();if(p&&v.selection.isCollapsed()){var h=b.Dom.closest(p,function(e){return b.Dom.isBlock(e,v.editorWindow)},v.editor);h&&h!==v.editor&&!h.nodeName.match(/^TD|TH|TBODY|TABLE|THEADER|TFOOTER$/)&&v.selection.setCursorAfter(h);}y.$$("input[type=checkbox]:checked",_).forEach(function(e){e.value.split(/[\s]+/).forEach(function(e){a.classList.add(e);});}),v.selection.insertNode(r.text("\n")),v.selection.insertNode(a,!1),d&&(v.selection.setCursorIn(d),y.scrollIntoView(d,v.editor,v.editorDocument)),m();}}),t&&t.parentToolbar&&v.events.off(t.parentToolbar.container,"afterOpenPopup.tableGenerator").on(t.parentToolbar.container,"afterOpenPopup.tableGenerator",function(){!function(){var e=n*g;if(e<c.length){for(var t=e;t<c.length;t+=1)b.Dom.safeRemove(c[t]),delete c[t];c.length=e;}for(t=0;t<e;t+=1)if(!c[t]){var o=v.create.div();o.setAttribute("data-index",""+t),c.push(o);}c.forEach(function(e){r.appendChild(e);});var i=(c[0].offsetWidth||18)*g;r.style.width=i+"px",s.style.width=i+_.offsetWidth+1+"px";}(),c[0]&&(c[0].className="hovered");},"",!0),o},tooltip:"Insert table"};var a,l=(i.__extends(p,a=r.Plugin),p.isCell=function(e){return !!e&&/^TD|TH$/i.test(e.nodeName)},p.prototype.showResizer=function(){clearTimeout(this.hideTimeout),this.__resizerHandler.style.display="block";},p.prototype.hideResizer=function(){var e=this;clearTimeout(this.hideTimeout),this.hideTimeout=s.setTimeout(function(){e.__resizerHandler.style.display="none";},this.jodit.defaultTimeout);},p.prototype.__deSelectAll=function(e,t){var o=f.Table.getAllSelectedCells(e||this.jodit.editor);o.length&&o.forEach(function(e){t&&t===e||f.Table.restoreSelection(e);});},p.prototype.__setWorkCell=function(e,t){void 0===t&&(t=null),this.__wholeTable=t,this.__workCell=e,this.__workTable=b.Dom.up(e,function(e){return e&&"TABLE"===e.nodeName},this.jodit.editor);},p.prototype.__calcResizerPosition=function(e,t,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var n=y.offset(t,this.jodit,this.jodit.editorDocument);if(c.NEARBY<o&&c.NEARBY<n.width-o)this.hideResizer();else{var r=y.offset(this.__resizerHandler.parentNode||this.jodit.ownerDocument.documentElement,this.jodit,this.jodit.ownerDocument,!0),s=y.offset(e,this.jodit,this.jodit.editorDocument);if(this.__resizerHandler.style.left=(c.NEARBY<o?n.left+n.width:n.left)-r.left+i+"px",this.__resizerHandler.style.height=s.height+"px",this.__resizerHandler.style.top=s.top-r.top+"px",this.showResizer(),c.NEARBY<o){var a=b.Dom.next(t,p.isCell,t.parentNode);this.__setWorkCell(t,!!a&&null);}else{var l=b.Dom.prev(t,p.isCell,t.parentNode);l?this.__setWorkCell(l):this.__setWorkCell(t,!0);}}},p.prototype.observe=function(c){var d,u=this;c[this.__key]=!0,this.jodit.events.on(c,"mousedown.table touchstart.table",function(e){if(!u.jodit.options.readonly){var t=b.Dom.up(e.target,p.isCell,c);t&&t instanceof u.jodit.editorWindow.HTMLElement&&(t.firstChild||t.appendChild(u.jodit.editorDocument.createElement("br")),f.Table.addSelected(d=t),u.__selectMode=!0);}}).on(c,"mouseleave.table",function(e){u.__resizerHandler&&u.__resizerHandler!==e.relatedTarget&&u.hideResizer();}).on(c,"mousemove.table touchmove.table",function(e){if(!u.jodit.options.readonly&&!u.__drag&&!u.jodit.isLockedNotBy(u.__key)){var t=b.Dom.up(e.target,p.isCell,c);if(t)if(u.__selectMode){if(t!==d){u.jodit.lock(u.__key);var o=u.jodit.selection.sel;o&&o.removeAllRanges(),e.preventDefault&&e.preventDefault();}u.__deSelectAll(c);for(var i=f.Table.getSelectedBound(c,[t,d]),n=f.Table.formalMatrix(c),r=i[0][0];r<=i[1][0];r+=1)for(var s=i[0][1];s<=i[1][1];s+=1)f.Table.addSelected(n[r][s]);var a=n[i[1][0]][i[1][1]],l=n[i[0][0]][i[0][1]];u.jodit.events.fire("showPopup",c,function(){var e=y.offset(l,u.jodit,u.jodit.editorDocument),t=y.offset(a,u.jodit,u.jodit.editorDocument);return {left:e.left,top:e.top,width:t.left-e.left+t.width,height:t.top-e.top+t.height}}),e.stopPropagation();}else u.__calcResizerPosition(c,t,e.offsetX);}}),this.__addResizer();},p.prototype.afterInit=function(r){var s=this;r.options.useTableProcessor&&r.events.on(this.jodit.ownerWindow,"mouseup.table touchend.table",function(){if((s.__selectMode||s.__drag)&&(s.__selectMode=!1,s.jodit.unlock()),s.__resizerHandler&&s.__drag){if(s.__drag=!1,s.__resizerHandler.classList.remove("jodit_table_resizer-moved"),null===s.__wholeTable){var e=[];f.Table.setColumnWidthByDelta(s.__workTable,f.Table.formalCoordinate(s.__workTable,s.__workCell,!0)[1],s.__resizerDelta,!0,e);var t=b.Dom.next(s.__workCell,p.isCell,s.__workCell.parentNode);f.Table.setColumnWidthByDelta(s.__workTable,f.Table.formalCoordinate(s.__workTable,t)[1],-s.__resizerDelta,!1,e);}else{var o=s.__workTable.offsetWidth,i=y.getContentWidth(s.__workTable.parentNode,s.jodit.editorWindow);if(s.__wholeTable){var n=parseInt(s.jodit.editorWindow.getComputedStyle(s.__workTable).marginLeft||"0",10);s.__workTable.style.width=(o-s.__resizerDelta)/i*100+"%",s.__workTable.style.marginLeft=(n+s.__resizerDelta)/i*100+"%";}else s.__workTable.style.width=(o+s.__resizerDelta)/i*100+"%";}r.setEditorValue(),r.selection.focus();}}).on(this.jodit.ownerWindow,"scroll.table",function(){if(s.__drag){var e=b.Dom.up(s.__workCell,function(e){return e&&"TABLE"===e.nodeName},r.editor);if(e){var t=e.getBoundingClientRect();s.__resizerHandler.style.top=t.top+"px";}}}).on(this.jodit.ownerWindow,"mousedown.table touchend.table",function(e){var t=b.Dom.closest(e.originalEvent.target,"TD|TH",s.jodit.editor),o=null;t instanceof s.jodit.editorWindow.HTMLTableCellElement&&(o=b.Dom.closest(t,"table",s.jodit.editor)),o?s.__deSelectAll(o,t instanceof s.jodit.editorWindow.HTMLTableCellElement&&t):s.__deSelectAll();}).on("afterGetValueFromEditor.table",function(e){var t=RegExp("([s]*)"+c.JODIT_SELECTED_CELL_MARKER+'="1"',"g");t.test(e.value)&&(e.value=e.value.replace(t,""));}).on("change.table afterCommand.table afterSetMode.table",function(){y.$$("table",r.editor).forEach(function(e){e[s.__key]||s.observe(e);});}).on("beforeSetMode.table",function(){f.Table.getAllSelectedCells(r.editor).forEach(function(e){f.Table.restoreSelection(e),f.Table.normalizeTable(b.Dom.closest(e,"table",r.editor));});}).on("keydown.table",function(e){e.which===c.KEY_TAB&&y.$$("table",r.editor).forEach(function(e){s.__deSelectAll(e);});}).on("beforeCommand.table",this.onExecCommand.bind(this));},p.prototype.beforeDestruct=function(e){e.events&&(e.events.off(this.jodit.ownerWindow,".table"),e.events.off(".table"));},p);function p(){var s=null!==a&&a.apply(this,arguments)||this;return s.__key="table_processor_observer",s.__selectMode=!1,s.__resizerDelta=0,s.__drag=!1,s.__addResizer=function(){if(!s.__resizerHandler&&(s.__resizerHandler=s.jodit.container.querySelector(".jodit_table_resizer"),!s.__resizerHandler)){s.__resizerHandler=s.jodit.create.div("jodit_table_resizer");var r=0;s.jodit.events.on(s.__resizerHandler,"mousedown.table touchstart.table",function(e){s.__drag=!0,r=e.clientX,s.jodit.lock(s.__key),s.__resizerHandler.classList.add("jodit_table_resizer-moved");var i,t=s.__workTable.getBoundingClientRect();if(s.__minX=0,s.__maxX=1e6,null!==s.__wholeTable)t=s.__workTable.parentNode.getBoundingClientRect(),s.__minX=t.left,s.__maxX=t.left+t.width;else{var n=f.Table.formalCoordinate(s.__workTable,s.__workCell,!0);f.Table.formalMatrix(s.__workTable,function(e,t,o){n[1]===o&&(i=e.getBoundingClientRect(),s.__minX=Math.max(i.left+c.NEARBY/2,s.__minX)),n[1]+1===o&&(i=e.getBoundingClientRect(),s.__maxX=Math.min(i.left+i.width-c.NEARBY/2,s.__maxX));});}return !1}).on(s.__resizerHandler,"mouseenter.table",function(){clearTimeout(s.hideTimeout);}).on(s.jodit.editorWindow,"mousemove.table touchmove.table",function(e){if(s.__drag){var t=e.clientX,o=y.offset(s.__resizerHandler.parentNode||s.jodit.ownerDocument.documentElement,s.jodit,s.jodit.ownerDocument,!0);t<s.__minX&&(t=s.__minX),s.__maxX<t&&(t=s.__maxX),s.__resizerDelta=t-r+(s.jodit.options.iframe?o.left:0),s.__resizerHandler.style.left=t-(s.jodit.options.iframe?0:o.left)+"px";var i=s.jodit.selection.sel;i&&i.removeAllRanges(),e.preventDefault&&e.preventDefault();}}),s.jodit.workplace.appendChild(s.__resizerHandler);}},s.onExecCommand=function(e){if(/table(splitv|splitg|merge|empty|bin|binrow|bincolumn|addcolumn|addrow)/.test(e)){e=e.replace("table","");var t=f.Table.getAllSelectedCells(s.jodit.editor);if(t.length){var o=t.shift();if(!o)return;var i=b.Dom.closest(o,"table",s.jodit.editor);switch(e){case"splitv":f.Table.splitVertical(i);break;case"splitg":f.Table.splitHorizontal(i);break;case"merge":f.Table.mergeSelected(i);break;case"empty":f.Table.getAllSelectedCells(s.jodit.editor).forEach(function(e){return e.innerHTML=""});break;case"bin":b.Dom.safeRemove(i);break;case"binrow":f.Table.removeRow(i,o.parentNode.rowIndex);break;case"bincolumn":f.Table.removeColumn(i,o.cellIndex);break;case"addcolumnafter":case"addcolumnbefore":f.Table.appendColumn(i,o.cellIndex,"addcolumnafter"===e);break;case"addrowafter":case"addrowbefore":f.Table.appendRow(i,o.parentNode,"addrowafter"===e);}}return !1}},s}t.TableProcessor=l;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var f=o(2),p=o(0),h=o(28);t.tableKeyboardNavigation=function(u){u.events.on("keydown",function(t){var e,i;if((t.which===f.KEY_TAB||t.which===f.KEY_LEFT||t.which===f.KEY_RIGHT||t.which===f.KEY_UP||t.which===f.KEY_DOWN)&&(e=u.selection.current(),i=p.Dom.up(e,function(e){return e&&e.nodeName&&/^td|th$/i.test(e.nodeName)},u.editor))){var o=u.selection.range;if(t.which===f.KEY_TAB||e===i||(t.which!==f.KEY_LEFT&&t.which!==f.KEY_UP||!(p.Dom.prev(e,function(e){return t.which===f.KEY_UP?e&&"BR"===e.nodeName:!!e},i)||t.which!==f.KEY_UP&&e.nodeType===Node.TEXT_NODE&&0!==o.startOffset))&&(t.which!==f.KEY_RIGHT&&t.which!==f.KEY_DOWN||!(p.Dom.next(e,function(e){return t.which===f.KEY_DOWN?e&&"BR"===e.nodeName:!!e},i)||t.which!==f.KEY_DOWN&&e.nodeType===Node.TEXT_NODE&&e.nodeValue&&o.startOffset!==e.nodeValue.length))){var n=p.Dom.up(i,function(e){return e&&/^table$/i.test(e.nodeName)},u.editor),r=null;switch(t.which){case f.KEY_TAB:case f.KEY_LEFT:var s=t.which===f.KEY_LEFT||t.shiftKey?"prev":"next";(r=p.Dom[s](i,function(e){return e&&/^td|th$/i.test(e.tagName)},n))||(h.Table.appendRow(n,"next"!=s&&n.querySelector("tr"),"next"==s),r=p.Dom[s](i,function(e){return e&&p.Dom.isCell(e,u.editorWindow)},n));break;case f.KEY_UP:case f.KEY_DOWN:var a=0,l=0,c=h.Table.formalMatrix(n,function(e,t,o){e===i&&(a=t,l=o);});t.which===f.KEY_UP?void 0!==c[a-1]&&(r=c[a-1][l]):void 0!==c[a+1]&&(r=c[a+1][l]);}if(r){if(r.firstChild)t.which===f.KEY_TAB?u.selection.select(r,!0):u.selection.setCursorIn(r,t.which===f.KEY_RIGHT||t.which===f.KEY_DOWN);else{var d=u.editorDocument.createElement("br");r.appendChild(d),u.selection.setCursorBefore(d);}return !1}}}});};},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),u=o(2),r=o(2),p=o(0),s=o(6),a=o(7),l=o(5),h=o(9);n.Config.prototype.useSearch=!0;var c,d=(i.__extends(v,c=a.Plugin),v.getSomePartOfStringIndex=function(e,t,o){return void 0===o&&(o=!0),this.findSomePartOfString(e,t,o,!0)},v.findSomePartOfString=function(e,t,o,i){void 0===o&&(o=!0),void 0===i&&(i=!1),e=h.trim(e.toLowerCase().replace(u.SPACE_REG_EXP," ")),t=t.toLowerCase();for(var n=o?0:t.length-1,r=o?0:e.length-1,s=0,a=null,l=o?1:-1,c=[];void 0!==t[n];n+=l){var d=e[r]===t[n];if(d||null!==a&&u.SPACE_REG_EXP.test(t[n])?(null!==a&&o||(a=n),c.push(t[n]),d&&(s+=1,r+=l)):(a=null,s=c.length=0,r=o?0:e.length-1),s===e.length)return !i||a}return i?null!=a&&a:!!c.length&&(o?c.join(""):c.reverse().join(""))},v.prototype.boundAlreadyWas=function(t,e){return e.some(function(e){return e.startContainer===t.startContainer&&e.endContainer===t.endContainer&&e.startOffset===t.startOffset&&e.endOffset===t.endOffset},!1)},v.prototype.tryScrollToElement=function(e){var t=p.Dom.closest(e,function(e){return e&&e.nodeType===Node.ELEMENT_NODE},this.jodit.editor);(t=t||p.Dom.prev(e,function(e){return e&&e.nodeType===Node.ELEMENT_NODE},this.jodit.editor))&&t!==this.jodit.editor&&t.scrollIntoView();},v.prototype.afterInit=function(i){var t=this;if(i.options.useSearch){var n=this;n.searchBox=i.create.fromHTML(n.template);var e=n.searchBox.querySelector.bind(n.searchBox);n.queryInput=e("input.jodit_search-query"),n.replaceInput=e("input.jodit_search-replace"),n.closeButton=e(".jodit_search_buttons-cancel"),n.nextButton=e(".jodit_search_buttons-next"),n.prevButton=e(".jodit_search_buttons-prev"),n.replaceButton=e(".jodit_search_buttons-replace"),n.counterBox=e(".jodit_search_counts span"),i.workplace.appendChild(this.searchBox),i.events.on(n.closeButton,"click",this.close).on(n.queryInput,"mousedown",function(){i.selection.isFocused()&&(i.selection.removeMarkers(),n.selInfo=i.selection.save());}).on(n.replaceButton,"click",function(e){n.findAndReplace(i.selection.current()||i.editor.firstChild,n.queryInput.value),t.updateCounters(),e.preventDefault(),e.stopImmediatePropagation();}).on([n.nextButton,n.prevButton],"click",function(e){i.events.fire(n.nextButton===this?"searchNext":"searchPrevious"),e.preventDefault(),e.stopImmediatePropagation();}).on(this.queryInput,"keydown",l.debounce(function(e){switch(e.which){case u.KEY_ENTER:e.preventDefault(),e.stopImmediatePropagation(),i.events.fire("searchNext")&&t.close();break;default:t.updateCounters();}},this.jodit.defaultTimeout)).on(this.jodit.container,"keydown.search",function(e){if(i.getRealMode()===r.MODE_WYSIWYG)switch(e.which){case u.KEY_ESC:t.close();break;case u.KEY_F3:n.queryInput.value&&(i.events.fire(e.shiftKey?"searchPrevious":"searchNext"),e.preventDefault());}}).on("beforeSetMode.search",function(){t.close();}).on("keydown.search mousedown.search",function(){t.selInfo&&(i.selection.removeMarkers(),t.selInfo=null),t.isOpened&&(t.current=t.jodit.selection.current(),t.updateCounters());}).on("searchNext.search searchPrevious.search",function(){return n.findAndSelect(i.selection.current()||i.editor.firstChild,n.queryInput.value,"searchNext"===i.events.current[i.events.current.length-1])}).on("search.search",function(e,t){void 0===t&&(t=!0),i.execCommand("search",e,t);}),i.registerCommand("search",{exec:function(e,t,o){return void 0===o&&(o=!0),n.findAndSelect(i.selection.current()||i.editor.firstChild,t||"",o),!1}}),i.registerCommand("openSearchDialog",{exec:function(){return n.open(),!1},hotkeys:["ctrl+f","cmd+f"]}),i.registerCommand("openReplaceDialog",{exec:function(){return i.options.readonly||n.open(!0),!1},hotkeys:["ctrl+h","cmd+h"]});}},v.prototype.beforeDestruct=function(e){p.Dom.safeRemove(this.searchBox),e.events&&e.events.off(".search"),e.events&&e.events.off(e.container,".search");},v);function v(){var f=null!==c&&c.apply(this,arguments)||this;return f.template='<div class="jodit_search"><div class="jodit_search_box"><div class="jodit_search_inputs"><input tabindex="0" class="jodit_search-query" placeholder="'+f.jodit.i18n("Search for")+'" type="text"/><input tabindex="0" class="jodit_search-replace" placeholder="'+f.jodit.i18n("Replace with")+'" type="text"/></div><div class="jodit_search_counts"><span>0/0</span></div><div class="jodit_search_buttons"><button tabindex="0" type="button" class="jodit_search_buttons-next">'+s.ToolbarIcon.getIcon("angle-down")+'</button><button tabindex="0" type="button" class="jodit_search_buttons-prev">'+s.ToolbarIcon.getIcon("angle-up")+'</button><button tabindex="0" type="button" class="jodit_search_buttons-cancel">'+s.ToolbarIcon.getIcon("cancel")+'</button><button tabindex="0" type="button" class="jodit_search_buttons-replace">'+f.jodit.i18n("Replace")+"</button></div></div></div>",f.isOpened=!1,f.selInfo=null,f.current=!1,f.eachMap=function(e,t,o){p.Dom.findWithCurrent(e,function(e){return !!e&&t(e)},f.jodit.editor,o?"nextSibling":"previousSibling",o?"firstChild":"lastChild");},f.updateCounters=function(){if(f.isOpened){f.counterBox.style.display=f.queryInput.value.length?"inline-block":"none";var e=f.calcCounts(f.queryInput.value,f.jodit.selection.range);f.counterBox.textContent=e.join("/");}},f.calcCounts=function(e,t){void 0===t&&(t=!1);for(var o=[],i=0,n=0,r=!1,s=f.jodit.editor.firstChild;s&&e.length;)if(r=f.find(s,e,!0,0,r||f.jodit.editorDocument.createRange())){if(f.boundAlreadyWas(r,o))break;o.push(r),s=r.startContainer,n+=1,t&&f.boundAlreadyWas(t,[r])&&(i=n);}else s=null;return [i,n]},f.findAndReplace=function(e,t){var o=f.find(e,t,!0,0,f.jodit.selection.range);if(o&&o.startContainer&&o.endContainer){var i=f.jodit.editorDocument.createRange();try{if(o&&o.startContainer&&o.endContainer){i.setStart(o.startContainer,o.startOffset),i.setEnd(o.endContainer,o.endOffset),i.deleteContents();var n=f.jodit.editorDocument.createTextNode(f.replaceInput.value);i.insertNode(n),f.jodit.selection.select(n),f.tryScrollToElement(n);}}catch(e){}return !0}return !1},f.findAndSelect=function(e,t,o){var i=f.find(e,t,o,0,f.jodit.selection.range);if(i&&i.startContainer&&i.endContainer){var n=f.jodit.editorDocument.createRange();try{n.setStart(i.startContainer,i.startOffset),n.setEnd(i.endContainer,i.endOffset),f.jodit.selection.selectRange(n);}catch(e){}return f.tryScrollToElement(i.startContainer),f.current=i.startContainer,f.updateCounters(),!0}return !1},f.find=function(e,s,a,l,c){if(e&&s.length){var d="",u={startContainer:null,startOffset:null,endContainer:null,endOffset:null};if(f.eachMap(e,function(e){if(e.nodeType===Node.TEXT_NODE&&null!==e.nodeValue&&e.nodeValue.length){var t=e.nodeValue;a||e!==c.startContainer?a&&e===c.endContainer&&(t=l?t.substr(0,c.startOffset):t.substr(c.endOffset)):t=l?t.substr(c.endOffset):t.substr(0,c.startOffset);var o=a?d+t:t+d,i=v.findSomePartOfString(s,o,a);if(!1!==i){var n=v.findSomePartOfString(s,t,a);!0===n?n=h.trim(s):!1===n&&!0===(n=v.findSomePartOfString(t,s,a))&&(n=h.trim(t));var r=v.getSomePartOfStringIndex(s,t,a)||0;if((a&&!l||!a&&l)&&0<e.nodeValue.length-t.length&&(r+=e.nodeValue.length-t.length),null===u.startContainer&&(u.startContainer=e,u.startOffset=r),!0===i)return u.endContainer=e,u.endOffset=r,u.endOffset+=n.length,!0;d=o;}else d="",u={startContainer:null,startOffset:null,endContainer:null,endOffset:null};}else p.Dom.isBlock(e,f.jodit.editorWindow)&&""!==d&&(d=a?d+" ":" "+d);return !1},a),u.startContainer&&u.endContainer)return u;if(!l)return f.current=a?f.jodit.editor.firstChild:f.jodit.editor.lastChild,f.find(f.current,s,a,l+1,c)}return !1},f.open=function(e){void 0===e&&(e=!1),f.isOpened||(f.searchBox.classList.add("jodit_search-active"),f.isOpened=!0),f.jodit.events.fire("hidePopup"),f.searchBox.classList.toggle("jodit_search-and-replace",e),f.current=f.jodit.selection.current(),f.selInfo=f.jodit.selection.save();var t=""+(f.jodit.selection.sel||"");t&&(f.queryInput.value=t),f.updateCounters(),t?f.queryInput.select():f.queryInput.focus();},f.close=function(){f.isOpened&&(f.selInfo&&(f.jodit.selection.restore(f.selInfo),f.selInfo=null),f.searchBox.classList.remove("jodit_search-active"),f.isOpened=!1);},f}t.search=d;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(2),s=o(7),a=o(10),l=o(23),c=o(0);n.Config.prototype.toolbarSticky=!0,n.Config.prototype.toolbarDisableStickyForMobile=!0,n.Config.prototype.toolbarStickyOffset=0;var d,u=(i.__extends(f,d=s.Plugin),f.prototype.isMobile=function(){return this.jodit&&this.jodit.options&&this.jodit.container&&this.jodit.container.offsetWidth<=this.jodit.options.sizeSM},f.prototype.afterInit=function(i){var n=this;i.events.on(i.ownerWindow,"scroll wheel mousewheel resize",function(){var e=i.ownerWindow.pageYOffset||i.ownerDocument.documentElement&&i.ownerDocument.documentElement.scrollTop||0,t=l.offset(i.container,i,i.ownerDocument,!0),o=i.getMode()===r.MODE_WYSIWYG&&t.top<e+i.options.toolbarStickyOffset&&e+i.options.toolbarStickyOffset<t.top+t.height&&!(i.options.toolbarDisableStickyForMobile&&n.isMobile());i.options.toolbarSticky&&i.options.toolbar&&(o?n.addSticky(i.toolbar.container):n.removeSticky(i.toolbar.container)),i.events.fire("toggleSticky",o);});},f.prototype.beforeDestruct=function(e){c.Dom.safeRemove(this.dummyBox);},f);function f(){var t=null!==d&&d.apply(this,arguments)||this;return t.isToolbarSticked=!1,t.createDummy=function(e){t.dummyBox||(t.dummyBox=t.jodit.create.div(),t.dummyBox.classList.add("jodit_sticky-dummy_toolbar"),t.jodit.container.insertBefore(t.dummyBox,e));},t.addSticky=function(e){t.isToolbarSticked||(t.createDummy(e),t.jodit.container.classList.add("jodit_sticky"),t.isToolbarSticked=!0),a.css(e,{top:t.jodit.options.toolbarStickyOffset,width:t.jodit.container.offsetWidth}),a.css(t.dummyBox,{height:e.offsetHeight});},t.removeSticky=function(e){t.isToolbarSticked&&(a.css(e,{width:"",top:""}),t.jodit.container.classList.remove("jodit_sticky"),t.isToolbarSticked=!1);},t}t.sticky=u;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(2),s=o(5),a=o(7),l=o(0);n.Config.prototype.showCharsCounter=!0,n.Config.prototype.showWordsCounter=!0;var c,d=(i.__extends(u,c=a.Plugin),u.prototype.afterInit=function(){this.jodit.options.showCharsCounter&&(this.charCounter=this.jodit.create.span(),this.jodit.statusbar.append(this.charCounter,!0)),this.jodit.options.showWordsCounter&&(this.wordCounter=this.jodit.create.span(),this.jodit.statusbar.append(this.wordCounter,!0)),this.jodit.events.on("change",this.calc),this.calc();},u.prototype.beforeDestruct=function(){l.Dom.safeRemove(this.charCounter),l.Dom.safeRemove(this.wordCounter),this.charCounter=null,this.wordCounter=null;},u);function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.calc=s.throttle(function(){var e=t.jodit.getEditorText();t.jodit.options.showCharsCounter&&t.charCounter&&(t.charCounter.textContent=t.jodit.i18n("Chars: %d",e.replace(r.SPACE_REG_EXP,"").length)),t.jodit.options.showWordsCounter&&t.wordCounter&&(t.wordCounter.textContent=t.jodit.i18n("Words: %d",e.replace(r.INVISIBLE_SPACE_REG_EXP,"").split(r.SPACE_REG_EXP).filter(function(e){return e.length}).length));},t.jodit.defaultTimeout),t}t.stat=d;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(2),a=o(39),l=o(0),c=o(5),d=o(11),s=o(7),u=o(26),f=o(9);n.Config.prototype.controls.selectall={icon:"select-all",command:"selectall",tooltip:"Select all"},n.Config.prototype.showXPathInStatusbar=!0;var p,h=(i.__extends(v,p=s.Plugin),v.prototype.afterInit=function(){var e=this;this.jodit.options.showXPathInStatusbar&&(this.container=this.jodit.create.element("ul"),this.container.classList.add("jodit_xpath"),this.jodit.statusbar.append(this.container),this.jodit.events.on("mouseup.xpath change.xpath keydown.xpath changeSelection.xpath",this.calcPath).on("afterSetMode.xpath afterInit.xpath",function(){e.jodit.getRealMode()===r.MODE_WYSIWYG?e.calcPath():(e.container&&(e.container.innerHTML=r.INVISIBLE_SPACE),e.appendSelectAll());}),this.calcPath());},v.prototype.beforeDestruct=function(){this.jodit&&this.jodit.events&&this.jodit.events.off(".xpath"),this.removeSelectAll(),this.menu&&this.menu.destruct(),l.Dom.safeRemove(this.container),this.menu=null,this.container=null;},v);function v(){var s=null!==p&&p.apply(this,arguments)||this;return s.onContext=function(e,t){return s.menu||(s.menu=new a.ContextMenu(s.jodit)),s.menu.show(t.clientX,t.clientY,[{icon:"bin",title:e===s.jodit.editor?"Clear":"Remove",exec:function(){e!==s.jodit.editor?l.Dom.safeRemove(e):s.jodit.value="",s.jodit.setEditorValue();}},{icon:"select-all",title:"Select",exec:function(){s.jodit.selection.select(e);}}]),!1},s.onSelectPath=function(e,t){s.jodit.selection.focus();var o=t.target.getAttribute("data-path")||"/";if("/"===o)return s.jodit.execCommand("selectall"),!1;try{var i=s.jodit.editorDocument.evaluate(o,s.jodit.editor,null,XPathResult.ANY_TYPE,null).iterateNext();if(i)return s.jodit.selection.select(i),!1}catch(e){}return s.jodit.selection.select(e),!1},s.tpl=function(e,t,o,i){var n=s.jodit.create.fromHTML('<li><a role="button" data-path="'+t+'" href="javascript:void(0)" title="'+i+'" tabindex="-1">'+f.trim(o)+"</a></li>"),r=n.firstChild;return s.jodit.events.on(r,"click",s.onSelectPath.bind(s,e)).on(r,"contextmenu",s.onContext.bind(s,e)),n},s.removeSelectAll=function(){s.selectAllButton&&(s.selectAllButton.destruct(),delete s.selectAllButton);},s.appendSelectAll=function(){s.removeSelectAll(),s.selectAllButton=new u.ToolbarButton(s.jodit,i.__assign({name:"selectall"},s.jodit.options.controls.selectall)),s.container&&s.container.insertBefore(s.selectAllButton.container,s.container.firstChild);},s.calcPathImd=function(){if(!s.isDestructed){var t,o,i,e=s.jodit.selection.current();s.container&&(s.container.innerHTML=r.INVISIBLE_SPACE),e&&l.Dom.up(e,function(e){e&&s.jodit.editor!==e&&e.nodeType!==Node.TEXT_NODE&&(t=e.nodeName.toLowerCase(),o=d.getXPathByElement(e,s.jodit.editor).replace(/^\//,""),i=s.tpl(e,o,t,s.jodit.i18n("Select %s",t)),s.container&&s.container.insertBefore(i,s.container.firstChild));},s.jodit.editor),s.appendSelectAll();}},s.calcPath=c.debounce(s.calcPathImd,2*s.jodit.defaultTimeout),s.container=null,s.menu=null,s}t.xpath=h;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=o(3),r=o(4),s=o(7),a=o(0);n.Config.prototype.draggableTags=["img","a","jodit-media","jodit"];var l,c=(i.__extends(d,l=s.Plugin),d.prototype.afterInit=function(){this.dragList=this.jodit.options.draggableTags?r.splitArray(this.jodit.options.draggableTags).filter(function(e){return e}).map(function(e){return e.toLowerCase()}):[],this.dragList.length&&this.jodit.events.on(this.jodit.editor,"mousemove touchmove",this.onDrag).on(this.jodit.editor,"mousedown touchstart dragstart",this.onDragStart).on("mouseup touchend",this.onDrop).on(window,"mouseup touchend",this.onDragEnd);},d.prototype.beforeDestruct=function(){this.onDragEnd();},d);function d(){var i=null!==l&&l.apply(this,arguments)||this;return i.dragList=[],i.isCopyMode=!1,i.draggable=null,i.wasMoved=!1,i.timeout=0,i.onDrag=r.throttle(function(e){i.draggable&&(i.wasMoved=!0,i.jodit.events.fire("hidePopup hideResizer"),i.draggable.parentNode||i.jodit.ownerDocument.body.appendChild(i.draggable),r.css(i.draggable,{left:e.clientX+20,top:e.clientY+20}),i.jodit.selection.insertCursorAtPoint(e.clientX,e.clientY));},i.jodit.defaultTimeout),i.onDragStart=function(t){var e=t.target,o=null;if(i.dragList.length){for(;~i.dragList.indexOf(e.nodeName.toLowerCase())&&(o&&(e.firstChild!==o||e.lastChild!==o)||(o=e)),(e=e.parentNode)&&e!==i.jodit.editor;);o&&(i.isCopyMode=r.ctrlKey(t),i.onDragEnd(),i.timeout=r.setTimeout(function(e){e&&(i.draggable=e.cloneNode(!0),r.dataBind(i.draggable,"target",e),r.css(i.draggable,{"z-index":1e14,"pointer-events":"none",position:"fixed",display:"inlin-block",left:t.clientX,top:t.clientY,width:e.offsetWidth,height:e.offsetHeight}));},i.jodit.defaultTimeout,o),t.preventDefault());}},i.onDragEnd=function(){window.clearTimeout(i.timeout),i.draggable&&(a.Dom.safeRemove(i.draggable),i.draggable=null,i.wasMoved=!1);},i.onDrop=function(){if(i.draggable&&i.wasMoved){var e=r.dataBind(i.draggable,"target");i.onDragEnd(),i.isCopyMode&&(e=e.cloneNode(!0)),i.jodit.selection.insertNode(e,!0,!1),"IMG"===e.nodeName&&i.jodit.events&&i.jodit.events.fire("afterInsertImage",e),i.jodit.events.fire("synchro");}else i.onDragEnd();},i}t.DragAndDropElement=c;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=o(1),r=o(2),s=o(0),l=o(4),a=o(7),c=(n.__extends(d,i=a.Plugin),d.prototype.afterInit=function(){this.jodit.events.on(window,"dragover",this.onDrag).on([window,this.jodit.editorDocument,this.jodit.editor],"dragstart",this.onDragStart).on("drop",this.onDrop).on(window,"dragend drop mouseup",this.onDragEnd);},d.prototype.beforeDestruct=function(){this.onDragEnd();},d);function d(){var a=null!==i&&i.apply(this,arguments)||this;return a.isFragmentFromEditor=!1,a.isCopyMode=!1,a.startDragPoint={x:0,y:0},a.draggable=null,a.bufferRange=null,a.onDragEnd=function(){a.draggable&&(s.Dom.safeRemove(a.draggable),a.draggable=null),a.isCopyMode=!1;},a.onDrag=function(e){a.draggable&&(a.draggable.parentNode||a.jodit.ownerDocument.body.appendChild(a.draggable),a.jodit.events.fire("hidePopup"),l.css(a.draggable,{left:e.clientX+20,top:e.clientY+20}),a.jodit.selection.insertCursorAtPoint(e.clientX,e.clientY),e.preventDefault(),e.stopPropagation());},a.onDrop=function(e){if(!e.dataTransfer||!e.dataTransfer.files||!e.dataTransfer.files.length){if(!a.isFragmentFromEditor&&!a.draggable)return a.jodit.events.fire("paste",e),e.preventDefault(),e.stopPropagation(),!1;var t=a.jodit.selection.sel,o=a.bufferRange||(t&&t.rangeCount?t.getRangeAt(0):null),i=null;if(!a.draggable&&o)i=a.isCopyMode?o.cloneContents():o.extractContents();else if(a.draggable)if(a.isCopyMode){var n="1"===a.draggable.getAttribute("data-is-file")?["a","href"]:["img","src"],r=n[0],s=n[1];(i=a.jodit.editorDocument.createElement(r)).setAttribute(s,a.draggable.getAttribute("data-src")||a.draggable.getAttribute("src")||""),"a"===r&&(i.textContent=i.getAttribute(s)||"");}else i=l.dataBind(a.draggable,"target");else a.getText(e)&&(i=a.jodit.create.inside.fromHTML(a.getText(e)));t&&t.removeAllRanges(),a.jodit.selection.insertCursorAtPoint(e.clientX,e.clientY),i&&(a.jodit.selection.insertNode(i,!1,!1),o&&i.firstChild&&i.lastChild&&(o.setStartBefore(i.firstChild),o.setEndAfter(i.lastChild),a.jodit.selection.selectRange(o),a.jodit.events.fire("synchro")),"IMG"===i.nodeName&&a.jodit.events&&a.jodit.events.fire("afterInsertImage",i)),e.preventDefault(),e.stopPropagation();}a.isFragmentFromEditor=!1;},a.onDragStart=function(e){var t=e.target;if(a.onDragEnd(),a.isFragmentFromEditor=s.Dom.isOrContains(a.jodit.editor,t,!0),a.isCopyMode=!a.isFragmentFromEditor||l.ctrlKey(e),a.isFragmentFromEditor){var o=a.jodit.selection.sel,i=o&&o.rangeCount?o.getRangeAt(0):null;i&&(a.bufferRange=i.cloneRange());}else a.bufferRange=null;a.startDragPoint.x=e.clientX,a.startDragPoint.y=e.clientY,t.nodeType===Node.ELEMENT_NODE&&t.matches(".jodit_filebrowser_files_item")&&(t=t.querySelector("img")),"IMG"===t.nodeName&&(a.draggable=t.cloneNode(!0),l.dataBind(a.draggable,"target",t),l.css(a.draggable,{"z-index":1e14,"pointer-events":"none",position:"fixed",display:"inlin-block",left:a.startDragPoint.x,top:a.startDragPoint.y,width:t.offsetWidth,height:t.offsetHeight}));},a.getDataTransfer=function(e){return e.dataTransfer||new DataTransfer},a.getText=function(e){var t=a.getDataTransfer(e);return t.getData(r.TEXT_HTML)||t.getData(r.TEXT_PLAIN)},a}t.DragAndDrop=c;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n,i=o(1),r=o(2),s=o(16),a=o(7),l=o(0),c=o(18),d=(i.__extends(u,n=a.Plugin),u.prototype.createDialog=function(){var o=this;this.dialog=new s.Dialog(this.jodit);var e=this.jodit.create.fromHTML('<a href="javascript:void(0)" style="float:right;" class="jodit_button"><span>'+this.jodit.i18n("Paste")+"</span></a>");e.addEventListener("click",this.paste);var t=this.jodit.create.fromHTML('<a href="javascript:void(0)" style="float:right; margin-right: 10px;" class="jodit_button"><span>'+this.jodit.i18n("Cancel")+"</span></a>");t.addEventListener("click",this.dialog.close),this.container=this.jodit.ownerDocument.createElement("div"),this.container.classList.add("jodit_paste_storage"),this.listBox=this.jodit.ownerDocument.createElement("div"),this.previewBox=this.jodit.ownerDocument.createElement("div"),this.container.appendChild(this.listBox),this.container.appendChild(this.previewBox),this.dialog.setTitle(this.jodit.i18n("Choose Content to Paste")),this.dialog.setContent(this.container),this.dialog.setFooter([e,t]),this.jodit.events.on(this.listBox,"click dblclick",function(e){var t=e.target;return t&&"A"===t.nodeName&&t.hasAttribute("data-index")&&o.selectIndex(parseInt(t.getAttribute("data-index")||"0",10)),"dblclick"===e.type&&o.paste(),!1},"a");},u.prototype.afterInit=function(){var t=this;this.jodit.events.on("afterCopy",function(e){~t.list.indexOf(e)&&t.list.splice(t.list.indexOf(e),1),t.list.unshift(e),5<t.list.length&&(t.list.length=5);}),this.jodit.registerCommand("showPasteStorage",{exec:this.showDialog,hotkeys:["ctrl+shift+v","cmd+shift+v"]});},u.prototype.beforeDestruct=function(){this.dialog&&this.dialog.destruct(),l.Dom.safeRemove(this.previewBox),l.Dom.safeRemove(this.listBox),l.Dom.safeRemove(this.container),this.container=null,this.listBox=null,this.previewBox=null,this.dialog=null,this.list=[];},u);function u(){var i=null!==n&&n.apply(this,arguments)||this;return i.currentIndex=0,i.list=[],i.container=null,i.listBox=null,i.previewBox=null,i.dialog=null,i.paste=function(){if(i.jodit.selection.focus(),i.jodit.selection.insertHTML(i.list[i.currentIndex]),0!==i.currentIndex){var e=i.list[0];i.list[0]=i.list[i.currentIndex],i.list[i.currentIndex]=e;}i.dialog&&i.dialog.close(),i.jodit.setEditorValue();},i.onKeyDown=function(e){var t=i.currentIndex;~[r.KEY_UP,r.KEY_DOWN,r.KEY_ENTER].indexOf(e.which)&&(e.which===r.KEY_UP&&(0===t?t=i.list.length-1:t-=1),e.which===r.KEY_DOWN&&(t===i.list.length-1?t=0:t+=1),e.which!==r.KEY_ENTER?(t!==i.currentIndex&&i.selectIndex(t),e.stopImmediatePropagation(),e.preventDefault()):i.paste());},i.selectIndex=function(o){i.listBox&&Array.from(i.listBox.childNodes).forEach(function(e,t){e.classList.remove("jodit_active"),o===t&&i.previewBox&&(e.classList.add("jodit_active"),i.previewBox.innerHTML=i.list[o],e.focus());}),i.currentIndex=o;},i.showDialog=function(){i.list.length<2||(i.dialog||i.createDialog(),i.listBox&&(i.listBox.innerHTML=""),i.previewBox&&(i.previewBox.innerHTML=""),i.list.forEach(function(e,t){var o=i.jodit.ownerDocument.createElement("a");o.textContent=t+1+". "+e.replace(r.SPACE_REG_EXP,""),o.addEventListener("keydown",i.onKeyDown),o.setAttribute("href","javascript:void(0)"),o.setAttribute("data-index",""+t),o.setAttribute("tab-index","-1"),i.listBox&&i.listBox.appendChild(o);}),i.dialog&&i.dialog.open(),c.setTimeout(function(){i.selectIndex(0);},100));},i}t.pasteStorage=d;},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(190);t.about=i;var n=o(191);t.addcolumn=n;var r=o(192);t.addrow=r;var s=o(193);t.angle_down=s;var a=o(194);t.angle_left=a;var l=o(195);t.angle_right=l;var c=o(196);t.angle_up=c;var d=o(197);t.arrows_alt=d;var u=o(198);t.arrows_h=u;var f=o(199);t.attachment=f;var p=o(200);t.bin=p;var h=o(201);t.bold=h;var v=o(202);t.brush=v;var m=o(203);t.cancel=m;var g=o(204);t.center=g;var _=o(205);t.chain_broken=_;var b=o(206);t.check=b;var y=o(207);t.check_square=y;var w=o(208);t.copyformat=w;var E=o(209);t.crop=E;var C=o(210);t.cut=C;var j=o(211);t.dedent=j;var x=o(212);t.dots=x;var T=o(213);t.dropdown_arrow=T;var S=o(214);t.enter=S;var D=o(215);t.eraser=D;var q=o(216);t.eye=q;var M=o(217);t.file=M;var L=o(218);t.folder=L;var I=o(219);t.font=I;var N=o(220);t.fontsize=N;var A=o(221);t.fullsize=A;var k=o(222);t.hr=k;var P=o(223);t.image=P;var O=o(224);t.indent=O;var z=o(225);t.info_circle=z;var R=o(226);t.italic=R;var B=o(227);t.justify=B;var H=o(228);t.left=H;var W=o(229);t.link=W;var F=o(230);t.lock=F;var V=o(231);t.menu=V;var Y=o(232);t.merge=Y;var U=o(233);t.ol=U;var X=o(234);t.omega=X;var K=o(235);t.outdent=K;var $=o(236);t.palette=$;var G=o(237);t.paragraph=G;var J=o(238);t.pencil=J;var Z=o(239);t.plus=Z;var Q=o(240);t.print=Q;var ee=o(241);t.redo=ee;var te=o(242);t.resize=te;var oe=o(243);t.resizer=oe;var ie=o(244);t.right=ie;var ne=o(245);t.save=ne;var re=o(246);t.select_all=re;var se=o(247);t.shrink=se;var ae=o(248);t.source=ae;var le=o(249);t.splitg=le;var ce=o(250);t.splitv=ce;var de=o(251);t.strikethrough=de;var ue=o(252);t.subscript=ue;var fe=o(253);t.superscript=fe;var pe=o(254);t.table=pe;var he=o(255);t.th=he;var ve=o(256);t.th_list=ve;var me=o(257);t.ul=me;var ge=o(258);t.underline=ge;var _e=o(259);t.undo=_e;var be=o(260);t.unlink=be;var ye=o(261);t.unlock=ye;var we=o(262);t.update=we;var Ee=o(263);t.upload=Ee;var Ce=o(264);t.valign=Ce;var je=o(265);t.video=je;},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n\t<path d="M1088 1256v240q0 16-12 28t-28 12h-240q-16 0-28-12t-12-28v-240q0-16 12-28t28-12h240q16 0 28 12t12 28zm316-600q0 54-15.5 101t-35 76.5-55 59.5-57.5 43.5-61 35.5q-41 23-68.5 65t-27.5 67q0 17-12 32.5t-28 15.5h-240q-15 0-25.5-18.5t-10.5-37.5v-45q0-83 65-156.5t143-108.5q59-27 84-56t25-76q0-42-46.5-74t-107.5-32q-65 0-108 29-35 25-107 115-13 16-31 16-12 0-25-8l-164-125q-13-10-15.5-25t5.5-28q160-266 464-266 80 0 161 31t146 83 106 127.5 41 158.5z"/>\n</svg>\n';},function(e,t){e.exports='<svg viewBox="0 0 18.151 18.151">\n<g>\n\t<g>\n\t\t<path d="M6.237,16.546H3.649V1.604h5.916v5.728c0.474-0.122,0.968-0.194,1.479-0.194\n\t\t\tc0.042,0,0.083,0.006,0.125,0.006V0H2.044v18.15h5.934C7.295,17.736,6.704,17.19,6.237,16.546z"/>\n\t\t<path d="M11.169,8.275c-2.723,0-4.938,2.215-4.938,4.938s2.215,4.938,4.938,4.938s4.938-2.215,4.938-4.938\n\t\t\tS13.892,8.275,11.169,8.275z M11.169,16.81c-1.983,0-3.598-1.612-3.598-3.598c0-1.983,1.614-3.597,3.598-3.597\n\t\t\ts3.597,1.613,3.597,3.597C14.766,15.198,13.153,16.81,11.169,16.81z"/>\n\t\t<polygon  points="11.792,11.073 10.502,11.073 10.502,12.578 9.03,12.578 9.03,13.868 10.502,13.868\n\t\t\t10.502,15.352 11.792,15.352 11.792,13.868 13.309,13.868 13.309,12.578 11.792,12.578 \t\t"/>\n\t</g>\n</g>\n</svg>\n';},function(e,t){e.exports='<svg viewBox="0 0 432 432">\n<g>\n\t<g>\n\t\t<polygon points="203.688,96 0,96 0,144 155.688,144 \t\t"/>\n\t\t<polygon points="155.719,288 0,288 0,336 203.719,336 \t\t"/>\n\t\t<rect x="252" y="96"/>\n\t\t<rect/>\n\t\t<rect x="252" y="288"/>\n\t\t<rect y="384"/>\n\t\t<path d="M97.844,230.125c-3.701-3.703-5.856-8.906-5.856-14.141s2.154-10.438,5.856-14.141l9.844-9.844H0v48h107.719\n\t\t\tL97.844,230.125z"/>\n\t\t<polygon points="232,176 232,96 112,216 232,336 232,256 432,256 432,176 \t\t"/>\n\t</g>\n</g>\n</svg>\n';},function(e,t){e.exports='<svg  viewBox="0 0 1792 1792">\n    <path d="M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1203 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1395 1184q0 13-10 23l-50 50q-10 10-23 10t-23-10l-393-393-393 393q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1411 541l-355 355 355 355 144-144q29-31 70-14 39 17 39 59v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l144-144-355-355-355 355 144 144q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l144 144 355-355-355-355-144 144q-19 19-45 19-12 0-24-5-40-17-40-59v-448q0-26 19-45t45-19h448q42 0 59 40 17 39-14 69l-144 144 355 355 355-355-144-144q-31-30-14-69 17-40 59-40h448q26 0 45 19t19 45v448q0 42-39 59-13 5-25 5-26 0-45-19z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1792 896q0 26-19 45l-256 256q-19 19-45 19t-45-19-19-45v-128h-1024v128q0 26-19 45t-45 19-45-19l-256-256q-19-19-19-45t19-45l256-256q19-19 45-19t45 19 19 45v128h1024v-128q0-26 19-45t45-19 45 19l256 256q19 19 19 45z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82-108-43.5-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34v-65.5q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68.5.5t67.5.5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72-64.5 57.5-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5-163.5 48.5-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M896 1152q0-36-20-69-1-1-15.5-22.5t-25.5-38-25-44-21-50.5q-4-16-21-16t-21 16q-7 23-21 50.5t-25 44-25.5 38-15.5 22.5q-20 33-20 69 0 53 37.5 90.5t90.5 37.5 90.5-37.5 37.5-90.5zm512-128q0 212-150 362t-362 150-362-150-150-362q0-145 81-275 6-9 62.5-90.5t101-151 99.5-178 83-201.5q9-30 34-47t51-17 51.5 17 33.5 47q28 93 83 201.5t99.5 178 101 151 62.5 90.5q81 127 81 275z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 16 16" style="stroke: #000000;">\n    <g transform="translate(0,-1036.3622)">\n        <path d="m 2,1050.3622 12,-12"\n              style="fill:none;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>\n        <path d="m 2,1038.3622 12,12"\n              style="fill:none;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>\n    </g>\n</svg>\n';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-640q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h640q26 0 45 19t19 45z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M503 1271l-256 256q-10 9-23 9-12 0-23-9-9-10-9-23t9-23l256-256q10-9 23-9t23 9q9 10 9 23t-9 23zm169 41v320q0 14-9 23t-23 9-23-9-9-23v-320q0-14 9-23t23-9 23 9 9 23zm-224-224q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23 9-23 23-9h320q14 0 23 9t9 23zm1264 128q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-334-335q-21-21-42-56l239-18 273 274q27 27 68 27.5t68-26.5l147-146q28-28 28-67 0-40-28-68l-274-275 18-239q35 21 56 42l336 336q84 86 84 204zm-617-724l-239 18-273-274q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l274 274-18 240q-35-21-56-42l-336-336q-84-86-84-204 0-120 85-203l147-146q83-83 203-83 121 0 204 85l334 335q21 21 42 56zm633 84q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23 9-23 23-9h320q14 0 23 9t9 23zm-544-544v320q0 14-9 23t-23 9-23-9-9-23v-320q0-14 9-23t23-9 23 9 9 23zm407 151l-256 256q-11 9-23 9t-23-9q-9-10-9-23t9-23l256-256q10-9 23-9t23 9q9 10 9 23t-9 23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M813 1299l614-614q19-19 19-45t-19-45l-102-102q-19-19-45-19t-45 19l-467 467-211-211q-19-19-45-19t-45 19l-102 102q-19 19-19 45t19 45l358 358q19 19 45 19t45-19zm851-883v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 16 16"><path d="M16 9v-6h-3v-1c0-0.55-0.45-1-1-1h-11c-0.55 0-1 0.45-1 1v3c0 0.55 0.45 1 1 1h11c0.55 0 1-0.45 1-1v-1h2v4h-9v2h-0.5c-0.276 0-0.5 0.224-0.5 0.5v5c0 0.276 0.224 0.5 0.5 0.5h2c0.276 0 0.5-0.224 0.5-0.5v-5c0-0.276-0.224-0.5-0.5-0.5h-0.5v-1h9zM12 3h-11v-1h11v1z"/></svg>\n';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M621 1280h595v-595zm-45-45l595-595h-595v595zm1152 77v192q0 14-9 23t-23 9h-224v224q0 14-9 23t-23 9h-192q-14 0-23-9t-9-23v-224h-864q-14 0-23-9t-9-23v-864h-224q-14 0-23-9t-9-23v-192q0-14 9-23t23-9h224v-224q0-14 9-23t23-9h192q14 0 23 9t9 23v224h851l246-247q10-9 23-9t23 9q9 10 9 23t-9 23l-247 246v851h224q14 0 23 9t9 23z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M960 896q26 0 45 19t19 45-19 45-45 19-45-19-19-45 19-45 45-19zm300 64l507 398q28 20 25 56-5 35-35 51l-128 64q-13 7-29 7-17 0-31-8l-690-387-110 66q-8 4-12 5 14 49 10 97-7 77-56 147.5t-132 123.5q-132 84-277 84-136 0-222-78-90-84-79-207 7-76 56-147t131-124q132-84 278-84 83 0 151 31 9-13 22-22l122-73-122-73q-13-9-22-22-68 31-151 31-146 0-278-84-82-53-131-124t-56-147q-5-59 15.5-113t63.5-93q85-79 222-79 145 0 277 84 83 52 132 123t56 148q4 48-10 97 4 1 12 5l110 66 690-387q14-8 31-8 16 0 29 7l128 64q30 16 35 51 3 36-25 56zm-681-260q46-42 21-108t-106-117q-92-59-192-59-74 0-113 36-46 42-21 108t106 117q92 59 192 59 74 0 113-36zm-85 745q81-51 106-117t-21-108q-39-36-113-36-100 0-192 59-81 51-106 117t21 108q39 36 113 36 100 0 192-59zm178-613l96 58v-11q0-36 33-56l14-8-79-47-26 26q-3 3-10 11t-12 12q-2 2-4 3.5t-3 2.5zm224 224l96 32 736-576-128-64-768 431v113l-160 96 9 8q2 2 7 6 4 4 11 12t11 12l26 26zm704 416l128-64-520-408-177 138q-2 3-13 7z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M384 544v576q0 13-9.5 22.5t-22.5 9.5q-14 0-23-9l-288-288q-9-9-9-23t9-23l288-288q9-9 23-9 13 0 22.5 9.5t9.5 22.5zm1408 768v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"/></svg>';},function(e,t){e.exports='<svg\n        enable-background="new 0 0 24 24"\n        viewBox="0 0 24 24"\n        xml:space="preserve"\n\n       >\n    <circle cx="12" cy="12" r="2.2"/>\n    <circle cx="12" cy="5" r="2.2"/>\n    <circle cx="12" cy="19" r="2.2"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 10 10">\n\t<path\n\t\td="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"></path>\n</svg>\n';},function(e,t){e.exports='<svg viewBox="0 0 128 128" xml:space="preserve">\n    <g>\n        <polygon points="112.4560547,23.3203125 112.4560547,75.8154297 31.4853516,75.8154297 31.4853516,61.953125     16.0131836,72.6357422 0.5410156,83.3164063 16.0131836,93.9990234 31.4853516,104.6796875 31.4853516,90.8183594     112.4560547,90.8183594 112.4560547,90.8339844 127.4589844,90.8339844 127.4589844,23.3203125   "/>\n    </g>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M832 1408l336-384h-768l-336 384h768zm1013-1077q15 34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38 0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38 0 69.5 20.5t47.5 54.5z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1664 960q-152-236-381-353 61 104 61 225 0 185-131.5 316.5t-316.5 131.5-316.5-131.5-131.5-316.5q0-121 61-225-229 117-381 353 133 205 333.5 326.5t434.5 121.5 434.5-121.5 333.5-326.5zm-720-384q0-20-14-34t-34-14q-125 0-214.5 89.5t-89.5 214.5q0 20 14 34t34 14 34-14 14-34q0-86 61-147t147-61q20 0 34-14t14-34zm848 384q0 34-20 69-140 230-376.5 368.5t-499.5 138.5-499.5-139-376.5-368q-20-35-20-69t20-69q140-229 376.5-368t499.5-139 499.5 139 376.5 368q20 35 20 69z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M1152 512v-472q22 14 36 28l408 408q14 14 28 36h-472zm-128 32q0 40 28 68t68 28h544v1056q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h800v544z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1728 608v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1744 1408q33 0 42 18.5t-11 44.5l-126 162q-20 26-49 26t-49-26l-126-162q-20-26-11-44.5t42-18.5h80v-1024h-80q-33 0-42-18.5t11-44.5l126-162q20-26 49-26t49 26l126 162q20 26 11 44.5t-42 18.5h-80v1024h80zm-1663-1279l54 27q12 5 211 5 44 0 132-2t132-2q36 0 107.5.5t107.5.5h293q6 0 21 .5t20.5 0 16-3 17.5-9 15-17.5l42-1q4 0 14 .5t14 .5q2 112 2 336 0 80-5 109-39 14-68 18-25-44-54-128-3-9-11-48t-14.5-73.5-7.5-35.5q-6-8-12-12.5t-15.5-6-13-2.5-18-.5-16.5.5q-17 0-66.5-.5t-74.5-.5-64 2-71 6q-9 81-8 136 0 94 2 388t2 455q0 16-2.5 71.5t0 91.5 12.5 69q40 21 124 42.5t120 37.5q5 40 5 50 0 14-3 29l-34 1q-76 2-218-8t-207-10q-50 0-151 9t-152 9q-3-51-3-52v-9q17-27 61.5-43t98.5-29 78-27q19-42 19-383 0-101-3-303t-3-303v-117q0-2 .5-15.5t.5-25-1-25.5-3-24-5-14q-11-12-162-12-33 0-93 12t-80 26q-19 13-34 72.5t-31.5 111-42.5 53.5q-42-26-56-44v-383z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 24 24" >\n\t<path d="M22,20.6L3.4,2H8V0H0v8h2V3.4L20.6,22H16v2h8v-8h-2V20.6z M16,0v2h4.7l-6.3,6.3l1.4,1.4L22,3.5V8h2V0H16z   M8.3,14.3L2,20.6V16H0v8h8v-2H3.5l6.3-6.3L8.3,14.3z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-1216q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h1216q40 0 68 28t28 68z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M576 576q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1024 384v448h-1408v-192l320-320 160 160 512-512zm96-704h-1600q-13 0-22.5 9.5t-9.5 22.5v1216q0 13 9.5 22.5t22.5 9.5h1600q13 0 22.5-9.5t9.5-22.5v-1216q0-13-9.5-22.5t-22.5-9.5zm160 32v1216q0 66-47 113t-113 47h-1600q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1600q66 0 113 47t47 113z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M352 832q0 14-9 23l-288 288q-9 9-23 9-13 0-22.5-9.5t-9.5-22.5v-576q0-13 9.5-22.5t22.5-9.5q14 0 23 9l288 288q9 9 9 23zm1440 480v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1152 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M384 1662l17-85q6-2 81.5-21.5t111.5-37.5q28-35 41-101 1-7 62-289t114-543.5 52-296.5v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7 120.5 2.5q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5t-108.5 33.5q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5t-77.5 355.5q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z"/></svg>';},function(e,t){e.exports='<svg\n     viewBox="0 0 312 312">\n    <g transform="translate(0.000000,312.000000) scale(0.100000,-0.100000)" stroke="none">\n        <path d="M50 3109 c0 -7 -11 -22 -25 -35 l-25 -23 0 -961 0 -961 32 -29 32\n-30 501 -2 500 -3 3 -502 2 -502 31 -30 31 -31 958 0 958 0 23 25 c13 13 30\n25 37 25 9 0 12 199 12 960 0 686 -3 960 -11 960 -6 0 -24 12 -40 28 l-29 27\n-503 5 -502 5 -5 502 -5 503 -28 29 c-15 16 -27 34 -27 40 0 8 -274 11 -960\n11 -710 0 -960 -3 -960 -11z m1738 -698 l2 -453 -40 -40 c-22 -22 -40 -43 -40\n-47 0 -4 36 -42 79 -85 88 -87 82 -87 141 -23 l26 27 455 -2 454 -3 0 -775 0\n-775 -775 0 -775 0 -3 450 -2 449 47 48 47 48 -82 80 c-44 44 -84 80 -87 80\n-3 0 -25 -18 -48 -40 l-41 -40 -456 2 -455 3 -3 765 c-1 421 0 771 3 778 3 10\n164 12 777 10 l773 -3 3 -454z"/>\n        <path d="M607 2492 c-42 -42 -77 -82 -77 -87 0 -6 86 -96 190 -200 105 -104\n190 -197 190 -205 0 -8 -41 -56 -92 -107 -65 -65 -87 -94 -77 -98 8 -3 138 -4\n289 -3 l275 3 3 275 c1 151 0 281 -3 289 -4 10 -35 -14 -103 -82 -54 -53 -103\n-97 -109 -97 -7 0 -99 88 -206 195 -107 107 -196 195 -198 195 -3 0 -39 -35\n-82 -78z"/>\n        <path d="M1470 1639 c-47 -49 -87 -91 -89 -94 -5 -6 149 -165 160 -165 9 0\n189 179 189 188 0 12 -154 162 -165 161 -6 0 -48 -41 -95 -90z"/>\n        <path d="M1797 1303 c-9 -8 -9 -568 0 -576 4 -4 50 36 103 88 54 52 101 95\n106 95 5 0 95 -85 199 -190 104 -104 194 -190 200 -190 6 0 46 36 90 80 l79\n79 -197 196 c-108 108 -197 199 -197 203 0 4 45 52 99 106 55 55 98 103 95\n108 -6 10 -568 11 -577 1z"/>\n    </g>\n</svg>\n';},function(e,t){e.exports='<svg role="img" viewBox="0 0 1792 1792">\n    <path d="M381 1620q0 80-54.5 126t-135.5 46q-106 0-172-66l57-88q49 45 106 45 29 0 50.5-14.5t21.5-42.5q0-64-105-56l-26-56q8-10 32.5-43.5t42.5-54 37-38.5v-1q-16 0-48.5 1t-48.5 1v53h-106v-152h333v88l-95 115q51 12 81 49t30 88zm2-627v159h-362q-6-36-6-54 0-51 23.5-93t56.5-68 66-47.5 56.5-43.5 23.5-45q0-25-14.5-38.5t-39.5-13.5q-46 0-81 58l-85-59q24-51 71.5-79.5t105.5-28.5q73 0 123 41.5t50 112.5q0 50-34 91.5t-75 64.5-75.5 50.5-35.5 52.5h127v-60h105zm1409 319v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm-1408-899v99h-335v-99h107q0-41 .5-122t.5-121v-12h-2q-8 17-50 54l-71-76 136-127h106v404h108zm1408 387v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 270 270">\n\t<path d="m240.443652,220.45085l-47.410809,0l0,-10.342138c13.89973,-8.43655 25.752896,-19.844464 34.686646,-33.469923c11.445525,-17.455846 17.496072,-37.709239 17.496072,-58.570077c0,-59.589197 -49.208516,-108.068714 -109.693558,-108.068714s-109.69263,48.479517 -109.69263,108.069628c0,20.860839 6.050547,41.113316 17.497001,58.570077c8.93375,13.625459 20.787845,25.032458 34.686646,33.469008l0,10.342138l-47.412666,0c-10.256959,0 -18.571354,8.191376 -18.571354,18.296574c0,10.105198 8.314395,18.296574 18.571354,18.296574l65.98402,0c10.256959,0 18.571354,-8.191376 18.571354,-18.296574l0,-39.496814c0,-7.073455 -4.137698,-13.51202 -10.626529,-16.537358c-25.24497,-11.772016 -41.557118,-37.145704 -41.557118,-64.643625c0,-39.411735 32.545369,-71.476481 72.549922,-71.476481c40.004553,0 72.550851,32.064746 72.550851,71.476481c0,27.497006 -16.312149,52.87161 -41.557118,64.643625c-6.487902,3.026253 -10.6256,9.464818 -10.6256,16.537358l0,39.496814c0,10.105198 8.314395,18.296574 18.571354,18.296574l65.982163,0c10.256959,0 18.571354,-8.191376 18.571354,-18.296574c0,-10.105198 -8.314395,-18.296574 -18.571354,-18.296574z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M384 544v576q0 13-9.5 22.5t-22.5 9.5q-14 0-23-9l-288-288q-9-9-9-23t9-23l288-288q9-9 23-9 13 0 22.5 9.5t9.5 22.5zm1408 768v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"/>\n</svg>';},function(e,t){e.exports='<svg x="0px" y="0px" viewBox="0 0 459 459">\n<g>\n\t<g>\n\t\t<path d="M229.5,0C102,0,0,102,0,229.5S102,459,229.5,459c20.4,0,38.25-17.85,38.25-38.25c0-10.2-2.55-17.85-10.2-25.5\n\t\t\tc-5.1-7.65-10.2-15.3-10.2-25.5c0-20.4,17.851-38.25,38.25-38.25h45.9c71.4,0,127.5-56.1,127.5-127.5C459,91.8,357,0,229.5,0z\n\t\t\t M89.25,229.5c-20.4,0-38.25-17.85-38.25-38.25S68.85,153,89.25,153s38.25,17.85,38.25,38.25S109.65,229.5,89.25,229.5z\n\t\t\t M165.75,127.5c-20.4,0-38.25-17.85-38.25-38.25S145.35,51,165.75,51S204,68.85,204,89.25S186.15,127.5,165.75,127.5z\n\t\t\t M293.25,127.5c-20.4,0-38.25-17.85-38.25-38.25S272.85,51,293.25,51s38.25,17.85,38.25,38.25S313.65,127.5,293.25,127.5z\n\t\t\t M369.75,229.5c-20.4,0-38.25-17.85-38.25-38.25S349.35,153,369.75,153S408,170.85,408,191.25S390.15,229.5,369.75,229.5z"\n\t\t/>\n\t</g>\n</g>\n</svg>\n';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1534 189v73q0 29-18.5 61t-42.5 32q-50 0-54 1-26 6-32 31-3 11-3 64v1152q0 25-18 43t-43 18h-108q-25 0-43-18t-18-43v-1218h-143v1218q0 25-17.5 43t-43.5 18h-108q-26 0-43.5-18t-17.5-43v-496q-147-12-245-59-126-58-192-179-64-117-64-259 0-166 88-286 88-118 209-159 111-37 417-37h479q25 0 43 18t18 43z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M448 1536h896v-256h-896v256zm0-640h896v-384h-160q-40 0-68-28t-28-68v-160h-640v640zm1152 64q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128 0v416q0 13-9.5 22.5t-22.5 9.5h-224v160q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-160h-224q-13 0-22.5-9.5t-9.5-22.5v-416q0-79 56.5-135.5t135.5-56.5h64v-544q0-40 28-68t68-28h672q40 0 88 20t76 48l152 152q28 28 48 76t20 88v256h64q79 0 135.5 56.5t56.5 135.5z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0 225-52t179-147q7-10 23-12 14 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109 132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298 164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14 39 17 39 59z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 24 24"\n    >\n    <g>\n        <g transform="translate(-251.000000, -443.000000)">\n            <g transform="translate(215.000000, 119.000000)"/>\n            <path d="M252,448 L256,448 L256,444 L252,444 L252,448 Z M257,448 L269,448 L269,446 L257,446 L257,448 Z M257,464 L269,464 L269,462 L257,462 L257,464 Z M270,444 L270,448 L274,448 L274,444 L270,444 Z M252,462 L252,466 L256,466 L256,462 L252,462 Z M270,462 L270,466 L274,466 L274,462 L270,462 Z M254,461 L256,461 L256,449 L254,449 L254,461 Z M270,461 L272,461 L272,449 L270,449 L270,461 Z"/>\n        </g>\n    </g>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M844 472q0 60-19 113.5t-63 92.5-105 39q-76 0-138-57.5t-92-135.5-30-151q0-60 19-113.5t63-92.5 105-39q77 0 138.5 57.5t91.5 135 30 151.5zm-342 483q0 80-42 139t-119 59q-76 0-141.5-55.5t-100.5-133.5-35-152q0-80 42-139.5t119-59.5q76 0 141.5 55.5t100.5 134 35 152.5zm394-27q118 0 255 97.5t229 237 92 254.5q0 46-17 76.5t-48.5 45-64.5 20-76 5.5q-68 0-187.5-45t-182.5-45q-66 0-192.5 44.5t-200.5 44.5q-183 0-183-146 0-86 56-191.5t139.5-192.5 187.5-146 193-59zm239-211q-61 0-105-39t-63-92.5-19-113.5q0-74 30-151.5t91.5-135 138.5-57.5q61 0 105 39t63 92.5 19 113.5q0 73-30 151t-92 135.5-138 57.5zm432-104q77 0 119 59.5t42 139.5q0 74-35 152t-100.5 133.5-141.5 55.5q-77 0-119-59t-42-139q0-74 35-152.5t100.5-134 141.5-55.5z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M512 1536h768v-384h-768v384zm896 0h128v-896q0-14-10-38.5t-20-34.5l-281-281q-10-10-34-20t-39-10v416q0 40-28 68t-68 28h-576q-40 0-68-28t-28-68v-416h-128v1280h128v-416q0-40 28-68t68-28h832q40 0 68 28t28 68v416zm-384-928v-320q0-13-9.5-22.5t-22.5-9.5h-192q-13 0-22.5 9.5t-9.5 22.5v320q0 13 9.5 22.5t22.5 9.5h192q13 0 22.5-9.5t9.5-22.5zm640 32v928q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1344q0-40 28-68t68-28h928q40 0 88 20t76 48l280 280q28 28 48 76t20 88z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 18 18">\n    <g fill-rule="evenodd" stroke="none" stroke-width="1">\n        <g transform="translate(-381.000000, -381.000000)">\n            <g transform="translate(381.000000, 381.000000)">\n                <path d="M0,2 L2,2 L2,0 C0.9,0 0,0.9 0,2 L0,2 Z M0,10 L2,10 L2,8 L0,8 L0,10 L0,10 Z M4,18 L6,18 L6,16 L4,16 L4,18 L4,18 Z M0,6 L2,6 L2,4 L0,4 L0,6 L0,6 Z M10,0 L8,0 L8,2 L10,2 L10,0 L10,0 Z M16,0 L16,2 L18,2 C18,0.9 17.1,0 16,0 L16,0 Z M2,18 L2,16 L0,16 C0,17.1 0.9,18 2,18 L2,18 Z M0,14 L2,14 L2,12 L0,12 L0,14 L0,14 Z M6,0 L4,0 L4,2 L6,2 L6,0 L6,0 Z M8,18 L10,18 L10,16 L8,16 L8,18 L8,18 Z M16,10 L18,10 L18,8 L16,8 L16,10 L16,10 Z M16,18 C17.1,18 18,17.1 18,16 L16,16 L16,18 L16,18 Z M16,6 L18,6 L18,4 L16,4 L16,6 L16,6 Z M16,14 L18,14 L18,12 L16,12 L16,14 L16,14 Z M12,18 L14,18 L14,16 L12,16 L12,18 L12,18 Z M12,2 L14,2 L14,0 L12,0 L12,2 L12,2 Z M4,14 L14,14 L14,4 L4,4 L4,14 L4,14 Z M6,6 L12,6 L12,12 L6,12 L6,6 L6,6 Z"/>\n            </g>\n        </g>\n    </g>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M896 960v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45zm755-672q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M553 1399l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23t-10 23l-393 393 393 393q10 10 10 23t-10 23zm591-1067l-373 1291q-4 13-15.5 19.5t-23.5 2.5l-62-17q-13-4-19.5-15.5t-2.5-24.5l373-1291q4-13 15.5-19.5t23.5-2.5l62 17q13 4 19.5 15.5t2.5 24.5zm657 651l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23t-10 23z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 48 48">\n    <path d="M6 42h4v-4h-4v4zm4-28h-4v4h4v-4zm-4 20h4v-4h-4v4zm8 8h4v-4h-4v4zm-4-36h-4v4h4v-4zm8 0h-4v4h4v-4zm16 0h-4v4h4v-4zm-8 8h-4v4h4v-4zm0-8h-4v4h4v-4zm12 28h4v-4h-4v4zm-16 8h4v-4h-4v4zm-16-16h36v-4h-36v4zm32-20v4h4v-4h-4zm0 12h4v-4h-4v4zm-16 16h4v-4h-4v4zm8 8h4v-4h-4v4zm8 0h4v-4h-4v4z"/><path d="M0 0h48v48h-48z" fill="none"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 48 48">\n    <path d="M6 18h4v-4h-4v4zm0-8h4v-4h-4v4zm8 32h4v-4h-4v4zm0-16h4v-4h-4v4zm-8 0h4v-4h-4v4zm0 16h4v-4h-4v4zm0-8h4v-4h-4v4zm8-24h4v-4h-4v4zm24 24h4v-4h-4v4zm-16 8h4v-36h-4v36zm16 0h4v-4h-4v4zm0-16h4v-4h-4v4zm0-20v4h4v-4h-4zm0 12h4v-4h-4v4zm-8-8h4v-4h-4v4zm0 32h4v-4h-4v4zm0-16h4v-4h-4v4z"/>\n    <path d="M0 0h48v48h-48z" fill="none"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1760 896q14 0 23 9t9 23v64q0 14-9 23t-23 9h-1728q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h1728zm-1277-64q-28-35-51-80-48-97-48-188 0-181 134-309 133-127 393-127 50 0 167 19 66 12 177 48 10 38 21 118 14 123 14 183 0 18-5 45l-12 3-84-6-14-2q-50-149-103-205-88-91-210-91-114 0-182 59-67 58-67 146 0 73 66 140t279 129q69 20 173 66 58 28 95 52h-743zm507 256h411q7 39 7 92 0 111-41 212-23 55-71 104-37 35-109 81-80 48-153 66-80 21-203 21-114 0-195-23l-140-40q-57-16-72-28-8-8-8-22v-13q0-108-2-156-1-30 0-68l2-37v-44l102-2q15 34 30 71t22.5 56 12.5 27q35 57 80 94 43 36 105 57 59 22 132 22 64 0 139-27 77-26 122-86 47-61 47-129 0-84-81-157-34-29-137-71z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M1025 1369v167h-248l-159-252-24-42q-8-9-11-21h-3l-9 21q-10 20-25 44l-155 250h-258v-167h128l197-291-185-272h-137v-168h276l139 228q2 4 23 42 8 9 11 21h3q3-9 11-21l25-42 140-228h257v168h-125l-184 267 204 296h109zm639 217v206h-514l-4-27q-3-45-3-46 0-64 26-117t65-86.5 84-65 84-54.5 65-54 26-64q0-38-29.5-62.5t-70.5-24.5q-51 0-97 39-14 11-36 38l-105-92q26-37 63-66 80-65 188-65 110 0 178 59.5t68 158.5q0 66-34.5 118.5t-84 86-99.5 62.5-87 63-41 73h232v-80h126z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792">\n    <path d="M1025 1369v167h-248l-159-252-24-42q-8-9-11-21h-3l-9 21q-10 20-25 44l-155 250h-258v-167h128l197-291-185-272h-137v-168h276l139 228q2 4 23 42 8 9 11 21h3q3-9 11-21l25-42 140-228h257v168h-125l-184 267 204 296h109zm637-679v206h-514l-3-27q-4-28-4-46 0-64 26-117t65-86.5 84-65 84-54.5 65-54 26-64q0-38-29.5-62.5t-70.5-24.5q-51 0-97 39-14 11-36 38l-105-92q26-37 63-66 83-65 188-65 110 0 178 59.5t68 158.5q0 56-24.5 103t-62 76.5-81.5 58.5-82 50.5-65.5 51.5-30.5 63h232v-80h126z"/>\n</svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M576 1376v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm0-384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm-512-768v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm-512-768v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm512 384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm0-384v-192q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm128-320v1088q0 66-47 113t-113 47h-1344q-66 0-113-47t-47-113v-1088q0-66 47-113t113-47h1344q66 0 113 47t47 113z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M512 1248v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm640 512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm-640-1024v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm640 512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm640 512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm-640-1024v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm640 512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M512 1248v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm1280 512v192q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h960q40 0 68 28t28 68zm-1280-1024v192q0 40-28 68t-68 28h-320q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h320q40 0 68 28t28 68zm1280 512v192q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h960q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h960q40 0 68 28t28 68z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M384 1408q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm0-512q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm-1408-928q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M176 223q-37-2-45-4l-3-88q13-1 40-1 60 0 112 4 132 7 166 7 86 0 168-3 116-4 146-5 56 0 86-2l-1 14 2 64v9q-60 9-124 9-60 0-79 25-13 14-13 132 0 13 .5 32.5t.5 25.5l1 229 14 280q6 124 51 202 35 59 96 92 88 47 177 47 104 0 191-28 56-18 99-51 48-36 65-64 36-56 53-114 21-73 21-229 0-79-3.5-128t-11-122.5-13.5-159.5l-4-59q-5-67-24-88-34-35-77-34l-100 2-14-3 2-86h84l205 10q76 3 196-10l18 2q6 38 6 51 0 7-4 31-45 12-84 13-73 11-79 17-15 15-15 41 0 7 1.5 27t1.5 31q8 19 22 396 6 195-15 304-15 76-41 122-38 65-112 123-75 57-182 89-109 33-255 33-167 0-284-46-119-47-179-122-61-76-83-195-16-80-16-237v-333q0-188-17-213-25-36-147-39zm1488 1409v-64q0-14-9-23t-23-9h-1472q-14 0-23 9t-9 23v64q0 14 9 23t23 9h1472q14 0 23-9t9-23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M503 1271l-256 256q-10 9-23 9-12 0-23-9-9-10-9-23t9-23l256-256q10-9 23-9t23 9q9 10 9 23t-9 23zm169 41v320q0 14-9 23t-23 9-23-9-9-23v-320q0-14 9-23t23-9 23 9 9 23zm-224-224q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23 9-23 23-9h320q14 0 23 9t9 23zm1264 128q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-334-335q-21-21-42-56l239-18 273 274q27 27 68 27.5t68-26.5l147-146q28-28 28-67 0-40-28-68l-274-275 18-239q35 21 56 42l336 336q84 86 84 204zm-617-724l-239 18-273-274q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l274 274-18 240q-35-21-56-42l-336-336q-84-86-84-204 0-120 85-203l147-146q83-83 203-83 121 0 204 85l334 335q21 21 42 56zm633 84q0 14-9 23t-23 9h-320q-14 0-23-9t-9-23 9-23 23-9h320q14 0 23 9t9 23zm-544-544v320q0 14-9 23t-23 9-23-9-9-23v-320q0-14 9-23t23-9 23 9 9 23zm407 151l-256 256q-11 9-23 9t-23-9q-9-10-9-23t9-23l256-256q10-9 23-9t23 9q9 10 9 23t-9 23z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1728 576v256q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45v-256q0-106-75-181t-181-75-181 75-75 181v192h96q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h672v-192q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1639 1056q0 5-1 7-64 268-268 434.5t-478 166.5q-146 0-282.5-55t-243.5-157l-129 129q-19 19-45 19t-45-19-19-45v-448q0-26 19-45t45-19h448q26 0 45 19t19 45-19 45l-137 137q71 66 161 102t187 36q134 0 250-65t186-179q11-17 53-117 8-23 30-23h192q13 0 22.5 9.5t9.5 22.5zm25-800v448q0 26-19 45t-45 19h-448q-26 0-45-19t-19-45 19-45l138-138q-148-137-349-137-134 0-250 65t-186 179q-11 17-53 117-8 23-30 23h-199q-13 0-22.5-9.5t-9.5-22.5v-7q65-268 270-434.5t480-166.5q146 0 284 55.5t245 156.5l130-129q19-19 45-19t45 19 19 45z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1344 1472q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h427q21 56 70.5 92t110.5 36h256q61 0 110.5-36t70.5-92h427q40 0 68 28t28 68zm-325-648q-17 40-59 40h-256v448q0 26-19 45t-45 19h-256q-26 0-45-19t-19-45v-448h-256q-42 0-59-40-17-39 14-69l448-448q18-19 45-19t45 19l448 448q31 30 14 69z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1216 320q0 26-19 45t-45 19h-128v1024h128q26 0 45 19t19 45-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-1024h-128q-26 0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45z"/></svg>';},function(e,t){e.exports='<svg viewBox="0 0 1792 1792"><path d="M1792 352v1088q0 42-39 59-13 5-25 5-27 0-45-19l-403-403v166q0 119-84.5 203.5t-203.5 84.5h-704q-119 0-203.5-84.5t-84.5-203.5v-704q0-119 84.5-203.5t203.5-84.5h704q119 0 203.5 84.5t84.5 203.5v165l403-402q18-19 45-19 12 0 25 5 39 17 39 59z"/></svg>';}],n.c=i,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o});},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/build/",n(n.s=67);function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,i;});
  });

  var Jodit = unwrapExports(jodit_min);

  //

  var script = {
    name: 'JoditVue',

    props: {
      value: { type: String, required: true },
      buttons: { type: Array, default: null },
      extraButtons: { type: Array, default: null },
      config: { type: Object, default: function () { return ({}); } }
    },

    data: function () { return ({ editor: null }); },

    computed: {
      editorConfig: function editorConfig () {
        var config = Object.assign({}, this.config);

        if (this.buttons) {
          config.buttons = this.buttons;
          config.buttonsMD = this.buttons;
          config.buttonsSM = this.buttons;
          config.buttonsXS = this.buttons;
        }

        if (this.extraButtons) { config.extraButtons = this.extraButtons; }
        return config
      }
    },

    watch: {
      value: function value (newValue) {
        if (this.editor.value !== newValue) { this.editor.value = newValue; }
      }
    },

    mounted: function mounted () {
      var this$1 = this;

      this.editor = new Jodit(this.$el, this.editorConfig);
      this.editor.value = this.value;
      this.editor.events.on('change', function (newValue) { return this$1.$emit('input', newValue); });
    },

    beforeDestroy: function beforeDestroy () {
      this.editor.destruct();
    }
  };

  function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier
  /* server only */
  , shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    if (typeof shadowMode !== 'boolean') {
      createInjectorSSR = createInjector;
      createInjector = shadowMode;
      shadowMode = false;
    } // Vue.extend constructor export interop.


    var options = typeof script === 'function' ? script.options : script; // render functions

    if (template && template.render) {
      options.render = template.render;
      options.staticRenderFns = template.staticRenderFns;
      options._compiled = true; // functional template

      if (isFunctionalTemplate) {
        options.functional = true;
      }
    } // scopedId


    if (scopeId) {
      options._scopeId = scopeId;
    }

    var hook;

    if (moduleIdentifier) {
      // server build
      hook = function hook(context) {
        // 2.3 injection
        context = context || // cached call
        this.$vnode && this.$vnode.ssrContext || // stateful
        this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional
        // 2.2 with runInNewContext: true

        if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {
          context = __VUE_SSR_CONTEXT__;
        } // inject component styles


        if (style) {
          style.call(this, createInjectorSSR(context));
        } // register component module identifier for async chunk inference


        if (context && context._registeredComponents) {
          context._registeredComponents.add(moduleIdentifier);
        }
      }; // used by ssr in case component is cached and beforeCreate
      // never gets called


      options._ssrRegister = hook;
    } else if (style) {
      hook = shadowMode ? function () {
        style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));
      } : function (context) {
        style.call(this, createInjector(context));
      };
    }

    if (hook) {
      if (options.functional) {
        // register for functional component in vue file
        var originalRender = options.render;

        options.render = function renderWithStyleInjection(h, context) {
          hook.call(context);
          return originalRender(h, context);
        };
      } else {
        // inject component registration as beforeCreate hook
        var existing = options.beforeCreate;
        options.beforeCreate = existing ? [].concat(existing, hook) : [hook];
      }
    }

    return script;
  }

  var normalizeComponent_1 = normalizeComponent;

  /* script */
  var __vue_script__ = script;

  /* template */
  var __vue_render__ = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div")
  };
  var __vue_staticRenderFns__ = [];
  __vue_render__._withStripped = true;

    /* style */
    var __vue_inject_styles__ = undefined;
    /* scoped */
    var __vue_scope_id__ = undefined;
    /* module identifier */
    var __vue_module_identifier__ = undefined;
    /* functional template */
    var __vue_is_functional_template__ = false;
    /* style inject */
    
    /* style inject SSR */
    

    
    var JoditVue = normalizeComponent_1(
      { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },
      __vue_inject_styles__,
      __vue_script__,
      __vue_scope_id__,
      __vue_is_functional_template__,
      __vue_module_identifier__,
      undefined,
      undefined
    );

  /* eslint-env node */

  function install (Vue) {
    if (install.installed) { return }
    install.installed = true;
    Vue.component('JoditVue', JoditVue);
  }

  var plugin = { install: install };
  var GlobalVue = null;

  if (typeof window !== 'undefined') { GlobalVue = window.Vue; }
  else if (typeof global !== 'undefined') { GlobalVue = global.Vue; }

  if (GlobalVue) { GlobalVue.use(plugin); }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  function _slicedToArray(arr, i) {
    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();
  }

  function _arrayWithHoles(arr) {
    if (Array.isArray(arr)) return arr;
  }

  function _iterableToArrayLimit(arr, i) {
    if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) {
      return;
    }

    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"] != null) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  function _nonIterableRest() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  }

  var autoBind = createCommonjsModule(function (module) {

  // Gets all non-builtin properties up the prototype chain
  const getAllProperties = object => {
  	const properties = new Set();

  	do {
  		for (const key of Reflect.ownKeys(object)) {
  			properties.add([object, key]);
  		}
  	} while ((object = Reflect.getPrototypeOf(object)) && object !== Object.prototype);

  	return properties;
  };

  module.exports = (self, {include, exclude} = {}) => {
  	const filter = key => {
  		const match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);

  		if (include) {
  			return include.some(match);
  		}

  		if (exclude) {
  			return !exclude.some(match);
  		}

  		return true;
  	};

  	for (const [object, key] of getAllProperties(self.constructor.prototype)) {
  		if (key === 'constructor' || !filter(key)) {
  			continue;
  		}

  		const descriptor = Reflect.getOwnPropertyDescriptor(object, key);
  		if (descriptor && typeof descriptor.value === 'function') {
  			self[key] = self[key].bind(self);
  		}
  	}

  	return self;
  };

  const excludedReactMethods = [
  	'componentWillMount',
  	'UNSAFE_componentWillMount',
  	'render',
  	'getSnapshotBeforeUpdate',
  	'componentDidMount',
  	'componentWillReceiveProps',
  	'UNSAFE_componentWillReceiveProps',
  	'shouldComponentUpdate',
  	'componentWillUpdate',
  	'UNSAFE_componentWillUpdate',
  	'componentDidUpdate',
  	'componentWillUnmount',
  	'componentDidCatch',
  	'setState',
  	'forceUpdate'
  ];

  module.exports.react = (self, {exclude = [], ...options} = {}) => {
  	options.exclude = [
  		...exclude,
  		...excludedReactMethods
  	];

  	return module.exports(self, options);
  };
  });
  var autoBind_1 = autoBind.react;

  /** @typedef {import('jodit').IJodit} Jodit */

  var AutofocusPlugin =
  /*#__PURE__*/
  function () {
    _createClass(AutofocusPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'autofocus';
      }
    }]);

    function AutofocusPlugin(options) {
      _classCallCheck(this, AutofocusPlugin);

      options.readyEvent = options.readyEvent || 'joditReady';
      options.cursorStyle = options.cursorStyle || 'auto';
      autoBind(this);
    }
    /**
     * @param {Jodit} jodit
     */


    _createClass(AutofocusPlugin, [{
      key: "init",
      value: function init(jodit) {
        jodit.editor.style.cursor = this.options.cursorStyle;
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "afterInit",
      value: function afterInit(jodit) {
        var _this = this;

        setTimeout(function () {
          jodit.selection.focus();
          jodit.events.fire(_this.options.readyEvent);
        }, 0);
      }
    }]);

    return AutofocusPlugin;
  }();

  var isFunction = function isFunction(arg) {
    return typeof arg === 'function';
  };

  var isString = function isString(arg) {
    return typeof arg === 'string';
  };

  var hide = function hide(el) {
    return el.style.display = 'none';
  };

  var show = function show(el) {
    return el.style.display = 'block';
  };

  var splitArray = function splitArray(arg) {
    return isString(arg) ? arg.split(/[,\s]+/) : arg;
  };
  /** @typedef {import('jodit/src/Config').Config & import('jodit/src/plugins')} Config */

  /** @typedef {import('jodit').IJodit} Jodit */


  var ExternalToolbarPlugin =
  /*#__PURE__*/
  function () {
    _createClass(ExternalToolbarPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'external-toolbar';
      }
    }]);

    function ExternalToolbarPlugin(options) {
      _classCallCheck(this, ExternalToolbarPlugin);

      options.readyEvent = options.readyEvent || 'joditReady';
      autoBind(this);
    }
    /**
     * @param {Config} config
     */


    _createClass(ExternalToolbarPlugin, [{
      key: "apply",
      value: function apply(config) {
        config.toolbar = false;
        this.options.buttons = splitArray(config.buttons).concat(config.extraButtons);
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "init",
      value: function init(jodit) {
        var self = this;
        var __initEditor = jodit.__initEditor;

        jodit.__initEditor = function () {
          __initEditor.apply(this, arguments);

          self.renderToolbar();
        };

        jodit.events.on(this.options.readyEvent, this.showToolbar);
      }
    }, {
      key: "renderToolbar",
      value: function renderToolbar() {
        var _this$jodit = this.jodit,
            statusbar = _this$jodit.statusbar,
            toolbar = _this$jodit.toolbar;
        var container = document.querySelector(this.options.toolbarContainer);
        hide(toolbar.container);
        toolbar.build(this.options.buttons, container);
        if (statusbar) statusbar.show();
      }
    }, {
      key: "showToolbar",
      value: function showToolbar() {
        var toolbar = this.jodit.toolbar;
        immediateCheckActiveButtons(toolbar);
        show(toolbar.container);
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "beforeDestruct",
      value: function beforeDestruct(jodit) {
        jodit.events.off(this.options.readyEvent, this.showToolbar);
      }
    }]);

    return ExternalToolbarPlugin;
  }(); // TODO: Remove this proxy function after typo inside Jodit source gets fixed!

  function immediateCheckActiveButtons(toolbar) {
    if (isFunction(toolbar.immediateCheckActiveButtons)) {
      return toolbar.immediateCheckActiveButtons();
    }

    return toolbar.immedateCheckActiveButtons();
  }

  var JODIT_CONTROL_FONT = 'font';
  var JODIT_CONTROL_FONTSIZE = 'fontsize';
  var JODIT_CONTROL_PARAGRAPH_STYLE = 'paragraph';

  var isEmpty = function isEmpty(el) {
    return !el.innerHTML;
  };

  var find = function find(arr, cb, defVal) {
    return arr.find(cb) || defVal;
  };
  /** @typedef {import('jodit/src/Config').Config & import('jodit/src/plugins')} Config */

  /** @typedef {import('jodit').IJodit} Jodit */

  /** @typedef {import('jodit').IToolbarButton} Button */

  /** @typedef {import('jodit').IControlType<Jodit,Button} Control */


  var FontControlsPlugin =
  /*#__PURE__*/
  function () {
    _createClass(FontControlsPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'font-controls';
      }
    }]);

    function FontControlsPlugin(options) {
      _classCallCheck(this, FontControlsPlugin);

      options.defaultFontFamily = options.defaultFontFamily || 'Sans Serif';
      options.defaultFontSize = options.defaultFontSize || 16;
      /* px */

      options.defaultParagraphStyle = options.defaultParagraphStyle || 'Normal';
      options.pickerLabelClass = options.pickerLabelClass || 'picker_label';
      autoBind(this);
    }
    /**
     * @param {Config} config
     */


    _createClass(FontControlsPlugin, [{
      key: "apply",
      value: function apply(_ref) {
        var controls = _ref.controls;
        var control;

        if (control = controls[JODIT_CONTROL_FONT]) {
          Object.assign(control, {
            defaultValue: this.options.defaultFontFamily,
            getLabel: this.getLabel
          });
        }

        if (control = controls[JODIT_CONTROL_FONTSIZE]) {
          Object.assign(control, {
            defaultValue: this.options.defaultFontSize,
            getLabel: this.getLabel
          });
        }

        if (control = controls[JODIT_CONTROL_PARAGRAPH_STYLE]) {
          Object.assign(control, {
            defaultValue: this.options.defaultParagraphStyle,
            getLabel: this.getLabel
          });
        }
      }
      /**
       * @param {Jodit} jodit
       * @param {Control} control
       * @param {Button} button
       */

    }, {
      key: "getLabel",
      value: function getLabel(jodit, control, button) {
        var entry = this.getActiveEntry(jodit, control, control.defaultValue);

        var _entry = _slicedToArray(entry, 2),
            key = _entry[1];

        var icon = button.createIcon(control.icon, control);
        var label = document.createElement('span');
        label.classList.add(this.options.pickerLabelClass);
        label.appendChild(icon);
        label.innerHTML += key;
        button.textBox.innerHTML = '';
        button.textBox.appendChild(label);
        return false;
      }
      /**
       * @param {Jodit} jodit
       * @param {Control} control
       * @returns {[*, String]}
       */

    }, {
      key: "getActiveEntry",
      value: function getActiveEntry(jodit, control, defaultValue) {
        if (!jodit.isInited) return [null, defaultValue];
        var entries = Object.entries(control.list);
        var entry = entries.find(function (args) {
          return control.isActiveChild(jodit, {
            args: args
          });
        });
        if (entry) return entry;
        if (isEmpty(jodit.editor)) return [null, defaultValue];

        if (control.name === JODIT_CONTROL_FONT) {
          var _getComputedStyle = getComputedStyle(jodit.editor),
              currentFontFamily = _getComputedStyle.fontFamily;

          return find(entries, function (_ref2) {
            var _ref3 = _slicedToArray(_ref2, 1),
                fontFamily = _ref3[0];

            return normalize.fontFamily(fontFamily) === currentFontFamily;
          }, [null, defaultValue]);
        }

        if (control.name === JODIT_CONTROL_FONTSIZE) {
          var _getComputedStyle2 = getComputedStyle(jodit.editor),
              currentFontSize = _getComputedStyle2.fontSize;

          return find(entries, function (_ref4) {
            var _ref5 = _slicedToArray(_ref4, 2),
                _ = _ref5[0],
                fontSize = _ref5[1];

            return fontSize === normalize.fontSize(currentFontSize);
          }, [null, defaultValue]);
        }

        if (control.name === JODIT_CONTROL_PARAGRAPH_STYLE) {
          return find(entries, function (_ref6) {
            var _ref7 = _slicedToArray(_ref6, 2),
                _ = _ref7[0],
                style = _ref7[1];

            return style.toLowerCase() === 'normal';
          }, [null, defaultValue]);
        }
      }
    }]);

    return FontControlsPlugin;
  }();

  var normalize = function () {
    var span = document.createElement('span');
    return {
      fontFamily: function fontFamily(str) {
        span.style.fontFamily = str;
        return span.style.fontFamily;
      },
      fontSize: function fontSize(str) {
        return String(parseFloat(str));
      }
    };
  }();

  var mdiIcons = Object.assign({
    source: 'code-tags',
    bold: 'format-bold',
    strikethrough: 'format-strikethrough',
    underline: 'format-underline',
    italic: 'format-italic',
    superscript: 'format-superscript',
    subscript: 'format-subscript',
    ul: 'format-list-bulleted',
    ol: 'format-list-numbered',
    outdent: 'format-indent-decrease',
    indent: 'format-indent-increase',
    font: 'format-font',
    fontsize: 'format-size',
    paragraph: 'format-pilcrow',
    image: 'image-plus',
    tooltip: 'tooltip-text',
    file: 'file-plus',
    video: 'video-plus',
    table: 'table-plus',
    link: 'link'
  }, {
    left: 'format-align-left',
    center: 'format-align-center',
    right: 'format-align-right',
    justify: 'format-align-justify'
  }, {
    undo: 'undo',
    redo: 'redo',
    cut: 'content-cut',
    hr: 'minus',
    eraser: 'format-clear',
    copyformat: 'format-paint',

    /* symbol */
    omega: 'omega',
    // NOTE: `fullsize` icon can NOT be changed!
    // fullsize: 'arrow-expand-all',

    /* selectall */
    'select-all': 'select-all',
    print: 'printer',
    dots: 'dots-vertical',
    cancel: 'close',
    // popup toolbar icons
    valign: 'format-align-top',
    splitv: 'format-columns',
    merge: 'table-merge-cells',
    addcolumn: 'table-column-plus-after',
    addrow: 'table-row-plus-after',
    bin: 'trash-can',
    eye: 'eye',
    unlink: 'link-off',
    pencil: 'pencil'
  });
  var textColor = "\n  <span class=\"icon stack\">\n    <span class=\"icon stacked mdi mdi-format-color-text\"></span>\n    <span class=\"icon stacked mdi mdi-color-helper\"></span>\n    <svg width=\"0\" height=\"0\" style=\"display: none;\"></svg>\n  </span>";
  function getMdiIcon(name) {
    if (name === 'brush') return textColor;
    var code = mdiIcons[name];
    return "<span class=\"mdi mdi-".concat(code, "\"></span>");
  }

  var CSS_NO_COLOR = '';
  var JODIT_COLORPICKER = '.jodit_colorpicker';
  var JODIT_COMMAND_BACKGROUND_COLOR = 'background';
  var JODIT_COMMAND_TEXT_COLOR = 'forecolor';
  var JODIT_CONTROL_ALIGN = 'align';
  var JODIT_CONTROL_COLOR = 'brush';
  var JODIT_DEFAULT_EVENT_NAMESPACE = 'JoditEventDefaultNamespace';
  var JODIT_PICKER_SELECTION_EVENTS = ['mousedown', 'touchend'];

  var noop = function noop() {};
  /** @typedef {import('jodit/src/Config').Config & import('jodit/src/plugins')} Config */

  /** @typedef {import('jodit').IJodit} Jodit */

  /** @typedef {import('jodit').IToolbarButton} Button */

  /** @typedef {import('jodit').IControlType<Jodit,Button} Control */

  /** @typedef {import('jodit').IEventsNative} Events */

  /**
   * @typedef {Object} ColorPickers
   * @property {HTMLElement} textColor
   * @property {HTMLElement} backgroundColor
   * @property {HTMLElement} [borderColor]
   */


  var MdiIconsPlugin =
  /*#__PURE__*/
  function () {
    _createClass(MdiIconsPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'mdi-icons';
      }
    }]);

    function MdiIconsPlugin(options) {
      _classCallCheck(this, MdiIconsPlugin);

      options.btnResetColorClass = options.btnResetColorClass || 'btn_reset_color';
      options.selectedMarkerClass = options.selectedMarkerClass || 'selected_color_marker';
      autoBind(this);
    }
    /**
     * @param {HTMLElement} el
     * @returns {boolean}
     */


    _createClass(MdiIconsPlugin, [{
      key: "isResetButton",
      value: function isResetButton(el) {
        return el.classList.contains(this.options.btnResetColorClass);
      }
      /**
      * @param {Config} config
      */

    }, {
      key: "apply",
      value: function apply(_ref) {
        var controls = _ref.controls,
            popup = _ref.popup;
        var self = this;
        var control;

        if (control = controls[JODIT_CONTROL_ALIGN]) {
          var _control = control,
              _control$getLabel = _control.getLabel,
              getLabel = _control$getLabel === void 0 ? noop : _control$getLabel;

          control.getLabel = function () {
            var result = getLabel.apply(this, arguments);
            self.getAlignmentLabel.apply(self, arguments);
            return result;
          };
        }

        if (control = controls[JODIT_CONTROL_COLOR]) {
          var _control2 = control,
              _control2$getLabel = _control2.getLabel,
              _getLabel = _control2$getLabel === void 0 ? noop : _control2$getLabel;

          control.getLabel = function () {
            var result = _getLabel.apply(this, arguments);

            self.getColorLabel.apply(self, arguments);
            return result;
          };

          var _control3 = control,
              _control3$popup = _control3.popup,
              createPopup = _control3$popup === void 0 ? noop : _control3$popup;

          control.popup = function () {
            var popup = createPopup.apply(this, arguments);
            if (!popup) return popup;
            return self.colorPopup.apply(self, [popup].concat(Array.prototype.slice.call(arguments)));
          };
        }

        if (Array.isArray(popup.table)) {
          control = popup.table.find(function (it) {
            return it.name === JODIT_CONTROL_COLOR;
          });

          if (control) {
            var _control4 = control,
                _control4$popup = _control4.popup,
                _createPopup = _control4$popup === void 0 ? noop : _control4$popup;

            control.popup = function () {
              var popup = _createPopup.apply(this, arguments);

              if (!popup) return popup;
              return self.inlineColorPopup.apply(self, [popup].concat(Array.prototype.slice.call(arguments)));
            };
          }
        }
      }
      /**
      * @param {Jodit} jodit
      * @param {Control} control
      * @param {Button} button
      */

    }, {
      key: "getAlignmentLabel",
      value: function getAlignmentLabel(jodit, control, button) {
        // Show current alignment inside button label.
        var currentValue = control.data && control.data.currentValue;
        if (!currentValue) return;
        button.textBox.innerHTML = '';
        button.textBox.appendChild(button.createIcon(currentValue, control));
      }
      /**
      * @param {Jodit} jodit
      * @param {Control} control
      * @param {Button} button
      */

    }, {
      key: "getColorLabel",
      value: function getColorLabel(jodit, control, button) {
        // Colorize material design `color-helper` icon.
        var colorHelper = button.textBox.querySelector('.mdi-color-helper');
        var svg = button.textBox.querySelector('svg');
        if (!colorHelper || !svg) return;
        colorHelper.style.color = svg.style.fill;
      }
      /**
       * @param {HTMLElement} popup
       * @param {Jodit} jodit
       * @param {Node} current
       * @param {Control} control
       * @param {Function} close
       */

    }, {
      key: "colorPopup",
      value: function colorPopup(popup, jodit, current, control) {
        var close = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : noop;
        var events = jodit.events,
            options = jodit.options;
        var pickers = getColorPickers(popup, {
          defaultTab: options.colorPickerDefaultTab
        }); // Add reset color buttons to main toolbar's colorpicker/s.

        onSelect(events, this.addResetButton(pickers.textColor), function () {
          jodit.execCommand(JODIT_COMMAND_TEXT_COLOR, false, CSS_NO_COLOR);
          close();
        });
        onSelect(events, this.addResetButton(pickers.backgroundColor), function () {
          jodit.execCommand(JODIT_COMMAND_BACKGROUND_COLOR, false, CSS_NO_COLOR);
          close();
        });
        return popup;
      }
      /**
      * @param {HTMLElement} popup
      * @param {Jodit} jodit
      * @param {HTMLTableElement} table
      */

    }, {
      key: "inlineColorPopup",
      value: function inlineColorPopup(popup, jodit, table) {
        var _this = this;

        var self = this;
        var Jodit = jodit.constructor,
            events = jodit.events;
        var pickers = getColorPickers(popup, {
          defaultTab: 'background'
        });
        pickers.forEach(function (picker) {
          var selected = picker.querySelector('.active');
          if (selected) _this.changeSelectedMarker(selected);

          var _events$getStore$get = events.getStore(picker).get(JODIT_PICKER_SELECTION_EVENTS[0], JODIT_DEFAULT_EVENT_NAMESPACE),
              _events$getStore$get2 = _slicedToArray(_events$getStore$get, 1),
              eventDesc = _events$getStore$get2[0];

          var oldListener = eventDesc && eventDesc.originalCallback;
          if (!oldListener) return;
          replaceListener(jodit, picker, JODIT_PICKER_SELECTION_EVENTS.join(' '), newListener, oldListener);

          function newListener(e) {
            oldListener.apply(this, arguments);
            self.onColorChange(e, picker);
          }
        }); // Add reset color buttons to inline toolbar's colorpicker/s.

        onSelect(events, this.addResetButton(pickers.textColor), function () {
          var selectedCells = Jodit.modules.Table.getAllSelectedCells(table);
          selectedCells.forEach(function (cell) {
            return cell.style.color = CSS_NO_COLOR;
          });
          jodit.setEditorValue();
        });
        onSelect(events, this.addResetButton(pickers.backgroundColor), function () {
          var selectedCells = Jodit.modules.Table.getAllSelectedCells(table);
          selectedCells.forEach(function (cell) {
            return cell.style.backgroundColor = CSS_NO_COLOR;
          });
          jodit.setEditorValue();
        });
        onSelect(events, this.addResetButton(pickers.borderColor), function () {
          var selectedCells = Jodit.modules.Table.getAllSelectedCells(table);
          selectedCells.forEach(function (cell) {
            return cell.style.borderColor = CSS_NO_COLOR;
          });
          jodit.setEditorValue();
        });
        return popup;
      }
      /**
       * @param {Event} e
       * @param {HTMLElement} picker
       */

    }, {
      key: "onColorChange",
      value: function onColorChange(e, picker) {
        var Jodit = this.jodit.constructor;
        var button = Jodit.modules.Dom.up(e.target, function (el) {
          return el.matches('[data-color]');
        }, picker);
        if (!button) return;
        var selected = picker.querySelector('.active');
        if (!selected) return;

        if (this.isResetButton(button)) {
          selected.classList.remove('active');
          selected.innerHTML = '';
          return;
        }

        this.changeSelectedMarker(selected);
      }
      /**
       * @param {HTMLElement} picker
       * @return {HTMLSpanElement}
       */

    }, {
      key: "addResetButton",
      value: function addResetButton(picker) {
        var btnResetColor = picker && Array.from(picker.children).filter(function (el) {
          return el.matches('a');
        }).pop();
        if (!btnResetColor) return document.createElement('span');
        btnResetColor.classList.add(this.options.btnResetColorClass);
        btnResetColor.innerHTML = '';
        var tabIndex = this.jodit.options.allowTabNavigation ? 0 : -1;
        btnResetColor.appendChild(createButton({
          icon: 'mdi-water-off',
          text: 'None',
          tabIndex: tabIndex
        }));
        return btnResetColor;
      }
      /**
       * @param {HTMLAnchorElement} selected
       */

    }, {
      key: "changeSelectedMarker",
      value: function changeSelectedMarker(selected) {
        // Swap eye icon marking selected color with colorized bullet.
        selected.classList.add(this.options.selectedMarkerClass);
        var svg = selected.querySelector('svg');
        var circle = createIcon('mdi-circle');
        Object.assign(circle.style, {
          color: svg.style.fill,
          fontSize: '8px'
        });
        selected.appendChild(circle);
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "init",
      value: function init(_ref2) {
        var events = _ref2.events;
        events.on('getIcon', getMdiIcon);
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "beforeDestruct",
      value: function beforeDestruct(jodit) {
        jodit.events.off('getIcon', getMdiIcon);
      }
    }]);

    return MdiIconsPlugin;
  }();

  function getColorPickers(popup, _ref3) {
    var defaultTab = _ref3.defaultTab;
    var pickers = Array.from(popup.querySelectorAll(JODIT_COLORPICKER));
    if (pickers.length <= 0) return pickers;
    var textColor, backgroundColor, borderColor;

    if (defaultTab === 'background') {
      var _pickers = _slicedToArray(pickers, 3);

      backgroundColor = _pickers[0];
      textColor = _pickers[1];
      borderColor = _pickers[2];
    } else if (defaultTab === 'color') {
      var _pickers2 = _slicedToArray(pickers, 3);

      textColor = _pickers2[0];
      backgroundColor = _pickers2[1];
      borderColor = _pickers2[2];
    }

    return Object.assign(pickers, {
      textColor: textColor,
      backgroundColor: backgroundColor,
      borderColor: borderColor
    });
  }
  /**
   * @param {Events} events
   * @param {Object} target
   * @param {EventListener} listener
   */


  function onSelect(events, target, listener) {
    return events.on(target, JODIT_PICKER_SELECTION_EVENTS.join(' '), listener);
  }
  /**
   * @param {Jodit} jodit
   * @param {Object} target
   * @param {String} events
   * @param {EventListener} listener
   * @param {EventListener} oldListener
   */


  function replaceListener(jodit, target, events, listener, oldListener) {
    jodit.events.off(target, events, oldListener).on(target, events, listener);
  }
  /**
   * @param {Object} options
   * @param {String} options.icon
   * @param {String} options.text
   * @param {Number} [options.tabIndex=0]
   * @returns {HTMLSpanElement}
   */


  function createButton(_ref4) {
    var icon = _ref4.icon,
        text = _ref4.text,
        _ref4$tabIndex = _ref4.tabIndex,
        tabIndex = _ref4$tabIndex === void 0 ? 0 : _ref4$tabIndex;
    var btn = document.createElement('span');
    btn.tabIndex = tabIndex;
    btn.setAttribute('role', 'button');
    btn.appendChild(createIcon(icon));
    btn.innerHTML += text;
    return btn;
  }
  /**
   * @param {String} name
   * @returns {HTMLSpanElement}
   */

  function createIcon(name) {
    var icon = document.createElement('span');
    icon.classList.add('jodit_icon', 'mdi', name);
    return icon;
  }

  /**
   * Removes all key-value entries from the list cache.
   *
   * @private
   * @name clear
   * @memberOf ListCache
   */
  function listCacheClear() {
    this.__data__ = [];
    this.size = 0;
  }

  var _listCacheClear = listCacheClear;

  /**
   * Performs a
   * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
   * comparison between two values to determine if they are equivalent.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to compare.
   * @param {*} other The other value to compare.
   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
   * @example
   *
   * var object = { 'a': 1 };
   * var other = { 'a': 1 };
   *
   * _.eq(object, object);
   * // => true
   *
   * _.eq(object, other);
   * // => false
   *
   * _.eq('a', 'a');
   * // => true
   *
   * _.eq('a', Object('a'));
   * // => false
   *
   * _.eq(NaN, NaN);
   * // => true
   */
  function eq(value, other) {
    return value === other || (value !== value && other !== other);
  }

  var eq_1 = eq;

  /**
   * Gets the index at which the `key` is found in `array` of key-value pairs.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} key The key to search for.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function assocIndexOf(array, key) {
    var length = array.length;
    while (length--) {
      if (eq_1(array[length][0], key)) {
        return length;
      }
    }
    return -1;
  }

  var _assocIndexOf = assocIndexOf;

  /** Used for built-in method references. */
  var arrayProto = Array.prototype;

  /** Built-in value references. */
  var splice = arrayProto.splice;

  /**
   * Removes `key` and its value from the list cache.
   *
   * @private
   * @name delete
   * @memberOf ListCache
   * @param {string} key The key of the value to remove.
   * @returns {boolean} Returns `true` if the entry was removed, else `false`.
   */
  function listCacheDelete(key) {
    var data = this.__data__,
        index = _assocIndexOf(data, key);

    if (index < 0) {
      return false;
    }
    var lastIndex = data.length - 1;
    if (index == lastIndex) {
      data.pop();
    } else {
      splice.call(data, index, 1);
    }
    --this.size;
    return true;
  }

  var _listCacheDelete = listCacheDelete;

  /**
   * Gets the list cache value for `key`.
   *
   * @private
   * @name get
   * @memberOf ListCache
   * @param {string} key The key of the value to get.
   * @returns {*} Returns the entry value.
   */
  function listCacheGet(key) {
    var data = this.__data__,
        index = _assocIndexOf(data, key);

    return index < 0 ? undefined : data[index][1];
  }

  var _listCacheGet = listCacheGet;

  /**
   * Checks if a list cache value for `key` exists.
   *
   * @private
   * @name has
   * @memberOf ListCache
   * @param {string} key The key of the entry to check.
   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
   */
  function listCacheHas(key) {
    return _assocIndexOf(this.__data__, key) > -1;
  }

  var _listCacheHas = listCacheHas;

  /**
   * Sets the list cache `key` to `value`.
   *
   * @private
   * @name set
   * @memberOf ListCache
   * @param {string} key The key of the value to set.
   * @param {*} value The value to set.
   * @returns {Object} Returns the list cache instance.
   */
  function listCacheSet(key, value) {
    var data = this.__data__,
        index = _assocIndexOf(data, key);

    if (index < 0) {
      ++this.size;
      data.push([key, value]);
    } else {
      data[index][1] = value;
    }
    return this;
  }

  var _listCacheSet = listCacheSet;

  /**
   * Creates an list cache object.
   *
   * @private
   * @constructor
   * @param {Array} [entries] The key-value pairs to cache.
   */
  function ListCache(entries) {
    var index = -1,
        length = entries == null ? 0 : entries.length;

    this.clear();
    while (++index < length) {
      var entry = entries[index];
      this.set(entry[0], entry[1]);
    }
  }

  // Add methods to `ListCache`.
  ListCache.prototype.clear = _listCacheClear;
  ListCache.prototype['delete'] = _listCacheDelete;
  ListCache.prototype.get = _listCacheGet;
  ListCache.prototype.has = _listCacheHas;
  ListCache.prototype.set = _listCacheSet;

  var _ListCache = ListCache;

  /**
   * Removes all key-value entries from the stack.
   *
   * @private
   * @name clear
   * @memberOf Stack
   */
  function stackClear() {
    this.__data__ = new _ListCache;
    this.size = 0;
  }

  var _stackClear = stackClear;

  /**
   * Removes `key` and its value from the stack.
   *
   * @private
   * @name delete
   * @memberOf Stack
   * @param {string} key The key of the value to remove.
   * @returns {boolean} Returns `true` if the entry was removed, else `false`.
   */
  function stackDelete(key) {
    var data = this.__data__,
        result = data['delete'](key);

    this.size = data.size;
    return result;
  }

  var _stackDelete = stackDelete;

  /**
   * Gets the stack value for `key`.
   *
   * @private
   * @name get
   * @memberOf Stack
   * @param {string} key The key of the value to get.
   * @returns {*} Returns the entry value.
   */
  function stackGet(key) {
    return this.__data__.get(key);
  }

  var _stackGet = stackGet;

  /**
   * Checks if a stack value for `key` exists.
   *
   * @private
   * @name has
   * @memberOf Stack
   * @param {string} key The key of the entry to check.
   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
   */
  function stackHas(key) {
    return this.__data__.has(key);
  }

  var _stackHas = stackHas;

  /** `Object#toString` result references. */
  var asyncTag = '[object AsyncFunction]',
      funcTag = '[object Function]',
      genTag = '[object GeneratorFunction]',
      proxyTag = '[object Proxy]';

  /**
   * Checks if `value` is classified as a `Function` object.
   *
   * @static
   * @memberOf _
   * @since 0.1.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a function, else `false`.
   * @example
   *
   * _.isFunction(_);
   * // => true
   *
   * _.isFunction(/abc/);
   * // => false
   */
  function isFunction$1(value) {
    if (!isObject_1(value)) {
      return false;
    }
    // The use of `Object#toString` avoids issues with the `typeof` operator
    // in Safari 9 which returns 'object' for typed arrays and other constructors.
    var tag = _baseGetTag(value);
    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
  }

  var isFunction_1 = isFunction$1;

  /** Used to detect overreaching core-js shims. */
  var coreJsData = _root['__core-js_shared__'];

  var _coreJsData = coreJsData;

  /** Used to detect methods masquerading as native. */
  var maskSrcKey = (function() {
    var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');
    return uid ? ('Symbol(src)_1.' + uid) : '';
  }());

  /**
   * Checks if `func` has its source masked.
   *
   * @private
   * @param {Function} func The function to check.
   * @returns {boolean} Returns `true` if `func` is masked, else `false`.
   */
  function isMasked(func) {
    return !!maskSrcKey && (maskSrcKey in func);
  }

  var _isMasked = isMasked;

  /** Used for built-in method references. */
  var funcProto = Function.prototype;

  /** Used to resolve the decompiled source of functions. */
  var funcToString = funcProto.toString;

  /**
   * Converts `func` to its source code.
   *
   * @private
   * @param {Function} func The function to convert.
   * @returns {string} Returns the source code.
   */
  function toSource(func) {
    if (func != null) {
      try {
        return funcToString.call(func);
      } catch (e) {}
      try {
        return (func + '');
      } catch (e) {}
    }
    return '';
  }

  var _toSource = toSource;

  /**
   * Used to match `RegExp`
   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
   */
  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

  /** Used to detect host constructors (Safari). */
  var reIsHostCtor = /^\[object .+?Constructor\]$/;

  /** Used for built-in method references. */
  var funcProto$1 = Function.prototype,
      objectProto$2 = Object.prototype;

  /** Used to resolve the decompiled source of functions. */
  var funcToString$1 = funcProto$1.toString;

  /** Used to check objects for own properties. */
  var hasOwnProperty$1 = objectProto$2.hasOwnProperty;

  /** Used to detect if a method is native. */
  var reIsNative = RegExp('^' +
    funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\$&')
    .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
  );

  /**
   * The base implementation of `_.isNative` without bad shim checks.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a native function,
   *  else `false`.
   */
  function baseIsNative(value) {
    if (!isObject_1(value) || _isMasked(value)) {
      return false;
    }
    var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;
    return pattern.test(_toSource(value));
  }

  var _baseIsNative = baseIsNative;

  /**
   * Gets the value at `key` of `object`.
   *
   * @private
   * @param {Object} [object] The object to query.
   * @param {string} key The key of the property to get.
   * @returns {*} Returns the property value.
   */
  function getValue(object, key) {
    return object == null ? undefined : object[key];
  }

  var _getValue = getValue;

  /**
   * Gets the native function at `key` of `object`.
   *
   * @private
   * @param {Object} object The object to query.
   * @param {string} key The key of the method to get.
   * @returns {*} Returns the function if it's native, else `undefined`.
   */
  function getNative(object, key) {
    var value = _getValue(object, key);
    return _baseIsNative(value) ? value : undefined;
  }

  var _getNative = getNative;

  /* Built-in method references that are verified to be native. */
  var Map$1 = _getNative(_root, 'Map');

  var _Map = Map$1;

  /* Built-in method references that are verified to be native. */
  var nativeCreate = _getNative(Object, 'create');

  var _nativeCreate = nativeCreate;

  /**
   * Removes all key-value entries from the hash.
   *
   * @private
   * @name clear
   * @memberOf Hash
   */
  function hashClear() {
    this.__data__ = _nativeCreate ? _nativeCreate(null) : {};
    this.size = 0;
  }

  var _hashClear = hashClear;

  /**
   * Removes `key` and its value from the hash.
   *
   * @private
   * @name delete
   * @memberOf Hash
   * @param {Object} hash The hash to modify.
   * @param {string} key The key of the value to remove.
   * @returns {boolean} Returns `true` if the entry was removed, else `false`.
   */
  function hashDelete(key) {
    var result = this.has(key) && delete this.__data__[key];
    this.size -= result ? 1 : 0;
    return result;
  }

  var _hashDelete = hashDelete;

  /** Used to stand-in for `undefined` hash values. */
  var HASH_UNDEFINED = '__lodash_hash_undefined__';

  /** Used for built-in method references. */
  var objectProto$3 = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$2 = objectProto$3.hasOwnProperty;

  /**
   * Gets the hash value for `key`.
   *
   * @private
   * @name get
   * @memberOf Hash
   * @param {string} key The key of the value to get.
   * @returns {*} Returns the entry value.
   */
  function hashGet(key) {
    var data = this.__data__;
    if (_nativeCreate) {
      var result = data[key];
      return result === HASH_UNDEFINED ? undefined : result;
    }
    return hasOwnProperty$2.call(data, key) ? data[key] : undefined;
  }

  var _hashGet = hashGet;

  /** Used for built-in method references. */
  var objectProto$4 = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$3 = objectProto$4.hasOwnProperty;

  /**
   * Checks if a hash value for `key` exists.
   *
   * @private
   * @name has
   * @memberOf Hash
   * @param {string} key The key of the entry to check.
   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
   */
  function hashHas(key) {
    var data = this.__data__;
    return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);
  }

  var _hashHas = hashHas;

  /** Used to stand-in for `undefined` hash values. */
  var HASH_UNDEFINED$1 = '__lodash_hash_undefined__';

  /**
   * Sets the hash `key` to `value`.
   *
   * @private
   * @name set
   * @memberOf Hash
   * @param {string} key The key of the value to set.
   * @param {*} value The value to set.
   * @returns {Object} Returns the hash instance.
   */
  function hashSet(key, value) {
    var data = this.__data__;
    this.size += this.has(key) ? 0 : 1;
    data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;
    return this;
  }

  var _hashSet = hashSet;

  /**
   * Creates a hash object.
   *
   * @private
   * @constructor
   * @param {Array} [entries] The key-value pairs to cache.
   */
  function Hash(entries) {
    var index = -1,
        length = entries == null ? 0 : entries.length;

    this.clear();
    while (++index < length) {
      var entry = entries[index];
      this.set(entry[0], entry[1]);
    }
  }

  // Add methods to `Hash`.
  Hash.prototype.clear = _hashClear;
  Hash.prototype['delete'] = _hashDelete;
  Hash.prototype.get = _hashGet;
  Hash.prototype.has = _hashHas;
  Hash.prototype.set = _hashSet;

  var _Hash = Hash;

  /**
   * Removes all key-value entries from the map.
   *
   * @private
   * @name clear
   * @memberOf MapCache
   */
  function mapCacheClear() {
    this.size = 0;
    this.__data__ = {
      'hash': new _Hash,
      'map': new (_Map || _ListCache),
      'string': new _Hash
    };
  }

  var _mapCacheClear = mapCacheClear;

  /**
   * Checks if `value` is suitable for use as unique object key.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
   */
  function isKeyable(value) {
    var type = typeof value;
    return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
      ? (value !== '__proto__')
      : (value === null);
  }

  var _isKeyable = isKeyable;

  /**
   * Gets the data for `map`.
   *
   * @private
   * @param {Object} map The map to query.
   * @param {string} key The reference key.
   * @returns {*} Returns the map data.
   */
  function getMapData(map, key) {
    var data = map.__data__;
    return _isKeyable(key)
      ? data[typeof key == 'string' ? 'string' : 'hash']
      : data.map;
  }

  var _getMapData = getMapData;

  /**
   * Removes `key` and its value from the map.
   *
   * @private
   * @name delete
   * @memberOf MapCache
   * @param {string} key The key of the value to remove.
   * @returns {boolean} Returns `true` if the entry was removed, else `false`.
   */
  function mapCacheDelete(key) {
    var result = _getMapData(this, key)['delete'](key);
    this.size -= result ? 1 : 0;
    return result;
  }

  var _mapCacheDelete = mapCacheDelete;

  /**
   * Gets the map value for `key`.
   *
   * @private
   * @name get
   * @memberOf MapCache
   * @param {string} key The key of the value to get.
   * @returns {*} Returns the entry value.
   */
  function mapCacheGet(key) {
    return _getMapData(this, key).get(key);
  }

  var _mapCacheGet = mapCacheGet;

  /**
   * Checks if a map value for `key` exists.
   *
   * @private
   * @name has
   * @memberOf MapCache
   * @param {string} key The key of the entry to check.
   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
   */
  function mapCacheHas(key) {
    return _getMapData(this, key).has(key);
  }

  var _mapCacheHas = mapCacheHas;

  /**
   * Sets the map `key` to `value`.
   *
   * @private
   * @name set
   * @memberOf MapCache
   * @param {string} key The key of the value to set.
   * @param {*} value The value to set.
   * @returns {Object} Returns the map cache instance.
   */
  function mapCacheSet(key, value) {
    var data = _getMapData(this, key),
        size = data.size;

    data.set(key, value);
    this.size += data.size == size ? 0 : 1;
    return this;
  }

  var _mapCacheSet = mapCacheSet;

  /**
   * Creates a map cache object to store key-value pairs.
   *
   * @private
   * @constructor
   * @param {Array} [entries] The key-value pairs to cache.
   */
  function MapCache(entries) {
    var index = -1,
        length = entries == null ? 0 : entries.length;

    this.clear();
    while (++index < length) {
      var entry = entries[index];
      this.set(entry[0], entry[1]);
    }
  }

  // Add methods to `MapCache`.
  MapCache.prototype.clear = _mapCacheClear;
  MapCache.prototype['delete'] = _mapCacheDelete;
  MapCache.prototype.get = _mapCacheGet;
  MapCache.prototype.has = _mapCacheHas;
  MapCache.prototype.set = _mapCacheSet;

  var _MapCache = MapCache;

  /** Used as the size to enable large array optimizations. */
  var LARGE_ARRAY_SIZE = 200;

  /**
   * Sets the stack `key` to `value`.
   *
   * @private
   * @name set
   * @memberOf Stack
   * @param {string} key The key of the value to set.
   * @param {*} value The value to set.
   * @returns {Object} Returns the stack cache instance.
   */
  function stackSet(key, value) {
    var data = this.__data__;
    if (data instanceof _ListCache) {
      var pairs = data.__data__;
      if (!_Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
        pairs.push([key, value]);
        this.size = ++data.size;
        return this;
      }
      data = this.__data__ = new _MapCache(pairs);
    }
    data.set(key, value);
    this.size = data.size;
    return this;
  }

  var _stackSet = stackSet;

  /**
   * Creates a stack cache object to store key-value pairs.
   *
   * @private
   * @constructor
   * @param {Array} [entries] The key-value pairs to cache.
   */
  function Stack(entries) {
    var data = this.__data__ = new _ListCache(entries);
    this.size = data.size;
  }

  // Add methods to `Stack`.
  Stack.prototype.clear = _stackClear;
  Stack.prototype['delete'] = _stackDelete;
  Stack.prototype.get = _stackGet;
  Stack.prototype.has = _stackHas;
  Stack.prototype.set = _stackSet;

  var _Stack = Stack;

  /**
   * A specialized version of `_.forEach` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns `array`.
   */
  function arrayEach(array, iteratee) {
    var index = -1,
        length = array == null ? 0 : array.length;

    while (++index < length) {
      if (iteratee(array[index], index, array) === false) {
        break;
      }
    }
    return array;
  }

  var _arrayEach = arrayEach;

  var defineProperty = (function() {
    try {
      var func = _getNative(Object, 'defineProperty');
      func({}, '', {});
      return func;
    } catch (e) {}
  }());

  var _defineProperty$1 = defineProperty;

  /**
   * The base implementation of `assignValue` and `assignMergeValue` without
   * value checks.
   *
   * @private
   * @param {Object} object The object to modify.
   * @param {string} key The key of the property to assign.
   * @param {*} value The value to assign.
   */
  function baseAssignValue(object, key, value) {
    if (key == '__proto__' && _defineProperty$1) {
      _defineProperty$1(object, key, {
        'configurable': true,
        'enumerable': true,
        'value': value,
        'writable': true
      });
    } else {
      object[key] = value;
    }
  }

  var _baseAssignValue = baseAssignValue;

  /** Used for built-in method references. */
  var objectProto$5 = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$4 = objectProto$5.hasOwnProperty;

  /**
   * Assigns `value` to `key` of `object` if the existing value is not equivalent
   * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
   * for equality comparisons.
   *
   * @private
   * @param {Object} object The object to modify.
   * @param {string} key The key of the property to assign.
   * @param {*} value The value to assign.
   */
  function assignValue(object, key, value) {
    var objValue = object[key];
    if (!(hasOwnProperty$4.call(object, key) && eq_1(objValue, value)) ||
        (value === undefined && !(key in object))) {
      _baseAssignValue(object, key, value);
    }
  }

  var _assignValue = assignValue;

  /**
   * Copies properties of `source` to `object`.
   *
   * @private
   * @param {Object} source The object to copy properties from.
   * @param {Array} props The property identifiers to copy.
   * @param {Object} [object={}] The object to copy properties to.
   * @param {Function} [customizer] The function to customize copied values.
   * @returns {Object} Returns `object`.
   */
  function copyObject(source, props, object, customizer) {
    var isNew = !object;
    object || (object = {});

    var index = -1,
        length = props.length;

    while (++index < length) {
      var key = props[index];

      var newValue = customizer
        ? customizer(object[key], source[key], key, object, source)
        : undefined;

      if (newValue === undefined) {
        newValue = source[key];
      }
      if (isNew) {
        _baseAssignValue(object, key, newValue);
      } else {
        _assignValue(object, key, newValue);
      }
    }
    return object;
  }

  var _copyObject = copyObject;

  /**
   * The base implementation of `_.times` without support for iteratee shorthands
   * or max array length checks.
   *
   * @private
   * @param {number} n The number of times to invoke `iteratee`.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns the array of results.
   */
  function baseTimes(n, iteratee) {
    var index = -1,
        result = Array(n);

    while (++index < n) {
      result[index] = iteratee(index);
    }
    return result;
  }

  var _baseTimes = baseTimes;

  /** `Object#toString` result references. */
  var argsTag = '[object Arguments]';

  /**
   * The base implementation of `_.isArguments`.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is an `arguments` object,
   */
  function baseIsArguments(value) {
    return isObjectLike_1(value) && _baseGetTag(value) == argsTag;
  }

  var _baseIsArguments = baseIsArguments;

  /** Used for built-in method references. */
  var objectProto$6 = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$5 = objectProto$6.hasOwnProperty;

  /** Built-in value references. */
  var propertyIsEnumerable = objectProto$6.propertyIsEnumerable;

  /**
   * Checks if `value` is likely an `arguments` object.
   *
   * @static
   * @memberOf _
   * @since 0.1.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is an `arguments` object,
   *  else `false`.
   * @example
   *
   * _.isArguments(function() { return arguments; }());
   * // => true
   *
   * _.isArguments([1, 2, 3]);
   * // => false
   */
  var isArguments = _baseIsArguments(function() { return arguments; }()) ? _baseIsArguments : function(value) {
    return isObjectLike_1(value) && hasOwnProperty$5.call(value, 'callee') &&
      !propertyIsEnumerable.call(value, 'callee');
  };

  var isArguments_1 = isArguments;

  /**
   * Checks if `value` is classified as an `Array` object.
   *
   * @static
   * @memberOf _
   * @since 0.1.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is an array, else `false`.
   * @example
   *
   * _.isArray([1, 2, 3]);
   * // => true
   *
   * _.isArray(document.body.children);
   * // => false
   *
   * _.isArray('abc');
   * // => false
   *
   * _.isArray(_.noop);
   * // => false
   */
  var isArray = Array.isArray;

  var isArray_1 = isArray;

  /**
   * This method returns `false`.
   *
   * @static
   * @memberOf _
   * @since 4.13.0
   * @category Util
   * @returns {boolean} Returns `false`.
   * @example
   *
   * _.times(2, _.stubFalse);
   * // => [false, false]
   */
  function stubFalse() {
    return false;
  }

  var stubFalse_1 = stubFalse;

  var isBuffer_1 = createCommonjsModule(function (module, exports) {
  /** Detect free variable `exports`. */
  var freeExports =  exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports;

  /** Built-in value references. */
  var Buffer = moduleExports ? _root.Buffer : undefined;

  /* Built-in method references for those with the same name as other `lodash` methods. */
  var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;

  /**
   * Checks if `value` is a buffer.
   *
   * @static
   * @memberOf _
   * @since 4.3.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
   * @example
   *
   * _.isBuffer(new Buffer(2));
   * // => true
   *
   * _.isBuffer(new Uint8Array(2));
   * // => false
   */
  var isBuffer = nativeIsBuffer || stubFalse_1;

  module.exports = isBuffer;
  });

  /** Used as references for various `Number` constants. */
  var MAX_SAFE_INTEGER = 9007199254740991;

  /** Used to detect unsigned integer values. */
  var reIsUint = /^(?:0|[1-9]\d*)$/;

  /**
   * Checks if `value` is a valid array-like index.
   *
   * @private
   * @param {*} value The value to check.
   * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
   * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
   */
  function isIndex(value, length) {
    var type = typeof value;
    length = length == null ? MAX_SAFE_INTEGER : length;

    return !!length &&
      (type == 'number' ||
        (type != 'symbol' && reIsUint.test(value))) &&
          (value > -1 && value % 1 == 0 && value < length);
  }

  var _isIndex = isIndex;

  /** Used as references for various `Number` constants. */
  var MAX_SAFE_INTEGER$1 = 9007199254740991;

  /**
   * Checks if `value` is a valid array-like length.
   *
   * **Note:** This method is loosely based on
   * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
   * @example
   *
   * _.isLength(3);
   * // => true
   *
   * _.isLength(Number.MIN_VALUE);
   * // => false
   *
   * _.isLength(Infinity);
   * // => false
   *
   * _.isLength('3');
   * // => false
   */
  function isLength(value) {
    return typeof value == 'number' &&
      value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER$1;
  }

  var isLength_1 = isLength;

  /** `Object#toString` result references. */
  var argsTag$1 = '[object Arguments]',
      arrayTag = '[object Array]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      errorTag = '[object Error]',
      funcTag$1 = '[object Function]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      objectTag = '[object Object]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      weakMapTag = '[object WeakMap]';

  var arrayBufferTag = '[object ArrayBuffer]',
      dataViewTag = '[object DataView]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';

  /** Used to identify `toStringTag` values of typed arrays. */
  var typedArrayTags = {};
  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
  typedArrayTags[uint32Tag] = true;
  typedArrayTags[argsTag$1] = typedArrayTags[arrayTag] =
  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
  typedArrayTags[errorTag] = typedArrayTags[funcTag$1] =
  typedArrayTags[mapTag] = typedArrayTags[numberTag] =
  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
  typedArrayTags[setTag] = typedArrayTags[stringTag] =
  typedArrayTags[weakMapTag] = false;

  /**
   * The base implementation of `_.isTypedArray` without Node.js optimizations.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
   */
  function baseIsTypedArray(value) {
    return isObjectLike_1(value) &&
      isLength_1(value.length) && !!typedArrayTags[_baseGetTag(value)];
  }

  var _baseIsTypedArray = baseIsTypedArray;

  /**
   * The base implementation of `_.unary` without support for storing metadata.
   *
   * @private
   * @param {Function} func The function to cap arguments for.
   * @returns {Function} Returns the new capped function.
   */
  function baseUnary(func) {
    return function(value) {
      return func(value);
    };
  }

  var _baseUnary = baseUnary;

  var _nodeUtil = createCommonjsModule(function (module, exports) {
  /** Detect free variable `exports`. */
  var freeExports =  exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports;

  /** Detect free variable `process` from Node.js. */
  var freeProcess = moduleExports && _freeGlobal.process;

  /** Used to access faster Node.js helpers. */
  var nodeUtil = (function() {
    try {
      // Use `util.types` for Node.js 10+.
      var types = freeModule && freeModule.require && freeModule.require('util').types;

      if (types) {
        return types;
      }

      // Legacy `process.binding('util')` for Node.js < 10.
      return freeProcess && freeProcess.binding && freeProcess.binding('util');
    } catch (e) {}
  }());

  module.exports = nodeUtil;
  });

  /* Node.js helper references. */
  var nodeIsTypedArray = _nodeUtil && _nodeUtil.isTypedArray;

  /**
   * Checks if `value` is classified as a typed array.
   *
   * @static
   * @memberOf _
   * @since 3.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
   * @example
   *
   * _.isTypedArray(new Uint8Array);
   * // => true
   *
   * _.isTypedArray([]);
   * // => false
   */
  var isTypedArray = nodeIsTypedArray ? _baseUnary(nodeIsTypedArray) : _baseIsTypedArray;

  var isTypedArray_1 = isTypedArray;

  /** Used for built-in method references. */
  var objectProto$7 = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$6 = objectProto$7.hasOwnProperty;

  /**
   * Creates an array of the enumerable property names of the array-like `value`.
   *
   * @private
   * @param {*} value The value to query.
   * @param {boolean} inherited Specify returning inherited property names.
   * @returns {Array} Returns the array of property names.
   */
  function arrayLikeKeys(value, inherited) {
    var isArr = isArray_1(value),
        isArg = !isArr && isArguments_1(value),
        isBuff = !isArr && !isArg && isBuffer_1(value),
        isType = !isArr && !isArg && !isBuff && isTypedArray_1(value),
        skipIndexes = isArr || isArg || isBuff || isType,
        result = skipIndexes ? _baseTimes(value.length, String) : [],
        length = result.length;

    for (var key in value) {
      if ((inherited || hasOwnProperty$6.call(value, key)) &&
          !(skipIndexes && (
             // Safari 9 has enumerable `arguments.length` in strict mode.
             key == 'length' ||
             // Node.js 0.10 has enumerable non-index properties on buffers.
             (isBuff && (key == 'offset' || key == 'parent')) ||
             // PhantomJS 2 has enumerable non-index properties on typed arrays.
             (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
             // Skip index properties.
             _isIndex(key, length)
          ))) {
        result.push(key);
      }
    }
    return result;
  }

  var _arrayLikeKeys = arrayLikeKeys;

  /** Used for built-in method references. */
  var objectProto$8 = Object.prototype;

  /**
   * Checks if `value` is likely a prototype object.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
   */
  function isPrototype(value) {
    var Ctor = value && value.constructor,
        proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$8;

    return value === proto;
  }

  var _isPrototype = isPrototype;

  /**
   * Creates a unary function that invokes `func` with its argument transformed.
   *
   * @private
   * @param {Function} func The function to wrap.
   * @param {Function} transform The argument transform.
   * @returns {Function} Returns the new function.
   */
  function overArg(func, transform) {
    return function(arg) {
      return func(transform(arg));
    };
  }

  var _overArg = overArg;

  /* Built-in method references for those with the same name as other `lodash` methods. */
  var nativeKeys = _overArg(Object.keys, Object);

  var _nativeKeys = nativeKeys;

  /** Used for built-in method references. */
  var objectProto$9 = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$7 = objectProto$9.hasOwnProperty;

  /**
   * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names.
   */
  function baseKeys(object) {
    if (!_isPrototype(object)) {
      return _nativeKeys(object);
    }
    var result = [];
    for (var key in Object(object)) {
      if (hasOwnProperty$7.call(object, key) && key != 'constructor') {
        result.push(key);
      }
    }
    return result;
  }

  var _baseKeys = baseKeys;

  /**
   * Checks if `value` is array-like. A value is considered array-like if it's
   * not a function and has a `value.length` that's an integer greater than or
   * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
   * @example
   *
   * _.isArrayLike([1, 2, 3]);
   * // => true
   *
   * _.isArrayLike(document.body.children);
   * // => true
   *
   * _.isArrayLike('abc');
   * // => true
   *
   * _.isArrayLike(_.noop);
   * // => false
   */
  function isArrayLike(value) {
    return value != null && isLength_1(value.length) && !isFunction_1(value);
  }

  var isArrayLike_1 = isArrayLike;

  /**
   * Creates an array of the own enumerable property names of `object`.
   *
   * **Note:** Non-object values are coerced to objects. See the
   * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
   * for more details.
   *
   * @static
   * @since 0.1.0
   * @memberOf _
   * @category Object
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names.
   * @example
   *
   * function Foo() {
   *   this.a = 1;
   *   this.b = 2;
   * }
   *
   * Foo.prototype.c = 3;
   *
   * _.keys(new Foo);
   * // => ['a', 'b'] (iteration order is not guaranteed)
   *
   * _.keys('hi');
   * // => ['0', '1']
   */
  function keys(object) {
    return isArrayLike_1(object) ? _arrayLikeKeys(object) : _baseKeys(object);
  }

  var keys_1 = keys;

  /**
   * The base implementation of `_.assign` without support for multiple sources
   * or `customizer` functions.
   *
   * @private
   * @param {Object} object The destination object.
   * @param {Object} source The source object.
   * @returns {Object} Returns `object`.
   */
  function baseAssign(object, source) {
    return object && _copyObject(source, keys_1(source), object);
  }

  var _baseAssign = baseAssign;

  /**
   * This function is like
   * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
   * except that it includes inherited enumerable properties.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names.
   */
  function nativeKeysIn(object) {
    var result = [];
    if (object != null) {
      for (var key in Object(object)) {
        result.push(key);
      }
    }
    return result;
  }

  var _nativeKeysIn = nativeKeysIn;

  /** Used for built-in method references. */
  var objectProto$a = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$8 = objectProto$a.hasOwnProperty;

  /**
   * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names.
   */
  function baseKeysIn(object) {
    if (!isObject_1(object)) {
      return _nativeKeysIn(object);
    }
    var isProto = _isPrototype(object),
        result = [];

    for (var key in object) {
      if (!(key == 'constructor' && (isProto || !hasOwnProperty$8.call(object, key)))) {
        result.push(key);
      }
    }
    return result;
  }

  var _baseKeysIn = baseKeysIn;

  /**
   * Creates an array of the own and inherited enumerable property names of `object`.
   *
   * **Note:** Non-object values are coerced to objects.
   *
   * @static
   * @memberOf _
   * @since 3.0.0
   * @category Object
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names.
   * @example
   *
   * function Foo() {
   *   this.a = 1;
   *   this.b = 2;
   * }
   *
   * Foo.prototype.c = 3;
   *
   * _.keysIn(new Foo);
   * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
   */
  function keysIn$1(object) {
    return isArrayLike_1(object) ? _arrayLikeKeys(object, true) : _baseKeysIn(object);
  }

  var keysIn_1 = keysIn$1;

  /**
   * The base implementation of `_.assignIn` without support for multiple sources
   * or `customizer` functions.
   *
   * @private
   * @param {Object} object The destination object.
   * @param {Object} source The source object.
   * @returns {Object} Returns `object`.
   */
  function baseAssignIn(object, source) {
    return object && _copyObject(source, keysIn_1(source), object);
  }

  var _baseAssignIn = baseAssignIn;

  var _cloneBuffer = createCommonjsModule(function (module, exports) {
  /** Detect free variable `exports`. */
  var freeExports =  exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports;

  /** Built-in value references. */
  var Buffer = moduleExports ? _root.Buffer : undefined,
      allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;

  /**
   * Creates a clone of  `buffer`.
   *
   * @private
   * @param {Buffer} buffer The buffer to clone.
   * @param {boolean} [isDeep] Specify a deep clone.
   * @returns {Buffer} Returns the cloned buffer.
   */
  function cloneBuffer(buffer, isDeep) {
    if (isDeep) {
      return buffer.slice();
    }
    var length = buffer.length,
        result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);

    buffer.copy(result);
    return result;
  }

  module.exports = cloneBuffer;
  });

  /**
   * Copies the values of `source` to `array`.
   *
   * @private
   * @param {Array} source The array to copy values from.
   * @param {Array} [array=[]] The array to copy values to.
   * @returns {Array} Returns `array`.
   */
  function copyArray(source, array) {
    var index = -1,
        length = source.length;

    array || (array = Array(length));
    while (++index < length) {
      array[index] = source[index];
    }
    return array;
  }

  var _copyArray = copyArray;

  /**
   * A specialized version of `_.filter` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {Array} Returns the new filtered array.
   */
  function arrayFilter(array, predicate) {
    var index = -1,
        length = array == null ? 0 : array.length,
        resIndex = 0,
        result = [];

    while (++index < length) {
      var value = array[index];
      if (predicate(value, index, array)) {
        result[resIndex++] = value;
      }
    }
    return result;
  }

  var _arrayFilter = arrayFilter;

  /**
   * This method returns a new empty array.
   *
   * @static
   * @memberOf _
   * @since 4.13.0
   * @category Util
   * @returns {Array} Returns the new empty array.
   * @example
   *
   * var arrays = _.times(2, _.stubArray);
   *
   * console.log(arrays);
   * // => [[], []]
   *
   * console.log(arrays[0] === arrays[1]);
   * // => false
   */
  function stubArray() {
    return [];
  }

  var stubArray_1 = stubArray;

  /** Used for built-in method references. */
  var objectProto$b = Object.prototype;

  /** Built-in value references. */
  var propertyIsEnumerable$1 = objectProto$b.propertyIsEnumerable;

  /* Built-in method references for those with the same name as other `lodash` methods. */
  var nativeGetSymbols = Object.getOwnPropertySymbols;

  /**
   * Creates an array of the own enumerable symbols of `object`.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of symbols.
   */
  var getSymbols = !nativeGetSymbols ? stubArray_1 : function(object) {
    if (object == null) {
      return [];
    }
    object = Object(object);
    return _arrayFilter(nativeGetSymbols(object), function(symbol) {
      return propertyIsEnumerable$1.call(object, symbol);
    });
  };

  var _getSymbols = getSymbols;

  /**
   * Copies own symbols of `source` to `object`.
   *
   * @private
   * @param {Object} source The object to copy symbols from.
   * @param {Object} [object={}] The object to copy symbols to.
   * @returns {Object} Returns `object`.
   */
  function copySymbols(source, object) {
    return _copyObject(source, _getSymbols(source), object);
  }

  var _copySymbols = copySymbols;

  /**
   * Appends the elements of `values` to `array`.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {Array} values The values to append.
   * @returns {Array} Returns `array`.
   */
  function arrayPush(array, values) {
    var index = -1,
        length = values.length,
        offset = array.length;

    while (++index < length) {
      array[offset + index] = values[index];
    }
    return array;
  }

  var _arrayPush = arrayPush;

  /** Built-in value references. */
  var getPrototype = _overArg(Object.getPrototypeOf, Object);

  var _getPrototype = getPrototype;

  /* Built-in method references for those with the same name as other `lodash` methods. */
  var nativeGetSymbols$1 = Object.getOwnPropertySymbols;

  /**
   * Creates an array of the own and inherited enumerable symbols of `object`.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of symbols.
   */
  var getSymbolsIn = !nativeGetSymbols$1 ? stubArray_1 : function(object) {
    var result = [];
    while (object) {
      _arrayPush(result, _getSymbols(object));
      object = _getPrototype(object);
    }
    return result;
  };

  var _getSymbolsIn = getSymbolsIn;

  /**
   * Copies own and inherited symbols of `source` to `object`.
   *
   * @private
   * @param {Object} source The object to copy symbols from.
   * @param {Object} [object={}] The object to copy symbols to.
   * @returns {Object} Returns `object`.
   */
  function copySymbolsIn(source, object) {
    return _copyObject(source, _getSymbolsIn(source), object);
  }

  var _copySymbolsIn = copySymbolsIn;

  /**
   * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
   * `keysFunc` and `symbolsFunc` to get the enumerable property names and
   * symbols of `object`.
   *
   * @private
   * @param {Object} object The object to query.
   * @param {Function} keysFunc The function to get the keys of `object`.
   * @param {Function} symbolsFunc The function to get the symbols of `object`.
   * @returns {Array} Returns the array of property names and symbols.
   */
  function baseGetAllKeys(object, keysFunc, symbolsFunc) {
    var result = keysFunc(object);
    return isArray_1(object) ? result : _arrayPush(result, symbolsFunc(object));
  }

  var _baseGetAllKeys = baseGetAllKeys;

  /**
   * Creates an array of own enumerable property names and symbols of `object`.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names and symbols.
   */
  function getAllKeys(object) {
    return _baseGetAllKeys(object, keys_1, _getSymbols);
  }

  var _getAllKeys = getAllKeys;

  /**
   * Creates an array of own and inherited enumerable property names and
   * symbols of `object`.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Array} Returns the array of property names and symbols.
   */
  function getAllKeysIn(object) {
    return _baseGetAllKeys(object, keysIn_1, _getSymbolsIn);
  }

  var _getAllKeysIn = getAllKeysIn;

  /* Built-in method references that are verified to be native. */
  var DataView = _getNative(_root, 'DataView');

  var _DataView = DataView;

  /* Built-in method references that are verified to be native. */
  var Promise$1 = _getNative(_root, 'Promise');

  var _Promise = Promise$1;

  /* Built-in method references that are verified to be native. */
  var Set$1 = _getNative(_root, 'Set');

  var _Set = Set$1;

  /* Built-in method references that are verified to be native. */
  var WeakMap = _getNative(_root, 'WeakMap');

  var _WeakMap = WeakMap;

  /** `Object#toString` result references. */
  var mapTag$1 = '[object Map]',
      objectTag$1 = '[object Object]',
      promiseTag = '[object Promise]',
      setTag$1 = '[object Set]',
      weakMapTag$1 = '[object WeakMap]';

  var dataViewTag$1 = '[object DataView]';

  /** Used to detect maps, sets, and weakmaps. */
  var dataViewCtorString = _toSource(_DataView),
      mapCtorString = _toSource(_Map),
      promiseCtorString = _toSource(_Promise),
      setCtorString = _toSource(_Set),
      weakMapCtorString = _toSource(_WeakMap);

  /**
   * Gets the `toStringTag` of `value`.
   *
   * @private
   * @param {*} value The value to query.
   * @returns {string} Returns the `toStringTag`.
   */
  var getTag = _baseGetTag;

  // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.
  if ((_DataView && getTag(new _DataView(new ArrayBuffer(1))) != dataViewTag$1) ||
      (_Map && getTag(new _Map) != mapTag$1) ||
      (_Promise && getTag(_Promise.resolve()) != promiseTag) ||
      (_Set && getTag(new _Set) != setTag$1) ||
      (_WeakMap && getTag(new _WeakMap) != weakMapTag$1)) {
    getTag = function(value) {
      var result = _baseGetTag(value),
          Ctor = result == objectTag$1 ? value.constructor : undefined,
          ctorString = Ctor ? _toSource(Ctor) : '';

      if (ctorString) {
        switch (ctorString) {
          case dataViewCtorString: return dataViewTag$1;
          case mapCtorString: return mapTag$1;
          case promiseCtorString: return promiseTag;
          case setCtorString: return setTag$1;
          case weakMapCtorString: return weakMapTag$1;
        }
      }
      return result;
    };
  }

  var _getTag = getTag;

  /** Used for built-in method references. */
  var objectProto$c = Object.prototype;

  /** Used to check objects for own properties. */
  var hasOwnProperty$9 = objectProto$c.hasOwnProperty;

  /**
   * Initializes an array clone.
   *
   * @private
   * @param {Array} array The array to clone.
   * @returns {Array} Returns the initialized clone.
   */
  function initCloneArray(array) {
    var length = array.length,
        result = new array.constructor(length);

    // Add properties assigned by `RegExp#exec`.
    if (length && typeof array[0] == 'string' && hasOwnProperty$9.call(array, 'index')) {
      result.index = array.index;
      result.input = array.input;
    }
    return result;
  }

  var _initCloneArray = initCloneArray;

  /** Built-in value references. */
  var Uint8Array$1 = _root.Uint8Array;

  var _Uint8Array = Uint8Array$1;

  /**
   * Creates a clone of `arrayBuffer`.
   *
   * @private
   * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
   * @returns {ArrayBuffer} Returns the cloned array buffer.
   */
  function cloneArrayBuffer(arrayBuffer) {
    var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
    new _Uint8Array(result).set(new _Uint8Array(arrayBuffer));
    return result;
  }

  var _cloneArrayBuffer = cloneArrayBuffer;

  /**
   * Creates a clone of `dataView`.
   *
   * @private
   * @param {Object} dataView The data view to clone.
   * @param {boolean} [isDeep] Specify a deep clone.
   * @returns {Object} Returns the cloned data view.
   */
  function cloneDataView(dataView, isDeep) {
    var buffer = isDeep ? _cloneArrayBuffer(dataView.buffer) : dataView.buffer;
    return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
  }

  var _cloneDataView = cloneDataView;

  /** Used to match `RegExp` flags from their coerced string values. */
  var reFlags = /\w*$/;

  /**
   * Creates a clone of `regexp`.
   *
   * @private
   * @param {Object} regexp The regexp to clone.
   * @returns {Object} Returns the cloned regexp.
   */
  function cloneRegExp(regexp) {
    var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
    result.lastIndex = regexp.lastIndex;
    return result;
  }

  var _cloneRegExp = cloneRegExp;

  /** Used to convert symbols to primitives and strings. */
  var symbolProto = _Symbol ? _Symbol.prototype : undefined,
      symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;

  /**
   * Creates a clone of the `symbol` object.
   *
   * @private
   * @param {Object} symbol The symbol object to clone.
   * @returns {Object} Returns the cloned symbol object.
   */
  function cloneSymbol(symbol) {
    return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
  }

  var _cloneSymbol = cloneSymbol;

  /**
   * Creates a clone of `typedArray`.
   *
   * @private
   * @param {Object} typedArray The typed array to clone.
   * @param {boolean} [isDeep] Specify a deep clone.
   * @returns {Object} Returns the cloned typed array.
   */
  function cloneTypedArray(typedArray, isDeep) {
    var buffer = isDeep ? _cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
    return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
  }

  var _cloneTypedArray = cloneTypedArray;

  /** `Object#toString` result references. */
  var boolTag$1 = '[object Boolean]',
      dateTag$1 = '[object Date]',
      mapTag$2 = '[object Map]',
      numberTag$1 = '[object Number]',
      regexpTag$1 = '[object RegExp]',
      setTag$2 = '[object Set]',
      stringTag$1 = '[object String]',
      symbolTag$1 = '[object Symbol]';

  var arrayBufferTag$1 = '[object ArrayBuffer]',
      dataViewTag$2 = '[object DataView]',
      float32Tag$1 = '[object Float32Array]',
      float64Tag$1 = '[object Float64Array]',
      int8Tag$1 = '[object Int8Array]',
      int16Tag$1 = '[object Int16Array]',
      int32Tag$1 = '[object Int32Array]',
      uint8Tag$1 = '[object Uint8Array]',
      uint8ClampedTag$1 = '[object Uint8ClampedArray]',
      uint16Tag$1 = '[object Uint16Array]',
      uint32Tag$1 = '[object Uint32Array]';

  /**
   * Initializes an object clone based on its `toStringTag`.
   *
   * **Note:** This function only supports cloning values with tags of
   * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.
   *
   * @private
   * @param {Object} object The object to clone.
   * @param {string} tag The `toStringTag` of the object to clone.
   * @param {boolean} [isDeep] Specify a deep clone.
   * @returns {Object} Returns the initialized clone.
   */
  function initCloneByTag(object, tag, isDeep) {
    var Ctor = object.constructor;
    switch (tag) {
      case arrayBufferTag$1:
        return _cloneArrayBuffer(object);

      case boolTag$1:
      case dateTag$1:
        return new Ctor(+object);

      case dataViewTag$2:
        return _cloneDataView(object, isDeep);

      case float32Tag$1: case float64Tag$1:
      case int8Tag$1: case int16Tag$1: case int32Tag$1:
      case uint8Tag$1: case uint8ClampedTag$1: case uint16Tag$1: case uint32Tag$1:
        return _cloneTypedArray(object, isDeep);

      case mapTag$2:
        return new Ctor;

      case numberTag$1:
      case stringTag$1:
        return new Ctor(object);

      case regexpTag$1:
        return _cloneRegExp(object);

      case setTag$2:
        return new Ctor;

      case symbolTag$1:
        return _cloneSymbol(object);
    }
  }

  var _initCloneByTag = initCloneByTag;

  /** Built-in value references. */
  var objectCreate = Object.create;

  /**
   * The base implementation of `_.create` without support for assigning
   * properties to the created object.
   *
   * @private
   * @param {Object} proto The object to inherit from.
   * @returns {Object} Returns the new object.
   */
  var baseCreate = (function() {
    function object() {}
    return function(proto) {
      if (!isObject_1(proto)) {
        return {};
      }
      if (objectCreate) {
        return objectCreate(proto);
      }
      object.prototype = proto;
      var result = new object;
      object.prototype = undefined;
      return result;
    };
  }());

  var _baseCreate = baseCreate;

  /**
   * Initializes an object clone.
   *
   * @private
   * @param {Object} object The object to clone.
   * @returns {Object} Returns the initialized clone.
   */
  function initCloneObject(object) {
    return (typeof object.constructor == 'function' && !_isPrototype(object))
      ? _baseCreate(_getPrototype(object))
      : {};
  }

  var _initCloneObject = initCloneObject;

  /** `Object#toString` result references. */
  var mapTag$3 = '[object Map]';

  /**
   * The base implementation of `_.isMap` without Node.js optimizations.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a map, else `false`.
   */
  function baseIsMap(value) {
    return isObjectLike_1(value) && _getTag(value) == mapTag$3;
  }

  var _baseIsMap = baseIsMap;

  /* Node.js helper references. */
  var nodeIsMap = _nodeUtil && _nodeUtil.isMap;

  /**
   * Checks if `value` is classified as a `Map` object.
   *
   * @static
   * @memberOf _
   * @since 4.3.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a map, else `false`.
   * @example
   *
   * _.isMap(new Map);
   * // => true
   *
   * _.isMap(new WeakMap);
   * // => false
   */
  var isMap = nodeIsMap ? _baseUnary(nodeIsMap) : _baseIsMap;

  var isMap_1 = isMap;

  /** `Object#toString` result references. */
  var setTag$3 = '[object Set]';

  /**
   * The base implementation of `_.isSet` without Node.js optimizations.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a set, else `false`.
   */
  function baseIsSet(value) {
    return isObjectLike_1(value) && _getTag(value) == setTag$3;
  }

  var _baseIsSet = baseIsSet;

  /* Node.js helper references. */
  var nodeIsSet = _nodeUtil && _nodeUtil.isSet;

  /**
   * Checks if `value` is classified as a `Set` object.
   *
   * @static
   * @memberOf _
   * @since 4.3.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a set, else `false`.
   * @example
   *
   * _.isSet(new Set);
   * // => true
   *
   * _.isSet(new WeakSet);
   * // => false
   */
  var isSet = nodeIsSet ? _baseUnary(nodeIsSet) : _baseIsSet;

  var isSet_1 = isSet;

  /** Used to compose bitmasks for cloning. */
  var CLONE_DEEP_FLAG = 1,
      CLONE_FLAT_FLAG = 2,
      CLONE_SYMBOLS_FLAG = 4;

  /** `Object#toString` result references. */
  var argsTag$2 = '[object Arguments]',
      arrayTag$1 = '[object Array]',
      boolTag$2 = '[object Boolean]',
      dateTag$2 = '[object Date]',
      errorTag$1 = '[object Error]',
      funcTag$2 = '[object Function]',
      genTag$1 = '[object GeneratorFunction]',
      mapTag$4 = '[object Map]',
      numberTag$2 = '[object Number]',
      objectTag$2 = '[object Object]',
      regexpTag$2 = '[object RegExp]',
      setTag$4 = '[object Set]',
      stringTag$2 = '[object String]',
      symbolTag$2 = '[object Symbol]',
      weakMapTag$2 = '[object WeakMap]';

  var arrayBufferTag$2 = '[object ArrayBuffer]',
      dataViewTag$3 = '[object DataView]',
      float32Tag$2 = '[object Float32Array]',
      float64Tag$2 = '[object Float64Array]',
      int8Tag$2 = '[object Int8Array]',
      int16Tag$2 = '[object Int16Array]',
      int32Tag$2 = '[object Int32Array]',
      uint8Tag$2 = '[object Uint8Array]',
      uint8ClampedTag$2 = '[object Uint8ClampedArray]',
      uint16Tag$2 = '[object Uint16Array]',
      uint32Tag$2 = '[object Uint32Array]';

  /** Used to identify `toStringTag` values supported by `_.clone`. */
  var cloneableTags = {};
  cloneableTags[argsTag$2] = cloneableTags[arrayTag$1] =
  cloneableTags[arrayBufferTag$2] = cloneableTags[dataViewTag$3] =
  cloneableTags[boolTag$2] = cloneableTags[dateTag$2] =
  cloneableTags[float32Tag$2] = cloneableTags[float64Tag$2] =
  cloneableTags[int8Tag$2] = cloneableTags[int16Tag$2] =
  cloneableTags[int32Tag$2] = cloneableTags[mapTag$4] =
  cloneableTags[numberTag$2] = cloneableTags[objectTag$2] =
  cloneableTags[regexpTag$2] = cloneableTags[setTag$4] =
  cloneableTags[stringTag$2] = cloneableTags[symbolTag$2] =
  cloneableTags[uint8Tag$2] = cloneableTags[uint8ClampedTag$2] =
  cloneableTags[uint16Tag$2] = cloneableTags[uint32Tag$2] = true;
  cloneableTags[errorTag$1] = cloneableTags[funcTag$2] =
  cloneableTags[weakMapTag$2] = false;

  /**
   * The base implementation of `_.clone` and `_.cloneDeep` which tracks
   * traversed objects.
   *
   * @private
   * @param {*} value The value to clone.
   * @param {boolean} bitmask The bitmask flags.
   *  1 - Deep clone
   *  2 - Flatten inherited properties
   *  4 - Clone symbols
   * @param {Function} [customizer] The function to customize cloning.
   * @param {string} [key] The key of `value`.
   * @param {Object} [object] The parent object of `value`.
   * @param {Object} [stack] Tracks traversed objects and their clone counterparts.
   * @returns {*} Returns the cloned value.
   */
  function baseClone(value, bitmask, customizer, key, object, stack) {
    var result,
        isDeep = bitmask & CLONE_DEEP_FLAG,
        isFlat = bitmask & CLONE_FLAT_FLAG,
        isFull = bitmask & CLONE_SYMBOLS_FLAG;

    if (customizer) {
      result = object ? customizer(value, key, object, stack) : customizer(value);
    }
    if (result !== undefined) {
      return result;
    }
    if (!isObject_1(value)) {
      return value;
    }
    var isArr = isArray_1(value);
    if (isArr) {
      result = _initCloneArray(value);
      if (!isDeep) {
        return _copyArray(value, result);
      }
    } else {
      var tag = _getTag(value),
          isFunc = tag == funcTag$2 || tag == genTag$1;

      if (isBuffer_1(value)) {
        return _cloneBuffer(value, isDeep);
      }
      if (tag == objectTag$2 || tag == argsTag$2 || (isFunc && !object)) {
        result = (isFlat || isFunc) ? {} : _initCloneObject(value);
        if (!isDeep) {
          return isFlat
            ? _copySymbolsIn(value, _baseAssignIn(result, value))
            : _copySymbols(value, _baseAssign(result, value));
        }
      } else {
        if (!cloneableTags[tag]) {
          return object ? value : {};
        }
        result = _initCloneByTag(value, tag, isDeep);
      }
    }
    // Check for circular references and return its corresponding clone.
    stack || (stack = new _Stack);
    var stacked = stack.get(value);
    if (stacked) {
      return stacked;
    }
    stack.set(value, result);

    if (isSet_1(value)) {
      value.forEach(function(subValue) {
        result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
      });
    } else if (isMap_1(value)) {
      value.forEach(function(subValue, key) {
        result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
      });
    }

    var keysFunc = isFull
      ? (isFlat ? _getAllKeysIn : _getAllKeys)
      : (isFlat ? keysIn : keys_1);

    var props = isArr ? undefined : keysFunc(value);
    _arrayEach(props || value, function(subValue, key) {
      if (props) {
        key = subValue;
        subValue = value[key];
      }
      // Recursively populate clone (susceptible to call stack limits).
      _assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
    });
    return result;
  }

  var _baseClone = baseClone;

  /** Used to compose bitmasks for cloning. */
  var CLONE_DEEP_FLAG$1 = 1,
      CLONE_SYMBOLS_FLAG$1 = 4;

  /**
   * This method is like `_.clone` except that it recursively clones `value`.
   *
   * @static
   * @memberOf _
   * @since 1.0.0
   * @category Lang
   * @param {*} value The value to recursively clone.
   * @returns {*} Returns the deep cloned value.
   * @see _.clone
   * @example
   *
   * var objects = [{ 'a': 1 }, { 'b': 2 }];
   *
   * var deep = _.cloneDeep(objects);
   * console.log(deep[0] === objects[0]);
   * // => false
   */
  function cloneDeep(value) {
    return _baseClone(value, CLONE_DEEP_FLAG$1 | CLONE_SYMBOLS_FLAG$1);
  }

  var cloneDeep_1 = cloneDeep;

  /**
   * A specialized version of `_.map` for arrays without support for iteratee
   * shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns the new mapped array.
   */
  function arrayMap(array, iteratee) {
    var index = -1,
        length = array == null ? 0 : array.length,
        result = Array(length);

    while (++index < length) {
      result[index] = iteratee(array[index], index, array);
    }
    return result;
  }

  var _arrayMap = arrayMap;

  /** Used as references for various `Number` constants. */
  var INFINITY = 1 / 0;

  /** Used to convert symbols to primitives and strings. */
  var symbolProto$1 = _Symbol ? _Symbol.prototype : undefined,
      symbolToString = symbolProto$1 ? symbolProto$1.toString : undefined;

  /**
   * The base implementation of `_.toString` which doesn't convert nullish
   * values to empty strings.
   *
   * @private
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   */
  function baseToString(value) {
    // Exit early for strings to avoid a performance hit in some environments.
    if (typeof value == 'string') {
      return value;
    }
    if (isArray_1(value)) {
      // Recursively convert values (susceptible to call stack limits).
      return _arrayMap(value, baseToString) + '';
    }
    if (isSymbol_1(value)) {
      return symbolToString ? symbolToString.call(value) : '';
    }
    var result = (value + '');
    return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
  }

  var _baseToString = baseToString;

  /**
   * Converts `value` to a string. An empty string is returned for `null`
   * and `undefined` values. The sign of `-0` is preserved.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to convert.
   * @returns {string} Returns the converted string.
   * @example
   *
   * _.toString(null);
   * // => ''
   *
   * _.toString(-0);
   * // => '-0'
   *
   * _.toString([1, 2, 3]);
   * // => '1,2,3'
   */
  function toString(value) {
    return value == null ? '' : _baseToString(value);
  }

  var toString_1 = toString;

  /** Used to generate unique IDs. */
  var idCounter = 0;

  /**
   * Generates a unique ID. If `prefix` is given, the ID is appended to it.
   *
   * @static
   * @since 0.1.0
   * @memberOf _
   * @category Util
   * @param {string} [prefix=''] The value to prefix the ID with.
   * @returns {string} Returns the unique ID.
   * @example
   *
   * _.uniqueId('contact_');
   * // => 'contact_104'
   *
   * _.uniqueId();
   * // => '105'
   */
  function uniqueId(prefix) {
    var id = ++idCounter;
    return toString_1(prefix) + id;
  }

  var uniqueId_1 = uniqueId;

  var isFunction$2 = function isFunction(arg) {
    return typeof arg === 'function';
  };

  var isString$1 = function isString(arg) {
    return typeof arg === 'string';
  };

  var splitArray$1 = function splitArray(arg) {
    return isString$1(arg) ? arg.split(/[,\s]+/) : arg;
  };
  /** @typedef {import('jodit/src/Config').Config & import('jodit/src/plugins')} Config */

  /** @typedef {import('jodit').IJodit} Jodit */


  var PluginProxy =
  /*#__PURE__*/
  function () {
    /**
     * @param {Object} plugin
     * @param {Jodit} jodit
     */
    function PluginProxy(plugin, jodit) {
      _classCallCheck(this, PluginProxy);

      this._plugin = plugin;
      this.jodit = jodit;
      autoBind(this);
      jodit.events.on('afterInit', this.afterInit).on('beforeDestruct', this.beforeDestruct);
    }

    _createClass(PluginProxy, [{
      key: "afterInit",
      value: function afterInit() {
        if (!isFunction$2(this._plugin.afterInit)) return;

        this._plugin.afterInit(this.jodit);
      }
    }, {
      key: "beforeDestruct",
      value: function beforeDestruct() {
        this.jodit.events.off('beforeDestruct', this.beforeDestruct);
        if (!isFunction$2(this._plugin.beforeDestruct)) return;

        this._plugin.beforeDestruct(this.jodit);
      }
    }, {
      key: "destruct",
      value: function destruct() {
        if (!isFunction$2(this._plugin.destruct)) return;

        this._plugin.destruct();
      }
    }]);

    return PluginProxy;
  }();

  function extend(Jodit) {
    /**
     * @param {Config} config
     */
    Jodit.prototype.$applyPlugins = function (config) {
      var _this = this;

      var _config$plugins = config.plugins,
          plugins = _config$plugins === void 0 ? [] : _config$plugins;
      var disablePlugins = splitArray$1(config.disablePlugins);
      this.__plugins = this.__plugins = {};
      this.$plugins = new Map();
      plugins.forEach(function (_ref) {
        var Plugin = _ref.use,
            _ref$options = _ref.options,
            options = _ref$options === void 0 ? {} : _ref$options;
        var pluginName = Plugin.pluginName;
        if (disablePlugins.includes(pluginName)) return; // Create plugin instance with provided options.

        var plugin = new Plugin(options);
        plugin.options = options;

        _this.$plugins.set(pluginName, plugin);

        _this.__plugins[uniqueId_1('plugin_proxy__')] = new PluginProxy(plugin, _this); // Apply plugin on jodit options.

        if (isFunction$2(plugin.apply)) plugin.apply(config, Jodit);
      });
    };

    Object.defineProperty(Jodit.prototype, 'options', {
      enumerable: true,
      configurable: false,
      get: function get() {
        return this.$options;
      },
      set: function set() {
        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        if (this.jodit) {
          options = cloneOptions(options);
          this.$applyPlugins(options);
        }

        this.$options = options;
      }
    });
    var __initPlugines = Jodit.prototype.__initPlugines;

    Jodit.prototype.__initPlugines = function () {
      var _this2 = this;

      this.$plugins.forEach(function (plugin) {
        if (isFunction$2(plugin.init)) plugin.init(_this2, plugin.options);
        plugin.jodit = _this2;
      });
      return __initPlugines.apply(this, arguments);
    };
  }

  function cloneOptions(options) {
    var shared = ['ownerDocument', 'ownerWindow'];
    return Object.fromEntries(keysIn_1(options).map(function (key) {
      var value = options[key];
      if (shared.includes(key)) return [key, value];
      return [key, cloneDeep_1(value)];
    }));
  }

  /* ***** BEGIN LICENSE BLOCK *****
   * Distributed under the BSD license:
   *
   * Copyright (c) 2010, Ajax.org B.V.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *     * Redistributions of source code must retain the above copyright
   *       notice, this list of conditions and the following disclaimer.
   *     * Redistributions in binary form must reproduce the above copyright
   *       notice, this list of conditions and the following disclaimer in the
   *       documentation and/or other materials provided with the distribution.
   *     * Neither the name of Ajax.org B.V. nor the
   *       names of its contributors may be used to endorse or promote products
   *       derived from this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
   * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
   * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   *
   * ***** END LICENSE BLOCK ***** */

  /**
   * Define a module along with a payload
   * @param module a name for the payload
   * @param payload a function to call with (acequire, exports, module) params
   */

  (function() {

  var ACE_NAMESPACE = "ace";

  var global = (function() { return this; })();
  if (!global && typeof window != "undefined") global = window; // strict mode


  var define = function(module, deps, payload) {
      if (typeof module !== "string") {
          if (define.original)
              define.original.apply(this, arguments);
          else {
              console.error("dropping module because define wasn\'t a string.");
              console.trace();
          }
          return;
      }
      if (arguments.length == 2)
          payload = deps;
      if (!define.modules[module]) {
          define.payloads[module] = payload;
          define.modules[module] = null;
      }
  };

  define.modules = {};
  define.payloads = {};

  /**
   * Get at functionality define()ed using the function above
   */
  var _acequire = function(parentId, module, callback) {
      if (typeof module === "string") {
          var payload = lookup(parentId, module);
          if (payload != undefined) {
              callback && callback();
              return payload;
          }
      } else if (Object.prototype.toString.call(module) === "[object Array]") {
          var params = [];
          for (var i = 0, l = module.length; i < l; ++i) {
              var dep = lookup(parentId, module[i]);
              if (dep == undefined && acequire.original)
                  return;
              params.push(dep);
          }
          return callback && callback.apply(null, params) || true;
      }
  };

  var acequire = function(module, callback) {
      var packagedModule = _acequire("", module, callback);
      if (packagedModule == undefined && acequire.original)
          return acequire.original.apply(this, arguments);
      return packagedModule;
  };

  var normalizeModule = function(parentId, moduleName) {
      // normalize plugin acequires
      if (moduleName.indexOf("!") !== -1) {
          var chunks = moduleName.split("!");
          return normalizeModule(parentId, chunks[0]) + "!" + normalizeModule(parentId, chunks[1]);
      }
      // normalize relative acequires
      if (moduleName.charAt(0) == ".") {
          var base = parentId.split("/").slice(0, -1).join("/");
          moduleName = base + "/" + moduleName;

          while(moduleName.indexOf(".") !== -1 && previous != moduleName) {
              var previous = moduleName;
              moduleName = moduleName.replace(/\/\.\//, "/").replace(/[^\/]+\/\.\.\//, "");
          }
      }
      return moduleName;
  };

  /**
   * Internal function to lookup moduleNames and resolve them by calling the
   * definition function if needed.
   */
  var lookup = function(parentId, moduleName) {
      moduleName = normalizeModule(parentId, moduleName);

      var module = define.modules[moduleName];
      if (!module) {
          module = define.payloads[moduleName];
          if (typeof module === 'function') {
              var exports = {};
              var mod = {
                  id: moduleName,
                  uri: '',
                  exports: exports,
                  packaged: true
              };

              var req = function(module, callback) {
                  return _acequire(moduleName, module, callback);
              };

              var returnValue = module(req, exports, mod);
              exports = returnValue || mod.exports;
              define.modules[moduleName] = exports;
              delete define.payloads[moduleName];
          }
          module = define.modules[moduleName] = exports || module;
      }
      return module;
  };

  function exportAce(ns) {
      var root = global;
      if (ns) {
          if (!global[ns])
              global[ns] = {};
          root = global[ns];
      }

      if (!root.define || !root.define.packaged) {
          define.original = root.define;
          root.define = define;
          root.define.packaged = true;
      }

      if (!root.acequire || !root.acequire.packaged) {
          acequire.original = root.acequire;
          root.acequire = acequire;
          root.acequire.packaged = true;
      }
  }

  exportAce(ACE_NAMESPACE);

  })();

  ace.define("ace/lib/regexp",["require","exports","module"], function(acequire, exports, module) {

      var real = {
              exec: RegExp.prototype.exec,
              test: RegExp.prototype.test,
              match: String.prototype.match,
              replace: String.prototype.replace,
              split: String.prototype.split
          },
          compliantExecNpcg = real.exec.call(/()??/, "")[1] === undefined, // check `exec` handling of nonparticipating capturing groups
          compliantLastIndexIncrement = function () {
              var x = /^/g;
              real.test.call(x, "");
              return !x.lastIndex;
          }();

      if (compliantLastIndexIncrement && compliantExecNpcg)
          return;
      RegExp.prototype.exec = function (str) {
          var match = real.exec.apply(this, arguments),
              name, r2;
          if ( typeof(str) == 'string' && match) {
              if (!compliantExecNpcg && match.length > 1 && indexOf(match, "") > -1) {
                  r2 = RegExp(this.source, real.replace.call(getNativeFlags(this), "g", ""));
                  real.replace.call(str.slice(match.index), r2, function () {
                      for (var i = 1; i < arguments.length - 2; i++) {
                          if (arguments[i] === undefined)
                              match[i] = undefined;
                      }
                  });
              }
              if (this._xregexp && this._xregexp.captureNames) {
                  for (var i = 1; i < match.length; i++) {
                      name = this._xregexp.captureNames[i - 1];
                      if (name)
                         match[name] = match[i];
                  }
              }
              if (!compliantLastIndexIncrement && this.global && !match[0].length && (this.lastIndex > match.index))
                  this.lastIndex--;
          }
          return match;
      };
      if (!compliantLastIndexIncrement) {
          RegExp.prototype.test = function (str) {
              var match = real.exec.call(this, str);
              if (match && this.global && !match[0].length && (this.lastIndex > match.index))
                  this.lastIndex--;
              return !!match;
          };
      }

      function getNativeFlags (regex) {
          return (regex.global     ? "g" : "") +
                 (regex.ignoreCase ? "i" : "") +
                 (regex.multiline  ? "m" : "") +
                 (regex.extended   ? "x" : "") + // Proposed for ES4; included in AS3
                 (regex.sticky     ? "y" : "");
      }

      function indexOf (array, item, from) {
          if (Array.prototype.indexOf) // Use the native array method if available
              return array.indexOf(item, from);
          for (var i = from || 0; i < array.length; i++) {
              if (array[i] === item)
                  return i;
          }
          return -1;
      }

  });

  ace.define("ace/lib/es5-shim",["require","exports","module"], function(acequire, exports, module) {

  function Empty() {}

  if (!Function.prototype.bind) {
      Function.prototype.bind = function bind(that) { // .length is 1
          var target = this;
          if (typeof target != "function") {
              throw new TypeError("Function.prototype.bind called on incompatible " + target);
          }
          var args = slice.call(arguments, 1); // for normal call
          var bound = function () {

              if (this instanceof bound) {

                  var result = target.apply(
                      this,
                      args.concat(slice.call(arguments))
                  );
                  if (Object(result) === result) {
                      return result;
                  }
                  return this;

              } else {
                  return target.apply(
                      that,
                      args.concat(slice.call(arguments))
                  );

              }

          };
          if(target.prototype) {
              Empty.prototype = target.prototype;
              bound.prototype = new Empty();
              Empty.prototype = null;
          }
          return bound;
      };
  }
  var call = Function.prototype.call;
  var prototypeOfArray = Array.prototype;
  var prototypeOfObject = Object.prototype;
  var slice = prototypeOfArray.slice;
  var _toString = call.bind(prototypeOfObject.toString);
  var owns = call.bind(prototypeOfObject.hasOwnProperty);
  var defineGetter;
  var defineSetter;
  var lookupGetter;
  var lookupSetter;
  var supportsAccessors;
  if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__"))) {
      defineGetter = call.bind(prototypeOfObject.__defineGetter__);
      defineSetter = call.bind(prototypeOfObject.__defineSetter__);
      lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);
      lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);
  }
  if ([1,2].splice(0).length != 2) {
      if(function() { // test IE < 9 to splice bug - see issue #138
          function makeArray(l) {
              var a = new Array(l+2);
              a[0] = a[1] = 0;
              return a;
          }
          var array = [], lengthBefore;
          
          array.splice.apply(array, makeArray(20));
          array.splice.apply(array, makeArray(26));

          lengthBefore = array.length; //46
          array.splice(5, 0, "XXX"); // add one element

          if (lengthBefore + 1 == array.length) {
              return true;// has right splice implementation without bugs
          }
      }()) {//IE 6/7
          var array_splice = Array.prototype.splice;
          Array.prototype.splice = function(start, deleteCount) {
              if (!arguments.length) {
                  return [];
              } else {
                  return array_splice.apply(this, [
                      start === void 0 ? 0 : start,
                      deleteCount === void 0 ? (this.length - start) : deleteCount
                  ].concat(slice.call(arguments, 2)))
              }
          };
      } else {//IE8
          Array.prototype.splice = function(pos, removeCount){
              var length = this.length;
              if (pos > 0) {
                  if (pos > length)
                      pos = length;
              } else if (pos == void 0) {
                  pos = 0;
              } else if (pos < 0) {
                  pos = Math.max(length + pos, 0);
              }

              if (!(pos+removeCount < length))
                  removeCount = length - pos;

              var removed = this.slice(pos, pos+removeCount);
              var insert = slice.call(arguments, 2);
              var add = insert.length;            
              if (pos === length) {
                  if (add) {
                      this.push.apply(this, insert);
                  }
              } else {
                  var remove = Math.min(removeCount, length - pos);
                  var tailOldPos = pos + remove;
                  var tailNewPos = tailOldPos + add - remove;
                  var tailCount = length - tailOldPos;
                  var lengthAfterRemove = length - remove;

                  if (tailNewPos < tailOldPos) { // case A
                      for (var i = 0; i < tailCount; ++i) {
                          this[tailNewPos+i] = this[tailOldPos+i];
                      }
                  } else if (tailNewPos > tailOldPos) { // case B
                      for (i = tailCount; i--; ) {
                          this[tailNewPos+i] = this[tailOldPos+i];
                      }
                  } // else, add == remove (nothing to do)

                  if (add && pos === lengthAfterRemove) {
                      this.length = lengthAfterRemove; // truncate array
                      this.push.apply(this, insert);
                  } else {
                      this.length = lengthAfterRemove + add; // reserves space
                      for (i = 0; i < add; ++i) {
                          this[pos+i] = insert[i];
                      }
                  }
              }
              return removed;
          };
      }
  }
  if (!Array.isArray) {
      Array.isArray = function isArray(obj) {
          return _toString(obj) == "[object Array]";
      };
  }
  var boxedString = Object("a"),
      splitString = boxedString[0] != "a" || !(0 in boxedString);

  if (!Array.prototype.forEach) {
      Array.prototype.forEach = function forEach(fun /*, thisp*/) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  object,
              thisp = arguments[1],
              i = -1,
              length = self.length >>> 0;
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(); // TODO message
          }

          while (++i < length) {
              if (i in self) {
                  fun.call(thisp, self[i], i, object);
              }
          }
      };
  }
  if (!Array.prototype.map) {
      Array.prototype.map = function map(fun /*, thisp*/) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  object,
              length = self.length >>> 0,
              result = Array(length),
              thisp = arguments[1];
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(fun + " is not a function");
          }

          for (var i = 0; i < length; i++) {
              if (i in self)
                  result[i] = fun.call(thisp, self[i], i, object);
          }
          return result;
      };
  }
  if (!Array.prototype.filter) {
      Array.prototype.filter = function filter(fun /*, thisp */) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                      object,
              length = self.length >>> 0,
              result = [],
              value,
              thisp = arguments[1];
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(fun + " is not a function");
          }

          for (var i = 0; i < length; i++) {
              if (i in self) {
                  value = self[i];
                  if (fun.call(thisp, value, i, object)) {
                      result.push(value);
                  }
              }
          }
          return result;
      };
  }
  if (!Array.prototype.every) {
      Array.prototype.every = function every(fun /*, thisp */) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  object,
              length = self.length >>> 0,
              thisp = arguments[1];
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(fun + " is not a function");
          }

          for (var i = 0; i < length; i++) {
              if (i in self && !fun.call(thisp, self[i], i, object)) {
                  return false;
              }
          }
          return true;
      };
  }
  if (!Array.prototype.some) {
      Array.prototype.some = function some(fun /*, thisp */) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  object,
              length = self.length >>> 0,
              thisp = arguments[1];
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(fun + " is not a function");
          }

          for (var i = 0; i < length; i++) {
              if (i in self && fun.call(thisp, self[i], i, object)) {
                  return true;
              }
          }
          return false;
      };
  }
  if (!Array.prototype.reduce) {
      Array.prototype.reduce = function reduce(fun /*, initial*/) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  object,
              length = self.length >>> 0;
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(fun + " is not a function");
          }
          if (!length && arguments.length == 1) {
              throw new TypeError("reduce of empty array with no initial value");
          }

          var i = 0;
          var result;
          if (arguments.length >= 2) {
              result = arguments[1];
          } else {
              do {
                  if (i in self) {
                      result = self[i++];
                      break;
                  }
                  if (++i >= length) {
                      throw new TypeError("reduce of empty array with no initial value");
                  }
              } while (true);
          }

          for (; i < length; i++) {
              if (i in self) {
                  result = fun.call(void 0, result, self[i], i, object);
              }
          }

          return result;
      };
  }
  if (!Array.prototype.reduceRight) {
      Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {
          var object = toObject(this),
              self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  object,
              length = self.length >>> 0;
          if (_toString(fun) != "[object Function]") {
              throw new TypeError(fun + " is not a function");
          }
          if (!length && arguments.length == 1) {
              throw new TypeError("reduceRight of empty array with no initial value");
          }

          var result, i = length - 1;
          if (arguments.length >= 2) {
              result = arguments[1];
          } else {
              do {
                  if (i in self) {
                      result = self[i--];
                      break;
                  }
                  if (--i < 0) {
                      throw new TypeError("reduceRight of empty array with no initial value");
                  }
              } while (true);
          }

          do {
              if (i in this) {
                  result = fun.call(void 0, result, self[i], i, object);
              }
          } while (i--);

          return result;
      };
  }
  if (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {
      Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {
          var self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  toObject(this),
              length = self.length >>> 0;

          if (!length) {
              return -1;
          }

          var i = 0;
          if (arguments.length > 1) {
              i = toInteger(arguments[1]);
          }
          i = i >= 0 ? i : Math.max(0, length + i);
          for (; i < length; i++) {
              if (i in self && self[i] === sought) {
                  return i;
              }
          }
          return -1;
      };
  }
  if (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {
      Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {
          var self = splitString && _toString(this) == "[object String]" ?
                  this.split("") :
                  toObject(this),
              length = self.length >>> 0;

          if (!length) {
              return -1;
          }
          var i = length - 1;
          if (arguments.length > 1) {
              i = Math.min(i, toInteger(arguments[1]));
          }
          i = i >= 0 ? i : length - Math.abs(i);
          for (; i >= 0; i--) {
              if (i in self && sought === self[i]) {
                  return i;
              }
          }
          return -1;
      };
  }
  if (!Object.getPrototypeOf) {
      Object.getPrototypeOf = function getPrototypeOf(object) {
          return object.__proto__ || (
              object.constructor ?
              object.constructor.prototype :
              prototypeOfObject
          );
      };
  }
  if (!Object.getOwnPropertyDescriptor) {
      var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a " +
                           "non-object: ";
      Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {
          if ((typeof object != "object" && typeof object != "function") || object === null)
              throw new TypeError(ERR_NON_OBJECT + object);
          if (!owns(object, property))
              return;

          var descriptor, getter, setter;
          descriptor =  { enumerable: true, configurable: true };
          if (supportsAccessors) {
              var prototype = object.__proto__;
              object.__proto__ = prototypeOfObject;

              var getter = lookupGetter(object, property);
              var setter = lookupSetter(object, property);
              object.__proto__ = prototype;

              if (getter || setter) {
                  if (getter) descriptor.get = getter;
                  if (setter) descriptor.set = setter;
                  return descriptor;
              }
          }
          descriptor.value = object[property];
          return descriptor;
      };
  }
  if (!Object.getOwnPropertyNames) {
      Object.getOwnPropertyNames = function getOwnPropertyNames(object) {
          return Object.keys(object);
      };
  }
  if (!Object.create) {
      var createEmpty;
      if (Object.prototype.__proto__ === null) {
          createEmpty = function () {
              return { "__proto__": null };
          };
      } else {
          createEmpty = function () {
              var empty = {};
              for (var i in empty)
                  empty[i] = null;
              empty.constructor =
              empty.hasOwnProperty =
              empty.propertyIsEnumerable =
              empty.isPrototypeOf =
              empty.toLocaleString =
              empty.toString =
              empty.valueOf =
              empty.__proto__ = null;
              return empty;
          };
      }

      Object.create = function create(prototype, properties) {
          var object;
          if (prototype === null) {
              object = createEmpty();
          } else {
              if (typeof prototype != "object")
                  throw new TypeError("typeof prototype["+(typeof prototype)+"] != 'object'");
              var Type = function () {};
              Type.prototype = prototype;
              object = new Type();
              object.__proto__ = prototype;
          }
          if (properties !== void 0)
              Object.defineProperties(object, properties);
          return object;
      };
  }

  function doesDefinePropertyWork(object) {
      try {
          Object.defineProperty(object, "sentinel", {});
          return "sentinel" in object;
      } catch (exception) {
      }
  }
  if (Object.defineProperty) {
      var definePropertyWorksOnObject = doesDefinePropertyWork({});
      var definePropertyWorksOnDom = typeof document == "undefined" ||
          doesDefinePropertyWork(document.createElement("div"));
      if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {
          var definePropertyFallback = Object.defineProperty;
      }
  }

  if (!Object.defineProperty || definePropertyFallback) {
      var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ";
      var ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ";
      var ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined " +
                                        "on this javascript engine";

      Object.defineProperty = function defineProperty(object, property, descriptor) {
          if ((typeof object != "object" && typeof object != "function") || object === null)
              throw new TypeError(ERR_NON_OBJECT_TARGET + object);
          if ((typeof descriptor != "object" && typeof descriptor != "function") || descriptor === null)
              throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);
          if (definePropertyFallback) {
              try {
                  return definePropertyFallback.call(Object, object, property, descriptor);
              } catch (exception) {
              }
          }
          if (owns(descriptor, "value")) {

              if (supportsAccessors && (lookupGetter(object, property) ||
                                        lookupSetter(object, property)))
              {
                  var prototype = object.__proto__;
                  object.__proto__ = prototypeOfObject;
                  delete object[property];
                  object[property] = descriptor.value;
                  object.__proto__ = prototype;
              } else {
                  object[property] = descriptor.value;
              }
          } else {
              if (!supportsAccessors)
                  throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);
              if (owns(descriptor, "get"))
                  defineGetter(object, property, descriptor.get);
              if (owns(descriptor, "set"))
                  defineSetter(object, property, descriptor.set);
          }

          return object;
      };
  }
  if (!Object.defineProperties) {
      Object.defineProperties = function defineProperties(object, properties) {
          for (var property in properties) {
              if (owns(properties, property))
                  Object.defineProperty(object, property, properties[property]);
          }
          return object;
      };
  }
  if (!Object.seal) {
      Object.seal = function seal(object) {
          return object;
      };
  }
  if (!Object.freeze) {
      Object.freeze = function freeze(object) {
          return object;
      };
  }
  try {
      Object.freeze(function () {});
  } catch (exception) {
      Object.freeze = (function freeze(freezeObject) {
          return function freeze(object) {
              if (typeof object == "function") {
                  return object;
              } else {
                  return freezeObject(object);
              }
          };
      })(Object.freeze);
  }
  if (!Object.preventExtensions) {
      Object.preventExtensions = function preventExtensions(object) {
          return object;
      };
  }
  if (!Object.isSealed) {
      Object.isSealed = function isSealed(object) {
          return false;
      };
  }
  if (!Object.isFrozen) {
      Object.isFrozen = function isFrozen(object) {
          return false;
      };
  }
  if (!Object.isExtensible) {
      Object.isExtensible = function isExtensible(object) {
          if (Object(object) === object) {
              throw new TypeError(); // TODO message
          }
          var name = '';
          while (owns(object, name)) {
              name += '?';
          }
          object[name] = true;
          var returnValue = owns(object, name);
          delete object[name];
          return returnValue;
      };
  }
  if (!Object.keys) {
      var hasDontEnumBug = true,
          dontEnums = [
              "toString",
              "toLocaleString",
              "valueOf",
              "hasOwnProperty",
              "isPrototypeOf",
              "propertyIsEnumerable",
              "constructor"
          ],
          dontEnumsLength = dontEnums.length;

      for (var key in {"toString": null}) {
          hasDontEnumBug = false;
      }

      Object.keys = function keys(object) {

          if (
              (typeof object != "object" && typeof object != "function") ||
              object === null
          ) {
              throw new TypeError("Object.keys called on a non-object");
          }

          var keys = [];
          for (var name in object) {
              if (owns(object, name)) {
                  keys.push(name);
              }
          }

          if (hasDontEnumBug) {
              for (var i = 0, ii = dontEnumsLength; i < ii; i++) {
                  var dontEnum = dontEnums[i];
                  if (owns(object, dontEnum)) {
                      keys.push(dontEnum);
                  }
              }
          }
          return keys;
      };

  }
  if (!Date.now) {
      Date.now = function now() {
          return new Date().getTime();
      };
  }
  var ws = "\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003" +
      "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028" +
      "\u2029\uFEFF";
  if (!String.prototype.trim || ws.trim()) {
      ws = "[" + ws + "]";
      var trimBeginRegexp = new RegExp("^" + ws + ws + "*"),
          trimEndRegexp = new RegExp(ws + ws + "*$");
      String.prototype.trim = function trim() {
          return String(this).replace(trimBeginRegexp, "").replace(trimEndRegexp, "");
      };
  }

  function toInteger(n) {
      n = +n;
      if (n !== n) { // isNaN
          n = 0;
      } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {
          n = (n > 0 || -1) * Math.floor(Math.abs(n));
      }
      return n;
  }
  var toObject = function (o) {
      if (o == null) { // this matches both null and undefined
          throw new TypeError("can't convert "+o+" to object");
      }
      return Object(o);
  };

  });

  ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"], function(acequire, exports, module) {

  acequire("./regexp");
  acequire("./es5-shim");

  });

  ace.define("ace/lib/dom",["require","exports","module"], function(acequire, exports, module) {

  var XHTML_NS = "http://www.w3.org/1999/xhtml";

  exports.getDocumentHead = function(doc) {
      if (!doc)
          doc = document;
      return doc.head || doc.getElementsByTagName("head")[0] || doc.documentElement;
  };

  exports.createElement = function(tag, ns) {
      return document.createElementNS ?
             document.createElementNS(ns || XHTML_NS, tag) :
             document.createElement(tag);
  };

  exports.hasCssClass = function(el, name) {
      var classes = (el.className + "").split(/\s+/g);
      return classes.indexOf(name) !== -1;
  };
  exports.addCssClass = function(el, name) {
      if (!exports.hasCssClass(el, name)) {
          el.className += " " + name;
      }
  };
  exports.removeCssClass = function(el, name) {
      var classes = el.className.split(/\s+/g);
      while (true) {
          var index = classes.indexOf(name);
          if (index == -1) {
              break;
          }
          classes.splice(index, 1);
      }
      el.className = classes.join(" ");
  };

  exports.toggleCssClass = function(el, name) {
      var classes = el.className.split(/\s+/g), add = true;
      while (true) {
          var index = classes.indexOf(name);
          if (index == -1) {
              break;
          }
          add = false;
          classes.splice(index, 1);
      }
      if (add)
          classes.push(name);

      el.className = classes.join(" ");
      return add;
  };
  exports.setCssClass = function(node, className, include) {
      if (include) {
          exports.addCssClass(node, className);
      } else {
          exports.removeCssClass(node, className);
      }
  };

  exports.hasCssString = function(id, doc) {
      var index = 0, sheets;
      doc = doc || document;

      if (doc.createStyleSheet && (sheets = doc.styleSheets)) {
          while (index < sheets.length)
              if (sheets[index++].owningElement.id === id) return true;
      } else if ((sheets = doc.getElementsByTagName("style"))) {
          while (index < sheets.length)
              if (sheets[index++].id === id) return true;
      }

      return false;
  };

  exports.importCssString = function importCssString(cssText, id, doc) {
      doc = doc || document;
      if (id && exports.hasCssString(id, doc))
          return null;
      
      var style;
      
      if (id)
          cssText += "\n/*# sourceURL=ace/css/" + id + " */";
      
      if (doc.createStyleSheet) {
          style = doc.createStyleSheet();
          style.cssText = cssText;
          if (id)
              style.owningElement.id = id;
      } else {
          style = exports.createElement("style");
          style.appendChild(doc.createTextNode(cssText));
          if (id)
              style.id = id;

          exports.getDocumentHead(doc).appendChild(style);
      }
  };

  exports.importCssStylsheet = function(uri, doc) {
      if (doc.createStyleSheet) {
          doc.createStyleSheet(uri);
      } else {
          var link = exports.createElement('link');
          link.rel = 'stylesheet';
          link.href = uri;

          exports.getDocumentHead(doc).appendChild(link);
      }
  };

  exports.getInnerWidth = function(element) {
      return (
          parseInt(exports.computedStyle(element, "paddingLeft"), 10) +
          parseInt(exports.computedStyle(element, "paddingRight"), 10) + 
          element.clientWidth
      );
  };

  exports.getInnerHeight = function(element) {
      return (
          parseInt(exports.computedStyle(element, "paddingTop"), 10) +
          parseInt(exports.computedStyle(element, "paddingBottom"), 10) +
          element.clientHeight
      );
  };

  exports.scrollbarWidth = function(document) {
      var inner = exports.createElement("ace_inner");
      inner.style.width = "100%";
      inner.style.minWidth = "0px";
      inner.style.height = "200px";
      inner.style.display = "block";

      var outer = exports.createElement("ace_outer");
      var style = outer.style;

      style.position = "absolute";
      style.left = "-10000px";
      style.overflow = "hidden";
      style.width = "200px";
      style.minWidth = "0px";
      style.height = "150px";
      style.display = "block";

      outer.appendChild(inner);

      var body = document.documentElement;
      body.appendChild(outer);

      var noScrollbar = inner.offsetWidth;

      style.overflow = "scroll";
      var withScrollbar = inner.offsetWidth;

      if (noScrollbar == withScrollbar) {
          withScrollbar = outer.clientWidth;
      }

      body.removeChild(outer);

      return noScrollbar-withScrollbar;
  };

  if (typeof document == "undefined") {
      exports.importCssString = function() {};
      return;
  }

  if (window.pageYOffset !== undefined) {
      exports.getPageScrollTop = function() {
          return window.pageYOffset;
      };

      exports.getPageScrollLeft = function() {
          return window.pageXOffset;
      };
  }
  else {
      exports.getPageScrollTop = function() {
          return document.body.scrollTop;
      };

      exports.getPageScrollLeft = function() {
          return document.body.scrollLeft;
      };
  }

  if (window.getComputedStyle)
      exports.computedStyle = function(element, style) {
          if (style)
              return (window.getComputedStyle(element, "") || {})[style] || "";
          return window.getComputedStyle(element, "") || {};
      };
  else
      exports.computedStyle = function(element, style) {
          if (style)
              return element.currentStyle[style];
          return element.currentStyle;
      };
  exports.setInnerHtml = function(el, innerHtml) {
      var element = el.cloneNode(false);//document.createElement("div");
      element.innerHTML = innerHtml;
      el.parentNode.replaceChild(element, el);
      return element;
  };

  if ("textContent" in document.documentElement) {
      exports.setInnerText = function(el, innerText) {
          el.textContent = innerText;
      };

      exports.getInnerText = function(el) {
          return el.textContent;
      };
  }
  else {
      exports.setInnerText = function(el, innerText) {
          el.innerText = innerText;
      };

      exports.getInnerText = function(el) {
          return el.innerText;
      };
  }

  exports.getParentWindow = function(document) {
      return document.defaultView || document.parentWindow;
  };

  });

  ace.define("ace/lib/oop",["require","exports","module"], function(acequire, exports, module) {

  exports.inherits = function(ctor, superCtor) {
      ctor.super_ = superCtor;
      ctor.prototype = Object.create(superCtor.prototype, {
          constructor: {
              value: ctor,
              enumerable: false,
              writable: true,
              configurable: true
          }
      });
  };

  exports.mixin = function(obj, mixin) {
      for (var key in mixin) {
          obj[key] = mixin[key];
      }
      return obj;
  };

  exports.implement = function(proto, mixin) {
      exports.mixin(proto, mixin);
  };

  });

  ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"], function(acequire, exports, module) {

  acequire("./fixoldbrowsers");

  var oop = acequire("./oop");
  var Keys = (function() {
      var ret = {
          MODIFIER_KEYS: {
              16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta'
          },

          KEY_MODS: {
              "ctrl": 1, "alt": 2, "option" : 2, "shift": 4,
              "super": 8, "meta": 8, "command": 8, "cmd": 8
          },

          FUNCTION_KEYS : {
              8  : "Backspace",
              9  : "Tab",
              13 : "Return",
              19 : "Pause",
              27 : "Esc",
              32 : "Space",
              33 : "PageUp",
              34 : "PageDown",
              35 : "End",
              36 : "Home",
              37 : "Left",
              38 : "Up",
              39 : "Right",
              40 : "Down",
              44 : "Print",
              45 : "Insert",
              46 : "Delete",
              96 : "Numpad0",
              97 : "Numpad1",
              98 : "Numpad2",
              99 : "Numpad3",
              100: "Numpad4",
              101: "Numpad5",
              102: "Numpad6",
              103: "Numpad7",
              104: "Numpad8",
              105: "Numpad9",
              '-13': "NumpadEnter",
              112: "F1",
              113: "F2",
              114: "F3",
              115: "F4",
              116: "F5",
              117: "F6",
              118: "F7",
              119: "F8",
              120: "F9",
              121: "F10",
              122: "F11",
              123: "F12",
              144: "Numlock",
              145: "Scrolllock"
          },

          PRINTABLE_KEYS: {
             32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',
             54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',
             66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',
             73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',
             80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',
             87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',
            186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',
            219: '[', 220: '\\',221: ']', 222: "'", 111: '/', 106: '*'
          }
      };
      var name, i;
      for (i in ret.FUNCTION_KEYS) {
          name = ret.FUNCTION_KEYS[i].toLowerCase();
          ret[name] = parseInt(i, 10);
      }
      for (i in ret.PRINTABLE_KEYS) {
          name = ret.PRINTABLE_KEYS[i].toLowerCase();
          ret[name] = parseInt(i, 10);
      }
      oop.mixin(ret, ret.MODIFIER_KEYS);
      oop.mixin(ret, ret.PRINTABLE_KEYS);
      oop.mixin(ret, ret.FUNCTION_KEYS);
      ret.enter = ret["return"];
      ret.escape = ret.esc;
      ret.del = ret["delete"];
      ret[173] = '-';
      
      (function() {
          var mods = ["cmd", "ctrl", "alt", "shift"];
          for (var i = Math.pow(2, mods.length); i--;) {            
              ret.KEY_MODS[i] = mods.filter(function(x) {
                  return i & ret.KEY_MODS[x];
              }).join("-") + "-";
          }
      })();

      ret.KEY_MODS[0] = "";
      ret.KEY_MODS[-1] = "input-";

      return ret;
  })();
  oop.mixin(exports, Keys);

  exports.keyCodeToString = function(keyCode) {
      var keyString = Keys[keyCode];
      if (typeof keyString != "string")
          keyString = String.fromCharCode(keyCode);
      return keyString.toLowerCase();
  };

  });

  ace.define("ace/lib/useragent",["require","exports","module"], function(acequire, exports, module) {
  exports.OS = {
      LINUX: "LINUX",
      MAC: "MAC",
      WINDOWS: "WINDOWS"
  };
  exports.getOS = function() {
      if (exports.isMac) {
          return exports.OS.MAC;
      } else if (exports.isLinux) {
          return exports.OS.LINUX;
      } else {
          return exports.OS.WINDOWS;
      }
  };
  if (typeof navigator != "object")
      return;

  var os = (navigator.platform.match(/mac|win|linux/i) || ["other"])[0].toLowerCase();
  var ua = navigator.userAgent;
  exports.isWin = (os == "win");
  exports.isMac = (os == "mac");
  exports.isLinux = (os == "linux");
  exports.isIE = 
      (navigator.appName == "Microsoft Internet Explorer" || navigator.appName.indexOf("MSAppHost") >= 0)
      ? parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1])
      : parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]); // for ie
      
  exports.isOldIE = exports.isIE && exports.isIE < 9;
  exports.isGecko = exports.isMozilla = (window.Controllers || window.controllers) && window.navigator.product === "Gecko";
  exports.isOldGecko = exports.isGecko && parseInt((ua.match(/rv:(\d+)/)||[])[1], 10) < 4;
  exports.isOpera = window.opera && Object.prototype.toString.call(window.opera) == "[object Opera]";
  exports.isWebKit = parseFloat(ua.split("WebKit/")[1]) || undefined;

  exports.isChrome = parseFloat(ua.split(" Chrome/")[1]) || undefined;

  exports.isAIR = ua.indexOf("AdobeAIR") >= 0;

  exports.isIPad = ua.indexOf("iPad") >= 0;

  exports.isChromeOS = ua.indexOf(" CrOS ") >= 0;

  exports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;

  if (exports.isIOS) exports.isMac = true;

  });

  ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"], function(acequire, exports, module) {

  var keys = acequire("./keys");
  var useragent = acequire("./useragent");

  var pressedKeys = null;
  var ts = 0;

  exports.addListener = function(elem, type, callback) {
      if (elem.addEventListener) {
          return elem.addEventListener(type, callback, false);
      }
      if (elem.attachEvent) {
          var wrapper = function() {
              callback.call(elem, window.event);
          };
          callback._wrapper = wrapper;
          elem.attachEvent("on" + type, wrapper);
      }
  };

  exports.removeListener = function(elem, type, callback) {
      if (elem.removeEventListener) {
          return elem.removeEventListener(type, callback, false);
      }
      if (elem.detachEvent) {
          elem.detachEvent("on" + type, callback._wrapper || callback);
      }
  };
  exports.stopEvent = function(e) {
      exports.stopPropagation(e);
      exports.preventDefault(e);
      return false;
  };

  exports.stopPropagation = function(e) {
      if (e.stopPropagation)
          e.stopPropagation();
      else
          e.cancelBubble = true;
  };

  exports.preventDefault = function(e) {
      if (e.preventDefault)
          e.preventDefault();
      else
          e.returnValue = false;
  };
  exports.getButton = function(e) {
      if (e.type == "dblclick")
          return 0;
      if (e.type == "contextmenu" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))
          return 2;
      if (e.preventDefault) {
          return e.button;
      }
      else {
          return {1:0, 2:2, 4:1}[e.button];
      }
  };

  exports.capture = function(el, eventHandler, releaseCaptureHandler) {
      function onMouseUp(e) {
          eventHandler && eventHandler(e);
          releaseCaptureHandler && releaseCaptureHandler(e);

          exports.removeListener(document, "mousemove", eventHandler, true);
          exports.removeListener(document, "mouseup", onMouseUp, true);
          exports.removeListener(document, "dragstart", onMouseUp, true);
      }

      exports.addListener(document, "mousemove", eventHandler, true);
      exports.addListener(document, "mouseup", onMouseUp, true);
      exports.addListener(document, "dragstart", onMouseUp, true);
      
      return onMouseUp;
  };

  exports.addTouchMoveListener = function (el, callback) {
      var startx, starty;
      exports.addListener(el, "touchstart", function (e) {
          var touches = e.touches;
          var touchObj = touches[0];
          startx = touchObj.clientX;
          starty = touchObj.clientY;
      });
      exports.addListener(el, "touchmove", function (e) {
          var touches = e.touches;
          if (touches.length > 1) return;

          var touchObj = touches[0];

          e.wheelX = startx - touchObj.clientX;
          e.wheelY = starty - touchObj.clientY;

          startx = touchObj.clientX;
          starty = touchObj.clientY;

          callback(e);
      });
  };

  exports.addMouseWheelListener = function(el, callback) {
      if ("onmousewheel" in el) {
          exports.addListener(el, "mousewheel", function(e) {
              var factor = 8;
              if (e.wheelDeltaX !== undefined) {
                  e.wheelX = -e.wheelDeltaX / factor;
                  e.wheelY = -e.wheelDeltaY / factor;
              } else {
                  e.wheelX = 0;
                  e.wheelY = -e.wheelDelta / factor;
              }
              callback(e);
          });
      } else if ("onwheel" in el) {
          exports.addListener(el, "wheel",  function(e) {
              var factor = 0.35;
              switch (e.deltaMode) {
                  case e.DOM_DELTA_PIXEL:
                      e.wheelX = e.deltaX * factor || 0;
                      e.wheelY = e.deltaY * factor || 0;
                      break;
                  case e.DOM_DELTA_LINE:
                  case e.DOM_DELTA_PAGE:
                      e.wheelX = (e.deltaX || 0) * 5;
                      e.wheelY = (e.deltaY || 0) * 5;
                      break;
              }
              
              callback(e);
          });
      } else {
          exports.addListener(el, "DOMMouseScroll", function(e) {
              if (e.axis && e.axis == e.HORIZONTAL_AXIS) {
                  e.wheelX = (e.detail || 0) * 5;
                  e.wheelY = 0;
              } else {
                  e.wheelX = 0;
                  e.wheelY = (e.detail || 0) * 5;
              }
              callback(e);
          });
      }
  };

  exports.addMultiMouseDownListener = function(elements, timeouts, eventHandler, callbackName) {
      var clicks = 0;
      var startX, startY, timer; 
      var eventNames = {
          2: "dblclick",
          3: "tripleclick",
          4: "quadclick"
      };

      function onMousedown(e) {
          if (exports.getButton(e) !== 0) {
              clicks = 0;
          } else if (e.detail > 1) {
              clicks++;
              if (clicks > 4)
                  clicks = 1;
          } else {
              clicks = 1;
          }
          if (useragent.isIE) {
              var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;
              if (!timer || isNewClick)
                  clicks = 1;
              if (timer)
                  clearTimeout(timer);
              timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);

              if (clicks == 1) {
                  startX = e.clientX;
                  startY = e.clientY;
              }
          }
          
          e._clicks = clicks;

          eventHandler[callbackName]("mousedown", e);

          if (clicks > 4)
              clicks = 0;
          else if (clicks > 1)
              return eventHandler[callbackName](eventNames[clicks], e);
      }
      function onDblclick(e) {
          clicks = 2;
          if (timer)
              clearTimeout(timer);
          timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);
          eventHandler[callbackName]("mousedown", e);
          eventHandler[callbackName](eventNames[clicks], e);
      }
      if (!Array.isArray(elements))
          elements = [elements];
      elements.forEach(function(el) {
          exports.addListener(el, "mousedown", onMousedown);
          if (useragent.isOldIE)
              exports.addListener(el, "dblclick", onDblclick);
      });
  };

  var getModifierHash = useragent.isMac && useragent.isOpera && !("KeyboardEvent" in window)
      ? function(e) {
          return 0 | (e.metaKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.ctrlKey ? 8 : 0);
      }
      : function(e) {
          return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);
      };

  exports.getModifierString = function(e) {
      return keys.KEY_MODS[getModifierHash(e)];
  };

  function normalizeCommandKeys(callback, e, keyCode) {
      var hashId = getModifierHash(e);

      if (!useragent.isMac && pressedKeys) {
          if (e.getModifierState && (e.getModifierState("OS") || e.getModifierState("Win")))
              hashId |= 8;
          if (pressedKeys.altGr) {
              if ((3 & hashId) != 3)
                  pressedKeys.altGr = 0;
              else
                  return;
          }
          if (keyCode === 18 || keyCode === 17) {
              var location = "location" in e ? e.location : e.keyLocation;
              if (keyCode === 17 && location === 1) {
                  if (pressedKeys[keyCode] == 1)
                      ts = e.timeStamp;
              } else if (keyCode === 18 && hashId === 3 && location === 2) {
                  var dt = e.timeStamp - ts;
                  if (dt < 50)
                      pressedKeys.altGr = true;
              }
          }
      }
      
      if (keyCode in keys.MODIFIER_KEYS) {
          keyCode = -1;
      }
      if (hashId & 8 && (keyCode >= 91 && keyCode <= 93)) {
          keyCode = -1;
      }
      
      if (!hashId && keyCode === 13) {
          var location = "location" in e ? e.location : e.keyLocation;
          if (location === 3) {
              callback(e, hashId, -keyCode);
              if (e.defaultPrevented)
                  return;
          }
      }
      
      if (useragent.isChromeOS && hashId & 8) {
          callback(e, hashId, keyCode);
          if (e.defaultPrevented)
              return;
          else
              hashId &= ~8;
      }
      if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {
          return false;
      }
      
      return callback(e, hashId, keyCode);
  }


  exports.addCommandKeyListener = function(el, callback) {
      var addListener = exports.addListener;
      if (useragent.isOldGecko || (useragent.isOpera && !("KeyboardEvent" in window))) {
          var lastKeyDownKeyCode = null;
          addListener(el, "keydown", function(e) {
              lastKeyDownKeyCode = e.keyCode;
          });
          addListener(el, "keypress", function(e) {
              return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);
          });
      } else {
          var lastDefaultPrevented = null;

          addListener(el, "keydown", function(e) {
              pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;
              var result = normalizeCommandKeys(callback, e, e.keyCode);
              lastDefaultPrevented = e.defaultPrevented;
              return result;
          });

          addListener(el, "keypress", function(e) {
              if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {
                  exports.stopEvent(e);
                  lastDefaultPrevented = null;
              }
          });

          addListener(el, "keyup", function(e) {
              pressedKeys[e.keyCode] = null;
          });

          if (!pressedKeys) {
              resetPressedKeys();
              addListener(window, "focus", resetPressedKeys);
          }
      }
  };
  function resetPressedKeys() {
      pressedKeys = Object.create(null);
  }

  if (typeof window == "object" && window.postMessage && !useragent.isOldIE) {
      var postMessageId = 1;
      exports.nextTick = function(callback, win) {
          win = win || window;
          var messageName = "zero-timeout-message-" + postMessageId;
          exports.addListener(win, "message", function listener(e) {
              if (e.data == messageName) {
                  exports.stopPropagation(e);
                  exports.removeListener(win, "message", listener);
                  callback();
              }
          });
          win.postMessage(messageName, "*");
      };
  }


  exports.nextFrame = typeof window == "object" && (window.requestAnimationFrame
      || window.mozRequestAnimationFrame
      || window.webkitRequestAnimationFrame
      || window.msRequestAnimationFrame
      || window.oRequestAnimationFrame);

  if (exports.nextFrame)
      exports.nextFrame = exports.nextFrame.bind(window);
  else
      exports.nextFrame = function(callback) {
          setTimeout(callback, 17);
      };
  });

  ace.define("ace/lib/lang",["require","exports","module"], function(acequire, exports, module) {

  exports.last = function(a) {
      return a[a.length - 1];
  };

  exports.stringReverse = function(string) {
      return string.split("").reverse().join("");
  };

  exports.stringRepeat = function (string, count) {
      var result = '';
      while (count > 0) {
          if (count & 1)
              result += string;

          if (count >>= 1)
              string += string;
      }
      return result;
  };

  var trimBeginRegexp = /^\s\s*/;
  var trimEndRegexp = /\s\s*$/;

  exports.stringTrimLeft = function (string) {
      return string.replace(trimBeginRegexp, '');
  };

  exports.stringTrimRight = function (string) {
      return string.replace(trimEndRegexp, '');
  };

  exports.copyObject = function(obj) {
      var copy = {};
      for (var key in obj) {
          copy[key] = obj[key];
      }
      return copy;
  };

  exports.copyArray = function(array){
      var copy = [];
      for (var i=0, l=array.length; i<l; i++) {
          if (array[i] && typeof array[i] == "object")
              copy[i] = this.copyObject(array[i]);
          else 
              copy[i] = array[i];
      }
      return copy;
  };

  exports.deepCopy = function deepCopy(obj) {
      if (typeof obj !== "object" || !obj)
          return obj;
      var copy;
      if (Array.isArray(obj)) {
          copy = [];
          for (var key = 0; key < obj.length; key++) {
              copy[key] = deepCopy(obj[key]);
          }
          return copy;
      }
      if (Object.prototype.toString.call(obj) !== "[object Object]")
          return obj;
      
      copy = {};
      for (var key in obj)
          copy[key] = deepCopy(obj[key]);
      return copy;
  };

  exports.arrayToMap = function(arr) {
      var map = {};
      for (var i=0; i<arr.length; i++) {
          map[arr[i]] = 1;
      }
      return map;

  };

  exports.createMap = function(props) {
      var map = Object.create(null);
      for (var i in props) {
          map[i] = props[i];
      }
      return map;
  };
  exports.arrayRemove = function(array, value) {
    for (var i = 0; i <= array.length; i++) {
      if (value === array[i]) {
        array.splice(i, 1);
      }
    }
  };

  exports.escapeRegExp = function(str) {
      return str.replace(/([.*+?^${}()|[\]\/\\])/g, '\\$1');
  };

  exports.escapeHTML = function(str) {
      return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/'/g, "&#39;").replace(/</g, "&#60;");
  };

  exports.getMatchOffsets = function(string, regExp) {
      var matches = [];

      string.replace(regExp, function(str) {
          matches.push({
              offset: arguments[arguments.length-2],
              length: str.length
          });
      });

      return matches;
  };
  exports.deferredCall = function(fcn) {
      var timer = null;
      var callback = function() {
          timer = null;
          fcn();
      };

      var deferred = function(timeout) {
          deferred.cancel();
          timer = setTimeout(callback, timeout || 0);
          return deferred;
      };

      deferred.schedule = deferred;

      deferred.call = function() {
          this.cancel();
          fcn();
          return deferred;
      };

      deferred.cancel = function() {
          clearTimeout(timer);
          timer = null;
          return deferred;
      };
      
      deferred.isPending = function() {
          return timer;
      };

      return deferred;
  };


  exports.delayedCall = function(fcn, defaultTimeout) {
      var timer = null;
      var callback = function() {
          timer = null;
          fcn();
      };

      var _self = function(timeout) {
          if (timer == null)
              timer = setTimeout(callback, timeout || defaultTimeout);
      };

      _self.delay = function(timeout) {
          timer && clearTimeout(timer);
          timer = setTimeout(callback, timeout || defaultTimeout);
      };
      _self.schedule = _self;

      _self.call = function() {
          this.cancel();
          fcn();
      };

      _self.cancel = function() {
          timer && clearTimeout(timer);
          timer = null;
      };

      _self.isPending = function() {
          return timer;
      };

      return _self;
  };
  });

  ace.define("ace/keyboard/textinput_ios",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/lib/keys"], function(acequire, exports, module) {

  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");
  var dom = acequire("../lib/dom");
  var lang = acequire("../lib/lang");
  var KEYS = acequire("../lib/keys");
  var MODS = KEYS.KEY_MODS;
  var BROKEN_SETDATA = useragent.isChrome < 18;
  var USE_IE_MIME_TYPE =  useragent.isIE;

  var TextInput = function(parentNode, host) {
      var text = dom.createElement("textarea");
      text.className = useragent.isIOS ? "ace_text-input ace_text-input-ios" : "ace_text-input";

      if (useragent.isTouchPad)
          text.setAttribute("x-palm-disable-auto-cap", true);

      text.setAttribute("wrap", "off");
      text.setAttribute("autocorrect", "off");
      text.setAttribute("autocapitalize", "off");
      text.setAttribute("spellcheck", false);

      text.style.opacity = "0";
      parentNode.insertBefore(text, parentNode.firstChild);

      var PLACEHOLDER = "\n aaaa a\n";

      var copied = false;
      var cut = false;
      var pasted = false;
      var inComposition = false;
      var tempStyle = '';
      var isSelectionEmpty = true;
      try { var isFocused = document.activeElement === text; } catch(e) {}

      event.addListener(text, "blur", function(e) {
          host.onBlur(e);
          isFocused = false;
      });
      event.addListener(text, "focus", function(e) {
          isFocused = true;
          host.onFocus(e);
          resetSelection();
      });
      this.focus = function() {
          if (tempStyle) return text.focus();
          text.style.position = "fixed";
          text.focus();
      };
      this.blur = function() {
          text.blur();
      };
      this.isFocused = function() {
          return isFocused;
      };
      var syncSelection = lang.delayedCall(function() {
          isFocused && resetSelection(isSelectionEmpty);
      });
      var syncValue = lang.delayedCall(function() {
           if (!inComposition) {
              text.value = PLACEHOLDER;
              isFocused && resetSelection();
           }
      });

      function resetSelection(isEmpty) {
          if (inComposition)
              return;
          inComposition = true;

          if (inputHandler) {
              selectionStart = 0;
              selectionEnd = isEmpty ? 0 : text.value.length - 1;
          } else {
              var selectionStart = 4;
              var selectionEnd = 5;
          }
          try {
              text.setSelectionRange(selectionStart, selectionEnd);
          } catch(e) {}

          inComposition = false;
      }

      function resetValue() {
          if (inComposition)
              return;
          text.value = PLACEHOLDER;
          if (useragent.isWebKit)
              syncValue.schedule();
      }

      useragent.isWebKit || host.addEventListener('changeSelection', function() {
          if (host.selection.isEmpty() != isSelectionEmpty) {
              isSelectionEmpty = !isSelectionEmpty;
              syncSelection.schedule();
          }
      });

      resetValue();
      if (isFocused)
          host.onFocus();


      var isAllSelected = function(text) {
          return text.selectionStart === 0 && text.selectionEnd === text.value.length;
      };

      var onSelect = function(e) {
          if (isAllSelected(text)) {
              host.selectAll();
              resetSelection();
          } else if (inputHandler) {
              resetSelection(host.selection.isEmpty());
          }
      };

      var inputHandler = null;
      this.setInputHandler = function(cb) {inputHandler = cb;};
      this.getInputHandler = function() {return inputHandler;};
      var afterContextMenu = false;

      var sendText = function(data) {
          if (text.selectionStart === 4 && text.selectionEnd === 5) {
            return;
          }
          if (inputHandler) {
              data = inputHandler(data);
              inputHandler = null;
          }
          if (pasted) {
              resetSelection();
              if (data)
                  host.onPaste(data);
              pasted = false;
          } else if (data == PLACEHOLDER.substr(0) && text.selectionStart === 4) {
              if (afterContextMenu)
                  host.execCommand("del", {source: "ace"});
              else // some versions of android do not fire keydown when pressing backspace
                  host.execCommand("backspace", {source: "ace"});
          } else if (!copied) {
              if (data.substring(0, 9) == PLACEHOLDER && data.length > PLACEHOLDER.length)
                  data = data.substr(9);
              else if (data.substr(0, 4) == PLACEHOLDER.substr(0, 4))
                  data = data.substr(4, data.length - PLACEHOLDER.length + 1);
              else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))
                  data = data.slice(0, -1);
              if (data == PLACEHOLDER.charAt(0)) ; else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))
                  data = data.slice(0, -1);

              if (data)
                  host.onTextInput(data);
          }
          if (copied) {
            copied = false;
          }
          if (afterContextMenu)
              afterContextMenu = false;
      };
      var onInput = function(e) {
          if (inComposition)
              return;
          var data = text.value;
          sendText(data);
          resetValue();
      };

      var handleClipboardData = function(e, data, forceIEMime) {
          var clipboardData = e.clipboardData || window.clipboardData;
          if (!clipboardData || BROKEN_SETDATA)
              return;
          var mime = USE_IE_MIME_TYPE || forceIEMime ? "Text" : "text/plain";
          try {
              if (data) {
                  return clipboardData.setData(mime, data) !== false;
              } else {
                  return clipboardData.getData(mime);
              }
          } catch(e) {
              if (!forceIEMime)
                  return handleClipboardData(e, data, true);
          }
      };

      var doCopy = function(e, isCut) {
          var data = host.getCopyText();
          if (!data)
              return event.preventDefault(e);

          if (handleClipboardData(e, data)) {
              if (useragent.isIOS) {
                  cut = isCut;
                  text.value = "\n aa" + data + "a a\n";
                  text.setSelectionRange(4, 4 + data.length);
                  copied = {
                      value: data
                  };
              }
              isCut ? host.onCut() : host.onCopy();
              if (!useragent.isIOS) event.preventDefault(e);
          } else {
              copied = true;
              text.value = data;
              text.select();
              setTimeout(function(){
                  copied = false;
                  resetValue();
                  resetSelection();
                  isCut ? host.onCut() : host.onCopy();
              });
          }
      };

      var onCut = function(e) {
          doCopy(e, true);
      };

      var onCopy = function(e) {
          doCopy(e, false);
      };

      var onPaste = function(e) {
          var data = handleClipboardData(e);
          if (typeof data == "string") {
              if (data)
                  host.onPaste(data, e);
              if (useragent.isIE)
                  setTimeout(resetSelection);
              event.preventDefault(e);
          }
          else {
              text.value = "";
              pasted = true;
          }
      };

      event.addCommandKeyListener(text, host.onCommandKey.bind(host));

      event.addListener(text, "select", onSelect);

      event.addListener(text, "input", onInput);

      event.addListener(text, "cut", onCut);
      event.addListener(text, "copy", onCopy);
      event.addListener(text, "paste", onPaste);
      var onCompositionStart = function(e) {
          if (inComposition || !host.onCompositionStart || host.$readOnly)
              return;
          inComposition = {};
          inComposition.canUndo = host.session.$undoManager;
          host.onCompositionStart();
          setTimeout(onCompositionUpdate, 0);
          host.on("mousedown", onCompositionEnd);
          if (inComposition.canUndo && !host.selection.isEmpty()) {
              host.insert("");
              host.session.markUndoGroup();
              host.selection.clearSelection();
          }
          host.session.markUndoGroup();
      };

      var onCompositionUpdate = function() {
          if (!inComposition || !host.onCompositionUpdate || host.$readOnly)
              return;
          var val = text.value.replace(/\x01/g, "");
          if (inComposition.lastValue === val) return;

          host.onCompositionUpdate(val);
          if (inComposition.lastValue)
              host.undo();
          if (inComposition.canUndo)
              inComposition.lastValue = val;
          if (inComposition.lastValue) {
              var r = host.selection.getRange();
              host.insert(inComposition.lastValue);
              host.session.markUndoGroup();
              inComposition.range = host.selection.getRange();
              host.selection.setRange(r);
              host.selection.clearSelection();
          }
      };

      var onCompositionEnd = function(e) {
          if (!host.onCompositionEnd || host.$readOnly) return;
          var c = inComposition;
          inComposition = false;
          var timer = setTimeout(function() {
              timer = null;
              var str = text.value.replace(/\x01/g, "");
              if (inComposition)
                  return;
              else if (str == c.lastValue)
                  resetValue();
              else if (!c.lastValue && str) {
                  resetValue();
                  sendText(str);
              }
          });
          inputHandler = function compositionInputHandler(str) {
              if (timer)
                  clearTimeout(timer);
              str = str.replace(/\x01/g, "");
              if (str == c.lastValue)
                  return "";
              if (c.lastValue && timer)
                  host.undo();
              return str;
          };
          host.onCompositionEnd();
          host.removeListener("mousedown", onCompositionEnd);
          if (e.type == "compositionend" && c.range) {
              host.selection.setRange(c.range);
          }
          var needsOnInput =
              (!!useragent.isChrome && useragent.isChrome >= 53) ||
              (!!useragent.isWebKit && useragent.isWebKit >= 603);

          if (needsOnInput) {
            onInput();
          }
      };



      var syncComposition = lang.delayedCall(onCompositionUpdate, 50);

      event.addListener(text, "compositionstart", onCompositionStart);
      if (useragent.isGecko) {
          event.addListener(text, "text", function(){syncComposition.schedule();});
      } else {
          event.addListener(text, "keyup", function(){syncComposition.schedule();});
          event.addListener(text, "keydown", function(){syncComposition.schedule();});
      }
      event.addListener(text, "compositionend", onCompositionEnd);

      this.getElement = function() {
          return text;
      };

      this.setReadOnly = function(readOnly) {
         text.readOnly = readOnly;
      };

      this.onContextMenu = function(e) {
          afterContextMenu = true;
          resetSelection(host.selection.isEmpty());
          host._emit("nativecontextmenu", {target: host, domEvent: e});
          this.moveToMouse(e, true);
      };

      this.moveToMouse = function(e, bringToFront) {
          if (!tempStyle)
              tempStyle = text.style.cssText;
          text.style.cssText = (bringToFront ? "z-index:100000;" : "")
              + "height:" + text.style.height + ";"
              + (useragent.isIE ? "opacity:0.1;" : "");

          var rect = host.container.getBoundingClientRect();
          var style = dom.computedStyle(host.container);
          var top = rect.top + (parseInt(style.borderTopWidth) || 0);
          var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);
          var maxTop = rect.bottom - top - text.clientHeight -2;
          var move = function(e) {
              text.style.left = e.clientX - left - 2 + "px";
              text.style.top = Math.min(e.clientY - top - 2, maxTop) + "px";
          };
          move(e);

          if (e.type != "mousedown")
              return;

          if (host.renderer.$keepTextAreaAtCursor)
              host.renderer.$keepTextAreaAtCursor = null;

          clearTimeout(closeTimeout);
          if (useragent.isWin)
              event.capture(host.container, move, onContextMenuClose);
      };

      this.onContextMenuClose = onContextMenuClose;
      var closeTimeout;
      function onContextMenuClose() {
          clearTimeout(closeTimeout);
          closeTimeout = setTimeout(function () {
              if (tempStyle) {
                  text.style.cssText = tempStyle;
                  tempStyle = '';
              }
              if (host.renderer.$keepTextAreaAtCursor == null) {
                  host.renderer.$keepTextAreaAtCursor = true;
                  host.renderer.$moveTextAreaToCursor();
              }
          }, 0);
      }

      var onContextMenu = function(e) {
          host.textInput.onContextMenu(e);
          onContextMenuClose();
      };
      event.addListener(text, "mouseup", onContextMenu);
      event.addListener(text, "mousedown", function(e) {
          e.preventDefault();
          onContextMenuClose();
      });
      event.addListener(host.renderer.scroller, "contextmenu", onContextMenu);
      event.addListener(text, "contextmenu", onContextMenu);

      if (useragent.isIOS) {
          var typingResetTimeout = null;
          var typing = false;

          parentNode.addEventListener("keydown", function (e) {
              if (typingResetTimeout) clearTimeout(typingResetTimeout);
              typing = true;
          });

          parentNode.addEventListener("keyup", function (e) {
              typingResetTimeout = setTimeout(function () {
                  typing = false;
              }, 100);
          });
          var detectArrowKeys = function(e) {
              if (document.activeElement !== text) return;
              if (typing) return;

              if (cut) {
                  return setTimeout(function () {
                      cut = false;
                  }, 100);
              }
              var selectionStart = text.selectionStart;
              var selectionEnd = text.selectionEnd;
              text.setSelectionRange(4, 5);
              if (selectionStart == selectionEnd) {
                  switch (selectionStart) {
                      case 0: host.onCommandKey(null, 0, KEYS.up); break;
                      case 1: host.onCommandKey(null, 0, KEYS.home); break;
                      case 2: host.onCommandKey(null, MODS.option, KEYS.left); break;
                      case 4: host.onCommandKey(null, 0, KEYS.left); break;
                      case 5: host.onCommandKey(null, 0, KEYS.right); break;
                      case 7: host.onCommandKey(null, MODS.option, KEYS.right); break;
                      case 8: host.onCommandKey(null, 0, KEYS.end); break;
                      case 9: host.onCommandKey(null, 0, KEYS.down); break;
                  }
              } else {
                  switch (selectionEnd) {
                      case 6: host.onCommandKey(null, MODS.shift, KEYS.right); break;
                      case 7: host.onCommandKey(null, MODS.shift | MODS.option, KEYS.right); break;
                      case 8: host.onCommandKey(null, MODS.shift, KEYS.end); break;
                      case 9: host.onCommandKey(null, MODS.shift, KEYS.down); break;
                  }
                  switch (selectionStart) {
                      case 0: host.onCommandKey(null, MODS.shift, KEYS.up); break;
                      case 1: host.onCommandKey(null, MODS.shift, KEYS.home); break;
                      case 2: host.onCommandKey(null, MODS.shift | MODS.option, KEYS.left); break;
                      case 3: host.onCommandKey(null, MODS.shift, KEYS.left); break;
                  }
              }
          };
          document.addEventListener("selectionchange", detectArrowKeys);
          host.on("destroy", function() {
              document.removeEventListener("selectionchange", detectArrowKeys);
          });
      }
  };

  exports.TextInput = TextInput;
  });

  ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/keyboard/textinput_ios"], function(acequire, exports, module) {

  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");
  var dom = acequire("../lib/dom");
  var lang = acequire("../lib/lang");
  var BROKEN_SETDATA = useragent.isChrome < 18;
  var USE_IE_MIME_TYPE =  useragent.isIE;

  var TextInputIOS = acequire("./textinput_ios").TextInput;
  var TextInput = function(parentNode, host) {
      if (useragent.isIOS)
          return TextInputIOS.call(this, parentNode, host);

      var text = dom.createElement("textarea");
      text.className = "ace_text-input";

      text.setAttribute("wrap", "off");
      text.setAttribute("autocorrect", "off");
      text.setAttribute("autocapitalize", "off");
      text.setAttribute("spellcheck", false);

      text.style.opacity = "0";
      parentNode.insertBefore(text, parentNode.firstChild);

      var PLACEHOLDER = "\u2028\u2028";

      var copied = false;
      var pasted = false;
      var inComposition = false;
      var tempStyle = '';
      var isSelectionEmpty = true;
      try { var isFocused = document.activeElement === text; } catch(e) {}
      
      event.addListener(text, "blur", function(e) {
          host.onBlur(e);
          isFocused = false;
      });
      event.addListener(text, "focus", function(e) {
          isFocused = true;
          host.onFocus(e);
          resetSelection();
      });
      this.focus = function() {
          if (tempStyle) return text.focus();
          var top = text.style.top;
          text.style.position = "fixed";
          text.style.top = "0px";
          text.focus();
          setTimeout(function() {
              text.style.position = "";
              if (text.style.top == "0px")
                  text.style.top = top;
          }, 0);
      };
      this.blur = function() {
          text.blur();
      };
      this.isFocused = function() {
          return isFocused;
      };
      var syncSelection = lang.delayedCall(function() {
          isFocused && resetSelection(isSelectionEmpty);
      });
      var syncValue = lang.delayedCall(function() {
           if (!inComposition) {
              text.value = PLACEHOLDER;
              isFocused && resetSelection();
           }
      });

      function resetSelection(isEmpty) {
          if (inComposition)
              return;
          inComposition = true;
          
          if (inputHandler) {
              var selectionStart = 0;
              var selectionEnd = isEmpty ? 0 : text.value.length - 1;
          } else {
              var selectionStart = isEmpty ? 2 : 1;
              var selectionEnd = 2;
          }
          try {
              text.setSelectionRange(selectionStart, selectionEnd);
          } catch(e){}
          
          inComposition = false;
      }

      function resetValue() {
          if (inComposition)
              return;
          text.value = PLACEHOLDER;
          if (useragent.isWebKit)
              syncValue.schedule();
      }

      useragent.isWebKit || host.addEventListener('changeSelection', function() {
          if (host.selection.isEmpty() != isSelectionEmpty) {
              isSelectionEmpty = !isSelectionEmpty;
              syncSelection.schedule();
          }
      });

      resetValue();
      if (isFocused)
          host.onFocus();


      var isAllSelected = function(text) {
          return text.selectionStart === 0 && text.selectionEnd === text.value.length;
      };

      var onSelect = function(e) {
          if (copied) {
              copied = false;
          } else if (isAllSelected(text)) {
              host.selectAll();
              resetSelection();
          } else if (inputHandler) {
              resetSelection(host.selection.isEmpty());
          }
      };

      var inputHandler = null;
      this.setInputHandler = function(cb) {inputHandler = cb;};
      this.getInputHandler = function() {return inputHandler;};
      var afterContextMenu = false;
      
      var sendText = function(data) {
          if (inputHandler) {
              data = inputHandler(data);
              inputHandler = null;
          }
          if (pasted) {
              resetSelection();
              if (data)
                  host.onPaste(data);
              pasted = false;
          } else if (data == PLACEHOLDER.charAt(0)) {
              if (afterContextMenu)
                  host.execCommand("del", {source: "ace"});
              else // some versions of android do not fire keydown when pressing backspace
                  host.execCommand("backspace", {source: "ace"});
          } else {
              if (data.substring(0, 2) == PLACEHOLDER)
                  data = data.substr(2);
              else if (data.charAt(0) == PLACEHOLDER.charAt(0))
                  data = data.substr(1);
              else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))
                  data = data.slice(0, -1);
              if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))
                  data = data.slice(0, -1);
              
              if (data)
                  host.onTextInput(data);
          }
          if (afterContextMenu)
              afterContextMenu = false;
      };
      var onInput = function(e) {
          if (inComposition)
              return;
          var data = text.value;
          sendText(data);
          resetValue();
      };
      
      var handleClipboardData = function(e, data, forceIEMime) {
          var clipboardData = e.clipboardData || window.clipboardData;
          if (!clipboardData || BROKEN_SETDATA)
              return;
          var mime = USE_IE_MIME_TYPE || forceIEMime ? "Text" : "text/plain";
          try {
              if (data) {
                  return clipboardData.setData(mime, data) !== false;
              } else {
                  return clipboardData.getData(mime);
              }
          } catch(e) {
              if (!forceIEMime)
                  return handleClipboardData(e, data, true);
          }
      };

      var doCopy = function(e, isCut) {
          var data = host.getCopyText();
          if (!data)
              return event.preventDefault(e);

          if (handleClipboardData(e, data)) {
              isCut ? host.onCut() : host.onCopy();
              event.preventDefault(e);
          } else {
              copied = true;
              text.value = data;
              text.select();
              setTimeout(function(){
                  copied = false;
                  resetValue();
                  resetSelection();
                  isCut ? host.onCut() : host.onCopy();
              });
          }
      };
      
      var onCut = function(e) {
          doCopy(e, true);
      };
      
      var onCopy = function(e) {
          doCopy(e, false);
      };
      
      var onPaste = function(e) {
          var data = handleClipboardData(e);
          if (typeof data == "string") {
              if (data)
                  host.onPaste(data, e);
              if (useragent.isIE)
                  setTimeout(resetSelection);
              event.preventDefault(e);
          }
          else {
              text.value = "";
              pasted = true;
          }
      };

      event.addCommandKeyListener(text, host.onCommandKey.bind(host));

      event.addListener(text, "select", onSelect);

      event.addListener(text, "input", onInput);

      event.addListener(text, "cut", onCut);
      event.addListener(text, "copy", onCopy);
      event.addListener(text, "paste", onPaste);
      if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) {
          event.addListener(parentNode, "keydown", function(e) {
              if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)
                  return;

              switch (e.keyCode) {
                  case 67:
                      onCopy(e);
                      break;
                  case 86:
                      onPaste(e);
                      break;
                  case 88:
                      onCut(e);
                      break;
              }
          });
      }
      var onCompositionStart = function(e) {
          if (inComposition || !host.onCompositionStart || host.$readOnly) 
              return;
          inComposition = {};
          inComposition.canUndo = host.session.$undoManager;
          host.onCompositionStart();
          setTimeout(onCompositionUpdate, 0);
          host.on("mousedown", onCompositionEnd);
          if (inComposition.canUndo && !host.selection.isEmpty()) {
              host.insert("");
              host.session.markUndoGroup();
              host.selection.clearSelection();
          }
          host.session.markUndoGroup();
      };

      var onCompositionUpdate = function() {
          if (!inComposition || !host.onCompositionUpdate || host.$readOnly)
              return;
          var val = text.value.replace(/\u2028/g, "");
          if (inComposition.lastValue === val) return;
          
          host.onCompositionUpdate(val);
          if (inComposition.lastValue)
              host.undo();
          if (inComposition.canUndo)
              inComposition.lastValue = val;
          if (inComposition.lastValue) {
              var r = host.selection.getRange();
              host.insert(inComposition.lastValue);
              host.session.markUndoGroup();
              inComposition.range = host.selection.getRange();
              host.selection.setRange(r);
              host.selection.clearSelection();
          }
      };

      var onCompositionEnd = function(e) {
          if (!host.onCompositionEnd || host.$readOnly) return;
          var c = inComposition;
          inComposition = false;
          var timer = setTimeout(function() {
              timer = null;
              var str = text.value.replace(/\u2028/g, "");
              if (inComposition)
                  return;
              else if (str == c.lastValue)
                  resetValue();
              else if (!c.lastValue && str) {
                  resetValue();
                  sendText(str);
              }
          });
          inputHandler = function compositionInputHandler(str) {
              if (timer)
                  clearTimeout(timer);
              str = str.replace(/\u2028/g, "");
              if (str == c.lastValue)
                  return "";
              if (c.lastValue && timer)
                  host.undo();
              return str;
          };
          host.onCompositionEnd();
          host.removeListener("mousedown", onCompositionEnd);
          if (e.type == "compositionend" && c.range) {
              host.selection.setRange(c.range);
          }
          var needsOnInput =
              (!!useragent.isChrome && useragent.isChrome >= 53) ||
              (!!useragent.isWebKit && useragent.isWebKit >= 603);

          if (needsOnInput) {
            onInput();
          }
      };
      
      

      var syncComposition = lang.delayedCall(onCompositionUpdate, 50);

      event.addListener(text, "compositionstart", onCompositionStart);
      if (useragent.isGecko) {
          event.addListener(text, "text", function(){syncComposition.schedule();});
      } else {
          event.addListener(text, "keyup", function(){syncComposition.schedule();});
          event.addListener(text, "keydown", function(){syncComposition.schedule();});
      }
      event.addListener(text, "compositionend", onCompositionEnd);

      this.getElement = function() {
          return text;
      };

      this.setReadOnly = function(readOnly) {
         text.readOnly = readOnly;
      };

      this.onContextMenu = function(e) {
          afterContextMenu = true;
          resetSelection(host.selection.isEmpty());
          host._emit("nativecontextmenu", {target: host, domEvent: e});
          this.moveToMouse(e, true);
      };
      
      this.moveToMouse = function(e, bringToFront) {
          if (!tempStyle)
              tempStyle = text.style.cssText;
          text.style.cssText = (bringToFront ? "z-index:100000;" : "")
              + "height:" + text.style.height + ";"
              + (useragent.isIE ? "opacity:0.1;" : "");

          var rect = host.container.getBoundingClientRect();
          var style = dom.computedStyle(host.container);
          var top = rect.top + (parseInt(style.borderTopWidth) || 0);
          var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);
          var maxTop = rect.bottom - top - text.clientHeight -2;
          var move = function(e) {
              text.style.left = e.clientX - left - 2 + "px";
              text.style.top = Math.min(e.clientY - top - 2, maxTop) + "px";
          }; 
          move(e);

          if (e.type != "mousedown")
              return;

          if (host.renderer.$keepTextAreaAtCursor)
              host.renderer.$keepTextAreaAtCursor = null;

          clearTimeout(closeTimeout);
          if (useragent.isWin)
              event.capture(host.container, move, onContextMenuClose);
      };

      this.onContextMenuClose = onContextMenuClose;
      var closeTimeout;
      function onContextMenuClose() {
          clearTimeout(closeTimeout);
          closeTimeout = setTimeout(function () {
              if (tempStyle) {
                  text.style.cssText = tempStyle;
                  tempStyle = '';
              }
              if (host.renderer.$keepTextAreaAtCursor == null) {
                  host.renderer.$keepTextAreaAtCursor = true;
                  host.renderer.$moveTextAreaToCursor();
              }
          }, 0);
      }

      var onContextMenu = function(e) {
          host.textInput.onContextMenu(e);
          onContextMenuClose();
      };
      event.addListener(text, "mouseup", onContextMenu);
      event.addListener(text, "mousedown", function(e) {
          e.preventDefault();
          onContextMenuClose();
      });
      event.addListener(host.renderer.scroller, "contextmenu", onContextMenu);
      event.addListener(text, "contextmenu", onContextMenu);
  };

  exports.TextInput = TextInput;
  });

  ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"], function(acequire, exports, module) {

  var dom = acequire("../lib/dom");
  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");

  var DRAG_OFFSET = 0; // pixels
  var SCROLL_COOLDOWN_T = 250; // milliseconds

  function DefaultHandlers(mouseHandler) {
      mouseHandler.$clickSelection = null;

      var editor = mouseHandler.editor;
      editor.setDefaultHandler("mousedown", this.onMouseDown.bind(mouseHandler));
      editor.setDefaultHandler("dblclick", this.onDoubleClick.bind(mouseHandler));
      editor.setDefaultHandler("tripleclick", this.onTripleClick.bind(mouseHandler));
      editor.setDefaultHandler("quadclick", this.onQuadClick.bind(mouseHandler));
      editor.setDefaultHandler("mousewheel", this.onMouseWheel.bind(mouseHandler));
      editor.setDefaultHandler("touchmove", this.onTouchMove.bind(mouseHandler));

      var exports = ["select", "startSelect", "selectEnd", "selectAllEnd", "selectByWordsEnd",
          "selectByLinesEnd", "dragWait", "dragWaitEnd", "focusWait"];

      exports.forEach(function(x) {
          mouseHandler[x] = this[x];
      }, this);

      mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, "getLineRange");
      mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, "getWordRange");
  }

  (function() {

      this.onMouseDown = function(ev) {
          var inSelection = ev.inSelection();
          var pos = ev.getDocumentPosition();
          this.mousedownEvent = ev;
          var editor = this.editor;

          var button = ev.getButton();
          if (button !== 0) {
              var selectionRange = editor.getSelectionRange();
              var selectionEmpty = selectionRange.isEmpty();
              editor.$blockScrolling++;
              if (selectionEmpty || button == 1)
                  editor.selection.moveToPosition(pos);
              editor.$blockScrolling--;
              if (button == 2) {
                  editor.textInput.onContextMenu(ev.domEvent);
                  if (!useragent.isMozilla)
                      ev.preventDefault();
              }
              return;
          }

          this.mousedownEvent.time = Date.now();
          if (inSelection && !editor.isFocused()) {
              editor.focus();
              if (this.$focusTimout && !this.$clickSelection && !editor.inMultiSelectMode) {
                  this.setState("focusWait");
                  this.captureMouse(ev);
                  return;
              }
          }

          this.captureMouse(ev);
          this.startSelect(pos, ev.domEvent._clicks > 1);
          return ev.preventDefault();
      };

      this.startSelect = function(pos, waitForClickSelection) {
          pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);
          var editor = this.editor;
          editor.$blockScrolling++;
          if (this.mousedownEvent.getShiftKey())
              editor.selection.selectToPosition(pos);
          else if (!waitForClickSelection)
              editor.selection.moveToPosition(pos);
          if (!waitForClickSelection)
              this.select();
          if (editor.renderer.scroller.setCapture) {
              editor.renderer.scroller.setCapture();
          }
          editor.setStyle("ace_selecting");
          this.setState("select");
          editor.$blockScrolling--;
      };

      this.select = function() {
          var anchor, editor = this.editor;
          var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);
          editor.$blockScrolling++;
          if (this.$clickSelection) {
              var cmp = this.$clickSelection.comparePoint(cursor);

              if (cmp == -1) {
                  anchor = this.$clickSelection.end;
              } else if (cmp == 1) {
                  anchor = this.$clickSelection.start;
              } else {
                  var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);
                  cursor = orientedRange.cursor;
                  anchor = orientedRange.anchor;
              }
              editor.selection.setSelectionAnchor(anchor.row, anchor.column);
          }
          editor.selection.selectToPosition(cursor);
          editor.$blockScrolling--;
          editor.renderer.scrollCursorIntoView();
      };

      this.extendSelectionBy = function(unitName) {
          var anchor, editor = this.editor;
          var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);
          var range = editor.selection[unitName](cursor.row, cursor.column);
          editor.$blockScrolling++;
          if (this.$clickSelection) {
              var cmpStart = this.$clickSelection.comparePoint(range.start);
              var cmpEnd = this.$clickSelection.comparePoint(range.end);

              if (cmpStart == -1 && cmpEnd <= 0) {
                  anchor = this.$clickSelection.end;
                  if (range.end.row != cursor.row || range.end.column != cursor.column)
                      cursor = range.start;
              } else if (cmpEnd == 1 && cmpStart >= 0) {
                  anchor = this.$clickSelection.start;
                  if (range.start.row != cursor.row || range.start.column != cursor.column)
                      cursor = range.end;
              } else if (cmpStart == -1 && cmpEnd == 1) {
                  cursor = range.end;
                  anchor = range.start;
              } else {
                  var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);
                  cursor = orientedRange.cursor;
                  anchor = orientedRange.anchor;
              }
              editor.selection.setSelectionAnchor(anchor.row, anchor.column);
          }
          editor.selection.selectToPosition(cursor);
          editor.$blockScrolling--;
          editor.renderer.scrollCursorIntoView();
      };

      this.selectEnd =
      this.selectAllEnd =
      this.selectByWordsEnd =
      this.selectByLinesEnd = function() {
          this.$clickSelection = null;
          this.editor.unsetStyle("ace_selecting");
          if (this.editor.renderer.scroller.releaseCapture) {
              this.editor.renderer.scroller.releaseCapture();
          }
      };

      this.focusWait = function() {
          var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
          var time = Date.now();

          if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimout)
              this.startSelect(this.mousedownEvent.getDocumentPosition());
      };

      this.onDoubleClick = function(ev) {
          var pos = ev.getDocumentPosition();
          var editor = this.editor;
          var session = editor.session;

          var range = session.getBracketRange(pos);
          if (range) {
              if (range.isEmpty()) {
                  range.start.column--;
                  range.end.column++;
              }
              this.setState("select");
          } else {
              range = editor.selection.getWordRange(pos.row, pos.column);
              this.setState("selectByWords");
          }
          this.$clickSelection = range;
          this.select();
      };

      this.onTripleClick = function(ev) {
          var pos = ev.getDocumentPosition();
          var editor = this.editor;

          this.setState("selectByLines");
          var range = editor.getSelectionRange();
          if (range.isMultiLine() && range.contains(pos.row, pos.column)) {
              this.$clickSelection = editor.selection.getLineRange(range.start.row);
              this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;
          } else {
              this.$clickSelection = editor.selection.getLineRange(pos.row);
          }
          this.select();
      };

      this.onQuadClick = function(ev) {
          var editor = this.editor;

          editor.selectAll();
          this.$clickSelection = editor.getSelectionRange();
          this.setState("selectAll");
      };

      this.onMouseWheel = function(ev) {
          if (ev.getAccelKey())
              return;
          if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {
              ev.wheelX = ev.wheelY;
              ev.wheelY = 0;
          }
          
          var editor = this.editor;

          if (!this.$lastScroll)
              this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };

          var prevScroll = this.$lastScroll;
          var t = ev.domEvent.timeStamp;
          var dt = t - prevScroll.t;
          var vx = ev.wheelX / dt;
          var vy = ev.wheelY / dt;
          if (dt < SCROLL_COOLDOWN_T) {
              vx = (vx + prevScroll.vx) / 2;
              vy = (vy + prevScroll.vy) / 2;
          }

          var direction = Math.abs(vx / vy);

          var canScroll = false;
          if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))
              canScroll = true;
          if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))
              canScroll = true;

          if (canScroll) {
              prevScroll.allowed = t;
          } else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {
              var isSlower = Math.abs(vx) <= 1.1 * Math.abs(prevScroll.vx)
                  && Math.abs(vy) <= 1.1 * Math.abs(prevScroll.vy);
              if (isSlower) {
                  canScroll = true;
                  prevScroll.allowed = t;
              }
              else {
                  prevScroll.allowed = 0;
              }
          }

          prevScroll.t = t;
          prevScroll.vx = vx;
          prevScroll.vy = vy;

          if (canScroll) {
              editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);
              return ev.stop();
          }
      };

      this.onTouchMove = function(ev) {
          this.editor._emit("mousewheel", ev);
      };

  }).call(DefaultHandlers.prototype);

  exports.DefaultHandlers = DefaultHandlers;

  function calcDistance(ax, ay, bx, by) {
      return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));
  }

  function calcRangeOrientation(range, cursor) {
      if (range.start.row == range.end.row)
          var cmp = 2 * cursor.column - range.start.column - range.end.column;
      else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)
          var cmp = cursor.column - 4;
      else
          var cmp = 2 * cursor.row - range.start.row - range.end.row;

      if (cmp < 0)
          return {cursor: range.start, anchor: range.end};
      else
          return {cursor: range.end, anchor: range.start};
  }

  });

  ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var dom = acequire("./lib/dom");
  function Tooltip (parentNode) {
      this.isOpen = false;
      this.$element = null;
      this.$parentNode = parentNode;
  }

  (function() {
      this.$init = function() {
          this.$element = dom.createElement("div");
          this.$element.className = "ace_tooltip";
          this.$element.style.display = "none";
          this.$parentNode.appendChild(this.$element);
          return this.$element;
      };
      this.getElement = function() {
          return this.$element || this.$init();
      };
      this.setText = function(text) {
          dom.setInnerText(this.getElement(), text);
      };
      this.setHtml = function(html) {
          this.getElement().innerHTML = html;
      };
      this.setPosition = function(x, y) {
          this.getElement().style.left = x + "px";
          this.getElement().style.top = y + "px";
      };
      this.setClassName = function(className) {
          dom.addCssClass(this.getElement(), className);
      };
      this.show = function(text, x, y) {
          if (text != null)
              this.setText(text);
          if (x != null && y != null)
              this.setPosition(x, y);
          if (!this.isOpen) {
              this.getElement().style.display = "block";
              this.isOpen = true;
          }
      };

      this.hide = function() {
          if (this.isOpen) {
              this.getElement().style.display = "none";
              this.isOpen = false;
          }
      };
      this.getHeight = function() {
          return this.getElement().offsetHeight;
      };
      this.getWidth = function() {
          return this.getElement().offsetWidth;
      };

      this.destroy = function() {
          this.isOpen = false;
          if (this.$element && this.$element.parentNode) {
              this.$element.parentNode.removeChild(this.$element);
          }
      };

  }).call(Tooltip.prototype);

  exports.Tooltip = Tooltip;
  });

  ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"], function(acequire, exports, module) {
  var dom = acequire("../lib/dom");
  var oop = acequire("../lib/oop");
  var event = acequire("../lib/event");
  var Tooltip = acequire("../tooltip").Tooltip;

  function GutterHandler(mouseHandler) {
      var editor = mouseHandler.editor;
      var gutter = editor.renderer.$gutterLayer;
      var tooltip = new GutterTooltip(editor.container);

      mouseHandler.editor.setDefaultHandler("guttermousedown", function(e) {
          if (!editor.isFocused() || e.getButton() != 0)
              return;
          var gutterRegion = gutter.getRegion(e);

          if (gutterRegion == "foldWidgets")
              return;

          var row = e.getDocumentPosition().row;
          var selection = editor.session.selection;

          if (e.getShiftKey())
              selection.selectTo(row, 0);
          else {
              if (e.domEvent.detail == 2) {
                  editor.selectAll();
                  return e.preventDefault();
              }
              mouseHandler.$clickSelection = editor.selection.getLineRange(row);
          }
          mouseHandler.setState("selectByLines");
          mouseHandler.captureMouse(e);
          return e.preventDefault();
      });


      var tooltipTimeout, mouseEvent, tooltipAnnotation;

      function showTooltip() {
          var row = mouseEvent.getDocumentPosition().row;
          var annotation = gutter.$annotations[row];
          if (!annotation)
              return hideTooltip();

          var maxRow = editor.session.getLength();
          if (row == maxRow) {
              var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;
              var pos = mouseEvent.$pos;
              if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))
                  return hideTooltip();
          }

          if (tooltipAnnotation == annotation)
              return;
          tooltipAnnotation = annotation.text.join("<br/>");

          tooltip.setHtml(tooltipAnnotation);
          tooltip.show();
          editor._signal("showGutterTooltip", tooltip);
          editor.on("mousewheel", hideTooltip);

          if (mouseHandler.$tooltipFollowsMouse) {
              moveTooltip(mouseEvent);
          } else {
              var gutterElement = mouseEvent.domEvent.target;
              var rect = gutterElement.getBoundingClientRect();
              var style = tooltip.getElement().style;
              style.left = rect.right + "px";
              style.top = rect.bottom + "px";
          }
      }

      function hideTooltip() {
          if (tooltipTimeout)
              tooltipTimeout = clearTimeout(tooltipTimeout);
          if (tooltipAnnotation) {
              tooltip.hide();
              tooltipAnnotation = null;
              editor._signal("hideGutterTooltip", tooltip);
              editor.removeEventListener("mousewheel", hideTooltip);
          }
      }

      function moveTooltip(e) {
          tooltip.setPosition(e.x, e.y);
      }

      mouseHandler.editor.setDefaultHandler("guttermousemove", function(e) {
          var target = e.domEvent.target || e.domEvent.srcElement;
          if (dom.hasCssClass(target, "ace_fold-widget"))
              return hideTooltip();

          if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)
              moveTooltip(e);

          mouseEvent = e;
          if (tooltipTimeout)
              return;
          tooltipTimeout = setTimeout(function() {
              tooltipTimeout = null;
              if (mouseEvent && !mouseHandler.isMousePressed)
                  showTooltip();
              else
                  hideTooltip();
          }, 50);
      });

      event.addListener(editor.renderer.$gutter, "mouseout", function(e) {
          mouseEvent = null;
          if (!tooltipAnnotation || tooltipTimeout)
              return;

          tooltipTimeout = setTimeout(function() {
              tooltipTimeout = null;
              hideTooltip();
          }, 50);
      });
      
      editor.on("changeSession", hideTooltip);
  }

  function GutterTooltip(parentNode) {
      Tooltip.call(this, parentNode);
  }

  oop.inherits(GutterTooltip, Tooltip);

  (function(){
      this.setPosition = function(x, y) {
          var windowWidth = window.innerWidth || document.documentElement.clientWidth;
          var windowHeight = window.innerHeight || document.documentElement.clientHeight;
          var width = this.getWidth();
          var height = this.getHeight();
          x += 15;
          y += 15;
          if (x + width > windowWidth) {
              x -= (x + width) - windowWidth;
          }
          if (y + height > windowHeight) {
              y -= 20 + height;
          }
          Tooltip.prototype.setPosition.call(this, x, y);
      };

  }).call(GutterTooltip.prototype);



  exports.GutterHandler = GutterHandler;

  });

  ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"], function(acequire, exports, module) {

  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");
  var MouseEvent = exports.MouseEvent = function(domEvent, editor) {
      this.domEvent = domEvent;
      this.editor = editor;
      
      this.x = this.clientX = domEvent.clientX;
      this.y = this.clientY = domEvent.clientY;

      this.$pos = null;
      this.$inSelection = null;
      
      this.propagationStopped = false;
      this.defaultPrevented = false;
  };

  (function() {  
      
      this.stopPropagation = function() {
          event.stopPropagation(this.domEvent);
          this.propagationStopped = true;
      };
      
      this.preventDefault = function() {
          event.preventDefault(this.domEvent);
          this.defaultPrevented = true;
      };
      
      this.stop = function() {
          this.stopPropagation();
          this.preventDefault();
      };
      this.getDocumentPosition = function() {
          if (this.$pos)
              return this.$pos;
          
          this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);
          return this.$pos;
      };
      this.inSelection = function() {
          if (this.$inSelection !== null)
              return this.$inSelection;
              
          var editor = this.editor;
          

          var selectionRange = editor.getSelectionRange();
          if (selectionRange.isEmpty())
              this.$inSelection = false;
          else {
              var pos = this.getDocumentPosition();
              this.$inSelection = selectionRange.contains(pos.row, pos.column);
          }

          return this.$inSelection;
      };
      this.getButton = function() {
          return event.getButton(this.domEvent);
      };
      this.getShiftKey = function() {
          return this.domEvent.shiftKey;
      };
      
      this.getAccelKey = useragent.isMac
          ? function() { return this.domEvent.metaKey; }
          : function() { return this.domEvent.ctrlKey; };
      
  }).call(MouseEvent.prototype);

  });

  ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"], function(acequire, exports, module) {

  var dom = acequire("../lib/dom");
  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");

  var AUTOSCROLL_DELAY = 200;
  var SCROLL_CURSOR_DELAY = 200;
  var SCROLL_CURSOR_HYSTERESIS = 5;

  function DragdropHandler(mouseHandler) {

      var editor = mouseHandler.editor;

      var blankImage = dom.createElement("img");
      blankImage.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
      if (useragent.isOpera)
          blankImage.style.cssText = "width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";

      var exports = ["dragWait", "dragWaitEnd", "startDrag", "dragReadyEnd", "onMouseDrag"];

       exports.forEach(function(x) {
           mouseHandler[x] = this[x];
      }, this);
      editor.addEventListener("mousedown", this.onMouseDown.bind(mouseHandler));


      var mouseTarget = editor.container;
      var dragSelectionMarker, x, y;
      var timerId, range;
      var dragCursor, counter = 0;
      var dragOperation;
      var isInternal;
      var autoScrollStartTime;
      var cursorMovedTime;
      var cursorPointOnCaretMoved;

      this.onDragStart = function(e) {
          if (this.cancelDrag || !mouseTarget.draggable) {
              var self = this;
              setTimeout(function(){
                  self.startSelect();
                  self.captureMouse(e);
              }, 0);
              return e.preventDefault();
          }
          range = editor.getSelectionRange();

          var dataTransfer = e.dataTransfer;
          dataTransfer.effectAllowed = editor.getReadOnly() ? "copy" : "copyMove";
          if (useragent.isOpera) {
              editor.container.appendChild(blankImage);
              blankImage.scrollTop = 0;
          }
          dataTransfer.setDragImage && dataTransfer.setDragImage(blankImage, 0, 0);
          if (useragent.isOpera) {
              editor.container.removeChild(blankImage);
          }
          dataTransfer.clearData();
          dataTransfer.setData("Text", editor.session.getTextRange());

          isInternal = true;
          this.setState("drag");
      };

      this.onDragEnd = function(e) {
          mouseTarget.draggable = false;
          isInternal = false;
          this.setState(null);
          if (!editor.getReadOnly()) {
              var dropEffect = e.dataTransfer.dropEffect;
              if (!dragOperation && dropEffect == "move")
                  editor.session.remove(editor.getSelectionRange());
              editor.renderer.$cursorLayer.setBlinking(true);
          }
          this.editor.unsetStyle("ace_dragging");
          this.editor.renderer.setCursorStyle("");
      };

      this.onDragEnter = function(e) {
          if (editor.getReadOnly() || !canAccept(e.dataTransfer))
              return;
          x = e.clientX;
          y = e.clientY;
          if (!dragSelectionMarker)
              addDragMarker();
          counter++;
          e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);
          return event.preventDefault(e);
      };

      this.onDragOver = function(e) {
          if (editor.getReadOnly() || !canAccept(e.dataTransfer))
              return;
          x = e.clientX;
          y = e.clientY;
          if (!dragSelectionMarker) {
              addDragMarker();
              counter++;
          }
          if (onMouseMoveTimer !== null)
              onMouseMoveTimer = null;

          e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);
          return event.preventDefault(e);
      };

      this.onDragLeave = function(e) {
          counter--;
          if (counter <= 0 && dragSelectionMarker) {
              clearDragMarker();
              dragOperation = null;
              return event.preventDefault(e);
          }
      };

      this.onDrop = function(e) {
          if (!dragCursor)
              return;
          var dataTransfer = e.dataTransfer;
          if (isInternal) {
              switch (dragOperation) {
                  case "move":
                      if (range.contains(dragCursor.row, dragCursor.column)) {
                          range = {
                              start: dragCursor,
                              end: dragCursor
                          };
                      } else {
                          range = editor.moveText(range, dragCursor);
                      }
                      break;
                  case "copy":
                      range = editor.moveText(range, dragCursor, true);
                      break;
              }
          } else {
              var dropData = dataTransfer.getData('Text');
              range = {
                  start: dragCursor,
                  end: editor.session.insert(dragCursor, dropData)
              };
              editor.focus();
              dragOperation = null;
          }
          clearDragMarker();
          return event.preventDefault(e);
      };

      event.addListener(mouseTarget, "dragstart", this.onDragStart.bind(mouseHandler));
      event.addListener(mouseTarget, "dragend", this.onDragEnd.bind(mouseHandler));
      event.addListener(mouseTarget, "dragenter", this.onDragEnter.bind(mouseHandler));
      event.addListener(mouseTarget, "dragover", this.onDragOver.bind(mouseHandler));
      event.addListener(mouseTarget, "dragleave", this.onDragLeave.bind(mouseHandler));
      event.addListener(mouseTarget, "drop", this.onDrop.bind(mouseHandler));

      function scrollCursorIntoView(cursor, prevCursor) {
          var now = Date.now();
          var vMovement = !prevCursor || cursor.row != prevCursor.row;
          var hMovement = !prevCursor || cursor.column != prevCursor.column;
          if (!cursorMovedTime || vMovement || hMovement) {
              editor.$blockScrolling += 1;
              editor.moveCursorToPosition(cursor);
              editor.$blockScrolling -= 1;
              cursorMovedTime = now;
              cursorPointOnCaretMoved = {x: x, y: y};
          } else {
              var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);
              if (distance > SCROLL_CURSOR_HYSTERESIS) {
                  cursorMovedTime = null;
              } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {
                  editor.renderer.scrollCursorIntoView();
                  cursorMovedTime = null;
              }
          }
      }

      function autoScroll(cursor, prevCursor) {
          var now = Date.now();
          var lineHeight = editor.renderer.layerConfig.lineHeight;
          var characterWidth = editor.renderer.layerConfig.characterWidth;
          var editorRect = editor.renderer.scroller.getBoundingClientRect();
          var offsets = {
             x: {
                 left: x - editorRect.left,
                 right: editorRect.right - x
             },
             y: {
                 top: y - editorRect.top,
                 bottom: editorRect.bottom - y
             }
          };
          var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);
          var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);
          var scrollCursor = {row: cursor.row, column: cursor.column};
          if (nearestXOffset / characterWidth <= 2) {
              scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);
          }
          if (nearestYOffset / lineHeight <= 1) {
              scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);
          }
          var vScroll = cursor.row != scrollCursor.row;
          var hScroll = cursor.column != scrollCursor.column;
          var vMovement = !prevCursor || cursor.row != prevCursor.row;
          if (vScroll || (hScroll && !vMovement)) {
              if (!autoScrollStartTime)
                  autoScrollStartTime = now;
              else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)
                  editor.renderer.scrollCursorIntoView(scrollCursor);
          } else {
              autoScrollStartTime = null;
          }
      }

      function onDragInterval() {
          var prevCursor = dragCursor;
          dragCursor = editor.renderer.screenToTextCoordinates(x, y);
          scrollCursorIntoView(dragCursor, prevCursor);
          autoScroll(dragCursor, prevCursor);
      }

      function addDragMarker() {
          range = editor.selection.toOrientedRange();
          dragSelectionMarker = editor.session.addMarker(range, "ace_selection", editor.getSelectionStyle());
          editor.clearSelection();
          if (editor.isFocused())
              editor.renderer.$cursorLayer.setBlinking(false);
          clearInterval(timerId);
          onDragInterval();
          timerId = setInterval(onDragInterval, 20);
          counter = 0;
          event.addListener(document, "mousemove", onMouseMove);
      }

      function clearDragMarker() {
          clearInterval(timerId);
          editor.session.removeMarker(dragSelectionMarker);
          dragSelectionMarker = null;
          editor.$blockScrolling += 1;
          editor.selection.fromOrientedRange(range);
          editor.$blockScrolling -= 1;
          if (editor.isFocused() && !isInternal)
              editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly());
          range = null;
          dragCursor = null;
          counter = 0;
          autoScrollStartTime = null;
          cursorMovedTime = null;
          event.removeListener(document, "mousemove", onMouseMove);
      }
      var onMouseMoveTimer = null;
      function onMouseMove() {
          if (onMouseMoveTimer == null) {
              onMouseMoveTimer = setTimeout(function() {
                  if (onMouseMoveTimer != null && dragSelectionMarker)
                      clearDragMarker();
              }, 20);
          }
      }

      function canAccept(dataTransfer) {
          var types = dataTransfer.types;
          return !types || Array.prototype.some.call(types, function(type) {
              return type == 'text/plain' || type == 'Text';
          });
      }

      function getDropEffect(e) {
          var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];
          var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];

          var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;
          var effectAllowed = "uninitialized";
          try {
              effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();
          } catch (e) {}
          var dropEffect = "none";

          if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)
              dropEffect = "copy";
          else if (moveAllowed.indexOf(effectAllowed) >= 0)
              dropEffect = "move";
          else if (copyAllowed.indexOf(effectAllowed) >= 0)
              dropEffect = "copy";

          return dropEffect;
      }
  }

  (function() {

      this.dragWait = function() {
          var interval = Date.now() - this.mousedownEvent.time;
          if (interval > this.editor.getDragDelay())
              this.startDrag();
      };

      this.dragWaitEnd = function() {
          var target = this.editor.container;
          target.draggable = false;
          this.startSelect(this.mousedownEvent.getDocumentPosition());
          this.selectEnd();
      };

      this.dragReadyEnd = function(e) {
          this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());
          this.editor.unsetStyle("ace_dragging");
          this.editor.renderer.setCursorStyle("");
          this.dragWaitEnd();
      };

      this.startDrag = function(){
          this.cancelDrag = false;
          var editor = this.editor;
          var target = editor.container;
          target.draggable = true;
          editor.renderer.$cursorLayer.setBlinking(false);
          editor.setStyle("ace_dragging");
          var cursorStyle = useragent.isWin ? "default" : "move";
          editor.renderer.setCursorStyle(cursorStyle);
          this.setState("dragReady");
      };

      this.onMouseDrag = function(e) {
          var target = this.editor.container;
          if (useragent.isIE && this.state == "dragReady") {
              var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
              if (distance > 3)
                  target.dragDrop();
          }
          if (this.state === "dragWait") {
              var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
              if (distance > 0) {
                  target.draggable = false;
                  this.startSelect(this.mousedownEvent.getDocumentPosition());
              }
          }
      };

      this.onMouseDown = function(e) {
          if (!this.$dragEnabled)
              return;
          this.mousedownEvent = e;
          var editor = this.editor;

          var inSelection = e.inSelection();
          var button = e.getButton();
          var clickCount = e.domEvent.detail || 1;
          if (clickCount === 1 && button === 0 && inSelection) {
              if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))
                  return;
              this.mousedownEvent.time = Date.now();
              var eventTarget = e.domEvent.target || e.domEvent.srcElement;
              if ("unselectable" in eventTarget)
                  eventTarget.unselectable = "on";
              if (editor.getDragDelay()) {
                  if (useragent.isWebKit) {
                      this.cancelDrag = true;
                      var mouseTarget = editor.container;
                      mouseTarget.draggable = true;
                  }
                  this.setState("dragWait");
              } else {
                  this.startDrag();
              }
              this.captureMouse(e, this.onMouseDrag.bind(this));
              e.defaultPrevented = true;
          }
      };

  }).call(DragdropHandler.prototype);


  function calcDistance(ax, ay, bx, by) {
      return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));
  }

  exports.DragdropHandler = DragdropHandler;

  });

  ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"], function(acequire, exports, module) {
  var dom = acequire("./dom");

  exports.get = function (url, callback) {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', url, true);
      xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
              callback(xhr.responseText);
          }
      };
      xhr.send(null);
  };

  exports.loadScript = function(path, callback) {
      var head = dom.getDocumentHead();
      var s = document.createElement('script');

      s.src = path;
      head.appendChild(s);

      s.onload = s.onreadystatechange = function(_, isAbort) {
          if (isAbort || !s.readyState || s.readyState == "loaded" || s.readyState == "complete") {
              s = s.onload = s.onreadystatechange = null;
              if (!isAbort)
                  callback();
          }
      };
  };
  exports.qualifyURL = function(url) {
      var a = document.createElement('a');
      a.href = url;
      return a.href;
  };

  });

  ace.define("ace/lib/event_emitter",["require","exports","module"], function(acequire, exports, module) {

  var EventEmitter = {};
  var stopPropagation = function() { this.propagationStopped = true; };
  var preventDefault = function() { this.defaultPrevented = true; };

  EventEmitter._emit =
  EventEmitter._dispatchEvent = function(eventName, e) {
      this._eventRegistry || (this._eventRegistry = {});
      this._defaultHandlers || (this._defaultHandlers = {});

      var listeners = this._eventRegistry[eventName] || [];
      var defaultHandler = this._defaultHandlers[eventName];
      if (!listeners.length && !defaultHandler)
          return;

      if (typeof e != "object" || !e)
          e = {};

      if (!e.type)
          e.type = eventName;
      if (!e.stopPropagation)
          e.stopPropagation = stopPropagation;
      if (!e.preventDefault)
          e.preventDefault = preventDefault;

      listeners = listeners.slice();
      for (var i=0; i<listeners.length; i++) {
          listeners[i](e, this);
          if (e.propagationStopped)
              break;
      }
      
      if (defaultHandler && !e.defaultPrevented)
          return defaultHandler(e, this);
  };


  EventEmitter._signal = function(eventName, e) {
      var listeners = (this._eventRegistry || {})[eventName];
      if (!listeners)
          return;
      listeners = listeners.slice();
      for (var i=0; i<listeners.length; i++)
          listeners[i](e, this);
  };

  EventEmitter.once = function(eventName, callback) {
      var _self = this;
      callback && this.addEventListener(eventName, function newCallback() {
          _self.removeEventListener(eventName, newCallback);
          callback.apply(null, arguments);
      });
  };


  EventEmitter.setDefaultHandler = function(eventName, callback) {
      var handlers = this._defaultHandlers;
      if (!handlers)
          handlers = this._defaultHandlers = {_disabled_: {}};
      
      if (handlers[eventName]) {
          var old = handlers[eventName];
          var disabled = handlers._disabled_[eventName];
          if (!disabled)
              handlers._disabled_[eventName] = disabled = [];
          disabled.push(old);
          var i = disabled.indexOf(callback);
          if (i != -1) 
              disabled.splice(i, 1);
      }
      handlers[eventName] = callback;
  };
  EventEmitter.removeDefaultHandler = function(eventName, callback) {
      var handlers = this._defaultHandlers;
      if (!handlers)
          return;
      var disabled = handlers._disabled_[eventName];
      
      if (handlers[eventName] == callback) {
          var old = handlers[eventName];
          if (disabled)
              this.setDefaultHandler(eventName, disabled.pop());
      } else if (disabled) {
          var i = disabled.indexOf(callback);
          if (i != -1)
              disabled.splice(i, 1);
      }
  };

  EventEmitter.on =
  EventEmitter.addEventListener = function(eventName, callback, capturing) {
      this._eventRegistry = this._eventRegistry || {};

      var listeners = this._eventRegistry[eventName];
      if (!listeners)
          listeners = this._eventRegistry[eventName] = [];

      if (listeners.indexOf(callback) == -1)
          listeners[capturing ? "unshift" : "push"](callback);
      return callback;
  };

  EventEmitter.off =
  EventEmitter.removeListener =
  EventEmitter.removeEventListener = function(eventName, callback) {
      this._eventRegistry = this._eventRegistry || {};

      var listeners = this._eventRegistry[eventName];
      if (!listeners)
          return;

      var index = listeners.indexOf(callback);
      if (index !== -1)
          listeners.splice(index, 1);
  };

  EventEmitter.removeAllListeners = function(eventName) {
      if (this._eventRegistry) this._eventRegistry[eventName] = [];
  };

  exports.EventEmitter = EventEmitter;

  });

  ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(acequire, exports, module) {
  "no use strict";

  var oop = acequire("./oop");
  var EventEmitter = acequire("./event_emitter").EventEmitter;

  var optionsProvider = {
      setOptions: function(optList) {
          Object.keys(optList).forEach(function(key) {
              this.setOption(key, optList[key]);
          }, this);
      },
      getOptions: function(optionNames) {
          var result = {};
          if (!optionNames) {
              optionNames = Object.keys(this.$options);
          } else if (!Array.isArray(optionNames)) {
              result = optionNames;
              optionNames = Object.keys(result);
          }
          optionNames.forEach(function(key) {
              result[key] = this.getOption(key);
          }, this);
          return result;
      },
      setOption: function(name, value) {
          if (this["$" + name] === value)
              return;
          var opt = this.$options[name];
          if (!opt) {
              return warn('misspelled option "' + name + '"');
          }
          if (opt.forwardTo)
              return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);

          if (!opt.handlesSet)
              this["$" + name] = value;
          if (opt && opt.set)
              opt.set.call(this, value);
      },
      getOption: function(name) {
          var opt = this.$options[name];
          if (!opt) {
              return warn('misspelled option "' + name + '"');
          }
          if (opt.forwardTo)
              return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);
          return opt && opt.get ? opt.get.call(this) : this["$" + name];
      }
  };

  function warn(message) {
      if (typeof console != "undefined" && console.warn)
          console.warn.apply(console, arguments);
  }

  function reportError(msg, data) {
      var e = new Error(msg);
      e.data = data;
      if (typeof console == "object" && console.error)
          console.error(e);
      setTimeout(function() { throw e; });
  }

  var AppConfig = function() {
      this.$defaultOptions = {};
  };

  (function() {
      oop.implement(this, EventEmitter);
      this.defineOptions = function(obj, path, options) {
          if (!obj.$options)
              this.$defaultOptions[path] = obj.$options = {};

          Object.keys(options).forEach(function(key) {
              var opt = options[key];
              if (typeof opt == "string")
                  opt = {forwardTo: opt};

              opt.name || (opt.name = key);
              obj.$options[opt.name] = opt;
              if ("initialValue" in opt)
                  obj["$" + opt.name] = opt.initialValue;
          });
          oop.implement(obj, optionsProvider);

          return this;
      };

      this.resetOptions = function(obj) {
          Object.keys(obj.$options).forEach(function(key) {
              var opt = obj.$options[key];
              if ("value" in opt)
                  obj.setOption(key, opt.value);
          });
      };

      this.setDefaultValue = function(path, name, value) {
          var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});
          if (opts[name]) {
              if (opts.forwardTo)
                  this.setDefaultValue(opts.forwardTo, name, value);
              else
                  opts[name].value = value;
          }
      };

      this.setDefaultValues = function(path, optionHash) {
          Object.keys(optionHash).forEach(function(key) {
              this.setDefaultValue(path, key, optionHash[key]);
          }, this);
      };
      
      this.warn = warn;
      this.reportError = reportError;
      
  }).call(AppConfig.prototype);

  exports.AppConfig = AppConfig;

  });

  ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"], function(acequire, exports, module) {
  "no use strict";

  var lang = acequire("./lib/lang");
  var oop = acequire("./lib/oop");
  var net = acequire("./lib/net");
  var AppConfig = acequire("./lib/app_config").AppConfig;

  module.exports = exports = new AppConfig();

  var global = (function() {
      return this || typeof window != "undefined" && window;
  })();

  var options = {
      packaged: false,
      workerPath: null,
      modePath: null,
      themePath: null,
      basePath: "",
      suffix: ".js",
      $moduleUrls: {}
  };

  exports.get = function(key) {
      if (!options.hasOwnProperty(key))
          throw new Error("Unknown config key: " + key);

      return options[key];
  };

  exports.set = function(key, value) {
      if (!options.hasOwnProperty(key))
          throw new Error("Unknown config key: " + key);

      options[key] = value;
  };

  exports.all = function() {
      return lang.copyObject(options);
  };
  exports.moduleUrl = function(name, component) {
      if (options.$moduleUrls[name])
          return options.$moduleUrls[name];

      var parts = name.split("/");
      component = component || parts[parts.length - 2] || "";
      var sep = component == "snippets" ? "/" : "-";
      var base = parts[parts.length - 1];
      if (component == "worker" && sep == "-") {
          var re = new RegExp("^" + component + "[\\-_]|[\\-_]" + component + "$", "g");
          base = base.replace(re, "");
      }

      if ((!base || base == component) && parts.length > 1)
          base = parts[parts.length - 2];
      var path = options[component + "Path"];
      if (path == null) {
          path = options.basePath;
      } else if (sep == "/") {
          component = sep = "";
      }
      if (path && path.slice(-1) != "/")
          path += "/";
      return path + component + sep + base + this.get("suffix");
  };

  exports.setModuleUrl = function(name, subst) {
      return options.$moduleUrls[name] = subst;
  };

  exports.$loading = {};
  exports.loadModule = function(moduleName, onLoad) {
      var module, moduleType;
      if (Array.isArray(moduleName)) {
          moduleType = moduleName[0];
          moduleName = moduleName[1];
      }

      try {
          module = acequire(moduleName);
      } catch (e) {}
      if (module && !exports.$loading[moduleName])
          return onLoad && onLoad(module);

      if (!exports.$loading[moduleName])
          exports.$loading[moduleName] = [];

      exports.$loading[moduleName].push(onLoad);

      if (exports.$loading[moduleName].length > 1)
          return;

      var afterLoad = function() {
          acequire([moduleName], function(module) {
              exports._emit("load.module", {name: moduleName, module: module});
              var listeners = exports.$loading[moduleName];
              exports.$loading[moduleName] = null;
              listeners.forEach(function(onLoad) {
                  onLoad && onLoad(module);
              });
          });
      };

      if (!exports.get("packaged"))
          return afterLoad();
      net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);
  };
  init(true);function init(packaged) {

      if (!global || !global.document)
          return;
      
      options.packaged = packaged || acequire.packaged || module.packaged || (global.define && undefined.packaged);

      var scriptOptions = {};
      var scriptUrl = "";
      var currentScript = (document.currentScript || document._currentScript ); // native or polyfill
      var currentDocument = currentScript && currentScript.ownerDocument || document;
      
      var scripts = currentDocument.getElementsByTagName("script");
      for (var i=0; i<scripts.length; i++) {
          var script = scripts[i];

          var src = script.src || script.getAttribute("src");
          if (!src)
              continue;

          var attributes = script.attributes;
          for (var j=0, l=attributes.length; j < l; j++) {
              var attr = attributes[j];
              if (attr.name.indexOf("data-ace-") === 0) {
                  scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, ""))] = attr.value;
              }
          }

          var m = src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);
          if (m)
              scriptUrl = m[1];
      }

      if (scriptUrl) {
          scriptOptions.base = scriptOptions.base || scriptUrl;
          scriptOptions.packaged = true;
      }

      scriptOptions.basePath = scriptOptions.base;
      scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;
      scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;
      scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;
      delete scriptOptions.base;

      for (var key in scriptOptions)
          if (typeof scriptOptions[key] !== "undefined")
              exports.set(key, scriptOptions[key]);
  }

  exports.init = init;

  function deHyphenate(str) {
      return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });
  }

  });

  ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"], function(acequire, exports, module) {

  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");
  var DefaultHandlers = acequire("./default_handlers").DefaultHandlers;
  var DefaultGutterHandler = acequire("./default_gutter_handler").GutterHandler;
  var MouseEvent = acequire("./mouse_event").MouseEvent;
  var DragdropHandler = acequire("./dragdrop_handler").DragdropHandler;
  var config = acequire("../config");

  var MouseHandler = function(editor) {
      var _self = this;
      this.editor = editor;

      new DefaultHandlers(this);
      new DefaultGutterHandler(this);
      new DragdropHandler(this);

      var focusEditor = function(e) {
          var windowBlurred = !document.hasFocus || !document.hasFocus()
              || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());
          if (windowBlurred)
              window.focus();
          editor.focus();
      };

      var mouseTarget = editor.renderer.getMouseEventTarget();
      event.addListener(mouseTarget, "click", this.onMouseEvent.bind(this, "click"));
      event.addListener(mouseTarget, "mousemove", this.onMouseMove.bind(this, "mousemove"));
      event.addMultiMouseDownListener([
          mouseTarget,
          editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,
          editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,
          editor.textInput && editor.textInput.getElement()
      ].filter(Boolean), [400, 300, 250], this, "onMouseEvent");
      event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, "mousewheel"));
      event.addTouchMoveListener(editor.container, this.onTouchMove.bind(this, "touchmove"));

      var gutterEl = editor.renderer.$gutter;
      event.addListener(gutterEl, "mousedown", this.onMouseEvent.bind(this, "guttermousedown"));
      event.addListener(gutterEl, "click", this.onMouseEvent.bind(this, "gutterclick"));
      event.addListener(gutterEl, "dblclick", this.onMouseEvent.bind(this, "gutterdblclick"));
      event.addListener(gutterEl, "mousemove", this.onMouseEvent.bind(this, "guttermousemove"));

      event.addListener(mouseTarget, "mousedown", focusEditor);
      event.addListener(gutterEl, "mousedown", focusEditor);
      if (useragent.isIE && editor.renderer.scrollBarV) {
          event.addListener(editor.renderer.scrollBarV.element, "mousedown", focusEditor);
          event.addListener(editor.renderer.scrollBarH.element, "mousedown", focusEditor);
      }

      editor.on("mousemove", function(e){
          if (_self.state || _self.$dragDelay || !_self.$dragEnabled)
              return;

          var character = editor.renderer.screenToTextCoordinates(e.x, e.y);
          var range = editor.session.selection.getRange();
          var renderer = editor.renderer;

          if (!range.isEmpty() && range.insideStart(character.row, character.column)) {
              renderer.setCursorStyle("default");
          } else {
              renderer.setCursorStyle("");
          }
      });
  };

  (function() {
      this.onMouseEvent = function(name, e) {
          this.editor._emit(name, new MouseEvent(e, this.editor));
      };

      this.onMouseMove = function(name, e) {
          var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;
          if (!listeners || !listeners.length)
              return;

          this.editor._emit(name, new MouseEvent(e, this.editor));
      };

      this.onMouseWheel = function(name, e) {
          var mouseEvent = new MouseEvent(e, this.editor);
          mouseEvent.speed = this.$scrollSpeed * 2;
          mouseEvent.wheelX = e.wheelX;
          mouseEvent.wheelY = e.wheelY;

          this.editor._emit(name, mouseEvent);
      };
      
      this.onTouchMove = function (name, e) {
          var mouseEvent = new MouseEvent(e, this.editor);
          mouseEvent.speed = 1;//this.$scrollSpeed * 2;
          mouseEvent.wheelX = e.wheelX;
          mouseEvent.wheelY = e.wheelY;
          this.editor._emit(name, mouseEvent);
      };

      this.setState = function(state) {
          this.state = state;
      };

      this.captureMouse = function(ev, mouseMoveHandler) {
          this.x = ev.x;
          this.y = ev.y;

          this.isMousePressed = true;
          var renderer = this.editor.renderer;
          if (renderer.$keepTextAreaAtCursor)
              renderer.$keepTextAreaAtCursor = null;

          var self = this;
          var onMouseMove = function(e) {
              if (!e) return;
              if (useragent.isWebKit && !e.which && self.releaseMouse)
                  return self.releaseMouse();

              self.x = e.clientX;
              self.y = e.clientY;
              mouseMoveHandler && mouseMoveHandler(e);
              self.mouseEvent = new MouseEvent(e, self.editor);
              self.$mouseMoved = true;
          };

          var onCaptureEnd = function(e) {
              clearInterval(timerId);
              onCaptureInterval();
              self[self.state + "End"] && self[self.state + "End"](e);
              self.state = "";
              if (renderer.$keepTextAreaAtCursor == null) {
                  renderer.$keepTextAreaAtCursor = true;
                  renderer.$moveTextAreaToCursor();
              }
              self.isMousePressed = false;
              self.$onCaptureMouseMove = self.releaseMouse = null;
              e && self.onMouseEvent("mouseup", e);
          };

          var onCaptureInterval = function() {
              self[self.state] && self[self.state]();
              self.$mouseMoved = false;
          };

          if (useragent.isOldIE && ev.domEvent.type == "dblclick") {
              return setTimeout(function() {onCaptureEnd(ev);});
          }

          self.$onCaptureMouseMove = onMouseMove;
          self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);
          var timerId = setInterval(onCaptureInterval, 20);
      };
      this.releaseMouse = null;
      this.cancelContextMenu = function() {
          var stop = function(e) {
              if (e && e.domEvent && e.domEvent.type != "contextmenu")
                  return;
              this.editor.off("nativecontextmenu", stop);
              if (e && e.domEvent)
                  event.stopEvent(e.domEvent);
          }.bind(this);
          setTimeout(stop, 10);
          this.editor.on("nativecontextmenu", stop);
      };
  }).call(MouseHandler.prototype);

  config.defineOptions(MouseHandler.prototype, "mouseHandler", {
      scrollSpeed: {initialValue: 2},
      dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},
      dragEnabled: {initialValue: true},
      focusTimout: {initialValue: 0},
      tooltipFollowsMouse: {initialValue: true}
  });


  exports.MouseHandler = MouseHandler;
  });

  ace.define("ace/mouse/fold_handler",["require","exports","module"], function(acequire, exports, module) {

  function FoldHandler(editor) {

      editor.on("click", function(e) {
          var position = e.getDocumentPosition();
          var session = editor.session;
          var fold = session.getFoldAt(position.row, position.column, 1);
          if (fold) {
              if (e.getAccelKey())
                  session.removeFold(fold);
              else
                  session.expandFold(fold);

              e.stop();
          }
      });

      editor.on("gutterclick", function(e) {
          var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);

          if (gutterRegion == "foldWidgets") {
              var row = e.getDocumentPosition().row;
              var session = editor.session;
              if (session.foldWidgets && session.foldWidgets[row])
                  editor.session.onFoldWidgetClick(row, e);
              if (!editor.isFocused())
                  editor.focus();
              e.stop();
          }
      });

      editor.on("gutterdblclick", function(e) {
          var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);

          if (gutterRegion == "foldWidgets") {
              var row = e.getDocumentPosition().row;
              var session = editor.session;
              var data = session.getParentFoldRangeData(row, true);
              var range = data.range || data.firstRange;

              if (range) {
                  row = range.start.row;
                  var fold = session.getFoldAt(row, session.getLine(row).length, 1);

                  if (fold) {
                      session.removeFold(fold);
                  } else {
                      session.addFold("...", range);
                      editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});
                  }
              }
              e.stop();
          }
      });
  }

  exports.FoldHandler = FoldHandler;

  });

  ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"], function(acequire, exports, module) {

  var keyUtil  = acequire("../lib/keys");
  var event = acequire("../lib/event");

  var KeyBinding = function(editor) {
      this.$editor = editor;
      this.$data = {editor: editor};
      this.$handlers = [];
      this.setDefaultHandler(editor.commands);
  };

  (function() {
      this.setDefaultHandler = function(kb) {
          this.removeKeyboardHandler(this.$defaultHandler);
          this.$defaultHandler = kb;
          this.addKeyboardHandler(kb, 0);
      };

      this.setKeyboardHandler = function(kb) {
          var h = this.$handlers;
          if (h[h.length - 1] == kb)
              return;

          while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)
              this.removeKeyboardHandler(h[h.length - 1]);

          this.addKeyboardHandler(kb, 1);
      };

      this.addKeyboardHandler = function(kb, pos) {
          if (!kb)
              return;
          if (typeof kb == "function" && !kb.handleKeyboard)
              kb.handleKeyboard = kb;
          var i = this.$handlers.indexOf(kb);
          if (i != -1)
              this.$handlers.splice(i, 1);

          if (pos == undefined)
              this.$handlers.push(kb);
          else
              this.$handlers.splice(pos, 0, kb);

          if (i == -1 && kb.attach)
              kb.attach(this.$editor);
      };

      this.removeKeyboardHandler = function(kb) {
          var i = this.$handlers.indexOf(kb);
          if (i == -1)
              return false;
          this.$handlers.splice(i, 1);
          kb.detach && kb.detach(this.$editor);
          return true;
      };

      this.getKeyboardHandler = function() {
          return this.$handlers[this.$handlers.length - 1];
      };
      
      this.getStatusText = function() {
          var data = this.$data;
          var editor = data.editor;
          return this.$handlers.map(function(h) {
              return h.getStatusText && h.getStatusText(editor, data) || "";
          }).filter(Boolean).join(" ");
      };

      this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {
          var toExecute;
          var success = false;
          var commands = this.$editor.commands;

          for (var i = this.$handlers.length; i--;) {
              toExecute = this.$handlers[i].handleKeyboard(
                  this.$data, hashId, keyString, keyCode, e
              );
              if (!toExecute || !toExecute.command)
                  continue;
              if (toExecute.command == "null") {
                  success = true;
              } else {
                  success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);
              }
              if (success && e && hashId != -1 && 
                  toExecute.passEvent != true && toExecute.command.passEvent != true
              ) {
                  event.stopEvent(e);
              }
              if (success)
                  break;
          }
          
          if (!success && hashId == -1) {
              toExecute = {command: "insertstring"};
              success = commands.exec("insertstring", this.$editor, keyString);
          }
          
          if (success && this.$editor._signal)
              this.$editor._signal("keyboardActivity", toExecute);
          
          return success;
      };

      this.onCommandKey = function(e, hashId, keyCode) {
          var keyString = keyUtil.keyCodeToString(keyCode);
          this.$callKeyboardHandlers(hashId, keyString, keyCode, e);
      };

      this.onTextInput = function(text) {
          this.$callKeyboardHandlers(-1, text);
      };

  }).call(KeyBinding.prototype);

  exports.KeyBinding = KeyBinding;
  });

  ace.define("ace/lib/bidiutil",["require","exports","module"], function(acequire, exports, module) {
  var dir = 0, hiLevel = 0;
  var lastArabic = false, hasUBAT_B = false,  hasUBAT_S = false;

  var impTab_LTR = [	[	0,		3,		0,		1,		0,		0,		0	],	[	0,		3,		0,		1,		2,		2,		0	],	[	0,		3,		0,		0x11,		2,		0,		1	],	[	0,		3,		5,		5,		4,		1,		0	],	[	0,		3,		0x15,		0x15,		4,		0,		1	],	[	0,		3,		5,		5,		4,		2,		0	]
  ];

  var impTab_RTL = [	[	2,		0,		1,		1,		0,		1,		0	],	[	2,		0,		1,		1,		0,		2,		0	],	[	2,		0,		2,		1,		3,		2,		0	],	[	2,		0,		2,		0x21,		3,		1,		1	]
  ];

  var LTR = 0, RTL = 1;

  var L = 0;
  var R = 1;
  var EN = 2;
  var AN = 3;
  var ON = 4;
  var B = 5;
  var S = 6;
  var AL = 7;
  var WS = 8;
  var CS = 9;
  var ES = 10;
  var ET = 11;
  var NSM = 12;
  var LRE = 13;
  var RLE = 14;
  var PDF = 15;
  var LRO = 16;
  var RLO = 17;
  var BN = 18;

  var UnicodeTBL00 = [
  BN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,
  BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,
  WS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,
  EN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,
  ON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,
  L,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,
  ON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,
  L,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,
  BN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,
  BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,
  CS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,
  ET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON
  ];

  var UnicodeTBL20 = [
  WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R	,
  ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,
  ON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,
  ET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,
  ON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,
  ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS
  ];

  function _computeLevels(chars, levels, len, charTypes) {
  	var impTab = dir ? impTab_RTL : impTab_LTR
  		, prevState = null, newClass = null, newLevel = null, newState = 0
  		, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];

  	if (!charTypes) {
  		for (i = 0, charTypes = []; i < len; i++) {
  			charTypes[i] = _getCharacterType(chars[i]);
  		}
  	}
  	hiLevel = dir;
  	lastArabic = false;
  	hasUBAT_B = false;
  	hasUBAT_S = false;
  	for (ix = 0; ix < len; ix++){
  		prevState = newState;
  		classes[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);
  		newState = impTab[prevState][newClass];
  		action = newState & 0xF0;
  		newState &= 0x0F;
  		levels[ix] = newLevel = impTab[newState][5];
  		if (action > 0){
  			if (action == 0x10){
  				for(i = condPos; i < ix; i++){
  					levels[i] = 1;
  				}
  				condPos = -1;
  			} else {
  				condPos = -1;
  			}
  		}
  		cond = impTab[newState][6];
  		if (cond){
  			if(condPos == -1){
  				condPos = ix;
  			}
  		}else{
  			if (condPos > -1){
  				for(i = condPos; i < ix; i++){
  					levels[i] = newLevel;
  				}
  				condPos = -1;
  			}
  		}
  		if (charTypes[ix] == B){
  			levels[ix] = 0;
  		}
  		hiLevel |= newLevel;
  	}
  	if (hasUBAT_S){
  		for(i = 0; i < len; i++){
  			if(charTypes[i] == S){
  				levels[i] = dir;
  				for(var j = i - 1; j >= 0; j--){
  					if(charTypes[j] == WS){
  						levels[j] = dir;
  					}else{
  						break;
  					}
  				}
  			}
  		}
  	}
  }

  function _invertLevel(lev, levels, _array) {
  	if (hiLevel < lev){
  		return;
  	}
  	if (lev == 1 && dir == RTL && !hasUBAT_B){
  		_array.reverse();
  		return;
  	}
  	var len = _array.length, start = 0, end, lo, hi, tmp;
  	while(start < len){
  		if (levels[start] >= lev){
  			end = start + 1;
  		while(end < len && levels[end] >= lev){
  			end++;
  		}
  		for(lo = start, hi = end - 1 ; lo < hi; lo++, hi--){
  			tmp = _array[lo];
  			_array[lo] = _array[hi];
  			_array[hi] = tmp;
  		}
  		start = end;
  	}
  	start++;
  	}
  }

  function _getCharClass(chars, types, classes, ix) {
  	var cType = types[ix], wType, nType, len, i;
  	switch(cType){
  		case L:
  		case R:
  			lastArabic = false;
  		case ON:
  		case AN:
  			return cType;
  		case EN:
  			return lastArabic ? AN : EN;
  		case AL:
  			lastArabic = true;
  			return R;
  		case WS:
  			return ON;
  		case CS:
  			if (ix < 1 || (ix + 1) >= types.length ||
  				((wType = classes[ix - 1]) != EN && wType != AN) ||
  				((nType = types[ix + 1]) != EN && nType != AN)){
  				return ON;
  			}
  			if (lastArabic){nType = AN;}
  			return nType == wType ? nType : ON;
  		case ES:
  			wType = ix > 0 ? classes[ix - 1] : B;
  			if (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN){
  				return EN;
  			}
  			return ON;
  		case ET:
  			if (ix > 0 && classes[ix - 1] == EN){
  				return EN;
  			}
  			if (lastArabic){
  				return ON;
  			}
  			i = ix + 1;
  			len = types.length;
  			while (i < len && types[i] == ET){
  				i++;
  			}
  			if (i < len && types[i] == EN){
  				return EN;
  			}
  			return ON;
  		case NSM:
  			len = types.length;
  			i = ix + 1;
  			while (i < len && types[i] == NSM){
  				i++;
  			}
  			if (i < len){
  				var c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;

  				wType = types[i];
  				if (rtlCandidate && (wType == R || wType == AL)){
  					return R;
  				}
  			}

  			if (ix < 1 || (wType = types[ix - 1]) == B){
  				return ON;
  			}
  			return classes[ix - 1];
  		case B:
  			lastArabic = false;
  			hasUBAT_B = true;
  			return dir;
  		case S:
  			hasUBAT_S = true;
  			return ON;
  		case LRE:
  		case RLE:
  		case LRO:
  		case RLO:
  		case PDF:
  			lastArabic = false;
  		case BN:
  			return ON;
  	}
  }

  function _getCharacterType( ch ) {
  	var uc = ch.charCodeAt(0), hi = uc >> 8;

  	if (hi == 0) {
  		return ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);
  	} else if (hi == 5) {
  		return (/[\u0591-\u05f4]/.test(ch) ? R : L);
  	} else if (hi == 6) {
  		if (/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(ch))
  			return NSM;
  		else if (/[\u0660-\u0669\u066b-\u066c]/.test(ch))
  			return AN;
  		else if (uc == 0x066A)
  			return ET;
  		else if (/[\u06f0-\u06f9]/.test(ch))
  			return EN;
  		else
  			return AL;
  	} else if (hi == 0x20 && uc <= 0x205F) {
  		return UnicodeTBL20[uc & 0xFF];
  	} else if (hi == 0xFE) {
  		return (uc >= 0xFE70 ? AL : ON);
  	}
  	return ON;
  }
  exports.L = L;
  exports.R = R;
  exports.EN = EN;
  exports.ON_R = 3;
  exports.AN = 4;
  exports.R_H = 5;
  exports.B = 6;

  exports.DOT = "\xB7";
  exports.doBidiReorder = function(text, textCharTypes, isRtl) {
  	if (text.length < 2)
  		return {};

  	var chars = text.split(""), logicalFromVisual = new Array(chars.length),
  		bidiLevels = new Array(chars.length), levels = [];

  	dir = isRtl ? RTL : LTR;

  	_computeLevels(chars, levels, chars.length, textCharTypes);

  	for (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++);

  	_invertLevel(2, levels, logicalFromVisual);
  	_invertLevel(1, levels, logicalFromVisual);

  	for (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width
  		if (textCharTypes[i] === AN) {
  			levels[i] = exports.AN;
  		} else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE)
  			|| textCharTypes[i] === ON || textCharTypes[i] === BN)) {
  			levels[i] = exports.ON_R;
  		} else if ((i > 0 && chars[i - 1] === '\u0644') && /\u0622|\u0623|\u0625|\u0627/.test(chars[i])) {
  			levels[i - 1] = levels[i] = exports.R_H;
  			i++;
  		}
  	}
  	if (chars[chars.length - 1] === exports.DOT)
  		levels[chars.length - 1] = exports.B;

  	for (var i = 0; i < logicalFromVisual.length; i++) {
  		bidiLevels[i] = levels[logicalFromVisual[i]];
  	}

  	return {'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels};
  };
  exports.hasBidiCharacters = function(text, textCharTypes){
  	var ret = false;
  	for (var i = 0; i < text.length; i++){
  		textCharTypes[i] = _getCharacterType(text.charAt(i));
  		if (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL))
  			ret = true;
  	}
  	return ret;
  };
  exports.getVisualFromLogicalIdx = function(logIdx, rowMap) {
  	for (var i = 0; i < rowMap.logicalFromVisual.length; i++) {
  		if (rowMap.logicalFromVisual[i] == logIdx)
  			return i;
  	}
  	return 0;
  };

  });

  ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang","ace/lib/useragent"], function(acequire, exports, module) {

  var bidiUtil = acequire("./lib/bidiutil");
  var lang = acequire("./lib/lang");
  var useragent = acequire("./lib/useragent");
  var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
  var BidiHandler = function(session) {
      this.session = session;
      this.bidiMap = {};
      this.currentRow = null;
      this.bidiUtil = bidiUtil;
      this.charWidths = [];
      this.EOL = "\xAC";
      this.showInvisibles = true;
      this.isRtlDir = false;
      this.line = "";
      this.wrapIndent = 0;
      this.isLastRow = false;
      this.EOF = "\xB6";
      this.seenBidi = false;
  };

  (function() {
      this.isBidiRow = function(screenRow, docRow, splitIndex) {
          if (!this.seenBidi)
              return false;
          if (screenRow !== this.currentRow) {
              this.currentRow = screenRow;
              this.updateRowLine(docRow, splitIndex);
              this.updateBidiMap();
          }
          return this.bidiMap.bidiLevels;
      };

      this.onChange = function(delta) {
          if (!this.seenBidi) {
              if (delta.action == "insert" && bidiRE.test(delta.lines.join("\n"))) {
                  this.seenBidi = true;
                  this.currentRow = null;
              }
          }
          else {
              this.currentRow = null;
          }
      };

      this.getDocumentRow = function() {
          var docRow = 0;
          var rowCache = this.session.$screenRowCache;
          if (rowCache.length) {
              var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);
              if (index >= 0)
                  docRow = this.session.$docRowCache[index];
          }

          return docRow;
      };

      this.getSplitIndex = function() {
          var splitIndex = 0;
          var rowCache = this.session.$screenRowCache;
          if (rowCache.length) {
              var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);
              while (this.currentRow - splitIndex > 0) {
                  currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);
                  if (currentIndex !== prevIndex)
                      break;

                  prevIndex = currentIndex;
                  splitIndex++;
              }
          }

          return splitIndex;
      };

      this.updateRowLine = function(docRow, splitIndex) {
          if (docRow === undefined)
              docRow = this.getDocumentRow();

          this.wrapIndent = 0;
          this.isLastRow = (docRow === this.session.getLength() - 1);
          this.line = this.session.getLine(docRow);
          if (this.session.$useWrapMode) {
              var splits = this.session.$wrapData[docRow];
              if (splits) {
                  if (splitIndex === undefined)
                      splitIndex = this.getSplitIndex();

                  if(splitIndex > 0 && splits.length) {
                      this.wrapIndent = splits.indent;
                      this.line = (splitIndex < splits.length) ?
                          this.line.substring(splits[splitIndex - 1], splits[splits.length - 1]) :
                              this.line.substring(splits[splits.length - 1]);
                  } else {
                      this.line = this.line.substring(0, splits[splitIndex]);
                  }
              }
          }
          var session = this.session, shift = 0, size;
          this.line = this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g, function(ch, i){
              if (ch === '\t' || session.isFullWidth(ch.charCodeAt(0))) {
                  size = (ch === '\t') ? session.getScreenTabSize(i + shift) : 2;
                  shift += size - 1;
                  return lang.stringRepeat(bidiUtil.DOT, size);
              }
              return ch;
          });
      };

      this.updateBidiMap = function() {
          var textCharTypes = [], endOfLine = this.isLastRow ? this.EOF : this.EOL;
          var line = this.line + (this.showInvisibles ? endOfLine : bidiUtil.DOT);
          if (bidiUtil.hasBidiCharacters(line, textCharTypes)) {
              this.bidiMap = bidiUtil.doBidiReorder(line, textCharTypes, this.isRtlDir);
          } else {
              this.bidiMap = {};
          }
      };
      this.markAsDirty = function() {
          this.currentRow = null;
      };
      this.updateCharacterWidths = function(fontMetrics) {
          if (!this.seenBidi)
              return;
          if (this.characterWidth === fontMetrics.$characterSize.width)
              return;

          var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;
          var bidiCharWidth = fontMetrics.$measureCharWidth("\u05d4");

          this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;
          this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;
          this.charWidths[bidiUtil.R_H] = useragent.isChrome ? bidiCharWidth : bidiCharWidth * 0.45;
          this.charWidths[bidiUtil.B] = 0;

          this.currentRow = null;
      };

      this.getShowInvisibles = function() {
          return this.showInvisibles;
      };

      this.setShowInvisibles = function(showInvisibles) {
          this.showInvisibles = showInvisibles;
          this.currentRow = null;
      };

      this.setEolChar = function(eolChar) {
          this.EOL = eolChar;
      };

      this.setTextDir = function(isRtlDir) {
          this.isRtlDir = isRtlDir;
      };
      this.getPosLeft = function(col) {
          col -= this.wrapIndent;
          var visualIdx = bidiUtil.getVisualFromLogicalIdx(col > 0 ? col - 1 : 0, this.bidiMap),
              levels = this.bidiMap.bidiLevels, left = 0;

          if (col === 0 && levels[visualIdx] % 2 !== 0)
              visualIdx++;

          for (var i = 0; i < visualIdx; i++) {
              left += this.charWidths[levels[i]];
          }

          if (col !== 0 && levels[visualIdx] % 2 === 0)
              left += this.charWidths[levels[visualIdx]];

          if (this.wrapIndent)
              left += this.wrapIndent * this.charWidths[bidiUtil.L];

          return left;
      };
      this.getSelections = function(startCol, endCol) {
          var map = this.bidiMap, levels = map.bidiLevels, level, offset = this.wrapIndent * this.charWidths[bidiUtil.L], selections = [],
              selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent,
                  isSelected = false, isSelectedPrev = false, selectionStart = 0;

          for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {
              logIdx = map.logicalFromVisual[visIdx];
              level = levels[visIdx];
              isSelected = (logIdx >= selColMin) && (logIdx < selColMax);
              if (isSelected && !isSelectedPrev) {
                  selectionStart = offset;
              } else if (!isSelected && isSelectedPrev) {
                  selections.push({left: selectionStart, width: offset - selectionStart});
              }
              offset += this.charWidths[level];
              isSelectedPrev = isSelected;
          }

          if (isSelected && (visIdx === levels.length)) {
              selections.push({left: selectionStart, width: offset - selectionStart});
          }

          return selections;
      };
      this.offsetToCol = function(posX) {
          var logicalIdx = 0, posX = Math.max(posX, 0),
              offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels,
                  charWidth = this.charWidths[levels[visualIdx]];

          if (this.wrapIndent) {
              posX -= this.wrapIndent * this.charWidths[bidiUtil.L];
          }

          while(posX > offset + charWidth/2) {
              offset += charWidth;
              if(visualIdx === levels.length - 1) {
                  charWidth = 0;
                  break;
              }
              charWidth = this.charWidths[levels[++visualIdx]];
          }

          if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)){
              if(posX < offset)
                  visualIdx--;
              logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];

          } else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)){
              logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]
                      : this.bidiMap.logicalFromVisual[visualIdx - 1]);

          } else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))
                  || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))){
              logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];
          } else {
              if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)
                  visualIdx--;
              logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];
          }

          return (logicalIdx + this.wrapIndent);
      };

  }).call(BidiHandler.prototype);

  exports.BidiHandler = BidiHandler;
  });

  ace.define("ace/range",["require","exports","module"], function(acequire, exports, module) {
  var comparePoints = function(p1, p2) {
      return p1.row - p2.row || p1.column - p2.column;
  };
  var Range = function(startRow, startColumn, endRow, endColumn) {
      this.start = {
          row: startRow,
          column: startColumn
      };

      this.end = {
          row: endRow,
          column: endColumn
      };
  };

  (function() {
      this.isEqual = function(range) {
          return this.start.row === range.start.row &&
              this.end.row === range.end.row &&
              this.start.column === range.start.column &&
              this.end.column === range.end.column;
      };
      this.toString = function() {
          return ("Range: [" + this.start.row + "/" + this.start.column +
              "] -> [" + this.end.row + "/" + this.end.column + "]");
      };

      this.contains = function(row, column) {
          return this.compare(row, column) == 0;
      };
      this.compareRange = function(range) {
          var cmp,
              end = range.end,
              start = range.start;

          cmp = this.compare(end.row, end.column);
          if (cmp == 1) {
              cmp = this.compare(start.row, start.column);
              if (cmp == 1) {
                  return 2;
              } else if (cmp == 0) {
                  return 1;
              } else {
                  return 0;
              }
          } else if (cmp == -1) {
              return -2;
          } else {
              cmp = this.compare(start.row, start.column);
              if (cmp == -1) {
                  return -1;
              } else if (cmp == 1) {
                  return 42;
              } else {
                  return 0;
              }
          }
      };
      this.comparePoint = function(p) {
          return this.compare(p.row, p.column);
      };
      this.containsRange = function(range) {
          return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;
      };
      this.intersects = function(range) {
          var cmp = this.compareRange(range);
          return (cmp == -1 || cmp == 0 || cmp == 1);
      };
      this.isEnd = function(row, column) {
          return this.end.row == row && this.end.column == column;
      };
      this.isStart = function(row, column) {
          return this.start.row == row && this.start.column == column;
      };
      this.setStart = function(row, column) {
          if (typeof row == "object") {
              this.start.column = row.column;
              this.start.row = row.row;
          } else {
              this.start.row = row;
              this.start.column = column;
          }
      };
      this.setEnd = function(row, column) {
          if (typeof row == "object") {
              this.end.column = row.column;
              this.end.row = row.row;
          } else {
              this.end.row = row;
              this.end.column = column;
          }
      };
      this.inside = function(row, column) {
          if (this.compare(row, column) == 0) {
              if (this.isEnd(row, column) || this.isStart(row, column)) {
                  return false;
              } else {
                  return true;
              }
          }
          return false;
      };
      this.insideStart = function(row, column) {
          if (this.compare(row, column) == 0) {
              if (this.isEnd(row, column)) {
                  return false;
              } else {
                  return true;
              }
          }
          return false;
      };
      this.insideEnd = function(row, column) {
          if (this.compare(row, column) == 0) {
              if (this.isStart(row, column)) {
                  return false;
              } else {
                  return true;
              }
          }
          return false;
      };
      this.compare = function(row, column) {
          if (!this.isMultiLine()) {
              if (row === this.start.row) {
                  return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);
              }
          }

          if (row < this.start.row)
              return -1;

          if (row > this.end.row)
              return 1;

          if (this.start.row === row)
              return column >= this.start.column ? 0 : -1;

          if (this.end.row === row)
              return column <= this.end.column ? 0 : 1;

          return 0;
      };
      this.compareStart = function(row, column) {
          if (this.start.row == row && this.start.column == column) {
              return -1;
          } else {
              return this.compare(row, column);
          }
      };
      this.compareEnd = function(row, column) {
          if (this.end.row == row && this.end.column == column) {
              return 1;
          } else {
              return this.compare(row, column);
          }
      };
      this.compareInside = function(row, column) {
          if (this.end.row == row && this.end.column == column) {
              return 1;
          } else if (this.start.row == row && this.start.column == column) {
              return -1;
          } else {
              return this.compare(row, column);
          }
      };
      this.clipRows = function(firstRow, lastRow) {
          if (this.end.row > lastRow)
              var end = {row: lastRow + 1, column: 0};
          else if (this.end.row < firstRow)
              var end = {row: firstRow, column: 0};

          if (this.start.row > lastRow)
              var start = {row: lastRow + 1, column: 0};
          else if (this.start.row < firstRow)
              var start = {row: firstRow, column: 0};

          return Range.fromPoints(start || this.start, end || this.end);
      };
      this.extend = function(row, column) {
          var cmp = this.compare(row, column);

          if (cmp == 0)
              return this;
          else if (cmp == -1)
              var start = {row: row, column: column};
          else
              var end = {row: row, column: column};

          return Range.fromPoints(start || this.start, end || this.end);
      };

      this.isEmpty = function() {
          return (this.start.row === this.end.row && this.start.column === this.end.column);
      };
      this.isMultiLine = function() {
          return (this.start.row !== this.end.row);
      };
      this.clone = function() {
          return Range.fromPoints(this.start, this.end);
      };
      this.collapseRows = function() {
          if (this.end.column == 0)
              return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0);
          else
              return new Range(this.start.row, 0, this.end.row, 0);
      };
      this.toScreenRange = function(session) {
          var screenPosStart = session.documentToScreenPosition(this.start);
          var screenPosEnd = session.documentToScreenPosition(this.end);

          return new Range(
              screenPosStart.row, screenPosStart.column,
              screenPosEnd.row, screenPosEnd.column
          );
      };
      this.moveBy = function(row, column) {
          this.start.row += row;
          this.start.column += column;
          this.end.row += row;
          this.end.column += column;
      };

  }).call(Range.prototype);
  Range.fromPoints = function(start, end) {
      return new Range(start.row, start.column, end.row, end.column);
  };
  Range.comparePoints = comparePoints;

  Range.comparePoints = function(p1, p2) {
      return p1.row - p2.row || p1.column - p2.column;
  };


  exports.Range = Range;
  });

  ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var lang = acequire("./lib/lang");
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var Range = acequire("./range").Range;
  var Selection = function(session) {
      this.session = session;
      this.doc = session.getDocument();

      this.clearSelection();
      this.lead = this.selectionLead = this.doc.createAnchor(0, 0);
      this.anchor = this.selectionAnchor = this.doc.createAnchor(0, 0);

      var self = this;
      this.lead.on("change", function(e) {
          self._emit("changeCursor");
          if (!self.$isEmpty)
              self._emit("changeSelection");
          if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)
              self.$desiredColumn = null;
      });

      this.selectionAnchor.on("change", function() {
          if (!self.$isEmpty)
              self._emit("changeSelection");
      });
  };

  (function() {

      oop.implement(this, EventEmitter);
      this.isEmpty = function() {
          return (this.$isEmpty || (
              this.anchor.row == this.lead.row &&
              this.anchor.column == this.lead.column
          ));
      };
      this.isMultiLine = function() {
          if (this.isEmpty()) {
              return false;
          }

          return this.getRange().isMultiLine();
      };
      this.getCursor = function() {
          return this.lead.getPosition();
      };
      this.setSelectionAnchor = function(row, column) {
          this.anchor.setPosition(row, column);

          if (this.$isEmpty) {
              this.$isEmpty = false;
              this._emit("changeSelection");
          }
      };
      this.getSelectionAnchor = function() {
          if (this.$isEmpty)
              return this.getSelectionLead();
          else
              return this.anchor.getPosition();
      };
      this.getSelectionLead = function() {
          return this.lead.getPosition();
      };
      this.shiftSelection = function(columns) {
          if (this.$isEmpty) {
              this.moveCursorTo(this.lead.row, this.lead.column + columns);
              return;
          }

          var anchor = this.getSelectionAnchor();
          var lead = this.getSelectionLead();

          var isBackwards = this.isBackwards();

          if (!isBackwards || anchor.column !== 0)
              this.setSelectionAnchor(anchor.row, anchor.column + columns);

          if (isBackwards || lead.column !== 0) {
              this.$moveSelection(function() {
                  this.moveCursorTo(lead.row, lead.column + columns);
              });
          }
      };
      this.isBackwards = function() {
          var anchor = this.anchor;
          var lead = this.lead;
          return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));
      };
      this.getRange = function() {
          var anchor = this.anchor;
          var lead = this.lead;

          if (this.isEmpty())
              return Range.fromPoints(lead, lead);

          if (this.isBackwards()) {
              return Range.fromPoints(lead, anchor);
          }
          else {
              return Range.fromPoints(anchor, lead);
          }
      };
      this.clearSelection = function() {
          if (!this.$isEmpty) {
              this.$isEmpty = true;
              this._emit("changeSelection");
          }
      };
      this.selectAll = function() {
          var lastRow = this.doc.getLength() - 1;
          this.setSelectionAnchor(0, 0);
          this.moveCursorTo(lastRow, this.doc.getLine(lastRow).length);
      };
      this.setRange =
      this.setSelectionRange = function(range, reverse) {
          if (reverse) {
              this.setSelectionAnchor(range.end.row, range.end.column);
              this.selectTo(range.start.row, range.start.column);
          } else {
              this.setSelectionAnchor(range.start.row, range.start.column);
              this.selectTo(range.end.row, range.end.column);
          }
          if (this.getRange().isEmpty())
              this.$isEmpty = true;
          this.$desiredColumn = null;
      };

      this.$moveSelection = function(mover) {
          var lead = this.lead;
          if (this.$isEmpty)
              this.setSelectionAnchor(lead.row, lead.column);

          mover.call(this);
      };
      this.selectTo = function(row, column) {
          this.$moveSelection(function() {
              this.moveCursorTo(row, column);
          });
      };
      this.selectToPosition = function(pos) {
          this.$moveSelection(function() {
              this.moveCursorToPosition(pos);
          });
      };
      this.moveTo = function(row, column) {
          this.clearSelection();
          this.moveCursorTo(row, column);
      };
      this.moveToPosition = function(pos) {
          this.clearSelection();
          this.moveCursorToPosition(pos);
      };
      this.selectUp = function() {
          this.$moveSelection(this.moveCursorUp);
      };
      this.selectDown = function() {
          this.$moveSelection(this.moveCursorDown);
      };
      this.selectRight = function() {
          this.$moveSelection(this.moveCursorRight);
      };
      this.selectLeft = function() {
          this.$moveSelection(this.moveCursorLeft);
      };
      this.selectLineStart = function() {
          this.$moveSelection(this.moveCursorLineStart);
      };
      this.selectLineEnd = function() {
          this.$moveSelection(this.moveCursorLineEnd);
      };
      this.selectFileEnd = function() {
          this.$moveSelection(this.moveCursorFileEnd);
      };
      this.selectFileStart = function() {
          this.$moveSelection(this.moveCursorFileStart);
      };
      this.selectWordRight = function() {
          this.$moveSelection(this.moveCursorWordRight);
      };
      this.selectWordLeft = function() {
          this.$moveSelection(this.moveCursorWordLeft);
      };
      this.getWordRange = function(row, column) {
          if (typeof column == "undefined") {
              var cursor = row || this.lead;
              row = cursor.row;
              column = cursor.column;
          }
          return this.session.getWordRange(row, column);
      };
      this.selectWord = function() {
          this.setSelectionRange(this.getWordRange());
      };
      this.selectAWord = function() {
          var cursor = this.getCursor();
          var range = this.session.getAWordRange(cursor.row, cursor.column);
          this.setSelectionRange(range);
      };

      this.getLineRange = function(row, excludeLastChar) {
          var rowStart = typeof row == "number" ? row : this.lead.row;
          var rowEnd;

          var foldLine = this.session.getFoldLine(rowStart);
          if (foldLine) {
              rowStart = foldLine.start.row;
              rowEnd = foldLine.end.row;
          } else {
              rowEnd = rowStart;
          }
          if (excludeLastChar === true)
              return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);
          else
              return new Range(rowStart, 0, rowEnd + 1, 0);
      };
      this.selectLine = function() {
          this.setSelectionRange(this.getLineRange());
      };
      this.moveCursorUp = function() {
          this.moveCursorBy(-1, 0);
      };
      this.moveCursorDown = function() {
          this.moveCursorBy(1, 0);
      };
      this.wouldMoveIntoSoftTab = function(cursor, tabSize, direction) {
          var start = cursor.column;
          var end = cursor.column + tabSize;

          if (direction < 0) {
              start = cursor.column - tabSize;
              end = cursor.column;
          }
          return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(" ").length-1 == tabSize;
      };
      this.moveCursorLeft = function() {
          var cursor = this.lead.getPosition(),
              fold;

          if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {
              this.moveCursorTo(fold.start.row, fold.start.column);
          } else if (cursor.column === 0) {
              if (cursor.row > 0) {
                  this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);
              }
          }
          else {
              var tabSize = this.session.getTabSize();
              if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {
                  this.moveCursorBy(0, -tabSize);
              } else {
                  this.moveCursorBy(0, -1);
              }
          }
      };
      this.moveCursorRight = function() {
          var cursor = this.lead.getPosition(),
              fold;
          if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {
              this.moveCursorTo(fold.end.row, fold.end.column);
          }
          else if (this.lead.column == this.doc.getLine(this.lead.row).length) {
              if (this.lead.row < this.doc.getLength() - 1) {
                  this.moveCursorTo(this.lead.row + 1, 0);
              }
          }
          else {
              var tabSize = this.session.getTabSize();
              var cursor = this.lead;
              if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {
                  this.moveCursorBy(0, tabSize);
              } else {
                  this.moveCursorBy(0, 1);
              }
          }
      };
      this.moveCursorLineStart = function() {
          var row = this.lead.row;
          var column = this.lead.column;
          var screenRow = this.session.documentToScreenRow(row, column);
          var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);
          var beforeCursor = this.session.getDisplayLine(
              row, null, firstColumnPosition.row,
              firstColumnPosition.column
          );

          var leadingSpace = beforeCursor.match(/^\s*/);
          if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)
              firstColumnPosition.column += leadingSpace[0].length;
          this.moveCursorToPosition(firstColumnPosition);
      };
      this.moveCursorLineEnd = function() {
          var lead = this.lead;
          var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);
          if (this.lead.column == lineEnd.column) {
              var line = this.session.getLine(lineEnd.row);
              if (lineEnd.column == line.length) {
                  var textEnd = line.search(/\s+$/);
                  if (textEnd > 0)
                      lineEnd.column = textEnd;
              }
          }

          this.moveCursorTo(lineEnd.row, lineEnd.column);
      };
      this.moveCursorFileEnd = function() {
          var row = this.doc.getLength() - 1;
          var column = this.doc.getLine(row).length;
          this.moveCursorTo(row, column);
      };
      this.moveCursorFileStart = function() {
          this.moveCursorTo(0, 0);
      };
      this.moveCursorLongWordRight = function() {
          var row = this.lead.row;
          var column = this.lead.column;
          var line = this.doc.getLine(row);
          var rightOfCursor = line.substring(column);

          var match;
          this.session.nonTokenRe.lastIndex = 0;
          this.session.tokenRe.lastIndex = 0;
          var fold = this.session.getFoldAt(row, column, 1);
          if (fold) {
              this.moveCursorTo(fold.end.row, fold.end.column);
              return;
          }
          if (match = this.session.nonTokenRe.exec(rightOfCursor)) {
              column += this.session.nonTokenRe.lastIndex;
              this.session.nonTokenRe.lastIndex = 0;
              rightOfCursor = line.substring(column);
          }
          if (column >= line.length) {
              this.moveCursorTo(row, line.length);
              this.moveCursorRight();
              if (row < this.doc.getLength() - 1)
                  this.moveCursorWordRight();
              return;
          }
          if (match = this.session.tokenRe.exec(rightOfCursor)) {
              column += this.session.tokenRe.lastIndex;
              this.session.tokenRe.lastIndex = 0;
          }

          this.moveCursorTo(row, column);
      };
      this.moveCursorLongWordLeft = function() {
          var row = this.lead.row;
          var column = this.lead.column;
          var fold;
          if (fold = this.session.getFoldAt(row, column, -1)) {
              this.moveCursorTo(fold.start.row, fold.start.column);
              return;
          }

          var str = this.session.getFoldStringAt(row, column, -1);
          if (str == null) {
              str = this.doc.getLine(row).substring(0, column);
          }

          var leftOfCursor = lang.stringReverse(str);
          var match;
          this.session.nonTokenRe.lastIndex = 0;
          this.session.tokenRe.lastIndex = 0;
          if (match = this.session.nonTokenRe.exec(leftOfCursor)) {
              column -= this.session.nonTokenRe.lastIndex;
              leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);
              this.session.nonTokenRe.lastIndex = 0;
          }
          if (column <= 0) {
              this.moveCursorTo(row, 0);
              this.moveCursorLeft();
              if (row > 0)
                  this.moveCursorWordLeft();
              return;
          }
          if (match = this.session.tokenRe.exec(leftOfCursor)) {
              column -= this.session.tokenRe.lastIndex;
              this.session.tokenRe.lastIndex = 0;
          }

          this.moveCursorTo(row, column);
      };

      this.$shortWordEndIndex = function(rightOfCursor) {
          var match, index = 0, ch;
          var whitespaceRe = /\s/;
          var tokenRe = this.session.tokenRe;

          tokenRe.lastIndex = 0;
          if (match = this.session.tokenRe.exec(rightOfCursor)) {
              index = this.session.tokenRe.lastIndex;
          } else {
              while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))
                  index ++;

              if (index < 1) {
                  tokenRe.lastIndex = 0;
                   while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {
                      tokenRe.lastIndex = 0;
                      index ++;
                      if (whitespaceRe.test(ch)) {
                          if (index > 2) {
                              index--;
                              break;
                          } else {
                              while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))
                                  index ++;
                              if (index > 2)
                                  break;
                          }
                      }
                  }
              }
          }
          tokenRe.lastIndex = 0;

          return index;
      };

      this.moveCursorShortWordRight = function() {
          var row = this.lead.row;
          var column = this.lead.column;
          var line = this.doc.getLine(row);
          var rightOfCursor = line.substring(column);

          var fold = this.session.getFoldAt(row, column, 1);
          if (fold)
              return this.moveCursorTo(fold.end.row, fold.end.column);

          if (column == line.length) {
              var l = this.doc.getLength();
              do {
                  row++;
                  rightOfCursor = this.doc.getLine(row);
              } while (row < l && /^\s*$/.test(rightOfCursor));

              if (!/^\s+/.test(rightOfCursor))
                  rightOfCursor = "";
              column = 0;
          }

          var index = this.$shortWordEndIndex(rightOfCursor);

          this.moveCursorTo(row, column + index);
      };

      this.moveCursorShortWordLeft = function() {
          var row = this.lead.row;
          var column = this.lead.column;

          var fold;
          if (fold = this.session.getFoldAt(row, column, -1))
              return this.moveCursorTo(fold.start.row, fold.start.column);

          var line = this.session.getLine(row).substring(0, column);
          if (column === 0) {
              do {
                  row--;
                  line = this.doc.getLine(row);
              } while (row > 0 && /^\s*$/.test(line));

              column = line.length;
              if (!/\s+$/.test(line))
                  line = "";
          }

          var leftOfCursor = lang.stringReverse(line);
          var index = this.$shortWordEndIndex(leftOfCursor);

          return this.moveCursorTo(row, column - index);
      };

      this.moveCursorWordRight = function() {
          if (this.session.$selectLongWords)
              this.moveCursorLongWordRight();
          else
              this.moveCursorShortWordRight();
      };

      this.moveCursorWordLeft = function() {
          if (this.session.$selectLongWords)
              this.moveCursorLongWordLeft();
          else
              this.moveCursorShortWordLeft();
      };
      this.moveCursorBy = function(rows, chars) {
          var screenPos = this.session.documentToScreenPosition(
              this.lead.row,
              this.lead.column
          );

          var offsetX;

          if (chars === 0) {
              if (rows !== 0) {
                  if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {
                      offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);
                      screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);
                  } else {
                      offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];
                  }
              }

              if (this.$desiredColumn)
                  screenPos.column = this.$desiredColumn;
              else
                  this.$desiredColumn = screenPos.column;
          }

          var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);
          
          if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {
              if (this.session.lineWidgets && this.session.lineWidgets[docPos.row]) {
                  if (docPos.row > 0 || rows > 0)
                      docPos.row++;
              }
          }
          this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);
      };
      this.moveCursorToPosition = function(position) {
          this.moveCursorTo(position.row, position.column);
      };
      this.moveCursorTo = function(row, column, keepDesiredColumn) {
          var fold = this.session.getFoldAt(row, column, 1);
          if (fold) {
              row = fold.start.row;
              column = fold.start.column;
          }

          this.$keepDesiredColumnOnChange = true;
          var line = this.session.getLine(row);
          if (/[\uDC00-\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {
              if (this.lead.row == row && this.lead.column == column + 1)
                  column = column - 1;
              else
                  column = column + 1;
          }
          this.lead.setPosition(row, column);
          this.$keepDesiredColumnOnChange = false;

          if (!keepDesiredColumn)
              this.$desiredColumn = null;
      };
      this.moveCursorToScreen = function(row, column, keepDesiredColumn) {
          var pos = this.session.screenToDocumentPosition(row, column);
          this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);
      };
      this.detach = function() {
          this.lead.detach();
          this.anchor.detach();
          this.session = this.doc = null;
      };

      this.fromOrientedRange = function(range) {
          this.setSelectionRange(range, range.cursor == range.start);
          this.$desiredColumn = range.desiredColumn || this.$desiredColumn;
      };

      this.toOrientedRange = function(range) {
          var r = this.getRange();
          if (range) {
              range.start.column = r.start.column;
              range.start.row = r.start.row;
              range.end.column = r.end.column;
              range.end.row = r.end.row;
          } else {
              range = r;
          }

          range.cursor = this.isBackwards() ? range.start : range.end;
          range.desiredColumn = this.$desiredColumn;
          return range;
      };
      this.getRangeOfMovements = function(func) {
          var start = this.getCursor();
          try {
              func(this);
              var end = this.getCursor();
              return Range.fromPoints(start,end);
          } catch(e) {
              return Range.fromPoints(start,start);
          } finally {
              this.moveCursorToPosition(start);
          }
      };

      this.toJSON = function() {
          if (this.rangeCount) {
              var data = this.ranges.map(function(r) {
                  var r1 = r.clone();
                  r1.isBackwards = r.cursor == r.start;
                  return r1;
              });
          } else {
              var data = this.getRange();
              data.isBackwards = this.isBackwards();
          }
          return data;
      };

      this.fromJSON = function(data) {
          if (data.start == undefined) {
              if (this.rangeList) {
                  this.toSingleRange(data[0]);
                  for (var i = data.length; i--; ) {
                      var r = Range.fromPoints(data[i].start, data[i].end);
                      if (data[i].isBackwards)
                          r.cursor = r.start;
                      this.addRange(r, true);
                  }
                  return;
              } else
                  data = data[0];
          }
          if (this.rangeList)
              this.toSingleRange(data);
          this.setSelectionRange(data, data.isBackwards);
      };

      this.isEqual = function(data) {
          if ((data.length || this.rangeCount) && data.length != this.rangeCount)
              return false;
          if (!data.length || !this.ranges)
              return this.getRange().isEqual(data);

          for (var i = this.ranges.length; i--; ) {
              if (!this.ranges[i].isEqual(data[i]))
                  return false;
          }
          return true;
      };

  }).call(Selection.prototype);

  exports.Selection = Selection;
  });

  ace.define("ace/tokenizer",["require","exports","module","ace/config"], function(acequire, exports, module) {

  var config = acequire("./config");
  var MAX_TOKEN_COUNT = 2000;
  var Tokenizer = function(rules) {
      this.states = rules;

      this.regExps = {};
      this.matchMappings = {};
      for (var key in this.states) {
          var state = this.states[key];
          var ruleRegExps = [];
          var matchTotal = 0;
          var mapping = this.matchMappings[key] = {defaultToken: "text"};
          var flag = "g";

          var splitterRurles = [];
          for (var i = 0; i < state.length; i++) {
              var rule = state[i];
              if (rule.defaultToken)
                  mapping.defaultToken = rule.defaultToken;
              if (rule.caseInsensitive)
                  flag = "gi";
              if (rule.regex == null)
                  continue;

              if (rule.regex instanceof RegExp)
                  rule.regex = rule.regex.toString().slice(1, -1);
              var adjustedregex = rule.regex;
              var matchcount = new RegExp("(?:(" + adjustedregex + ")|(.))").exec("a").length - 2;
              if (Array.isArray(rule.token)) {
                  if (rule.token.length == 1 || matchcount == 1) {
                      rule.token = rule.token[0];
                  } else if (matchcount - 1 != rule.token.length) {
                      this.reportError("number of classes and regexp groups doesn't match", { 
                          rule: rule,
                          groupCount: matchcount - 1
                      });
                      rule.token = rule.token[0];
                  } else {
                      rule.tokenArray = rule.token;
                      rule.token = null;
                      rule.onMatch = this.$arrayTokens;
                  }
              } else if (typeof rule.token == "function" && !rule.onMatch) {
                  if (matchcount > 1)
                      rule.onMatch = this.$applyToken;
                  else
                      rule.onMatch = rule.token;
              }

              if (matchcount > 1) {
                  if (/\\\d/.test(rule.regex)) {
                      adjustedregex = rule.regex.replace(/\\([0-9]+)/g, function(match, digit) {
                          return "\\" + (parseInt(digit, 10) + matchTotal + 1);
                      });
                  } else {
                      matchcount = 1;
                      adjustedregex = this.removeCapturingGroups(rule.regex);
                  }
                  if (!rule.splitRegex && typeof rule.token != "string")
                      splitterRurles.push(rule); // flag will be known only at the very end
              }

              mapping[matchTotal] = i;
              matchTotal += matchcount;

              ruleRegExps.push(adjustedregex);
              if (!rule.onMatch)
                  rule.onMatch = null;
          }
          
          if (!ruleRegExps.length) {
              mapping[0] = 0;
              ruleRegExps.push("$");
          }
          
          splitterRurles.forEach(function(rule) {
              rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);
          }, this);

          this.regExps[key] = new RegExp("(" + ruleRegExps.join(")|(") + ")|($)", flag);
      }
  };

  (function() {
      this.$setMaxTokenCount = function(m) {
          MAX_TOKEN_COUNT = m | 0;
      };
      
      this.$applyToken = function(str) {
          var values = this.splitRegex.exec(str).slice(1);
          var types = this.token.apply(this, values);
          if (typeof types === "string")
              return [{type: types, value: str}];

          var tokens = [];
          for (var i = 0, l = types.length; i < l; i++) {
              if (values[i])
                  tokens[tokens.length] = {
                      type: types[i],
                      value: values[i]
                  };
          }
          return tokens;
      };

      this.$arrayTokens = function(str) {
          if (!str)
              return [];
          var values = this.splitRegex.exec(str);
          if (!values)
              return "text";
          var tokens = [];
          var types = this.tokenArray;
          for (var i = 0, l = types.length; i < l; i++) {
              if (values[i + 1])
                  tokens[tokens.length] = {
                      type: types[i],
                      value: values[i + 1]
                  };
          }
          return tokens;
      };

      this.removeCapturingGroups = function(src) {
          var r = src.replace(
              /\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,
              function(x, y) {return y ? "(?:" : x;}
          );
          return r;
      };

      this.createSplitterRegexp = function(src, flag) {
          if (src.indexOf("(?=") != -1) {
              var stack = 0;
              var inChClass = false;
              var lastCapture = {};
              src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g, function(
                  m, esc, parenOpen, parenClose, square, index
              ) {
                  if (inChClass) {
                      inChClass = square != "]";
                  } else if (square) {
                      inChClass = true;
                  } else if (parenClose) {
                      if (stack == lastCapture.stack) {
                          lastCapture.end = index+1;
                          lastCapture.stack = -1;
                      }
                      stack--;
                  } else if (parenOpen) {
                      stack++;
                      if (parenOpen.length != 1) {
                          lastCapture.stack = stack;
                          lastCapture.start = index;
                      }
                  }
                  return m;
              });

              if (lastCapture.end != null && /^\)*$/.test(src.substr(lastCapture.end)))
                  src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);
          }
          if (src.charAt(0) != "^") src = "^" + src;
          if (src.charAt(src.length - 1) != "$") src += "$";
          
          return new RegExp(src, (flag||"").replace("g", ""));
      };
      this.getLineTokens = function(line, startState) {
          if (startState && typeof startState != "string") {
              var stack = startState.slice(0);
              startState = stack[0];
              if (startState === "#tmp") {
                  stack.shift();
                  startState = stack.shift();
              }
          } else
              var stack = [];

          var currentState = startState || "start";
          var state = this.states[currentState];
          if (!state) {
              currentState = "start";
              state = this.states[currentState];
          }
          var mapping = this.matchMappings[currentState];
          var re = this.regExps[currentState];
          re.lastIndex = 0;

          var match, tokens = [];
          var lastIndex = 0;
          var matchAttempts = 0;

          var token = {type: null, value: ""};

          while (match = re.exec(line)) {
              var type = mapping.defaultToken;
              var rule = null;
              var value = match[0];
              var index = re.lastIndex;

              if (index - value.length > lastIndex) {
                  var skipped = line.substring(lastIndex, index - value.length);
                  if (token.type == type) {
                      token.value += skipped;
                  } else {
                      if (token.type)
                          tokens.push(token);
                      token = {type: type, value: skipped};
                  }
              }

              for (var i = 0; i < match.length-2; i++) {
                  if (match[i + 1] === undefined)
                      continue;

                  rule = state[mapping[i]];

                  if (rule.onMatch)
                      type = rule.onMatch(value, currentState, stack, line);
                  else
                      type = rule.token;

                  if (rule.next) {
                      if (typeof rule.next == "string") {
                          currentState = rule.next;
                      } else {
                          currentState = rule.next(currentState, stack);
                      }
                      
                      state = this.states[currentState];
                      if (!state) {
                          this.reportError("state doesn't exist", currentState);
                          currentState = "start";
                          state = this.states[currentState];
                      }
                      mapping = this.matchMappings[currentState];
                      lastIndex = index;
                      re = this.regExps[currentState];
                      re.lastIndex = index;
                  }
                  if (rule.consumeLineEnd)
                      lastIndex = index;
                  break;
              }

              if (value) {
                  if (typeof type === "string") {
                      if ((!rule || rule.merge !== false) && token.type === type) {
                          token.value += value;
                      } else {
                          if (token.type)
                              tokens.push(token);
                          token = {type: type, value: value};
                      }
                  } else if (type) {
                      if (token.type)
                          tokens.push(token);
                      token = {type: null, value: ""};
                      for (var i = 0; i < type.length; i++)
                          tokens.push(type[i]);
                  }
              }

              if (lastIndex == line.length)
                  break;

              lastIndex = index;

              if (matchAttempts++ > MAX_TOKEN_COUNT) {
                  if (matchAttempts > 2 * line.length) {
                      this.reportError("infinite loop with in ace tokenizer", {
                          startState: startState,
                          line: line
                      });
                  }
                  while (lastIndex < line.length) {
                      if (token.type)
                          tokens.push(token);
                      token = {
                          value: line.substring(lastIndex, lastIndex += 2000),
                          type: "overflow"
                      };
                  }
                  currentState = "start";
                  stack = [];
                  break;
              }
          }

          if (token.type)
              tokens.push(token);
          
          if (stack.length > 1) {
              if (stack[0] !== currentState)
                  stack.unshift("#tmp", currentState);
          }
          return {
              tokens : tokens,
              state : stack.length ? stack : currentState
          };
      };
      
      this.reportError = config.reportError;
      
  }).call(Tokenizer.prototype);

  exports.Tokenizer = Tokenizer;
  });

  ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"], function(acequire, exports, module) {

  var lang = acequire("../lib/lang");

  var TextHighlightRules = function() {

      this.$rules = {
          "start" : [{
              token : "empty_line",
              regex : '^$'
          }, {
              defaultToken : "text"
          }]
      };
  };

  (function() {

      this.addRules = function(rules, prefix) {
          if (!prefix) {
              for (var key in rules)
                  this.$rules[key] = rules[key];
              return;
          }
          for (var key in rules) {
              var state = rules[key];
              for (var i = 0; i < state.length; i++) {
                  var rule = state[i];
                  if (rule.next || rule.onMatch) {
                      if (typeof rule.next == "string") {
                          if (rule.next.indexOf(prefix) !== 0)
                              rule.next = prefix + rule.next;
                      }
                      if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)
                          rule.nextState = prefix + rule.nextState;
                  }
              }
              this.$rules[prefix + key] = state;
          }
      };

      this.getRules = function() {
          return this.$rules;
      };

      this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {
          var embedRules = typeof HighlightRules == "function"
              ? new HighlightRules().getRules()
              : HighlightRules;
          if (states) {
              for (var i = 0; i < states.length; i++)
                  states[i] = prefix + states[i];
          } else {
              states = [];
              for (var key in embedRules)
                  states.push(prefix + key);
          }

          this.addRules(embedRules, prefix);

          if (escapeRules) {
              var addRules = Array.prototype[append ? "push" : "unshift"];
              for (var i = 0; i < states.length; i++)
                  addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));
          }

          if (!this.$embeds)
              this.$embeds = [];
          this.$embeds.push(prefix);
      };

      this.getEmbeds = function() {
          return this.$embeds;
      };

      var pushState = function(currentState, stack) {
          if (currentState != "start" || stack.length)
              stack.unshift(this.nextState, currentState);
          return this.nextState;
      };
      var popState = function(currentState, stack) {
          stack.shift();
          return stack.shift() || "start";
      };

      this.normalizeRules = function() {
          var id = 0;
          var rules = this.$rules;
          function processState(key) {
              var state = rules[key];
              state.processed = true;
              for (var i = 0; i < state.length; i++) {
                  var rule = state[i];
                  var toInsert = null;
                  if (Array.isArray(rule)) {
                      toInsert = rule;
                      rule = {};
                  }
                  if (!rule.regex && rule.start) {
                      rule.regex = rule.start;
                      if (!rule.next)
                          rule.next = [];
                      rule.next.push({
                          defaultToken: rule.token
                      }, {
                          token: rule.token + ".end",
                          regex: rule.end || rule.start,
                          next: "pop"
                      });
                      rule.token = rule.token + ".start";
                      rule.push = true;
                  }
                  var next = rule.next || rule.push;
                  if (next && Array.isArray(next)) {
                      var stateName = rule.stateName;
                      if (!stateName)  {
                          stateName = rule.token;
                          if (typeof stateName != "string")
                              stateName = stateName[0] || "";
                          if (rules[stateName])
                              stateName += id++;
                      }
                      rules[stateName] = next;
                      rule.next = stateName;
                      processState(stateName);
                  } else if (next == "pop") {
                      rule.next = popState;
                  }

                  if (rule.push) {
                      rule.nextState = rule.next || rule.push;
                      rule.next = pushState;
                      delete rule.push;
                  }

                  if (rule.rules) {
                      for (var r in rule.rules) {
                          if (rules[r]) {
                              if (rules[r].push)
                                  rules[r].push.apply(rules[r], rule.rules[r]);
                          } else {
                              rules[r] = rule.rules[r];
                          }
                      }
                  }
                  var includeName = typeof rule == "string" ? rule : rule.include;
                  if (includeName) {
                      if (Array.isArray(includeName))
                          toInsert = includeName.map(function(x) { return rules[x]; });
                      else
                          toInsert = rules[includeName];
                  }

                  if (toInsert) {
                      var args = [i, 1].concat(toInsert);
                      if (rule.noEscape)
                          args = args.filter(function(x) {return !x.next;});
                      state.splice.apply(state, args);
                      i--;
                  }
                  
                  if (rule.keywordMap) {
                      rule.token = this.createKeywordMapper(
                          rule.keywordMap, rule.defaultToken || "text", rule.caseInsensitive
                      );
                      delete rule.defaultToken;
                  }
              }
          }
          Object.keys(rules).forEach(processState, this);
      };

      this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {
          var keywords = Object.create(null);
          Object.keys(map).forEach(function(className) {
              var a = map[className];
              if (ignoreCase)
                  a = a.toLowerCase();
              var list = a.split(splitChar || "|");
              for (var i = list.length; i--; )
                  keywords[list[i]] = className;
          });
          if (Object.getPrototypeOf(keywords)) {
              keywords.__proto__ = null;
          }
          this.$keywordList = Object.keys(keywords);
          map = null;
          return ignoreCase
              ? function(value) {return keywords[value.toLowerCase()] || defaultToken; }
              : function(value) {return keywords[value] || defaultToken; };
      };

      this.getKeywords = function() {
          return this.$keywords;
      };

  }).call(TextHighlightRules.prototype);

  exports.TextHighlightRules = TextHighlightRules;
  });

  ace.define("ace/mode/behaviour",["require","exports","module"], function(acequire, exports, module) {

  var Behaviour = function() {
     this.$behaviours = {};
  };

  (function () {

      this.add = function (name, action, callback) {
          switch (undefined) {
            case this.$behaviours:
                this.$behaviours = {};
            case this.$behaviours[name]:
                this.$behaviours[name] = {};
          }
          this.$behaviours[name][action] = callback;
      };
      
      this.addBehaviours = function (behaviours) {
          for (var key in behaviours) {
              for (var action in behaviours[key]) {
                  this.add(key, action, behaviours[key][action]);
              }
          }
      };
      
      this.remove = function (name) {
          if (this.$behaviours && this.$behaviours[name]) {
              delete this.$behaviours[name];
          }
      };
      
      this.inherit = function (mode, filter) {
          if (typeof mode === "function") {
              var behaviours = new mode().getBehaviours(filter);
          } else {
              var behaviours = mode.getBehaviours(filter);
          }
          this.addBehaviours(behaviours);
      };
      
      this.getBehaviours = function (filter) {
          if (!filter) {
              return this.$behaviours;
          } else {
              var ret = {};
              for (var i = 0; i < filter.length; i++) {
                  if (this.$behaviours[filter[i]]) {
                      ret[filter[i]] = this.$behaviours[filter[i]];
                  }
              }
              return ret;
          }
      };

  }).call(Behaviour.prototype);

  exports.Behaviour = Behaviour;
  });

  ace.define("ace/token_iterator",["require","exports","module","ace/range"], function(acequire, exports, module) {

  var Range = acequire("./range").Range;
  var TokenIterator = function(session, initialRow, initialColumn) {
      this.$session = session;
      this.$row = initialRow;
      this.$rowTokens = session.getTokens(initialRow);

      var token = session.getTokenAt(initialRow, initialColumn);
      this.$tokenIndex = token ? token.index : -1;
  };

  (function() { 
      this.stepBackward = function() {
          this.$tokenIndex -= 1;
          
          while (this.$tokenIndex < 0) {
              this.$row -= 1;
              if (this.$row < 0) {
                  this.$row = 0;
                  return null;
              }
                  
              this.$rowTokens = this.$session.getTokens(this.$row);
              this.$tokenIndex = this.$rowTokens.length - 1;
          }
              
          return this.$rowTokens[this.$tokenIndex];
      };   
      this.stepForward = function() {
          this.$tokenIndex += 1;
          var rowCount;
          while (this.$tokenIndex >= this.$rowTokens.length) {
              this.$row += 1;
              if (!rowCount)
                  rowCount = this.$session.getLength();
              if (this.$row >= rowCount) {
                  this.$row = rowCount - 1;
                  return null;
              }

              this.$rowTokens = this.$session.getTokens(this.$row);
              this.$tokenIndex = 0;
          }
              
          return this.$rowTokens[this.$tokenIndex];
      };      
      this.getCurrentToken = function () {
          return this.$rowTokens[this.$tokenIndex];
      };      
      this.getCurrentTokenRow = function () {
          return this.$row;
      };     
      this.getCurrentTokenColumn = function() {
          var rowTokens = this.$rowTokens;
          var tokenIndex = this.$tokenIndex;
          var column = rowTokens[tokenIndex].start;
          if (column !== undefined)
              return column;
              
          column = 0;
          while (tokenIndex > 0) {
              tokenIndex -= 1;
              column += rowTokens[tokenIndex].value.length;
          }
          
          return column;  
      };
      this.getCurrentTokenPosition = function() {
          return {row: this.$row, column: this.getCurrentTokenColumn()};
      };
      this.getCurrentTokenRange = function() {
          var token = this.$rowTokens[this.$tokenIndex];
          var column = this.getCurrentTokenColumn();
          return new Range(this.$row, column, this.$row, column + token.value.length);
      };

  }).call(TokenIterator.prototype);

  exports.TokenIterator = TokenIterator;
  });

  ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var Behaviour = acequire("../behaviour").Behaviour;
  var TokenIterator = acequire("../../token_iterator").TokenIterator;
  var lang = acequire("../../lib/lang");

  var SAFE_INSERT_IN_TOKENS =
      ["text", "paren.rparen", "punctuation.operator"];
  var SAFE_INSERT_BEFORE_TOKENS =
      ["text", "paren.rparen", "punctuation.operator", "comment"];

  var context;
  var contextCache = {};
  var defaultQuotes = {'"' : '"', "'" : "'"};

  var initContext = function(editor) {
      var id = -1;
      if (editor.multiSelect) {
          id = editor.selection.index;
          if (contextCache.rangeCount != editor.multiSelect.rangeCount)
              contextCache = {rangeCount: editor.multiSelect.rangeCount};
      }
      if (contextCache[id])
          return context = contextCache[id];
      context = contextCache[id] = {
          autoInsertedBrackets: 0,
          autoInsertedRow: -1,
          autoInsertedLineEnd: "",
          maybeInsertedBrackets: 0,
          maybeInsertedRow: -1,
          maybeInsertedLineStart: "",
          maybeInsertedLineEnd: ""
      };
  };

  var getWrapped = function(selection, selected, opening, closing) {
      var rowDiff = selection.end.row - selection.start.row;
      return {
          text: opening + selected + closing,
          selection: [
                  0,
                  selection.start.column + 1,
                  rowDiff,
                  selection.end.column + (rowDiff ? 0 : 1)
              ]
      };
  };

  var CstyleBehaviour = function(options) {
      this.add("braces", "insertion", function(state, action, editor, session, text) {
          var cursor = editor.getCursorPosition();
          var line = session.doc.getLine(cursor.row);
          if (text == '{') {
              initContext(editor);
              var selection = editor.getSelectionRange();
              var selected = session.doc.getTextRange(selection);
              if (selected !== "" && selected !== "{" && editor.getWrapBehavioursEnabled()) {
                  return getWrapped(selection, selected, '{', '}');
              } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {
                  if (/[\]\}\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options && options.braces) {
                      CstyleBehaviour.recordAutoInsert(editor, session, "}");
                      return {
                          text: '{}',
                          selection: [1, 1]
                      };
                  } else {
                      CstyleBehaviour.recordMaybeInsert(editor, session, "{");
                      return {
                          text: '{',
                          selection: [1, 1]
                      };
                  }
              }
          } else if (text == '}') {
              initContext(editor);
              var rightChar = line.substring(cursor.column, cursor.column + 1);
              if (rightChar == '}') {
                  var matching = session.$findOpeningBracket('}', {column: cursor.column + 1, row: cursor.row});
                  if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {
                      CstyleBehaviour.popAutoInsertedClosing();
                      return {
                          text: '',
                          selection: [1, 1]
                      };
                  }
              }
          } else if (text == "\n" || text == "\r\n") {
              initContext(editor);
              var closing = "";
              if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {
                  closing = lang.stringRepeat("}", context.maybeInsertedBrackets);
                  CstyleBehaviour.clearMaybeInsertedClosing();
              }
              var rightChar = line.substring(cursor.column, cursor.column + 1);
              if (rightChar === '}') {
                  var openBracePos = session.findMatchingBracket({row: cursor.row, column: cursor.column+1}, '}');
                  if (!openBracePos)
                       return null;
                  var next_indent = this.$getIndent(session.getLine(openBracePos.row));
              } else if (closing) {
                  var next_indent = this.$getIndent(line);
              } else {
                  CstyleBehaviour.clearMaybeInsertedClosing();
                  return;
              }
              var indent = next_indent + session.getTabString();

              return {
                  text: '\n' + indent + '\n' + next_indent + closing,
                  selection: [1, indent.length, 1, indent.length]
              };
          } else {
              CstyleBehaviour.clearMaybeInsertedClosing();
          }
      });

      this.add("braces", "deletion", function(state, action, editor, session, range) {
          var selected = session.doc.getTextRange(range);
          if (!range.isMultiLine() && selected == '{') {
              initContext(editor);
              var line = session.doc.getLine(range.start.row);
              var rightChar = line.substring(range.end.column, range.end.column + 1);
              if (rightChar == '}') {
                  range.end.column++;
                  return range;
              } else {
                  context.maybeInsertedBrackets--;
              }
          }
      });

      this.add("parens", "insertion", function(state, action, editor, session, text) {
          if (text == '(') {
              initContext(editor);
              var selection = editor.getSelectionRange();
              var selected = session.doc.getTextRange(selection);
              if (selected !== "" && editor.getWrapBehavioursEnabled()) {
                  return getWrapped(selection, selected, '(', ')');
              } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {
                  CstyleBehaviour.recordAutoInsert(editor, session, ")");
                  return {
                      text: '()',
                      selection: [1, 1]
                  };
              }
          } else if (text == ')') {
              initContext(editor);
              var cursor = editor.getCursorPosition();
              var line = session.doc.getLine(cursor.row);
              var rightChar = line.substring(cursor.column, cursor.column + 1);
              if (rightChar == ')') {
                  var matching = session.$findOpeningBracket(')', {column: cursor.column + 1, row: cursor.row});
                  if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {
                      CstyleBehaviour.popAutoInsertedClosing();
                      return {
                          text: '',
                          selection: [1, 1]
                      };
                  }
              }
          }
      });

      this.add("parens", "deletion", function(state, action, editor, session, range) {
          var selected = session.doc.getTextRange(range);
          if (!range.isMultiLine() && selected == '(') {
              initContext(editor);
              var line = session.doc.getLine(range.start.row);
              var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
              if (rightChar == ')') {
                  range.end.column++;
                  return range;
              }
          }
      });

      this.add("brackets", "insertion", function(state, action, editor, session, text) {
          if (text == '[') {
              initContext(editor);
              var selection = editor.getSelectionRange();
              var selected = session.doc.getTextRange(selection);
              if (selected !== "" && editor.getWrapBehavioursEnabled()) {
                  return getWrapped(selection, selected, '[', ']');
              } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {
                  CstyleBehaviour.recordAutoInsert(editor, session, "]");
                  return {
                      text: '[]',
                      selection: [1, 1]
                  };
              }
          } else if (text == ']') {
              initContext(editor);
              var cursor = editor.getCursorPosition();
              var line = session.doc.getLine(cursor.row);
              var rightChar = line.substring(cursor.column, cursor.column + 1);
              if (rightChar == ']') {
                  var matching = session.$findOpeningBracket(']', {column: cursor.column + 1, row: cursor.row});
                  if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {
                      CstyleBehaviour.popAutoInsertedClosing();
                      return {
                          text: '',
                          selection: [1, 1]
                      };
                  }
              }
          }
      });

      this.add("brackets", "deletion", function(state, action, editor, session, range) {
          var selected = session.doc.getTextRange(range);
          if (!range.isMultiLine() && selected == '[') {
              initContext(editor);
              var line = session.doc.getLine(range.start.row);
              var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
              if (rightChar == ']') {
                  range.end.column++;
                  return range;
              }
          }
      });

      this.add("string_dquotes", "insertion", function(state, action, editor, session, text) {
          var quotes = session.$mode.$quotes || defaultQuotes;
          if (text.length == 1 && quotes[text]) {
              if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1)
                  return;
              initContext(editor);
              var quote = text;
              var selection = editor.getSelectionRange();
              var selected = session.doc.getTextRange(selection);
              if (selected !== "" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {
                  return getWrapped(selection, selected, quote, quote);
              } else if (!selected) {
                  var cursor = editor.getCursorPosition();
                  var line = session.doc.getLine(cursor.row);
                  var leftChar = line.substring(cursor.column-1, cursor.column);
                  var rightChar = line.substring(cursor.column, cursor.column + 1);

                  var token = session.getTokenAt(cursor.row, cursor.column);
                  var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);
                  if (leftChar == "\\" && token && /escape/.test(token.type))
                      return null;

                  var stringBefore = token && /string|escape/.test(token.type);
                  var stringAfter = !rightToken || /string|escape/.test(rightToken.type);

                  var pair;
                  if (rightChar == quote) {
                      pair = stringBefore !== stringAfter;
                      if (pair && /string\.end/.test(rightToken.type))
                          pair = false;
                  } else {
                      if (stringBefore && !stringAfter)
                          return null; // wrap string with different quote
                      if (stringBefore && stringAfter)
                          return null; // do not pair quotes inside strings
                      var wordRe = session.$mode.tokenRe;
                      wordRe.lastIndex = 0;
                      var isWordBefore = wordRe.test(leftChar);
                      wordRe.lastIndex = 0;
                      var isWordAfter = wordRe.test(leftChar);
                      if (isWordBefore || isWordAfter)
                          return null; // before or after alphanumeric
                      if (rightChar && !/[\s;,.})\]\\]/.test(rightChar))
                          return null; // there is rightChar and it isn't closing
                      pair = true;
                  }
                  return {
                      text: pair ? quote + quote : "",
                      selection: [1,1]
                  };
              }
          }
      });

      this.add("string_dquotes", "deletion", function(state, action, editor, session, range) {
          var selected = session.doc.getTextRange(range);
          if (!range.isMultiLine() && (selected == '"' || selected == "'")) {
              initContext(editor);
              var line = session.doc.getLine(range.start.row);
              var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
              if (rightChar == selected) {
                  range.end.column++;
                  return range;
              }
          }
      });

  };


  CstyleBehaviour.isSaneInsertion = function(editor, session) {
      var cursor = editor.getCursorPosition();
      var iterator = new TokenIterator(session, cursor.row, cursor.column);
      if (!this.$matchTokenType(iterator.getCurrentToken() || "text", SAFE_INSERT_IN_TOKENS)) {
          var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);
          if (!this.$matchTokenType(iterator2.getCurrentToken() || "text", SAFE_INSERT_IN_TOKENS))
              return false;
      }
      iterator.stepForward();
      return iterator.getCurrentTokenRow() !== cursor.row ||
          this.$matchTokenType(iterator.getCurrentToken() || "text", SAFE_INSERT_BEFORE_TOKENS);
  };

  CstyleBehaviour.$matchTokenType = function(token, types) {
      return types.indexOf(token.type || token) > -1;
  };

  CstyleBehaviour.recordAutoInsert = function(editor, session, bracket) {
      var cursor = editor.getCursorPosition();
      var line = session.doc.getLine(cursor.row);
      if (!this.isAutoInsertedClosing(cursor, line, context.autoInsertedLineEnd[0]))
          context.autoInsertedBrackets = 0;
      context.autoInsertedRow = cursor.row;
      context.autoInsertedLineEnd = bracket + line.substr(cursor.column);
      context.autoInsertedBrackets++;
  };

  CstyleBehaviour.recordMaybeInsert = function(editor, session, bracket) {
      var cursor = editor.getCursorPosition();
      var line = session.doc.getLine(cursor.row);
      if (!this.isMaybeInsertedClosing(cursor, line))
          context.maybeInsertedBrackets = 0;
      context.maybeInsertedRow = cursor.row;
      context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;
      context.maybeInsertedLineEnd = line.substr(cursor.column);
      context.maybeInsertedBrackets++;
  };

  CstyleBehaviour.isAutoInsertedClosing = function(cursor, line, bracket) {
      return context.autoInsertedBrackets > 0 &&
          cursor.row === context.autoInsertedRow &&
          bracket === context.autoInsertedLineEnd[0] &&
          line.substr(cursor.column) === context.autoInsertedLineEnd;
  };

  CstyleBehaviour.isMaybeInsertedClosing = function(cursor, line) {
      return context.maybeInsertedBrackets > 0 &&
          cursor.row === context.maybeInsertedRow &&
          line.substr(cursor.column) === context.maybeInsertedLineEnd &&
          line.substr(0, cursor.column) == context.maybeInsertedLineStart;
  };

  CstyleBehaviour.popAutoInsertedClosing = function() {
      context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);
      context.autoInsertedBrackets--;
  };

  CstyleBehaviour.clearMaybeInsertedClosing = function() {
      if (context) {
          context.maybeInsertedBrackets = 0;
          context.maybeInsertedRow = -1;
      }
  };



  oop.inherits(CstyleBehaviour, Behaviour);

  exports.CstyleBehaviour = CstyleBehaviour;
  });

  ace.define("ace/unicode",["require","exports","module"], function(acequire, exports, module) {
  exports.packages = {};

  addUnicodePackage({
      L:  "0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
      Ll: "0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
      Lu: "0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
      Lt: "01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",
      Lm: "02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",
      Lo: "01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
      M:  "0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
      Mn: "0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
      Mc: "0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
      Me: "0488048906DE20DD-20E020E2-20E4A670-A672",
      N:  "0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
      Nd: "0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
      Nl: "16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",
      No: "00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
      P:  "0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
      Pd: "002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",
      Ps: "0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",
      Pe: "0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
      Pi: "00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",
      Pf: "00BB2019201D203A2E032E052E0A2E0D2E1D2E21",
      Pc: "005F203F20402054FE33FE34FE4D-FE4FFF3F",
      Po: "0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
      S:  "0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
      Sm: "002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",
      Sc: "002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",
      Sk: "005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
      So: "00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
      Z:  "002000A01680180E2000-200A20282029202F205F3000",
      Zs: "002000A01680180E2000-200A202F205F3000",
      Zl: "2028",
      Zp: "2029",
      C:  "0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
      Cc: "0000-001F007F-009F",
      Cf: "00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",
      Co: "E000-F8FF",
      Cs: "D800-DFFF",
      Cn: "03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"
  });

  function addUnicodePackage (pack) {
      var codePoint = /\w{4}/g;
      for (var name in pack)
          exports.packages[name] = pack[name].replace(codePoint, "\\u$&");
  }

  });

  ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"], function(acequire, exports, module) {

  var Tokenizer = acequire("../tokenizer").Tokenizer;
  var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;
  var CstyleBehaviour = acequire("./behaviour/cstyle").CstyleBehaviour;
  var unicode = acequire("../unicode");
  var lang = acequire("../lib/lang");
  var TokenIterator = acequire("../token_iterator").TokenIterator;
  var Range = acequire("../range").Range;

  var Mode = function() {
      this.HighlightRules = TextHighlightRules;
  };

  (function() {
      this.$defaultBehaviour = new CstyleBehaviour();

      this.tokenRe = new RegExp("^["
          + unicode.packages.L
          + unicode.packages.Mn + unicode.packages.Mc
          + unicode.packages.Nd
          + unicode.packages.Pc + "\\$_]+", "g"
      );

      this.nonTokenRe = new RegExp("^(?:[^"
          + unicode.packages.L
          + unicode.packages.Mn + unicode.packages.Mc
          + unicode.packages.Nd
          + unicode.packages.Pc + "\\$_]|\\s])+", "g"
      );

      this.getTokenizer = function() {
          if (!this.$tokenizer) {
              this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);
              this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());
          }
          return this.$tokenizer;
      };

      this.lineCommentStart = "";
      this.blockComment = "";

      this.toggleCommentLines = function(state, session, startRow, endRow) {
          var doc = session.doc;

          var ignoreBlankLines = true;
          var shouldRemove = true;
          var minIndent = Infinity;
          var tabSize = session.getTabSize();
          var insertAtTabStop = false;

          if (!this.lineCommentStart) {
              if (!this.blockComment)
                  return false;
              var lineCommentStart = this.blockComment.start;
              var lineCommentEnd = this.blockComment.end;
              var regexpStart = new RegExp("^(\\s*)(?:" + lang.escapeRegExp(lineCommentStart) + ")");
              var regexpEnd = new RegExp("(?:" + lang.escapeRegExp(lineCommentEnd) + ")\\s*$");

              var comment = function(line, i) {
                  if (testRemove(line, i))
                      return;
                  if (!ignoreBlankLines || /\S/.test(line)) {
                      doc.insertInLine({row: i, column: line.length}, lineCommentEnd);
                      doc.insertInLine({row: i, column: minIndent}, lineCommentStart);
                  }
              };

              var uncomment = function(line, i) {
                  var m;
                  if (m = line.match(regexpEnd))
                      doc.removeInLine(i, line.length - m[0].length, line.length);
                  if (m = line.match(regexpStart))
                      doc.removeInLine(i, m[1].length, m[0].length);
              };

              var testRemove = function(line, row) {
                  if (regexpStart.test(line))
                      return true;
                  var tokens = session.getTokens(row);
                  for (var i = 0; i < tokens.length; i++) {
                      if (tokens[i].type === "comment")
                          return true;
                  }
              };
          } else {
              if (Array.isArray(this.lineCommentStart)) {
                  var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join("|");
                  var lineCommentStart = this.lineCommentStart[0];
              } else {
                  var regexpStart = lang.escapeRegExp(this.lineCommentStart);
                  var lineCommentStart = this.lineCommentStart;
              }
              regexpStart = new RegExp("^(\\s*)(?:" + regexpStart + ") ?");
              
              insertAtTabStop = session.getUseSoftTabs();

              var uncomment = function(line, i) {
                  var m = line.match(regexpStart);
                  if (!m) return;
                  var start = m[1].length, end = m[0].length;
                  if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == " ")
                      end--;
                  doc.removeInLine(i, start, end);
              };
              var commentWithSpace = lineCommentStart + " ";
              var comment = function(line, i) {
                  if (!ignoreBlankLines || /\S/.test(line)) {
                      if (shouldInsertSpace(line, minIndent, minIndent))
                          doc.insertInLine({row: i, column: minIndent}, commentWithSpace);
                      else
                          doc.insertInLine({row: i, column: minIndent}, lineCommentStart);
                  }
              };
              var testRemove = function(line, i) {
                  return regexpStart.test(line);
              };
              
              var shouldInsertSpace = function(line, before, after) {
                  var spaces = 0;
                  while (before-- && line.charAt(before) == " ")
                      spaces++;
                  if (spaces % tabSize != 0)
                      return false;
                  var spaces = 0;
                  while (line.charAt(after++) == " ")
                      spaces++;
                  if (tabSize > 2)
                      return spaces % tabSize != tabSize - 1;
                  else
                      return spaces % tabSize == 0;
              };
          }

          function iter(fun) {
              for (var i = startRow; i <= endRow; i++)
                  fun(doc.getLine(i), i);
          }


          var minEmptyLength = Infinity;
          iter(function(line, i) {
              var indent = line.search(/\S/);
              if (indent !== -1) {
                  if (indent < minIndent)
                      minIndent = indent;
                  if (shouldRemove && !testRemove(line, i))
                      shouldRemove = false;
              } else if (minEmptyLength > line.length) {
                  minEmptyLength = line.length;
              }
          });

          if (minIndent == Infinity) {
              minIndent = minEmptyLength;
              ignoreBlankLines = false;
              shouldRemove = false;
          }

          if (insertAtTabStop && minIndent % tabSize != 0)
              minIndent = Math.floor(minIndent / tabSize) * tabSize;

          iter(shouldRemove ? uncomment : comment);
      };

      this.toggleBlockComment = function(state, session, range, cursor) {
          var comment = this.blockComment;
          if (!comment)
              return;
          if (!comment.start && comment[0])
              comment = comment[0];

          var iterator = new TokenIterator(session, cursor.row, cursor.column);
          var token = iterator.getCurrentToken();

          var sel = session.selection;
          var initialRange = session.selection.toOrientedRange();
          var startRow, colDiff;

          if (token && /comment/.test(token.type)) {
              var startRange, endRange;
              while (token && /comment/.test(token.type)) {
                  var i = token.value.indexOf(comment.start);
                  if (i != -1) {
                      var row = iterator.getCurrentTokenRow();
                      var column = iterator.getCurrentTokenColumn() + i;
                      startRange = new Range(row, column, row, column + comment.start.length);
                      break;
                  }
                  token = iterator.stepBackward();
              }

              var iterator = new TokenIterator(session, cursor.row, cursor.column);
              var token = iterator.getCurrentToken();
              while (token && /comment/.test(token.type)) {
                  var i = token.value.indexOf(comment.end);
                  if (i != -1) {
                      var row = iterator.getCurrentTokenRow();
                      var column = iterator.getCurrentTokenColumn() + i;
                      endRange = new Range(row, column, row, column + comment.end.length);
                      break;
                  }
                  token = iterator.stepForward();
              }
              if (endRange)
                  session.remove(endRange);
              if (startRange) {
                  session.remove(startRange);
                  startRow = startRange.start.row;
                  colDiff = -comment.start.length;
              }
          } else {
              colDiff = comment.start.length;
              startRow = range.start.row;
              session.insert(range.end, comment.end);
              session.insert(range.start, comment.start);
          }
          if (initialRange.start.row == startRow)
              initialRange.start.column += colDiff;
          if (initialRange.end.row == startRow)
              initialRange.end.column += colDiff;
          session.selection.fromOrientedRange(initialRange);
      };

      this.getNextLineIndent = function(state, line, tab) {
          return this.$getIndent(line);
      };

      this.checkOutdent = function(state, line, input) {
          return false;
      };

      this.autoOutdent = function(state, doc, row) {
      };

      this.$getIndent = function(line) {
          return line.match(/^\s*/)[0];
      };

      this.createWorker = function(session) {
          return null;
      };

      this.createModeDelegates = function (mapping) {
          this.$embeds = [];
          this.$modes = {};
          for (var i in mapping) {
              if (mapping[i]) {
                  this.$embeds.push(i);
                  this.$modes[i] = new mapping[i]();
              }
          }

          var delegations = ["toggleBlockComment", "toggleCommentLines", "getNextLineIndent", 
              "checkOutdent", "autoOutdent", "transformAction", "getCompletions"];

          for (var i = 0; i < delegations.length; i++) {
              (function(scope) {
                var functionName = delegations[i];
                var defaultHandler = scope[functionName];
                scope[delegations[i]] = function() {
                    return this.$delegator(functionName, arguments, defaultHandler);
                };
              }(this));
          }
      };

      this.$delegator = function(method, args, defaultHandler) {
          var state = args[0];
          if (typeof state != "string")
              state = state[0];
          for (var i = 0; i < this.$embeds.length; i++) {
              if (!this.$modes[this.$embeds[i]]) continue;

              var split = state.split(this.$embeds[i]);
              if (!split[0] && split[1]) {
                  args[0] = split[1];
                  var mode = this.$modes[this.$embeds[i]];
                  return mode[method].apply(mode, args);
              }
          }
          var ret = defaultHandler.apply(this, args);
          return defaultHandler ? ret : undefined;
      };

      this.transformAction = function(state, action, editor, session, param) {
          if (this.$behaviour) {
              var behaviours = this.$behaviour.getBehaviours();
              for (var key in behaviours) {
                  if (behaviours[key][action]) {
                      var ret = behaviours[key][action].apply(this, arguments);
                      if (ret) {
                          return ret;
                      }
                  }
              }
          }
      };
      
      this.getKeywords = function(append) {
          if (!this.completionKeywords) {
              var rules = this.$tokenizer.rules;
              var completionKeywords = [];
              for (var rule in rules) {
                  var ruleItr = rules[rule];
                  for (var r = 0, l = ruleItr.length; r < l; r++) {
                      if (typeof ruleItr[r].token === "string") {
                          if (/keyword|support|storage/.test(ruleItr[r].token))
                              completionKeywords.push(ruleItr[r].regex);
                      }
                      else if (typeof ruleItr[r].token === "object") {
                          for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {    
                              if (/keyword|support|storage/.test(ruleItr[r].token[a])) {
                                  var rule = ruleItr[r].regex.match(/\(.+?\)/g)[a];
                                  completionKeywords.push(rule.substr(1, rule.length - 2));
                              }
                          }
                      }
                  }
              }
              this.completionKeywords = completionKeywords;
          }
          if (!append)
              return this.$keywordList;
          return completionKeywords.concat(this.$keywordList || []);
      };
      
      this.$createKeywordList = function() {
          if (!this.$highlightRules)
              this.getTokenizer();
          return this.$keywordList = this.$highlightRules.$keywordList || [];
      };

      this.getCompletions = function(state, session, pos, prefix) {
          var keywords = this.$keywordList || this.$createKeywordList();
          return keywords.map(function(word) {
              return {
                  name: word,
                  value: word,
                  score: 0,
                  meta: "keyword"
              };
          });
      };

      this.$id = "ace/mode/text";
  }).call(Mode.prototype);

  exports.Mode = Mode;
  });

  ace.define("ace/apply_delta",["require","exports","module"], function(acequire, exports, module) {

  exports.applyDelta = function(docLines, delta, doNotValidate) {
      
      var row = delta.start.row;
      var startColumn = delta.start.column;
      var line = docLines[row] || "";
      switch (delta.action) {
          case "insert":
              var lines = delta.lines;
              if (lines.length === 1) {
                  docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);
              } else {
                  var args = [row, 1].concat(delta.lines);
                  docLines.splice.apply(docLines, args);
                  docLines[row] = line.substring(0, startColumn) + docLines[row];
                  docLines[row + delta.lines.length - 1] += line.substring(startColumn);
              }
              break;
          case "remove":
              var endColumn = delta.end.column;
              var endRow = delta.end.row;
              if (row === endRow) {
                  docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);
              } else {
                  docLines.splice(
                      row, endRow - row + 1,
                      line.substring(0, startColumn) + docLines[endRow].substring(endColumn)
                  );
              }
              break;
      }
  };
  });

  ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;

  var Anchor = exports.Anchor = function(doc, row, column) {
      this.$onChange = this.onChange.bind(this);
      this.attach(doc);
      
      if (typeof column == "undefined")
          this.setPosition(row.row, row.column);
      else
          this.setPosition(row, column);
  };

  (function() {

      oop.implement(this, EventEmitter);
      this.getPosition = function() {
          return this.$clipPositionToDocument(this.row, this.column);
      };
      this.getDocument = function() {
          return this.document;
      };
      this.$insertRight = false;
      this.onChange = function(delta) {
          if (delta.start.row == delta.end.row && delta.start.row != this.row)
              return;

          if (delta.start.row > this.row)
              return;
              
          var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);
          this.setPosition(point.row, point.column, true);
      };
      
      function $pointsInOrder(point1, point2, equalPointsInOrder) {
          var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;
          return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);
      }
              
      function $getTransformedPoint(delta, point, moveIfEqual) {
          var deltaIsInsert = delta.action == "insert";
          var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);
          var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);
          var deltaStart = delta.start;
          var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.
          if ($pointsInOrder(point, deltaStart, moveIfEqual)) {
              return {
                  row: point.row,
                  column: point.column
              };
          }
          if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {
              return {
                  row: point.row + deltaRowShift,
                  column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)
              };
          }
          
          return {
              row: deltaStart.row,
              column: deltaStart.column
          };
      }
      this.setPosition = function(row, column, noClip) {
          var pos;
          if (noClip) {
              pos = {
                  row: row,
                  column: column
              };
          } else {
              pos = this.$clipPositionToDocument(row, column);
          }

          if (this.row == pos.row && this.column == pos.column)
              return;

          var old = {
              row: this.row,
              column: this.column
          };

          this.row = pos.row;
          this.column = pos.column;
          this._signal("change", {
              old: old,
              value: pos
          });
      };
      this.detach = function() {
          this.document.removeEventListener("change", this.$onChange);
      };
      this.attach = function(doc) {
          this.document = doc || this.document;
          this.document.on("change", this.$onChange);
      };
      this.$clipPositionToDocument = function(row, column) {
          var pos = {};

          if (row >= this.document.getLength()) {
              pos.row = Math.max(0, this.document.getLength() - 1);
              pos.column = this.document.getLine(pos.row).length;
          }
          else if (row < 0) {
              pos.row = 0;
              pos.column = 0;
          }
          else {
              pos.row = row;
              pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));
          }

          if (column < 0)
              pos.column = 0;

          return pos;
      };

  }).call(Anchor.prototype);

  });

  ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var applyDelta = acequire("./apply_delta").applyDelta;
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var Range = acequire("./range").Range;
  var Anchor = acequire("./anchor").Anchor;

  var Document = function(textOrLines) {
      this.$lines = [""];
      if (textOrLines.length === 0) {
          this.$lines = [""];
      } else if (Array.isArray(textOrLines)) {
          this.insertMergedLines({row: 0, column: 0}, textOrLines);
      } else {
          this.insert({row: 0, column:0}, textOrLines);
      }
  };

  (function() {

      oop.implement(this, EventEmitter);
      this.setValue = function(text) {
          var len = this.getLength() - 1;
          this.remove(new Range(0, 0, len, this.getLine(len).length));
          this.insert({row: 0, column: 0}, text);
      };
      this.getValue = function() {
          return this.getAllLines().join(this.getNewLineCharacter());
      };
      this.createAnchor = function(row, column) {
          return new Anchor(this, row, column);
      };
      if ("aaa".split(/a/).length === 0) {
          this.$split = function(text) {
              return text.replace(/\r\n|\r/g, "\n").split("\n");
          };
      } else {
          this.$split = function(text) {
              return text.split(/\r\n|\r|\n/);
          };
      }


      this.$detectNewLine = function(text) {
          var match = text.match(/^.*?(\r\n|\r|\n)/m);
          this.$autoNewLine = match ? match[1] : "\n";
          this._signal("changeNewLineMode");
      };
      this.getNewLineCharacter = function() {
          switch (this.$newLineMode) {
            case "windows":
              return "\r\n";
            case "unix":
              return "\n";
            default:
              return this.$autoNewLine || "\n";
          }
      };

      this.$autoNewLine = "";
      this.$newLineMode = "auto";
      this.setNewLineMode = function(newLineMode) {
          if (this.$newLineMode === newLineMode)
              return;

          this.$newLineMode = newLineMode;
          this._signal("changeNewLineMode");
      };
      this.getNewLineMode = function() {
          return this.$newLineMode;
      };
      this.isNewLine = function(text) {
          return (text == "\r\n" || text == "\r" || text == "\n");
      };
      this.getLine = function(row) {
          return this.$lines[row] || "";
      };
      this.getLines = function(firstRow, lastRow) {
          return this.$lines.slice(firstRow, lastRow + 1);
      };
      this.getAllLines = function() {
          return this.getLines(0, this.getLength());
      };
      this.getLength = function() {
          return this.$lines.length;
      };
      this.getTextRange = function(range) {
          return this.getLinesForRange(range).join(this.getNewLineCharacter());
      };
      this.getLinesForRange = function(range) {
          var lines;
          if (range.start.row === range.end.row) {
              lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];
          } else {
              lines = this.getLines(range.start.row, range.end.row);
              lines[0] = (lines[0] || "").substring(range.start.column);
              var l = lines.length - 1;
              if (range.end.row - range.start.row == l)
                  lines[l] = lines[l].substring(0, range.end.column);
          }
          return lines;
      };
      this.insertLines = function(row, lines) {
          console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead.");
          return this.insertFullLines(row, lines);
      };
      this.removeLines = function(firstRow, lastRow) {
          console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead.");
          return this.removeFullLines(firstRow, lastRow);
      };
      this.insertNewLine = function(position) {
          console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.");
          return this.insertMergedLines(position, ["", ""]);
      };
      this.insert = function(position, text) {
          if (this.getLength() <= 1)
              this.$detectNewLine(text);
          
          return this.insertMergedLines(position, this.$split(text));
      };
      this.insertInLine = function(position, text) {
          var start = this.clippedPos(position.row, position.column);
          var end = this.pos(position.row, position.column + text.length);
          
          this.applyDelta({
              start: start,
              end: end,
              action: "insert",
              lines: [text]
          }, true);
          
          return this.clonePos(end);
      };
      
      this.clippedPos = function(row, column) {
          var length = this.getLength();
          if (row === undefined) {
              row = length;
          } else if (row < 0) {
              row = 0;
          } else if (row >= length) {
              row = length - 1;
              column = undefined;
          }
          var line = this.getLine(row);
          if (column == undefined)
              column = line.length;
          column = Math.min(Math.max(column, 0), line.length);
          return {row: row, column: column};
      };
      
      this.clonePos = function(pos) {
          return {row: pos.row, column: pos.column};
      };
      
      this.pos = function(row, column) {
          return {row: row, column: column};
      };
      
      this.$clipPosition = function(position) {
          var length = this.getLength();
          if (position.row >= length) {
              position.row = Math.max(0, length - 1);
              position.column = this.getLine(length - 1).length;
          } else {
              position.row = Math.max(0, position.row);
              position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);
          }
          return position;
      };
      this.insertFullLines = function(row, lines) {
          row = Math.min(Math.max(row, 0), this.getLength());
          var column = 0;
          if (row < this.getLength()) {
              lines = lines.concat([""]);
              column = 0;
          } else {
              lines = [""].concat(lines);
              row--;
              column = this.$lines[row].length;
          }
          this.insertMergedLines({row: row, column: column}, lines);
      };    
      this.insertMergedLines = function(position, lines) {
          var start = this.clippedPos(position.row, position.column);
          var end = {
              row: start.row + lines.length - 1,
              column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length
          };
          
          this.applyDelta({
              start: start,
              end: end,
              action: "insert",
              lines: lines
          });
          
          return this.clonePos(end);
      };
      this.remove = function(range) {
          var start = this.clippedPos(range.start.row, range.start.column);
          var end = this.clippedPos(range.end.row, range.end.column);
          this.applyDelta({
              start: start,
              end: end,
              action: "remove",
              lines: this.getLinesForRange({start: start, end: end})
          });
          return this.clonePos(start);
      };
      this.removeInLine = function(row, startColumn, endColumn) {
          var start = this.clippedPos(row, startColumn);
          var end = this.clippedPos(row, endColumn);
          
          this.applyDelta({
              start: start,
              end: end,
              action: "remove",
              lines: this.getLinesForRange({start: start, end: end})
          }, true);
          
          return this.clonePos(start);
      };
      this.removeFullLines = function(firstRow, lastRow) {
          firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);
          lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);
          var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;
          var deleteLastNewLine  = lastRow  < this.getLength() - 1;
          var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );
          var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );
          var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );
          var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length ); 
          var range = new Range(startRow, startCol, endRow, endCol);
          var deletedLines = this.$lines.slice(firstRow, lastRow + 1);
          
          this.applyDelta({
              start: range.start,
              end: range.end,
              action: "remove",
              lines: this.getLinesForRange(range)
          });
          return deletedLines;
      };
      this.removeNewLine = function(row) {
          if (row < this.getLength() - 1 && row >= 0) {
              this.applyDelta({
                  start: this.pos(row, this.getLine(row).length),
                  end: this.pos(row + 1, 0),
                  action: "remove",
                  lines: ["", ""]
              });
          }
      };
      this.replace = function(range, text) {
          if (!(range instanceof Range))
              range = Range.fromPoints(range.start, range.end);
          if (text.length === 0 && range.isEmpty())
              return range.start;
          if (text == this.getTextRange(range))
              return range.end;

          this.remove(range);
          var end;
          if (text) {
              end = this.insert(range.start, text);
          }
          else {
              end = range.start;
          }
          
          return end;
      };
      this.applyDeltas = function(deltas) {
          for (var i=0; i<deltas.length; i++) {
              this.applyDelta(deltas[i]);
          }
      };
      this.revertDeltas = function(deltas) {
          for (var i=deltas.length-1; i>=0; i--) {
              this.revertDelta(deltas[i]);
          }
      };
      this.applyDelta = function(delta, doNotValidate) {
          var isInsert = delta.action == "insert";
          if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]
              : !Range.comparePoints(delta.start, delta.end)) {
              return;
          }
          
          if (isInsert && delta.lines.length > 20000)
              this.$splitAndapplyLargeDelta(delta, 20000);
          applyDelta(this.$lines, delta, doNotValidate);
          this._signal("change", delta);
      };
      
      this.$splitAndapplyLargeDelta = function(delta, MAX) {
          var lines = delta.lines;
          var l = lines.length;
          var row = delta.start.row; 
          var column = delta.start.column;
          var from = 0, to = 0;
          do {
              from = to;
              to += MAX - 1;
              var chunk = lines.slice(from, to);
              if (to > l) {
                  delta.lines = chunk;
                  delta.start.row = row + from;
                  delta.start.column = column;
                  break;
              }
              chunk.push("");
              this.applyDelta({
                  start: this.pos(row + from, column),
                  end: this.pos(row + to, column = 0),
                  action: delta.action,
                  lines: chunk
              }, true);
          } while(true);
      };
      this.revertDelta = function(delta) {
          this.applyDelta({
              start: this.clonePos(delta.start),
              end: this.clonePos(delta.end),
              action: (delta.action == "insert" ? "remove" : "insert"),
              lines: delta.lines.slice()
          });
      };
      this.indexToPosition = function(index, startRow) {
          var lines = this.$lines || this.getAllLines();
          var newlineLength = this.getNewLineCharacter().length;
          for (var i = startRow || 0, l = lines.length; i < l; i++) {
              index -= lines[i].length + newlineLength;
              if (index < 0)
                  return {row: i, column: index + lines[i].length + newlineLength};
          }
          return {row: l-1, column: lines[l-1].length};
      };
      this.positionToIndex = function(pos, startRow) {
          var lines = this.$lines || this.getAllLines();
          var newlineLength = this.getNewLineCharacter().length;
          var index = 0;
          var row = Math.min(pos.row, lines.length);
          for (var i = startRow || 0; i < row; ++i)
              index += lines[i].length + newlineLength;

          return index + pos.column;
      };

  }).call(Document.prototype);

  exports.Document = Document;
  });

  ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;

  var BackgroundTokenizer = function(tokenizer, editor) {
      this.running = false;
      this.lines = [];
      this.states = [];
      this.currentLine = 0;
      this.tokenizer = tokenizer;

      var self = this;

      this.$worker = function() {
          if (!self.running) { return; }

          var workerStart = new Date();
          var currentLine = self.currentLine;
          var endLine = -1;
          var doc = self.doc;

          var startLine = currentLine;
          while (self.lines[currentLine])
              currentLine++;
          
          var len = doc.getLength();
          var processedLines = 0;
          self.running = false;
          while (currentLine < len) {
              self.$tokenizeRow(currentLine);
              endLine = currentLine;
              do {
                  currentLine++;
              } while (self.lines[currentLine]);
              processedLines ++;
              if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {                
                  self.running = setTimeout(self.$worker, 20);
                  break;
              }
          }
          self.currentLine = currentLine;
          
          if (endLine == -1)
              endLine = currentLine;

          if (startLine <= endLine)
              self.fireUpdateEvent(startLine, endLine);
      };
  };

  (function(){

      oop.implement(this, EventEmitter);
      this.setTokenizer = function(tokenizer) {
          this.tokenizer = tokenizer;
          this.lines = [];
          this.states = [];

          this.start(0);
      };
      this.setDocument = function(doc) {
          this.doc = doc;
          this.lines = [];
          this.states = [];

          this.stop();
      };
      this.fireUpdateEvent = function(firstRow, lastRow) {
          var data = {
              first: firstRow,
              last: lastRow
          };
          this._signal("update", {data: data});
      };
      this.start = function(startRow) {
          this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());
          this.lines.splice(this.currentLine, this.lines.length);
          this.states.splice(this.currentLine, this.states.length);

          this.stop();
          this.running = setTimeout(this.$worker, 700);
      };
      
      this.scheduleStart = function() {
          if (!this.running)
              this.running = setTimeout(this.$worker, 700);
      };

      this.$updateOnChange = function(delta) {
          var startRow = delta.start.row;
          var len = delta.end.row - startRow;

          if (len === 0) {
              this.lines[startRow] = null;
          } else if (delta.action == "remove") {
              this.lines.splice(startRow, len + 1, null);
              this.states.splice(startRow, len + 1, null);
          } else {
              var args = Array(len + 1);
              args.unshift(startRow, 1);
              this.lines.splice.apply(this.lines, args);
              this.states.splice.apply(this.states, args);
          }

          this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());

          this.stop();
      };
      this.stop = function() {
          if (this.running)
              clearTimeout(this.running);
          this.running = false;
      };
      this.getTokens = function(row) {
          return this.lines[row] || this.$tokenizeRow(row);
      };
      this.getState = function(row) {
          if (this.currentLine == row)
              this.$tokenizeRow(row);
          return this.states[row] || "start";
      };

      this.$tokenizeRow = function(row) {
          var line = this.doc.getLine(row);
          var state = this.states[row - 1];

          var data = this.tokenizer.getLineTokens(line, state, row);

          if (this.states[row] + "" !== data.state + "") {
              this.states[row] = data.state;
              this.lines[row + 1] = null;
              if (this.currentLine > row + 1)
                  this.currentLine = row + 1;
          } else if (this.currentLine == row) {
              this.currentLine = row + 1;
          }

          return this.lines[row] = data.tokens;
      };

  }).call(BackgroundTokenizer.prototype);

  exports.BackgroundTokenizer = BackgroundTokenizer;
  });

  ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"], function(acequire, exports, module) {

  var lang = acequire("./lib/lang");
  var oop = acequire("./lib/oop");
  var Range = acequire("./range").Range;

  var SearchHighlight = function(regExp, clazz, type) {
      this.setRegexp(regExp);
      this.clazz = clazz;
      this.type = type || "text";
  };

  (function() {
      this.MAX_RANGES = 500;
      
      this.setRegexp = function(regExp) {
          if (this.regExp+"" == regExp+"")
              return;
          this.regExp = regExp;
          this.cache = [];
      };

      this.update = function(html, markerLayer, session, config) {
          if (!this.regExp)
              return;
          var start = config.firstRow, end = config.lastRow;

          for (var i = start; i <= end; i++) {
              var ranges = this.cache[i];
              if (ranges == null) {
                  ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);
                  if (ranges.length > this.MAX_RANGES)
                      ranges = ranges.slice(0, this.MAX_RANGES);
                  ranges = ranges.map(function(match) {
                      return new Range(i, match.offset, i, match.offset + match.length);
                  });
                  this.cache[i] = ranges.length ? ranges : "";
              }

              for (var j = ranges.length; j --; ) {
                  markerLayer.drawSingleLineMarker(
                      html, ranges[j].toScreenRange(session), this.clazz, config);
              }
          }
      };

  }).call(SearchHighlight.prototype);

  exports.SearchHighlight = SearchHighlight;
  });

  ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"], function(acequire, exports, module) {

  var Range = acequire("../range").Range;
  function FoldLine(foldData, folds) {
      this.foldData = foldData;
      if (Array.isArray(folds)) {
          this.folds = folds;
      } else {
          folds = this.folds = [ folds ];
      }

      var last = folds[folds.length - 1];
      this.range = new Range(folds[0].start.row, folds[0].start.column,
                             last.end.row, last.end.column);
      this.start = this.range.start;
      this.end   = this.range.end;

      this.folds.forEach(function(fold) {
          fold.setFoldLine(this);
      }, this);
  }

  (function() {
      this.shiftRow = function(shift) {
          this.start.row += shift;
          this.end.row += shift;
          this.folds.forEach(function(fold) {
              fold.start.row += shift;
              fold.end.row += shift;
          });
      };

      this.addFold = function(fold) {
          if (fold.sameRow) {
              if (fold.start.row < this.startRow || fold.endRow > this.endRow) {
                  throw new Error("Can't add a fold to this FoldLine as it has no connection");
              }
              this.folds.push(fold);
              this.folds.sort(function(a, b) {
                  return -a.range.compareEnd(b.start.row, b.start.column);
              });
              if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {
                  this.end.row = fold.end.row;
                  this.end.column =  fold.end.column;
              } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {
                  this.start.row = fold.start.row;
                  this.start.column = fold.start.column;
              }
          } else if (fold.start.row == this.end.row) {
              this.folds.push(fold);
              this.end.row = fold.end.row;
              this.end.column = fold.end.column;
          } else if (fold.end.row == this.start.row) {
              this.folds.unshift(fold);
              this.start.row = fold.start.row;
              this.start.column = fold.start.column;
          } else {
              throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");
          }
          fold.foldLine = this;
      };

      this.containsRow = function(row) {
          return row >= this.start.row && row <= this.end.row;
      };

      this.walk = function(callback, endRow, endColumn) {
          var lastEnd = 0,
              folds = this.folds,
              fold,
              cmp, stop, isNewRow = true;

          if (endRow == null) {
              endRow = this.end.row;
              endColumn = this.end.column;
          }

          for (var i = 0; i < folds.length; i++) {
              fold = folds[i];

              cmp = fold.range.compareStart(endRow, endColumn);
              if (cmp == -1) {
                  callback(null, endRow, endColumn, lastEnd, isNewRow);
                  return;
              }

              stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);
              stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);
              if (stop || cmp === 0) {
                  return;
              }
              isNewRow = !fold.sameRow;
              lastEnd = fold.end.column;
          }
          callback(null, endRow, endColumn, lastEnd, isNewRow);
      };

      this.getNextFoldTo = function(row, column) {
          var fold, cmp;
          for (var i = 0; i < this.folds.length; i++) {
              fold = this.folds[i];
              cmp = fold.range.compareEnd(row, column);
              if (cmp == -1) {
                  return {
                      fold: fold,
                      kind: "after"
                  };
              } else if (cmp === 0) {
                  return {
                      fold: fold,
                      kind: "inside"
                  };
              }
          }
          return null;
      };

      this.addRemoveChars = function(row, column, len) {
          var ret = this.getNextFoldTo(row, column),
              fold, folds;
          if (ret) {
              fold = ret.fold;
              if (ret.kind == "inside"
                  && fold.start.column != column
                  && fold.start.row != row)
              {
                  window.console && window.console.log(row, column, fold);
              } else if (fold.start.row == row) {
                  folds = this.folds;
                  var i = folds.indexOf(fold);
                  if (i === 0) {
                      this.start.column += len;
                  }
                  for (i; i < folds.length; i++) {
                      fold = folds[i];
                      fold.start.column += len;
                      if (!fold.sameRow) {
                          return;
                      }
                      fold.end.column += len;
                  }
                  this.end.column += len;
              }
          }
      };

      this.split = function(row, column) {
          var pos = this.getNextFoldTo(row, column);
          
          if (!pos || pos.kind == "inside")
              return null;
              
          var fold = pos.fold;
          var folds = this.folds;
          var foldData = this.foldData;
          
          var i = folds.indexOf(fold);
          var foldBefore = folds[i - 1];
          this.end.row = foldBefore.end.row;
          this.end.column = foldBefore.end.column;
          folds = folds.splice(i, folds.length - i);

          var newFoldLine = new FoldLine(foldData, folds);
          foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);
          return newFoldLine;
      };

      this.merge = function(foldLineNext) {
          var folds = foldLineNext.folds;
          for (var i = 0; i < folds.length; i++) {
              this.addFold(folds[i]);
          }
          var foldData = this.foldData;
          foldData.splice(foldData.indexOf(foldLineNext), 1);
      };

      this.toString = function() {
          var ret = [this.range.toString() + ": [" ];

          this.folds.forEach(function(fold) {
              ret.push("  " + fold.toString());
          });
          ret.push("]");
          return ret.join("\n");
      };

      this.idxToPosition = function(idx) {
          var lastFoldEndColumn = 0;

          for (var i = 0; i < this.folds.length; i++) {
              var fold = this.folds[i];

              idx -= fold.start.column - lastFoldEndColumn;
              if (idx < 0) {
                  return {
                      row: fold.start.row,
                      column: fold.start.column + idx
                  };
              }

              idx -= fold.placeholder.length;
              if (idx < 0) {
                  return fold.start;
              }

              lastFoldEndColumn = fold.end.column;
          }

          return {
              row: this.end.row,
              column: this.end.column + idx
          };
      };
  }).call(FoldLine.prototype);

  exports.FoldLine = FoldLine;
  });

  ace.define("ace/range_list",["require","exports","module","ace/range"], function(acequire, exports, module) {
  var Range = acequire("./range").Range;
  var comparePoints = Range.comparePoints;

  var RangeList = function() {
      this.ranges = [];
  };

  (function() {
      this.comparePoints = comparePoints;

      this.pointIndex = function(pos, excludeEdges, startIndex) {
          var list = this.ranges;

          for (var i = startIndex || 0; i < list.length; i++) {
              var range = list[i];
              var cmpEnd = comparePoints(pos, range.end);
              if (cmpEnd > 0)
                  continue;
              var cmpStart = comparePoints(pos, range.start);
              if (cmpEnd === 0)
                  return excludeEdges && cmpStart !== 0 ? -i-2 : i;
              if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))
                  return i;

              return -i-1;
          }
          return -i - 1;
      };

      this.add = function(range) {
          var excludeEdges = !range.isEmpty();
          var startIndex = this.pointIndex(range.start, excludeEdges);
          if (startIndex < 0)
              startIndex = -startIndex - 1;

          var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);

          if (endIndex < 0)
              endIndex = -endIndex - 1;
          else
              endIndex++;
          return this.ranges.splice(startIndex, endIndex - startIndex, range);
      };

      this.addList = function(list) {
          var removed = [];
          for (var i = list.length; i--; ) {
              removed.push.apply(removed, this.add(list[i]));
          }
          return removed;
      };

      this.substractPoint = function(pos) {
          var i = this.pointIndex(pos);

          if (i >= 0)
              return this.ranges.splice(i, 1);
      };
      this.merge = function() {
          var removed = [];
          var list = this.ranges;
          
          list = list.sort(function(a, b) {
              return comparePoints(a.start, b.start);
          });
          
          var next = list[0], range;
          for (var i = 1; i < list.length; i++) {
              range = next;
              next = list[i];
              var cmp = comparePoints(range.end, next.start);
              if (cmp < 0)
                  continue;

              if (cmp == 0 && !range.isEmpty() && !next.isEmpty())
                  continue;

              if (comparePoints(range.end, next.end) < 0) {
                  range.end.row = next.end.row;
                  range.end.column = next.end.column;
              }

              list.splice(i, 1);
              removed.push(next);
              next = range;
              i--;
          }
          
          this.ranges = list;

          return removed;
      };

      this.contains = function(row, column) {
          return this.pointIndex({row: row, column: column}) >= 0;
      };

      this.containsPoint = function(pos) {
          return this.pointIndex(pos) >= 0;
      };

      this.rangeAtPoint = function(pos) {
          var i = this.pointIndex(pos);
          if (i >= 0)
              return this.ranges[i];
      };


      this.clipRows = function(startRow, endRow) {
          var list = this.ranges;
          if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)
              return [];

          var startIndex = this.pointIndex({row: startRow, column: 0});
          if (startIndex < 0)
              startIndex = -startIndex - 1;
          var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);
          if (endIndex < 0)
              endIndex = -endIndex - 1;

          var clipped = [];
          for (var i = startIndex; i < endIndex; i++) {
              clipped.push(list[i]);
          }
          return clipped;
      };

      this.removeAll = function() {
          return this.ranges.splice(0, this.ranges.length);
      };

      this.attach = function(session) {
          if (this.session)
              this.detach();

          this.session = session;
          this.onChange = this.$onChange.bind(this);

          this.session.on('change', this.onChange);
      };

      this.detach = function() {
          if (!this.session)
              return;
          this.session.removeListener('change', this.onChange);
          this.session = null;
      };

      this.$onChange = function(delta) {
          if (delta.action == "insert"){
              var start = delta.start;
              var end = delta.end;
          } else {
              var end = delta.start;
              var start = delta.end;
          }
          var startRow = start.row;
          var endRow = end.row;
          var lineDif = endRow - startRow;

          var colDiff = -start.column + end.column;
          var ranges = this.ranges;

          for (var i = 0, n = ranges.length; i < n; i++) {
              var r = ranges[i];
              if (r.end.row < startRow)
                  continue;
              if (r.start.row > startRow)
                  break;

              if (r.start.row == startRow && r.start.column >= start.column ) {
                  if (r.start.column == start.column && this.$insertRight) ; else {
                      r.start.column += colDiff;
                      r.start.row += lineDif;
                  }
              }
              if (r.end.row == startRow && r.end.column >= start.column) {
                  if (r.end.column == start.column && this.$insertRight) {
                      continue;
                  }
                  if (r.end.column == start.column && colDiff > 0 && i < n - 1) {                
                      if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)
                          r.end.column -= colDiff;
                  }
                  r.end.column += colDiff;
                  r.end.row += lineDif;
              }
          }

          if (lineDif != 0 && i < n) {
              for (; i < n; i++) {
                  var r = ranges[i];
                  r.start.row += lineDif;
                  r.end.row += lineDif;
              }
          }
      };

  }).call(RangeList.prototype);

  exports.RangeList = RangeList;
  });

  ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"], function(acequire, exports, module) {

  var Range = acequire("../range").Range;
  var RangeList = acequire("../range_list").RangeList;
  var oop = acequire("../lib/oop");
  var Fold = exports.Fold = function(range, placeholder) {
      this.foldLine = null;
      this.placeholder = placeholder;
      this.range = range;
      this.start = range.start;
      this.end = range.end;

      this.sameRow = range.start.row == range.end.row;
      this.subFolds = this.ranges = [];
  };

  oop.inherits(Fold, RangeList);

  (function() {

      this.toString = function() {
          return '"' + this.placeholder + '" ' + this.range.toString();
      };

      this.setFoldLine = function(foldLine) {
          this.foldLine = foldLine;
          this.subFolds.forEach(function(fold) {
              fold.setFoldLine(foldLine);
          });
      };

      this.clone = function() {
          var range = this.range.clone();
          var fold = new Fold(range, this.placeholder);
          this.subFolds.forEach(function(subFold) {
              fold.subFolds.push(subFold.clone());
          });
          fold.collapseChildren = this.collapseChildren;
          return fold;
      };

      this.addSubFold = function(fold) {
          if (this.range.isEqual(fold))
              return;

          if (!this.range.containsRange(fold))
              throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);
          consumeRange(fold, this.start);

          var row = fold.start.row, column = fold.start.column;
          for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {
              cmp = this.subFolds[i].range.compare(row, column);
              if (cmp != 1)
                  break;
          }
          var afterStart = this.subFolds[i];

          if (cmp == 0)
              return afterStart.addSubFold(fold);
          var row = fold.range.end.row, column = fold.range.end.column;
          for (var j = i, cmp = -1; j < this.subFolds.length; j++) {
              cmp = this.subFolds[j].range.compare(row, column);
              if (cmp != 1)
                  break;
          }
          var afterEnd = this.subFolds[j];

          if (cmp == 0)
              throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);

          var consumedFolds = this.subFolds.splice(i, j - i, fold);
          fold.setFoldLine(this.foldLine);

          return fold;
      };
      
      this.restoreRange = function(range) {
          return restoreRange(range, this.start);
      };

  }).call(Fold.prototype);

  function consumePoint(point, anchor) {
      point.row -= anchor.row;
      if (point.row == 0)
          point.column -= anchor.column;
  }
  function consumeRange(range, anchor) {
      consumePoint(range.start, anchor);
      consumePoint(range.end, anchor);
  }
  function restorePoint(point, anchor) {
      if (point.row == 0)
          point.column += anchor.column;
      point.row += anchor.row;
  }
  function restoreRange(range, anchor) {
      restorePoint(range.start, anchor);
      restorePoint(range.end, anchor);
  }

  });

  ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"], function(acequire, exports, module) {

  var Range = acequire("../range").Range;
  var FoldLine = acequire("./fold_line").FoldLine;
  var Fold = acequire("./fold").Fold;
  var TokenIterator = acequire("../token_iterator").TokenIterator;

  function Folding() {
      this.getFoldAt = function(row, column, side) {
          var foldLine = this.getFoldLine(row);
          if (!foldLine)
              return null;

          var folds = foldLine.folds;
          for (var i = 0; i < folds.length; i++) {
              var fold = folds[i];
              if (fold.range.contains(row, column)) {
                  if (side == 1 && fold.range.isEnd(row, column)) {
                      continue;
                  } else if (side == -1 && fold.range.isStart(row, column)) {
                      continue;
                  }
                  return fold;
              }
          }
      };
      this.getFoldsInRange = function(range) {
          var start = range.start;
          var end = range.end;
          var foldLines = this.$foldData;
          var foundFolds = [];

          start.column += 1;
          end.column -= 1;

          for (var i = 0; i < foldLines.length; i++) {
              var cmp = foldLines[i].range.compareRange(range);
              if (cmp == 2) {
                  continue;
              }
              else if (cmp == -2) {
                  break;
              }

              var folds = foldLines[i].folds;
              for (var j = 0; j < folds.length; j++) {
                  var fold = folds[j];
                  cmp = fold.range.compareRange(range);
                  if (cmp == -2) {
                      break;
                  } else if (cmp == 2) {
                      continue;
                  } else
                  if (cmp == 42) {
                      break;
                  }
                  foundFolds.push(fold);
              }
          }
          start.column -= 1;
          end.column += 1;

          return foundFolds;
      };

      this.getFoldsInRangeList = function(ranges) {
          if (Array.isArray(ranges)) {
              var folds = [];
              ranges.forEach(function(range) {
                  folds = folds.concat(this.getFoldsInRange(range));
              }, this);
          } else {
              var folds = this.getFoldsInRange(ranges);
          }
          return folds;
      };
      this.getAllFolds = function() {
          var folds = [];
          var foldLines = this.$foldData;
          
          for (var i = 0; i < foldLines.length; i++)
              for (var j = 0; j < foldLines[i].folds.length; j++)
                  folds.push(foldLines[i].folds[j]);

          return folds;
      };
      this.getFoldStringAt = function(row, column, trim, foldLine) {
          foldLine = foldLine || this.getFoldLine(row);
          if (!foldLine)
              return null;

          var lastFold = {
              end: { column: 0 }
          };
          var str, fold;
          for (var i = 0; i < foldLine.folds.length; i++) {
              fold = foldLine.folds[i];
              var cmp = fold.range.compareEnd(row, column);
              if (cmp == -1) {
                  str = this
                      .getLine(fold.start.row)
                      .substring(lastFold.end.column, fold.start.column);
                  break;
              }
              else if (cmp === 0) {
                  return null;
              }
              lastFold = fold;
          }
          if (!str)
              str = this.getLine(fold.start.row).substring(lastFold.end.column);

          if (trim == -1)
              return str.substring(0, column - lastFold.end.column);
          else if (trim == 1)
              return str.substring(column - lastFold.end.column);
          else
              return str;
      };

      this.getFoldLine = function(docRow, startFoldLine) {
          var foldData = this.$foldData;
          var i = 0;
          if (startFoldLine)
              i = foldData.indexOf(startFoldLine);
          if (i == -1)
              i = 0;
          for (i; i < foldData.length; i++) {
              var foldLine = foldData[i];
              if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {
                  return foldLine;
              } else if (foldLine.end.row > docRow) {
                  return null;
              }
          }
          return null;
      };
      this.getNextFoldLine = function(docRow, startFoldLine) {
          var foldData = this.$foldData;
          var i = 0;
          if (startFoldLine)
              i = foldData.indexOf(startFoldLine);
          if (i == -1)
              i = 0;
          for (i; i < foldData.length; i++) {
              var foldLine = foldData[i];
              if (foldLine.end.row >= docRow) {
                  return foldLine;
              }
          }
          return null;
      };

      this.getFoldedRowCount = function(first, last) {
          var foldData = this.$foldData, rowCount = last-first+1;
          for (var i = 0; i < foldData.length; i++) {
              var foldLine = foldData[i],
                  end = foldLine.end.row,
                  start = foldLine.start.row;
              if (end >= last) {
                  if (start < last) {
                      if (start >= first)
                          rowCount -= last-start;
                      else
                          rowCount = 0; // in one fold
                  }
                  break;
              } else if (end >= first){
                  if (start >= first) // fold inside range
                      rowCount -=  end-start;
                  else
                      rowCount -=  end-first+1;
              }
          }
          return rowCount;
      };

      this.$addFoldLine = function(foldLine) {
          this.$foldData.push(foldLine);
          this.$foldData.sort(function(a, b) {
              return a.start.row - b.start.row;
          });
          return foldLine;
      };
      this.addFold = function(placeholder, range) {
          var foldData = this.$foldData;
          var added = false;
          var fold;
          
          if (placeholder instanceof Fold)
              fold = placeholder;
          else {
              fold = new Fold(range, placeholder);
              fold.collapseChildren = range.collapseChildren;
          }
          this.$clipRangeToDocument(fold.range);

          var startRow = fold.start.row;
          var startColumn = fold.start.column;
          var endRow = fold.end.row;
          var endColumn = fold.end.column;
          if (!(startRow < endRow || 
              startRow == endRow && startColumn <= endColumn - 2))
              throw new Error("The range has to be at least 2 characters width");

          var startFold = this.getFoldAt(startRow, startColumn, 1);
          var endFold = this.getFoldAt(endRow, endColumn, -1);
          if (startFold && endFold == startFold)
              return startFold.addSubFold(fold);

          if (startFold && !startFold.range.isStart(startRow, startColumn))
              this.removeFold(startFold);
          
          if (endFold && !endFold.range.isEnd(endRow, endColumn))
              this.removeFold(endFold);
          var folds = this.getFoldsInRange(fold.range);
          if (folds.length > 0) {
              this.removeFolds(folds);
              folds.forEach(function(subFold) {
                  fold.addSubFold(subFold);
              });
          }

          for (var i = 0; i < foldData.length; i++) {
              var foldLine = foldData[i];
              if (endRow == foldLine.start.row) {
                  foldLine.addFold(fold);
                  added = true;
                  break;
              } else if (startRow == foldLine.end.row) {
                  foldLine.addFold(fold);
                  added = true;
                  if (!fold.sameRow) {
                      var foldLineNext = foldData[i + 1];
                      if (foldLineNext && foldLineNext.start.row == endRow) {
                          foldLine.merge(foldLineNext);
                          break;
                      }
                  }
                  break;
              } else if (endRow <= foldLine.start.row) {
                  break;
              }
          }

          if (!added)
              foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));

          if (this.$useWrapMode)
              this.$updateWrapData(foldLine.start.row, foldLine.start.row);
          else
              this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);
          this.$modified = true;
          this._signal("changeFold", { data: fold, action: "add" });

          return fold;
      };

      this.addFolds = function(folds) {
          folds.forEach(function(fold) {
              this.addFold(fold);
          }, this);
      };

      this.removeFold = function(fold) {
          var foldLine = fold.foldLine;
          var startRow = foldLine.start.row;
          var endRow = foldLine.end.row;

          var foldLines = this.$foldData;
          var folds = foldLine.folds;
          if (folds.length == 1) {
              foldLines.splice(foldLines.indexOf(foldLine), 1);
          } else
          if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {
              folds.pop();
              foldLine.end.row = folds[folds.length - 1].end.row;
              foldLine.end.column = folds[folds.length - 1].end.column;
          } else
          if (foldLine.range.isStart(fold.start.row, fold.start.column)) {
              folds.shift();
              foldLine.start.row = folds[0].start.row;
              foldLine.start.column = folds[0].start.column;
          } else
          if (fold.sameRow) {
              folds.splice(folds.indexOf(fold), 1);
          } else
          {
              var newFoldLine = foldLine.split(fold.start.row, fold.start.column);
              folds = newFoldLine.folds;
              folds.shift();
              newFoldLine.start.row = folds[0].start.row;
              newFoldLine.start.column = folds[0].start.column;
          }

          if (!this.$updating) {
              if (this.$useWrapMode)
                  this.$updateWrapData(startRow, endRow);
              else
                  this.$updateRowLengthCache(startRow, endRow);
          }
          this.$modified = true;
          this._signal("changeFold", { data: fold, action: "remove" });
      };

      this.removeFolds = function(folds) {
          var cloneFolds = [];
          for (var i = 0; i < folds.length; i++) {
              cloneFolds.push(folds[i]);
          }

          cloneFolds.forEach(function(fold) {
              this.removeFold(fold);
          }, this);
          this.$modified = true;
      };

      this.expandFold = function(fold) {
          this.removeFold(fold);
          fold.subFolds.forEach(function(subFold) {
              fold.restoreRange(subFold);
              this.addFold(subFold);
          }, this);
          if (fold.collapseChildren > 0) {
              this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);
          }
          fold.subFolds = [];
      };

      this.expandFolds = function(folds) {
          folds.forEach(function(fold) {
              this.expandFold(fold);
          }, this);
      };

      this.unfold = function(location, expandInner) {
          var range, folds;
          if (location == null) {
              range = new Range(0, 0, this.getLength(), 0);
              expandInner = true;
          } else if (typeof location == "number")
              range = new Range(location, 0, location, this.getLine(location).length);
          else if ("row" in location)
              range = Range.fromPoints(location, location);
          else
              range = location;
          
          folds = this.getFoldsInRangeList(range);
          if (expandInner) {
              this.removeFolds(folds);
          } else {
              var subFolds = folds;
              while (subFolds.length) {
                  this.expandFolds(subFolds);
                  subFolds = this.getFoldsInRangeList(range);
              }
          }
          if (folds.length)
              return folds;
      };
      this.isRowFolded = function(docRow, startFoldRow) {
          return !!this.getFoldLine(docRow, startFoldRow);
      };

      this.getRowFoldEnd = function(docRow, startFoldRow) {
          var foldLine = this.getFoldLine(docRow, startFoldRow);
          return foldLine ? foldLine.end.row : docRow;
      };

      this.getRowFoldStart = function(docRow, startFoldRow) {
          var foldLine = this.getFoldLine(docRow, startFoldRow);
          return foldLine ? foldLine.start.row : docRow;
      };

      this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {
          if (startRow == null)
              startRow = foldLine.start.row;
          if (startColumn == null)
              startColumn = 0;
          if (endRow == null)
              endRow = foldLine.end.row;
          if (endColumn == null)
              endColumn = this.getLine(endRow).length;
          var doc = this.doc;
          var textLine = "";

          foldLine.walk(function(placeholder, row, column, lastColumn) {
              if (row < startRow)
                  return;
              if (row == startRow) {
                  if (column < startColumn)
                      return;
                  lastColumn = Math.max(startColumn, lastColumn);
              }

              if (placeholder != null) {
                  textLine += placeholder;
              } else {
                  textLine += doc.getLine(row).substring(lastColumn, column);
              }
          }, endRow, endColumn);
          return textLine;
      };

      this.getDisplayLine = function(row, endColumn, startRow, startColumn) {
          var foldLine = this.getFoldLine(row);

          if (!foldLine) {
              var line;
              line = this.doc.getLine(row);
              return line.substring(startColumn || 0, endColumn || line.length);
          } else {
              return this.getFoldDisplayLine(
                  foldLine, row, endColumn, startRow, startColumn);
          }
      };

      this.$cloneFoldData = function() {
          var fd = [];
          fd = this.$foldData.map(function(foldLine) {
              var folds = foldLine.folds.map(function(fold) {
                  return fold.clone();
              });
              return new FoldLine(fd, folds);
          });

          return fd;
      };

      this.toggleFold = function(tryToUnfold) {
          var selection = this.selection;
          var range = selection.getRange();
          var fold;
          var bracketPos;

          if (range.isEmpty()) {
              var cursor = range.start;
              fold = this.getFoldAt(cursor.row, cursor.column);

              if (fold) {
                  this.expandFold(fold);
                  return;
              } else if (bracketPos = this.findMatchingBracket(cursor)) {
                  if (range.comparePoint(bracketPos) == 1) {
                      range.end = bracketPos;
                  } else {
                      range.start = bracketPos;
                      range.start.column++;
                      range.end.column--;
                  }
              } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {
                  if (range.comparePoint(bracketPos) == 1)
                      range.end = bracketPos;
                  else
                      range.start = bracketPos;

                  range.start.column++;
              } else {
                  range = this.getCommentFoldRange(cursor.row, cursor.column) || range;
              }
          } else {
              var folds = this.getFoldsInRange(range);
              if (tryToUnfold && folds.length) {
                  this.expandFolds(folds);
                  return;
              } else if (folds.length == 1 ) {
                  fold = folds[0];
              }
          }

          if (!fold)
              fold = this.getFoldAt(range.start.row, range.start.column);

          if (fold && fold.range.toString() == range.toString()) {
              this.expandFold(fold);
              return;
          }

          var placeholder = "...";
          if (!range.isMultiLine()) {
              placeholder = this.getTextRange(range);
              if (placeholder.length < 4)
                  return;
              placeholder = placeholder.trim().substring(0, 2) + "..";
          }

          this.addFold(placeholder, range);
      };

      this.getCommentFoldRange = function(row, column, dir) {
          var iterator = new TokenIterator(this, row, column);
          var token = iterator.getCurrentToken();
          var type = token.type;
          if (token && /^comment|string/.test(type)) {
              type = type.match(/comment|string/)[0];
              if (type == "comment")
                  type += "|doc-start";
              var re = new RegExp(type);
              var range = new Range();
              if (dir != 1) {
                  do {
                      token = iterator.stepBackward();
                  } while (token && re.test(token.type));
                  iterator.stepForward();
              }
              
              range.start.row = iterator.getCurrentTokenRow();
              range.start.column = iterator.getCurrentTokenColumn() + 2;

              iterator = new TokenIterator(this, row, column);
              
              if (dir != -1) {
                  var lastRow = -1;
                  do {
                      token = iterator.stepForward();
                      if (lastRow == -1) {
                          var state = this.getState(iterator.$row);
                          if (!re.test(state))
                              lastRow = iterator.$row;
                      } else if (iterator.$row > lastRow) {
                          break;
                      }
                  } while (token && re.test(token.type));
                  token = iterator.stepBackward();
              } else
                  token = iterator.getCurrentToken();

              range.end.row = iterator.getCurrentTokenRow();
              range.end.column = iterator.getCurrentTokenColumn() + token.value.length - 2;
              return range;
          }
      };

      this.foldAll = function(startRow, endRow, depth) {
          if (depth == undefined)
              depth = 100000; // JSON.stringify doesn't hanle Infinity
          var foldWidgets = this.foldWidgets;
          if (!foldWidgets)
              return; // mode doesn't support folding
          endRow = endRow || this.getLength();
          startRow = startRow || 0;
          for (var row = startRow; row < endRow; row++) {
              if (foldWidgets[row] == null)
                  foldWidgets[row] = this.getFoldWidget(row);
              if (foldWidgets[row] != "start")
                  continue;

              var range = this.getFoldWidgetRange(row);
              if (range && range.isMultiLine()
                  && range.end.row <= endRow
                  && range.start.row >= startRow
              ) {
                  row = range.end.row;
                  try {
                      var fold = this.addFold("...", range);
                      if (fold)
                          fold.collapseChildren = depth;
                  } catch(e) {}
              }
          }
      };
      this.$foldStyles = {
          "manual": 1,
          "markbegin": 1,
          "markbeginend": 1
      };
      this.$foldStyle = "markbegin";
      this.setFoldStyle = function(style) {
          if (!this.$foldStyles[style])
              throw new Error("invalid fold style: " + style + "[" + Object.keys(this.$foldStyles).join(", ") + "]");
          
          if (this.$foldStyle == style)
              return;

          this.$foldStyle = style;
          
          if (style == "manual")
              this.unfold();
          var mode = this.$foldMode;
          this.$setFolding(null);
          this.$setFolding(mode);
      };

      this.$setFolding = function(foldMode) {
          if (this.$foldMode == foldMode)
              return;
              
          this.$foldMode = foldMode;
          
          this.off('change', this.$updateFoldWidgets);
          this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);
          this._signal("changeAnnotation");
          
          if (!foldMode || this.$foldStyle == "manual") {
              this.foldWidgets = null;
              return;
          }
          
          this.foldWidgets = [];
          this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);
          this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);
          
          this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);
          this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);
          this.on('change', this.$updateFoldWidgets);
          this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);
      };

      this.getParentFoldRangeData = function (row, ignoreCurrent) {
          var fw = this.foldWidgets;
          if (!fw || (ignoreCurrent && fw[row]))
              return {};

          var i = row - 1, firstRange;
          while (i >= 0) {
              var c = fw[i];
              if (c == null)
                  c = fw[i] = this.getFoldWidget(i);

              if (c == "start") {
                  var range = this.getFoldWidgetRange(i);
                  if (!firstRange)
                      firstRange = range;
                  if (range && range.end.row >= row)
                      break;
              }
              i--;
          }

          return {
              range: i !== -1 && range,
              firstRange: firstRange
          };
      };

      this.onFoldWidgetClick = function(row, e) {
          e = e.domEvent;
          var options = {
              children: e.shiftKey,
              all: e.ctrlKey || e.metaKey,
              siblings: e.altKey
          };
          
          var range = this.$toggleFoldWidget(row, options);
          if (!range) {
              var el = (e.target || e.srcElement);
              if (el && /ace_fold-widget/.test(el.className))
                  el.className += " ace_invalid";
          }
      };
      
      this.$toggleFoldWidget = function(row, options) {
          if (!this.getFoldWidget)
              return;
          var type = this.getFoldWidget(row);
          var line = this.getLine(row);

          var dir = type === "end" ? -1 : 1;
          var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);

          if (fold) {
              if (options.children || options.all)
                  this.removeFold(fold);
              else
                  this.expandFold(fold);
              return fold;
          }

          var range = this.getFoldWidgetRange(row, true);
          if (range && !range.isMultiLine()) {
              fold = this.getFoldAt(range.start.row, range.start.column, 1);
              if (fold && range.isEqual(fold.range)) {
                  this.removeFold(fold);
                  return fold;
              }
          }
          
          if (options.siblings) {
              var data = this.getParentFoldRangeData(row);
              if (data.range) {
                  var startRow = data.range.start.row + 1;
                  var endRow = data.range.end.row;
              }
              this.foldAll(startRow, endRow, options.all ? 10000 : 0);
          } else if (options.children) {
              endRow = range ? range.end.row : this.getLength();
              this.foldAll(row + 1, endRow, options.all ? 10000 : 0);
          } else if (range) {
              if (options.all) 
                  range.collapseChildren = 10000;
              this.addFold("...", range);
          }
          
          return range;
      };
      
      
      
      this.toggleFoldWidget = function(toggleParent) {
          var row = this.selection.getCursor().row;
          row = this.getRowFoldStart(row);
          var range = this.$toggleFoldWidget(row, {});
          
          if (range)
              return;
          var data = this.getParentFoldRangeData(row, true);
          range = data.range || data.firstRange;
          
          if (range) {
              row = range.start.row;
              var fold = this.getFoldAt(row, this.getLine(row).length, 1);

              if (fold) {
                  this.removeFold(fold);
              } else {
                  this.addFold("...", range);
              }
          }
      };

      this.updateFoldWidgets = function(delta) {
          var firstRow = delta.start.row;
          var len = delta.end.row - firstRow;

          if (len === 0) {
              this.foldWidgets[firstRow] = null;
          } else if (delta.action == 'remove') {
              this.foldWidgets.splice(firstRow, len + 1, null);
          } else {
              var args = Array(len + 1);
              args.unshift(firstRow, 1);
              this.foldWidgets.splice.apply(this.foldWidgets, args);
          }
      };
      this.tokenizerUpdateFoldWidgets = function(e) {
          var rows = e.data;
          if (rows.first != rows.last) {
              if (this.foldWidgets.length > rows.first)
                  this.foldWidgets.splice(rows.first, this.foldWidgets.length);
          }
      };
  }

  exports.Folding = Folding;

  });

  ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"], function(acequire, exports, module) {

  var TokenIterator = acequire("../token_iterator").TokenIterator;
  var Range = acequire("../range").Range;


  function BracketMatch() {

      this.findMatchingBracket = function(position, chr) {
          if (position.column == 0) return null;

          var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);
          if (charBeforeCursor == "") return null;

          var match = charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/);
          if (!match)
              return null;

          if (match[1])
              return this.$findClosingBracket(match[1], position);
          else
              return this.$findOpeningBracket(match[2], position);
      };
      
      this.getBracketRange = function(pos) {
          var line = this.getLine(pos.row);
          var before = true, range;

          var chr = line.charAt(pos.column-1);
          var match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);
          if (!match) {
              chr = line.charAt(pos.column);
              pos = {row: pos.row, column: pos.column + 1};
              match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);
              before = false;
          }
          if (!match)
              return null;

          if (match[1]) {
              var bracketPos = this.$findClosingBracket(match[1], pos);
              if (!bracketPos)
                  return null;
              range = Range.fromPoints(pos, bracketPos);
              if (!before) {
                  range.end.column++;
                  range.start.column--;
              }
              range.cursor = range.end;
          } else {
              var bracketPos = this.$findOpeningBracket(match[2], pos);
              if (!bracketPos)
                  return null;
              range = Range.fromPoints(bracketPos, pos);
              if (!before) {
                  range.start.column++;
                  range.end.column--;
              }
              range.cursor = range.start;
          }
          
          return range;
      };

      this.$brackets = {
          ")": "(",
          "(": ")",
          "]": "[",
          "[": "]",
          "{": "}",
          "}": "{"
      };

      this.$findOpeningBracket = function(bracket, position, typeRe) {
          var openBracket = this.$brackets[bracket];
          var depth = 1;

          var iterator = new TokenIterator(this, position.row, position.column);
          var token = iterator.getCurrentToken();
          if (!token)
              token = iterator.stepForward();
          if (!token)
              return;
          
           if (!typeRe){
              typeRe = new RegExp(
                  "(\\.?" +
                  token.type.replace(".", "\\.").replace("rparen", ".paren")
                      .replace(/\b(?:end)\b/, "(?:start|begin|end)")
                  + ")+"
              );
          }
          var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;
          var value = token.value;
          
          while (true) {
          
              while (valueIndex >= 0) {
                  var chr = value.charAt(valueIndex);
                  if (chr == openBracket) {
                      depth -= 1;
                      if (depth == 0) {
                          return {row: iterator.getCurrentTokenRow(),
                              column: valueIndex + iterator.getCurrentTokenColumn()};
                      }
                  }
                  else if (chr == bracket) {
                      depth += 1;
                  }
                  valueIndex -= 1;
              }
              do {
                  token = iterator.stepBackward();
              } while (token && !typeRe.test(token.type));

              if (token == null)
                  break;
                  
              value = token.value;
              valueIndex = value.length - 1;
          }
          
          return null;
      };

      this.$findClosingBracket = function(bracket, position, typeRe) {
          var closingBracket = this.$brackets[bracket];
          var depth = 1;

          var iterator = new TokenIterator(this, position.row, position.column);
          var token = iterator.getCurrentToken();
          if (!token)
              token = iterator.stepForward();
          if (!token)
              return;

          if (!typeRe){
              typeRe = new RegExp(
                  "(\\.?" +
                  token.type.replace(".", "\\.").replace("lparen", ".paren")
                      .replace(/\b(?:start|begin)\b/, "(?:start|begin|end)")
                  + ")+"
              );
          }
          var valueIndex = position.column - iterator.getCurrentTokenColumn();

          while (true) {

              var value = token.value;
              var valueLength = value.length;
              while (valueIndex < valueLength) {
                  var chr = value.charAt(valueIndex);
                  if (chr == closingBracket) {
                      depth -= 1;
                      if (depth == 0) {
                          return {row: iterator.getCurrentTokenRow(),
                              column: valueIndex + iterator.getCurrentTokenColumn()};
                      }
                  }
                  else if (chr == bracket) {
                      depth += 1;
                  }
                  valueIndex += 1;
              }
              do {
                  token = iterator.stepForward();
              } while (token && !typeRe.test(token.type));

              if (token == null)
                  break;

              valueIndex = 0;
          }
          
          return null;
      };
  }
  exports.BracketMatch = BracketMatch;

  });

  ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var lang = acequire("./lib/lang");
  var BidiHandler = acequire("./bidihandler").BidiHandler;
  var config = acequire("./config");
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var Selection = acequire("./selection").Selection;
  var TextMode = acequire("./mode/text").Mode;
  var Range = acequire("./range").Range;
  var Document = acequire("./document").Document;
  var BackgroundTokenizer = acequire("./background_tokenizer").BackgroundTokenizer;
  var SearchHighlight = acequire("./search_highlight").SearchHighlight;

  var EditSession = function(text, mode) {
      this.$breakpoints = [];
      this.$decorations = [];
      this.$frontMarkers = {};
      this.$backMarkers = {};
      this.$markerId = 1;
      this.$undoSelect = true;

      this.$foldData = [];
      this.id = "session" + (++EditSession.$uid);
      this.$foldData.toString = function() {
          return this.join("\n");
      };
      this.on("changeFold", this.onChangeFold.bind(this));
      this.$onChange = this.onChange.bind(this);

      if (typeof text != "object" || !text.getLine)
          text = new Document(text);

      this.$bidiHandler = new BidiHandler(this);
      this.setDocument(text);
      this.selection = new Selection(this);

      config.resetOptions(this);
      this.setMode(mode);
      config._signal("session", this);
  };


  EditSession.$uid = 0;

  (function() {

      oop.implement(this, EventEmitter);
      this.setDocument = function(doc) {
          if (this.doc)
              this.doc.removeListener("change", this.$onChange);

          this.doc = doc;
          doc.on("change", this.$onChange);

          if (this.bgTokenizer)
              this.bgTokenizer.setDocument(this.getDocument());

          this.resetCaches();
      };
      this.getDocument = function() {
          return this.doc;
      };
      this.$resetRowCache = function(docRow) {
          if (!docRow) {
              this.$docRowCache = [];
              this.$screenRowCache = [];
              return;
          }
          var l = this.$docRowCache.length;
          var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;
          if (l > i) {
              this.$docRowCache.splice(i, l);
              this.$screenRowCache.splice(i, l);
          }
      };

      this.$getRowCacheIndex = function(cacheArray, val) {
          var low = 0;
          var hi = cacheArray.length - 1;

          while (low <= hi) {
              var mid = (low + hi) >> 1;
              var c = cacheArray[mid];

              if (val > c)
                  low = mid + 1;
              else if (val < c)
                  hi = mid - 1;
              else
                  return mid;
          }

          return low -1;
      };

      this.resetCaches = function() {
          this.$modified = true;
          this.$wrapData = [];
          this.$rowLengthCache = [];
          this.$resetRowCache(0);
          if (this.bgTokenizer)
              this.bgTokenizer.start(0);
      };

      this.onChangeFold = function(e) {
          var fold = e.data;
          this.$resetRowCache(fold.start.row);
      };

      this.onChange = function(delta) {
          this.$modified = true;
          this.$bidiHandler.onChange(delta);
          this.$resetRowCache(delta.start.row);

          var removedFolds = this.$updateInternalDataOnChange(delta);
          if (!this.$fromUndo && this.$undoManager && !delta.ignore) {
              this.$deltasDoc.push(delta);
              if (removedFolds && removedFolds.length != 0) {
                  this.$deltasFold.push({
                      action: "removeFolds",
                      folds:  removedFolds
                  });
              }

              this.$informUndoManager.schedule();
          }

          this.bgTokenizer && this.bgTokenizer.$updateOnChange(delta);
          this._signal("change", delta);
      };
      this.setValue = function(text) {
          this.doc.setValue(text);
          this.selection.moveTo(0, 0);

          this.$resetRowCache(0);
          this.$deltas = [];
          this.$deltasDoc = [];
          this.$deltasFold = [];
          this.setUndoManager(this.$undoManager);
          this.getUndoManager().reset();
      };
      this.getValue =
      this.toString = function() {
          return this.doc.getValue();
      };
      this.getSelection = function() {
          return this.selection;
      };
      this.getState = function(row) {
          return this.bgTokenizer.getState(row);
      };
      this.getTokens = function(row) {
          return this.bgTokenizer.getTokens(row);
      };
      this.getTokenAt = function(row, column) {
          var tokens = this.bgTokenizer.getTokens(row);
          var token, c = 0;
          if (column == null) {
              var i = tokens.length - 1;
              c = this.getLine(row).length;
          } else {
              for (var i = 0; i < tokens.length; i++) {
                  c += tokens[i].value.length;
                  if (c >= column)
                      break;
              }
          }
          token = tokens[i];
          if (!token)
              return null;
          token.index = i;
          token.start = c - token.value.length;
          return token;
      };
      this.setUndoManager = function(undoManager) {
          this.$undoManager = undoManager;
          this.$deltas = [];
          this.$deltasDoc = [];
          this.$deltasFold = [];

          if (this.$informUndoManager)
              this.$informUndoManager.cancel();

          if (undoManager) {
              var self = this;

              this.$syncInformUndoManager = function() {
                  self.$informUndoManager.cancel();

                  if (self.$deltasFold.length) {
                      self.$deltas.push({
                          group: "fold",
                          deltas: self.$deltasFold
                      });
                      self.$deltasFold = [];
                  }

                  if (self.$deltasDoc.length) {
                      self.$deltas.push({
                          group: "doc",
                          deltas: self.$deltasDoc
                      });
                      self.$deltasDoc = [];
                  }

                  if (self.$deltas.length > 0) {
                      undoManager.execute({
                          action: "aceupdate",
                          args: [self.$deltas, self],
                          merge: self.mergeUndoDeltas
                      });
                  }
                  self.mergeUndoDeltas = false;
                  self.$deltas = [];
              };
              this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);
          }
      };
      this.markUndoGroup = function() {
          if (this.$syncInformUndoManager)
              this.$syncInformUndoManager();
      };
      
      this.$defaultUndoManager = {
          undo: function() {},
          redo: function() {},
          reset: function() {}
      };
      this.getUndoManager = function() {
          return this.$undoManager || this.$defaultUndoManager;
      };
      this.getTabString = function() {
          if (this.getUseSoftTabs()) {
              return lang.stringRepeat(" ", this.getTabSize());
          } else {
              return "\t";
          }
      };
      this.setUseSoftTabs = function(val) {
          this.setOption("useSoftTabs", val);
      };
      this.getUseSoftTabs = function() {
          return this.$useSoftTabs && !this.$mode.$indentWithTabs;
      };
      this.setTabSize = function(tabSize) {
          this.setOption("tabSize", tabSize);
      };
      this.getTabSize = function() {
          return this.$tabSize;
      };
      this.isTabStop = function(position) {
          return this.$useSoftTabs && (position.column % this.$tabSize === 0);
      };
      this.setNavigateWithinSoftTabs = function (navigateWithinSoftTabs) {
          this.setOption("navigateWithinSoftTabs", navigateWithinSoftTabs);
      };
      this.getNavigateWithinSoftTabs = function() {
          return this.$navigateWithinSoftTabs;
      };

      this.$overwrite = false;
      this.setOverwrite = function(overwrite) {
          this.setOption("overwrite", overwrite);
      };
      this.getOverwrite = function() {
          return this.$overwrite;
      };
      this.toggleOverwrite = function() {
          this.setOverwrite(!this.$overwrite);
      };
      this.addGutterDecoration = function(row, className) {
          if (!this.$decorations[row])
              this.$decorations[row] = "";
          this.$decorations[row] += " " + className;
          this._signal("changeBreakpoint", {});
      };
      this.removeGutterDecoration = function(row, className) {
          this.$decorations[row] = (this.$decorations[row] || "").replace(" " + className, "");
          this._signal("changeBreakpoint", {});
      };
      this.getBreakpoints = function() {
          return this.$breakpoints;
      };
      this.setBreakpoints = function(rows) {
          this.$breakpoints = [];
          for (var i=0; i<rows.length; i++) {
              this.$breakpoints[rows[i]] = "ace_breakpoint";
          }
          this._signal("changeBreakpoint", {});
      };
      this.clearBreakpoints = function() {
          this.$breakpoints = [];
          this._signal("changeBreakpoint", {});
      };
      this.setBreakpoint = function(row, className) {
          if (className === undefined)
              className = "ace_breakpoint";
          if (className)
              this.$breakpoints[row] = className;
          else
              delete this.$breakpoints[row];
          this._signal("changeBreakpoint", {});
      };
      this.clearBreakpoint = function(row) {
          delete this.$breakpoints[row];
          this._signal("changeBreakpoint", {});
      };
      this.addMarker = function(range, clazz, type, inFront) {
          var id = this.$markerId++;

          var marker = {
              range : range,
              type : type || "line",
              renderer: typeof type == "function" ? type : null,
              clazz : clazz,
              inFront: !!inFront,
              id: id
          };

          if (inFront) {
              this.$frontMarkers[id] = marker;
              this._signal("changeFrontMarker");
          } else {
              this.$backMarkers[id] = marker;
              this._signal("changeBackMarker");
          }

          return id;
      };
      this.addDynamicMarker = function(marker, inFront) {
          if (!marker.update)
              return;
          var id = this.$markerId++;
          marker.id = id;
          marker.inFront = !!inFront;

          if (inFront) {
              this.$frontMarkers[id] = marker;
              this._signal("changeFrontMarker");
          } else {
              this.$backMarkers[id] = marker;
              this._signal("changeBackMarker");
          }

          return marker;
      };
      this.removeMarker = function(markerId) {
          var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];
          if (!marker)
              return;

          var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;
          if (marker) {
              delete (markers[markerId]);
              this._signal(marker.inFront ? "changeFrontMarker" : "changeBackMarker");
          }
      };
      this.getMarkers = function(inFront) {
          return inFront ? this.$frontMarkers : this.$backMarkers;
      };

      this.highlight = function(re) {
          if (!this.$searchHighlight) {
              var highlight = new SearchHighlight(null, "ace_selected-word", "text");
              this.$searchHighlight = this.addDynamicMarker(highlight);
          }
          this.$searchHighlight.setRegexp(re);
      };
      this.highlightLines = function(startRow, endRow, clazz, inFront) {
          if (typeof endRow != "number") {
              clazz = endRow;
              endRow = startRow;
          }
          if (!clazz)
              clazz = "ace_step";

          var range = new Range(startRow, 0, endRow, Infinity);
          range.id = this.addMarker(range, clazz, "fullLine", inFront);
          return range;
      };
      this.setAnnotations = function(annotations) {
          this.$annotations = annotations;
          this._signal("changeAnnotation", {});
      };
      this.getAnnotations = function() {
          return this.$annotations || [];
      };
      this.clearAnnotations = function() {
          this.setAnnotations([]);
      };
      this.$detectNewLine = function(text) {
          var match = text.match(/^.*?(\r?\n)/m);
          if (match) {
              this.$autoNewLine = match[1];
          } else {
              this.$autoNewLine = "\n";
          }
      };
      this.getWordRange = function(row, column) {
          var line = this.getLine(row);

          var inToken = false;
          if (column > 0)
              inToken = !!line.charAt(column - 1).match(this.tokenRe);

          if (!inToken)
              inToken = !!line.charAt(column).match(this.tokenRe);

          if (inToken)
              var re = this.tokenRe;
          else if (/^\s+$/.test(line.slice(column-1, column+1)))
              var re = /\s/;
          else
              var re = this.nonTokenRe;

          var start = column;
          if (start > 0) {
              do {
                  start--;
              }
              while (start >= 0 && line.charAt(start).match(re));
              start++;
          }

          var end = column;
          while (end < line.length && line.charAt(end).match(re)) {
              end++;
          }

          return new Range(row, start, row, end);
      };
      this.getAWordRange = function(row, column) {
          var wordRange = this.getWordRange(row, column);
          var line = this.getLine(wordRange.end.row);

          while (line.charAt(wordRange.end.column).match(/[ \t]/)) {
              wordRange.end.column += 1;
          }
          return wordRange;
      };
      this.setNewLineMode = function(newLineMode) {
          this.doc.setNewLineMode(newLineMode);
      };
      this.getNewLineMode = function() {
          return this.doc.getNewLineMode();
      };
      this.setUseWorker = function(useWorker) { this.setOption("useWorker", useWorker); };
      this.getUseWorker = function() { return this.$useWorker; };
      this.onReloadTokenizer = function(e) {
          var rows = e.data;
          this.bgTokenizer.start(rows.first);
          this._signal("tokenizerUpdate", e);
      };

      this.$modes = {};
      this.$mode = null;
      this.$modeId = null;
      this.setMode = function(mode, cb) {
          if (mode && typeof mode === "object") {
              if (mode.getTokenizer)
                  return this.$onChangeMode(mode);
              var options = mode;
              var path = options.path;
          } else {
              path = mode || "ace/mode/text";
          }
          if (!this.$modes["ace/mode/text"])
              this.$modes["ace/mode/text"] = new TextMode();

          if (this.$modes[path] && !options) {
              this.$onChangeMode(this.$modes[path]);
              cb && cb();
              return;
          }
          this.$modeId = path;
          config.loadModule(["mode", path], function(m) {
              if (this.$modeId !== path)
                  return cb && cb();
              if (this.$modes[path] && !options) {
                  this.$onChangeMode(this.$modes[path]);
              } else if (m && m.Mode) {
                  m = new m.Mode(options);
                  if (!options) {
                      this.$modes[path] = m;
                      m.$id = path;
                  }
                  this.$onChangeMode(m);
              }
              cb && cb();
          }.bind(this));
          if (!this.$mode)
              this.$onChangeMode(this.$modes["ace/mode/text"], true);
      };

      this.$onChangeMode = function(mode, $isPlaceholder) {
          if (!$isPlaceholder)
              this.$modeId = mode.$id;
          if (this.$mode === mode) 
              return;

          this.$mode = mode;

          this.$stopWorker();

          if (this.$useWorker)
              this.$startWorker();

          var tokenizer = mode.getTokenizer();

          if(tokenizer.addEventListener !== undefined) {
              var onReloadTokenizer = this.onReloadTokenizer.bind(this);
              tokenizer.addEventListener("update", onReloadTokenizer);
          }

          if (!this.bgTokenizer) {
              this.bgTokenizer = new BackgroundTokenizer(tokenizer);
              var _self = this;
              this.bgTokenizer.addEventListener("update", function(e) {
                  _self._signal("tokenizerUpdate", e);
              });
          } else {
              this.bgTokenizer.setTokenizer(tokenizer);
          }

          this.bgTokenizer.setDocument(this.getDocument());

          this.tokenRe = mode.tokenRe;
          this.nonTokenRe = mode.nonTokenRe;

          
          if (!$isPlaceholder) {
              if (mode.attachToSession)
                  mode.attachToSession(this);
              this.$options.wrapMethod.set.call(this, this.$wrapMethod);
              this.$setFolding(mode.foldingRules);
              this.bgTokenizer.start(0);
              this._emit("changeMode");
          }
      };

      this.$stopWorker = function() {
          if (this.$worker) {
              this.$worker.terminate();
              this.$worker = null;
          }
      };

      this.$startWorker = function() {
          try {
              this.$worker = this.$mode.createWorker(this);
          } catch (e) {
              config.warn("Could not load worker", e);
              this.$worker = null;
          }
      };
      this.getMode = function() {
          return this.$mode;
      };

      this.$scrollTop = 0;
      this.setScrollTop = function(scrollTop) {
          if (this.$scrollTop === scrollTop || isNaN(scrollTop))
              return;

          this.$scrollTop = scrollTop;
          this._signal("changeScrollTop", scrollTop);
      };
      this.getScrollTop = function() {
          return this.$scrollTop;
      };

      this.$scrollLeft = 0;
      this.setScrollLeft = function(scrollLeft) {
          if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))
              return;

          this.$scrollLeft = scrollLeft;
          this._signal("changeScrollLeft", scrollLeft);
      };
      this.getScrollLeft = function() {
          return this.$scrollLeft;
      };
      this.getScreenWidth = function() {
          this.$computeWidth();
          if (this.lineWidgets) 
              return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);
          return this.screenWidth;
      };
      
      this.getLineWidgetMaxWidth = function() {
          if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;
          var width = 0;
          this.lineWidgets.forEach(function(w) {
              if (w && w.screenWidth > width)
                  width = w.screenWidth;
          });
          return this.lineWidgetWidth = width;
      };

      this.$computeWidth = function(force) {
          if (this.$modified || force) {
              this.$modified = false;

              if (this.$useWrapMode)
                  return this.screenWidth = this.$wrapLimit;

              var lines = this.doc.getAllLines();
              var cache = this.$rowLengthCache;
              var longestScreenLine = 0;
              var foldIndex = 0;
              var foldLine = this.$foldData[foldIndex];
              var foldStart = foldLine ? foldLine.start.row : Infinity;
              var len = lines.length;

              for (var i = 0; i < len; i++) {
                  if (i > foldStart) {
                      i = foldLine.end.row + 1;
                      if (i >= len)
                          break;
                      foldLine = this.$foldData[foldIndex++];
                      foldStart = foldLine ? foldLine.start.row : Infinity;
                  }

                  if (cache[i] == null)
                      cache[i] = this.$getStringScreenWidth(lines[i])[0];

                  if (cache[i] > longestScreenLine)
                      longestScreenLine = cache[i];
              }
              this.screenWidth = longestScreenLine;
          }
      };
      this.getLine = function(row) {
          return this.doc.getLine(row);
      };
      this.getLines = function(firstRow, lastRow) {
          return this.doc.getLines(firstRow, lastRow);
      };
      this.getLength = function() {
          return this.doc.getLength();
      };
      this.getTextRange = function(range) {
          return this.doc.getTextRange(range || this.selection.getRange());
      };
      this.insert = function(position, text) {
          return this.doc.insert(position, text);
      };
      this.remove = function(range) {
          return this.doc.remove(range);
      };
      this.removeFullLines = function(firstRow, lastRow){
          return this.doc.removeFullLines(firstRow, lastRow);
      };
      this.undoChanges = function(deltas, dontSelect) {
          if (!deltas.length)
              return;

          this.$fromUndo = true;
          var lastUndoRange = null;
          for (var i = deltas.length - 1; i != -1; i--) {
              var delta = deltas[i];
              if (delta.group == "doc") {
                  this.doc.revertDeltas(delta.deltas);
                  lastUndoRange =
                      this.$getUndoSelection(delta.deltas, true, lastUndoRange);
              } else {
                  delta.deltas.forEach(function(foldDelta) {
                      this.addFolds(foldDelta.folds);
                  }, this);
              }
          }
          this.$fromUndo = false;
          lastUndoRange &&
              this.$undoSelect &&
              !dontSelect &&
              this.selection.setSelectionRange(lastUndoRange);
          return lastUndoRange;
      };
      this.redoChanges = function(deltas, dontSelect) {
          if (!deltas.length)
              return;

          this.$fromUndo = true;
          var lastUndoRange = null;
          for (var i = 0; i < deltas.length; i++) {
              var delta = deltas[i];
              if (delta.group == "doc") {
                  this.doc.applyDeltas(delta.deltas);
                  lastUndoRange =
                      this.$getUndoSelection(delta.deltas, false, lastUndoRange);
              }
          }
          this.$fromUndo = false;
          lastUndoRange &&
              this.$undoSelect &&
              !dontSelect &&
              this.selection.setSelectionRange(lastUndoRange);
          return lastUndoRange;
      };
      this.setUndoSelect = function(enable) {
          this.$undoSelect = enable;
      };

      this.$getUndoSelection = function(deltas, isUndo, lastUndoRange) {
          function isInsert(delta) {
              return isUndo ? delta.action !== "insert" : delta.action === "insert";
          }

          var delta = deltas[0];
          var range, point;
          if (isInsert(delta)) {
              range = Range.fromPoints(delta.start, delta.end);
          } else {
              range = Range.fromPoints(delta.start, delta.start);
          }

          for (var i = 1; i < deltas.length; i++) {
              delta = deltas[i];
              if (isInsert(delta)) {
                  point = delta.start;
                  if (range.compare(point.row, point.column) == -1) {
                      range.setStart(point);
                  }
                  point = delta.end;
                  if (range.compare(point.row, point.column) == 1) {
                      range.setEnd(point);
                  }
              } else {
                  point = delta.start;
                  if (range.compare(point.row, point.column) == -1) {
                      range = Range.fromPoints(delta.start, delta.start);
                  }
              }
          }
          if (lastUndoRange != null) {
              if (Range.comparePoints(lastUndoRange.start, range.start) === 0) {
                  lastUndoRange.start.column += range.end.column - range.start.column;
                  lastUndoRange.end.column += range.end.column - range.start.column;
              }

              var cmp = lastUndoRange.compareRange(range);
              if (cmp == 1) {
                  range.setStart(lastUndoRange.start);
              } else if (cmp == -1) {
                  range.setEnd(lastUndoRange.end);
              }
          }

          return range;
      };
      this.replace = function(range, text) {
          return this.doc.replace(range, text);
      };
      this.moveText = function(fromRange, toPosition, copy) {
          var text = this.getTextRange(fromRange);
          var folds = this.getFoldsInRange(fromRange);

          var toRange = Range.fromPoints(toPosition, toPosition);
          if (!copy) {
              this.remove(fromRange);
              var rowDiff = fromRange.start.row - fromRange.end.row;
              var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;
              if (collDiff) {
                  if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)
                      toRange.start.column += collDiff;
                  if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)
                      toRange.end.column += collDiff;
              }
              if (rowDiff && toRange.start.row >= fromRange.end.row) {
                  toRange.start.row += rowDiff;
                  toRange.end.row += rowDiff;
              }
          }

          toRange.end = this.insert(toRange.start, text);
          if (folds.length) {
              var oldStart = fromRange.start;
              var newStart = toRange.start;
              var rowDiff = newStart.row - oldStart.row;
              var collDiff = newStart.column - oldStart.column;
              this.addFolds(folds.map(function(x) {
                  x = x.clone();
                  if (x.start.row == oldStart.row)
                      x.start.column += collDiff;
                  if (x.end.row == oldStart.row)
                      x.end.column += collDiff;
                  x.start.row += rowDiff;
                  x.end.row += rowDiff;
                  return x;
              }));
          }

          return toRange;
      };
      this.indentRows = function(startRow, endRow, indentString) {
          indentString = indentString.replace(/\t/g, this.getTabString());
          for (var row=startRow; row<=endRow; row++)
              this.doc.insertInLine({row: row, column: 0}, indentString);
      };
      this.outdentRows = function (range) {
          var rowRange = range.collapseRows();
          var deleteRange = new Range(0, 0, 0, 0);
          var size = this.getTabSize();

          for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {
              var line = this.getLine(i);

              deleteRange.start.row = i;
              deleteRange.end.row = i;
              for (var j = 0; j < size; ++j)
                  if (line.charAt(j) != ' ')
                      break;
              if (j < size && line.charAt(j) == '\t') {
                  deleteRange.start.column = j;
                  deleteRange.end.column = j + 1;
              } else {
                  deleteRange.start.column = 0;
                  deleteRange.end.column = j;
              }
              this.remove(deleteRange);
          }
      };

      this.$moveLines = function(firstRow, lastRow, dir) {
          firstRow = this.getRowFoldStart(firstRow);
          lastRow = this.getRowFoldEnd(lastRow);
          if (dir < 0) {
              var row = this.getRowFoldStart(firstRow + dir);
              if (row < 0) return 0;
              var diff = row-firstRow;
          } else if (dir > 0) {
              var row = this.getRowFoldEnd(lastRow + dir);
              if (row > this.doc.getLength()-1) return 0;
              var diff = row-lastRow;
          } else {
              firstRow = this.$clipRowToDocument(firstRow);
              lastRow = this.$clipRowToDocument(lastRow);
              var diff = lastRow - firstRow + 1;
          }

          var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);
          var folds = this.getFoldsInRange(range).map(function(x){
              x = x.clone();
              x.start.row += diff;
              x.end.row += diff;
              return x;
          });
          
          var lines = dir == 0
              ? this.doc.getLines(firstRow, lastRow)
              : this.doc.removeFullLines(firstRow, lastRow);
          this.doc.insertFullLines(firstRow+diff, lines);
          folds.length && this.addFolds(folds);
          return diff;
      };
      this.moveLinesUp = function(firstRow, lastRow) {
          return this.$moveLines(firstRow, lastRow, -1);
      };
      this.moveLinesDown = function(firstRow, lastRow) {
          return this.$moveLines(firstRow, lastRow, 1);
      };
      this.duplicateLines = function(firstRow, lastRow) {
          return this.$moveLines(firstRow, lastRow, 0);
      };


      this.$clipRowToDocument = function(row) {
          return Math.max(0, Math.min(row, this.doc.getLength()-1));
      };

      this.$clipColumnToRow = function(row, column) {
          if (column < 0)
              return 0;
          return Math.min(this.doc.getLine(row).length, column);
      };


      this.$clipPositionToDocument = function(row, column) {
          column = Math.max(0, column);

          if (row < 0) {
              row = 0;
              column = 0;
          } else {
              var len = this.doc.getLength();
              if (row >= len) {
                  row = len - 1;
                  column = this.doc.getLine(len-1).length;
              } else {
                  column = Math.min(this.doc.getLine(row).length, column);
              }
          }

          return {
              row: row,
              column: column
          };
      };

      this.$clipRangeToDocument = function(range) {
          if (range.start.row < 0) {
              range.start.row = 0;
              range.start.column = 0;
          } else {
              range.start.column = this.$clipColumnToRow(
                  range.start.row,
                  range.start.column
              );
          }

          var len = this.doc.getLength() - 1;
          if (range.end.row > len) {
              range.end.row = len;
              range.end.column = this.doc.getLine(len).length;
          } else {
              range.end.column = this.$clipColumnToRow(
                  range.end.row,
                  range.end.column
              );
          }
          return range;
      };
      this.$wrapLimit = 80;
      this.$useWrapMode = false;
      this.$wrapLimitRange = {
          min : null,
          max : null
      };
      this.setUseWrapMode = function(useWrapMode) {
          if (useWrapMode != this.$useWrapMode) {
              this.$useWrapMode = useWrapMode;
              this.$modified = true;
              this.$resetRowCache(0);
              if (useWrapMode) {
                  var len = this.getLength();
                  this.$wrapData = Array(len);
                  this.$updateWrapData(0, len - 1);
              }

              this._signal("changeWrapMode");
          }
      };
      this.getUseWrapMode = function() {
          return this.$useWrapMode;
      };
      this.setWrapLimitRange = function(min, max) {
          if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {
              this.$wrapLimitRange = { min: min, max: max };
              this.$modified = true;
              this.$bidiHandler.markAsDirty();
              if (this.$useWrapMode)
                  this._signal("changeWrapMode");
          }
      };
      this.adjustWrapLimit = function(desiredLimit, $printMargin) {
          var limits = this.$wrapLimitRange;
          if (limits.max < 0)
              limits = {min: $printMargin, max: $printMargin};
          var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);
          if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {
              this.$wrapLimit = wrapLimit;
              this.$modified = true;
              if (this.$useWrapMode) {
                  this.$updateWrapData(0, this.getLength() - 1);
                  this.$resetRowCache(0);
                  this._signal("changeWrapLimit");
              }
              return true;
          }
          return false;
      };

      this.$constrainWrapLimit = function(wrapLimit, min, max) {
          if (min)
              wrapLimit = Math.max(min, wrapLimit);

          if (max)
              wrapLimit = Math.min(max, wrapLimit);

          return wrapLimit;
      };
      this.getWrapLimit = function() {
          return this.$wrapLimit;
      };
      this.setWrapLimit = function (limit) {
          this.setWrapLimitRange(limit, limit);
      };
      this.getWrapLimitRange = function() {
          return {
              min : this.$wrapLimitRange.min,
              max : this.$wrapLimitRange.max
          };
      };

      this.$updateInternalDataOnChange = function(delta) {
          var useWrapMode = this.$useWrapMode;
          var action = delta.action;
          var start = delta.start;
          var end = delta.end;
          var firstRow = start.row;
          var lastRow = end.row;
          var len = lastRow - firstRow;
          var removedFolds = null;
          
          this.$updating = true;
          if (len != 0) {
              if (action === "remove") {
                  this[useWrapMode ? "$wrapData" : "$rowLengthCache"].splice(firstRow, len);

                  var foldLines = this.$foldData;
                  removedFolds = this.getFoldsInRange(delta);
                  this.removeFolds(removedFolds);

                  var foldLine = this.getFoldLine(end.row);
                  var idx = 0;
                  if (foldLine) {
                      foldLine.addRemoveChars(end.row, end.column, start.column - end.column);
                      foldLine.shiftRow(-len);

                      var foldLineBefore = this.getFoldLine(firstRow);
                      if (foldLineBefore && foldLineBefore !== foldLine) {
                          foldLineBefore.merge(foldLine);
                          foldLine = foldLineBefore;
                      }
                      idx = foldLines.indexOf(foldLine) + 1;
                  }

                  for (idx; idx < foldLines.length; idx++) {
                      var foldLine = foldLines[idx];
                      if (foldLine.start.row >= end.row) {
                          foldLine.shiftRow(-len);
                      }
                  }

                  lastRow = firstRow;
              } else {
                  var args = Array(len);
                  args.unshift(firstRow, 0);
                  var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;
                  arr.splice.apply(arr, args);
                  var foldLines = this.$foldData;
                  var foldLine = this.getFoldLine(firstRow);
                  var idx = 0;
                  if (foldLine) {
                      var cmp = foldLine.range.compareInside(start.row, start.column);
                      if (cmp == 0) {
                          foldLine = foldLine.split(start.row, start.column);
                          if (foldLine) {
                              foldLine.shiftRow(len);
                              foldLine.addRemoveChars(lastRow, 0, end.column - start.column);
                          }
                      } else
                      if (cmp == -1) {
                          foldLine.addRemoveChars(firstRow, 0, end.column - start.column);
                          foldLine.shiftRow(len);
                      }
                      idx = foldLines.indexOf(foldLine) + 1;
                  }

                  for (idx; idx < foldLines.length; idx++) {
                      var foldLine = foldLines[idx];
                      if (foldLine.start.row >= firstRow) {
                          foldLine.shiftRow(len);
                      }
                  }
              }
          } else {
              len = Math.abs(delta.start.column - delta.end.column);
              if (action === "remove") {
                  removedFolds = this.getFoldsInRange(delta);
                  this.removeFolds(removedFolds);

                  len = -len;
              }
              var foldLine = this.getFoldLine(firstRow);
              if (foldLine) {
                  foldLine.addRemoveChars(firstRow, start.column, len);
              }
          }

          if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {
              console.error("doc.getLength() and $wrapData.length have to be the same!");
          }
          this.$updating = false;

          if (useWrapMode)
              this.$updateWrapData(firstRow, lastRow);
          else
              this.$updateRowLengthCache(firstRow, lastRow);

          return removedFolds;
      };

      this.$updateRowLengthCache = function(firstRow, lastRow, b) {
          this.$rowLengthCache[firstRow] = null;
          this.$rowLengthCache[lastRow] = null;
      };

      this.$updateWrapData = function(firstRow, lastRow) {
          var lines = this.doc.getAllLines();
          var tabSize = this.getTabSize();
          var wrapData = this.$wrapData;
          var wrapLimit = this.$wrapLimit;
          var tokens;
          var foldLine;

          var row = firstRow;
          lastRow = Math.min(lastRow, lines.length - 1);
          while (row <= lastRow) {
              foldLine = this.getFoldLine(row, foldLine);
              if (!foldLine) {
                  tokens = this.$getDisplayTokens(lines[row]);
                  wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);
                  row ++;
              } else {
                  tokens = [];
                  foldLine.walk(function(placeholder, row, column, lastColumn) {
                          var walkTokens;
                          if (placeholder != null) {
                              walkTokens = this.$getDisplayTokens(
                                              placeholder, tokens.length);
                              walkTokens[0] = PLACEHOLDER_START;
                              for (var i = 1; i < walkTokens.length; i++) {
                                  walkTokens[i] = PLACEHOLDER_BODY;
                              }
                          } else {
                              walkTokens = this.$getDisplayTokens(
                                  lines[row].substring(lastColumn, column),
                                  tokens.length);
                          }
                          tokens = tokens.concat(walkTokens);
                      }.bind(this),
                      foldLine.end.row,
                      lines[foldLine.end.row].length + 1
                  );

                  wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);
                  row = foldLine.end.row + 1;
              }
          }
      };
      var CHAR = 1,
          CHAR_EXT = 2,
          PLACEHOLDER_START = 3,
          PLACEHOLDER_BODY =  4,
          PUNCTUATION = 9,
          SPACE = 10,
          TAB = 11,
          TAB_SPACE = 12;


      this.$computeWrapSplits = function(tokens, wrapLimit, tabSize) {
          if (tokens.length == 0) {
              return [];
          }

          var splits = [];
          var displayLength = tokens.length;
          var lastSplit = 0, lastDocSplit = 0;

          var isCode = this.$wrapAsCode;

          var indentedSoftWrap = this.$indentedSoftWrap;
          var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)
              || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);

          function getWrapIndent() {
              var indentation = 0;
              if (maxIndent === 0)
                  return indentation;
              if (indentedSoftWrap) {
                  for (var i = 0; i < tokens.length; i++) {
                      var token = tokens[i];
                      if (token == SPACE)
                          indentation += 1;
                      else if (token == TAB)
                          indentation += tabSize;
                      else if (token == TAB_SPACE)
                          continue;
                      else
                          break;
                  }
              }
              if (isCode && indentedSoftWrap !== false)
                  indentation += tabSize;
              return Math.min(indentation, maxIndent);
          }
          function addSplit(screenPos) {
              var displayed = tokens.slice(lastSplit, screenPos);
              var len = displayed.length;
              displayed.join("")
                  .replace(/12/g, function() {
                      len -= 1;
                  })
                  .replace(/2/g, function() {
                      len -= 1;
                  });

              if (!splits.length) {
                  indent = getWrapIndent();
                  splits.indent = indent;
              }
              lastDocSplit += len;
              splits.push(lastDocSplit);
              lastSplit = screenPos;
          }
          var indent = 0;
          while (displayLength - lastSplit > wrapLimit - indent) {
              var split = lastSplit + wrapLimit - indent;
              if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {
                  addSplit(split);
                  continue;
              }
              if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {
                  for (split; split != lastSplit - 1; split--) {
                      if (tokens[split] == PLACEHOLDER_START) {
                          break;
                      }
                  }
                  if (split > lastSplit) {
                      addSplit(split);
                      continue;
                  }
                  split = lastSplit + wrapLimit;
                  for (split; split < tokens.length; split++) {
                      if (tokens[split] != PLACEHOLDER_BODY) {
                          break;
                      }
                  }
                  if (split == tokens.length) {
                      break;  // Breaks the while-loop.
                  }
                  addSplit(split);
                  continue;
              }
              var minSplit = Math.max(split - (wrapLimit -(wrapLimit>>2)), lastSplit - 1);
              while (split > minSplit && tokens[split] < PLACEHOLDER_START) {
                  split --;
              }
              if (isCode) {
                  while (split > minSplit && tokens[split] < PLACEHOLDER_START) {
                      split --;
                  }
                  while (split > minSplit && tokens[split] == PUNCTUATION) {
                      split --;
                  }
              } else {
                  while (split > minSplit && tokens[split] < SPACE) {
                      split --;
                  }
              }
              if (split > minSplit) {
                  addSplit(++split);
                  continue;
              }
              split = lastSplit + wrapLimit;
              if (tokens[split] == CHAR_EXT)
                  split--;
              addSplit(split - indent);
          }
          return splits;
      };
      this.$getDisplayTokens = function(str, offset) {
          var arr = [];
          var tabSize;
          offset = offset || 0;

          for (var i = 0; i < str.length; i++) {
              var c = str.charCodeAt(i);
              if (c == 9) {
                  tabSize = this.getScreenTabSize(arr.length + offset);
                  arr.push(TAB);
                  for (var n = 1; n < tabSize; n++) {
                      arr.push(TAB_SPACE);
                  }
              }
              else if (c == 32) {
                  arr.push(SPACE);
              } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {
                  arr.push(PUNCTUATION);
              }
              else if (c >= 0x1100 && isFullWidth(c)) {
                  arr.push(CHAR, CHAR_EXT);
              } else {
                  arr.push(CHAR);
              }
          }
          return arr;
      };
      this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {
          if (maxScreenColumn == 0)
              return [0, 0];
          if (maxScreenColumn == null)
              maxScreenColumn = Infinity;
          screenColumn = screenColumn || 0;

          var c, column;
          for (column = 0; column < str.length; column++) {
              c = str.charCodeAt(column);
              if (c == 9) {
                  screenColumn += this.getScreenTabSize(screenColumn);
              }
              else if (c >= 0x1100 && isFullWidth(c)) {
                  screenColumn += 2;
              } else {
                  screenColumn += 1;
              }
              if (screenColumn > maxScreenColumn) {
                  break;
              }
          }

          return [screenColumn, column];
      };

      this.lineWidgets = null;
      this.getRowLength = function(row) {
          if (this.lineWidgets)
              var h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;
          else 
              h = 0;
          if (!this.$useWrapMode || !this.$wrapData[row]) {
              return 1 + h;
          } else {
              return this.$wrapData[row].length + 1 + h;
          }
      };
      this.getRowLineCount = function(row) {
          if (!this.$useWrapMode || !this.$wrapData[row]) {
              return 1;
          } else {
              return this.$wrapData[row].length + 1;
          }
      };

      this.getRowWrapIndent = function(screenRow) {
          if (this.$useWrapMode) {
              var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);
              var splits = this.$wrapData[pos.row];
              return splits.length && splits[0] < pos.column ? splits.indent : 0;
          } else {
              return 0;
          }
      };
      this.getScreenLastRowColumn = function(screenRow) {
          var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);
          return this.documentToScreenColumn(pos.row, pos.column);
      };
      this.getDocumentLastRowColumn = function(docRow, docColumn) {
          var screenRow = this.documentToScreenRow(docRow, docColumn);
          return this.getScreenLastRowColumn(screenRow);
      };
      this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {
          var screenRow = this.documentToScreenRow(docRow, docColumn);
          return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);
      };
      this.getRowSplitData = function(row) {
          if (!this.$useWrapMode) {
              return undefined;
          } else {
              return this.$wrapData[row];
          }
      };
      this.getScreenTabSize = function(screenColumn) {
          return this.$tabSize - screenColumn % this.$tabSize;
      };


      this.screenToDocumentRow = function(screenRow, screenColumn) {
          return this.screenToDocumentPosition(screenRow, screenColumn).row;
      };


      this.screenToDocumentColumn = function(screenRow, screenColumn) {
          return this.screenToDocumentPosition(screenRow, screenColumn).column;
      };
      this.screenToDocumentPosition = function(screenRow, screenColumn, offsetX) {
          if (screenRow < 0)
              return {row: 0, column: 0};

          var line;
          var docRow = 0;
          var docColumn = 0;
          var column;
          var row = 0;
          var rowLength = 0;

          var rowCache = this.$screenRowCache;
          var i = this.$getRowCacheIndex(rowCache, screenRow);
          var l = rowCache.length;
          if (l && i >= 0) {
              var row = rowCache[i];
              var docRow = this.$docRowCache[i];
              var doCache = screenRow > rowCache[l - 1];
          } else {
              var doCache = !l;
          }

          var maxRow = this.getLength() - 1;
          var foldLine = this.getNextFoldLine(docRow);
          var foldStart = foldLine ? foldLine.start.row : Infinity;

          while (row <= screenRow) {
              rowLength = this.getRowLength(docRow);
              if (row + rowLength > screenRow || docRow >= maxRow) {
                  break;
              } else {
                  row += rowLength;
                  docRow++;
                  if (docRow > foldStart) {
                      docRow = foldLine.end.row+1;
                      foldLine = this.getNextFoldLine(docRow, foldLine);
                      foldStart = foldLine ? foldLine.start.row : Infinity;
                  }
              }

              if (doCache) {
                  this.$docRowCache.push(docRow);
                  this.$screenRowCache.push(row);
              }
          }

          if (foldLine && foldLine.start.row <= docRow) {
              line = this.getFoldDisplayLine(foldLine);
              docRow = foldLine.start.row;
          } else if (row + rowLength <= screenRow || docRow > maxRow) {
              return {
                  row: maxRow,
                  column: this.getLine(maxRow).length
              };
          } else {
              line = this.getLine(docRow);
              foldLine = null;
          }
          var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);
          if (this.$useWrapMode) {
              var splits = this.$wrapData[docRow];
              if (splits) {
                  column = splits[splitIndex];
                  if(splitIndex > 0 && splits.length) {
                      wrapIndent = splits.indent;
                      docColumn = splits[splitIndex - 1] || splits[splits.length - 1];
                      line = line.substring(docColumn);
                  }
              }
          }

          if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))
              screenColumn = this.$bidiHandler.offsetToCol(offsetX);

          docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];
          if (this.$useWrapMode && docColumn >= column)
              docColumn = column - 1;

          if (foldLine)
              return foldLine.idxToPosition(docColumn);

          return {row: docRow, column: docColumn};
      };
      this.documentToScreenPosition = function(docRow, docColumn) {
          if (typeof docColumn === "undefined")
              var pos = this.$clipPositionToDocument(docRow.row, docRow.column);
          else
              pos = this.$clipPositionToDocument(docRow, docColumn);

          docRow = pos.row;
          docColumn = pos.column;

          var screenRow = 0;
          var foldStartRow = null;
          var fold = null;
          fold = this.getFoldAt(docRow, docColumn, 1);
          if (fold) {
              docRow = fold.start.row;
              docColumn = fold.start.column;
          }

          var rowEnd, row = 0;


          var rowCache = this.$docRowCache;
          var i = this.$getRowCacheIndex(rowCache, docRow);
          var l = rowCache.length;
          if (l && i >= 0) {
              var row = rowCache[i];
              var screenRow = this.$screenRowCache[i];
              var doCache = docRow > rowCache[l - 1];
          } else {
              var doCache = !l;
          }

          var foldLine = this.getNextFoldLine(row);
          var foldStart = foldLine ?foldLine.start.row :Infinity;

          while (row < docRow) {
              if (row >= foldStart) {
                  rowEnd = foldLine.end.row + 1;
                  if (rowEnd > docRow)
                      break;
                  foldLine = this.getNextFoldLine(rowEnd, foldLine);
                  foldStart = foldLine ?foldLine.start.row :Infinity;
              }
              else {
                  rowEnd = row + 1;
              }

              screenRow += this.getRowLength(row);
              row = rowEnd;

              if (doCache) {
                  this.$docRowCache.push(row);
                  this.$screenRowCache.push(screenRow);
              }
          }
          var textLine = "";
          if (foldLine && row >= foldStart) {
              textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);
              foldStartRow = foldLine.start.row;
          } else {
              textLine = this.getLine(docRow).substring(0, docColumn);
              foldStartRow = docRow;
          }
          var wrapIndent = 0;
          if (this.$useWrapMode) {
              var wrapRow = this.$wrapData[foldStartRow];
              if (wrapRow) {
                  var screenRowOffset = 0;
                  while (textLine.length >= wrapRow[screenRowOffset]) {
                      screenRow ++;
                      screenRowOffset++;
                  }
                  textLine = textLine.substring(
                      wrapRow[screenRowOffset - 1] || 0, textLine.length
                  );
                  wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;
              }
          }

          return {
              row: screenRow,
              column: wrapIndent + this.$getStringScreenWidth(textLine)[0]
          };
      };
      this.documentToScreenColumn = function(row, docColumn) {
          return this.documentToScreenPosition(row, docColumn).column;
      };
      this.documentToScreenRow = function(docRow, docColumn) {
          return this.documentToScreenPosition(docRow, docColumn).row;
      };
      this.getScreenLength = function() {
          var screenRows = 0;
          var fold = null;
          if (!this.$useWrapMode) {
              screenRows = this.getLength();
              var foldData = this.$foldData;
              for (var i = 0; i < foldData.length; i++) {
                  fold = foldData[i];
                  screenRows -= fold.end.row - fold.start.row;
              }
          } else {
              var lastRow = this.$wrapData.length;
              var row = 0, i = 0;
              var fold = this.$foldData[i++];
              var foldStart = fold ? fold.start.row :Infinity;

              while (row < lastRow) {
                  var splits = this.$wrapData[row];
                  screenRows += splits ? splits.length + 1 : 1;
                  row ++;
                  if (row > foldStart) {
                      row = fold.end.row+1;
                      fold = this.$foldData[i++];
                      foldStart = fold ?fold.start.row :Infinity;
                  }
              }
          }
          if (this.lineWidgets)
              screenRows += this.$getWidgetScreenLength();

          return screenRows;
      };
      this.$setFontMetrics = function(fm) {
          if (!this.$enableVarChar) return;
          this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {
              if (maxScreenColumn === 0)
                  return [0, 0];
              if (!maxScreenColumn)
                  maxScreenColumn = Infinity;
              screenColumn = screenColumn || 0;
              
              var c, column;
              for (column = 0; column < str.length; column++) {
                  c = str.charAt(column);
                  if (c === "\t") {
                      screenColumn += this.getScreenTabSize(screenColumn);
                  } else {
                      screenColumn += fm.getCharacterWidth(c);
                  }
                  if (screenColumn > maxScreenColumn) {
                      break;
                  }
              }
              
              return [screenColumn, column];
          };
      };
      
      this.destroy = function() {
          if (this.bgTokenizer) {
              this.bgTokenizer.setDocument(null);
              this.bgTokenizer = null;
          }
          this.$stopWorker();
      };

      this.isFullWidth = isFullWidth;
      function isFullWidth(c) {
          if (c < 0x1100)
              return false;
          return c >= 0x1100 && c <= 0x115F ||
                 c >= 0x11A3 && c <= 0x11A7 ||
                 c >= 0x11FA && c <= 0x11FF ||
                 c >= 0x2329 && c <= 0x232A ||
                 c >= 0x2E80 && c <= 0x2E99 ||
                 c >= 0x2E9B && c <= 0x2EF3 ||
                 c >= 0x2F00 && c <= 0x2FD5 ||
                 c >= 0x2FF0 && c <= 0x2FFB ||
                 c >= 0x3000 && c <= 0x303E ||
                 c >= 0x3041 && c <= 0x3096 ||
                 c >= 0x3099 && c <= 0x30FF ||
                 c >= 0x3105 && c <= 0x312D ||
                 c >= 0x3131 && c <= 0x318E ||
                 c >= 0x3190 && c <= 0x31BA ||
                 c >= 0x31C0 && c <= 0x31E3 ||
                 c >= 0x31F0 && c <= 0x321E ||
                 c >= 0x3220 && c <= 0x3247 ||
                 c >= 0x3250 && c <= 0x32FE ||
                 c >= 0x3300 && c <= 0x4DBF ||
                 c >= 0x4E00 && c <= 0xA48C ||
                 c >= 0xA490 && c <= 0xA4C6 ||
                 c >= 0xA960 && c <= 0xA97C ||
                 c >= 0xAC00 && c <= 0xD7A3 ||
                 c >= 0xD7B0 && c <= 0xD7C6 ||
                 c >= 0xD7CB && c <= 0xD7FB ||
                 c >= 0xF900 && c <= 0xFAFF ||
                 c >= 0xFE10 && c <= 0xFE19 ||
                 c >= 0xFE30 && c <= 0xFE52 ||
                 c >= 0xFE54 && c <= 0xFE66 ||
                 c >= 0xFE68 && c <= 0xFE6B ||
                 c >= 0xFF01 && c <= 0xFF60 ||
                 c >= 0xFFE0 && c <= 0xFFE6;
      }

  }).call(EditSession.prototype);

  acequire("./edit_session/folding").Folding.call(EditSession.prototype);
  acequire("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype);


  config.defineOptions(EditSession.prototype, "session", {
      wrap: {
          set: function(value) {
              if (!value || value == "off")
                  value = false;
              else if (value == "free")
                  value = true;
              else if (value == "printMargin")
                  value = -1;
              else if (typeof value == "string")
                  value = parseInt(value, 10) || false;

              if (this.$wrap == value)
                  return;
              this.$wrap = value;
              if (!value) {
                  this.setUseWrapMode(false);
              } else {
                  var col = typeof value == "number" ? value : null;
                  this.setWrapLimitRange(col, col);
                  this.setUseWrapMode(true);
              }
          },
          get: function() {
              if (this.getUseWrapMode()) {
                  if (this.$wrap == -1)
                      return "printMargin";
                  if (!this.getWrapLimitRange().min)
                      return "free";
                  return this.$wrap;
              }
              return "off";
          },
          handlesSet: true
      },    
      wrapMethod: {
          set: function(val) {
              val = val == "auto"
                  ? this.$mode.type != "text"
                  : val != "text";
              if (val != this.$wrapAsCode) {
                  this.$wrapAsCode = val;
                  if (this.$useWrapMode) {
                      this.$modified = true;
                      this.$resetRowCache(0);
                      this.$updateWrapData(0, this.getLength() - 1);
                  }
              }
          },
          initialValue: "auto"
      },
      indentedSoftWrap: { initialValue: true },
      firstLineNumber: {
          set: function() {this._signal("changeBreakpoint");},
          initialValue: 1
      },
      useWorker: {
          set: function(useWorker) {
              this.$useWorker = useWorker;

              this.$stopWorker();
              if (useWorker)
                  this.$startWorker();
          },
          initialValue: true
      },
      useSoftTabs: {initialValue: true},
      tabSize: {
          set: function(tabSize) {
              if (isNaN(tabSize) || this.$tabSize === tabSize) return;

              this.$modified = true;
              this.$rowLengthCache = [];
              this.$tabSize = tabSize;
              this._signal("changeTabSize");
          },
          initialValue: 4,
          handlesSet: true
      },
      navigateWithinSoftTabs: {initialValue: false},
      overwrite: {
          set: function(val) {this._signal("changeOverwrite");},
          initialValue: false
      },
      newLineMode: {
          set: function(val) {this.doc.setNewLineMode(val);},
          get: function() {return this.doc.getNewLineMode();},
          handlesSet: true
      },
      mode: {
          set: function(val) { this.setMode(val); },
          get: function() { return this.$modeId; }
      }
  });

  exports.EditSession = EditSession;
  });

  ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"], function(acequire, exports, module) {

  var lang = acequire("./lib/lang");
  var oop = acequire("./lib/oop");
  var Range = acequire("./range").Range;

  var Search = function() {
      this.$options = {};
  };

  (function() {
      this.set = function(options) {
          oop.mixin(this.$options, options);
          return this;
      };
      this.getOptions = function() {
          return lang.copyObject(this.$options);
      };
      this.setOptions = function(options) {
          this.$options = options;
      };
      this.find = function(session) {
          var options = this.$options;
          var iterator = this.$matchIterator(session, options);
          if (!iterator)
              return false;

          var firstRange = null;
          iterator.forEach(function(sr, sc, er, ec) {
              firstRange = new Range(sr, sc, er, ec);
              if (sc == ec && options.start && options.start.start
                  && options.skipCurrent != false && firstRange.isEqual(options.start)
              ) {
                  firstRange = null;
                  return false;
              }

              return true;
          });

          return firstRange;
      };
      this.findAll = function(session) {
          var options = this.$options;
          if (!options.needle)
              return [];
          this.$assembleRegExp(options);

          var range = options.range;
          var lines = range
              ? session.getLines(range.start.row, range.end.row)
              : session.doc.getAllLines();

          var ranges = [];
          var re = options.re;
          if (options.$isMultiLine) {
              var len = re.length;
              var maxRow = lines.length - len;
              var prevRange;
              outer: for (var row = re.offset || 0; row <= maxRow; row++) {
                  for (var j = 0; j < len; j++)
                      if (lines[row + j].search(re[j]) == -1)
                          continue outer;
                  
                  var startLine = lines[row];
                  var line = lines[row + len - 1];
                  var startIndex = startLine.length - startLine.match(re[0])[0].length;
                  var endIndex = line.match(re[len - 1])[0].length;
                  
                  if (prevRange && prevRange.end.row === row &&
                      prevRange.end.column > startIndex
                  ) {
                      continue;
                  }
                  ranges.push(prevRange = new Range(
                      row, startIndex, row + len - 1, endIndex
                  ));
                  if (len > 2)
                      row = row + len - 2;
              }
          } else {
              for (var i = 0; i < lines.length; i++) {
                  var matches = lang.getMatchOffsets(lines[i], re);
                  for (var j = 0; j < matches.length; j++) {
                      var match = matches[j];
                      ranges.push(new Range(i, match.offset, i, match.offset + match.length));
                  }
              }
          }

          if (range) {
              var startColumn = range.start.column;
              var endColumn = range.start.column;
              var i = 0, j = ranges.length - 1;
              while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == range.start.row)
                  i++;

              while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == range.end.row)
                  j--;
              
              ranges = ranges.slice(i, j + 1);
              for (i = 0, j = ranges.length; i < j; i++) {
                  ranges[i].start.row += range.start.row;
                  ranges[i].end.row += range.start.row;
              }
          }

          return ranges;
      };
      this.replace = function(input, replacement) {
          var options = this.$options;

          var re = this.$assembleRegExp(options);
          if (options.$isMultiLine)
              return replacement;

          if (!re)
              return;

          var match = re.exec(input);
          if (!match || match[0].length != input.length)
              return null;
          
          replacement = input.replace(re, replacement);
          if (options.preserveCase) {
              replacement = replacement.split("");
              for (var i = Math.min(input.length, input.length); i--; ) {
                  var ch = input[i];
                  if (ch && ch.toLowerCase() != ch)
                      replacement[i] = replacement[i].toUpperCase();
                  else
                      replacement[i] = replacement[i].toLowerCase();
              }
              replacement = replacement.join("");
          }
          
          return replacement;
      };

      this.$assembleRegExp = function(options, $disableFakeMultiline) {
          if (options.needle instanceof RegExp)
              return options.re = options.needle;

          var needle = options.needle;

          if (!options.needle)
              return options.re = false;

          if (!options.regExp)
              needle = lang.escapeRegExp(needle);

          if (options.wholeWord)
              needle = addWordBoundary(needle, options);

          var modifier = options.caseSensitive ? "gm" : "gmi";

          options.$isMultiLine = !$disableFakeMultiline && /[\n\r]/.test(needle);
          if (options.$isMultiLine)
              return options.re = this.$assembleMultilineRegExp(needle, modifier);

          try {
              var re = new RegExp(needle, modifier);
          } catch(e) {
              re = false;
          }
          return options.re = re;
      };

      this.$assembleMultilineRegExp = function(needle, modifier) {
          var parts = needle.replace(/\r\n|\r|\n/g, "$\n^").split("\n");
          var re = [];
          for (var i = 0; i < parts.length; i++) try {
              re.push(new RegExp(parts[i], modifier));
          } catch(e) {
              return false;
          }
          return re;
      };

      this.$matchIterator = function(session, options) {
          var re = this.$assembleRegExp(options);
          if (!re)
              return false;
          var backwards = options.backwards == true;
          var skipCurrent = options.skipCurrent != false;

          var range = options.range;
          var start = options.start;
          if (!start)
              start = range ? range[backwards ? "end" : "start"] : session.selection.getRange();
           
          if (start.start)
              start = start[skipCurrent != backwards ? "end" : "start"];

          var firstRow = range ? range.start.row : 0;
          var lastRow = range ? range.end.row : session.getLength() - 1;

          if (backwards) {
              var forEach = function(callback) {
                  var row = start.row;
                  if (forEachInLine(row, start.column, callback))
                      return;
                  for (row--; row >= firstRow; row--)
                      if (forEachInLine(row, Number.MAX_VALUE, callback))
                          return;
                  if (options.wrap == false)
                      return;
                  for (row = lastRow, firstRow = start.row; row >= firstRow; row--)
                      if (forEachInLine(row, Number.MAX_VALUE, callback))
                          return;
              };
          }
          else {
              var forEach = function(callback) {
                  var row = start.row;
                  if (forEachInLine(row, start.column, callback))
                      return;
                  for (row = row + 1; row <= lastRow; row++)
                      if (forEachInLine(row, 0, callback))
                          return;
                  if (options.wrap == false)
                      return;
                  for (row = firstRow, lastRow = start.row; row <= lastRow; row++)
                      if (forEachInLine(row, 0, callback))
                          return;
              };
          }
          
          if (options.$isMultiLine) {
              var len = re.length;
              var forEachInLine = function(row, offset, callback) {
                  var startRow = backwards ? row - len + 1 : row;
                  if (startRow < 0) return;
                  var line = session.getLine(startRow);
                  var startIndex = line.search(re[0]);
                  if (!backwards && startIndex < offset || startIndex === -1) return;
                  for (var i = 1; i < len; i++) {
                      line = session.getLine(startRow + i);
                      if (line.search(re[i]) == -1)
                          return;
                  }
                  var endIndex = line.match(re[len - 1])[0].length;
                  if (backwards && endIndex > offset) return;
                  if (callback(startRow, startIndex, startRow + len - 1, endIndex))
                      return true;
              };
          }
          else if (backwards) {
              var forEachInLine = function(row, endIndex, callback) {
                  var line = session.getLine(row);
                  var matches = [];
                  var m, last = 0;
                  re.lastIndex = 0;
                  while((m = re.exec(line))) {
                      var length = m[0].length;
                      last = m.index;
                      if (!length) {
                          if (last >= line.length) break;
                          re.lastIndex = last += 1;
                      }
                      if (m.index + length > endIndex)
                          break;
                      matches.push(m.index, length);
                  }
                  for (var i = matches.length - 1; i >= 0; i -= 2) {
                      var column = matches[i - 1];
                      var length = matches[i];
                      if (callback(row, column, row, column + length))
                          return true;
                  }
              };
          }
          else {
              var forEachInLine = function(row, startIndex, callback) {
                  var line = session.getLine(row);
                  var m;
                  var last = startIndex;
                  re.lastIndex = startIndex;
                  while((m = re.exec(line))) {
                      var length = m[0].length;
                      last = m.index;
                      if (callback(row, last, row,last + length))
                          return true;
                      if (!length) {
                          re.lastIndex = last += 1;
                          if (last >= line.length) return false;
                      }
                  }
              };
          }
          return {forEach: forEach};
      };

  }).call(Search.prototype);

  function addWordBoundary(needle, options) {
      function wordBoundary(c) {
          if (/\w/.test(c) || options.regExp) return "\\b";
          return "";
      }
      return wordBoundary(needle[0]) + needle
          + wordBoundary(needle[needle.length - 1]);
  }

  exports.Search = Search;
  });

  ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"], function(acequire, exports, module) {

  var keyUtil = acequire("../lib/keys");
  var useragent = acequire("../lib/useragent");
  var KEY_MODS = keyUtil.KEY_MODS;

  function HashHandler(config, platform) {
      this.platform = platform || (useragent.isMac ? "mac" : "win");
      this.commands = {};
      this.commandKeyBinding = {};
      this.addCommands(config);
      this.$singleCommand = true;
  }

  function MultiHashHandler(config, platform) {
      HashHandler.call(this, config, platform);
      this.$singleCommand = false;
  }

  MultiHashHandler.prototype = HashHandler.prototype;

  (function() {
      

      this.addCommand = function(command) {
          if (this.commands[command.name])
              this.removeCommand(command);

          this.commands[command.name] = command;

          if (command.bindKey)
              this._buildKeyHash(command);
      };

      this.removeCommand = function(command, keepCommand) {
          var name = command && (typeof command === 'string' ? command : command.name);
          command = this.commands[name];
          if (!keepCommand)
              delete this.commands[name];
          var ckb = this.commandKeyBinding;
          for (var keyId in ckb) {
              var cmdGroup = ckb[keyId];
              if (cmdGroup == command) {
                  delete ckb[keyId];
              } else if (Array.isArray(cmdGroup)) {
                  var i = cmdGroup.indexOf(command);
                  if (i != -1) {
                      cmdGroup.splice(i, 1);
                      if (cmdGroup.length == 1)
                          ckb[keyId] = cmdGroup[0];
                  }
              }
          }
      };

      this.bindKey = function(key, command, position) {
          if (typeof key == "object" && key) {
              if (position == undefined)
                  position = key.position;
              key = key[this.platform];
          }
          if (!key)
              return;
          if (typeof command == "function")
              return this.addCommand({exec: command, bindKey: key, name: command.name || key});
          
          key.split("|").forEach(function(keyPart) {
              var chain = "";
              if (keyPart.indexOf(" ") != -1) {
                  var parts = keyPart.split(/\s+/);
                  keyPart = parts.pop();
                  parts.forEach(function(keyPart) {
                      var binding = this.parseKeys(keyPart);
                      var id = KEY_MODS[binding.hashId] + binding.key;
                      chain += (chain ? " " : "") + id;
                      this._addCommandToBinding(chain, "chainKeys");
                  }, this);
                  chain += " ";
              }
              var binding = this.parseKeys(keyPart);
              var id = KEY_MODS[binding.hashId] + binding.key;
              this._addCommandToBinding(chain + id, command, position);
          }, this);
      };
      
      function getPosition(command) {
          return typeof command == "object" && command.bindKey
              && command.bindKey.position
              || (command.isDefault ? -100 : 0);
      }
      this._addCommandToBinding = function(keyId, command, position) {
          var ckb = this.commandKeyBinding, i;
          if (!command) {
              delete ckb[keyId];
          } else if (!ckb[keyId] || this.$singleCommand) {
              ckb[keyId] = command;
          } else {
              if (!Array.isArray(ckb[keyId])) {
                  ckb[keyId] = [ckb[keyId]];
              } else if ((i = ckb[keyId].indexOf(command)) != -1) {
                  ckb[keyId].splice(i, 1);
              }

              if (typeof position != "number") {
                  position = getPosition(command);
              }

              var commands = ckb[keyId];
              for (i = 0; i < commands.length; i++) {
                  var other = commands[i];
                  var otherPos = getPosition(other);
                  if (otherPos > position)
                      break;
              }
              commands.splice(i, 0, command);
          }
      };

      this.addCommands = function(commands) {
          commands && Object.keys(commands).forEach(function(name) {
              var command = commands[name];
              if (!command)
                  return;
              
              if (typeof command === "string")
                  return this.bindKey(command, name);

              if (typeof command === "function")
                  command = { exec: command };

              if (typeof command !== "object")
                  return;

              if (!command.name)
                  command.name = name;

              this.addCommand(command);
          }, this);
      };

      this.removeCommands = function(commands) {
          Object.keys(commands).forEach(function(name) {
              this.removeCommand(commands[name]);
          }, this);
      };

      this.bindKeys = function(keyList) {
          Object.keys(keyList).forEach(function(key) {
              this.bindKey(key, keyList[key]);
          }, this);
      };

      this._buildKeyHash = function(command) {
          this.bindKey(command.bindKey, command);
      };
      this.parseKeys = function(keys) {
          var parts = keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x;});
          var key = parts.pop();

          var keyCode = keyUtil[key];
          if (keyUtil.FUNCTION_KEYS[keyCode])
              key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();
          else if (!parts.length)
              return {key: key, hashId: -1};
          else if (parts.length == 1 && parts[0] == "shift")
              return {key: key.toUpperCase(), hashId: -1};

          var hashId = 0;
          for (var i = parts.length; i--;) {
              var modifier = keyUtil.KEY_MODS[parts[i]];
              if (modifier == null) {
                  if (typeof console != "undefined")
                      console.error("invalid modifier " + parts[i] + " in " + keys);
                  return false;
              }
              hashId |= modifier;
          }
          return {key: key, hashId: hashId};
      };

      this.findKeyCommand = function findKeyCommand(hashId, keyString) {
          var key = KEY_MODS[hashId] + keyString;
          return this.commandKeyBinding[key];
      };

      this.handleKeyboard = function(data, hashId, keyString, keyCode) {
          if (keyCode < 0) return;
          var key = KEY_MODS[hashId] + keyString;
          var command = this.commandKeyBinding[key];
          if (data.$keyChain) {
              data.$keyChain += " " + key;
              command = this.commandKeyBinding[data.$keyChain] || command;
          }
          
          if (command) {
              if (command == "chainKeys" || command[command.length - 1] == "chainKeys") {
                  data.$keyChain = data.$keyChain || key;
                  return {command: "null"};
              }
          }
          
          if (data.$keyChain) {
              if ((!hashId || hashId == 4) && keyString.length == 1)
                  data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input
              else if (hashId == -1 || keyCode > 0)
                  data.$keyChain = ""; // reset keyChain
          }
          return {command: command};
      };
      
      this.getStatusText = function(editor, data) {
          return data.$keyChain || "";
      };

  }).call(HashHandler.prototype);

  exports.HashHandler = HashHandler;
  exports.MultiHashHandler = MultiHashHandler;
  });

  ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var MultiHashHandler = acequire("../keyboard/hash_handler").MultiHashHandler;
  var EventEmitter = acequire("../lib/event_emitter").EventEmitter;

  var CommandManager = function(platform, commands) {
      MultiHashHandler.call(this, commands, platform);
      this.byName = this.commands;
      this.setDefaultHandler("exec", function(e) {
          return e.command.exec(e.editor, e.args || {});
      });
  };

  oop.inherits(CommandManager, MultiHashHandler);

  (function() {

      oop.implement(this, EventEmitter);

      this.exec = function(command, editor, args) {
          if (Array.isArray(command)) {
              for (var i = command.length; i--; ) {
                  if (this.exec(command[i], editor, args)) return true;
              }
              return false;
          }

          if (typeof command === "string")
              command = this.commands[command];

          if (!command)
              return false;

          if (editor && editor.$readOnly && !command.readOnly)
              return false;

          if (command.isAvailable && !command.isAvailable(editor))
              return false;

          var e = {editor: editor, command: command, args: args};
          e.returnValue = this._emit("exec", e);
          this._signal("afterExec", e);

          return e.returnValue === false ? false : true;
      };

      this.toggleRecording = function(editor) {
          if (this.$inReplay)
              return;

          editor && editor._emit("changeStatus");
          if (this.recording) {
              this.macro.pop();
              this.removeEventListener("exec", this.$addCommandToMacro);

              if (!this.macro.length)
                  this.macro = this.oldMacro;

              return this.recording = false;
          }
          if (!this.$addCommandToMacro) {
              this.$addCommandToMacro = function(e) {
                  this.macro.push([e.command, e.args]);
              }.bind(this);
          }

          this.oldMacro = this.macro;
          this.macro = [];
          this.on("exec", this.$addCommandToMacro);
          return this.recording = true;
      };

      this.replay = function(editor) {
          if (this.$inReplay || !this.macro)
              return;

          if (this.recording)
              return this.toggleRecording(editor);

          try {
              this.$inReplay = true;
              this.macro.forEach(function(x) {
                  if (typeof x == "string")
                      this.exec(x, editor);
                  else
                      this.exec(x[0], editor, x[1]);
              }, this);
          } finally {
              this.$inReplay = false;
          }
      };

      this.trimMacro = function(m) {
          return m.map(function(x){
              if (typeof x[0] != "string")
                  x[0] = x[0].name;
              if (!x[1])
                  x = x[0];
              return x;
          });
      };

  }).call(CommandManager.prototype);

  exports.CommandManager = CommandManager;

  });

  ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"], function(acequire, exports, module) {

  var lang = acequire("../lib/lang");
  var config = acequire("../config");
  var Range = acequire("../range").Range;

  function bindKey(win, mac) {
      return {win: win, mac: mac};
  }
  exports.commands = [{
      name: "showSettingsMenu",
      bindKey: bindKey("Ctrl-,", "Command-,"),
      exec: function(editor) {
          config.loadModule("ace/ext/settings_menu", function(module) {
              module.init(editor);
              editor.showSettingsMenu();
          });
      },
      readOnly: true
  }, {
      name: "goToNextError",
      bindKey: bindKey("Alt-E", "F4"),
      exec: function(editor) {
          config.loadModule("ace/ext/error_marker", function(module) {
              module.showErrorMarker(editor, 1);
          });
      },
      scrollIntoView: "animate",
      readOnly: true
  }, {
      name: "goToPreviousError",
      bindKey: bindKey("Alt-Shift-E", "Shift-F4"),
      exec: function(editor) {
          config.loadModule("ace/ext/error_marker", function(module) {
              module.showErrorMarker(editor, -1);
          });
      },
      scrollIntoView: "animate",
      readOnly: true
  }, {
      name: "selectall",
      bindKey: bindKey("Ctrl-A", "Command-A"),
      exec: function(editor) { editor.selectAll(); },
      readOnly: true
  }, {
      name: "centerselection",
      bindKey: bindKey(null, "Ctrl-L"),
      exec: function(editor) { editor.centerSelection(); },
      readOnly: true
  }, {
      name: "gotoline",
      bindKey: bindKey("Ctrl-L", "Command-L"),
      exec: function(editor) {
          var line = parseInt(prompt("Enter line number:"), 10);
          if (!isNaN(line)) {
              editor.gotoLine(line);
          }
      },
      readOnly: true
  }, {
      name: "fold",
      bindKey: bindKey("Alt-L|Ctrl-F1", "Command-Alt-L|Command-F1"),
      exec: function(editor) { editor.session.toggleFold(false); },
      multiSelectAction: "forEach",
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "unfold",
      bindKey: bindKey("Alt-Shift-L|Ctrl-Shift-F1", "Command-Alt-Shift-L|Command-Shift-F1"),
      exec: function(editor) { editor.session.toggleFold(true); },
      multiSelectAction: "forEach",
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "toggleFoldWidget",
      bindKey: bindKey("F2", "F2"),
      exec: function(editor) { editor.session.toggleFoldWidget(); },
      multiSelectAction: "forEach",
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "toggleParentFoldWidget",
      bindKey: bindKey("Alt-F2", "Alt-F2"),
      exec: function(editor) { editor.session.toggleFoldWidget(true); },
      multiSelectAction: "forEach",
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "foldall",
      bindKey: bindKey(null, "Ctrl-Command-Option-0"),
      exec: function(editor) { editor.session.foldAll(); },
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "foldOther",
      bindKey: bindKey("Alt-0", "Command-Option-0"),
      exec: function(editor) { 
          editor.session.foldAll();
          editor.session.unfold(editor.selection.getAllRanges());
      },
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "unfoldall",
      bindKey: bindKey("Alt-Shift-0", "Command-Option-Shift-0"),
      exec: function(editor) { editor.session.unfold(); },
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "findnext",
      bindKey: bindKey("Ctrl-K", "Command-G"),
      exec: function(editor) { editor.findNext(); },
      multiSelectAction: "forEach",
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "findprevious",
      bindKey: bindKey("Ctrl-Shift-K", "Command-Shift-G"),
      exec: function(editor) { editor.findPrevious(); },
      multiSelectAction: "forEach",
      scrollIntoView: "center",
      readOnly: true
  }, {
      name: "selectOrFindNext",
      bindKey: bindKey("Alt-K", "Ctrl-G"),
      exec: function(editor) {
          if (editor.selection.isEmpty())
              editor.selection.selectWord();
          else
              editor.findNext(); 
      },
      readOnly: true
  }, {
      name: "selectOrFindPrevious",
      bindKey: bindKey("Alt-Shift-K", "Ctrl-Shift-G"),
      exec: function(editor) { 
          if (editor.selection.isEmpty())
              editor.selection.selectWord();
          else
              editor.findPrevious();
      },
      readOnly: true
  }, {
      name: "find",
      bindKey: bindKey("Ctrl-F", "Command-F"),
      exec: function(editor) {
          config.loadModule("ace/ext/searchbox", function(e) {e.Search(editor);});
      },
      readOnly: true
  }, {
      name: "overwrite",
      bindKey: "Insert",
      exec: function(editor) { editor.toggleOverwrite(); },
      readOnly: true
  }, {
      name: "selecttostart",
      bindKey: bindKey("Ctrl-Shift-Home", "Command-Shift-Home|Command-Shift-Up"),
      exec: function(editor) { editor.getSelection().selectFileStart(); },
      multiSelectAction: "forEach",
      readOnly: true,
      scrollIntoView: "animate",
      aceCommandGroup: "fileJump"
  }, {
      name: "gotostart",
      bindKey: bindKey("Ctrl-Home", "Command-Home|Command-Up"),
      exec: function(editor) { editor.navigateFileStart(); },
      multiSelectAction: "forEach",
      readOnly: true,
      scrollIntoView: "animate",
      aceCommandGroup: "fileJump"
  }, {
      name: "selectup",
      bindKey: bindKey("Shift-Up", "Shift-Up|Ctrl-Shift-P"),
      exec: function(editor) { editor.getSelection().selectUp(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "golineup",
      bindKey: bindKey("Up", "Up|Ctrl-P"),
      exec: function(editor, args) { editor.navigateUp(args.times); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selecttoend",
      bindKey: bindKey("Ctrl-Shift-End", "Command-Shift-End|Command-Shift-Down"),
      exec: function(editor) { editor.getSelection().selectFileEnd(); },
      multiSelectAction: "forEach",
      readOnly: true,
      scrollIntoView: "animate",
      aceCommandGroup: "fileJump"
  }, {
      name: "gotoend",
      bindKey: bindKey("Ctrl-End", "Command-End|Command-Down"),
      exec: function(editor) { editor.navigateFileEnd(); },
      multiSelectAction: "forEach",
      readOnly: true,
      scrollIntoView: "animate",
      aceCommandGroup: "fileJump"
  }, {
      name: "selectdown",
      bindKey: bindKey("Shift-Down", "Shift-Down|Ctrl-Shift-N"),
      exec: function(editor) { editor.getSelection().selectDown(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "golinedown",
      bindKey: bindKey("Down", "Down|Ctrl-N"),
      exec: function(editor, args) { editor.navigateDown(args.times); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectwordleft",
      bindKey: bindKey("Ctrl-Shift-Left", "Option-Shift-Left"),
      exec: function(editor) { editor.getSelection().selectWordLeft(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "gotowordleft",
      bindKey: bindKey("Ctrl-Left", "Option-Left"),
      exec: function(editor) { editor.navigateWordLeft(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selecttolinestart",
      bindKey: bindKey("Alt-Shift-Left", "Command-Shift-Left|Ctrl-Shift-A"),
      exec: function(editor) { editor.getSelection().selectLineStart(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "gotolinestart",
      bindKey: bindKey("Alt-Left|Home", "Command-Left|Home|Ctrl-A"),
      exec: function(editor) { editor.navigateLineStart(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectleft",
      bindKey: bindKey("Shift-Left", "Shift-Left|Ctrl-Shift-B"),
      exec: function(editor) { editor.getSelection().selectLeft(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "gotoleft",
      bindKey: bindKey("Left", "Left|Ctrl-B"),
      exec: function(editor, args) { editor.navigateLeft(args.times); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectwordright",
      bindKey: bindKey("Ctrl-Shift-Right", "Option-Shift-Right"),
      exec: function(editor) { editor.getSelection().selectWordRight(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "gotowordright",
      bindKey: bindKey("Ctrl-Right", "Option-Right"),
      exec: function(editor) { editor.navigateWordRight(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selecttolineend",
      bindKey: bindKey("Alt-Shift-Right", "Command-Shift-Right|Shift-End|Ctrl-Shift-E"),
      exec: function(editor) { editor.getSelection().selectLineEnd(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "gotolineend",
      bindKey: bindKey("Alt-Right|End", "Command-Right|End|Ctrl-E"),
      exec: function(editor) { editor.navigateLineEnd(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectright",
      bindKey: bindKey("Shift-Right", "Shift-Right"),
      exec: function(editor) { editor.getSelection().selectRight(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "gotoright",
      bindKey: bindKey("Right", "Right|Ctrl-F"),
      exec: function(editor, args) { editor.navigateRight(args.times); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectpagedown",
      bindKey: "Shift-PageDown",
      exec: function(editor) { editor.selectPageDown(); },
      readOnly: true
  }, {
      name: "pagedown",
      bindKey: bindKey(null, "Option-PageDown"),
      exec: function(editor) { editor.scrollPageDown(); },
      readOnly: true
  }, {
      name: "gotopagedown",
      bindKey: bindKey("PageDown", "PageDown|Ctrl-V"),
      exec: function(editor) { editor.gotoPageDown(); },
      readOnly: true
  }, {
      name: "selectpageup",
      bindKey: "Shift-PageUp",
      exec: function(editor) { editor.selectPageUp(); },
      readOnly: true
  }, {
      name: "pageup",
      bindKey: bindKey(null, "Option-PageUp"),
      exec: function(editor) { editor.scrollPageUp(); },
      readOnly: true
  }, {
      name: "gotopageup",
      bindKey: "PageUp",
      exec: function(editor) { editor.gotoPageUp(); },
      readOnly: true
  }, {
      name: "scrollup",
      bindKey: bindKey("Ctrl-Up", null),
      exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },
      readOnly: true
  }, {
      name: "scrolldown",
      bindKey: bindKey("Ctrl-Down", null),
      exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },
      readOnly: true
  }, {
      name: "selectlinestart",
      bindKey: "Shift-Home",
      exec: function(editor) { editor.getSelection().selectLineStart(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectlineend",
      bindKey: "Shift-End",
      exec: function(editor) { editor.getSelection().selectLineEnd(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "togglerecording",
      bindKey: bindKey("Ctrl-Alt-E", "Command-Option-E"),
      exec: function(editor) { editor.commands.toggleRecording(editor); },
      readOnly: true
  }, {
      name: "replaymacro",
      bindKey: bindKey("Ctrl-Shift-E", "Command-Shift-E"),
      exec: function(editor) { editor.commands.replay(editor); },
      readOnly: true
  }, {
      name: "jumptomatching",
      bindKey: bindKey("Ctrl-P", "Ctrl-P"),
      exec: function(editor) { editor.jumpToMatching(); },
      multiSelectAction: "forEach",
      scrollIntoView: "animate",
      readOnly: true
  }, {
      name: "selecttomatching",
      bindKey: bindKey("Ctrl-Shift-P", "Ctrl-Shift-P"),
      exec: function(editor) { editor.jumpToMatching(true); },
      multiSelectAction: "forEach",
      scrollIntoView: "animate",
      readOnly: true
  }, {
      name: "expandToMatching",
      bindKey: bindKey("Ctrl-Shift-M", "Ctrl-Shift-M"),
      exec: function(editor) { editor.jumpToMatching(true, true); },
      multiSelectAction: "forEach",
      scrollIntoView: "animate",
      readOnly: true
  }, {
      name: "passKeysToBrowser",
      bindKey: bindKey(null, null),
      exec: function() {},
      passEvent: true,
      readOnly: true
  }, {
      name: "copy",
      exec: function(editor) {
      },
      readOnly: true
  },
  {
      name: "cut",
      exec: function(editor) {
          var range = editor.getSelectionRange();
          editor._emit("cut", range);

          if (!editor.selection.isEmpty()) {
              editor.session.remove(range);
              editor.clearSelection();
          }
      },
      scrollIntoView: "cursor",
      multiSelectAction: "forEach"
  }, {
      name: "paste",
      exec: function(editor, args) {
          editor.$handlePaste(args);
      },
      scrollIntoView: "cursor"
  }, {
      name: "removeline",
      bindKey: bindKey("Ctrl-D", "Command-D"),
      exec: function(editor) { editor.removeLines(); },
      scrollIntoView: "cursor",
      multiSelectAction: "forEachLine"
  }, {
      name: "duplicateSelection",
      bindKey: bindKey("Ctrl-Shift-D", "Command-Shift-D"),
      exec: function(editor) { editor.duplicateSelection(); },
      scrollIntoView: "cursor",
      multiSelectAction: "forEach"
  }, {
      name: "sortlines",
      bindKey: bindKey("Ctrl-Alt-S", "Command-Alt-S"),
      exec: function(editor) { editor.sortLines(); },
      scrollIntoView: "selection",
      multiSelectAction: "forEachLine"
  }, {
      name: "togglecomment",
      bindKey: bindKey("Ctrl-/", "Command-/"),
      exec: function(editor) { editor.toggleCommentLines(); },
      multiSelectAction: "forEachLine",
      scrollIntoView: "selectionPart"
  }, {
      name: "toggleBlockComment",
      bindKey: bindKey("Ctrl-Shift-/", "Command-Shift-/"),
      exec: function(editor) { editor.toggleBlockComment(); },
      multiSelectAction: "forEach",
      scrollIntoView: "selectionPart"
  }, {
      name: "modifyNumberUp",
      bindKey: bindKey("Ctrl-Shift-Up", "Alt-Shift-Up"),
      exec: function(editor) { editor.modifyNumber(1); },
      scrollIntoView: "cursor",
      multiSelectAction: "forEach"
  }, {
      name: "modifyNumberDown",
      bindKey: bindKey("Ctrl-Shift-Down", "Alt-Shift-Down"),
      exec: function(editor) { editor.modifyNumber(-1); },
      scrollIntoView: "cursor",
      multiSelectAction: "forEach"
  }, {
      name: "replace",
      bindKey: bindKey("Ctrl-H", "Command-Option-F"),
      exec: function(editor) {
          config.loadModule("ace/ext/searchbox", function(e) {e.Search(editor, true);});
      }
  }, {
      name: "undo",
      bindKey: bindKey("Ctrl-Z", "Command-Z"),
      exec: function(editor) { editor.undo(); }
  }, {
      name: "redo",
      bindKey: bindKey("Ctrl-Shift-Z|Ctrl-Y", "Command-Shift-Z|Command-Y"),
      exec: function(editor) { editor.redo(); }
  }, {
      name: "copylinesup",
      bindKey: bindKey("Alt-Shift-Up", "Command-Option-Up"),
      exec: function(editor) { editor.copyLinesUp(); },
      scrollIntoView: "cursor"
  }, {
      name: "movelinesup",
      bindKey: bindKey("Alt-Up", "Option-Up"),
      exec: function(editor) { editor.moveLinesUp(); },
      scrollIntoView: "cursor"
  }, {
      name: "copylinesdown",
      bindKey: bindKey("Alt-Shift-Down", "Command-Option-Down"),
      exec: function(editor) { editor.copyLinesDown(); },
      scrollIntoView: "cursor"
  }, {
      name: "movelinesdown",
      bindKey: bindKey("Alt-Down", "Option-Down"),
      exec: function(editor) { editor.moveLinesDown(); },
      scrollIntoView: "cursor"
  }, {
      name: "del",
      bindKey: bindKey("Delete", "Delete|Ctrl-D|Shift-Delete"),
      exec: function(editor) { editor.remove("right"); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "backspace",
      bindKey: bindKey(
          "Shift-Backspace|Backspace",
          "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"
      ),
      exec: function(editor) { editor.remove("left"); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "cut_or_delete",
      bindKey: bindKey("Shift-Delete", null),
      exec: function(editor) { 
          if (editor.selection.isEmpty()) {
              editor.remove("left");
          } else {
              return false;
          }
      },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "removetolinestart",
      bindKey: bindKey("Alt-Backspace", "Command-Backspace"),
      exec: function(editor) { editor.removeToLineStart(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "removetolineend",
      bindKey: bindKey("Alt-Delete", "Ctrl-K|Command-Delete"),
      exec: function(editor) { editor.removeToLineEnd(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "removetolinestarthard",
      bindKey: bindKey("Ctrl-Shift-Backspace", null),
      exec: function(editor) {
          var range = editor.selection.getRange();
          range.start.column = 0;
          editor.session.remove(range);
      },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "removetolineendhard",
      bindKey: bindKey("Ctrl-Shift-Delete", null),
      exec: function(editor) {
          var range = editor.selection.getRange();
          range.end.column = Number.MAX_VALUE;
          editor.session.remove(range);
      },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "removewordleft",
      bindKey: bindKey("Ctrl-Backspace", "Alt-Backspace|Ctrl-Alt-Backspace"),
      exec: function(editor) { editor.removeWordLeft(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "removewordright",
      bindKey: bindKey("Ctrl-Delete", "Alt-Delete"),
      exec: function(editor) { editor.removeWordRight(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "outdent",
      bindKey: bindKey("Shift-Tab", "Shift-Tab"),
      exec: function(editor) { editor.blockOutdent(); },
      multiSelectAction: "forEach",
      scrollIntoView: "selectionPart"
  }, {
      name: "indent",
      bindKey: bindKey("Tab", "Tab"),
      exec: function(editor) { editor.indent(); },
      multiSelectAction: "forEach",
      scrollIntoView: "selectionPart"
  }, {
      name: "blockoutdent",
      bindKey: bindKey("Ctrl-[", "Ctrl-["),
      exec: function(editor) { editor.blockOutdent(); },
      multiSelectAction: "forEachLine",
      scrollIntoView: "selectionPart"
  }, {
      name: "blockindent",
      bindKey: bindKey("Ctrl-]", "Ctrl-]"),
      exec: function(editor) { editor.blockIndent(); },
      multiSelectAction: "forEachLine",
      scrollIntoView: "selectionPart"
  }, {
      name: "insertstring",
      exec: function(editor, str) { editor.insert(str); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "inserttext",
      exec: function(editor, args) {
          editor.insert(lang.stringRepeat(args.text  || "", args.times || 1));
      },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "splitline",
      bindKey: bindKey(null, "Ctrl-O"),
      exec: function(editor) { editor.splitLine(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "transposeletters",
      bindKey: bindKey("Alt-Shift-X", "Ctrl-T"),
      exec: function(editor) { editor.transposeLetters(); },
      multiSelectAction: function(editor) {editor.transposeSelections(1); },
      scrollIntoView: "cursor"
  }, {
      name: "touppercase",
      bindKey: bindKey("Ctrl-U", "Ctrl-U"),
      exec: function(editor) { editor.toUpperCase(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "tolowercase",
      bindKey: bindKey("Ctrl-Shift-U", "Ctrl-Shift-U"),
      exec: function(editor) { editor.toLowerCase(); },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor"
  }, {
      name: "expandtoline",
      bindKey: bindKey("Ctrl-Shift-L", "Command-Shift-L"),
      exec: function(editor) {
          var range = editor.selection.getRange();

          range.start.column = range.end.column = 0;
          range.end.row++;
          editor.selection.setRange(range, false);
      },
      multiSelectAction: "forEach",
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "joinlines",
      bindKey: bindKey(null, null),
      exec: function(editor) {
          var isBackwards = editor.selection.isBackwards();
          var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();
          var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();
          var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;
          var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());
          var selectedCount = selectedText.replace(/\n\s*/, " ").length;
          var insertLine = editor.session.doc.getLine(selectionStart.row);

          for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {
              var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));
              if (curLine.length !== 0) {
                  curLine = " " + curLine;
              }
              insertLine += curLine;
          }

          if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {
              insertLine += editor.session.doc.getNewLineCharacter();
          }

          editor.clearSelection();
          editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);

          if (selectedCount > 0) {
              editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);
              editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);
          } else {
              firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;
              editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);
          }
      },
      multiSelectAction: "forEach",
      readOnly: true
  }, {
      name: "invertSelection",
      bindKey: bindKey(null, null),
      exec: function(editor) {
          var endRow = editor.session.doc.getLength() - 1;
          var endCol = editor.session.doc.getLine(endRow).length;
          var ranges = editor.selection.rangeList.ranges;
          var newRanges = [];
          if (ranges.length < 1) {
              ranges = [editor.selection.getRange()];
          }

          for (var i = 0; i < ranges.length; i++) {
              if (i == (ranges.length - 1)) {
                  if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {
                      newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));
                  }
              }

              if (i === 0) {
                  if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {
                      newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));
                  }
              } else {
                  newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));
              }
          }

          editor.exitMultiSelectMode();
          editor.clearSelection();

          for(var i = 0; i < newRanges.length; i++) {
              editor.selection.addRange(newRanges[i], false);
          }
      },
      readOnly: true,
      scrollIntoView: "none"
  }];

  });

  ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"], function(acequire, exports, module) {

  acequire("./lib/fixoldbrowsers");

  var oop = acequire("./lib/oop");
  var dom = acequire("./lib/dom");
  var lang = acequire("./lib/lang");
  var useragent = acequire("./lib/useragent");
  var TextInput = acequire("./keyboard/textinput").TextInput;
  var MouseHandler = acequire("./mouse/mouse_handler").MouseHandler;
  var FoldHandler = acequire("./mouse/fold_handler").FoldHandler;
  var KeyBinding = acequire("./keyboard/keybinding").KeyBinding;
  var EditSession = acequire("./edit_session").EditSession;
  var Search = acequire("./search").Search;
  var Range = acequire("./range").Range;
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var CommandManager = acequire("./commands/command_manager").CommandManager;
  var defaultCommands = acequire("./commands/default_commands").commands;
  var config = acequire("./config");
  var TokenIterator = acequire("./token_iterator").TokenIterator;
  var Editor = function(renderer, session) {
      var container = renderer.getContainerElement();
      this.container = container;
      this.renderer = renderer;
      this.id = "editor" + (++Editor.$uid);

      this.commands = new CommandManager(useragent.isMac ? "mac" : "win", defaultCommands);
      if (typeof document == "object") {
          this.textInput  = new TextInput(renderer.getTextAreaContainer(), this);
          this.renderer.textarea = this.textInput.getElement();
          this.$mouseHandler = new MouseHandler(this);
          new FoldHandler(this);
      }

      this.keyBinding = new KeyBinding(this);

      this.$blockScrolling = 0;
      this.$search = new Search().set({
          wrap: true
      });

      this.$historyTracker = this.$historyTracker.bind(this);
      this.commands.on("exec", this.$historyTracker);

      this.$initOperationListeners();
      
      this._$emitInputEvent = lang.delayedCall(function() {
          this._signal("input", {});
          if (this.session && this.session.bgTokenizer)
              this.session.bgTokenizer.scheduleStart();
      }.bind(this));
      
      this.on("change", function(_, _self) {
          _self._$emitInputEvent.schedule(31);
      });

      this.setSession(session || new EditSession(""));
      config.resetOptions(this);
      config._signal("editor", this);
  };

  Editor.$uid = 0;

  (function(){

      oop.implement(this, EventEmitter);

      this.$initOperationListeners = function() {

          this.selections = [];
          this.commands.on("exec", this.startOperation.bind(this), true);
          this.commands.on("afterExec", this.endOperation.bind(this), true);

          this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this));

          this.on("change", function() {
              this.curOp || this.startOperation();
              this.curOp.docChanged = true;
          }.bind(this), true);

          this.on("changeSelection", function() {
              this.curOp || this.startOperation();
              this.curOp.selectionChanged = true;
          }.bind(this), true);
      };

      this.curOp = null;
      this.prevOp = {};
      this.startOperation = function(commadEvent) {
          if (this.curOp) {
              if (!commadEvent || this.curOp.command)
                  return;
              this.prevOp = this.curOp;
          }
          if (!commadEvent) {
              this.previousCommand = null;
              commadEvent = {};
          }

          this.$opResetTimer.schedule();
          this.curOp = {
              command: commadEvent.command || {},
              args: commadEvent.args,
              scrollTop: this.renderer.scrollTop
          };
          if (this.curOp.command.name && this.curOp.command.scrollIntoView !== undefined)
              this.$blockScrolling++;
      };

      this.endOperation = function(e) {
          if (this.curOp) {
              if (e && e.returnValue === false)
                  return this.curOp = null;
              this._signal("beforeEndOperation");
              var command = this.curOp.command;
              if (command.name && this.$blockScrolling > 0)
                  this.$blockScrolling--;
              var scrollIntoView = command && command.scrollIntoView;
              if (scrollIntoView) {
                  switch (scrollIntoView) {
                      case "center-animate":
                          scrollIntoView = "animate";
                      case "center":
                          this.renderer.scrollCursorIntoView(null, 0.5);
                          break;
                      case "animate":
                      case "cursor":
                          this.renderer.scrollCursorIntoView();
                          break;
                      case "selectionPart":
                          var range = this.selection.getRange();
                          var config = this.renderer.layerConfig;
                          if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {
                              this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);
                          }
                          break;
                  }
                  if (scrollIntoView == "animate")
                      this.renderer.animateScrolling(this.curOp.scrollTop);
              }
              
              this.prevOp = this.curOp;
              this.curOp = null;
          }
      };
      this.$mergeableCommands = ["backspace", "del", "insertstring"];
      this.$historyTracker = function(e) {
          if (!this.$mergeUndoDeltas)
              return;

          var prev = this.prevOp;
          var mergeableCommands = this.$mergeableCommands;
          var shouldMerge = prev.command && (e.command.name == prev.command.name);
          if (e.command.name == "insertstring") {
              var text = e.args;
              if (this.mergeNextCommand === undefined)
                  this.mergeNextCommand = true;

              shouldMerge = shouldMerge
                  && this.mergeNextCommand // previous command allows to coalesce with
                  && (!/\s/.test(text) || /\s/.test(prev.args)); // previous insertion was of same type

              this.mergeNextCommand = true;
          } else {
              shouldMerge = shouldMerge
                  && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable
          }

          if (
              this.$mergeUndoDeltas != "always"
              && Date.now() - this.sequenceStartTime > 2000
          ) {
              shouldMerge = false; // the sequence is too long
          }

          if (shouldMerge)
              this.session.mergeUndoDeltas = true;
          else if (mergeableCommands.indexOf(e.command.name) !== -1)
              this.sequenceStartTime = Date.now();
      };
      this.setKeyboardHandler = function(keyboardHandler, cb) {
          if (keyboardHandler && typeof keyboardHandler === "string") {
              this.$keybindingId = keyboardHandler;
              var _self = this;
              config.loadModule(["keybinding", keyboardHandler], function(module) {
                  if (_self.$keybindingId == keyboardHandler)
                      _self.keyBinding.setKeyboardHandler(module && module.handler);
                  cb && cb();
              });
          } else {
              this.$keybindingId = null;
              this.keyBinding.setKeyboardHandler(keyboardHandler);
              cb && cb();
          }
      };
      this.getKeyboardHandler = function() {
          return this.keyBinding.getKeyboardHandler();
      };
      this.setSession = function(session) {
          if (this.session == session)
              return;
          if (this.curOp) this.endOperation();
          this.curOp = {};

          var oldSession = this.session;
          if (oldSession) {
              this.session.off("change", this.$onDocumentChange);
              this.session.off("changeMode", this.$onChangeMode);
              this.session.off("tokenizerUpdate", this.$onTokenizerUpdate);
              this.session.off("changeTabSize", this.$onChangeTabSize);
              this.session.off("changeWrapLimit", this.$onChangeWrapLimit);
              this.session.off("changeWrapMode", this.$onChangeWrapMode);
              this.session.off("changeFold", this.$onChangeFold);
              this.session.off("changeFrontMarker", this.$onChangeFrontMarker);
              this.session.off("changeBackMarker", this.$onChangeBackMarker);
              this.session.off("changeBreakpoint", this.$onChangeBreakpoint);
              this.session.off("changeAnnotation", this.$onChangeAnnotation);
              this.session.off("changeOverwrite", this.$onCursorChange);
              this.session.off("changeScrollTop", this.$onScrollTopChange);
              this.session.off("changeScrollLeft", this.$onScrollLeftChange);

              var selection = this.session.getSelection();
              selection.off("changeCursor", this.$onCursorChange);
              selection.off("changeSelection", this.$onSelectionChange);
          }

          this.session = session;
          if (session) {
              this.$onDocumentChange = this.onDocumentChange.bind(this);
              session.on("change", this.$onDocumentChange);
              this.renderer.setSession(session);
      
              this.$onChangeMode = this.onChangeMode.bind(this);
              session.on("changeMode", this.$onChangeMode);
      
              this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);
              session.on("tokenizerUpdate", this.$onTokenizerUpdate);
      
              this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);
              session.on("changeTabSize", this.$onChangeTabSize);
      
              this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);
              session.on("changeWrapLimit", this.$onChangeWrapLimit);
      
              this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);
              session.on("changeWrapMode", this.$onChangeWrapMode);
      
              this.$onChangeFold = this.onChangeFold.bind(this);
              session.on("changeFold", this.$onChangeFold);
      
              this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);
              this.session.on("changeFrontMarker", this.$onChangeFrontMarker);
      
              this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);
              this.session.on("changeBackMarker", this.$onChangeBackMarker);
      
              this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);
              this.session.on("changeBreakpoint", this.$onChangeBreakpoint);
      
              this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);
              this.session.on("changeAnnotation", this.$onChangeAnnotation);
      
              this.$onCursorChange = this.onCursorChange.bind(this);
              this.session.on("changeOverwrite", this.$onCursorChange);
      
              this.$onScrollTopChange = this.onScrollTopChange.bind(this);
              this.session.on("changeScrollTop", this.$onScrollTopChange);
      
              this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);
              this.session.on("changeScrollLeft", this.$onScrollLeftChange);
      
              this.selection = session.getSelection();
              this.selection.on("changeCursor", this.$onCursorChange);
      
              this.$onSelectionChange = this.onSelectionChange.bind(this);
              this.selection.on("changeSelection", this.$onSelectionChange);
      
              this.onChangeMode();
      
              this.$blockScrolling += 1;
              this.onCursorChange();
              this.$blockScrolling -= 1;
      
              this.onScrollTopChange();
              this.onScrollLeftChange();
              this.onSelectionChange();
              this.onChangeFrontMarker();
              this.onChangeBackMarker();
              this.onChangeBreakpoint();
              this.onChangeAnnotation();
              this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();
              this.renderer.updateFull();
          } else {
              this.selection = null;
              this.renderer.setSession(session);
          }

          this._signal("changeSession", {
              session: session,
              oldSession: oldSession
          });
          
          this.curOp = null;
          
          oldSession && oldSession._signal("changeEditor", {oldEditor: this});
          session && session._signal("changeEditor", {editor: this});

          if (session && session.bgTokenizer)
              session.bgTokenizer.scheduleStart();
      };
      this.getSession = function() {
          return this.session;
      };
      this.setValue = function(val, cursorPos) {
          this.session.doc.setValue(val);

          if (!cursorPos)
              this.selectAll();
          else if (cursorPos == 1)
              this.navigateFileEnd();
          else if (cursorPos == -1)
              this.navigateFileStart();

          return val;
      };
      this.getValue = function() {
          return this.session.getValue();
      };
      this.getSelection = function() {
          return this.selection;
      };
      this.resize = function(force) {
          this.renderer.onResize(force);
      };
      this.setTheme = function(theme, cb) {
          this.renderer.setTheme(theme, cb);
      };
      this.getTheme = function() {
          return this.renderer.getTheme();
      };
      this.setStyle = function(style) {
          this.renderer.setStyle(style);
      };
      this.unsetStyle = function(style) {
          this.renderer.unsetStyle(style);
      };
      this.getFontSize = function () {
          return this.getOption("fontSize") ||
             dom.computedStyle(this.container, "fontSize");
      };
      this.setFontSize = function(size) {
          this.setOption("fontSize", size);
      };

      this.$highlightBrackets = function() {
          if (this.session.$bracketHighlight) {
              this.session.removeMarker(this.session.$bracketHighlight);
              this.session.$bracketHighlight = null;
          }

          if (this.$highlightPending) {
              return;
          }
          var self = this;
          this.$highlightPending = true;
          setTimeout(function() {
              self.$highlightPending = false;
              var session = self.session;
              if (!session || !session.bgTokenizer) return;
              var pos = session.findMatchingBracket(self.getCursorPosition());
              if (pos) {
                  var range = new Range(pos.row, pos.column, pos.row, pos.column + 1);
              } else if (session.$mode.getMatching) {
                  var range = session.$mode.getMatching(self.session);
              }
              if (range)
                  session.$bracketHighlight = session.addMarker(range, "ace_bracket", "text");
          }, 50);
      };
      this.$highlightTags = function() {
          if (this.$highlightTagPending)
              return;
          var self = this;
          this.$highlightTagPending = true;
          setTimeout(function() {
              self.$highlightTagPending = false;
              
              var session = self.session;
              if (!session || !session.bgTokenizer) return;
              
              var pos = self.getCursorPosition();
              var iterator = new TokenIterator(self.session, pos.row, pos.column);
              var token = iterator.getCurrentToken();
              
              if (!token || !/\b(?:tag-open|tag-name)/.test(token.type)) {
                  session.removeMarker(session.$tagHighlight);
                  session.$tagHighlight = null;
                  return;
              }
              
              if (token.type.indexOf("tag-open") != -1) {
                  token = iterator.stepForward();
                  if (!token)
                      return;
              }
              
              var tag = token.value;
              var depth = 0;
              var prevToken = iterator.stepBackward();
              
              if (prevToken.value == '<'){
                  do {
                      prevToken = token;
                      token = iterator.stepForward();
                      
                      if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {
                          if (prevToken.value === '<'){
                              depth++;
                          } else if (prevToken.value === '</'){
                              depth--;
                          }
                      }
                      
                  } while (token && depth >= 0);
              } else {
                  do {
                      token = prevToken;
                      prevToken = iterator.stepBackward();
                      
                      if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {
                          if (prevToken.value === '<') {
                              depth++;
                          } else if (prevToken.value === '</') {
                              depth--;
                          }
                      }
                  } while (prevToken && depth <= 0);
                  iterator.stepForward();
              }
              
              if (!token) {
                  session.removeMarker(session.$tagHighlight);
                  session.$tagHighlight = null;
                  return;
              }
              
              var row = iterator.getCurrentTokenRow();
              var column = iterator.getCurrentTokenColumn();
              var range = new Range(row, column, row, column+token.value.length);
              var sbm = session.$backMarkers[session.$tagHighlight];
              if (session.$tagHighlight && sbm != undefined && range.compareRange(sbm.range) !== 0) {
                  session.removeMarker(session.$tagHighlight);
                  session.$tagHighlight = null;
              }
              
              if (range && !session.$tagHighlight)
                  session.$tagHighlight = session.addMarker(range, "ace_bracket", "text");
          }, 50);
      };
      this.focus = function() {
          var _self = this;
          setTimeout(function() {
              _self.textInput.focus();
          });
          this.textInput.focus();
      };
      this.isFocused = function() {
          return this.textInput.isFocused();
      };
      this.blur = function() {
          this.textInput.blur();
      };
      this.onFocus = function(e) {
          if (this.$isFocused)
              return;
          this.$isFocused = true;
          this.renderer.showCursor();
          this.renderer.visualizeFocus();
          this._emit("focus", e);
      };
      this.onBlur = function(e) {
          if (!this.$isFocused)
              return;
          this.$isFocused = false;
          this.renderer.hideCursor();
          this.renderer.visualizeBlur();
          this._emit("blur", e);
      };

      this.$cursorChange = function() {
          this.renderer.updateCursor();
      };
      this.onDocumentChange = function(delta) {
          var wrap = this.session.$useWrapMode;
          var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);
          this.renderer.updateLines(delta.start.row, lastRow, wrap);

          this._signal("change", delta);
          this.$cursorChange();
          this.$updateHighlightActiveLine();
      };

      this.onTokenizerUpdate = function(e) {
          var rows = e.data;
          this.renderer.updateLines(rows.first, rows.last);
      };


      this.onScrollTopChange = function() {
          this.renderer.scrollToY(this.session.getScrollTop());
      };

      this.onScrollLeftChange = function() {
          this.renderer.scrollToX(this.session.getScrollLeft());
      };
      this.onCursorChange = function() {
          this.$cursorChange();

          if (!this.$blockScrolling) {
              config.warn("Automatically scrolling cursor into view after selection change",
                  "this will be disabled in the next version",
                  "set editor.$blockScrolling = Infinity to disable this message"
              );
              this.renderer.scrollCursorIntoView();
          }

          this.$highlightBrackets();
          this.$highlightTags();
          this.$updateHighlightActiveLine();
          this._signal("changeSelection");
      };

      this.$updateHighlightActiveLine = function() {
          var session = this.getSession();

          var highlight;
          if (this.$highlightActiveLine) {
              if ((this.$selectionStyle != "line" || !this.selection.isMultiLine()))
                  highlight = this.getCursorPosition();
              if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))
                  highlight = false;
          }

          if (session.$highlightLineMarker && !highlight) {
              session.removeMarker(session.$highlightLineMarker.id);
              session.$highlightLineMarker = null;
          } else if (!session.$highlightLineMarker && highlight) {
              var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);
              range.id = session.addMarker(range, "ace_active-line", "screenLine");
              session.$highlightLineMarker = range;
          } else if (highlight) {
              session.$highlightLineMarker.start.row = highlight.row;
              session.$highlightLineMarker.end.row = highlight.row;
              session.$highlightLineMarker.start.column = highlight.column;
              session._signal("changeBackMarker");
          }
      };

      this.onSelectionChange = function(e) {
          var session = this.session;

          if (session.$selectionMarker) {
              session.removeMarker(session.$selectionMarker);
          }
          session.$selectionMarker = null;

          if (!this.selection.isEmpty()) {
              var range = this.selection.getRange();
              var style = this.getSelectionStyle();
              session.$selectionMarker = session.addMarker(range, "ace_selection", style);
          } else {
              this.$updateHighlightActiveLine();
          }

          var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();
          this.session.highlight(re);

          this._signal("changeSelection");
      };

      this.$getSelectionHighLightRegexp = function() {
          var session = this.session;

          var selection = this.getSelectionRange();
          if (selection.isEmpty() || selection.isMultiLine())
              return;

          var startOuter = selection.start.column - 1;
          var endOuter = selection.end.column + 1;
          var line = session.getLine(selection.start.row);
          var lineCols = line.length;
          var needle = line.substring(Math.max(startOuter, 0),
                                      Math.min(endOuter, lineCols));
          if ((startOuter >= 0 && /^[\w\d]/.test(needle)) ||
              (endOuter <= lineCols && /[\w\d]$/.test(needle)))
              return;

          needle = line.substring(selection.start.column, selection.end.column);
          if (!/^[\w\d]+$/.test(needle))
              return;

          var re = this.$search.$assembleRegExp({
              wholeWord: true,
              caseSensitive: true,
              needle: needle
          });

          return re;
      };


      this.onChangeFrontMarker = function() {
          this.renderer.updateFrontMarkers();
      };

      this.onChangeBackMarker = function() {
          this.renderer.updateBackMarkers();
      };


      this.onChangeBreakpoint = function() {
          this.renderer.updateBreakpoints();
      };

      this.onChangeAnnotation = function() {
          this.renderer.setAnnotations(this.session.getAnnotations());
      };


      this.onChangeMode = function(e) {
          this.renderer.updateText();
          this._emit("changeMode", e);
      };


      this.onChangeWrapLimit = function() {
          this.renderer.updateFull();
      };

      this.onChangeWrapMode = function() {
          this.renderer.onResize(true);
      };


      this.onChangeFold = function() {
          this.$updateHighlightActiveLine();
          this.renderer.updateFull();
      };
      this.getSelectedText = function() {
          return this.session.getTextRange(this.getSelectionRange());
      };
      this.getCopyText = function() {
          var text = this.getSelectedText();
          this._signal("copy", text);
          return text;
      };
      this.onCopy = function() {
          this.commands.exec("copy", this);
      };
      this.onCut = function() {
          this.commands.exec("cut", this);
      };
      this.onPaste = function(text, event) {
          var e = {text: text, event: event};
          this.commands.exec("paste", this, e);
      };
      
      this.$handlePaste = function(e) {
          if (typeof e == "string") 
              e = {text: e};
          this._signal("paste", e);
          var text = e.text;
          if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {
              this.insert(text);
          } else {
              var lines = text.split(/\r\n|\r|\n/);
              var ranges = this.selection.rangeList.ranges;
      
              if (lines.length > ranges.length || lines.length < 2 || !lines[1])
                  return this.commands.exec("insertstring", this, text);
      
              for (var i = ranges.length; i--;) {
                  var range = ranges[i];
                  if (!range.isEmpty())
                      this.session.remove(range);
      
                  this.session.insert(range.start, lines[i]);
              }
          }
      };

      this.execCommand = function(command, args) {
          return this.commands.exec(command, this, args);
      };
      this.insert = function(text, pasted) {
          var session = this.session;
          var mode = session.getMode();
          var cursor = this.getCursorPosition();

          if (this.getBehavioursEnabled() && !pasted) {
              var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);
              if (transform) {
                  if (text !== transform.text) {
                      this.session.mergeUndoDeltas = false;
                      this.$mergeNextCommand = false;
                  }
                  text = transform.text;

              }
          }
          
          if (text == "\t")
              text = this.session.getTabString();
          if (!this.selection.isEmpty()) {
              var range = this.getSelectionRange();
              cursor = this.session.remove(range);
              this.clearSelection();
          }
          else if (this.session.getOverwrite() && text.indexOf("\n") == -1) {
              var range = new Range.fromPoints(cursor, cursor);
              range.end.column += text.length;
              this.session.remove(range);
          }

          if (text == "\n" || text == "\r\n") {
              var line = session.getLine(cursor.row);
              if (cursor.column > line.search(/\S|$/)) {
                  var d = line.substr(cursor.column).search(/\S|$/);
                  session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);
              }
          }
          this.clearSelection();

          var start = cursor.column;
          var lineState = session.getState(cursor.row);
          var line = session.getLine(cursor.row);
          var shouldOutdent = mode.checkOutdent(lineState, line, text);
          var end = session.insert(cursor, text);

          if (transform && transform.selection) {
              if (transform.selection.length == 2) { // Transform relative to the current column
                  this.selection.setSelectionRange(
                      new Range(cursor.row, start + transform.selection[0],
                                cursor.row, start + transform.selection[1]));
              } else { // Transform relative to the current row.
                  this.selection.setSelectionRange(
                      new Range(cursor.row + transform.selection[0],
                                transform.selection[1],
                                cursor.row + transform.selection[2],
                                transform.selection[3]));
              }
          }

          if (session.getDocument().isNewLine(text)) {
              var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());

              session.insert({row: cursor.row+1, column: 0}, lineIndent);
          }
          if (shouldOutdent)
              mode.autoOutdent(lineState, session, cursor.row);
      };

      this.onTextInput = function(text) {
          this.keyBinding.onTextInput(text);
      };

      this.onCommandKey = function(e, hashId, keyCode) {
          this.keyBinding.onCommandKey(e, hashId, keyCode);
      };
      this.setOverwrite = function(overwrite) {
          this.session.setOverwrite(overwrite);
      };
      this.getOverwrite = function() {
          return this.session.getOverwrite();
      };
      this.toggleOverwrite = function() {
          this.session.toggleOverwrite();
      };
      this.setScrollSpeed = function(speed) {
          this.setOption("scrollSpeed", speed);
      };
      this.getScrollSpeed = function() {
          return this.getOption("scrollSpeed");
      };
      this.setDragDelay = function(dragDelay) {
          this.setOption("dragDelay", dragDelay);
      };
      this.getDragDelay = function() {
          return this.getOption("dragDelay");
      };
      this.setSelectionStyle = function(val) {
          this.setOption("selectionStyle", val);
      };
      this.getSelectionStyle = function() {
          return this.getOption("selectionStyle");
      };
      this.setHighlightActiveLine = function(shouldHighlight) {
          this.setOption("highlightActiveLine", shouldHighlight);
      };
      this.getHighlightActiveLine = function() {
          return this.getOption("highlightActiveLine");
      };
      this.setHighlightGutterLine = function(shouldHighlight) {
          this.setOption("highlightGutterLine", shouldHighlight);
      };

      this.getHighlightGutterLine = function() {
          return this.getOption("highlightGutterLine");
      };
      this.setHighlightSelectedWord = function(shouldHighlight) {
          this.setOption("highlightSelectedWord", shouldHighlight);
      };
      this.getHighlightSelectedWord = function() {
          return this.$highlightSelectedWord;
      };

      this.setAnimatedScroll = function(shouldAnimate){
          this.renderer.setAnimatedScroll(shouldAnimate);
      };

      this.getAnimatedScroll = function(){
          return this.renderer.getAnimatedScroll();
      };
      this.setShowInvisibles = function(showInvisibles) {
          this.renderer.setShowInvisibles(showInvisibles);
      };
      this.getShowInvisibles = function() {
          return this.renderer.getShowInvisibles();
      };

      this.setDisplayIndentGuides = function(display) {
          this.renderer.setDisplayIndentGuides(display);
      };

      this.getDisplayIndentGuides = function() {
          return this.renderer.getDisplayIndentGuides();
      };
      this.setShowPrintMargin = function(showPrintMargin) {
          this.renderer.setShowPrintMargin(showPrintMargin);
      };
      this.getShowPrintMargin = function() {
          return this.renderer.getShowPrintMargin();
      };
      this.setPrintMarginColumn = function(showPrintMargin) {
          this.renderer.setPrintMarginColumn(showPrintMargin);
      };
      this.getPrintMarginColumn = function() {
          return this.renderer.getPrintMarginColumn();
      };
      this.setReadOnly = function(readOnly) {
          this.setOption("readOnly", readOnly);
      };
      this.getReadOnly = function() {
          return this.getOption("readOnly");
      };
      this.setBehavioursEnabled = function (enabled) {
          this.setOption("behavioursEnabled", enabled);
      };
      this.getBehavioursEnabled = function () {
          return this.getOption("behavioursEnabled");
      };
      this.setWrapBehavioursEnabled = function (enabled) {
          this.setOption("wrapBehavioursEnabled", enabled);
      };
      this.getWrapBehavioursEnabled = function () {
          return this.getOption("wrapBehavioursEnabled");
      };
      this.setShowFoldWidgets = function(show) {
          this.setOption("showFoldWidgets", show);

      };
      this.getShowFoldWidgets = function() {
          return this.getOption("showFoldWidgets");
      };

      this.setFadeFoldWidgets = function(fade) {
          this.setOption("fadeFoldWidgets", fade);
      };

      this.getFadeFoldWidgets = function() {
          return this.getOption("fadeFoldWidgets");
      };
      this.remove = function(dir) {
          if (this.selection.isEmpty()){
              if (dir == "left")
                  this.selection.selectLeft();
              else
                  this.selection.selectRight();
          }

          var range = this.getSelectionRange();
          if (this.getBehavioursEnabled()) {
              var session = this.session;
              var state = session.getState(range.start.row);
              var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);

              if (range.end.column === 0) {
                  var text = session.getTextRange(range);
                  if (text[text.length - 1] == "\n") {
                      var line = session.getLine(range.end.row);
                      if (/^\s+$/.test(line)) {
                          range.end.column = line.length;
                      }
                  }
              }
              if (new_range)
                  range = new_range;
          }

          this.session.remove(range);
          this.clearSelection();
      };
      this.removeWordRight = function() {
          if (this.selection.isEmpty())
              this.selection.selectWordRight();

          this.session.remove(this.getSelectionRange());
          this.clearSelection();
      };
      this.removeWordLeft = function() {
          if (this.selection.isEmpty())
              this.selection.selectWordLeft();

          this.session.remove(this.getSelectionRange());
          this.clearSelection();
      };
      this.removeToLineStart = function() {
          if (this.selection.isEmpty())
              this.selection.selectLineStart();

          this.session.remove(this.getSelectionRange());
          this.clearSelection();
      };
      this.removeToLineEnd = function() {
          if (this.selection.isEmpty())
              this.selection.selectLineEnd();

          var range = this.getSelectionRange();
          if (range.start.column == range.end.column && range.start.row == range.end.row) {
              range.end.column = 0;
              range.end.row++;
          }

          this.session.remove(range);
          this.clearSelection();
      };
      this.splitLine = function() {
          if (!this.selection.isEmpty()) {
              this.session.remove(this.getSelectionRange());
              this.clearSelection();
          }

          var cursor = this.getCursorPosition();
          this.insert("\n");
          this.moveCursorToPosition(cursor);
      };
      this.transposeLetters = function() {
          if (!this.selection.isEmpty()) {
              return;
          }

          var cursor = this.getCursorPosition();
          var column = cursor.column;
          if (column === 0)
              return;

          var line = this.session.getLine(cursor.row);
          var swap, range;
          if (column < line.length) {
              swap = line.charAt(column) + line.charAt(column-1);
              range = new Range(cursor.row, column-1, cursor.row, column+1);
          }
          else {
              swap = line.charAt(column-1) + line.charAt(column-2);
              range = new Range(cursor.row, column-2, cursor.row, column);
          }
          this.session.replace(range, swap);
          this.session.selection.moveToPosition(range.end);
      };
      this.toLowerCase = function() {
          var originalRange = this.getSelectionRange();
          if (this.selection.isEmpty()) {
              this.selection.selectWord();
          }

          var range = this.getSelectionRange();
          var text = this.session.getTextRange(range);
          this.session.replace(range, text.toLowerCase());
          this.selection.setSelectionRange(originalRange);
      };
      this.toUpperCase = function() {
          var originalRange = this.getSelectionRange();
          if (this.selection.isEmpty()) {
              this.selection.selectWord();
          }

          var range = this.getSelectionRange();
          var text = this.session.getTextRange(range);
          this.session.replace(range, text.toUpperCase());
          this.selection.setSelectionRange(originalRange);
      };
      this.indent = function() {
          var session = this.session;
          var range = this.getSelectionRange();

          if (range.start.row < range.end.row) {
              var rows = this.$getSelectedRows();
              session.indentRows(rows.first, rows.last, "\t");
              return;
          } else if (range.start.column < range.end.column) {
              var text = session.getTextRange(range);
              if (!/^\s+$/.test(text)) {
                  var rows = this.$getSelectedRows();
                  session.indentRows(rows.first, rows.last, "\t");
                  return;
              }
          }
          
          var line = session.getLine(range.start.row);
          var position = range.start;
          var size = session.getTabSize();
          var column = session.documentToScreenColumn(position.row, position.column);

          if (this.session.getUseSoftTabs()) {
              var count = (size - column % size);
              var indentString = lang.stringRepeat(" ", count);
          } else {
              var count = column % size;
              while (line[range.start.column - 1] == " " && count) {
                  range.start.column--;
                  count--;
              }
              this.selection.setSelectionRange(range);
              indentString = "\t";
          }
          return this.insert(indentString);
      };
      this.blockIndent = function() {
          var rows = this.$getSelectedRows();
          this.session.indentRows(rows.first, rows.last, "\t");
      };
      this.blockOutdent = function() {
          var selection = this.session.getSelection();
          this.session.outdentRows(selection.getRange());
      };
      this.sortLines = function() {
          var rows = this.$getSelectedRows();
          var session = this.session;

          var lines = [];
          for (var i = rows.first; i <= rows.last; i++)
              lines.push(session.getLine(i));

          lines.sort(function(a, b) {
              if (a.toLowerCase() < b.toLowerCase()) return -1;
              if (a.toLowerCase() > b.toLowerCase()) return 1;
              return 0;
          });

          var deleteRange = new Range(0, 0, 0, 0);
          for (var i = rows.first; i <= rows.last; i++) {
              var line = session.getLine(i);
              deleteRange.start.row = i;
              deleteRange.end.row = i;
              deleteRange.end.column = line.length;
              session.replace(deleteRange, lines[i-rows.first]);
          }
      };
      this.toggleCommentLines = function() {
          var state = this.session.getState(this.getCursorPosition().row);
          var rows = this.$getSelectedRows();
          this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);
      };

      this.toggleBlockComment = function() {
          var cursor = this.getCursorPosition();
          var state = this.session.getState(cursor.row);
          var range = this.getSelectionRange();
          this.session.getMode().toggleBlockComment(state, this.session, range, cursor);
      };
      this.getNumberAt = function(row, column) {
          var _numberRx = /[\-]?[0-9]+(?:\.[0-9]+)?/g;
          _numberRx.lastIndex = 0;

          var s = this.session.getLine(row);
          while (_numberRx.lastIndex < column) {
              var m = _numberRx.exec(s);
              if(m.index <= column && m.index+m[0].length >= column){
                  var number = {
                      value: m[0],
                      start: m.index,
                      end: m.index+m[0].length
                  };
                  return number;
              }
          }
          return null;
      };
      this.modifyNumber = function(amount) {
          var row = this.selection.getCursor().row;
          var column = this.selection.getCursor().column;
          var charRange = new Range(row, column-1, row, column);

          var c = this.session.getTextRange(charRange);
          if (!isNaN(parseFloat(c)) && isFinite(c)) {
              var nr = this.getNumberAt(row, column);
              if (nr) {
                  var fp = nr.value.indexOf(".") >= 0 ? nr.start + nr.value.indexOf(".") + 1 : nr.end;
                  var decimals = nr.start + nr.value.length - fp;

                  var t = parseFloat(nr.value);
                  t *= Math.pow(10, decimals);


                  if(fp !== nr.end && column < fp){
                      amount *= Math.pow(10, nr.end - column - 1);
                  } else {
                      amount *= Math.pow(10, nr.end - column);
                  }

                  t += amount;
                  t /= Math.pow(10, decimals);
                  var nnr = t.toFixed(decimals);
                  var replaceRange = new Range(row, nr.start, row, nr.end);
                  this.session.replace(replaceRange, nnr);
                  this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));

              }
          }
      };
      this.removeLines = function() {
          var rows = this.$getSelectedRows();
          this.session.removeFullLines(rows.first, rows.last);
          this.clearSelection();
      };

      this.duplicateSelection = function() {
          var sel = this.selection;
          var doc = this.session;
          var range = sel.getRange();
          var reverse = sel.isBackwards();
          if (range.isEmpty()) {
              var row = range.start.row;
              doc.duplicateLines(row, row);
          } else {
              var point = reverse ? range.start : range.end;
              var endPoint = doc.insert(point, doc.getTextRange(range), false);
              range.start = point;
              range.end = endPoint;

              sel.setSelectionRange(range, reverse);
          }
      };
      this.moveLinesDown = function() {
          this.$moveLines(1, false);
      };
      this.moveLinesUp = function() {
          this.$moveLines(-1, false);
      };
      this.moveText = function(range, toPosition, copy) {
          return this.session.moveText(range, toPosition, copy);
      };
      this.copyLinesUp = function() {
          this.$moveLines(-1, true);
      };
      this.copyLinesDown = function() {
          this.$moveLines(1, true);
      };
      this.$moveLines = function(dir, copy) {
          var rows, moved;
          var selection = this.selection;
          if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {
              var range = selection.toOrientedRange();
              rows = this.$getSelectedRows(range);
              moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);
              if (copy && dir == -1) moved = 0;
              range.moveBy(moved, 0);
              selection.fromOrientedRange(range);
          } else {
              var ranges = selection.rangeList.ranges;
              selection.rangeList.detach(this.session);
              this.inVirtualSelectionMode = true;
              
              var diff = 0;
              var totalDiff = 0;
              var l = ranges.length;
              for (var i = 0; i < l; i++) {
                  var rangeIndex = i;
                  ranges[i].moveBy(diff, 0);
                  rows = this.$getSelectedRows(ranges[i]);
                  var first = rows.first;
                  var last = rows.last;
                  while (++i < l) {
                      if (totalDiff) ranges[i].moveBy(totalDiff, 0);
                      var subRows = this.$getSelectedRows(ranges[i]);
                      if (copy && subRows.first != last)
                          break;
                      else if (!copy && subRows.first > last + 1)
                          break;
                      last = subRows.last;
                  }
                  i--;
                  diff = this.session.$moveLines(first, last, copy ? 0 : dir);
                  if (copy && dir == -1) rangeIndex = i + 1;
                  while (rangeIndex <= i) {
                      ranges[rangeIndex].moveBy(diff, 0);
                      rangeIndex++;
                  }
                  if (!copy) diff = 0;
                  totalDiff += diff;
              }
              
              selection.fromOrientedRange(selection.ranges[0]);
              selection.rangeList.attach(this.session);
              this.inVirtualSelectionMode = false;
          }
      };
      this.$getSelectedRows = function(range) {
          range = (range || this.getSelectionRange()).collapseRows();

          return {
              first: this.session.getRowFoldStart(range.start.row),
              last: this.session.getRowFoldEnd(range.end.row)
          };
      };

      this.onCompositionStart = function(text) {
          this.renderer.showComposition(this.getCursorPosition());
      };

      this.onCompositionUpdate = function(text) {
          this.renderer.setCompositionText(text);
      };

      this.onCompositionEnd = function() {
          this.renderer.hideComposition();
      };
      this.getFirstVisibleRow = function() {
          return this.renderer.getFirstVisibleRow();
      };
      this.getLastVisibleRow = function() {
          return this.renderer.getLastVisibleRow();
      };
      this.isRowVisible = function(row) {
          return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());
      };
      this.isRowFullyVisible = function(row) {
          return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());
      };
      this.$getVisibleRowCount = function() {
          return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;
      };

      this.$moveByPage = function(dir, select) {
          var renderer = this.renderer;
          var config = this.renderer.layerConfig;
          var rows = dir * Math.floor(config.height / config.lineHeight);

          this.$blockScrolling++;
          if (select === true) {
              this.selection.$moveSelection(function(){
                  this.moveCursorBy(rows, 0);
              });
          } else if (select === false) {
              this.selection.moveCursorBy(rows, 0);
              this.selection.clearSelection();
          }
          this.$blockScrolling--;

          var scrollTop = renderer.scrollTop;

          renderer.scrollBy(0, rows * config.lineHeight);
          if (select != null)
              renderer.scrollCursorIntoView(null, 0.5);

          renderer.animateScrolling(scrollTop);
      };
      this.selectPageDown = function() {
          this.$moveByPage(1, true);
      };
      this.selectPageUp = function() {
          this.$moveByPage(-1, true);
      };
      this.gotoPageDown = function() {
         this.$moveByPage(1, false);
      };
      this.gotoPageUp = function() {
          this.$moveByPage(-1, false);
      };
      this.scrollPageDown = function() {
          this.$moveByPage(1);
      };
      this.scrollPageUp = function() {
          this.$moveByPage(-1);
      };
      this.scrollToRow = function(row) {
          this.renderer.scrollToRow(row);
      };
      this.scrollToLine = function(line, center, animate, callback) {
          this.renderer.scrollToLine(line, center, animate, callback);
      };
      this.centerSelection = function() {
          var range = this.getSelectionRange();
          var pos = {
              row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),
              column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)
          };
          this.renderer.alignCursor(pos, 0.5);
      };
      this.getCursorPosition = function() {
          return this.selection.getCursor();
      };
      this.getCursorPositionScreen = function() {
          return this.session.documentToScreenPosition(this.getCursorPosition());
      };
      this.getSelectionRange = function() {
          return this.selection.getRange();
      };
      this.selectAll = function() {
          this.$blockScrolling += 1;
          this.selection.selectAll();
          this.$blockScrolling -= 1;
      };
      this.clearSelection = function() {
          this.selection.clearSelection();
      };
      this.moveCursorTo = function(row, column) {
          this.selection.moveCursorTo(row, column);
      };
      this.moveCursorToPosition = function(pos) {
          this.selection.moveCursorToPosition(pos);
      };
      this.jumpToMatching = function(select, expand) {
          var cursor = this.getCursorPosition();
          var iterator = new TokenIterator(this.session, cursor.row, cursor.column);
          var prevToken = iterator.getCurrentToken();
          var token = prevToken || iterator.stepForward();

          if (!token) return;
          var matchType;
          var found = false;
          var depth = {};
          var i = cursor.column - token.start;
          var bracketType;
          var brackets = {
              ")": "(",
              "(": "(",
              "]": "[",
              "[": "[",
              "{": "{",
              "}": "{"
          };
          
          do {
              if (token.value.match(/[{}()\[\]]/g)) {
                  for (; i < token.value.length && !found; i++) {
                      if (!brackets[token.value[i]]) {
                          continue;
                      }

                      bracketType = brackets[token.value[i]] + '.' + token.type.replace("rparen", "lparen");

                      if (isNaN(depth[bracketType])) {
                          depth[bracketType] = 0;
                      }

                      switch (token.value[i]) {
                          case '(':
                          case '[':
                          case '{':
                              depth[bracketType]++;
                              break;
                          case ')':
                          case ']':
                          case '}':
                              depth[bracketType]--;

                              if (depth[bracketType] === -1) {
                                  matchType = 'bracket';
                                  found = true;
                              }
                          break;
                      }
                  }
              }
              else if (token && token.type.indexOf('tag-name') !== -1) {
                  if (isNaN(depth[token.value])) {
                      depth[token.value] = 0;
                  }
                  
                  if (prevToken.value === '<') {
                      depth[token.value]++;
                  }
                  else if (prevToken.value === '</') {
                      depth[token.value]--;
                  }
                  
                  if (depth[token.value] === -1) {
                      matchType = 'tag';
                      found = true;
                  }
              }

              if (!found) {
                  prevToken = token;
                  token = iterator.stepForward();
                  i = 0;
              }
          } while (token && !found);
          if (!matchType)
              return;

          var range, pos;
          if (matchType === 'bracket') {
              range = this.session.getBracketRange(cursor);
              if (!range) {
                  range = new Range(
                      iterator.getCurrentTokenRow(),
                      iterator.getCurrentTokenColumn() + i - 1,
                      iterator.getCurrentTokenRow(),
                      iterator.getCurrentTokenColumn() + i - 1
                  );
                  pos = range.start;
                  if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column) < 2)
                      range = this.session.getBracketRange(pos);
              }
          }
          else if (matchType === 'tag') {
              if (token && token.type.indexOf('tag-name') !== -1) 
                  var tag = token.value;
              else
                  return;

              range = new Range(
                  iterator.getCurrentTokenRow(),
                  iterator.getCurrentTokenColumn() - 2,
                  iterator.getCurrentTokenRow(),
                  iterator.getCurrentTokenColumn() - 2
              );
              if (range.compare(cursor.row, cursor.column) === 0) {
                  found = false;
                  do {
                      token = prevToken;
                      prevToken = iterator.stepBackward();
                      
                      if (prevToken) {
                          if (prevToken.type.indexOf('tag-close') !== -1) {
                              range.setEnd(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);
                          }

                          if (token.value === tag && token.type.indexOf('tag-name') !== -1) {
                              if (prevToken.value === '<') {
                                  depth[tag]++;
                              }
                              else if (prevToken.value === '</') {
                                  depth[tag]--;
                              }
                              
                              if (depth[tag] === 0)
                                  found = true;
                          }
                      }
                  } while (prevToken && !found);
              }
              if (token && token.type.indexOf('tag-name')) {
                  pos = range.start;
                  if (pos.row == cursor.row && Math.abs(pos.column - cursor.column) < 2)
                      pos = range.end;
              }
          }

          pos = range && range.cursor || pos;
          if (pos) {
              if (select) {
                  if (range && expand) {
                      this.selection.setRange(range);
                  } else if (range && range.isEqual(this.getSelectionRange())) {
                      this.clearSelection();
                  } else {
                      this.selection.selectTo(pos.row, pos.column);
                  }
              } else {
                  this.selection.moveTo(pos.row, pos.column);
              }
          }
      };
      this.gotoLine = function(lineNumber, column, animate) {
          this.selection.clearSelection();
          this.session.unfold({row: lineNumber - 1, column: column || 0});

          this.$blockScrolling += 1;
          this.exitMultiSelectMode && this.exitMultiSelectMode();
          this.moveCursorTo(lineNumber - 1, column || 0);
          this.$blockScrolling -= 1;

          if (!this.isRowFullyVisible(lineNumber - 1))
              this.scrollToLine(lineNumber - 1, true, animate);
      };
      this.navigateTo = function(row, column) {
          this.selection.moveTo(row, column);
      };
      this.navigateUp = function(times) {
          if (this.selection.isMultiLine() && !this.selection.isBackwards()) {
              var selectionStart = this.selection.anchor.getPosition();
              return this.moveCursorToPosition(selectionStart);
          }
          this.selection.clearSelection();
          this.selection.moveCursorBy(-times || -1, 0);
      };
      this.navigateDown = function(times) {
          if (this.selection.isMultiLine() && this.selection.isBackwards()) {
              var selectionEnd = this.selection.anchor.getPosition();
              return this.moveCursorToPosition(selectionEnd);
          }
          this.selection.clearSelection();
          this.selection.moveCursorBy(times || 1, 0);
      };
      this.navigateLeft = function(times) {
          if (!this.selection.isEmpty()) {
              var selectionStart = this.getSelectionRange().start;
              this.moveCursorToPosition(selectionStart);
          }
          else {
              times = times || 1;
              while (times--) {
                  this.selection.moveCursorLeft();
              }
          }
          this.clearSelection();
      };
      this.navigateRight = function(times) {
          if (!this.selection.isEmpty()) {
              var selectionEnd = this.getSelectionRange().end;
              this.moveCursorToPosition(selectionEnd);
          }
          else {
              times = times || 1;
              while (times--) {
                  this.selection.moveCursorRight();
              }
          }
          this.clearSelection();
      };
      this.navigateLineStart = function() {
          this.selection.moveCursorLineStart();
          this.clearSelection();
      };
      this.navigateLineEnd = function() {
          this.selection.moveCursorLineEnd();
          this.clearSelection();
      };
      this.navigateFileEnd = function() {
          this.selection.moveCursorFileEnd();
          this.clearSelection();
      };
      this.navigateFileStart = function() {
          this.selection.moveCursorFileStart();
          this.clearSelection();
      };
      this.navigateWordRight = function() {
          this.selection.moveCursorWordRight();
          this.clearSelection();
      };
      this.navigateWordLeft = function() {
          this.selection.moveCursorWordLeft();
          this.clearSelection();
      };
      this.replace = function(replacement, options) {
          if (options)
              this.$search.set(options);

          var range = this.$search.find(this.session);
          var replaced = 0;
          if (!range)
              return replaced;

          if (this.$tryReplace(range, replacement)) {
              replaced = 1;
          }
          if (range !== null) {
              this.selection.setSelectionRange(range);
              this.renderer.scrollSelectionIntoView(range.start, range.end);
          }

          return replaced;
      };
      this.replaceAll = function(replacement, options) {
          if (options) {
              this.$search.set(options);
          }

          var ranges = this.$search.findAll(this.session);
          var replaced = 0;
          if (!ranges.length)
              return replaced;

          this.$blockScrolling += 1;

          var selection = this.getSelectionRange();
          this.selection.moveTo(0, 0);

          for (var i = ranges.length - 1; i >= 0; --i) {
              if(this.$tryReplace(ranges[i], replacement)) {
                  replaced++;
              }
          }

          this.selection.setSelectionRange(selection);
          this.$blockScrolling -= 1;

          return replaced;
      };

      this.$tryReplace = function(range, replacement) {
          var input = this.session.getTextRange(range);
          replacement = this.$search.replace(input, replacement);
          if (replacement !== null) {
              range.end = this.session.replace(range, replacement);
              return range;
          } else {
              return null;
          }
      };
      this.getLastSearchOptions = function() {
          return this.$search.getOptions();
      };
      this.find = function(needle, options, animate) {
          if (!options)
              options = {};

          if (typeof needle == "string" || needle instanceof RegExp)
              options.needle = needle;
          else if (typeof needle == "object")
              oop.mixin(options, needle);

          var range = this.selection.getRange();
          if (options.needle == null) {
              needle = this.session.getTextRange(range)
                  || this.$search.$options.needle;
              if (!needle) {
                  range = this.session.getWordRange(range.start.row, range.start.column);
                  needle = this.session.getTextRange(range);
              }
              this.$search.set({needle: needle});
          }

          this.$search.set(options);
          if (!options.start)
              this.$search.set({start: range});

          var newRange = this.$search.find(this.session);
          if (options.preventScroll)
              return newRange;
          if (newRange) {
              this.revealRange(newRange, animate);
              return newRange;
          }
          if (options.backwards)
              range.start = range.end;
          else
              range.end = range.start;
          this.selection.setRange(range);
      };
      this.findNext = function(options, animate) {
          this.find({skipCurrent: true, backwards: false}, options, animate);
      };
      this.findPrevious = function(options, animate) {
          this.find(options, {skipCurrent: true, backwards: true}, animate);
      };

      this.revealRange = function(range, animate) {
          this.$blockScrolling += 1;
          this.session.unfold(range);
          this.selection.setSelectionRange(range);
          this.$blockScrolling -= 1;

          var scrollTop = this.renderer.scrollTop;
          this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);
          if (animate !== false)
              this.renderer.animateScrolling(scrollTop);
      };
      this.undo = function() {
          this.$blockScrolling++;
          this.session.getUndoManager().undo();
          this.$blockScrolling--;
          this.renderer.scrollCursorIntoView(null, 0.5);
      };
      this.redo = function() {
          this.$blockScrolling++;
          this.session.getUndoManager().redo();
          this.$blockScrolling--;
          this.renderer.scrollCursorIntoView(null, 0.5);
      };
      this.destroy = function() {
          this.renderer.destroy();
          this._signal("destroy", this);
          if (this.session) {
              this.session.destroy();
          }
      };
      this.setAutoScrollEditorIntoView = function(enable) {
          if (!enable)
              return;
          var rect;
          var self = this;
          var shouldScroll = false;
          if (!this.$scrollAnchor)
              this.$scrollAnchor = document.createElement("div");
          var scrollAnchor = this.$scrollAnchor;
          scrollAnchor.style.cssText = "position:absolute";
          this.container.insertBefore(scrollAnchor, this.container.firstChild);
          var onChangeSelection = this.on("changeSelection", function() {
              shouldScroll = true;
          });
          var onBeforeRender = this.renderer.on("beforeRender", function() {
              if (shouldScroll)
                  rect = self.renderer.container.getBoundingClientRect();
          });
          var onAfterRender = this.renderer.on("afterRender", function() {
              if (shouldScroll && rect && (self.isFocused()
                  || self.searchBox && self.searchBox.isFocused())
              ) {
                  var renderer = self.renderer;
                  var pos = renderer.$cursorLayer.$pixelPos;
                  var config = renderer.layerConfig;
                  var top = pos.top - config.offset;
                  if (pos.top >= 0 && top + rect.top < 0) {
                      shouldScroll = true;
                  } else if (pos.top < config.height &&
                      pos.top + rect.top + config.lineHeight > window.innerHeight) {
                      shouldScroll = false;
                  } else {
                      shouldScroll = null;
                  }
                  if (shouldScroll != null) {
                      scrollAnchor.style.top = top + "px";
                      scrollAnchor.style.left = pos.left + "px";
                      scrollAnchor.style.height = config.lineHeight + "px";
                      scrollAnchor.scrollIntoView(shouldScroll);
                  }
                  shouldScroll = rect = null;
              }
          });
          this.setAutoScrollEditorIntoView = function(enable) {
              if (enable)
                  return;
              delete this.setAutoScrollEditorIntoView;
              this.off("changeSelection", onChangeSelection);
              this.renderer.off("afterRender", onAfterRender);
              this.renderer.off("beforeRender", onBeforeRender);
          };
      };


      this.$resetCursorStyle = function() {
          var style = this.$cursorStyle || "ace";
          var cursorLayer = this.renderer.$cursorLayer;
          if (!cursorLayer)
              return;
          cursorLayer.setSmoothBlinking(/smooth/.test(style));
          cursorLayer.isBlinking = !this.$readOnly && style != "wide";
          dom.setCssClass(cursorLayer.element, "ace_slim-cursors", /slim/.test(style));
      };

  }).call(Editor.prototype);



  config.defineOptions(Editor.prototype, "editor", {
      selectionStyle: {
          set: function(style) {
              this.onSelectionChange();
              this._signal("changeSelectionStyle", {data: style});
          },
          initialValue: "line"
      },
      highlightActiveLine: {
          set: function() {this.$updateHighlightActiveLine();},
          initialValue: true
      },
      highlightSelectedWord: {
          set: function(shouldHighlight) {this.$onSelectionChange();},
          initialValue: true
      },
      readOnly: {
          set: function(readOnly) {
              this.$resetCursorStyle(); 
          },
          initialValue: false
      },
      cursorStyle: {
          set: function(val) { this.$resetCursorStyle(); },
          values: ["ace", "slim", "smooth", "wide"],
          initialValue: "ace"
      },
      mergeUndoDeltas: {
          values: [false, true, "always"],
          initialValue: true
      },
      behavioursEnabled: {initialValue: true},
      wrapBehavioursEnabled: {initialValue: true},
      autoScrollEditorIntoView: {
          set: function(val) {this.setAutoScrollEditorIntoView(val);}
      },
      keyboardHandler: {
          set: function(val) { this.setKeyboardHandler(val); },
          get: function() { return this.keybindingId; },
          handlesSet: true
      },

      hScrollBarAlwaysVisible: "renderer",
      vScrollBarAlwaysVisible: "renderer",
      highlightGutterLine: "renderer",
      animatedScroll: "renderer",
      showInvisibles: "renderer",
      showPrintMargin: "renderer",
      printMarginColumn: "renderer",
      printMargin: "renderer",
      fadeFoldWidgets: "renderer",
      showFoldWidgets: "renderer",
      showLineNumbers: "renderer",
      showGutter: "renderer",
      displayIndentGuides: "renderer",
      fontSize: "renderer",
      fontFamily: "renderer",
      maxLines: "renderer",
      minLines: "renderer",
      scrollPastEnd: "renderer",
      fixedWidthGutter: "renderer",
      theme: "renderer",

      scrollSpeed: "$mouseHandler",
      dragDelay: "$mouseHandler",
      dragEnabled: "$mouseHandler",
      focusTimout: "$mouseHandler",
      tooltipFollowsMouse: "$mouseHandler",

      firstLineNumber: "session",
      overwrite: "session",
      newLineMode: "session",
      useWorker: "session",
      useSoftTabs: "session",
      tabSize: "session",
      wrap: "session",
      indentedSoftWrap: "session",
      foldStyle: "session",
      mode: "session"
  });

  exports.Editor = Editor;
  });

  ace.define("ace/undomanager",["require","exports","module"], function(acequire, exports, module) {
  var UndoManager = function() {
      this.reset();
  };

  (function() {
      this.execute = function(options) {
          var deltaSets = options.args[0];
          this.$doc  = options.args[1];
          if (options.merge && this.hasUndo()){
              this.dirtyCounter--;
              deltaSets = this.$undoStack.pop().concat(deltaSets);
          }
          this.$undoStack.push(deltaSets);
          this.$redoStack = [];
          if (this.dirtyCounter < 0) {
              this.dirtyCounter = NaN;
          }
          this.dirtyCounter++;
      };
      this.undo = function(dontSelect) {
          var deltaSets = this.$undoStack.pop();
          var undoSelectionRange = null;
          if (deltaSets) {
              undoSelectionRange = this.$doc.undoChanges(deltaSets, dontSelect);
              this.$redoStack.push(deltaSets);
              this.dirtyCounter--;
          }

          return undoSelectionRange;
      };
      this.redo = function(dontSelect) {
          var deltaSets = this.$redoStack.pop();
          var redoSelectionRange = null;
          if (deltaSets) {
              redoSelectionRange =
                  this.$doc.redoChanges(this.$deserializeDeltas(deltaSets), dontSelect);
              this.$undoStack.push(deltaSets);
              this.dirtyCounter++;
          }
          return redoSelectionRange;
      };
      this.reset = function() {
          this.$undoStack = [];
          this.$redoStack = [];
          this.dirtyCounter = 0;
      };
      this.hasUndo = function() {
          return this.$undoStack.length > 0;
      };
      this.hasRedo = function() {
          return this.$redoStack.length > 0;
      };
      this.markClean = function() {
          this.dirtyCounter = 0;
      };
      this.isClean = function() {
          return this.dirtyCounter === 0;
      };
      this.$serializeDeltas = function(deltaSets) {
          return cloneDeltaSetsObj(deltaSets, $serializeDelta);
      };
      this.$deserializeDeltas = function(deltaSets) {
          return cloneDeltaSetsObj(deltaSets, $deserializeDelta);
      };
      
      function $serializeDelta(delta){
          return {
              action: delta.action,
              start: delta.start,
              end: delta.end,
              lines: delta.lines.length == 1 ? null : delta.lines,
              text: delta.lines.length == 1 ? delta.lines[0] : null
          };
      }
          
      function $deserializeDelta(delta) {
          return {
              action: delta.action,
              start: delta.start,
              end: delta.end,
              lines: delta.lines || [delta.text]
          };
      }
      
      function cloneDeltaSetsObj(deltaSets_old, fnGetModifiedDelta) {
          var deltaSets_new = new Array(deltaSets_old.length);
          for (var i = 0; i < deltaSets_old.length; i++) {
              var deltaSet_old = deltaSets_old[i];
              var deltaSet_new = { group: deltaSet_old.group, deltas: new Array(deltaSet_old.length)};
              
              for (var j = 0; j < deltaSet_old.deltas.length; j++) {
                  var delta_old = deltaSet_old.deltas[j];
                  deltaSet_new.deltas[j] = fnGetModifiedDelta(delta_old);
              }
              
              deltaSets_new[i] = deltaSet_new;
          }
          return deltaSets_new;
      }
      
  }).call(UndoManager.prototype);

  exports.UndoManager = UndoManager;
  });

  ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"], function(acequire, exports, module) {

  var dom = acequire("../lib/dom");
  var oop = acequire("../lib/oop");
  var lang = acequire("../lib/lang");
  var EventEmitter = acequire("../lib/event_emitter").EventEmitter;

  var Gutter = function(parentEl) {
      this.element = dom.createElement("div");
      this.element.className = "ace_layer ace_gutter-layer";
      parentEl.appendChild(this.element);
      this.setShowFoldWidgets(this.$showFoldWidgets);
      
      this.gutterWidth = 0;

      this.$annotations = [];
      this.$updateAnnotations = this.$updateAnnotations.bind(this);

      this.$cells = [];
  };

  (function() {

      oop.implement(this, EventEmitter);

      this.setSession = function(session) {
          if (this.session)
              this.session.removeEventListener("change", this.$updateAnnotations);
          this.session = session;
          if (session)
              session.on("change", this.$updateAnnotations);
      };

      this.addGutterDecoration = function(row, className){
          if (window.console)
              console.warn && console.warn("deprecated use session.addGutterDecoration");
          this.session.addGutterDecoration(row, className);
      };

      this.removeGutterDecoration = function(row, className){
          if (window.console)
              console.warn && console.warn("deprecated use session.removeGutterDecoration");
          this.session.removeGutterDecoration(row, className);
      };

      this.setAnnotations = function(annotations) {
          this.$annotations = [];
          for (var i = 0; i < annotations.length; i++) {
              var annotation = annotations[i];
              var row = annotation.row;
              var rowInfo = this.$annotations[row];
              if (!rowInfo)
                  rowInfo = this.$annotations[row] = {text: []};
             
              var annoText = annotation.text;
              annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || "";

              if (rowInfo.text.indexOf(annoText) === -1)
                  rowInfo.text.push(annoText);

              var type = annotation.type;
              if (type == "error")
                  rowInfo.className = " ace_error";
              else if (type == "warning" && rowInfo.className != " ace_error")
                  rowInfo.className = " ace_warning";
              else if (type == "info" && (!rowInfo.className))
                  rowInfo.className = " ace_info";
          }
      };

      this.$updateAnnotations = function (delta) {
          if (!this.$annotations.length)
              return;
          var firstRow = delta.start.row;
          var len = delta.end.row - firstRow;
          if (len === 0) ; else if (delta.action == 'remove') {
              this.$annotations.splice(firstRow, len + 1, null);
          } else {
              var args = new Array(len + 1);
              args.unshift(firstRow, 1);
              this.$annotations.splice.apply(this.$annotations, args);
          }
      };

      this.update = function(config) {
          var session = this.session;
          var firstRow = config.firstRow;
          var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar
              session.getLength() - 1);
          var fold = session.getNextFoldLine(firstRow);
          var foldStart = fold ? fold.start.row : Infinity;
          var foldWidgets = this.$showFoldWidgets && session.foldWidgets;
          var breakpoints = session.$breakpoints;
          var decorations = session.$decorations;
          var firstLineNumber = session.$firstLineNumber;
          var lastLineNumber = 0;
          
          var gutterRenderer = session.gutterRenderer || this.$renderer;

          var cell = null;
          var index = -1;
          var row = firstRow;
          while (true) {
              if (row > foldStart) {
                  row = fold.end.row + 1;
                  fold = session.getNextFoldLine(row, fold);
                  foldStart = fold ? fold.start.row : Infinity;
              }
              if (row > lastRow) {
                  while (this.$cells.length > index + 1) {
                      cell = this.$cells.pop();
                      this.element.removeChild(cell.element);
                  }
                  break;
              }

              cell = this.$cells[++index];
              if (!cell) {
                  cell = {element: null, textNode: null, foldWidget: null};
                  cell.element = dom.createElement("div");
                  cell.textNode = document.createTextNode('');
                  cell.element.appendChild(cell.textNode);
                  this.element.appendChild(cell.element);
                  this.$cells[index] = cell;
              }

              var className = "ace_gutter-cell ";
              if (breakpoints[row])
                  className += breakpoints[row];
              if (decorations[row])
                  className += decorations[row];
              if (this.$annotations[row])
                  className += this.$annotations[row].className;
              if (cell.element.className != className)
                  cell.element.className = className;

              var height = session.getRowLength(row) * config.lineHeight + "px";
              if (height != cell.element.style.height)
                  cell.element.style.height = height;

              if (foldWidgets) {
                  var c = foldWidgets[row];
                  if (c == null)
                      c = foldWidgets[row] = session.getFoldWidget(row);
              }

              if (c) {
                  if (!cell.foldWidget) {
                      cell.foldWidget = dom.createElement("span");
                      cell.element.appendChild(cell.foldWidget);
                  }
                  var className = "ace_fold-widget ace_" + c;
                  if (c == "start" && row == foldStart && row < fold.end.row)
                      className += " ace_closed";
                  else
                      className += " ace_open";
                  if (cell.foldWidget.className != className)
                      cell.foldWidget.className = className;

                  var height = config.lineHeight + "px";
                  if (cell.foldWidget.style.height != height)
                      cell.foldWidget.style.height = height;
              } else {
                  if (cell.foldWidget) {
                      cell.element.removeChild(cell.foldWidget);
                      cell.foldWidget = null;
                  }
              }
              
              var text = lastLineNumber = gutterRenderer
                  ? gutterRenderer.getText(session, row)
                  : row + firstLineNumber;
              if (text !== cell.textNode.data)
                  cell.textNode.data = text;

              row++;
          }

          this.element.style.height = config.minHeight + "px";

          if (this.$fixedWidth || session.$useWrapMode)
              lastLineNumber = session.getLength() + firstLineNumber;

          var gutterWidth = gutterRenderer 
              ? gutterRenderer.getWidth(session, lastLineNumber, config)
              : lastLineNumber.toString().length * config.characterWidth;
          
          var padding = this.$padding || this.$computePadding();
          gutterWidth += padding.left + padding.right;
          if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {
              this.gutterWidth = gutterWidth;
              this.element.style.width = Math.ceil(this.gutterWidth) + "px";
              this._emit("changeGutterWidth", gutterWidth);
          }
      };

      this.$fixedWidth = false;
      
      this.$showLineNumbers = true;
      this.$renderer = "";
      this.setShowLineNumbers = function(show) {
          this.$renderer = !show && {
              getWidth: function() {return "";},
              getText: function() {return "";}
          };
      };
      
      this.getShowLineNumbers = function() {
          return this.$showLineNumbers;
      };
      
      this.$showFoldWidgets = true;
      this.setShowFoldWidgets = function(show) {
          if (show)
              dom.addCssClass(this.element, "ace_folding-enabled");
          else
              dom.removeCssClass(this.element, "ace_folding-enabled");

          this.$showFoldWidgets = show;
          this.$padding = null;
      };
      
      this.getShowFoldWidgets = function() {
          return this.$showFoldWidgets;
      };

      this.$computePadding = function() {
          if (!this.element.firstChild)
              return {left: 0, right: 0};
          var style = dom.computedStyle(this.element.firstChild);
          this.$padding = {};
          this.$padding.left = parseInt(style.paddingLeft) + 1 || 0;
          this.$padding.right = parseInt(style.paddingRight) || 0;
          return this.$padding;
      };

      this.getRegion = function(point) {
          var padding = this.$padding || this.$computePadding();
          var rect = this.element.getBoundingClientRect();
          if (point.x < padding.left + rect.left)
              return "markers";
          if (this.$showFoldWidgets && point.x > rect.right - padding.right)
              return "foldWidgets";
      };

  }).call(Gutter.prototype);

  exports.Gutter = Gutter;

  });

  ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"], function(acequire, exports, module) {

  var Range = acequire("../range").Range;
  var dom = acequire("../lib/dom");

  var Marker = function(parentEl) {
      this.element = dom.createElement("div");
      this.element.className = "ace_layer ace_marker-layer";
      parentEl.appendChild(this.element);
  };

  (function() {

      this.$padding = 0;

      this.setPadding = function(padding) {
          this.$padding = padding;
      };
      this.setSession = function(session) {
          this.session = session;
      };
      
      this.setMarkers = function(markers) {
          this.markers = markers;
      };

      this.update = function(config) {
          if (!config) return;

          this.config = config;


          var html = [];
          for (var key in this.markers) {
              var marker = this.markers[key];

              if (!marker.range) {
                  marker.update(html, this, this.session, config);
                  continue;
              }

              var range = marker.range.clipRows(config.firstRow, config.lastRow);
              if (range.isEmpty()) continue;

              range = range.toScreenRange(this.session);
              if (marker.renderer) {
                  var top = this.$getTop(range.start.row, config);
                  var left = this.$padding + (this.session.$bidiHandler.isBidiRow(range.start.row)
                      ? this.session.$bidiHandler.getPosLeft(range.start.column)
                      : range.start.column * config.characterWidth);
                  marker.renderer(html, range, left, top, config);
              } else if (marker.type == "fullLine") {
                  this.drawFullLineMarker(html, range, marker.clazz, config);
              } else if (marker.type == "screenLine") {
                  this.drawScreenLineMarker(html, range, marker.clazz, config);
              } else if (range.isMultiLine()) {
                  if (marker.type == "text")
                      this.drawTextMarker(html, range, marker.clazz, config);
                  else
                      this.drawMultiLineMarker(html, range, marker.clazz, config);
              } else {
                  if (this.session.$bidiHandler.isBidiRow(range.start.row)) {
                      this.drawBidiSingleLineMarker(html, range, marker.clazz + " ace_start" + " ace_br15", config);
                  } else {
                      this.drawSingleLineMarker(html, range, marker.clazz + " ace_start" + " ace_br15", config);
                  }
              }
          }
          this.element.innerHTML = html.join("");
      };

      this.$getTop = function(row, layerConfig) {
          return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;
      };

      function getBorderClass(tl, tr, br, bl) {
          return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);
      }
      this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {
          var session = this.session;
          var start = range.start.row;
          var end = range.end.row;
          var row = start;
          var prev = 0; 
          var curr = 0;
          var next = session.getScreenLastRowColumn(row);
          var clazzModified = null;
          var lineRange = new Range(row, range.start.column, row, curr);
          for (; row <= end; row++) {
              lineRange.start.row = lineRange.end.row = row;
              lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);
              lineRange.end.column = next;
              prev = curr;
              curr = next;
              next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;
              clazzModified = clazz + (row == start  ? " ace_start" : "") + " ace_br"
                  + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end);

              if (this.session.$bidiHandler.isBidiRow(row)) {
                  this.drawBidiSingleLineMarker(stringBuilder, lineRange, clazzModified,
                      layerConfig, row == end ? 0 : 1, extraStyle);
              } else {
                  this.drawSingleLineMarker(stringBuilder, lineRange, clazzModified,
                      layerConfig, row == end ? 0 : 1, extraStyle);
              }
          }
      };
      this.drawMultiLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {
          var padding = this.$padding;
          var height, top, left;
          extraStyle = extraStyle || "";
         if (this.session.$bidiHandler.isBidiRow(range.start.row)) {
             var range1 = range.clone();
             range1.end.row = range1.start.row;
             range1.end.column = this.session.getLine(range1.start.row).length;
             this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + " ace_br1 ace_start", config, null, extraStyle);
          } else {
             height = config.lineHeight;
             top = this.$getTop(range.start.row, config);
             left = padding + range.start.column * config.characterWidth;
             stringBuilder.push(
                 "<div class='", clazz, " ace_br1 ace_start' style='",
                 "height:", height, "px;",
                 "right:0;",
                 "top:", top, "px;",
                 "left:", left, "px;", extraStyle, "'></div>"
             );
          }
          if (this.session.$bidiHandler.isBidiRow(range.end.row)) {
             var range1 = range.clone();
             range1.start.row = range1.end.row;
             range1.start.column = 0;
             this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + " ace_br12", config, null, extraStyle);
          } else {
             var width = range.end.column * config.characterWidth;
             height = config.lineHeight;
             top = this.$getTop(range.end.row, config);
             stringBuilder.push(
                 "<div class='", clazz, " ace_br12' style='",
                 "height:", height, "px;",
                 "width:", width, "px;",
                 "top:", top, "px;",
                 "left:", padding, "px;", extraStyle, "'></div>"
             );
          }
          height = (range.end.row - range.start.row - 1) * config.lineHeight;
          if (height <= 0)
              return;
          top = this.$getTop(range.start.row + 1, config);
          
          var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);

          stringBuilder.push(
              "<div class='", clazz, (radiusClass ? " ace_br" + radiusClass : ""), "' style='",
              "height:", height, "px;",
              "right:0;",
              "top:", top, "px;",
              "left:", padding, "px;", extraStyle, "'></div>"
          );
      };
      this.drawSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {
          var height = config.lineHeight;
          var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;

          var top = this.$getTop(range.start.row, config);
          var left = this.$padding + range.start.column * config.characterWidth;

          stringBuilder.push(
              "<div class='", clazz, "' style='",
              "height:", height, "px;",
              "width:", width, "px;",
              "top:", top, "px;",
              "left:", left, "px;", extraStyle || "", "'></div>"
          );
      };
      this.drawBidiSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {
          var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;
          var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);

          selections.forEach(function(selection) {
              stringBuilder.push(
                  "<div class='", clazz, "' style='",
                  "height:", height, "px;",
                  "width:", selection.width + (extraLength || 0), "px;",
                  "top:", top, "px;",
                  "left:", padding + selection.left, "px;", extraStyle || "", "'></div>"
              );
          });
      };

      this.drawFullLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {
          var top = this.$getTop(range.start.row, config);
          var height = config.lineHeight;
          if (range.start.row != range.end.row)
              height += this.$getTop(range.end.row, config) - top;

          stringBuilder.push(
              "<div class='", clazz, "' style='",
              "height:", height, "px;",
              "top:", top, "px;",
              "left:0;right:0;", extraStyle || "", "'></div>"
          );
      };
      
      this.drawScreenLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {
          var top = this.$getTop(range.start.row, config);
          var height = config.lineHeight;

          stringBuilder.push(
              "<div class='", clazz, "' style='",
              "height:", height, "px;",
              "top:", top, "px;",
              "left:0;right:0;", extraStyle || "", "'></div>"
          );
      };

  }).call(Marker.prototype);

  exports.Marker = Marker;

  });

  ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var dom = acequire("../lib/dom");
  var lang = acequire("../lib/lang");
  var useragent = acequire("../lib/useragent");
  var EventEmitter = acequire("../lib/event_emitter").EventEmitter;

  var Text = function(parentEl) {
      this.element = dom.createElement("div");
      this.element.className = "ace_layer ace_text-layer";
      parentEl.appendChild(this.element);
      this.$updateEolChar = this.$updateEolChar.bind(this);
  };

  (function() {

      oop.implement(this, EventEmitter);

      this.EOF_CHAR = "\xB6";
      this.EOL_CHAR_LF = "\xAC";
      this.EOL_CHAR_CRLF = "\xa4";
      this.EOL_CHAR = this.EOL_CHAR_LF;
      this.TAB_CHAR = "\u2014"; //"\u21E5";
      this.SPACE_CHAR = "\xB7";
      this.$padding = 0;

      this.$updateEolChar = function() {
          var EOL_CHAR = this.session.doc.getNewLineCharacter() == "\n"
             ? this.EOL_CHAR_LF
             : this.EOL_CHAR_CRLF;
          if (this.EOL_CHAR != EOL_CHAR) {
              this.EOL_CHAR = EOL_CHAR;
              return true;
          }
      };

      this.setPadding = function(padding) {
          this.$padding = padding;
          this.element.style.padding = "0 " + padding + "px";
      };

      this.getLineHeight = function() {
          return this.$fontMetrics.$characterSize.height || 0;
      };

      this.getCharacterWidth = function() {
          return this.$fontMetrics.$characterSize.width || 0;
      };
      
      this.$setFontMetrics = function(measure) {
          this.$fontMetrics = measure;
          this.$fontMetrics.on("changeCharacterSize", function(e) {
              this._signal("changeCharacterSize", e);
          }.bind(this));
          this.$pollSizeChanges();
      };

      this.checkForSizeChanges = function() {
          this.$fontMetrics.checkForSizeChanges();
      };
      this.$pollSizeChanges = function() {
          return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();
      };
      this.setSession = function(session) {
          this.session = session;
          if (session)
              this.$computeTabString();
      };

      this.showInvisibles = false;
      this.setShowInvisibles = function(showInvisibles) {
          if (this.showInvisibles == showInvisibles)
              return false;

          this.showInvisibles = showInvisibles;
          this.$computeTabString();
          return true;
      };

      this.displayIndentGuides = true;
      this.setDisplayIndentGuides = function(display) {
          if (this.displayIndentGuides == display)
              return false;

          this.displayIndentGuides = display;
          this.$computeTabString();
          return true;
      };

      this.$tabStrings = [];
      this.onChangeTabSize =
      this.$computeTabString = function() {
          var tabSize = this.session.getTabSize();
          this.tabSize = tabSize;
          var tabStr = this.$tabStrings = [0];
          for (var i = 1; i < tabSize + 1; i++) {
              if (this.showInvisibles) {
                  tabStr.push("<span class='ace_invisible ace_invisible_tab'>"
                      + lang.stringRepeat(this.TAB_CHAR, i)
                      + "</span>");
              } else {
                  tabStr.push(lang.stringRepeat(" ", i));
              }
          }
          if (this.displayIndentGuides) {
              this.$indentGuideRe =  /\s\S| \t|\t |\s$/;
              var className = "ace_indent-guide";
              var spaceClass = "";
              var tabClass = "";
              if (this.showInvisibles) {
                  className += " ace_invisible";
                  spaceClass = " ace_invisible_space";
                  tabClass = " ace_invisible_tab";
                  var spaceContent = lang.stringRepeat(this.SPACE_CHAR, this.tabSize);
                  var tabContent = lang.stringRepeat(this.TAB_CHAR, this.tabSize);
              } else{
                  var spaceContent = lang.stringRepeat(" ", this.tabSize);
                  var tabContent = spaceContent;
              }

              this.$tabStrings[" "] = "<span class='" + className + spaceClass + "'>" + spaceContent + "</span>";
              this.$tabStrings["\t"] = "<span class='" + className + tabClass + "'>" + tabContent + "</span>";
          }
      };

      this.updateLines = function(config, firstRow, lastRow) {
          if (this.config.lastRow != config.lastRow ||
              this.config.firstRow != config.firstRow) {
              this.scrollLines(config);
          }
          this.config = config;

          var first = Math.max(firstRow, config.firstRow);
          var last = Math.min(lastRow, config.lastRow);

          var lineElements = this.element.childNodes;
          var lineElementsIdx = 0;

          for (var row = config.firstRow; row < first; row++) {
              var foldLine = this.session.getFoldLine(row);
              if (foldLine) {
                  if (foldLine.containsRow(first)) {
                      first = foldLine.start.row;
                      break;
                  } else {
                      row = foldLine.end.row;
                  }
              }
              lineElementsIdx ++;
          }

          var row = first;
          var foldLine = this.session.getNextFoldLine(row);
          var foldStart = foldLine ? foldLine.start.row : Infinity;

          while (true) {
              if (row > foldStart) {
                  row = foldLine.end.row+1;
                  foldLine = this.session.getNextFoldLine(row, foldLine);
                  foldStart = foldLine ? foldLine.start.row :Infinity;
              }
              if (row > last)
                  break;

              var lineElement = lineElements[lineElementsIdx++];
              if (lineElement) {
                  var html = [];
                  this.$renderLine(
                      html, row, !this.$useLineGroups(), row == foldStart ? foldLine : false
                  );
                  lineElement.style.height = config.lineHeight * this.session.getRowLength(row) + "px";
                  lineElement.innerHTML = html.join("");
              }
              row++;
          }
      };

      this.scrollLines = function(config) {
          var oldConfig = this.config;
          this.config = config;

          if (!oldConfig || oldConfig.lastRow < config.firstRow)
              return this.update(config);

          if (config.lastRow < oldConfig.firstRow)
              return this.update(config);

          var el = this.element;
          if (oldConfig.firstRow < config.firstRow)
              for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)
                  el.removeChild(el.firstChild);

          if (oldConfig.lastRow > config.lastRow)
              for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)
                  el.removeChild(el.lastChild);

          if (config.firstRow < oldConfig.firstRow) {
              var fragment = this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1);
              if (el.firstChild)
                  el.insertBefore(fragment, el.firstChild);
              else
                  el.appendChild(fragment);
          }

          if (config.lastRow > oldConfig.lastRow) {
              var fragment = this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow);
              el.appendChild(fragment);
          }
      };

      this.$renderLinesFragment = function(config, firstRow, lastRow) {
          var fragment = this.element.ownerDocument.createDocumentFragment();
          var row = firstRow;
          var foldLine = this.session.getNextFoldLine(row);
          var foldStart = foldLine ? foldLine.start.row : Infinity;

          while (true) {
              if (row > foldStart) {
                  row = foldLine.end.row+1;
                  foldLine = this.session.getNextFoldLine(row, foldLine);
                  foldStart = foldLine ? foldLine.start.row : Infinity;
              }
              if (row > lastRow)
                  break;

              var container = dom.createElement("div");

              var html = [];
              this.$renderLine(html, row, false, row == foldStart ? foldLine : false);
              container.innerHTML = html.join("");
              if (this.$useLineGroups()) {
                  container.className = 'ace_line_group';
                  fragment.appendChild(container);
                  container.style.height = config.lineHeight * this.session.getRowLength(row) + "px";

              } else {
                  while(container.firstChild)
                      fragment.appendChild(container.firstChild);
              }

              row++;
          }
          return fragment;
      };

      this.update = function(config) {
          this.config = config;

          var html = [];
          var firstRow = config.firstRow, lastRow = config.lastRow;

          var row = firstRow;
          var foldLine = this.session.getNextFoldLine(row);
          var foldStart = foldLine ? foldLine.start.row : Infinity;

          while (true) {
              if (row > foldStart) {
                  row = foldLine.end.row+1;
                  foldLine = this.session.getNextFoldLine(row, foldLine);
                  foldStart = foldLine ? foldLine.start.row :Infinity;
              }
              if (row > lastRow)
                  break;

              if (this.$useLineGroups())
                  html.push("<div class='ace_line_group' style='height:", config.lineHeight*this.session.getRowLength(row), "px'>");

              this.$renderLine(html, row, false, row == foldStart ? foldLine : false);

              if (this.$useLineGroups())
                  html.push("</div>"); // end the line group

              row++;
          }
          this.element.innerHTML = html.join("");
      };

      this.$textToken = {
          "text": true,
          "rparen": true,
          "lparen": true
      };

      this.$renderToken = function(stringBuilder, screenColumn, token, value) {
          var self = this;
          var replaceReg = /\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;
          var replaceFunc = function(c, a, b, tabIdx, idx4) {
              if (a) {
                  return self.showInvisibles
                      ? "<span class='ace_invisible ace_invisible_space'>" + lang.stringRepeat(self.SPACE_CHAR, c.length) + "</span>"
                      : c;
              } else if (c == "&") {
                  return "&#38;";
              } else if (c == "<") {
                  return "&#60;";
              } else if (c == ">") {
                  return "&#62;";
              } else if (c == "\t") {
                  var tabSize = self.session.getScreenTabSize(screenColumn + tabIdx);
                  screenColumn += tabSize - 1;
                  return self.$tabStrings[tabSize];
              } else if (c == "\u3000") {
                  var classToUse = self.showInvisibles ? "ace_cjk ace_invisible ace_invisible_space" : "ace_cjk";
                  var space = self.showInvisibles ? self.SPACE_CHAR : "";
                  screenColumn += 1;
                  return "<span class='" + classToUse + "' style='width:" +
                      (self.config.characterWidth * 2) +
                      "px'>" + space + "</span>";
              } else if (b) {
                  return "<span class='ace_invisible ace_invisible_space ace_invalid'>" + self.SPACE_CHAR + "</span>";
              } else {
                  screenColumn += 1;
                  return "<span class='ace_cjk' style='width:" +
                      (self.config.characterWidth * 2) +
                      "px'>" + c + "</span>";
              }
          };

          var output = value.replace(replaceReg, replaceFunc);

          if (!this.$textToken[token.type]) {
              var classes = "ace_" + token.type.replace(/\./g, " ace_");
              var style = "";
              if (token.type == "fold")
                  style = " style='width:" + (token.value.length * this.config.characterWidth) + "px;' ";
              stringBuilder.push("<span class='", classes, "'", style, ">", output, "</span>");
          }
          else {
              stringBuilder.push(output);
          }
          return screenColumn + value.length;
      };

      this.renderIndentGuide = function(stringBuilder, value, max) {
          var cols = value.search(this.$indentGuideRe);
          if (cols <= 0 || cols >= max)
              return value;
          if (value[0] == " ") {
              cols -= cols % this.tabSize;
              stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "], cols/this.tabSize));
              return value.substr(cols);
          } else if (value[0] == "\t") {
              stringBuilder.push(lang.stringRepeat(this.$tabStrings["\t"], cols));
              return value.substr(cols);
          }
          return value;
      };

      this.$renderWrappedLine = function(stringBuilder, tokens, splits, onlyContents) {
          var chars = 0;
          var split = 0;
          var splitChars = splits[0];
          var screenColumn = 0;

          for (var i = 0; i < tokens.length; i++) {
              var token = tokens[i];
              var value = token.value;
              if (i == 0 && this.displayIndentGuides) {
                  chars = value.length;
                  value = this.renderIndentGuide(stringBuilder, value, splitChars);
                  if (!value)
                      continue;
                  chars -= value.length;
              }

              if (chars + value.length < splitChars) {
                  screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
                  chars += value.length;
              } else {
                  while (chars + value.length >= splitChars) {
                      screenColumn = this.$renderToken(
                          stringBuilder, screenColumn,
                          token, value.substring(0, splitChars - chars)
                      );
                      value = value.substring(splitChars - chars);
                      chars = splitChars;

                      if (!onlyContents) {
                          stringBuilder.push("</div>",
                              "<div class='ace_line' style='height:",
                              this.config.lineHeight, "px'>"
                          );
                      }

                      stringBuilder.push(lang.stringRepeat("\xa0", splits.indent));

                      split ++;
                      screenColumn = 0;
                      splitChars = splits[split] || Number.MAX_VALUE;
                  }
                  if (value.length != 0) {
                      chars += value.length;
                      screenColumn = this.$renderToken(
                          stringBuilder, screenColumn, token, value
                      );
                  }
              }
          }
      };

      this.$renderSimpleLine = function(stringBuilder, tokens) {
          var screenColumn = 0;
          var token = tokens[0];
          var value = token.value;
          if (this.displayIndentGuides)
              value = this.renderIndentGuide(stringBuilder, value);
          if (value)
              screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
          for (var i = 1; i < tokens.length; i++) {
              token = tokens[i];
              value = token.value;
              screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);
          }
      };
      this.$renderLine = function(stringBuilder, row, onlyContents, foldLine) {
          if (!foldLine && foldLine != false)
              foldLine = this.session.getFoldLine(row);

          if (foldLine)
              var tokens = this.$getFoldLineTokens(row, foldLine);
          else
              var tokens = this.session.getTokens(row);


          if (!onlyContents) {
              stringBuilder.push(
                  "<div class='ace_line' style='height:", 
                      this.config.lineHeight * (
                          this.$useLineGroups() ? 1 :this.session.getRowLength(row)
                      ), "px'>"
              );
          }

          if (tokens.length) {
              var splits = this.session.getRowSplitData(row);
              if (splits && splits.length)
                  this.$renderWrappedLine(stringBuilder, tokens, splits, onlyContents);
              else
                  this.$renderSimpleLine(stringBuilder, tokens);
          }

          if (this.showInvisibles) {
              if (foldLine)
                  row = foldLine.end.row;

              stringBuilder.push(
                  "<span class='ace_invisible ace_invisible_eol'>",
                  row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR,
                  "</span>"
              );
          }
          if (!onlyContents)
              stringBuilder.push("</div>");
      };

      this.$getFoldLineTokens = function(row, foldLine) {
          var session = this.session;
          var renderTokens = [];

          function addTokens(tokens, from, to) {
              var idx = 0, col = 0;
              while ((col + tokens[idx].value.length) < from) {
                  col += tokens[idx].value.length;
                  idx++;

                  if (idx == tokens.length)
                      return;
              }
              if (col != from) {
                  var value = tokens[idx].value.substring(from - col);
                  if (value.length > (to - from))
                      value = value.substring(0, to - from);

                  renderTokens.push({
                      type: tokens[idx].type,
                      value: value
                  });

                  col = from + value.length;
                  idx += 1;
              }

              while (col < to && idx < tokens.length) {
                  var value = tokens[idx].value;
                  if (value.length + col > to) {
                      renderTokens.push({
                          type: tokens[idx].type,
                          value: value.substring(0, to - col)
                      });
                  } else
                      renderTokens.push(tokens[idx]);
                  col += value.length;
                  idx += 1;
              }
          }

          var tokens = session.getTokens(row);
          foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {
              if (placeholder != null) {
                  renderTokens.push({
                      type: "fold",
                      value: placeholder
                  });
              } else {
                  if (isNewRow)
                      tokens = session.getTokens(row);

                  if (tokens.length)
                      addTokens(tokens, lastColumn, column);
              }
          }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);

          return renderTokens;
      };

      this.$useLineGroups = function() {
          return this.session.getUseWrapMode();
      };

      this.destroy = function() {
          clearInterval(this.$pollSizeChangesTimer);
          if (this.$measureNode)
              this.$measureNode.parentNode.removeChild(this.$measureNode);
          delete this.$measureNode;
      };

  }).call(Text.prototype);

  exports.Text = Text;

  });

  ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"], function(acequire, exports, module) {

  var dom = acequire("../lib/dom");
  var isIE8;

  var Cursor = function(parentEl) {
      this.element = dom.createElement("div");
      this.element.className = "ace_layer ace_cursor-layer";
      parentEl.appendChild(this.element);
      
      if (isIE8 === undefined)
          isIE8 = !("opacity" in this.element.style);

      this.isVisible = false;
      this.isBlinking = true;
      this.blinkInterval = 1000;
      this.smoothBlinking = false;

      this.cursors = [];
      this.cursor = this.addCursor();
      dom.addCssClass(this.element, "ace_hidden-cursors");
      this.$updateCursors = (isIE8
          ? this.$updateVisibility
          : this.$updateOpacity).bind(this);
  };

  (function() {
      
      this.$updateVisibility = function(val) {
          var cursors = this.cursors;
          for (var i = cursors.length; i--; )
              cursors[i].style.visibility = val ? "" : "hidden";
      };
      this.$updateOpacity = function(val) {
          var cursors = this.cursors;
          for (var i = cursors.length; i--; )
              cursors[i].style.opacity = val ? "" : "0";
      };
      

      this.$padding = 0;
      this.setPadding = function(padding) {
          this.$padding = padding;
      };

      this.setSession = function(session) {
          this.session = session;
      };

      this.setBlinking = function(blinking) {
          if (blinking != this.isBlinking){
              this.isBlinking = blinking;
              this.restartTimer();
          }
      };

      this.setBlinkInterval = function(blinkInterval) {
          if (blinkInterval != this.blinkInterval){
              this.blinkInterval = blinkInterval;
              this.restartTimer();
          }
      };

      this.setSmoothBlinking = function(smoothBlinking) {
          if (smoothBlinking != this.smoothBlinking && !isIE8) {
              this.smoothBlinking = smoothBlinking;
              dom.setCssClass(this.element, "ace_smooth-blinking", smoothBlinking);
              this.$updateCursors(true);
              this.$updateCursors = (this.$updateOpacity).bind(this);
              this.restartTimer();
          }
      };

      this.addCursor = function() {
          var el = dom.createElement("div");
          el.className = "ace_cursor";
          this.element.appendChild(el);
          this.cursors.push(el);
          return el;
      };

      this.removeCursor = function() {
          if (this.cursors.length > 1) {
              var el = this.cursors.pop();
              el.parentNode.removeChild(el);
              return el;
          }
      };

      this.hideCursor = function() {
          this.isVisible = false;
          dom.addCssClass(this.element, "ace_hidden-cursors");
          this.restartTimer();
      };

      this.showCursor = function() {
          this.isVisible = true;
          dom.removeCssClass(this.element, "ace_hidden-cursors");
          this.restartTimer();
      };

      this.restartTimer = function() {
          var update = this.$updateCursors;
          clearInterval(this.intervalId);
          clearTimeout(this.timeoutId);
          if (this.smoothBlinking) {
              dom.removeCssClass(this.element, "ace_smooth-blinking");
          }
          
          update(true);

          if (!this.isBlinking || !this.blinkInterval || !this.isVisible)
              return;

          if (this.smoothBlinking) {
              setTimeout(function(){
                  dom.addCssClass(this.element, "ace_smooth-blinking");
              }.bind(this));
          }
          
          var blink = function(){
              this.timeoutId = setTimeout(function() {
                  update(false);
              }, 0.6 * this.blinkInterval);
          }.bind(this);

          this.intervalId = setInterval(function() {
              update(true);
              blink();
          }, this.blinkInterval);

          blink();
      };

      this.getPixelPosition = function(position, onScreen) {
          if (!this.config || !this.session)
              return {left : 0, top : 0};

          if (!position)
              position = this.session.selection.getCursor();
          var pos = this.session.documentToScreenPosition(position);
          var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)
              ? this.session.$bidiHandler.getPosLeft(pos.column)
              : pos.column * this.config.characterWidth);

          var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *
              this.config.lineHeight;

          return {left : cursorLeft, top : cursorTop};
      };

      this.update = function(config) {
          this.config = config;

          var selections = this.session.$selectionMarkers;
          var i = 0, cursorIndex = 0;

          if (selections === undefined || selections.length === 0){
              selections = [{cursor: null}];
          }

          for (var i = 0, n = selections.length; i < n; i++) {
              var pixelPos = this.getPixelPosition(selections[i].cursor, true);
              if ((pixelPos.top > config.height + config.offset ||
                   pixelPos.top < 0) && i > 1) {
                  continue;
              }

              var style = (this.cursors[cursorIndex++] || this.addCursor()).style;
              
              if (!this.drawCursor) {
                  style.left = pixelPos.left + "px";
                  style.top = pixelPos.top + "px";
                  style.width = config.characterWidth + "px";
                  style.height = config.lineHeight + "px";
              } else {
                  this.drawCursor(style, pixelPos, config, selections[i], this.session);
              }
          }
          while (this.cursors.length > cursorIndex)
              this.removeCursor();

          var overwrite = this.session.getOverwrite();
          this.$setOverwrite(overwrite);
          this.$pixelPos = pixelPos;
          this.restartTimer();
      };
      
      this.drawCursor = null;

      this.$setOverwrite = function(overwrite) {
          if (overwrite != this.overwrite) {
              this.overwrite = overwrite;
              if (overwrite)
                  dom.addCssClass(this.element, "ace_overwrite-cursors");
              else
                  dom.removeCssClass(this.element, "ace_overwrite-cursors");
          }
      };

      this.destroy = function() {
          clearInterval(this.intervalId);
          clearTimeout(this.timeoutId);
      };

  }).call(Cursor.prototype);

  exports.Cursor = Cursor;

  });

  ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var dom = acequire("./lib/dom");
  var event = acequire("./lib/event");
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var MAX_SCROLL_H = 0x8000;
  var ScrollBar = function(parent) {
      this.element = dom.createElement("div");
      this.element.className = "ace_scrollbar ace_scrollbar" + this.classSuffix;

      this.inner = dom.createElement("div");
      this.inner.className = "ace_scrollbar-inner";
      this.element.appendChild(this.inner);

      parent.appendChild(this.element);

      this.setVisible(false);
      this.skipEvent = false;

      event.addListener(this.element, "scroll", this.onScroll.bind(this));
      event.addListener(this.element, "mousedown", event.preventDefault);
  };

  (function() {
      oop.implement(this, EventEmitter);

      this.setVisible = function(isVisible) {
          this.element.style.display = isVisible ? "" : "none";
          this.isVisible = isVisible;
          this.coeff = 1;
      };
  }).call(ScrollBar.prototype);
  var VScrollBar = function(parent, renderer) {
      ScrollBar.call(this, parent);
      this.scrollTop = 0;
      this.scrollHeight = 0;
      renderer.$scrollbarWidth = 
      this.width = dom.scrollbarWidth(parent.ownerDocument);
      this.inner.style.width =
      this.element.style.width = (this.width || 15) + 5 + "px";
      this.$minWidth = 0;
  };

  oop.inherits(VScrollBar, ScrollBar);

  (function() {

      this.classSuffix = '-v';
      this.onScroll = function() {
          if (!this.skipEvent) {
              this.scrollTop = this.element.scrollTop;
              if (this.coeff != 1) {
                  var h = this.element.clientHeight / this.scrollHeight;
                  this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);
              }
              this._emit("scroll", {data: this.scrollTop});
          }
          this.skipEvent = false;
      };
      this.getWidth = function() {
          return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);
      };
      this.setHeight = function(height) {
          this.element.style.height = height + "px";
      };
      this.setInnerHeight =
      this.setScrollHeight = function(height) {
          this.scrollHeight = height;
          if (height > MAX_SCROLL_H) {
              this.coeff = MAX_SCROLL_H / height;
              height = MAX_SCROLL_H;
          } else if (this.coeff != 1) {
              this.coeff = 1;
          }
          this.inner.style.height = height + "px";
      };
      this.setScrollTop = function(scrollTop) {
          if (this.scrollTop != scrollTop) {
              this.skipEvent = true;
              this.scrollTop = scrollTop;
              this.element.scrollTop = scrollTop * this.coeff;
          }
      };

  }).call(VScrollBar.prototype);
  var HScrollBar = function(parent, renderer) {
      ScrollBar.call(this, parent);
      this.scrollLeft = 0;
      this.height = renderer.$scrollbarWidth;
      this.inner.style.height =
      this.element.style.height = (this.height || 15) + 5 + "px";
  };

  oop.inherits(HScrollBar, ScrollBar);

  (function() {

      this.classSuffix = '-h';
      this.onScroll = function() {
          if (!this.skipEvent) {
              this.scrollLeft = this.element.scrollLeft;
              this._emit("scroll", {data: this.scrollLeft});
          }
          this.skipEvent = false;
      };
      this.getHeight = function() {
          return this.isVisible ? this.height : 0;
      };
      this.setWidth = function(width) {
          this.element.style.width = width + "px";
      };
      this.setInnerWidth = function(width) {
          this.inner.style.width = width + "px";
      };
      this.setScrollWidth = function(width) {
          this.inner.style.width = width + "px";
      };
      this.setScrollLeft = function(scrollLeft) {
          if (this.scrollLeft != scrollLeft) {
              this.skipEvent = true;
              this.scrollLeft = this.element.scrollLeft = scrollLeft;
          }
      };

  }).call(HScrollBar.prototype);


  exports.ScrollBar = VScrollBar; // backward compatibility
  exports.ScrollBarV = VScrollBar; // backward compatibility
  exports.ScrollBarH = HScrollBar; // backward compatibility

  exports.VScrollBar = VScrollBar;
  exports.HScrollBar = HScrollBar;
  });

  ace.define("ace/renderloop",["require","exports","module","ace/lib/event"], function(acequire, exports, module) {

  var event = acequire("./lib/event");


  var RenderLoop = function(onRender, win) {
      this.onRender = onRender;
      this.pending = false;
      this.changes = 0;
      this.window = win || window;
  };

  (function() {


      this.schedule = function(change) {
          this.changes = this.changes | change;
          if (!this.pending && this.changes) {
              this.pending = true;
              var _self = this;
              event.nextFrame(function() {
                  _self.pending = false;
                  var changes;
                  while (changes = _self.changes) {
                      _self.changes = 0;
                      _self.onRender(changes);
                  }
              }, this.window);
          }
      };

  }).call(RenderLoop.prototype);

  exports.RenderLoop = RenderLoop;
  });

  ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var dom = acequire("../lib/dom");
  var lang = acequire("../lib/lang");
  var useragent = acequire("../lib/useragent");
  var EventEmitter = acequire("../lib/event_emitter").EventEmitter;

  var CHAR_COUNT = 0;

  var FontMetrics = exports.FontMetrics = function(parentEl) {
      this.el = dom.createElement("div");
      this.$setMeasureNodeStyles(this.el.style, true);
      
      this.$main = dom.createElement("div");
      this.$setMeasureNodeStyles(this.$main.style);
      
      this.$measureNode = dom.createElement("div");
      this.$setMeasureNodeStyles(this.$measureNode.style);
      
      
      this.el.appendChild(this.$main);
      this.el.appendChild(this.$measureNode);
      parentEl.appendChild(this.el);
      
      if (!CHAR_COUNT)
          this.$testFractionalRect();
      this.$measureNode.innerHTML = lang.stringRepeat("X", CHAR_COUNT);
      
      this.$characterSize = {width: 0, height: 0};
      this.checkForSizeChanges();
  };

  (function() {

      oop.implement(this, EventEmitter);
          
      this.$characterSize = {width: 0, height: 0};
      
      this.$testFractionalRect = function() {
          var el = dom.createElement("div");
          this.$setMeasureNodeStyles(el.style);
          el.style.width = "0.2px";
          document.documentElement.appendChild(el);
          var w = el.getBoundingClientRect().width;
          if (w > 0 && w < 1)
              CHAR_COUNT = 50;
          else
              CHAR_COUNT = 100;
          el.parentNode.removeChild(el);
      };
      
      this.$setMeasureNodeStyles = function(style, isRoot) {
          style.width = style.height = "auto";
          style.left = style.top = "0px";
          style.visibility = "hidden";
          style.position = "absolute";
          style.whiteSpace = "pre";

          if (useragent.isIE < 8) {
              style["font-family"] = "inherit";
          } else {
              style.font = "inherit";
          }
          style.overflow = isRoot ? "hidden" : "visible";
      };

      this.checkForSizeChanges = function() {
          var size = this.$measureSizes();
          if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {
              this.$measureNode.style.fontWeight = "bold";
              var boldSize = this.$measureSizes();
              this.$measureNode.style.fontWeight = "";
              this.$characterSize = size;
              this.charSizes = Object.create(null);
              this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;
              this._emit("changeCharacterSize", {data: size});
          }
      };

      this.$pollSizeChanges = function() {
          if (this.$pollSizeChangesTimer)
              return this.$pollSizeChangesTimer;
          var self = this;
          return this.$pollSizeChangesTimer = setInterval(function() {
              self.checkForSizeChanges();
          }, 500);
      };
      
      this.setPolling = function(val) {
          if (val) {
              this.$pollSizeChanges();
          } else if (this.$pollSizeChangesTimer) {
              clearInterval(this.$pollSizeChangesTimer);
              this.$pollSizeChangesTimer = 0;
          }
      };

      this.$measureSizes = function() {
          if (CHAR_COUNT === 50) {
              var rect = null;
              try { 
                 rect = this.$measureNode.getBoundingClientRect();
              } catch(e) {
                 rect = {width: 0, height:0 };
              }
              var size = {
                  height: rect.height,
                  width: rect.width / CHAR_COUNT
              };
          } else {
              var size = {
                  height: this.$measureNode.clientHeight,
                  width: this.$measureNode.clientWidth / CHAR_COUNT
              };
          }
          if (size.width === 0 || size.height === 0)
              return null;
          return size;
      };

      this.$measureCharWidth = function(ch) {
          this.$main.innerHTML = lang.stringRepeat(ch, CHAR_COUNT);
          var rect = this.$main.getBoundingClientRect();
          return rect.width / CHAR_COUNT;
      };
      
      this.getCharacterWidth = function(ch) {
          var w = this.charSizes[ch];
          if (w === undefined) {
              w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;
          }
          return w;
      };

      this.destroy = function() {
          clearInterval(this.$pollSizeChangesTimer);
          if (this.el && this.el.parentNode)
              this.el.parentNode.removeChild(this.el);
      };

  }).call(FontMetrics.prototype);

  });

  ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var dom = acequire("./lib/dom");
  var config = acequire("./config");
  var useragent = acequire("./lib/useragent");
  var GutterLayer = acequire("./layer/gutter").Gutter;
  var MarkerLayer = acequire("./layer/marker").Marker;
  var TextLayer = acequire("./layer/text").Text;
  var CursorLayer = acequire("./layer/cursor").Cursor;
  var HScrollBar = acequire("./scrollbar").HScrollBar;
  var VScrollBar = acequire("./scrollbar").VScrollBar;
  var RenderLoop = acequire("./renderloop").RenderLoop;
  var FontMetrics = acequire("./layer/font_metrics").FontMetrics;
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var editorCss = ".ace_editor {\
position: relative;\
overflow: hidden;\
font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\
direction: ltr;\
text-align: left;\
-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\
}\
.ace_scroller {\
position: absolute;\
overflow: hidden;\
top: 0;\
bottom: 0;\
background-color: inherit;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
cursor: text;\
}\
.ace_content {\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
min-width: 100%;\
}\
.ace_dragging .ace_scroller:before{\
position: absolute;\
top: 0;\
left: 0;\
right: 0;\
bottom: 0;\
content: '';\
background: rgba(250, 250, 250, 0.01);\
z-index: 1000;\
}\
.ace_dragging.ace_dark .ace_scroller:before{\
background: rgba(0, 0, 0, 0.01);\
}\
.ace_selecting, .ace_selecting * {\
cursor: text !important;\
}\
.ace_gutter {\
position: absolute;\
overflow : hidden;\
width: auto;\
top: 0;\
bottom: 0;\
left: 0;\
cursor: default;\
z-index: 4;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
}\
.ace_gutter-active-line {\
position: absolute;\
left: 0;\
right: 0;\
}\
.ace_scroller.ace_scroll-left {\
box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\
}\
.ace_gutter-cell {\
padding-left: 19px;\
padding-right: 6px;\
background-repeat: no-repeat;\
}\
.ace_gutter-cell.ace_error {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_warning {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\
background-position: 2px center;\
}\
.ace_dark .ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\
}\
.ace_scrollbar {\
position: absolute;\
right: 0;\
bottom: 0;\
z-index: 6;\
}\
.ace_scrollbar-inner {\
position: absolute;\
cursor: text;\
left: 0;\
top: 0;\
}\
.ace_scrollbar-v{\
overflow-x: hidden;\
overflow-y: scroll;\
top: 0;\
}\
.ace_scrollbar-h {\
overflow-x: scroll;\
overflow-y: hidden;\
left: 0;\
}\
.ace_print-margin {\
position: absolute;\
height: 100%;\
}\
.ace_text-input {\
position: absolute;\
z-index: 0;\
width: 0.5em;\
height: 1em;\
opacity: 0;\
background: transparent;\
-moz-appearance: none;\
appearance: none;\
border: none;\
resize: none;\
outline: none;\
overflow: hidden;\
font: inherit;\
padding: 0 1px;\
margin: 0 -1px;\
text-indent: -1em;\
-ms-user-select: text;\
-moz-user-select: text;\
-webkit-user-select: text;\
user-select: text;\
white-space: pre!important;\
}\
.ace_text-input.ace_composition {\
background: inherit;\
color: inherit;\
z-index: 1000;\
opacity: 1;\
text-indent: 0;\
}\
.ace_layer {\
z-index: 1;\
position: absolute;\
overflow: hidden;\
word-wrap: normal;\
white-space: pre;\
height: 100%;\
width: 100%;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
pointer-events: none;\
}\
.ace_gutter-layer {\
position: relative;\
width: auto;\
text-align: right;\
pointer-events: auto;\
}\
.ace_text-layer {\
font: inherit !important;\
}\
.ace_cjk {\
display: inline-block;\
text-align: center;\
}\
.ace_cursor-layer {\
z-index: 4;\
}\
.ace_cursor {\
z-index: 4;\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
border-left: 2px solid;\
transform: translatez(0);\
}\
.ace_multiselect .ace_cursor {\
border-left-width: 1px;\
}\
.ace_slim-cursors .ace_cursor {\
border-left-width: 1px;\
}\
.ace_overwrite-cursors .ace_cursor {\
border-left-width: 0;\
border-bottom: 1px solid;\
}\
.ace_hidden-cursors .ace_cursor {\
opacity: 0.2;\
}\
.ace_smooth-blinking .ace_cursor {\
-webkit-transition: opacity 0.18s;\
transition: opacity 0.18s;\
}\
.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\
position: absolute;\
z-index: 3;\
}\
.ace_marker-layer .ace_selection {\
position: absolute;\
z-index: 5;\
}\
.ace_marker-layer .ace_bracket {\
position: absolute;\
z-index: 6;\
}\
.ace_marker-layer .ace_active-line {\
position: absolute;\
z-index: 2;\
}\
.ace_marker-layer .ace_selected-word {\
position: absolute;\
z-index: 4;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
}\
.ace_line .ace_fold {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
display: inline-block;\
height: 11px;\
margin-top: -2px;\
vertical-align: middle;\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\
background-repeat: no-repeat, repeat-x;\
background-position: center center, top left;\
color: transparent;\
border: 1px solid black;\
border-radius: 2px;\
cursor: pointer;\
pointer-events: auto;\
}\
.ace_dark .ace_fold {\
}\
.ace_fold:hover{\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\
}\
.ace_tooltip {\
background-color: #FFF;\
background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\
background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\
border: 1px solid gray;\
border-radius: 1px;\
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\
color: black;\
max-width: 100%;\
padding: 3px 4px;\
position: fixed;\
z-index: 999999;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
cursor: default;\
white-space: pre;\
word-wrap: break-word;\
line-height: normal;\
font-style: normal;\
font-weight: normal;\
letter-spacing: normal;\
pointer-events: none;\
}\
.ace_folding-enabled > .ace_gutter-cell {\
padding-right: 13px;\
}\
.ace_fold-widget {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
margin: 0 -12px 0 1px;\
display: none;\
width: 11px;\
vertical-align: top;\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: center;\
border-radius: 3px;\
border: 1px solid transparent;\
cursor: pointer;\
}\
.ace_folding-enabled .ace_fold-widget {\
display: inline-block;   \
}\
.ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\
}\
.ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\
}\
.ace_fold-widget:hover {\
border: 1px solid rgba(0, 0, 0, 0.3);\
background-color: rgba(255, 255, 255, 0.2);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\
}\
.ace_fold-widget:active {\
border: 1px solid rgba(0, 0, 0, 0.4);\
background-color: rgba(0, 0, 0, 0.05);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\
}\
.ace_dark .ace_fold-widget {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\
}\
.ace_dark .ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget:hover {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
background-color: rgba(255, 255, 255, 0.1);\
}\
.ace_dark .ace_fold-widget:active {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
}\
.ace_fold-widget.ace_invalid {\
background-color: #FFB4B4;\
border-color: #DE5555;\
}\
.ace_fade-fold-widgets .ace_fold-widget {\
-webkit-transition: opacity 0.4s ease 0.05s;\
transition: opacity 0.4s ease 0.05s;\
opacity: 0;\
}\
.ace_fade-fold-widgets:hover .ace_fold-widget {\
-webkit-transition: opacity 0.05s ease 0.05s;\
transition: opacity 0.05s ease 0.05s;\
opacity:1;\
}\
.ace_underline {\
text-decoration: underline;\
}\
.ace_bold {\
font-weight: bold;\
}\
.ace_nobold .ace_bold {\
font-weight: normal;\
}\
.ace_italic {\
font-style: italic;\
}\
.ace_error-marker {\
background-color: rgba(255, 0, 0,0.2);\
position: absolute;\
z-index: 9;\
}\
.ace_highlight-marker {\
background-color: rgba(255, 255, 0,0.2);\
position: absolute;\
z-index: 8;\
}\
.ace_br1 {border-top-left-radius    : 3px;}\
.ace_br2 {border-top-right-radius   : 3px;}\
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\
.ace_br4 {border-bottom-right-radius: 3px;}\
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\
.ace_br8 {border-bottom-left-radius : 3px;}\
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\
.ace_text-input-ios {\
position: absolute !important;\
top: -100000px !important;\
left: -100000px !important;\
}\
";

  dom.importCssString(editorCss, "ace_editor.css");

  var VirtualRenderer = function(container, theme) {
      var _self = this;

      this.container = container || dom.createElement("div");
      this.$keepTextAreaAtCursor = !useragent.isOldIE;

      dom.addCssClass(this.container, "ace_editor");

      this.setTheme(theme);

      this.$gutter = dom.createElement("div");
      this.$gutter.className = "ace_gutter";
      this.container.appendChild(this.$gutter);
      this.$gutter.setAttribute("aria-hidden", true);

      this.scroller = dom.createElement("div");
      this.scroller.className = "ace_scroller";
      this.container.appendChild(this.scroller);

      this.content = dom.createElement("div");
      this.content.className = "ace_content";
      this.scroller.appendChild(this.content);

      this.$gutterLayer = new GutterLayer(this.$gutter);
      this.$gutterLayer.on("changeGutterWidth", this.onGutterResize.bind(this));

      this.$markerBack = new MarkerLayer(this.content);

      var textLayer = this.$textLayer = new TextLayer(this.content);
      this.canvas = textLayer.element;

      this.$markerFront = new MarkerLayer(this.content);

      this.$cursorLayer = new CursorLayer(this.content);
      this.$horizScroll = false;
      this.$vScroll = false;

      this.scrollBar = 
      this.scrollBarV = new VScrollBar(this.container, this);
      this.scrollBarH = new HScrollBar(this.container, this);
      this.scrollBarV.addEventListener("scroll", function(e) {
          if (!_self.$scrollAnimation)
              _self.session.setScrollTop(e.data - _self.scrollMargin.top);
      });
      this.scrollBarH.addEventListener("scroll", function(e) {
          if (!_self.$scrollAnimation)
              _self.session.setScrollLeft(e.data - _self.scrollMargin.left);
      });

      this.scrollTop = 0;
      this.scrollLeft = 0;

      this.cursorPos = {
          row : 0,
          column : 0
      };

      this.$fontMetrics = new FontMetrics(this.container);
      this.$textLayer.$setFontMetrics(this.$fontMetrics);
      this.$textLayer.addEventListener("changeCharacterSize", function(e) {
          _self.updateCharacterSize();
          _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);
          _self._signal("changeCharacterSize", e);
      });

      this.$size = {
          width: 0,
          height: 0,
          scrollerHeight: 0,
          scrollerWidth: 0,
          $dirty: true
      };

      this.layerConfig = {
          width : 1,
          padding : 0,
          firstRow : 0,
          firstRowScreen: 0,
          lastRow : 0,
          lineHeight : 0,
          characterWidth : 0,
          minHeight : 1,
          maxHeight : 1,
          offset : 0,
          height : 1,
          gutterOffset: 1
      };
      
      this.scrollMargin = {
          left: 0,
          right: 0,
          top: 0,
          bottom: 0,
          v: 0,
          h: 0
      };

      this.$loop = new RenderLoop(
          this.$renderChanges.bind(this),
          this.container.ownerDocument.defaultView
      );
      this.$loop.schedule(this.CHANGE_FULL);

      this.updateCharacterSize();
      this.setPadding(4);
      config.resetOptions(this);
      config._emit("renderer", this);
  };

  (function() {

      this.CHANGE_CURSOR = 1;
      this.CHANGE_MARKER = 2;
      this.CHANGE_GUTTER = 4;
      this.CHANGE_SCROLL = 8;
      this.CHANGE_LINES = 16;
      this.CHANGE_TEXT = 32;
      this.CHANGE_SIZE = 64;
      this.CHANGE_MARKER_BACK = 128;
      this.CHANGE_MARKER_FRONT = 256;
      this.CHANGE_FULL = 512;
      this.CHANGE_H_SCROLL = 1024;

      oop.implement(this, EventEmitter);

      this.updateCharacterSize = function() {
          if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {
              this.$allowBoldFonts = this.$textLayer.allowBoldFonts;
              this.setStyle("ace_nobold", !this.$allowBoldFonts);
          }

          this.layerConfig.characterWidth =
          this.characterWidth = this.$textLayer.getCharacterWidth();
          this.layerConfig.lineHeight =
          this.lineHeight = this.$textLayer.getLineHeight();
          this.$updatePrintMargin();
      };
      this.setSession = function(session) {
          if (this.session)
              this.session.doc.off("changeNewLineMode", this.onChangeNewLineMode);
              
          this.session = session;
          if (session && this.scrollMargin.top && session.getScrollTop() <= 0)
              session.setScrollTop(-this.scrollMargin.top);

          this.$cursorLayer.setSession(session);
          this.$markerBack.setSession(session);
          this.$markerFront.setSession(session);
          this.$gutterLayer.setSession(session);
          this.$textLayer.setSession(session);
          if (!session)
              return;
          
          this.$loop.schedule(this.CHANGE_FULL);
          this.session.$setFontMetrics(this.$fontMetrics);
          this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;
          
          this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);
          this.onChangeNewLineMode();
          this.session.doc.on("changeNewLineMode", this.onChangeNewLineMode);
      };
      this.updateLines = function(firstRow, lastRow, force) {
          if (lastRow === undefined)
              lastRow = Infinity;

          if (!this.$changedLines) {
              this.$changedLines = {
                  firstRow: firstRow,
                  lastRow: lastRow
              };
          }
          else {
              if (this.$changedLines.firstRow > firstRow)
                  this.$changedLines.firstRow = firstRow;

              if (this.$changedLines.lastRow < lastRow)
                  this.$changedLines.lastRow = lastRow;
          }
          if (this.$changedLines.lastRow < this.layerConfig.firstRow) {
              if (force)
                  this.$changedLines.lastRow = this.layerConfig.lastRow;
              else
                  return;
          }
          if (this.$changedLines.firstRow > this.layerConfig.lastRow)
              return;
          this.$loop.schedule(this.CHANGE_LINES);
      };

      this.onChangeNewLineMode = function() {
          this.$loop.schedule(this.CHANGE_TEXT);
          this.$textLayer.$updateEolChar();
          this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);
      };
      
      this.onChangeTabSize = function() {
          this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);
          this.$textLayer.onChangeTabSize();
      };
      this.updateText = function() {
          this.$loop.schedule(this.CHANGE_TEXT);
      };
      this.updateFull = function(force) {
          if (force)
              this.$renderChanges(this.CHANGE_FULL, true);
          else
              this.$loop.schedule(this.CHANGE_FULL);
      };
      this.updateFontSize = function() {
          this.$textLayer.checkForSizeChanges();
      };

      this.$changes = 0;
      this.$updateSizeAsync = function() {
          if (this.$loop.pending)
              this.$size.$dirty = true;
          else
              this.onResize();
      };
      this.onResize = function(force, gutterWidth, width, height) {
          if (this.resizing > 2)
              return;
          else if (this.resizing > 0)
              this.resizing++;
          else
              this.resizing = force ? 1 : 0;
          var el = this.container;
          if (!height)
              height = el.clientHeight || el.scrollHeight;
          if (!width)
              width = el.clientWidth || el.scrollWidth;
          var changes = this.$updateCachedSize(force, gutterWidth, width, height);

          
          if (!this.$size.scrollerHeight || (!width && !height))
              return this.resizing = 0;

          if (force)
              this.$gutterLayer.$padding = null;

          if (force)
              this.$renderChanges(changes | this.$changes, true);
          else
              this.$loop.schedule(changes | this.$changes);

          if (this.resizing)
              this.resizing = 0;
          this.scrollBarV.scrollLeft = this.scrollBarV.scrollTop = null;
      };
      
      this.$updateCachedSize = function(force, gutterWidth, width, height) {
          height -= (this.$extraHeight || 0);
          var changes = 0;
          var size = this.$size;
          var oldSize = {
              width: size.width,
              height: size.height,
              scrollerHeight: size.scrollerHeight,
              scrollerWidth: size.scrollerWidth
          };
          if (height && (force || size.height != height)) {
              size.height = height;
              changes |= this.CHANGE_SIZE;

              size.scrollerHeight = size.height;
              if (this.$horizScroll)
                  size.scrollerHeight -= this.scrollBarH.getHeight();
              this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + "px";

              changes = changes | this.CHANGE_SCROLL;
          }

          if (width && (force || size.width != width)) {
              changes |= this.CHANGE_SIZE;
              size.width = width;
              
              if (gutterWidth == null)
                  gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;
              
              this.gutterWidth = gutterWidth;
              
              this.scrollBarH.element.style.left = 
              this.scroller.style.left = gutterWidth + "px";
              size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth());           
              
              this.scrollBarH.element.style.right = 
              this.scroller.style.right = this.scrollBarV.getWidth() + "px";
              this.scroller.style.bottom = this.scrollBarH.getHeight() + "px";

              if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force)
                  changes |= this.CHANGE_FULL;
          }
          
          size.$dirty = !width || !height;

          if (changes)
              this._signal("resize", oldSize);

          return changes;
      };

      this.onGutterResize = function() {
          var gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;
          if (gutterWidth != this.gutterWidth)
              this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);

          if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {
              this.$loop.schedule(this.CHANGE_FULL);
          } else if (this.$size.$dirty) {
              this.$loop.schedule(this.CHANGE_FULL);
          } else {
              this.$computeLayerConfig();
              this.$loop.schedule(this.CHANGE_MARKER);
          }
      };
      this.adjustWrapLimit = function() {
          var availableWidth = this.$size.scrollerWidth - this.$padding * 2;
          var limit = Math.floor(availableWidth / this.characterWidth);
          return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);
      };
      this.setAnimatedScroll = function(shouldAnimate){
          this.setOption("animatedScroll", shouldAnimate);
      };
      this.getAnimatedScroll = function() {
          return this.$animatedScroll;
      };
      this.setShowInvisibles = function(showInvisibles) {
          this.setOption("showInvisibles", showInvisibles);
          this.session.$bidiHandler.setShowInvisibles(showInvisibles);
      };
      this.getShowInvisibles = function() {
          return this.getOption("showInvisibles");
      };
      this.getDisplayIndentGuides = function() {
          return this.getOption("displayIndentGuides");
      };

      this.setDisplayIndentGuides = function(display) {
          this.setOption("displayIndentGuides", display);
      };
      this.setShowPrintMargin = function(showPrintMargin) {
          this.setOption("showPrintMargin", showPrintMargin);
      };
      this.getShowPrintMargin = function() {
          return this.getOption("showPrintMargin");
      };
      this.setPrintMarginColumn = function(showPrintMargin) {
          this.setOption("printMarginColumn", showPrintMargin);
      };
      this.getPrintMarginColumn = function() {
          return this.getOption("printMarginColumn");
      };
      this.getShowGutter = function(){
          return this.getOption("showGutter");
      };
      this.setShowGutter = function(show){
          return this.setOption("showGutter", show);
      };

      this.getFadeFoldWidgets = function(){
          return this.getOption("fadeFoldWidgets");
      };

      this.setFadeFoldWidgets = function(show) {
          this.setOption("fadeFoldWidgets", show);
      };

      this.setHighlightGutterLine = function(shouldHighlight) {
          this.setOption("highlightGutterLine", shouldHighlight);
      };

      this.getHighlightGutterLine = function() {
          return this.getOption("highlightGutterLine");
      };

      this.$updateGutterLineHighlight = function() {
          var pos = this.$cursorLayer.$pixelPos;
          var height = this.layerConfig.lineHeight;
          if (this.session.getUseWrapMode()) {
              var cursor = this.session.selection.getCursor();
              cursor.column = 0;
              pos = this.$cursorLayer.getPixelPosition(cursor, true);
              height *= this.session.getRowLength(cursor.row);
          }
          this.$gutterLineHighlight.style.top = pos.top - this.layerConfig.offset + "px";
          this.$gutterLineHighlight.style.height = height + "px";
      };

      this.$updatePrintMargin = function() {
          if (!this.$showPrintMargin && !this.$printMarginEl)
              return;

          if (!this.$printMarginEl) {
              var containerEl = dom.createElement("div");
              containerEl.className = "ace_layer ace_print-margin-layer";
              this.$printMarginEl = dom.createElement("div");
              this.$printMarginEl.className = "ace_print-margin";
              containerEl.appendChild(this.$printMarginEl);
              this.content.insertBefore(containerEl, this.content.firstChild);
          }

          var style = this.$printMarginEl.style;
          style.left = ((this.characterWidth * this.$printMarginColumn) + this.$padding) + "px";
          style.visibility = this.$showPrintMargin ? "visible" : "hidden";
          
          if (this.session && this.session.$wrap == -1)
              this.adjustWrapLimit();
      };
      this.getContainerElement = function() {
          return this.container;
      };
      this.getMouseEventTarget = function() {
          return this.scroller;
      };
      this.getTextAreaContainer = function() {
          return this.container;
      };
      this.$moveTextAreaToCursor = function() {
          if (!this.$keepTextAreaAtCursor)
              return;
          var config = this.layerConfig;
          var posTop = this.$cursorLayer.$pixelPos.top;
          var posLeft = this.$cursorLayer.$pixelPos.left;
          posTop -= config.offset;

          var style = this.textarea.style;
          var h = this.lineHeight;
          if (posTop < 0 || posTop > config.height - h) {
              style.top = style.left = "0";
              return;
          }

          var w = this.characterWidth;
          if (this.$composition) {
              var val = this.textarea.value.replace(/^\x01+/, "");
              w *= (this.session.$getStringScreenWidth(val)[0]+2);
              h += 2;
          }
          posLeft -= this.scrollLeft;
          if (posLeft > this.$size.scrollerWidth - w)
              posLeft = this.$size.scrollerWidth - w;

          posLeft += this.gutterWidth;
          style.height = h + "px";
          style.width = w + "px";
          style.left = Math.min(posLeft, this.$size.scrollerWidth - w) + "px";
          style.top = Math.min(posTop, this.$size.height - h) + "px";
      };
      this.getFirstVisibleRow = function() {
          return this.layerConfig.firstRow;
      };
      this.getFirstFullyVisibleRow = function() {
          return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);
      };
      this.getLastFullyVisibleRow = function() {
          var config = this.layerConfig;
          var lastRow = config.lastRow;
          var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;
          if (top - this.session.getScrollTop() > config.height - config.lineHeight)
              return lastRow - 1;
          return lastRow;
      };
      this.getLastVisibleRow = function() {
          return this.layerConfig.lastRow;
      };

      this.$padding = null;
      this.setPadding = function(padding) {
          this.$padding = padding;
          this.$textLayer.setPadding(padding);
          this.$cursorLayer.setPadding(padding);
          this.$markerFront.setPadding(padding);
          this.$markerBack.setPadding(padding);
          this.$loop.schedule(this.CHANGE_FULL);
          this.$updatePrintMargin();
      };
      
      this.setScrollMargin = function(top, bottom, left, right) {
          var sm = this.scrollMargin;
          sm.top = top|0;
          sm.bottom = bottom|0;
          sm.right = right|0;
          sm.left = left|0;
          sm.v = sm.top + sm.bottom;
          sm.h = sm.left + sm.right;
          if (sm.top && this.scrollTop <= 0 && this.session)
              this.session.setScrollTop(-sm.top);
          this.updateFull();
      };
      this.getHScrollBarAlwaysVisible = function() {
          return this.$hScrollBarAlwaysVisible;
      };
      this.setHScrollBarAlwaysVisible = function(alwaysVisible) {
          this.setOption("hScrollBarAlwaysVisible", alwaysVisible);
      };
      this.getVScrollBarAlwaysVisible = function() {
          return this.$vScrollBarAlwaysVisible;
      };
      this.setVScrollBarAlwaysVisible = function(alwaysVisible) {
          this.setOption("vScrollBarAlwaysVisible", alwaysVisible);
      };

      this.$updateScrollBarV = function() {
          var scrollHeight = this.layerConfig.maxHeight;
          var scrollerHeight = this.$size.scrollerHeight;
          if (!this.$maxLines && this.$scrollPastEnd) {
              scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;
              if (this.scrollTop > scrollHeight - scrollerHeight) {
                  scrollHeight = this.scrollTop + scrollerHeight;
                  this.scrollBarV.scrollTop = null;
              }
          }
          this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);
          this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);
      };
      this.$updateScrollBarH = function() {
          this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);
          this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);
      };
      
      this.$frozen = false;
      this.freeze = function() {
          this.$frozen = true;
      };
      
      this.unfreeze = function() {
          this.$frozen = false;
      };

      this.$renderChanges = function(changes, force) {
          if (this.$changes) {
              changes |= this.$changes;
              this.$changes = 0;
          }
          if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {
              this.$changes |= changes;
              return; 
          } 
          if (this.$size.$dirty) {
              this.$changes |= changes;
              return this.onResize(true);
          }
          if (!this.lineHeight) {
              this.$textLayer.checkForSizeChanges();
          }
          
          this._signal("beforeRender");

          if (this.session && this.session.$bidiHandler)
              this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);

          var config = this.layerConfig;
          if (changes & this.CHANGE_FULL ||
              changes & this.CHANGE_SIZE ||
              changes & this.CHANGE_TEXT ||
              changes & this.CHANGE_LINES ||
              changes & this.CHANGE_SCROLL ||
              changes & this.CHANGE_H_SCROLL
          ) {
              changes |= this.$computeLayerConfig();
              if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {
                  var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;
                  if (st > 0) {
                      this.scrollTop = st;
                      changes = changes | this.CHANGE_SCROLL;
                      changes |= this.$computeLayerConfig();
                  }
              }
              config = this.layerConfig;
              this.$updateScrollBarV();
              if (changes & this.CHANGE_H_SCROLL)
                  this.$updateScrollBarH();
              this.$gutterLayer.element.style.marginTop = (-config.offset) + "px";
              this.content.style.marginTop = (-config.offset) + "px";
              this.content.style.width = config.width + 2 * this.$padding + "px";
              this.content.style.height = config.minHeight + "px";
          }
          if (changes & this.CHANGE_H_SCROLL) {
              this.content.style.marginLeft = -this.scrollLeft + "px";
              this.scroller.className = this.scrollLeft <= 0 ? "ace_scroller" : "ace_scroller ace_scroll-left";
          }
          if (changes & this.CHANGE_FULL) {
              this.$textLayer.update(config);
              if (this.$showGutter)
                  this.$gutterLayer.update(config);
              this.$markerBack.update(config);
              this.$markerFront.update(config);
              this.$cursorLayer.update(config);
              this.$moveTextAreaToCursor();
              this.$highlightGutterLine && this.$updateGutterLineHighlight();
              this._signal("afterRender");
              return;
          }
          if (changes & this.CHANGE_SCROLL) {
              if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)
                  this.$textLayer.update(config);
              else
                  this.$textLayer.scrollLines(config);

              if (this.$showGutter)
                  this.$gutterLayer.update(config);
              this.$markerBack.update(config);
              this.$markerFront.update(config);
              this.$cursorLayer.update(config);
              this.$highlightGutterLine && this.$updateGutterLineHighlight();
              this.$moveTextAreaToCursor();
              this._signal("afterRender");
              return;
          }

          if (changes & this.CHANGE_TEXT) {
              this.$textLayer.update(config);
              if (this.$showGutter)
                  this.$gutterLayer.update(config);
          }
          else if (changes & this.CHANGE_LINES) {
              if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)
                  this.$gutterLayer.update(config);
          }
          else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {
              if (this.$showGutter)
                  this.$gutterLayer.update(config);
          }

          if (changes & this.CHANGE_CURSOR) {
              this.$cursorLayer.update(config);
              this.$moveTextAreaToCursor();
              this.$highlightGutterLine && this.$updateGutterLineHighlight();
          }

          if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {
              this.$markerFront.update(config);
          }

          if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {
              this.$markerBack.update(config);
          }

          this._signal("afterRender");
      };

      
      this.$autosize = function() {
          var height = this.session.getScreenLength() * this.lineHeight;
          var maxHeight = this.$maxLines * this.lineHeight;
          var desiredHeight = Math.min(maxHeight,
              Math.max((this.$minLines || 1) * this.lineHeight, height)
          ) + this.scrollMargin.v + (this.$extraHeight || 0);
          if (this.$horizScroll)
              desiredHeight += this.scrollBarH.getHeight();
          if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)
              desiredHeight = this.$maxPixelHeight;
          var vScroll = height > maxHeight;
          
          if (desiredHeight != this.desiredHeight ||
              this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {
              if (vScroll != this.$vScroll) {
                  this.$vScroll = vScroll;
                  this.scrollBarV.setVisible(vScroll);
              }
              
              var w = this.container.clientWidth;
              this.container.style.height = desiredHeight + "px";
              this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);
              this.desiredHeight = desiredHeight;
              
              this._signal("autosize");
          }
      };
      
      this.$computeLayerConfig = function() {
          var session = this.session;
          var size = this.$size;
          
          var hideScrollbars = size.height <= 2 * this.lineHeight;
          var screenLines = this.session.getScreenLength();
          var maxHeight = screenLines * this.lineHeight;

          var longestLine = this.$getLongestLine();
          
          var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||
              size.scrollerWidth - longestLine - 2 * this.$padding < 0);

          var hScrollChanged = this.$horizScroll !== horizScroll;
          if (hScrollChanged) {
              this.$horizScroll = horizScroll;
              this.scrollBarH.setVisible(horizScroll);
          }
          var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine
          if (this.$maxLines && this.lineHeight > 1)
              this.$autosize();

          var offset = this.scrollTop % this.lineHeight;
          var minHeight = size.scrollerHeight + this.lineHeight;
          
          var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd
              ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd
              : 0;
          maxHeight += scrollPastEnd;
          
          var sm = this.scrollMargin;
          this.session.setScrollTop(Math.max(-sm.top,
              Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));

          this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, 
              longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));
          
          var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||
              size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);
          var vScrollChanged = vScrollBefore !== vScroll;
          if (vScrollChanged) {
              this.$vScroll = vScroll;
              this.scrollBarV.setVisible(vScroll);
          }

          var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;
          var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));
          var lastRow = firstRow + lineCount;
          var firstRowScreen, firstRowHeight;
          var lineHeight = this.lineHeight;
          firstRow = session.screenToDocumentRow(firstRow, 0);
          var foldLine = session.getFoldLine(firstRow);
          if (foldLine) {
              firstRow = foldLine.start.row;
          }

          firstRowScreen = session.documentToScreenRow(firstRow, 0);
          firstRowHeight = session.getRowLength(firstRow) * lineHeight;

          lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);
          minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +
                                                  firstRowHeight;

          offset = this.scrollTop - firstRowScreen * lineHeight;

          var changes = 0;
          if (this.layerConfig.width != longestLine) 
              changes = this.CHANGE_H_SCROLL;
          if (hScrollChanged || vScrollChanged) {
              changes = this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);
              this._signal("scrollbarVisibilityChanged");
              if (vScrollChanged)
                  longestLine = this.$getLongestLine();
          }
          
          this.layerConfig = {
              width : longestLine,
              padding : this.$padding,
              firstRow : firstRow,
              firstRowScreen: firstRowScreen,
              lastRow : lastRow,
              lineHeight : lineHeight,
              characterWidth : this.characterWidth,
              minHeight : minHeight,
              maxHeight : maxHeight,
              offset : offset,
              gutterOffset : lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,
              height : this.$size.scrollerHeight
          };

          return changes;
      };

      this.$updateLines = function() {
          if (!this.$changedLines) return;
          var firstRow = this.$changedLines.firstRow;
          var lastRow = this.$changedLines.lastRow;
          this.$changedLines = null;

          var layerConfig = this.layerConfig;

          if (firstRow > layerConfig.lastRow + 1) { return; }
          if (lastRow < layerConfig.firstRow) { return; }
          if (lastRow === Infinity) {
              if (this.$showGutter)
                  this.$gutterLayer.update(layerConfig);
              this.$textLayer.update(layerConfig);
              return;
          }
          this.$textLayer.updateLines(layerConfig, firstRow, lastRow);
          return true;
      };

      this.$getLongestLine = function() {
          var charCount = this.session.getScreenWidth();
          if (this.showInvisibles && !this.session.$useWrapMode)
              charCount += 1;

          return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));
      };
      this.updateFrontMarkers = function() {
          this.$markerFront.setMarkers(this.session.getMarkers(true));
          this.$loop.schedule(this.CHANGE_MARKER_FRONT);
      };
      this.updateBackMarkers = function() {
          this.$markerBack.setMarkers(this.session.getMarkers());
          this.$loop.schedule(this.CHANGE_MARKER_BACK);
      };
      this.addGutterDecoration = function(row, className){
          this.$gutterLayer.addGutterDecoration(row, className);
      };
      this.removeGutterDecoration = function(row, className){
          this.$gutterLayer.removeGutterDecoration(row, className);
      };
      this.updateBreakpoints = function(rows) {
          this.$loop.schedule(this.CHANGE_GUTTER);
      };
      this.setAnnotations = function(annotations) {
          this.$gutterLayer.setAnnotations(annotations);
          this.$loop.schedule(this.CHANGE_GUTTER);
      };
      this.updateCursor = function() {
          this.$loop.schedule(this.CHANGE_CURSOR);
      };
      this.hideCursor = function() {
          this.$cursorLayer.hideCursor();
      };
      this.showCursor = function() {
          this.$cursorLayer.showCursor();
      };

      this.scrollSelectionIntoView = function(anchor, lead, offset) {
          this.scrollCursorIntoView(anchor, offset);
          this.scrollCursorIntoView(lead, offset);
      };
      this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {
          if (this.$size.scrollerHeight === 0)
              return;

          var pos = this.$cursorLayer.getPixelPosition(cursor);

          var left = pos.left;
          var top = pos.top;
          
          var topMargin = $viewMargin && $viewMargin.top || 0;
          var bottomMargin = $viewMargin && $viewMargin.bottom || 0;
          
          var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;
          
          if (scrollTop + topMargin > top) {
              if (offset && scrollTop + topMargin > top + this.lineHeight)
                  top -= offset * this.$size.scrollerHeight;
              if (top === 0)
                  top = -this.scrollMargin.top;
              this.session.setScrollTop(top);
          } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {
              if (offset && scrollTop + this.$size.scrollerHeight - bottomMargin < top -  this.lineHeight)
                  top += offset * this.$size.scrollerHeight;
              this.session.setScrollTop(top + this.lineHeight - this.$size.scrollerHeight);
          }

          var scrollLeft = this.scrollLeft;

          if (scrollLeft > left) {
              if (left < this.$padding + 2 * this.layerConfig.characterWidth)
                  left = -this.scrollMargin.left;
              this.session.setScrollLeft(left);
          } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) {
              this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));
          } else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) {
              this.session.setScrollLeft(0);
          }
      };
      this.getScrollTop = function() {
          return this.session.getScrollTop();
      };
      this.getScrollLeft = function() {
          return this.session.getScrollLeft();
      };
      this.getScrollTopRow = function() {
          return this.scrollTop / this.lineHeight;
      };
      this.getScrollBottomRow = function() {
          return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);
      };
      this.scrollToRow = function(row) {
          this.session.setScrollTop(row * this.lineHeight);
      };

      this.alignCursor = function(cursor, alignment) {
          if (typeof cursor == "number")
              cursor = {row: cursor, column: 0};

          var pos = this.$cursorLayer.getPixelPosition(cursor);
          var h = this.$size.scrollerHeight - this.lineHeight;
          var offset = pos.top - h * (alignment || 0);

          this.session.setScrollTop(offset);
          return offset;
      };

      this.STEPS = 8;
      this.$calcSteps = function(fromValue, toValue){
          var i = 0;
          var l = this.STEPS;
          var steps = [];

          var func  = function(t, x_min, dx) {
              return dx * (Math.pow(t - 1, 3) + 1) + x_min;
          };

          for (i = 0; i < l; ++i)
              steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));

          return steps;
      };
      this.scrollToLine = function(line, center, animate, callback) {
          var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});
          var offset = pos.top;
          if (center)
              offset -= this.$size.scrollerHeight / 2;

          var initialScroll = this.scrollTop;
          this.session.setScrollTop(offset);
          if (animate !== false)
              this.animateScrolling(initialScroll, callback);
      };

      this.animateScrolling = function(fromValue, callback) {
          var toValue = this.scrollTop;
          if (!this.$animatedScroll)
              return;
          var _self = this;
          
          if (fromValue == toValue)
              return;
          
          if (this.$scrollAnimation) {
              var oldSteps = this.$scrollAnimation.steps;
              if (oldSteps.length) {
                  fromValue = oldSteps[0];
                  if (fromValue == toValue)
                      return;
              }
          }
          
          var steps = _self.$calcSteps(fromValue, toValue);
          this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};

          clearInterval(this.$timer);

          _self.session.setScrollTop(steps.shift());
          _self.session.$scrollTop = toValue;
          this.$timer = setInterval(function() {
              if (steps.length) {
                  _self.session.setScrollTop(steps.shift());
                  _self.session.$scrollTop = toValue;
              } else if (toValue != null) {
                  _self.session.$scrollTop = -1;
                  _self.session.setScrollTop(toValue);
                  toValue = null;
              } else {
                  _self.$timer = clearInterval(_self.$timer);
                  _self.$scrollAnimation = null;
                  callback && callback();
              }
          }, 10);
      };
      this.scrollToY = function(scrollTop) {
          if (this.scrollTop !== scrollTop) {
              this.$loop.schedule(this.CHANGE_SCROLL);
              this.scrollTop = scrollTop;
          }
      };
      this.scrollToX = function(scrollLeft) {
          if (this.scrollLeft !== scrollLeft)
              this.scrollLeft = scrollLeft;
          this.$loop.schedule(this.CHANGE_H_SCROLL);
      };
      this.scrollTo = function(x, y) {
          this.session.setScrollTop(y);
          this.session.setScrollLeft(y);
      };
      this.scrollBy = function(deltaX, deltaY) {
          deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);
          deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);
      };
      this.isScrollableBy = function(deltaX, deltaY) {
          if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)
             return true;
          if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight
              - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)
             return true;
          if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)
              return true;
          if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth
              - this.layerConfig.width < -1 + this.scrollMargin.right)
             return true;
      };

      this.pixelToScreenCoordinates = function(x, y) {
          var canvasPos = this.scroller.getBoundingClientRect();

          var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;
          var offset = offsetX / this.characterWidth;
          var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);
          var col = Math.round(offset);

          return {row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX:  offsetX};
      };

      this.screenToTextCoordinates = function(x, y) {
          var canvasPos = this.scroller.getBoundingClientRect();
          var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;

          var col = Math.round(offsetX / this.characterWidth);

          var row = (y + this.scrollTop - canvasPos.top) / this.lineHeight;

          return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);
      };
      this.textToScreenCoordinates = function(row, column) {
          var canvasPos = this.scroller.getBoundingClientRect();
          var pos = this.session.documentToScreenPosition(row, column);

          var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)
               ? this.session.$bidiHandler.getPosLeft(pos.column)
               : Math.round(pos.column * this.characterWidth));

          var y = pos.row * this.lineHeight;

          return {
              pageX: canvasPos.left + x - this.scrollLeft,
              pageY: canvasPos.top + y - this.scrollTop
          };
      };
      this.visualizeFocus = function() {
          dom.addCssClass(this.container, "ace_focus");
      };
      this.visualizeBlur = function() {
          dom.removeCssClass(this.container, "ace_focus");
      };
      this.showComposition = function(position) {
          if (!this.$composition)
              this.$composition = {
                  keepTextAreaAtCursor: this.$keepTextAreaAtCursor,
                  cssText: this.textarea.style.cssText
              };

          this.$keepTextAreaAtCursor = true;
          dom.addCssClass(this.textarea, "ace_composition");
          this.textarea.style.cssText = "";
          this.$moveTextAreaToCursor();
      };
      this.setCompositionText = function(text) {
          this.$moveTextAreaToCursor();
      };
      this.hideComposition = function() {
          if (!this.$composition)
              return;

          dom.removeCssClass(this.textarea, "ace_composition");
          this.$keepTextAreaAtCursor = this.$composition.keepTextAreaAtCursor;
          this.textarea.style.cssText = this.$composition.cssText;
          this.$composition = null;
      };
      this.setTheme = function(theme, cb) {
          var _self = this;
          this.$themeId = theme;
          _self._dispatchEvent('themeChange',{theme:theme});

          if (!theme || typeof theme == "string") {
              var moduleName = theme || this.$options.theme.initialValue;
              config.loadModule(["theme", moduleName], afterLoad);
          } else {
              afterLoad(theme);
          }

          function afterLoad(module) {
              if (_self.$themeId != theme)
                  return cb && cb();
              if (!module || !module.cssClass)
                  throw new Error("couldn't load module " + theme + " or it didn't call define");
              dom.importCssString(
                  module.cssText,
                  module.cssClass,
                  _self.container.ownerDocument
              );

              if (_self.theme)
                  dom.removeCssClass(_self.container, _self.theme.cssClass);

              var padding = "padding" in module ? module.padding 
                  : "padding" in (_self.theme || {}) ? 4 : _self.$padding;
              if (_self.$padding && padding != _self.$padding)
                  _self.setPadding(padding);
              _self.$theme = module.cssClass;

              _self.theme = module;
              dom.addCssClass(_self.container, module.cssClass);
              dom.setCssClass(_self.container, "ace_dark", module.isDark);
              if (_self.$size) {
                  _self.$size.width = 0;
                  _self.$updateSizeAsync();
              }

              _self._dispatchEvent('themeLoaded', {theme:module});
              cb && cb();
          }
      };
      this.getTheme = function() {
          return this.$themeId;
      };
      this.setStyle = function(style, include) {
          dom.setCssClass(this.container, style, include !== false);
      };
      this.unsetStyle = function(style) {
          dom.removeCssClass(this.container, style);
      };
      
      this.setCursorStyle = function(style) {
          if (this.scroller.style.cursor != style)
              this.scroller.style.cursor = style;
      };
      this.setMouseCursor = function(cursorStyle) {
          this.scroller.style.cursor = cursorStyle;
      };
      this.destroy = function() {
          this.$textLayer.destroy();
          this.$cursorLayer.destroy();
      };

  }).call(VirtualRenderer.prototype);


  config.defineOptions(VirtualRenderer.prototype, "renderer", {
      animatedScroll: {initialValue: false},
      showInvisibles: {
          set: function(value) {
              if (this.$textLayer.setShowInvisibles(value))
                  this.$loop.schedule(this.CHANGE_TEXT);
          },
          initialValue: false
      },
      showPrintMargin: {
          set: function() { this.$updatePrintMargin(); },
          initialValue: true
      },
      printMarginColumn: {
          set: function() { this.$updatePrintMargin(); },
          initialValue: 80
      },
      printMargin: {
          set: function(val) {
              if (typeof val == "number")
                  this.$printMarginColumn = val;
              this.$showPrintMargin = !!val;
              this.$updatePrintMargin();
          },
          get: function() {
              return this.$showPrintMargin && this.$printMarginColumn; 
          }
      },
      showGutter: {
          set: function(show){
              this.$gutter.style.display = show ? "block" : "none";
              this.$loop.schedule(this.CHANGE_FULL);
              this.onGutterResize();
          },
          initialValue: true
      },
      fadeFoldWidgets: {
          set: function(show) {
              dom.setCssClass(this.$gutter, "ace_fade-fold-widgets", show);
          },
          initialValue: false
      },
      showFoldWidgets: {
          set: function(show) {this.$gutterLayer.setShowFoldWidgets(show);},
          initialValue: true
      },
      showLineNumbers: {
          set: function(show) {
              this.$gutterLayer.setShowLineNumbers(show);
              this.$loop.schedule(this.CHANGE_GUTTER);
          },
          initialValue: true
      },
      displayIndentGuides: {
          set: function(show) {
              if (this.$textLayer.setDisplayIndentGuides(show))
                  this.$loop.schedule(this.CHANGE_TEXT);
          },
          initialValue: true
      },
      highlightGutterLine: {
          set: function(shouldHighlight) {
              if (!this.$gutterLineHighlight) {
                  this.$gutterLineHighlight = dom.createElement("div");
                  this.$gutterLineHighlight.className = "ace_gutter-active-line";
                  this.$gutter.appendChild(this.$gutterLineHighlight);
                  return;
              }

              this.$gutterLineHighlight.style.display = shouldHighlight ? "" : "none";
              if (this.$cursorLayer.$pixelPos)
                  this.$updateGutterLineHighlight();
          },
          initialValue: false,
          value: true
      },
      hScrollBarAlwaysVisible: {
          set: function(val) {
              if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)
                  this.$loop.schedule(this.CHANGE_SCROLL);
          },
          initialValue: false
      },
      vScrollBarAlwaysVisible: {
          set: function(val) {
              if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)
                  this.$loop.schedule(this.CHANGE_SCROLL);
          },
          initialValue: false
      },
      fontSize:  {
          set: function(size) {
              if (typeof size == "number")
                  size = size + "px";
              this.container.style.fontSize = size;
              this.updateFontSize();
          },
          initialValue: 12
      },
      fontFamily: {
          set: function(name) {
              this.container.style.fontFamily = name;
              this.updateFontSize();
          }
      },
      maxLines: {
          set: function(val) {
              this.updateFull();
          }
      },
      minLines: {
          set: function(val) {
              this.updateFull();
          }
      },
      maxPixelHeight: {
          set: function(val) {
              this.updateFull();
          },
          initialValue: 0
      },
      scrollPastEnd: {
          set: function(val) {
              val = +val || 0;
              if (this.$scrollPastEnd == val)
                  return;
              this.$scrollPastEnd = val;
              this.$loop.schedule(this.CHANGE_SCROLL);
          },
          initialValue: 0,
          handlesSet: true
      },
      fixedWidthGutter: {
          set: function(val) {
              this.$gutterLayer.$fixedWidth = !!val;
              this.$loop.schedule(this.CHANGE_GUTTER);
          }
      },
      theme: {
          set: function(val) { this.setTheme(val); },
          get: function() { return this.$themeId || this.theme; },
          initialValue: "./theme/textmate",
          handlesSet: true
      }
  });

  exports.VirtualRenderer = VirtualRenderer;
  });

  ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var net = acequire("../lib/net");
  var EventEmitter = acequire("../lib/event_emitter").EventEmitter;
  var config = acequire("../config");

  function $workerBlob(workerUrl, mod) {
      var script = mod.src;"importScripts('" + net.qualifyURL(workerUrl) + "');";
      try {
          return new Blob([script], {"type": "application/javascript"});
      } catch (e) { // Backwards-compatibility
          var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
          var blobBuilder = new BlobBuilder();
          blobBuilder.append(script);
          return blobBuilder.getBlob("application/javascript");
      }
  }

  function createWorker(workerUrl, mod) {
      var blob = $workerBlob(workerUrl, mod);
      var URL = window.URL || window.webkitURL;
      var blobURL = URL.createObjectURL(blob);
      return new Worker(blobURL);
  }

  var WorkerClient = function(topLevelNamespaces, mod, classname, workerUrl, importScripts) {
      this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);
      this.changeListener = this.changeListener.bind(this);
      this.onMessage = this.onMessage.bind(this);
      if (acequire.nameToUrl && !acequire.toUrl)
          acequire.toUrl = acequire.nameToUrl;
      
      if (config.get("packaged") || !acequire.toUrl) {
          workerUrl = workerUrl || config.moduleUrl(mod.id, "worker");
      } else {
          var normalizePath = this.$normalizePath;
          workerUrl = workerUrl || normalizePath(acequire.toUrl("ace/worker/worker.js", null, "_"));

          var tlns = {};
          topLevelNamespaces.forEach(function(ns) {
              tlns[ns] = normalizePath(acequire.toUrl(ns, null, "_").replace(/(\.js)?(\?.*)?$/, ""));
          });
      }

      this.$worker = createWorker(workerUrl, mod);
      if (importScripts) {
          this.send("importScripts", importScripts);
      }
      this.$worker.postMessage({
          init : true,
          tlns : tlns,
          module : mod.id,
          classname : classname
      });

      this.callbackId = 1;
      this.callbacks = {};

      this.$worker.onmessage = this.onMessage;
  };

  (function(){

      oop.implement(this, EventEmitter);

      this.onMessage = function(e) {
          var msg = e.data;
          switch (msg.type) {
              case "event":
                  this._signal(msg.name, {data: msg.data});
                  break;
              case "call":
                  var callback = this.callbacks[msg.id];
                  if (callback) {
                      callback(msg.data);
                      delete this.callbacks[msg.id];
                  }
                  break;
              case "error":
                  this.reportError(msg.data);
                  break;
              case "log":
                  window.console && console.log && console.log.apply(console, msg.data);
                  break;
          }
      };
      
      this.reportError = function(err) {
          window.console && console.error && console.error(err);
      };

      this.$normalizePath = function(path) {
          return net.qualifyURL(path);
      };

      this.terminate = function() {
          this._signal("terminate", {});
          this.deltaQueue = null;
          this.$worker.terminate();
          this.$worker = null;
          if (this.$doc)
              this.$doc.off("change", this.changeListener);
          this.$doc = null;
      };

      this.send = function(cmd, args) {
          this.$worker.postMessage({command: cmd, args: args});
      };

      this.call = function(cmd, args, callback) {
          if (callback) {
              var id = this.callbackId++;
              this.callbacks[id] = callback;
              args.push(id);
          }
          this.send(cmd, args);
      };

      this.emit = function(event, data) {
          try {
              this.$worker.postMessage({event: event, data: {data: data.data}});
          }
          catch(ex) {
              console.error(ex.stack);
          }
      };

      this.attachToDocument = function(doc) {
          if (this.$doc)
              this.terminate();

          this.$doc = doc;
          this.call("setValue", [doc.getValue()]);
          doc.on("change", this.changeListener);
      };

      this.changeListener = function(delta) {
          if (!this.deltaQueue) {
              this.deltaQueue = [];
              setTimeout(this.$sendDeltaQueue, 0);
          }
          if (delta.action == "insert")
              this.deltaQueue.push(delta.start, delta.lines);
          else
              this.deltaQueue.push(delta.start, delta.end);
      };

      this.$sendDeltaQueue = function() {
          var q = this.deltaQueue;
          if (!q) return;
          this.deltaQueue = null;
          if (q.length > 50 && q.length > this.$doc.getLength() >> 1) {
              this.call("setValue", [this.$doc.getValue()]);
          } else
              this.emit("change", {data: q});
      };

  }).call(WorkerClient.prototype);


  var UIWorkerClient = function(topLevelNamespaces, mod, classname) {
      this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);
      this.changeListener = this.changeListener.bind(this);
      this.callbackId = 1;
      this.callbacks = {};
      this.messageBuffer = [];

      var main = null;
      var emitSync = false;
      var sender = Object.create(EventEmitter);
      var _self = this;

      this.$worker = {};
      this.$worker.terminate = function() {};
      this.$worker.postMessage = function(e) {
          _self.messageBuffer.push(e);
          if (main) {
              if (emitSync)
                  setTimeout(processNext);
              else
                  processNext();
          }
      };
      this.setEmitSync = function(val) { emitSync = val; };

      var processNext = function() {
          var msg = _self.messageBuffer.shift();
          if (msg.command)
              main[msg.command].apply(main, msg.args);
          else if (msg.event)
              sender._signal(msg.event, msg.data);
      };

      sender.postMessage = function(msg) {
          _self.onMessage({data: msg});
      };
      sender.callback = function(data, callbackId) {
          this.postMessage({type: "call", id: callbackId, data: data});
      };
      sender.emit = function(name, data) {
          this.postMessage({type: "event", name: name, data: data});
      };

      config.loadModule(["worker", mod], function(Main) {
          main = new Main[classname](sender);
          while (_self.messageBuffer.length)
              processNext();
      });
  };

  UIWorkerClient.prototype = WorkerClient.prototype;

  exports.UIWorkerClient = UIWorkerClient;
  exports.WorkerClient = WorkerClient;
  exports.createWorker = createWorker;


  });

  ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"], function(acequire, exports, module) {

  var Range = acequire("./range").Range;
  var EventEmitter = acequire("./lib/event_emitter").EventEmitter;
  var oop = acequire("./lib/oop");

  var PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {
      var _self = this;
      this.length = length;
      this.session = session;
      this.doc = session.getDocument();
      this.mainClass = mainClass;
      this.othersClass = othersClass;
      this.$onUpdate = this.onUpdate.bind(this);
      this.doc.on("change", this.$onUpdate);
      this.$others = others;
      
      this.$onCursorChange = function() {
          setTimeout(function() {
              _self.onCursorChange();
          });
      };
      
      this.$pos = pos;
      var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {length: -1};
      this.$undoStackDepth = undoStack.length;
      this.setup();

      session.selection.on("changeCursor", this.$onCursorChange);
  };

  (function() {

      oop.implement(this, EventEmitter);
      this.setup = function() {
          var _self = this;
          var doc = this.doc;
          var session = this.session;
          
          this.selectionBefore = session.selection.toJSON();
          if (session.selection.inMultiSelectMode)
              session.selection.toSingleRange();

          this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);
          var pos = this.pos;
          pos.$insertRight = true;
          pos.detach();
          pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);
          this.others = [];
          this.$others.forEach(function(other) {
              var anchor = doc.createAnchor(other.row, other.column);
              anchor.$insertRight = true;
              anchor.detach();
              _self.others.push(anchor);
          });
          session.setUndoSelect(false);
      };
      this.showOtherMarkers = function() {
          if (this.othersActive) return;
          var session = this.session;
          var _self = this;
          this.othersActive = true;
          this.others.forEach(function(anchor) {
              anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);
          });
      };
      this.hideOtherMarkers = function() {
          if (!this.othersActive) return;
          this.othersActive = false;
          for (var i = 0; i < this.others.length; i++) {
              this.session.removeMarker(this.others[i].markerId);
          }
      };
      this.onUpdate = function(delta) {
          if (this.$updating)
              return this.updateAnchors(delta);
              
          var range = delta;
          if (range.start.row !== range.end.row) return;
          if (range.start.row !== this.pos.row) return;
          this.$updating = true;
          var lengthDiff = delta.action === "insert" ? range.end.column - range.start.column : range.start.column - range.end.column;
          var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;
          var distanceFromStart = range.start.column - this.pos.column;
          
          this.updateAnchors(delta);
          
          if (inMainRange)
              this.length += lengthDiff;

          if (inMainRange && !this.session.$fromUndo) {
              if (delta.action === 'insert') {
                  for (var i = this.others.length - 1; i >= 0; i--) {
                      var otherPos = this.others[i];
                      var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};
                      this.doc.insertMergedLines(newPos, delta.lines);
                  }
              } else if (delta.action === 'remove') {
                  for (var i = this.others.length - 1; i >= 0; i--) {
                      var otherPos = this.others[i];
                      var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};
                      this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));
                  }
              }
          }
          
          this.$updating = false;
          this.updateMarkers();
      };
      
      this.updateAnchors = function(delta) {
          this.pos.onChange(delta);
          for (var i = this.others.length; i--;)
              this.others[i].onChange(delta);
          this.updateMarkers();
      };
      
      this.updateMarkers = function() {
          if (this.$updating)
              return;
          var _self = this;
          var session = this.session;
          var updateMarker = function(pos, className) {
              session.removeMarker(pos.markerId);
              pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column+_self.length), className, null, false);
          };
          updateMarker(this.pos, this.mainClass);
          for (var i = this.others.length; i--;)
              updateMarker(this.others[i], this.othersClass);
      };

      this.onCursorChange = function(event) {
          if (this.$updating || !this.session) return;
          var pos = this.session.selection.getCursor();
          if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {
              this.showOtherMarkers();
              this._emit("cursorEnter", event);
          } else {
              this.hideOtherMarkers();
              this._emit("cursorLeave", event);
          }
      };    
      this.detach = function() {
          this.session.removeMarker(this.pos && this.pos.markerId);
          this.hideOtherMarkers();
          this.doc.removeEventListener("change", this.$onUpdate);
          this.session.selection.removeEventListener("changeCursor", this.$onCursorChange);
          this.session.setUndoSelect(true);
          this.session = null;
      };
      this.cancel = function() {
          if (this.$undoStackDepth === -1)
              return;
          var undoManager = this.session.getUndoManager();
          var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;
          for (var i = 0; i < undosRequired; i++) {
              undoManager.undo(true);
          }
          if (this.selectionBefore)
              this.session.selection.fromJSON(this.selectionBefore);
      };
  }).call(PlaceHolder.prototype);


  exports.PlaceHolder = PlaceHolder;
  });

  ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"], function(acequire, exports, module) {

  var event = acequire("../lib/event");
  var useragent = acequire("../lib/useragent");
  function isSamePoint(p1, p2) {
      return p1.row == p2.row && p1.column == p2.column;
  }

  function onMouseDown(e) {
      var ev = e.domEvent;
      var alt = ev.altKey;
      var shift = ev.shiftKey;
      var ctrl = ev.ctrlKey;
      var accel = e.getAccelKey();
      var button = e.getButton();
      
      if (ctrl && useragent.isMac)
          button = ev.button;

      if (e.editor.inMultiSelectMode && button == 2) {
          e.editor.textInput.onContextMenu(e.domEvent);
          return;
      }
      
      if (!ctrl && !alt && !accel) {
          if (button === 0 && e.editor.inMultiSelectMode)
              e.editor.exitMultiSelectMode();
          return;
      }
      
      if (button !== 0)
          return;

      var editor = e.editor;
      var selection = editor.selection;
      var isMultiSelect = editor.inMultiSelectMode;
      var pos = e.getDocumentPosition();
      var cursor = selection.getCursor();
      var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));

      var mouseX = e.x, mouseY = e.y;
      var onMouseSelection = function(e) {
          mouseX = e.clientX;
          mouseY = e.clientY;
      };
      
      var session = editor.session;
      var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);
      var screenCursor = screenAnchor;
      
      var selectionMode;
      if (editor.$mouseHandler.$enableJumpToDef) {
          if (ctrl && alt || accel && alt)
              selectionMode = shift ? "block" : "add";
          else if (alt && editor.$blockSelectEnabled)
              selectionMode = "block";
      } else {
          if (accel && !alt) {
              selectionMode = "add";
              if (!isMultiSelect && shift)
                  return;
          } else if (alt && editor.$blockSelectEnabled) {
              selectionMode = "block";
          }
      }
      
      if (selectionMode && useragent.isMac && ev.ctrlKey) {
          editor.$mouseHandler.cancelContextMenu();
      }

      if (selectionMode == "add") {
          if (!isMultiSelect && inSelection)
              return; // dragging

          if (!isMultiSelect) {
              var range = selection.toOrientedRange();
              editor.addSelectionMarker(range);
          }

          var oldRange = selection.rangeList.rangeAtPoint(pos);
          
          
          editor.$blockScrolling++;
          editor.inVirtualSelectionMode = true;
          
          if (shift) {
              oldRange = null;
              range = selection.ranges[0] || range;
              editor.removeSelectionMarker(range);
          }
          editor.once("mouseup", function() {
              var tmpSel = selection.toOrientedRange();

              if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))
                  selection.substractPoint(tmpSel.cursor);
              else {
                  if (shift) {
                      selection.substractPoint(range.cursor);
                  } else if (range) {
                      editor.removeSelectionMarker(range);
                      selection.addRange(range);
                  }
                  selection.addRange(tmpSel);
              }
              editor.$blockScrolling--;
              editor.inVirtualSelectionMode = false;
          });

      } else if (selectionMode == "block") {
          e.stop();
          editor.inVirtualSelectionMode = true;        
          var initialRange;
          var rectSel = [];
          var blockSelect = function() {
              var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);
              var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);

              if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))
                  return;
              screenCursor = newCursor;
              
              editor.$blockScrolling++;
              editor.selection.moveToPosition(cursor);
              editor.renderer.scrollCursorIntoView();

              editor.removeSelectionMarkers(rectSel);
              rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);
              if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())
                  rectSel[0] = editor.$mouseHandler.$clickSelection.clone();
              rectSel.forEach(editor.addSelectionMarker, editor);
              editor.updateSelectionMarkers();
              editor.$blockScrolling--;
          };
          editor.$blockScrolling++;
          if (isMultiSelect && !accel) {
              selection.toSingleRange();
          } else if (!isMultiSelect && accel) {
              initialRange = selection.toOrientedRange();
              editor.addSelectionMarker(initialRange);
          }
          
          if (shift)
              screenAnchor = session.documentToScreenPosition(selection.lead);            
          else
              selection.moveToPosition(pos);
          editor.$blockScrolling--;
          
          screenCursor = {row: -1, column: -1};

          var onMouseSelectionEnd = function(e) {
              clearInterval(timerId);
              editor.removeSelectionMarkers(rectSel);
              if (!rectSel.length)
                  rectSel = [selection.toOrientedRange()];
              editor.$blockScrolling++;
              if (initialRange) {
                  editor.removeSelectionMarker(initialRange);
                  selection.toSingleRange(initialRange);
              }
              for (var i = 0; i < rectSel.length; i++)
                  selection.addRange(rectSel[i]);
              editor.inVirtualSelectionMode = false;
              editor.$mouseHandler.$clickSelection = null;
              editor.$blockScrolling--;
          };

          var onSelectionInterval = blockSelect;

          event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);
          var timerId = setInterval(function() {onSelectionInterval();}, 20);

          return e.preventDefault();
      }
  }


  exports.onMouseDown = onMouseDown;

  });

  ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"], function(acequire, exports, module) {
  exports.defaultCommands = [{
      name: "addCursorAbove",
      exec: function(editor) { editor.selectMoreLines(-1); },
      bindKey: {win: "Ctrl-Alt-Up", mac: "Ctrl-Alt-Up"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "addCursorBelow",
      exec: function(editor) { editor.selectMoreLines(1); },
      bindKey: {win: "Ctrl-Alt-Down", mac: "Ctrl-Alt-Down"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "addCursorAboveSkipCurrent",
      exec: function(editor) { editor.selectMoreLines(-1, true); },
      bindKey: {win: "Ctrl-Alt-Shift-Up", mac: "Ctrl-Alt-Shift-Up"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "addCursorBelowSkipCurrent",
      exec: function(editor) { editor.selectMoreLines(1, true); },
      bindKey: {win: "Ctrl-Alt-Shift-Down", mac: "Ctrl-Alt-Shift-Down"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectMoreBefore",
      exec: function(editor) { editor.selectMore(-1); },
      bindKey: {win: "Ctrl-Alt-Left", mac: "Ctrl-Alt-Left"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectMoreAfter",
      exec: function(editor) { editor.selectMore(1); },
      bindKey: {win: "Ctrl-Alt-Right", mac: "Ctrl-Alt-Right"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectNextBefore",
      exec: function(editor) { editor.selectMore(-1, true); },
      bindKey: {win: "Ctrl-Alt-Shift-Left", mac: "Ctrl-Alt-Shift-Left"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "selectNextAfter",
      exec: function(editor) { editor.selectMore(1, true); },
      bindKey: {win: "Ctrl-Alt-Shift-Right", mac: "Ctrl-Alt-Shift-Right"},
      scrollIntoView: "cursor",
      readOnly: true
  }, {
      name: "splitIntoLines",
      exec: function(editor) { editor.multiSelect.splitIntoLines(); },
      bindKey: {win: "Ctrl-Alt-L", mac: "Ctrl-Alt-L"},
      readOnly: true
  }, {
      name: "alignCursors",
      exec: function(editor) { editor.alignCursors(); },
      bindKey: {win: "Ctrl-Alt-A", mac: "Ctrl-Alt-A"},
      scrollIntoView: "cursor"
  }, {
      name: "findAll",
      exec: function(editor) { editor.findAll(); },
      bindKey: {win: "Ctrl-Alt-K", mac: "Ctrl-Alt-G"},
      scrollIntoView: "cursor",
      readOnly: true
  }];
  exports.multiSelectCommands = [{
      name: "singleSelection",
      bindKey: "esc",
      exec: function(editor) { editor.exitMultiSelectMode(); },
      scrollIntoView: "cursor",
      readOnly: true,
      isAvailable: function(editor) {return editor && editor.inMultiSelectMode;}
  }];

  var HashHandler = acequire("../keyboard/hash_handler").HashHandler;
  exports.keyboardHandler = new HashHandler(exports.multiSelectCommands);

  });

  ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"], function(acequire, exports, module) {

  var RangeList = acequire("./range_list").RangeList;
  var Range = acequire("./range").Range;
  var Selection = acequire("./selection").Selection;
  var onMouseDown = acequire("./mouse/multi_select_handler").onMouseDown;
  var event = acequire("./lib/event");
  var lang = acequire("./lib/lang");
  var commands = acequire("./commands/multi_select_commands");
  exports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);
  var Search = acequire("./search").Search;
  var search = new Search();

  function find(session, needle, dir) {
      search.$options.wrap = true;
      search.$options.needle = needle;
      search.$options.backwards = dir == -1;
      return search.find(session);
  }
  var EditSession = acequire("./edit_session").EditSession;
  (function() {
      this.getSelectionMarkers = function() {
          return this.$selectionMarkers;
      };
  }).call(EditSession.prototype);
  (function() {
      this.ranges = null;
      this.rangeList = null;
      this.addRange = function(range, $blockChangeEvents) {
          if (!range)
              return;

          if (!this.inMultiSelectMode && this.rangeCount === 0) {
              var oldRange = this.toOrientedRange();
              this.rangeList.add(oldRange);
              this.rangeList.add(range);
              if (this.rangeList.ranges.length != 2) {
                  this.rangeList.removeAll();
                  return $blockChangeEvents || this.fromOrientedRange(range);
              }
              this.rangeList.removeAll();
              this.rangeList.add(oldRange);
              this.$onAddRange(oldRange);
          }

          if (!range.cursor)
              range.cursor = range.end;

          var removed = this.rangeList.add(range);

          this.$onAddRange(range);

          if (removed.length)
              this.$onRemoveRange(removed);

          if (this.rangeCount > 1 && !this.inMultiSelectMode) {
              this._signal("multiSelect");
              this.inMultiSelectMode = true;
              this.session.$undoSelect = false;
              this.rangeList.attach(this.session);
          }

          return $blockChangeEvents || this.fromOrientedRange(range);
      };

      this.toSingleRange = function(range) {
          range = range || this.ranges[0];
          var removed = this.rangeList.removeAll();
          if (removed.length)
              this.$onRemoveRange(removed);

          range && this.fromOrientedRange(range);
      };
      this.substractPoint = function(pos) {
          var removed = this.rangeList.substractPoint(pos);
          if (removed) {
              this.$onRemoveRange(removed);
              return removed[0];
          }
      };
      this.mergeOverlappingRanges = function() {
          var removed = this.rangeList.merge();
          if (removed.length)
              this.$onRemoveRange(removed);
          else if(this.ranges[0])
              this.fromOrientedRange(this.ranges[0]);
      };

      this.$onAddRange = function(range) {
          this.rangeCount = this.rangeList.ranges.length;
          this.ranges.unshift(range);
          this._signal("addRange", {range: range});
      };

      this.$onRemoveRange = function(removed) {
          this.rangeCount = this.rangeList.ranges.length;
          if (this.rangeCount == 1 && this.inMultiSelectMode) {
              var lastRange = this.rangeList.ranges.pop();
              removed.push(lastRange);
              this.rangeCount = 0;
          }

          for (var i = removed.length; i--; ) {
              var index = this.ranges.indexOf(removed[i]);
              this.ranges.splice(index, 1);
          }

          this._signal("removeRange", {ranges: removed});

          if (this.rangeCount === 0 && this.inMultiSelectMode) {
              this.inMultiSelectMode = false;
              this._signal("singleSelect");
              this.session.$undoSelect = true;
              this.rangeList.detach(this.session);
          }

          lastRange = lastRange || this.ranges[0];
          if (lastRange && !lastRange.isEqual(this.getRange()))
              this.fromOrientedRange(lastRange);
      };
      this.$initRangeList = function() {
          if (this.rangeList)
              return;

          this.rangeList = new RangeList();
          this.ranges = [];
          this.rangeCount = 0;
      };
      this.getAllRanges = function() {
          return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];
      };

      this.splitIntoLines = function () {
          if (this.rangeCount > 1) {
              var ranges = this.rangeList.ranges;
              var lastRange = ranges[ranges.length - 1];
              var range = Range.fromPoints(ranges[0].start, lastRange.end);

              this.toSingleRange();
              this.setSelectionRange(range, lastRange.cursor == lastRange.start);
          } else {
              var range = this.getRange();
              var isBackwards = this.isBackwards();
              var startRow = range.start.row;
              var endRow = range.end.row;
              if (startRow == endRow) {
                  if (isBackwards)
                      var start = range.end, end = range.start;
                  else
                      var start = range.start, end = range.end;
                  
                  this.addRange(Range.fromPoints(end, end));
                  this.addRange(Range.fromPoints(start, start));
                  return;
              }

              var rectSel = [];
              var r = this.getLineRange(startRow, true);
              r.start.column = range.start.column;
              rectSel.push(r);

              for (var i = startRow + 1; i < endRow; i++)
                  rectSel.push(this.getLineRange(i, true));

              r = this.getLineRange(endRow, true);
              r.end.column = range.end.column;
              rectSel.push(r);

              rectSel.forEach(this.addRange, this);
          }
      };
      this.toggleBlockSelection = function () {
          if (this.rangeCount > 1) {
              var ranges = this.rangeList.ranges;
              var lastRange = ranges[ranges.length - 1];
              var range = Range.fromPoints(ranges[0].start, lastRange.end);

              this.toSingleRange();
              this.setSelectionRange(range, lastRange.cursor == lastRange.start);
          } else {
              var cursor = this.session.documentToScreenPosition(this.selectionLead);
              var anchor = this.session.documentToScreenPosition(this.selectionAnchor);

              var rectSel = this.rectangularRangeBlock(cursor, anchor);
              rectSel.forEach(this.addRange, this);
          }
      };
      this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {
          var rectSel = [];

          var xBackwards = screenCursor.column < screenAnchor.column;
          if (xBackwards) {
              var startColumn = screenCursor.column;
              var endColumn = screenAnchor.column;
              var startOffsetX = screenCursor.offsetX;
              var endOffsetX = screenAnchor.offsetX;
          } else {
              var startColumn = screenAnchor.column;
              var endColumn = screenCursor.column;
              var startOffsetX = screenAnchor.offsetX;
              var endOffsetX = screenCursor.offsetX;
          }

          var yBackwards = screenCursor.row < screenAnchor.row;
          if (yBackwards) {
              var startRow = screenCursor.row;
              var endRow = screenAnchor.row;
          } else {
              var startRow = screenAnchor.row;
              var endRow = screenCursor.row;
          }

          if (startColumn < 0)
              startColumn = 0;
          if (startRow < 0)
              startRow = 0;

          if (startRow == endRow)
              includeEmptyLines = true;

          for (var row = startRow; row <= endRow; row++) {
              var range = Range.fromPoints(
                  this.session.screenToDocumentPosition(row, startColumn, startOffsetX),
                  this.session.screenToDocumentPosition(row, endColumn, endOffsetX)
              );
              if (range.isEmpty()) {
                  if (docEnd && isSamePoint(range.end, docEnd))
                      break;
                  var docEnd = range.end;
              }
              range.cursor = xBackwards ? range.start : range.end;
              rectSel.push(range);
          }

          if (yBackwards)
              rectSel.reverse();

          if (!includeEmptyLines) {
              var end = rectSel.length - 1;
              while (rectSel[end].isEmpty() && end > 0)
                  end--;
              if (end > 0) {
                  var start = 0;
                  while (rectSel[start].isEmpty())
                      start++;
              }
              for (var i = end; i >= start; i--) {
                  if (rectSel[i].isEmpty())
                      rectSel.splice(i, 1);
              }
          }

          return rectSel;
      };
  }).call(Selection.prototype);
  var Editor = acequire("./editor").Editor;
  (function() {
      this.updateSelectionMarkers = function() {
          this.renderer.updateCursor();
          this.renderer.updateBackMarkers();
      };
      this.addSelectionMarker = function(orientedRange) {
          if (!orientedRange.cursor)
              orientedRange.cursor = orientedRange.end;

          var style = this.getSelectionStyle();
          orientedRange.marker = this.session.addMarker(orientedRange, "ace_selection", style);

          this.session.$selectionMarkers.push(orientedRange);
          this.session.selectionMarkerCount = this.session.$selectionMarkers.length;
          return orientedRange;
      };
      this.removeSelectionMarker = function(range) {
          if (!range.marker)
              return;
          this.session.removeMarker(range.marker);
          var index = this.session.$selectionMarkers.indexOf(range);
          if (index != -1)
              this.session.$selectionMarkers.splice(index, 1);
          this.session.selectionMarkerCount = this.session.$selectionMarkers.length;
      };

      this.removeSelectionMarkers = function(ranges) {
          var markerList = this.session.$selectionMarkers;
          for (var i = ranges.length; i--; ) {
              var range = ranges[i];
              if (!range.marker)
                  continue;
              this.session.removeMarker(range.marker);
              var index = markerList.indexOf(range);
              if (index != -1)
                  markerList.splice(index, 1);
          }
          this.session.selectionMarkerCount = markerList.length;
      };

      this.$onAddRange = function(e) {
          this.addSelectionMarker(e.range);
          this.renderer.updateCursor();
          this.renderer.updateBackMarkers();
      };

      this.$onRemoveRange = function(e) {
          this.removeSelectionMarkers(e.ranges);
          this.renderer.updateCursor();
          this.renderer.updateBackMarkers();
      };

      this.$onMultiSelect = function(e) {
          if (this.inMultiSelectMode)
              return;
          this.inMultiSelectMode = true;

          this.setStyle("ace_multiselect");
          this.keyBinding.addKeyboardHandler(commands.keyboardHandler);
          this.commands.setDefaultHandler("exec", this.$onMultiSelectExec);

          this.renderer.updateCursor();
          this.renderer.updateBackMarkers();
      };

      this.$onSingleSelect = function(e) {
          if (this.session.multiSelect.inVirtualMode)
              return;
          this.inMultiSelectMode = false;

          this.unsetStyle("ace_multiselect");
          this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);

          this.commands.removeDefaultHandler("exec", this.$onMultiSelectExec);
          this.renderer.updateCursor();
          this.renderer.updateBackMarkers();
          this._emit("changeSelection");
      };

      this.$onMultiSelectExec = function(e) {
          var command = e.command;
          var editor = e.editor;
          if (!editor.multiSelect)
              return;
          if (!command.multiSelectAction) {
              var result = command.exec(editor, e.args || {});
              editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());
              editor.multiSelect.mergeOverlappingRanges();
          } else if (command.multiSelectAction == "forEach") {
              result = editor.forEachSelection(command, e.args);
          } else if (command.multiSelectAction == "forEachLine") {
              result = editor.forEachSelection(command, e.args, true);
          } else if (command.multiSelectAction == "single") {
              editor.exitMultiSelectMode();
              result = command.exec(editor, e.args || {});
          } else {
              result = command.multiSelectAction(editor, e.args || {});
          }
          return result;
      }; 
      this.forEachSelection = function(cmd, args, options) {
          if (this.inVirtualSelectionMode)
              return;
          var keepOrder = options && options.keepOrder;
          var $byLines = options == true || options && options.$byLines;
          var session = this.session;
          var selection = this.selection;
          var rangeList = selection.rangeList;
          var ranges = (keepOrder ? selection : rangeList).ranges;
          var result;
          
          if (!ranges.length)
              return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});
          
          var reg = selection._eventRegistry;
          selection._eventRegistry = {};

          var tmpSel = new Selection(session);
          this.inVirtualSelectionMode = true;
          for (var i = ranges.length; i--;) {
              if ($byLines) {
                  while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)
                      i--;
              }
              tmpSel.fromOrientedRange(ranges[i]);
              tmpSel.index = i;
              this.selection = session.selection = tmpSel;
              var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});
              if (!result && cmdResult !== undefined)
                  result = cmdResult;
              tmpSel.toOrientedRange(ranges[i]);
          }
          tmpSel.detach();

          this.selection = session.selection = selection;
          this.inVirtualSelectionMode = false;
          selection._eventRegistry = reg;
          selection.mergeOverlappingRanges();
          
          var anim = this.renderer.$scrollAnimation;
          this.onCursorChange();
          this.onSelectionChange();
          if (anim && anim.from == anim.to)
              this.renderer.animateScrolling(anim.from);
          
          return result;
      };
      this.exitMultiSelectMode = function() {
          if (!this.inMultiSelectMode || this.inVirtualSelectionMode)
              return;
          this.multiSelect.toSingleRange();
      };

      this.getSelectedText = function() {
          var text = "";
          if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {
              var ranges = this.multiSelect.rangeList.ranges;
              var buf = [];
              for (var i = 0; i < ranges.length; i++) {
                  buf.push(this.session.getTextRange(ranges[i]));
              }
              var nl = this.session.getDocument().getNewLineCharacter();
              text = buf.join(nl);
              if (text.length == (buf.length - 1) * nl.length)
                  text = "";
          } else if (!this.selection.isEmpty()) {
              text = this.session.getTextRange(this.getSelectionRange());
          }
          return text;
      };
      
      this.$checkMultiselectChange = function(e, anchor) {
          if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {
              var range = this.multiSelect.ranges[0];
              if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)
                  return;
              var pos = anchor == this.multiSelect.anchor
                  ? range.cursor == range.start ? range.end : range.start
                  : range.cursor;
              if (pos.row != anchor.row 
                  || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)
                  this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());
          }
      };
      this.findAll = function(needle, options, additive) {
          options = options || {};
          options.needle = needle || options.needle;
          if (options.needle == undefined) {
              var range = this.selection.isEmpty()
                  ? this.selection.getWordRange()
                  : this.selection.getRange();
              options.needle = this.session.getTextRange(range);
          }    
          this.$search.set(options);
          
          var ranges = this.$search.findAll(this.session);
          if (!ranges.length)
              return 0;

          this.$blockScrolling += 1;
          var selection = this.multiSelect;

          if (!additive)
              selection.toSingleRange(ranges[0]);

          for (var i = ranges.length; i--; )
              selection.addRange(ranges[i], true);
          if (range && selection.rangeList.rangeAtPoint(range.start))
              selection.addRange(range, true);
          
          this.$blockScrolling -= 1;

          return ranges.length;
      };
      this.selectMoreLines = function(dir, skip) {
          var range = this.selection.toOrientedRange();
          var isBackwards = range.cursor == range.end;

          var screenLead = this.session.documentToScreenPosition(range.cursor);
          if (this.selection.$desiredColumn)
              screenLead.column = this.selection.$desiredColumn;

          var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);

          if (!range.isEmpty()) {
              var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);
              var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);
          } else {
              var anchor = lead;
          }

          if (isBackwards) {
              var newRange = Range.fromPoints(lead, anchor);
              newRange.cursor = newRange.start;
          } else {
              var newRange = Range.fromPoints(anchor, lead);
              newRange.cursor = newRange.end;
          }

          newRange.desiredColumn = screenLead.column;
          if (!this.selection.inMultiSelectMode) {
              this.selection.addRange(range);
          } else {
              if (skip)
                  var toRemove = range.cursor;
          }

          this.selection.addRange(newRange);
          if (toRemove)
              this.selection.substractPoint(toRemove);
      };
      this.transposeSelections = function(dir) {
          var session = this.session;
          var sel = session.multiSelect;
          var all = sel.ranges;

          for (var i = all.length; i--; ) {
              var range = all[i];
              if (range.isEmpty()) {
                  var tmp = session.getWordRange(range.start.row, range.start.column);
                  range.start.row = tmp.start.row;
                  range.start.column = tmp.start.column;
                  range.end.row = tmp.end.row;
                  range.end.column = tmp.end.column;
              }
          }
          sel.mergeOverlappingRanges();

          var words = [];
          for (var i = all.length; i--; ) {
              var range = all[i];
              words.unshift(session.getTextRange(range));
          }

          if (dir < 0)
              words.unshift(words.pop());
          else
              words.push(words.shift());

          for (var i = all.length; i--; ) {
              var range = all[i];
              var tmp = range.clone();
              session.replace(range, words[i]);
              range.start.row = tmp.start.row;
              range.start.column = tmp.start.column;
          }
      };
      this.selectMore = function(dir, skip, stopAtFirst) {
          var session = this.session;
          var sel = session.multiSelect;

          var range = sel.toOrientedRange();
          if (range.isEmpty()) {
              range = session.getWordRange(range.start.row, range.start.column);
              range.cursor = dir == -1 ? range.start : range.end;
              this.multiSelect.addRange(range);
              if (stopAtFirst)
                  return;
          }
          var needle = session.getTextRange(range);

          var newRange = find(session, needle, dir);
          if (newRange) {
              newRange.cursor = dir == -1 ? newRange.start : newRange.end;
              this.$blockScrolling += 1;
              this.session.unfold(newRange);
              this.multiSelect.addRange(newRange);
              this.$blockScrolling -= 1;
              this.renderer.scrollCursorIntoView(null, 0.5);
          }
          if (skip)
              this.multiSelect.substractPoint(range.cursor);
      };
      this.alignCursors = function() {
          var session = this.session;
          var sel = session.multiSelect;
          var ranges = sel.ranges;
          var row = -1;
          var sameRowRanges = ranges.filter(function(r) {
              if (r.cursor.row == row)
                  return true;
              row = r.cursor.row;
          });
          
          if (!ranges.length || sameRowRanges.length == ranges.length - 1) {
              var range = this.selection.getRange();
              var fr = range.start.row, lr = range.end.row;
              var guessRange = fr == lr;
              if (guessRange) {
                  var max = this.session.getLength();
                  var line;
                  do {
                      line = this.session.getLine(lr);
                  } while (/[=:]/.test(line) && ++lr < max);
                  do {
                      line = this.session.getLine(fr);
                  } while (/[=:]/.test(line) && --fr > 0);
                  
                  if (fr < 0) fr = 0;
                  if (lr >= max) lr = max - 1;
              }
              var lines = this.session.removeFullLines(fr, lr);
              lines = this.$reAlignText(lines, guessRange);
              this.session.insert({row: fr, column: 0}, lines.join("\n") + "\n");
              if (!guessRange) {
                  range.start.column = 0;
                  range.end.column = lines[lines.length - 1].length;
              }
              this.selection.setRange(range);
          } else {
              sameRowRanges.forEach(function(r) {
                  sel.substractPoint(r.cursor);
              });

              var maxCol = 0;
              var minSpace = Infinity;
              var spaceOffsets = ranges.map(function(r) {
                  var p = r.cursor;
                  var line = session.getLine(p.row);
                  var spaceOffset = line.substr(p.column).search(/\S/g);
                  if (spaceOffset == -1)
                      spaceOffset = 0;

                  if (p.column > maxCol)
                      maxCol = p.column;
                  if (spaceOffset < minSpace)
                      minSpace = spaceOffset;
                  return spaceOffset;
              });
              ranges.forEach(function(r, i) {
                  var p = r.cursor;
                  var l = maxCol - p.column;
                  var d = spaceOffsets[i] - minSpace;
                  if (l > d)
                      session.insert(p, lang.stringRepeat(" ", l - d));
                  else
                      session.remove(new Range(p.row, p.column, p.row, p.column - l + d));

                  r.start.column = r.end.column = maxCol;
                  r.start.row = r.end.row = p.row;
                  r.cursor = r.end;
              });
              sel.fromOrientedRange(ranges[0]);
              this.renderer.updateCursor();
              this.renderer.updateBackMarkers();
          }
      };

      this.$reAlignText = function(lines, forceLeft) {
          var isLeftAligned = true, isRightAligned = true;
          var startW, textW, endW;

          return lines.map(function(line) {
              var m = line.match(/(\s*)(.*?)(\s*)([=:].*)/);
              if (!m)
                  return [line];

              if (startW == null) {
                  startW = m[1].length;
                  textW = m[2].length;
                  endW = m[3].length;
                  return m;
              }

              if (startW + textW + endW != m[1].length + m[2].length + m[3].length)
                  isRightAligned = false;
              if (startW != m[1].length)
                  isLeftAligned = false;

              if (startW > m[1].length)
                  startW = m[1].length;
              if (textW < m[2].length)
                  textW = m[2].length;
              if (endW > m[3].length)
                  endW = m[3].length;

              return m;
          }).map(forceLeft ? alignLeft :
              isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);

          function spaces(n) {
              return lang.stringRepeat(" ", n);
          }

          function alignLeft(m) {
              return !m[2] ? m[0] : spaces(startW) + m[2]
                  + spaces(textW - m[2].length + endW)
                  + m[4].replace(/^([=:])\s+/, "$1 ");
          }
          function alignRight(m) {
              return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]
                  + spaces(endW)
                  + m[4].replace(/^([=:])\s+/, "$1 ");
          }
          function unAlign(m) {
              return !m[2] ? m[0] : spaces(startW) + m[2]
                  + spaces(endW)
                  + m[4].replace(/^([=:])\s+/, "$1 ");
          }
      };
  }).call(Editor.prototype);


  function isSamePoint(p1, p2) {
      return p1.row == p2.row && p1.column == p2.column;
  }
  exports.onSessionChange = function(e) {
      var session = e.session;
      if (session && !session.multiSelect) {
          session.$selectionMarkers = [];
          session.selection.$initRangeList();
          session.multiSelect = session.selection;
      }
      this.multiSelect = session && session.multiSelect;

      var oldSession = e.oldSession;
      if (oldSession) {
          oldSession.multiSelect.off("addRange", this.$onAddRange);
          oldSession.multiSelect.off("removeRange", this.$onRemoveRange);
          oldSession.multiSelect.off("multiSelect", this.$onMultiSelect);
          oldSession.multiSelect.off("singleSelect", this.$onSingleSelect);
          oldSession.multiSelect.lead.off("change", this.$checkMultiselectChange);
          oldSession.multiSelect.anchor.off("change", this.$checkMultiselectChange);
      }

      if (session) {
          session.multiSelect.on("addRange", this.$onAddRange);
          session.multiSelect.on("removeRange", this.$onRemoveRange);
          session.multiSelect.on("multiSelect", this.$onMultiSelect);
          session.multiSelect.on("singleSelect", this.$onSingleSelect);
          session.multiSelect.lead.on("change", this.$checkMultiselectChange);
          session.multiSelect.anchor.on("change", this.$checkMultiselectChange);
      }

      if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {
          if (session.selection.inMultiSelectMode)
              this.$onMultiSelect();
          else
              this.$onSingleSelect();
      }
  };
  function MultiSelect(editor) {
      if (editor.$multiselectOnSessionChange)
          return;
      editor.$onAddRange = editor.$onAddRange.bind(editor);
      editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);
      editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);
      editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);
      editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);
      editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);

      editor.$multiselectOnSessionChange(editor);
      editor.on("changeSession", editor.$multiselectOnSessionChange);

      editor.on("mousedown", onMouseDown);
      editor.commands.addCommands(commands.defaultCommands);

      addAltCursorListeners(editor);
  }

  function addAltCursorListeners(editor){
      var el = editor.textInput.getElement();
      var altCursor = false;
      event.addListener(el, "keydown", function(e) {
          var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);
          if (editor.$blockSelectEnabled && altDown) {
              if (!altCursor) {
                  editor.renderer.setMouseCursor("crosshair");
                  altCursor = true;
              }
          } else if (altCursor) {
              reset();
          }
      });

      event.addListener(el, "keyup", reset);
      event.addListener(el, "blur", reset);
      function reset(e) {
          if (altCursor) {
              editor.renderer.setMouseCursor("");
              altCursor = false;
          }
      }
  }

  exports.MultiSelect = MultiSelect;


  acequire("./config").defineOptions(Editor.prototype, "editor", {
      enableMultiselect: {
          set: function(val) {
              MultiSelect(this);
              if (val) {
                  this.on("changeSession", this.$multiselectOnSessionChange);
                  this.on("mousedown", onMouseDown);
              } else {
                  this.off("changeSession", this.$multiselectOnSessionChange);
                  this.off("mousedown", onMouseDown);
              }
          },
          value: true
      },
      enableBlockSelect: {
          set: function(val) {
              this.$blockSelectEnabled = val;
          },
          value: true
      }
  });



  });

  ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"], function(acequire, exports, module) {

  var Range = acequire("../../range").Range;

  var FoldMode = exports.FoldMode = function() {};

  (function() {

      this.foldingStartMarker = null;
      this.foldingStopMarker = null;
      this.getFoldWidget = function(session, foldStyle, row) {
          var line = session.getLine(row);
          if (this.foldingStartMarker.test(line))
              return "start";
          if (foldStyle == "markbeginend"
                  && this.foldingStopMarker
                  && this.foldingStopMarker.test(line))
              return "end";
          return "";
      };

      this.getFoldWidgetRange = function(session, foldStyle, row) {
          return null;
      };

      this.indentationBlock = function(session, row, column) {
          var re = /\S/;
          var line = session.getLine(row);
          var startLevel = line.search(re);
          if (startLevel == -1)
              return;

          var startColumn = column || line.length;
          var maxRow = session.getLength();
          var startRow = row;
          var endRow = row;

          while (++row < maxRow) {
              var level = session.getLine(row).search(re);

              if (level == -1)
                  continue;

              if (level <= startLevel)
                  break;

              endRow = row;
          }

          if (endRow > startRow) {
              var endColumn = session.getLine(endRow).length;
              return new Range(startRow, startColumn, endRow, endColumn);
          }
      };

      this.openingBracketBlock = function(session, bracket, row, column, typeRe) {
          var start = {row: row, column: column + 1};
          var end = session.$findClosingBracket(bracket, start, typeRe);
          if (!end)
              return;

          var fw = session.foldWidgets[end.row];
          if (fw == null)
              fw = session.getFoldWidget(end.row);

          if (fw == "start" && end.row > start.row) {
              end.row --;
              end.column = session.getLine(end.row).length;
          }
          return Range.fromPoints(start, end);
      };

      this.closingBracketBlock = function(session, bracket, row, column, typeRe) {
          var end = {row: row, column: column};
          var start = session.$findOpeningBracket(bracket, end);

          if (!start)
              return;

          start.column++;
          end.column--;

          return  Range.fromPoints(start, end);
      };
  }).call(FoldMode.prototype);

  });

  ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"], function(acequire, exports, module) {

  exports.isDark = false;
  exports.cssClass = "ace-tm";
  exports.cssText = ".ace-tm .ace_gutter {\
background: #f0f0f0;\
color: #333;\
}\
.ace-tm .ace_print-margin {\
width: 1px;\
background: #e8e8e8;\
}\
.ace-tm .ace_fold {\
background-color: #6B72E6;\
}\
.ace-tm {\
background-color: #FFFFFF;\
color: black;\
}\
.ace-tm .ace_cursor {\
color: black;\
}\
.ace-tm .ace_invisible {\
color: rgb(191, 191, 191);\
}\
.ace-tm .ace_storage,\
.ace-tm .ace_keyword {\
color: blue;\
}\
.ace-tm .ace_constant {\
color: rgb(197, 6, 11);\
}\
.ace-tm .ace_constant.ace_buildin {\
color: rgb(88, 72, 246);\
}\
.ace-tm .ace_constant.ace_language {\
color: rgb(88, 92, 246);\
}\
.ace-tm .ace_constant.ace_library {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_invalid {\
background-color: rgba(255, 0, 0, 0.1);\
color: red;\
}\
.ace-tm .ace_support.ace_function {\
color: rgb(60, 76, 114);\
}\
.ace-tm .ace_support.ace_constant {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_support.ace_type,\
.ace-tm .ace_support.ace_class {\
color: rgb(109, 121, 222);\
}\
.ace-tm .ace_keyword.ace_operator {\
color: rgb(104, 118, 135);\
}\
.ace-tm .ace_string {\
color: rgb(3, 106, 7);\
}\
.ace-tm .ace_comment {\
color: rgb(76, 136, 107);\
}\
.ace-tm .ace_comment.ace_doc {\
color: rgb(0, 102, 255);\
}\
.ace-tm .ace_comment.ace_doc.ace_tag {\
color: rgb(128, 159, 191);\
}\
.ace-tm .ace_constant.ace_numeric {\
color: rgb(0, 0, 205);\
}\
.ace-tm .ace_variable {\
color: rgb(49, 132, 149);\
}\
.ace-tm .ace_xml-pe {\
color: rgb(104, 104, 91);\
}\
.ace-tm .ace_entity.ace_name.ace_function {\
color: #0000A2;\
}\
.ace-tm .ace_heading {\
color: rgb(12, 7, 255);\
}\
.ace-tm .ace_list {\
color:rgb(185, 6, 144);\
}\
.ace-tm .ace_meta.ace_tag {\
color:rgb(0, 22, 142);\
}\
.ace-tm .ace_string.ace_regex {\
color: rgb(255, 0, 0)\
}\
.ace-tm .ace_marker-layer .ace_selection {\
background: rgb(181, 213, 255);\
}\
.ace-tm.ace_multiselect .ace_selection.ace_start {\
box-shadow: 0 0 3px 0px white;\
}\
.ace-tm .ace_marker-layer .ace_step {\
background: rgb(252, 255, 0);\
}\
.ace-tm .ace_marker-layer .ace_stack {\
background: rgb(164, 229, 101);\
}\
.ace-tm .ace_marker-layer .ace_bracket {\
margin: -1px 0 0 -1px;\
border: 1px solid rgb(192, 192, 192);\
}\
.ace-tm .ace_marker-layer .ace_active-line {\
background: rgba(0, 0, 0, 0.07);\
}\
.ace-tm .ace_gutter-active-line {\
background-color : #dcdcdc;\
}\
.ace-tm .ace_marker-layer .ace_selected-word {\
background: rgb(250, 250, 255);\
border: 1px solid rgb(200, 200, 250);\
}\
.ace-tm .ace_indent-guide {\
background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\
}\
";

  var dom = acequire("../lib/dom");
  dom.importCssString(exports.cssText, exports.cssClass);
  });

  ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"], function(acequire, exports, module) {

  var oop = acequire("./lib/oop");
  var dom = acequire("./lib/dom");
  var Range = acequire("./range").Range;


  function LineWidgets(session) {
      this.session = session;
      this.session.widgetManager = this;
      this.session.getRowLength = this.getRowLength;
      this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;
      this.updateOnChange = this.updateOnChange.bind(this);
      this.renderWidgets = this.renderWidgets.bind(this);
      this.measureWidgets = this.measureWidgets.bind(this);
      this.session._changedWidgets = [];
      this.$onChangeEditor = this.$onChangeEditor.bind(this);
      
      this.session.on("change", this.updateOnChange);
      this.session.on("changeFold", this.updateOnFold);
      this.session.on("changeEditor", this.$onChangeEditor);
  }

  (function() {
      this.getRowLength = function(row) {
          var h;
          if (this.lineWidgets)
              h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;
          else 
              h = 0;
          if (!this.$useWrapMode || !this.$wrapData[row]) {
              return 1 + h;
          } else {
              return this.$wrapData[row].length + 1 + h;
          }
      };

      this.$getWidgetScreenLength = function() {
          var screenRows = 0;
          this.lineWidgets.forEach(function(w){
              if (w && w.rowCount && !w.hidden)
                  screenRows += w.rowCount;
          });
          return screenRows;
      };    
      
      this.$onChangeEditor = function(e) {
          this.attach(e.editor);
      };
      
      this.attach = function(editor) {
          if (editor  && editor.widgetManager && editor.widgetManager != this)
              editor.widgetManager.detach();

          if (this.editor == editor)
              return;

          this.detach();
          this.editor = editor;
          
          if (editor) {
              editor.widgetManager = this;
              editor.renderer.on("beforeRender", this.measureWidgets);
              editor.renderer.on("afterRender", this.renderWidgets);
          }
      };
      this.detach = function(e) {
          var editor = this.editor;
          if (!editor)
              return;
          
          this.editor = null;
          editor.widgetManager = null;
          
          editor.renderer.off("beforeRender", this.measureWidgets);
          editor.renderer.off("afterRender", this.renderWidgets);
          var lineWidgets = this.session.lineWidgets;
          lineWidgets && lineWidgets.forEach(function(w) {
              if (w && w.el && w.el.parentNode) {
                  w._inDocument = false;
                  w.el.parentNode.removeChild(w.el);
              }
          });
      };

      this.updateOnFold = function(e, session) {
          var lineWidgets = session.lineWidgets;
          if (!lineWidgets || !e.action)
              return;
          var fold = e.data;
          var start = fold.start.row;
          var end = fold.end.row;
          var hide = e.action == "add";
          for (var i = start + 1; i < end; i++) {
              if (lineWidgets[i])
                  lineWidgets[i].hidden = hide;
          }
          if (lineWidgets[end]) {
              if (hide) {
                  if (!lineWidgets[start])
                      lineWidgets[start] = lineWidgets[end];
                  else
                      lineWidgets[end].hidden = hide;
              } else {
                  if (lineWidgets[start] == lineWidgets[end])
                      lineWidgets[start] = undefined;
                  lineWidgets[end].hidden = hide;
              }
          }
      };
      
      this.updateOnChange = function(delta) {
          var lineWidgets = this.session.lineWidgets;
          if (!lineWidgets) return;
          
          var startRow = delta.start.row;
          var len = delta.end.row - startRow;

          if (len === 0) ; else if (delta.action == 'remove') {
              var removed = lineWidgets.splice(startRow + 1, len);
              removed.forEach(function(w) {
                  w && this.removeLineWidget(w);
              }, this);
              this.$updateRows();
          } else {
              var args = new Array(len);
              args.unshift(startRow, 0);
              lineWidgets.splice.apply(lineWidgets, args);
              this.$updateRows();
          }
      };
      
      this.$updateRows = function() {
          var lineWidgets = this.session.lineWidgets;
          if (!lineWidgets) return;
          var noWidgets = true;
          lineWidgets.forEach(function(w, i) {
              if (w) {
                  noWidgets = false;
                  w.row = i;
                  while (w.$oldWidget) {
                      w.$oldWidget.row = i;
                      w = w.$oldWidget;
                  }
              }
          });
          if (noWidgets)
              this.session.lineWidgets = null;
      };

      this.addLineWidget = function(w) {
          if (!this.session.lineWidgets)
              this.session.lineWidgets = new Array(this.session.getLength());
          
          var old = this.session.lineWidgets[w.row];
          if (old) {
              w.$oldWidget = old;
              if (old.el && old.el.parentNode) {
                  old.el.parentNode.removeChild(old.el);
                  old._inDocument = false;
              }
          }
              
          this.session.lineWidgets[w.row] = w;
          
          w.session = this.session;
          
          var renderer = this.editor.renderer;
          if (w.html && !w.el) {
              w.el = dom.createElement("div");
              w.el.innerHTML = w.html;
          }
          if (w.el) {
              dom.addCssClass(w.el, "ace_lineWidgetContainer");
              w.el.style.position = "absolute";
              w.el.style.zIndex = 5;
              renderer.container.appendChild(w.el);
              w._inDocument = true;
          }
          
          if (!w.coverGutter) {
              w.el.style.zIndex = 3;
          }
          if (w.pixelHeight == null) {
              w.pixelHeight = w.el.offsetHeight;
          }
          if (w.rowCount == null) {
              w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;
          }
          
          var fold = this.session.getFoldAt(w.row, 0);
          w.$fold = fold;
          if (fold) {
              var lineWidgets = this.session.lineWidgets;
              if (w.row == fold.end.row && !lineWidgets[fold.start.row])
                  lineWidgets[fold.start.row] = w;
              else
                  w.hidden = true;
          }
              
          this.session._emit("changeFold", {data:{start:{row: w.row}}});
          
          this.$updateRows();
          this.renderWidgets(null, renderer);
          this.onWidgetChanged(w);
          return w;
      };
      
      this.removeLineWidget = function(w) {
          w._inDocument = false;
          w.session = null;
          if (w.el && w.el.parentNode)
              w.el.parentNode.removeChild(w.el);
          if (w.editor && w.editor.destroy) try {
              w.editor.destroy();
          } catch(e){}
          if (this.session.lineWidgets) {
              var w1 = this.session.lineWidgets[w.row];
              if (w1 == w) {
                  this.session.lineWidgets[w.row] = w.$oldWidget;
                  if (w.$oldWidget)
                      this.onWidgetChanged(w.$oldWidget);
              } else {
                  while (w1) {
                      if (w1.$oldWidget == w) {
                          w1.$oldWidget = w.$oldWidget;
                          break;
                      }
                      w1 = w1.$oldWidget;
                  }
              }
          }
          this.session._emit("changeFold", {data:{start:{row: w.row}}});
          this.$updateRows();
      };
      
      this.getWidgetsAtRow = function(row) {
          var lineWidgets = this.session.lineWidgets;
          var w = lineWidgets && lineWidgets[row];
          var list = [];
          while (w) {
              list.push(w);
              w = w.$oldWidget;
          }
          return list;
      };
      
      this.onWidgetChanged = function(w) {
          this.session._changedWidgets.push(w);
          this.editor && this.editor.renderer.updateFull();
      };
      
      this.measureWidgets = function(e, renderer) {
          var changedWidgets = this.session._changedWidgets;
          var config = renderer.layerConfig;
          
          if (!changedWidgets || !changedWidgets.length) return;
          var min = Infinity;
          for (var i = 0; i < changedWidgets.length; i++) {
              var w = changedWidgets[i];
              if (!w || !w.el) continue;
              if (w.session != this.session) continue;
              if (!w._inDocument) {
                  if (this.session.lineWidgets[w.row] != w)
                      continue;
                  w._inDocument = true;
                  renderer.container.appendChild(w.el);
              }
              
              w.h = w.el.offsetHeight;
              
              if (!w.fixedWidth) {
                  w.w = w.el.offsetWidth;
                  w.screenWidth = Math.ceil(w.w / config.characterWidth);
              }
              
              var rowCount = w.h / config.lineHeight;
              if (w.coverLine) {
                  rowCount -= this.session.getRowLineCount(w.row);
                  if (rowCount < 0)
                      rowCount = 0;
              }
              if (w.rowCount != rowCount) {
                  w.rowCount = rowCount;
                  if (w.row < min)
                      min = w.row;
              }
          }
          if (min != Infinity) {
              this.session._emit("changeFold", {data:{start:{row: min}}});
              this.session.lineWidgetWidth = null;
          }
          this.session._changedWidgets = [];
      };
      
      this.renderWidgets = function(e, renderer) {
          var config = renderer.layerConfig;
          var lineWidgets = this.session.lineWidgets;
          if (!lineWidgets)
              return;
          var first = Math.min(this.firstRow, config.firstRow);
          var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);
          
          while (first > 0 && !lineWidgets[first])
              first--;
          
          this.firstRow = config.firstRow;
          this.lastRow = config.lastRow;

          renderer.$cursorLayer.config = config;
          for (var i = first; i <= last; i++) {
              var w = lineWidgets[i];
              if (!w || !w.el) continue;
              if (w.hidden) {
                  w.el.style.top = -100 - (w.pixelHeight || 0) + "px";
                  continue;
              }
              if (!w._inDocument) {
                  w._inDocument = true;
                  renderer.container.appendChild(w.el);
              }
              var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;
              if (!w.coverLine)
                  top += config.lineHeight * this.session.getRowLineCount(w.row);
              w.el.style.top = top - config.offset + "px";
              
              var left = w.coverGutter ? 0 : renderer.gutterWidth;
              if (!w.fixedWidth)
                  left -= renderer.scrollLeft;
              w.el.style.left = left + "px";
              
              if (w.fullWidth && w.screenWidth) {
                  w.el.style.minWidth = config.width + 2 * config.padding + "px";
              }
              
              if (w.fixedWidth) {
                  w.el.style.right = renderer.scrollBar.getWidth() + "px";
              } else {
                  w.el.style.right = "";
              }
          }
      };
      
  }).call(LineWidgets.prototype);


  exports.LineWidgets = LineWidgets;

  });

  ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"], function(acequire, exports, module) {
  var LineWidgets = acequire("../line_widgets").LineWidgets;
  var dom = acequire("../lib/dom");
  var Range = acequire("../range").Range;

  function binarySearch(array, needle, comparator) {
      var first = 0;
      var last = array.length - 1;

      while (first <= last) {
          var mid = (first + last) >> 1;
          var c = comparator(needle, array[mid]);
          if (c > 0)
              first = mid + 1;
          else if (c < 0)
              last = mid - 1;
          else
              return mid;
      }
      return -(first + 1);
  }

  function findAnnotations(session, row, dir) {
      var annotations = session.getAnnotations().sort(Range.comparePoints);
      if (!annotations.length)
          return;
      
      var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);
      if (i < 0)
          i = -i - 1;
      
      if (i >= annotations.length)
          i = dir > 0 ? 0 : annotations.length - 1;
      else if (i === 0 && dir < 0)
          i = annotations.length - 1;
      
      var annotation = annotations[i];
      if (!annotation || !dir)
          return;

      if (annotation.row === row) {
          do {
              annotation = annotations[i += dir];
          } while (annotation && annotation.row === row);
          if (!annotation)
              return annotations.slice();
      }
      
      
      var matched = [];
      row = annotation.row;
      do {
          matched[dir < 0 ? "unshift" : "push"](annotation);
          annotation = annotations[i += dir];
      } while (annotation && annotation.row == row);
      return matched.length && matched;
  }

  exports.showErrorMarker = function(editor, dir) {
      var session = editor.session;
      if (!session.widgetManager) {
          session.widgetManager = new LineWidgets(session);
          session.widgetManager.attach(editor);
      }
      
      var pos = editor.getCursorPosition();
      var row = pos.row;
      var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function(w) {
          return w.type == "errorMarker";
      })[0];
      if (oldWidget) {
          oldWidget.destroy();
      } else {
          row -= dir;
      }
      var annotations = findAnnotations(session, row, dir);
      var gutterAnno;
      if (annotations) {
          var annotation = annotations[0];
          pos.column = (annotation.pos && typeof annotation.column != "number"
              ? annotation.pos.sc
              : annotation.column) || 0;
          pos.row = annotation.row;
          gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];
      } else if (oldWidget) {
          return;
      } else {
          gutterAnno = {
              text: ["Looks good!"],
              className: "ace_ok"
          };
      }
      editor.session.unfold(pos.row);
      editor.selection.moveToPosition(pos);
      
      var w = {
          row: pos.row, 
          fixedWidth: true,
          coverGutter: true,
          el: dom.createElement("div"),
          type: "errorMarker"
      };
      var el = w.el.appendChild(dom.createElement("div"));
      var arrow = w.el.appendChild(dom.createElement("div"));
      arrow.className = "error_widget_arrow " + gutterAnno.className;
      
      var left = editor.renderer.$cursorLayer
          .getPixelPosition(pos).left;
      arrow.style.left = left + editor.renderer.gutterWidth - 5 + "px";
      
      w.el.className = "error_widget_wrapper";
      el.className = "error_widget " + gutterAnno.className;
      el.innerHTML = gutterAnno.text.join("<br>");
      
      el.appendChild(dom.createElement("div"));
      
      var kb = function(_, hashId, keyString) {
          if (hashId === 0 && (keyString === "esc" || keyString === "return")) {
              w.destroy();
              return {command: "null"};
          }
      };
      
      w.destroy = function() {
          if (editor.$mouseHandler.isMousePressed)
              return;
          editor.keyBinding.removeKeyboardHandler(kb);
          session.widgetManager.removeLineWidget(w);
          editor.off("changeSelection", w.destroy);
          editor.off("changeSession", w.destroy);
          editor.off("mouseup", w.destroy);
          editor.off("change", w.destroy);
      };
      
      editor.keyBinding.addKeyboardHandler(kb);
      editor.on("changeSelection", w.destroy);
      editor.on("changeSession", w.destroy);
      editor.on("mouseup", w.destroy);
      editor.on("change", w.destroy);
      
      editor.session.widgetManager.addLineWidget(w);
      
      w.el.onmousedown = editor.focus.bind(editor);
      
      editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});
  };


  dom.importCssString("\
    .error_widget_wrapper {\
        background: inherit;\
        color: inherit;\
        border:none\
    }\
    .error_widget {\
        border-top: solid 2px;\
        border-bottom: solid 2px;\
        margin: 5px 0;\
        padding: 10px 40px;\
        white-space: pre-wrap;\
    }\
    .error_widget.ace_error, .error_widget_arrow.ace_error{\
        border-color: #ff5a5a\
    }\
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\
        border-color: #F1D817\
    }\
    .error_widget.ace_info, .error_widget_arrow.ace_info{\
        border-color: #5a5a5a\
    }\
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\
        border-color: #5aaa5a\
    }\
    .error_widget_arrow {\
        position: absolute;\
        border: solid 5px;\
        border-top-color: transparent!important;\
        border-right-color: transparent!important;\
        border-left-color: transparent!important;\
        top: -5px;\
    }\
", "");

  });

  ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"], function(acequire, exports, module) {

  acequire("./lib/fixoldbrowsers");

  var dom = acequire("./lib/dom");
  var event = acequire("./lib/event");

  var Editor = acequire("./editor").Editor;
  var EditSession = acequire("./edit_session").EditSession;
  var UndoManager = acequire("./undomanager").UndoManager;
  var Renderer = acequire("./virtual_renderer").VirtualRenderer;
  acequire("./worker/worker_client");
  acequire("./keyboard/hash_handler");
  acequire("./placeholder");
  acequire("./multi_select");
  acequire("./mode/folding/fold_mode");
  acequire("./theme/textmate");
  acequire("./ext/error_marker");

  exports.config = acequire("./config");
  exports.acequire = acequire;
  exports.edit = function(el) {
      if (typeof el == "string") {
          var _id = el;
          el = document.getElementById(_id);
          if (!el)
              throw new Error("ace.edit can't find div #" + _id);
      }

      if (el && el.env && el.env.editor instanceof Editor)
          return el.env.editor;

      var value = "";
      if (el && /input|textarea/i.test(el.tagName)) {
          var oldNode = el;
          value = oldNode.value;
          el = dom.createElement("pre");
          oldNode.parentNode.replaceChild(el, oldNode);
      } else if (el) {
          value = dom.getInnerText(el);
          el.innerHTML = "";
      }

      var doc = exports.createEditSession(value);

      var editor = new Editor(new Renderer(el));
      editor.setSession(doc);

      var env = {
          document: doc,
          editor: editor,
          onResize: editor.resize.bind(editor, null)
      };
      if (oldNode) env.textarea = oldNode;
      event.addListener(window, "resize", env.onResize);
      editor.on("destroy", function() {
          event.removeListener(window, "resize", env.onResize);
          env.editor.container.env = null; // prevent memory leak on old ie
      });
      editor.container.env = editor.env = env;
      return editor;
  };
  exports.createEditSession = function(text, mode) {
      var doc = new EditSession(text, mode);
      doc.setUndoManager(new UndoManager());
      return doc;
  };
  exports.EditSession = EditSession;
  exports.UndoManager = UndoManager;
  exports.version = "1.2.9";
  });
              (function() {
                  ace.acequire(["ace/ace"], function(a) {
                      if (a) {
                          a.config.init(true);
                          a.define = ace.define;
                      }
                      if (!window.ace)
                          window.ace = a;
                      for (var key in a) if (a.hasOwnProperty(key))
                          window.ace[key] = a[key];
                  });
              })();
          
  var brace = window.ace.acequire("ace/ace");

  /*jshint node:true */

  function Options(options, merge_child_field) {
    this.raw_options = _mergeOpts(options, merge_child_field);

    // Support passing the source text back with no change
    this.disabled = this._get_boolean('disabled');

    this.eol = this._get_characters('eol', 'auto');
    this.end_with_newline = this._get_boolean('end_with_newline');
    this.indent_size = this._get_number('indent_size', 4);
    this.indent_char = this._get_characters('indent_char', ' ');
    this.indent_level = this._get_number('indent_level');

    this.preserve_newlines = this._get_boolean('preserve_newlines', true);
    this.max_preserve_newlines = this._get_number('max_preserve_newlines', 32786);
    if (!this.preserve_newlines) {
      this.max_preserve_newlines = 0;
    }

    this.indent_with_tabs = this._get_boolean('indent_with_tabs', this.indent_char === '\t');
    if (this.indent_with_tabs) {
      this.indent_char = '\t';

      // indent_size behavior changed after 1.8.6
      // It used to be that indent_size would be
      // set to 1 for indent_with_tabs. That is no longer needed and
      // actually doesn't make sense - why not use spaces? Further,
      // that might produce unexpected behavior - tabs being used
      // for single-column alignment. So, when indent_with_tabs is true
      // and indent_size is 1, reset indent_size to 4.
      if (this.indent_size === 1) {
        this.indent_size = 4;
      }
    }

    // Backwards compat with 1.3.x
    this.wrap_line_length = this._get_number('wrap_line_length', this._get_number('max_char'));

    this.indent_empty_lines = this._get_boolean('indent_empty_lines');

    // valid templating languages ['django', 'erb', 'handlebars', 'php']
    // For now, 'auto' = all off for javascript, all on for html (and inline javascript).
    // other values ignored
    this.templating = this._get_selection_list('templating', ['auto', 'none', 'django', 'erb', 'handlebars', 'php'], ['auto']);
  }

  Options.prototype._get_array = function(name, default_value) {
    var option_value = this.raw_options[name];
    var result = default_value || [];
    if (typeof option_value === 'object') {
      if (option_value !== null && typeof option_value.concat === 'function') {
        result = option_value.concat();
      }
    } else if (typeof option_value === 'string') {
      result = option_value.split(/[^a-zA-Z0-9_\/\-]+/);
    }
    return result;
  };

  Options.prototype._get_boolean = function(name, default_value) {
    var option_value = this.raw_options[name];
    var result = option_value === undefined ? !!default_value : !!option_value;
    return result;
  };

  Options.prototype._get_characters = function(name, default_value) {
    var option_value = this.raw_options[name];
    var result = default_value || '';
    if (typeof option_value === 'string') {
      result = option_value.replace(/\\r/, '\r').replace(/\\n/, '\n').replace(/\\t/, '\t');
    }
    return result;
  };

  Options.prototype._get_number = function(name, default_value) {
    var option_value = this.raw_options[name];
    default_value = parseInt(default_value, 10);
    if (isNaN(default_value)) {
      default_value = 0;
    }
    var result = parseInt(option_value, 10);
    if (isNaN(result)) {
      result = default_value;
    }
    return result;
  };

  Options.prototype._get_selection = function(name, selection_list, default_value) {
    var result = this._get_selection_list(name, selection_list, default_value);
    if (result.length !== 1) {
      throw new Error(
        "Invalid Option Value: The option '" + name + "' can only be one of the following values:\n" +
        selection_list + "\nYou passed in: '" + this.raw_options[name] + "'");
    }

    return result[0];
  };


  Options.prototype._get_selection_list = function(name, selection_list, default_value) {
    if (!selection_list || selection_list.length === 0) {
      throw new Error("Selection list cannot be empty.");
    }

    default_value = default_value || [selection_list[0]];
    if (!this._is_valid_selection(default_value, selection_list)) {
      throw new Error("Invalid Default Value!");
    }

    var result = this._get_array(name, default_value);
    if (!this._is_valid_selection(result, selection_list)) {
      throw new Error(
        "Invalid Option Value: The option '" + name + "' can contain only the following values:\n" +
        selection_list + "\nYou passed in: '" + this.raw_options[name] + "'");
    }

    return result;
  };

  Options.prototype._is_valid_selection = function(result, selection_list) {
    return result.length && selection_list.length &&
      !result.some(function(item) { return selection_list.indexOf(item) === -1; });
  };


  // merges child options up with the parent options object
  // Example: obj = {a: 1, b: {a: 2}}
  //          mergeOpts(obj, 'b')
  //
  //          Returns: {a: 2}
  function _mergeOpts(allOptions, childFieldName) {
    var finalOpts = {};
    allOptions = _normalizeOpts(allOptions);
    var name;

    for (name in allOptions) {
      if (name !== childFieldName) {
        finalOpts[name] = allOptions[name];
      }
    }

    //merge in the per type settings for the childFieldName
    if (childFieldName && allOptions[childFieldName]) {
      for (name in allOptions[childFieldName]) {
        finalOpts[name] = allOptions[childFieldName][name];
      }
    }
    return finalOpts;
  }

  function _normalizeOpts(options) {
    var convertedOpts = {};
    var key;

    for (key in options) {
      var newKey = key.replace(/-/g, "_");
      convertedOpts[newKey] = options[key];
    }
    return convertedOpts;
  }

  var Options_1 = Options;
  var normalizeOpts = _normalizeOpts;
  var mergeOpts = _mergeOpts;

  var options = {
  	Options: Options_1,
  	normalizeOpts: normalizeOpts,
  	mergeOpts: mergeOpts
  };

  var BaseOptions = options.Options;

  function Options$1(options) {
    BaseOptions.call(this, options, 'html');
    if (this.templating.length === 1 && this.templating[0] === 'auto') {
      this.templating = ['django', 'erb', 'handlebars', 'php'];
    }

    this.indent_inner_html = this._get_boolean('indent_inner_html');
    this.indent_body_inner_html = this._get_boolean('indent_body_inner_html', true);
    this.indent_head_inner_html = this._get_boolean('indent_head_inner_html', true);

    this.indent_handlebars = this._get_boolean('indent_handlebars', true);
    this.wrap_attributes = this._get_selection('wrap_attributes',
      ['auto', 'force', 'force-aligned', 'force-expand-multiline', 'aligned-multiple', 'preserve', 'preserve-aligned']);
    this.wrap_attributes_indent_size = this._get_number('wrap_attributes_indent_size', this.indent_size);
    this.extra_liners = this._get_array('extra_liners', ['head', 'body', '/html']);

    // Block vs inline elements
    // https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements
    // https://developer.mozilla.org/en-US/docs/Web/HTML/Inline_elements
    // https://www.w3.org/TR/html5/dom.html#phrasing-content
    this.inline = this._get_array('inline', [
      'a', 'abbr', 'area', 'audio', 'b', 'bdi', 'bdo', 'br', 'button', 'canvas', 'cite',
      'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'i', 'iframe', 'img',
      'input', 'ins', 'kbd', 'keygen', 'label', 'map', 'mark', 'math', 'meter', 'noscript',
      'object', 'output', 'progress', 'q', 'ruby', 's', 'samp', /* 'script', */ 'select', 'small',
      'span', 'strong', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'var',
      'video', 'wbr', 'text',
      // obsolete inline tags
      'acronym', 'big', 'strike', 'tt'
    ]);
    this.void_elements = this._get_array('void_elements', [
      // HTLM void elements - aka self-closing tags - aka singletons
      // https://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements
      'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen',
      'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr',
      // NOTE: Optional tags are too complex for a simple list
      // they are hard coded in _do_optional_end_element

      // Doctype and xml elements
      '!doctype', '?xml',

      // obsolete tags
      // basefont: https://www.computerhope.com/jargon/h/html-basefont-tag.htm
      // isndex: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/isindex
      'basefont', 'isindex'
    ]);
    this.unformatted = this._get_array('unformatted', []);
    this.content_unformatted = this._get_array('content_unformatted', [
      'pre', 'textarea'
    ]);
    this.unformatted_content_delimiter = this._get_characters('unformatted_content_delimiter');
    this.indent_scripts = this._get_selection('indent_scripts', ['normal', 'keep', 'separate']);

  }
  Options$1.prototype = new BaseOptions();



  var Options_1$1 = Options$1;

  var options$1 = {
  	Options: Options_1$1
  };

  /*jshint node:true */

  function OutputLine(parent) {
    this.__parent = parent;
    this.__character_count = 0;
    // use indent_count as a marker for this.__lines that have preserved indentation
    this.__indent_count = -1;
    this.__alignment_count = 0;
    this.__wrap_point_index = 0;
    this.__wrap_point_character_count = 0;
    this.__wrap_point_indent_count = -1;
    this.__wrap_point_alignment_count = 0;

    this.__items = [];
  }

  OutputLine.prototype.clone_empty = function() {
    var line = new OutputLine(this.__parent);
    line.set_indent(this.__indent_count, this.__alignment_count);
    return line;
  };

  OutputLine.prototype.item = function(index) {
    if (index < 0) {
      return this.__items[this.__items.length + index];
    } else {
      return this.__items[index];
    }
  };

  OutputLine.prototype.has_match = function(pattern) {
    for (var lastCheckedOutput = this.__items.length - 1; lastCheckedOutput >= 0; lastCheckedOutput--) {
      if (this.__items[lastCheckedOutput].match(pattern)) {
        return true;
      }
    }
    return false;
  };

  OutputLine.prototype.set_indent = function(indent, alignment) {
    if (this.is_empty()) {
      this.__indent_count = indent || 0;
      this.__alignment_count = alignment || 0;
      this.__character_count = this.__parent.get_indent_size(this.__indent_count, this.__alignment_count);
    }
  };

  OutputLine.prototype._set_wrap_point = function() {
    if (this.__parent.wrap_line_length) {
      this.__wrap_point_index = this.__items.length;
      this.__wrap_point_character_count = this.__character_count;
      this.__wrap_point_indent_count = this.__parent.next_line.__indent_count;
      this.__wrap_point_alignment_count = this.__parent.next_line.__alignment_count;
    }
  };

  OutputLine.prototype._should_wrap = function() {
    return this.__wrap_point_index &&
      this.__character_count > this.__parent.wrap_line_length &&
      this.__wrap_point_character_count > this.__parent.next_line.__character_count;
  };

  OutputLine.prototype._allow_wrap = function() {
    if (this._should_wrap()) {
      this.__parent.add_new_line();
      var next = this.__parent.current_line;
      next.set_indent(this.__wrap_point_indent_count, this.__wrap_point_alignment_count);
      next.__items = this.__items.slice(this.__wrap_point_index);
      this.__items = this.__items.slice(0, this.__wrap_point_index);

      next.__character_count += this.__character_count - this.__wrap_point_character_count;
      this.__character_count = this.__wrap_point_character_count;

      if (next.__items[0] === " ") {
        next.__items.splice(0, 1);
        next.__character_count -= 1;
      }
      return true;
    }
    return false;
  };

  OutputLine.prototype.is_empty = function() {
    return this.__items.length === 0;
  };

  OutputLine.prototype.last = function() {
    if (!this.is_empty()) {
      return this.__items[this.__items.length - 1];
    } else {
      return null;
    }
  };

  OutputLine.prototype.push = function(item) {
    this.__items.push(item);
    var last_newline_index = item.lastIndexOf('\n');
    if (last_newline_index !== -1) {
      this.__character_count = item.length - last_newline_index;
    } else {
      this.__character_count += item.length;
    }
  };

  OutputLine.prototype.pop = function() {
    var item = null;
    if (!this.is_empty()) {
      item = this.__items.pop();
      this.__character_count -= item.length;
    }
    return item;
  };


  OutputLine.prototype._remove_indent = function() {
    if (this.__indent_count > 0) {
      this.__indent_count -= 1;
      this.__character_count -= this.__parent.indent_size;
    }
  };

  OutputLine.prototype._remove_wrap_indent = function() {
    if (this.__wrap_point_indent_count > 0) {
      this.__wrap_point_indent_count -= 1;
    }
  };
  OutputLine.prototype.trim = function() {
    while (this.last() === ' ') {
      this.__items.pop();
      this.__character_count -= 1;
    }
  };

  OutputLine.prototype.toString = function() {
    var result = '';
    if (this.is_empty()) {
      if (this.__parent.indent_empty_lines) {
        result = this.__parent.get_indent_string(this.__indent_count);
      }
    } else {
      result = this.__parent.get_indent_string(this.__indent_count, this.__alignment_count);
      result += this.__items.join('');
    }
    return result;
  };

  function IndentStringCache(options, baseIndentString) {
    this.__cache = [''];
    this.__indent_size = options.indent_size;
    this.__indent_string = options.indent_char;
    if (!options.indent_with_tabs) {
      this.__indent_string = new Array(options.indent_size + 1).join(options.indent_char);
    }

    // Set to null to continue support for auto detection of base indent
    baseIndentString = baseIndentString || '';
    if (options.indent_level > 0) {
      baseIndentString = new Array(options.indent_level + 1).join(this.__indent_string);
    }

    this.__base_string = baseIndentString;
    this.__base_string_length = baseIndentString.length;
  }

  IndentStringCache.prototype.get_indent_size = function(indent, column) {
    var result = this.__base_string_length;
    column = column || 0;
    if (indent < 0) {
      result = 0;
    }
    result += indent * this.__indent_size;
    result += column;
    return result;
  };

  IndentStringCache.prototype.get_indent_string = function(indent_level, column) {
    var result = this.__base_string;
    column = column || 0;
    if (indent_level < 0) {
      indent_level = 0;
      result = '';
    }
    column += indent_level * this.__indent_size;
    this.__ensure_cache(column);
    result += this.__cache[column];
    return result;
  };

  IndentStringCache.prototype.__ensure_cache = function(column) {
    while (column >= this.__cache.length) {
      this.__add_column();
    }
  };

  IndentStringCache.prototype.__add_column = function() {
    var column = this.__cache.length;
    var indent = 0;
    var result = '';
    if (this.__indent_size && column >= this.__indent_size) {
      indent = Math.floor(column / this.__indent_size);
      column -= indent * this.__indent_size;
      result = new Array(indent + 1).join(this.__indent_string);
    }
    if (column) {
      result += new Array(column + 1).join(' ');
    }

    this.__cache.push(result);
  };

  function Output(options, baseIndentString) {
    this.__indent_cache = new IndentStringCache(options, baseIndentString);
    this.raw = false;
    this._end_with_newline = options.end_with_newline;
    this.indent_size = options.indent_size;
    this.wrap_line_length = options.wrap_line_length;
    this.indent_empty_lines = options.indent_empty_lines;
    this.__lines = [];
    this.previous_line = null;
    this.current_line = null;
    this.next_line = new OutputLine(this);
    this.space_before_token = false;
    this.non_breaking_space = false;
    this.previous_token_wrapped = false;
    // initialize
    this.__add_outputline();
  }

  Output.prototype.__add_outputline = function() {
    this.previous_line = this.current_line;
    this.current_line = this.next_line.clone_empty();
    this.__lines.push(this.current_line);
  };

  Output.prototype.get_line_number = function() {
    return this.__lines.length;
  };

  Output.prototype.get_indent_string = function(indent, column) {
    return this.__indent_cache.get_indent_string(indent, column);
  };

  Output.prototype.get_indent_size = function(indent, column) {
    return this.__indent_cache.get_indent_size(indent, column);
  };

  Output.prototype.is_empty = function() {
    return !this.previous_line && this.current_line.is_empty();
  };

  Output.prototype.add_new_line = function(force_newline) {
    // never newline at the start of file
    // otherwise, newline only if we didn't just add one or we're forced
    if (this.is_empty() ||
      (!force_newline && this.just_added_newline())) {
      return false;
    }

    // if raw output is enabled, don't print additional newlines,
    // but still return True as though you had
    if (!this.raw) {
      this.__add_outputline();
    }
    return true;
  };

  Output.prototype.get_code = function(eol) {
    this.trim(true);

    // handle some edge cases where the last tokens
    // has text that ends with newline(s)
    var last_item = this.current_line.pop();
    if (last_item) {
      if (last_item[last_item.length - 1] === '\n') {
        last_item = last_item.replace(/\n+$/g, '');
      }
      this.current_line.push(last_item);
    }

    if (this._end_with_newline) {
      this.__add_outputline();
    }

    var sweet_code = this.__lines.join('\n');

    if (eol !== '\n') {
      sweet_code = sweet_code.replace(/[\n]/g, eol);
    }
    return sweet_code;
  };

  Output.prototype.set_wrap_point = function() {
    this.current_line._set_wrap_point();
  };

  Output.prototype.set_indent = function(indent, alignment) {
    indent = indent || 0;
    alignment = alignment || 0;

    // Next line stores alignment values
    this.next_line.set_indent(indent, alignment);

    // Never indent your first output indent at the start of the file
    if (this.__lines.length > 1) {
      this.current_line.set_indent(indent, alignment);
      return true;
    }

    this.current_line.set_indent();
    return false;
  };

  Output.prototype.add_raw_token = function(token) {
    for (var x = 0; x < token.newlines; x++) {
      this.__add_outputline();
    }
    this.current_line.set_indent(-1);
    this.current_line.push(token.whitespace_before);
    this.current_line.push(token.text);
    this.space_before_token = false;
    this.non_breaking_space = false;
    this.previous_token_wrapped = false;
  };

  Output.prototype.add_token = function(printable_token) {
    this.__add_space_before_token();
    this.current_line.push(printable_token);
    this.space_before_token = false;
    this.non_breaking_space = false;
    this.previous_token_wrapped = this.current_line._allow_wrap();
  };

  Output.prototype.__add_space_before_token = function() {
    if (this.space_before_token && !this.just_added_newline()) {
      if (!this.non_breaking_space) {
        this.set_wrap_point();
      }
      this.current_line.push(' ');
    }
  };

  Output.prototype.remove_indent = function(index) {
    var output_length = this.__lines.length;
    while (index < output_length) {
      this.__lines[index]._remove_indent();
      index++;
    }
    this.current_line._remove_wrap_indent();
  };

  Output.prototype.trim = function(eat_newlines) {
    eat_newlines = (eat_newlines === undefined) ? false : eat_newlines;

    this.current_line.trim();

    while (eat_newlines && this.__lines.length > 1 &&
      this.current_line.is_empty()) {
      this.__lines.pop();
      this.current_line = this.__lines[this.__lines.length - 1];
      this.current_line.trim();
    }

    this.previous_line = this.__lines.length > 1 ?
      this.__lines[this.__lines.length - 2] : null;
  };

  Output.prototype.just_added_newline = function() {
    return this.current_line.is_empty();
  };

  Output.prototype.just_added_blankline = function() {
    return this.is_empty() ||
      (this.current_line.is_empty() && this.previous_line.is_empty());
  };

  Output.prototype.ensure_empty_line_above = function(starts_with, ends_with) {
    var index = this.__lines.length - 2;
    while (index >= 0) {
      var potentialEmptyLine = this.__lines[index];
      if (potentialEmptyLine.is_empty()) {
        break;
      } else if (potentialEmptyLine.item(0).indexOf(starts_with) !== 0 &&
        potentialEmptyLine.item(-1) !== ends_with) {
        this.__lines.splice(index + 1, 0, new OutputLine(this));
        this.previous_line = this.__lines[this.__lines.length - 2];
        break;
      }
      index--;
    }
  };

  var Output_1 = Output;

  var output = {
  	Output: Output_1
  };

  /*jshint node:true */

  var regexp_has_sticky = RegExp.prototype.hasOwnProperty('sticky');

  function InputScanner(input_string) {
    this.__input = input_string || '';
    this.__input_length = this.__input.length;
    this.__position = 0;
  }

  InputScanner.prototype.restart = function() {
    this.__position = 0;
  };

  InputScanner.prototype.back = function() {
    if (this.__position > 0) {
      this.__position -= 1;
    }
  };

  InputScanner.prototype.hasNext = function() {
    return this.__position < this.__input_length;
  };

  InputScanner.prototype.next = function() {
    var val = null;
    if (this.hasNext()) {
      val = this.__input.charAt(this.__position);
      this.__position += 1;
    }
    return val;
  };

  InputScanner.prototype.peek = function(index) {
    var val = null;
    index = index || 0;
    index += this.__position;
    if (index >= 0 && index < this.__input_length) {
      val = this.__input.charAt(index);
    }
    return val;
  };

  // This is a JavaScript only helper function (not in python)
  // Javascript doesn't have a match method
  // and not all implementation support "sticky" flag.
  // If they do not support sticky then both this.match() and this.test() method
  // must get the match and check the index of the match.
  // If sticky is supported and set, this method will use it.
  // Otherwise it will check that global is set, and fall back to the slower method.
  InputScanner.prototype.__match = function(pattern, index) {
    pattern.lastIndex = index;
    var pattern_match = pattern.exec(this.__input);

    if (pattern_match && !(regexp_has_sticky && pattern.sticky)) {
      if (pattern_match.index !== index) {
        pattern_match = null;
      }
    }

    return pattern_match;
  };

  InputScanner.prototype.test = function(pattern, index) {
    index = index || 0;
    index += this.__position;

    if (index >= 0 && index < this.__input_length) {
      return !!this.__match(pattern, index);
    } else {
      return false;
    }
  };

  InputScanner.prototype.testChar = function(pattern, index) {
    // test one character regex match
    var val = this.peek(index);
    pattern.lastIndex = 0;
    return val !== null && pattern.test(val);
  };

  InputScanner.prototype.match = function(pattern) {
    var pattern_match = this.__match(pattern, this.__position);
    if (pattern_match) {
      this.__position += pattern_match[0].length;
    } else {
      pattern_match = null;
    }
    return pattern_match;
  };

  InputScanner.prototype.read = function(starting_pattern, until_pattern, until_after) {
    var val = '';
    var match;
    if (starting_pattern) {
      match = this.match(starting_pattern);
      if (match) {
        val += match[0];
      }
    }
    if (until_pattern && (match || !starting_pattern)) {
      val += this.readUntil(until_pattern, until_after);
    }
    return val;
  };

  InputScanner.prototype.readUntil = function(pattern, until_after) {
    var val = '';
    var match_index = this.__position;
    pattern.lastIndex = this.__position;
    var pattern_match = pattern.exec(this.__input);
    if (pattern_match) {
      match_index = pattern_match.index;
      if (until_after) {
        match_index += pattern_match[0].length;
      }
    } else {
      match_index = this.__input_length;
    }

    val = this.__input.substring(this.__position, match_index);
    this.__position = match_index;
    return val;
  };

  InputScanner.prototype.readUntilAfter = function(pattern) {
    return this.readUntil(pattern, true);
  };

  InputScanner.prototype.get_regexp = function(pattern, match_from) {
    var result = null;
    var flags = 'g';
    if (match_from && regexp_has_sticky) {
      flags = 'y';
    }
    // strings are converted to regexp
    if (typeof pattern === "string" && pattern !== '') {
      // result = new RegExp(pattern.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'), flags);
      result = new RegExp(pattern, flags);
    } else if (pattern) {
      result = new RegExp(pattern.source, flags);
    }
    return result;
  };

  InputScanner.prototype.get_literal_regexp = function(literal_string) {
    return RegExp(literal_string.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'));
  };

  /* css beautifier legacy helpers */
  InputScanner.prototype.peekUntilAfter = function(pattern) {
    var start = this.__position;
    var val = this.readUntilAfter(pattern);
    this.__position = start;
    return val;
  };

  InputScanner.prototype.lookBack = function(testVal) {
    var start = this.__position - 1;
    return start >= testVal.length && this.__input.substring(start - testVal.length, start)
      .toLowerCase() === testVal;
  };

  var InputScanner_1 = InputScanner;

  var inputscanner = {
  	InputScanner: InputScanner_1
  };

  /*jshint node:true */

  function Token(type, text, newlines, whitespace_before) {
    this.type = type;
    this.text = text;

    // comments_before are
    // comments that have a new line before them
    // and may or may not have a newline after
    // this is a set of comments before
    this.comments_before = null; /* inline comment*/


    // this.comments_after =  new TokenStream(); // no new line before and newline after
    this.newlines = newlines || 0;
    this.whitespace_before = whitespace_before || '';
    this.parent = null;
    this.next = null;
    this.previous = null;
    this.opened = null;
    this.closed = null;
    this.directives = null;
  }


  var Token_1 = Token;

  var token = {
  	Token: Token_1
  };

  /*jshint node:true */

  function TokenStream(parent_token) {
    // private
    this.__tokens = [];
    this.__tokens_length = this.__tokens.length;
    this.__position = 0;
    this.__parent_token = parent_token;
  }

  TokenStream.prototype.restart = function() {
    this.__position = 0;
  };

  TokenStream.prototype.isEmpty = function() {
    return this.__tokens_length === 0;
  };

  TokenStream.prototype.hasNext = function() {
    return this.__position < this.__tokens_length;
  };

  TokenStream.prototype.next = function() {
    var val = null;
    if (this.hasNext()) {
      val = this.__tokens[this.__position];
      this.__position += 1;
    }
    return val;
  };

  TokenStream.prototype.peek = function(index) {
    var val = null;
    index = index || 0;
    index += this.__position;
    if (index >= 0 && index < this.__tokens_length) {
      val = this.__tokens[index];
    }
    return val;
  };

  TokenStream.prototype.add = function(token) {
    if (this.__parent_token) {
      token.parent = this.__parent_token;
    }
    this.__tokens.push(token);
    this.__tokens_length += 1;
  };

  var TokenStream_1 = TokenStream;

  var tokenstream = {
  	TokenStream: TokenStream_1
  };

  /*jshint node:true */

  function Pattern(input_scanner, parent) {
    this._input = input_scanner;
    this._starting_pattern = null;
    this._match_pattern = null;
    this._until_pattern = null;
    this._until_after = false;

    if (parent) {
      this._starting_pattern = this._input.get_regexp(parent._starting_pattern, true);
      this._match_pattern = this._input.get_regexp(parent._match_pattern, true);
      this._until_pattern = this._input.get_regexp(parent._until_pattern);
      this._until_after = parent._until_after;
    }
  }

  Pattern.prototype.read = function() {
    var result = this._input.read(this._starting_pattern);
    if (!this._starting_pattern || result) {
      result += this._input.read(this._match_pattern, this._until_pattern, this._until_after);
    }
    return result;
  };

  Pattern.prototype.read_match = function() {
    return this._input.match(this._match_pattern);
  };

  Pattern.prototype.until_after = function(pattern) {
    var result = this._create();
    result._until_after = true;
    result._until_pattern = this._input.get_regexp(pattern);
    result._update();
    return result;
  };

  Pattern.prototype.until = function(pattern) {
    var result = this._create();
    result._until_after = false;
    result._until_pattern = this._input.get_regexp(pattern);
    result._update();
    return result;
  };

  Pattern.prototype.starting_with = function(pattern) {
    var result = this._create();
    result._starting_pattern = this._input.get_regexp(pattern, true);
    result._update();
    return result;
  };

  Pattern.prototype.matching = function(pattern) {
    var result = this._create();
    result._match_pattern = this._input.get_regexp(pattern, true);
    result._update();
    return result;
  };

  Pattern.prototype._create = function() {
    return new Pattern(this._input, this);
  };

  Pattern.prototype._update = function() {};

  var Pattern_1 = Pattern;

  var pattern = {
  	Pattern: Pattern_1
  };

  var Pattern$1 = pattern.Pattern;

  function WhitespacePattern(input_scanner, parent) {
    Pattern$1.call(this, input_scanner, parent);
    if (parent) {
      this._line_regexp = this._input.get_regexp(parent._line_regexp);
    } else {
      this.__set_whitespace_patterns('', '');
    }

    this.newline_count = 0;
    this.whitespace_before_token = '';
  }
  WhitespacePattern.prototype = new Pattern$1();

  WhitespacePattern.prototype.__set_whitespace_patterns = function(whitespace_chars, newline_chars) {
    whitespace_chars += '\\t ';
    newline_chars += '\\n\\r';

    this._match_pattern = this._input.get_regexp(
      '[' + whitespace_chars + newline_chars + ']+', true);
    this._newline_regexp = this._input.get_regexp(
      '\\r\\n|[' + newline_chars + ']');
  };

  WhitespacePattern.prototype.read = function() {
    this.newline_count = 0;
    this.whitespace_before_token = '';

    var resulting_string = this._input.read(this._match_pattern);
    if (resulting_string === ' ') {
      this.whitespace_before_token = ' ';
    } else if (resulting_string) {
      var matches = this.__split(this._newline_regexp, resulting_string);
      this.newline_count = matches.length - 1;
      this.whitespace_before_token = matches[this.newline_count];
    }

    return resulting_string;
  };

  WhitespacePattern.prototype.matching = function(whitespace_chars, newline_chars) {
    var result = this._create();
    result.__set_whitespace_patterns(whitespace_chars, newline_chars);
    result._update();
    return result;
  };

  WhitespacePattern.prototype._create = function() {
    return new WhitespacePattern(this._input, this);
  };

  WhitespacePattern.prototype.__split = function(regexp, input_string) {
    regexp.lastIndex = 0;
    var start_index = 0;
    var result = [];
    var next_match = regexp.exec(input_string);
    while (next_match) {
      result.push(input_string.substring(start_index, next_match.index));
      start_index = next_match.index + next_match[0].length;
      next_match = regexp.exec(input_string);
    }

    if (start_index < input_string.length) {
      result.push(input_string.substring(start_index, input_string.length));
    } else {
      result.push('');
    }

    return result;
  };



  var WhitespacePattern_1 = WhitespacePattern;

  var whitespacepattern = {
  	WhitespacePattern: WhitespacePattern_1
  };

  var InputScanner$1 = inputscanner.InputScanner;
  var Token$1 = token.Token;
  var TokenStream$1 = tokenstream.TokenStream;
  var WhitespacePattern$1 = whitespacepattern.WhitespacePattern;

  var TOKEN = {
    START: 'TK_START',
    RAW: 'TK_RAW',
    EOF: 'TK_EOF'
  };

  var Tokenizer = function(input_string, options) {
    this._input = new InputScanner$1(input_string);
    this._options = options || {};
    this.__tokens = null;

    this._patterns = {};
    this._patterns.whitespace = new WhitespacePattern$1(this._input);
  };

  Tokenizer.prototype.tokenize = function() {
    this._input.restart();
    this.__tokens = new TokenStream$1();

    this._reset();

    var current;
    var previous = new Token$1(TOKEN.START, '');
    var open_token = null;
    var open_stack = [];
    var comments = new TokenStream$1();

    while (previous.type !== TOKEN.EOF) {
      current = this._get_next_token(previous, open_token);
      while (this._is_comment(current)) {
        comments.add(current);
        current = this._get_next_token(previous, open_token);
      }

      if (!comments.isEmpty()) {
        current.comments_before = comments;
        comments = new TokenStream$1();
      }

      current.parent = open_token;

      if (this._is_opening(current)) {
        open_stack.push(open_token);
        open_token = current;
      } else if (open_token && this._is_closing(current, open_token)) {
        current.opened = open_token;
        open_token.closed = current;
        open_token = open_stack.pop();
        current.parent = open_token;
      }

      current.previous = previous;
      previous.next = current;

      this.__tokens.add(current);
      previous = current;
    }

    return this.__tokens;
  };


  Tokenizer.prototype._is_first_token = function() {
    return this.__tokens.isEmpty();
  };

  Tokenizer.prototype._reset = function() {};

  Tokenizer.prototype._get_next_token = function(previous_token, open_token) { // jshint unused:false
    this._readWhitespace();
    var resulting_string = this._input.read(/.+/g);
    if (resulting_string) {
      return this._create_token(TOKEN.RAW, resulting_string);
    } else {
      return this._create_token(TOKEN.EOF, '');
    }
  };

  Tokenizer.prototype._is_comment = function(current_token) { // jshint unused:false
    return false;
  };

  Tokenizer.prototype._is_opening = function(current_token) { // jshint unused:false
    return false;
  };

  Tokenizer.prototype._is_closing = function(current_token, open_token) { // jshint unused:false
    return false;
  };

  Tokenizer.prototype._create_token = function(type, text) {
    var token = new Token$1(type, text,
      this._patterns.whitespace.newline_count,
      this._patterns.whitespace.whitespace_before_token);
    return token;
  };

  Tokenizer.prototype._readWhitespace = function() {
    return this._patterns.whitespace.read();
  };



  var Tokenizer_1 = Tokenizer;
  var TOKEN_1 = TOKEN;

  var tokenizer = {
  	Tokenizer: Tokenizer_1,
  	TOKEN: TOKEN_1
  };

  /*jshint node:true */

  function Directives(start_block_pattern, end_block_pattern) {
    start_block_pattern = typeof start_block_pattern === 'string' ? start_block_pattern : start_block_pattern.source;
    end_block_pattern = typeof end_block_pattern === 'string' ? end_block_pattern : end_block_pattern.source;
    this.__directives_block_pattern = new RegExp(start_block_pattern + / beautify( \w+[:]\w+)+ /.source + end_block_pattern, 'g');
    this.__directive_pattern = / (\w+)[:](\w+)/g;

    this.__directives_end_ignore_pattern = new RegExp(start_block_pattern + /\sbeautify\signore:end\s/.source + end_block_pattern, 'g');
  }

  Directives.prototype.get_directives = function(text) {
    if (!text.match(this.__directives_block_pattern)) {
      return null;
    }

    var directives = {};
    this.__directive_pattern.lastIndex = 0;
    var directive_match = this.__directive_pattern.exec(text);

    while (directive_match) {
      directives[directive_match[1]] = directive_match[2];
      directive_match = this.__directive_pattern.exec(text);
    }

    return directives;
  };

  Directives.prototype.readIgnored = function(input) {
    return input.readUntilAfter(this.__directives_end_ignore_pattern);
  };


  var Directives_1 = Directives;

  var directives = {
  	Directives: Directives_1
  };

  var Pattern$2 = pattern.Pattern;


  var template_names = {
    django: false,
    erb: false,
    handlebars: false,
    php: false
  };

  // This lets templates appear anywhere we would do a readUntil
  // The cost is higher but it is pay to play.
  function TemplatablePattern(input_scanner, parent) {
    Pattern$2.call(this, input_scanner, parent);
    this.__template_pattern = null;
    this._disabled = Object.assign({}, template_names);
    this._excluded = Object.assign({}, template_names);

    if (parent) {
      this.__template_pattern = this._input.get_regexp(parent.__template_pattern);
      this._excluded = Object.assign(this._excluded, parent._excluded);
      this._disabled = Object.assign(this._disabled, parent._disabled);
    }
    var pattern = new Pattern$2(input_scanner);
    this.__patterns = {
      handlebars_comment: pattern.starting_with(/{{!--/).until_after(/--}}/),
      handlebars_unescaped: pattern.starting_with(/{{{/).until_after(/}}}/),
      handlebars: pattern.starting_with(/{{/).until_after(/}}/),
      php: pattern.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),
      erb: pattern.starting_with(/<%[^%]/).until_after(/[^%]%>/),
      // django coflicts with handlebars a bit.
      django: pattern.starting_with(/{%/).until_after(/%}/),
      django_value: pattern.starting_with(/{{/).until_after(/}}/),
      django_comment: pattern.starting_with(/{#/).until_after(/#}/)
    };
  }
  TemplatablePattern.prototype = new Pattern$2();

  TemplatablePattern.prototype._create = function() {
    return new TemplatablePattern(this._input, this);
  };

  TemplatablePattern.prototype._update = function() {
    this.__set_templated_pattern();
  };

  TemplatablePattern.prototype.disable = function(language) {
    var result = this._create();
    result._disabled[language] = true;
    result._update();
    return result;
  };

  TemplatablePattern.prototype.read_options = function(options) {
    var result = this._create();
    for (var language in template_names) {
      result._disabled[language] = options.templating.indexOf(language) === -1;
    }
    result._update();
    return result;
  };

  TemplatablePattern.prototype.exclude = function(language) {
    var result = this._create();
    result._excluded[language] = true;
    result._update();
    return result;
  };

  TemplatablePattern.prototype.read = function() {
    var result = '';
    if (this._match_pattern) {
      result = this._input.read(this._starting_pattern);
    } else {
      result = this._input.read(this._starting_pattern, this.__template_pattern);
    }
    var next = this._read_template();
    while (next) {
      if (this._match_pattern) {
        next += this._input.read(this._match_pattern);
      } else {
        next += this._input.readUntil(this.__template_pattern);
      }
      result += next;
      next = this._read_template();
    }

    if (this._until_after) {
      result += this._input.readUntilAfter(this._until_pattern);
    }
    return result;
  };

  TemplatablePattern.prototype.__set_templated_pattern = function() {
    var items = [];

    if (!this._disabled.php) {
      items.push(this.__patterns.php._starting_pattern.source);
    }
    if (!this._disabled.handlebars) {
      items.push(this.__patterns.handlebars._starting_pattern.source);
    }
    if (!this._disabled.erb) {
      items.push(this.__patterns.erb._starting_pattern.source);
    }
    if (!this._disabled.django) {
      items.push(this.__patterns.django._starting_pattern.source);
      items.push(this.__patterns.django_value._starting_pattern.source);
      items.push(this.__patterns.django_comment._starting_pattern.source);
    }

    if (this._until_pattern) {
      items.push(this._until_pattern.source);
    }
    this.__template_pattern = this._input.get_regexp('(?:' + items.join('|') + ')');
  };

  TemplatablePattern.prototype._read_template = function() {
    var resulting_string = '';
    var c = this._input.peek();
    if (c === '<') {
      var peek1 = this._input.peek(1);
      //if we're in a comment, do something special
      // We treat all comments as literals, even more than preformatted tags
      // we just look for the appropriate close tag
      if (!this._disabled.php && !this._excluded.php && peek1 === '?') {
        resulting_string = resulting_string ||
          this.__patterns.php.read();
      }
      if (!this._disabled.erb && !this._excluded.erb && peek1 === '%') {
        resulting_string = resulting_string ||
          this.__patterns.erb.read();
      }
    } else if (c === '{') {
      if (!this._disabled.handlebars && !this._excluded.handlebars) {
        resulting_string = resulting_string ||
          this.__patterns.handlebars_comment.read();
        resulting_string = resulting_string ||
          this.__patterns.handlebars_unescaped.read();
        resulting_string = resulting_string ||
          this.__patterns.handlebars.read();
      }
      if (!this._disabled.django) {
        // django coflicts with handlebars a bit.
        if (!this._excluded.django && !this._excluded.handlebars) {
          resulting_string = resulting_string ||
            this.__patterns.django_value.read();
        }
        if (!this._excluded.django) {
          resulting_string = resulting_string ||
            this.__patterns.django_comment.read();
          resulting_string = resulting_string ||
            this.__patterns.django.read();
        }
      }
    }
    return resulting_string;
  };


  var TemplatablePattern_1 = TemplatablePattern;

  var templatablepattern = {
  	TemplatablePattern: TemplatablePattern_1
  };

  var BaseTokenizer = tokenizer.Tokenizer;
  var BASETOKEN = tokenizer.TOKEN;
  var Directives$1 = directives.Directives;
  var TemplatablePattern$1 = templatablepattern.TemplatablePattern;
  var Pattern$3 = pattern.Pattern;

  var TOKEN$1 = {
    TAG_OPEN: 'TK_TAG_OPEN',
    TAG_CLOSE: 'TK_TAG_CLOSE',
    ATTRIBUTE: 'TK_ATTRIBUTE',
    EQUALS: 'TK_EQUALS',
    VALUE: 'TK_VALUE',
    COMMENT: 'TK_COMMENT',
    TEXT: 'TK_TEXT',
    UNKNOWN: 'TK_UNKNOWN',
    START: BASETOKEN.START,
    RAW: BASETOKEN.RAW,
    EOF: BASETOKEN.EOF
  };

  var directives_core = new Directives$1(/<\!--/, /-->/);

  var Tokenizer$1 = function(input_string, options) {
    BaseTokenizer.call(this, input_string, options);
    this._current_tag_name = '';

    // Words end at whitespace or when a tag starts
    // if we are indenting handlebars, they are considered tags
    var templatable_reader = new TemplatablePattern$1(this._input).read_options(this._options);
    var pattern_reader = new Pattern$3(this._input);

    this.__patterns = {
      word: templatable_reader.until(/[\n\r\t <]/),
      single_quote: templatable_reader.until_after(/'/),
      double_quote: templatable_reader.until_after(/"/),
      attribute: templatable_reader.until(/[\n\r\t =\/>]/),
      element_name: templatable_reader.until(/[\n\r\t >\/]/),

      handlebars_comment: pattern_reader.starting_with(/{{!--/).until_after(/--}}/),
      handlebars: pattern_reader.starting_with(/{{/).until_after(/}}/),
      handlebars_open: pattern_reader.until(/[\n\r\t }]/),
      handlebars_raw_close: pattern_reader.until(/}}/),
      comment: pattern_reader.starting_with(/<!--/).until_after(/-->/),
      cdata: pattern_reader.starting_with(/<!\[CDATA\[/).until_after(/]]>/),
      // https://en.wikipedia.org/wiki/Conditional_comment
      conditional_comment: pattern_reader.starting_with(/<!\[/).until_after(/]>/),
      processing: pattern_reader.starting_with(/<\?/).until_after(/\?>/)
    };

    if (this._options.indent_handlebars) {
      this.__patterns.word = this.__patterns.word.exclude('handlebars');
    }

    this._unformatted_content_delimiter = null;

    if (this._options.unformatted_content_delimiter) {
      var literal_regexp = this._input.get_literal_regexp(this._options.unformatted_content_delimiter);
      this.__patterns.unformatted_content_delimiter =
        pattern_reader.matching(literal_regexp)
        .until_after(literal_regexp);
    }
  };
  Tokenizer$1.prototype = new BaseTokenizer();

  Tokenizer$1.prototype._is_comment = function(current_token) { // jshint unused:false
    return false; //current_token.type === TOKEN.COMMENT || current_token.type === TOKEN.UNKNOWN;
  };

  Tokenizer$1.prototype._is_opening = function(current_token) {
    return current_token.type === TOKEN$1.TAG_OPEN;
  };

  Tokenizer$1.prototype._is_closing = function(current_token, open_token) {
    return current_token.type === TOKEN$1.TAG_CLOSE &&
      (open_token && (
        ((current_token.text === '>' || current_token.text === '/>') && open_token.text[0] === '<') ||
        (current_token.text === '}}' && open_token.text[0] === '{' && open_token.text[1] === '{')));
  };

  Tokenizer$1.prototype._reset = function() {
    this._current_tag_name = '';
  };

  Tokenizer$1.prototype._get_next_token = function(previous_token, open_token) { // jshint unused:false
    var token = null;
    this._readWhitespace();
    var c = this._input.peek();

    if (c === null) {
      return this._create_token(TOKEN$1.EOF, '');
    }

    token = token || this._read_open_handlebars(c, open_token);
    token = token || this._read_attribute(c, previous_token, open_token);
    token = token || this._read_raw_content(c, previous_token, open_token);
    token = token || this._read_close(c, open_token);
    token = token || this._read_content_word(c);
    token = token || this._read_comment_or_cdata(c);
    token = token || this._read_processing(c);
    token = token || this._read_open(c, open_token);
    token = token || this._create_token(TOKEN$1.UNKNOWN, this._input.next());

    return token;
  };

  Tokenizer$1.prototype._read_comment_or_cdata = function(c) { // jshint unused:false
    var token = null;
    var resulting_string = null;
    var directives = null;

    if (c === '<') {
      var peek1 = this._input.peek(1);
      // We treat all comments as literals, even more than preformatted tags
      // we only look for the appropriate closing marker
      if (peek1 === '!') {
        resulting_string = this.__patterns.comment.read();

        // only process directive on html comments
        if (resulting_string) {
          directives = directives_core.get_directives(resulting_string);
          if (directives && directives.ignore === 'start') {
            resulting_string += directives_core.readIgnored(this._input);
          }
        } else {
          resulting_string = this.__patterns.cdata.read();
        }
      }

      if (resulting_string) {
        token = this._create_token(TOKEN$1.COMMENT, resulting_string);
        token.directives = directives;
      }
    }

    return token;
  };

  Tokenizer$1.prototype._read_processing = function(c) { // jshint unused:false
    var token = null;
    var resulting_string = null;
    var directives = null;

    if (c === '<') {
      var peek1 = this._input.peek(1);
      if (peek1 === '!' || peek1 === '?') {
        resulting_string = this.__patterns.conditional_comment.read();
        resulting_string = resulting_string || this.__patterns.processing.read();
      }

      if (resulting_string) {
        token = this._create_token(TOKEN$1.COMMENT, resulting_string);
        token.directives = directives;
      }
    }

    return token;
  };

  Tokenizer$1.prototype._read_open = function(c, open_token) {
    var resulting_string = null;
    var token = null;
    if (!open_token) {
      if (c === '<') {

        resulting_string = this._input.next();
        if (this._input.peek() === '/') {
          resulting_string += this._input.next();
        }
        resulting_string += this.__patterns.element_name.read();
        token = this._create_token(TOKEN$1.TAG_OPEN, resulting_string);
      }
    }
    return token;
  };

  Tokenizer$1.prototype._read_open_handlebars = function(c, open_token) {
    var resulting_string = null;
    var token = null;
    if (!open_token) {
      if (this._options.indent_handlebars && c === '{' && this._input.peek(1) === '{') {
        if (this._input.peek(2) === '!') {
          resulting_string = this.__patterns.handlebars_comment.read();
          resulting_string = resulting_string || this.__patterns.handlebars.read();
          token = this._create_token(TOKEN$1.COMMENT, resulting_string);
        } else {
          resulting_string = this.__patterns.handlebars_open.read();
          token = this._create_token(TOKEN$1.TAG_OPEN, resulting_string);
        }
      }
    }
    return token;
  };


  Tokenizer$1.prototype._read_close = function(c, open_token) {
    var resulting_string = null;
    var token = null;
    if (open_token) {
      if (open_token.text[0] === '<' && (c === '>' || (c === '/' && this._input.peek(1) === '>'))) {
        resulting_string = this._input.next();
        if (c === '/') { //  for close tag "/>"
          resulting_string += this._input.next();
        }
        token = this._create_token(TOKEN$1.TAG_CLOSE, resulting_string);
      } else if (open_token.text[0] === '{' && c === '}' && this._input.peek(1) === '}') {
        this._input.next();
        this._input.next();
        token = this._create_token(TOKEN$1.TAG_CLOSE, '}}');
      }
    }

    return token;
  };

  Tokenizer$1.prototype._read_attribute = function(c, previous_token, open_token) {
    var token = null;
    var resulting_string = '';
    if (open_token && open_token.text[0] === '<') {

      if (c === '=') {
        token = this._create_token(TOKEN$1.EQUALS, this._input.next());
      } else if (c === '"' || c === "'") {
        var content = this._input.next();
        if (c === '"') {
          content += this.__patterns.double_quote.read();
        } else {
          content += this.__patterns.single_quote.read();
        }
        token = this._create_token(TOKEN$1.VALUE, content);
      } else {
        resulting_string = this.__patterns.attribute.read();

        if (resulting_string) {
          if (previous_token.type === TOKEN$1.EQUALS) {
            token = this._create_token(TOKEN$1.VALUE, resulting_string);
          } else {
            token = this._create_token(TOKEN$1.ATTRIBUTE, resulting_string);
          }
        }
      }
    }
    return token;
  };

  Tokenizer$1.prototype._is_content_unformatted = function(tag_name) {
    // void_elements have no content and so cannot have unformatted content
    // script and style tags should always be read as unformatted content
    // finally content_unformatted and unformatted element contents are unformatted
    return this._options.void_elements.indexOf(tag_name) === -1 &&
      (this._options.content_unformatted.indexOf(tag_name) !== -1 ||
        this._options.unformatted.indexOf(tag_name) !== -1);
  };


  Tokenizer$1.prototype._read_raw_content = function(c, previous_token, open_token) { // jshint unused:false
    var resulting_string = '';
    if (open_token && open_token.text[0] === '{') {
      resulting_string = this.__patterns.handlebars_raw_close.read();
    } else if (previous_token.type === TOKEN$1.TAG_CLOSE && (previous_token.opened.text[0] === '<')) {
      var tag_name = previous_token.opened.text.substr(1).toLowerCase();
      if (tag_name === 'script' || tag_name === 'style') {
        // Script and style tags are allowed to have comments wrapping their content
        // or just have regular content.
        var token = this._read_comment_or_cdata(c);
        if (token) {
          token.type = TOKEN$1.TEXT;
          return token;
        }
        resulting_string = this._input.readUntil(new RegExp('</' + tag_name + '[\\n\\r\\t ]*?>', 'ig'));
      } else if (this._is_content_unformatted(tag_name)) {
        resulting_string = this._input.readUntil(new RegExp('</' + tag_name + '[\\n\\r\\t ]*?>', 'ig'));
      }
    }

    if (resulting_string) {
      return this._create_token(TOKEN$1.TEXT, resulting_string);
    }

    return null;
  };

  Tokenizer$1.prototype._read_content_word = function(c) {
    var resulting_string = '';
    if (this._options.unformatted_content_delimiter) {
      if (c === this._options.unformatted_content_delimiter[0]) {
        resulting_string = this.__patterns.unformatted_content_delimiter.read();
      }
    }

    if (!resulting_string) {
      resulting_string = this.__patterns.word.read();
    }
    if (resulting_string) {
      return this._create_token(TOKEN$1.TEXT, resulting_string);
    }
  };

  var Tokenizer_1$1 = Tokenizer$1;
  var TOKEN_1$1 = TOKEN$1;

  var tokenizer$1 = {
  	Tokenizer: Tokenizer_1$1,
  	TOKEN: TOKEN_1$1
  };

  var Options$2 = options$1.Options;
  var Output$1 = output.Output;
  var Tokenizer$2 = tokenizer$1.Tokenizer;
  var TOKEN$2 = tokenizer$1.TOKEN;

  var lineBreak = /\r\n|[\r\n]/;
  var allLineBreaks = /\r\n|[\r\n]/g;

  var Printer = function(options, base_indent_string) { //handles input/output and some other printing functions

    this.indent_level = 0;
    this.alignment_size = 0;
    this.max_preserve_newlines = options.max_preserve_newlines;
    this.preserve_newlines = options.preserve_newlines;

    this._output = new Output$1(options, base_indent_string);

  };

  Printer.prototype.current_line_has_match = function(pattern) {
    return this._output.current_line.has_match(pattern);
  };

  Printer.prototype.set_space_before_token = function(value, non_breaking) {
    this._output.space_before_token = value;
    this._output.non_breaking_space = non_breaking;
  };

  Printer.prototype.set_wrap_point = function() {
    this._output.set_indent(this.indent_level, this.alignment_size);
    this._output.set_wrap_point();
  };


  Printer.prototype.add_raw_token = function(token) {
    this._output.add_raw_token(token);
  };

  Printer.prototype.print_preserved_newlines = function(raw_token) {
    var newlines = 0;
    if (raw_token.type !== TOKEN$2.TEXT && raw_token.previous.type !== TOKEN$2.TEXT) {
      newlines = raw_token.newlines ? 1 : 0;
    }

    if (this.preserve_newlines) {
      newlines = raw_token.newlines < this.max_preserve_newlines + 1 ? raw_token.newlines : this.max_preserve_newlines + 1;
    }
    for (var n = 0; n < newlines; n++) {
      this.print_newline(n > 0);
    }

    return newlines !== 0;
  };

  Printer.prototype.traverse_whitespace = function(raw_token) {
    if (raw_token.whitespace_before || raw_token.newlines) {
      if (!this.print_preserved_newlines(raw_token)) {
        this._output.space_before_token = true;
      }
      return true;
    }
    return false;
  };

  Printer.prototype.previous_token_wrapped = function() {
    return this._output.previous_token_wrapped;
  };

  Printer.prototype.print_newline = function(force) {
    this._output.add_new_line(force);
  };

  Printer.prototype.print_token = function(token) {
    if (token.text) {
      this._output.set_indent(this.indent_level, this.alignment_size);
      this._output.add_token(token.text);
    }
  };

  Printer.prototype.indent = function() {
    this.indent_level++;
  };

  Printer.prototype.get_full_indent = function(level) {
    level = this.indent_level + (level || 0);
    if (level < 1) {
      return '';
    }

    return this._output.get_indent_string(level);
  };

  var get_type_attribute = function(start_token) {
    var result = null;
    var raw_token = start_token.next;

    // Search attributes for a type attribute
    while (raw_token.type !== TOKEN$2.EOF && start_token.closed !== raw_token) {
      if (raw_token.type === TOKEN$2.ATTRIBUTE && raw_token.text === 'type') {
        if (raw_token.next && raw_token.next.type === TOKEN$2.EQUALS &&
          raw_token.next.next && raw_token.next.next.type === TOKEN$2.VALUE) {
          result = raw_token.next.next.text;
        }
        break;
      }
      raw_token = raw_token.next;
    }

    return result;
  };

  var get_custom_beautifier_name = function(tag_check, raw_token) {
    var typeAttribute = null;
    var result = null;

    if (!raw_token.closed) {
      return null;
    }

    if (tag_check === 'script') {
      typeAttribute = 'text/javascript';
    } else if (tag_check === 'style') {
      typeAttribute = 'text/css';
    }

    typeAttribute = get_type_attribute(raw_token) || typeAttribute;

    // For script and style tags that have a type attribute, only enable custom beautifiers for matching values
    // For those without a type attribute use default;
    if (typeAttribute.search('text/css') > -1) {
      result = 'css';
    } else if (typeAttribute.search(/(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/) > -1) {
      result = 'javascript';
    } else if (typeAttribute.search(/(text|application|dojo)\/(x-)?(html)/) > -1) {
      result = 'html';
    } else if (typeAttribute.search(/test\/null/) > -1) {
      // Test only mime-type for testing the beautifier when null is passed as beautifing function
      result = 'null';
    }

    return result;
  };

  function in_array(what, arr) {
    return arr.indexOf(what) !== -1;
  }

  function TagFrame(parent, parser_token, indent_level) {
    this.parent = parent || null;
    this.tag = parser_token ? parser_token.tag_name : '';
    this.indent_level = indent_level || 0;
    this.parser_token = parser_token || null;
  }

  function TagStack(printer) {
    this._printer = printer;
    this._current_frame = null;
  }

  TagStack.prototype.get_parser_token = function() {
    return this._current_frame ? this._current_frame.parser_token : null;
  };

  TagStack.prototype.record_tag = function(parser_token) { //function to record a tag and its parent in this.tags Object
    var new_frame = new TagFrame(this._current_frame, parser_token, this._printer.indent_level);
    this._current_frame = new_frame;
  };

  TagStack.prototype._try_pop_frame = function(frame) { //function to retrieve the opening tag to the corresponding closer
    var parser_token = null;

    if (frame) {
      parser_token = frame.parser_token;
      this._printer.indent_level = frame.indent_level;
      this._current_frame = frame.parent;
    }

    return parser_token;
  };

  TagStack.prototype._get_frame = function(tag_list, stop_list) { //function to retrieve the opening tag to the corresponding closer
    var frame = this._current_frame;

    while (frame) { //till we reach '' (the initial value);
      if (tag_list.indexOf(frame.tag) !== -1) { //if this is it use it
        break;
      } else if (stop_list && stop_list.indexOf(frame.tag) !== -1) {
        frame = null;
        break;
      }
      frame = frame.parent;
    }

    return frame;
  };

  TagStack.prototype.try_pop = function(tag, stop_list) { //function to retrieve the opening tag to the corresponding closer
    var frame = this._get_frame([tag], stop_list);
    return this._try_pop_frame(frame);
  };

  TagStack.prototype.indent_to_tag = function(tag_list) {
    var frame = this._get_frame(tag_list);
    if (frame) {
      this._printer.indent_level = frame.indent_level;
    }
  };

  function Beautifier(source_text, options, js_beautify, css_beautify) {
    //Wrapper function to invoke all the necessary constructors and deal with the output.
    this._source_text = source_text || '';
    options = options || {};
    this._js_beautify = js_beautify;
    this._css_beautify = css_beautify;
    this._tag_stack = null;

    // Allow the setting of language/file-type specific options
    // with inheritance of overall settings
    var optionHtml = new Options$2(options, 'html');

    this._options = optionHtml;

    this._is_wrap_attributes_force = this._options.wrap_attributes.substr(0, 'force'.length) === 'force';
    this._is_wrap_attributes_force_expand_multiline = (this._options.wrap_attributes === 'force-expand-multiline');
    this._is_wrap_attributes_force_aligned = (this._options.wrap_attributes === 'force-aligned');
    this._is_wrap_attributes_aligned_multiple = (this._options.wrap_attributes === 'aligned-multiple');
    this._is_wrap_attributes_preserve = this._options.wrap_attributes.substr(0, 'preserve'.length) === 'preserve';
    this._is_wrap_attributes_preserve_aligned = (this._options.wrap_attributes === 'preserve-aligned');
  }

  Beautifier.prototype.beautify = function() {

    // if disabled, return the input unchanged.
    if (this._options.disabled) {
      return this._source_text;
    }

    var source_text = this._source_text;
    var eol = this._options.eol;
    if (this._options.eol === 'auto') {
      eol = '\n';
      if (source_text && lineBreak.test(source_text)) {
        eol = source_text.match(lineBreak)[0];
      }
    }

    // HACK: newline parsing inconsistent. This brute force normalizes the input.
    source_text = source_text.replace(allLineBreaks, '\n');

    var baseIndentString = source_text.match(/^[\t ]*/)[0];

    var last_token = {
      text: '',
      type: ''
    };

    var last_tag_token = new TagOpenParserToken();

    var printer = new Printer(this._options, baseIndentString);
    var tokens = new Tokenizer$2(source_text, this._options).tokenize();

    this._tag_stack = new TagStack(printer);

    var parser_token = null;
    var raw_token = tokens.next();
    while (raw_token.type !== TOKEN$2.EOF) {

      if (raw_token.type === TOKEN$2.TAG_OPEN || raw_token.type === TOKEN$2.COMMENT) {
        parser_token = this._handle_tag_open(printer, raw_token, last_tag_token, last_token);
        last_tag_token = parser_token;
      } else if ((raw_token.type === TOKEN$2.ATTRIBUTE || raw_token.type === TOKEN$2.EQUALS || raw_token.type === TOKEN$2.VALUE) ||
        (raw_token.type === TOKEN$2.TEXT && !last_tag_token.tag_complete)) {
        parser_token = this._handle_inside_tag(printer, raw_token, last_tag_token, tokens);
      } else if (raw_token.type === TOKEN$2.TAG_CLOSE) {
        parser_token = this._handle_tag_close(printer, raw_token, last_tag_token);
      } else if (raw_token.type === TOKEN$2.TEXT) {
        parser_token = this._handle_text(printer, raw_token, last_tag_token);
      } else {
        // This should never happen, but if it does. Print the raw token
        printer.add_raw_token(raw_token);
      }

      last_token = parser_token;

      raw_token = tokens.next();
    }
    var sweet_code = printer._output.get_code(eol);

    return sweet_code;
  };

  Beautifier.prototype._handle_tag_close = function(printer, raw_token, last_tag_token) {
    var parser_token = {
      text: raw_token.text,
      type: raw_token.type
    };
    printer.alignment_size = 0;
    last_tag_token.tag_complete = true;

    printer.set_space_before_token(raw_token.newlines || raw_token.whitespace_before !== '', true);
    if (last_tag_token.is_unformatted) {
      printer.add_raw_token(raw_token);
    } else {
      if (last_tag_token.tag_start_char === '<') {
        printer.set_space_before_token(raw_token.text[0] === '/', true); // space before />, no space before >
        if (this._is_wrap_attributes_force_expand_multiline && last_tag_token.has_wrapped_attrs) {
          printer.print_newline(false);
        }
      }
      printer.print_token(raw_token);

    }

    if (last_tag_token.indent_content &&
      !(last_tag_token.is_unformatted || last_tag_token.is_content_unformatted)) {
      printer.indent();

      // only indent once per opened tag
      last_tag_token.indent_content = false;
    }

    if (!last_tag_token.is_inline_element &&
      !(last_tag_token.is_unformatted || last_tag_token.is_content_unformatted)) {
      printer.set_wrap_point();
    }

    return parser_token;
  };

  Beautifier.prototype._handle_inside_tag = function(printer, raw_token, last_tag_token, tokens) {
    var wrapped = last_tag_token.has_wrapped_attrs;
    var parser_token = {
      text: raw_token.text,
      type: raw_token.type
    };

    printer.set_space_before_token(raw_token.newlines || raw_token.whitespace_before !== '', true);
    if (last_tag_token.is_unformatted) {
      printer.add_raw_token(raw_token);
    } else if (last_tag_token.tag_start_char === '{' && raw_token.type === TOKEN$2.TEXT) {
      // For the insides of handlebars allow newlines or a single space between open and contents
      if (printer.print_preserved_newlines(raw_token)) {
        raw_token.newlines = 0;
        printer.add_raw_token(raw_token);
      } else {
        printer.print_token(raw_token);
      }
    } else {
      if (raw_token.type === TOKEN$2.ATTRIBUTE) {
        printer.set_space_before_token(true);
        last_tag_token.attr_count += 1;
      } else if (raw_token.type === TOKEN$2.EQUALS) { //no space before =
        printer.set_space_before_token(false);
      } else if (raw_token.type === TOKEN$2.VALUE && raw_token.previous.type === TOKEN$2.EQUALS) { //no space before value
        printer.set_space_before_token(false);
      }

      if (raw_token.type === TOKEN$2.ATTRIBUTE && last_tag_token.tag_start_char === '<') {
        if (this._is_wrap_attributes_preserve || this._is_wrap_attributes_preserve_aligned) {
          printer.traverse_whitespace(raw_token);
          wrapped = wrapped || raw_token.newlines !== 0;
        }


        if (this._is_wrap_attributes_force) {
          var force_attr_wrap = last_tag_token.attr_count > 1;
          if (this._is_wrap_attributes_force_expand_multiline && last_tag_token.attr_count === 1) {
            var is_only_attribute = true;
            var peek_index = 0;
            var peek_token;
            do {
              peek_token = tokens.peek(peek_index);
              if (peek_token.type === TOKEN$2.ATTRIBUTE) {
                is_only_attribute = false;
                break;
              }
              peek_index += 1;
            } while (peek_index < 4 && peek_token.type !== TOKEN$2.EOF && peek_token.type !== TOKEN$2.TAG_CLOSE);

            force_attr_wrap = !is_only_attribute;
          }

          if (force_attr_wrap) {
            printer.print_newline(false);
            wrapped = true;
          }
        }
      }
      printer.print_token(raw_token);
      wrapped = wrapped || printer.previous_token_wrapped();
      last_tag_token.has_wrapped_attrs = wrapped;
    }
    return parser_token;
  };

  Beautifier.prototype._handle_text = function(printer, raw_token, last_tag_token) {
    var parser_token = {
      text: raw_token.text,
      type: 'TK_CONTENT'
    };
    if (last_tag_token.custom_beautifier_name) { //check if we need to format javascript
      this._print_custom_beatifier_text(printer, raw_token, last_tag_token);
    } else if (last_tag_token.is_unformatted || last_tag_token.is_content_unformatted) {
      printer.add_raw_token(raw_token);
    } else {
      printer.traverse_whitespace(raw_token);
      printer.print_token(raw_token);
    }
    return parser_token;
  };

  Beautifier.prototype._print_custom_beatifier_text = function(printer, raw_token, last_tag_token) {
    var local = this;
    if (raw_token.text !== '') {

      var text = raw_token.text,
        _beautifier,
        script_indent_level = 1,
        pre = '',
        post = '';
      if (last_tag_token.custom_beautifier_name === 'javascript' && typeof this._js_beautify === 'function') {
        _beautifier = this._js_beautify;
      } else if (last_tag_token.custom_beautifier_name === 'css' && typeof this._css_beautify === 'function') {
        _beautifier = this._css_beautify;
      } else if (last_tag_token.custom_beautifier_name === 'html') {
        _beautifier = function(html_source, options) {
          var beautifier = new Beautifier(html_source, options, local._js_beautify, local._css_beautify);
          return beautifier.beautify();
        };
      }

      if (this._options.indent_scripts === "keep") {
        script_indent_level = 0;
      } else if (this._options.indent_scripts === "separate") {
        script_indent_level = -printer.indent_level;
      }

      var indentation = printer.get_full_indent(script_indent_level);

      // if there is at least one empty line at the end of this text, strip it
      // we'll be adding one back after the text but before the containing tag.
      text = text.replace(/\n[ \t]*$/, '');

      // Handle the case where content is wrapped in a comment or cdata.
      if (last_tag_token.custom_beautifier_name !== 'html' &&
        text[0] === '<' && text.match(/^(<!--|<!\[CDATA\[)/)) {
        var matched = /^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(text);

        // if we start to wrap but don't finish, print raw
        if (!matched) {
          printer.add_raw_token(raw_token);
          return;
        }

        pre = indentation + matched[1] + '\n';
        text = matched[4];
        if (matched[5]) {
          post = indentation + matched[5];
        }

        // if there is at least one empty line at the end of this text, strip it
        // we'll be adding one back after the text but before the containing tag.
        text = text.replace(/\n[ \t]*$/, '');

        if (matched[2] || matched[3].indexOf('\n') !== -1) {
          // if the first line of the non-comment text has spaces
          // use that as the basis for indenting in null case.
          matched = matched[3].match(/[ \t]+$/);
          if (matched) {
            raw_token.whitespace_before = matched[0];
          }
        }
      }

      if (text) {
        if (_beautifier) {

          // call the Beautifier if avaliable
          var Child_options = function() {
            this.eol = '\n';
          };
          Child_options.prototype = this._options.raw_options;
          var child_options = new Child_options();
          text = _beautifier(indentation + text, child_options);
        } else {
          // simply indent the string otherwise
          var white = raw_token.whitespace_before;
          if (white) {
            text = text.replace(new RegExp('\n(' + white + ')?', 'g'), '\n');
          }

          text = indentation + text.replace(/\n/g, '\n' + indentation);
        }
      }

      if (pre) {
        if (!text) {
          text = pre + post;
        } else {
          text = pre + text + '\n' + post;
        }
      }

      printer.print_newline(false);
      if (text) {
        raw_token.text = text;
        raw_token.whitespace_before = '';
        raw_token.newlines = 0;
        printer.add_raw_token(raw_token);
        printer.print_newline(true);
      }
    }
  };

  Beautifier.prototype._handle_tag_open = function(printer, raw_token, last_tag_token, last_token) {
    var parser_token = this._get_tag_open_token(raw_token);

    if ((last_tag_token.is_unformatted || last_tag_token.is_content_unformatted) &&
      raw_token.type === TOKEN$2.TAG_OPEN && raw_token.text.indexOf('</') === 0) {
      // End element tags for unformatted or content_unformatted elements
      // are printed raw to keep any newlines inside them exactly the same.
      printer.add_raw_token(raw_token);
    } else {
      printer.traverse_whitespace(raw_token);
      this._set_tag_position(printer, raw_token, parser_token, last_tag_token, last_token);
      if (!parser_token.is_inline_element) {
        printer.set_wrap_point();
      }
      printer.print_token(raw_token);
    }

    //indent attributes an auto, forced, aligned or forced-align line-wrap
    if (this._is_wrap_attributes_force_aligned || this._is_wrap_attributes_aligned_multiple || this._is_wrap_attributes_preserve_aligned) {
      parser_token.alignment_size = raw_token.text.length + 1;
    }

    if (!parser_token.tag_complete && !parser_token.is_unformatted) {
      printer.alignment_size = parser_token.alignment_size;
    }

    return parser_token;
  };

  var TagOpenParserToken = function(parent, raw_token) {
    this.parent = parent || null;
    this.text = '';
    this.type = 'TK_TAG_OPEN';
    this.tag_name = '';
    this.is_inline_element = false;
    this.is_unformatted = false;
    this.is_content_unformatted = false;
    this.is_empty_element = false;
    this.is_start_tag = false;
    this.is_end_tag = false;
    this.indent_content = false;
    this.multiline_content = false;
    this.custom_beautifier_name = null;
    this.start_tag_token = null;
    this.attr_count = 0;
    this.has_wrapped_attrs = false;
    this.alignment_size = 0;
    this.tag_complete = false;
    this.tag_start_char = '';
    this.tag_check = '';

    if (!raw_token) {
      this.tag_complete = true;
    } else {
      var tag_check_match;

      this.tag_start_char = raw_token.text[0];
      this.text = raw_token.text;

      if (this.tag_start_char === '<') {
        tag_check_match = raw_token.text.match(/^<([^\s>]*)/);
        this.tag_check = tag_check_match ? tag_check_match[1] : '';
      } else {
        tag_check_match = raw_token.text.match(/^{{[#\^]?([^\s}]+)/);
        this.tag_check = tag_check_match ? tag_check_match[1] : '';
      }
      this.tag_check = this.tag_check.toLowerCase();

      if (raw_token.type === TOKEN$2.COMMENT) {
        this.tag_complete = true;
      }

      this.is_start_tag = this.tag_check.charAt(0) !== '/';
      this.tag_name = !this.is_start_tag ? this.tag_check.substr(1) : this.tag_check;
      this.is_end_tag = !this.is_start_tag ||
        (raw_token.closed && raw_token.closed.text === '/>');

      // handlebars tags that don't start with # or ^ are single_tags, and so also start and end.
      this.is_end_tag = this.is_end_tag ||
        (this.tag_start_char === '{' && (this.text.length < 3 || (/[^#\^]/.test(this.text.charAt(2)))));
    }
  };

  Beautifier.prototype._get_tag_open_token = function(raw_token) { //function to get a full tag and parse its type
    var parser_token = new TagOpenParserToken(this._tag_stack.get_parser_token(), raw_token);

    parser_token.alignment_size = this._options.wrap_attributes_indent_size;

    parser_token.is_end_tag = parser_token.is_end_tag ||
      in_array(parser_token.tag_check, this._options.void_elements);

    parser_token.is_empty_element = parser_token.tag_complete ||
      (parser_token.is_start_tag && parser_token.is_end_tag);

    parser_token.is_unformatted = !parser_token.tag_complete && in_array(parser_token.tag_check, this._options.unformatted);
    parser_token.is_content_unformatted = !parser_token.is_empty_element && in_array(parser_token.tag_check, this._options.content_unformatted);
    parser_token.is_inline_element = in_array(parser_token.tag_name, this._options.inline) || parser_token.tag_start_char === '{';

    return parser_token;
  };

  Beautifier.prototype._set_tag_position = function(printer, raw_token, parser_token, last_tag_token, last_token) {

    if (!parser_token.is_empty_element) {
      if (parser_token.is_end_tag) { //this tag is a double tag so check for tag-ending
        parser_token.start_tag_token = this._tag_stack.try_pop(parser_token.tag_name); //remove it and all ancestors
      } else { // it's a start-tag
        // check if this tag is starting an element that has optional end element
        // and do an ending needed
        if (this._do_optional_end_element(parser_token)) {
          if (!parser_token.is_inline_element) {
            if (parser_token.parent) {
              parser_token.parent.multiline_content = true;
            }
            printer.print_newline(false);
          }

        }

        this._tag_stack.record_tag(parser_token); //push it on the tag stack

        if ((parser_token.tag_name === 'script' || parser_token.tag_name === 'style') &&
          !(parser_token.is_unformatted || parser_token.is_content_unformatted)) {
          parser_token.custom_beautifier_name = get_custom_beautifier_name(parser_token.tag_check, raw_token);
        }
      }
    }

    if (in_array(parser_token.tag_check, this._options.extra_liners)) { //check if this double needs an extra line
      printer.print_newline(false);
      if (!printer._output.just_added_blankline()) {
        printer.print_newline(true);
      }
    }

    if (parser_token.is_empty_element) { //if this tag name is a single tag type (either in the list or has a closing /)

      // if you hit an else case, reset the indent level if you are inside an:
      // 'if', 'unless', or 'each' block.
      if (parser_token.tag_start_char === '{' && parser_token.tag_check === 'else') {
        this._tag_stack.indent_to_tag(['if', 'unless', 'each']);
        parser_token.indent_content = true;
        // Don't add a newline if opening {{#if}} tag is on the current line
        var foundIfOnCurrentLine = printer.current_line_has_match(/{{#if/);
        if (!foundIfOnCurrentLine) {
          printer.print_newline(false);
        }
      }

      // Don't add a newline before elements that should remain where they are.
      if (parser_token.tag_name === '!--' && last_token.type === TOKEN$2.TAG_CLOSE &&
        last_tag_token.is_end_tag && parser_token.text.indexOf('\n') === -1) ; else if (!parser_token.is_inline_element && !parser_token.is_unformatted) {
        printer.print_newline(false);
      }
    } else if (parser_token.is_unformatted || parser_token.is_content_unformatted) {
      if (!parser_token.is_inline_element && !parser_token.is_unformatted) {
        printer.print_newline(false);
      }
    } else if (parser_token.is_end_tag) { //this tag is a double tag so check for tag-ending
      if ((parser_token.start_tag_token && parser_token.start_tag_token.multiline_content) ||
        !(parser_token.is_inline_element ||
          (last_tag_token.is_inline_element) ||
          (last_token.type === TOKEN$2.TAG_CLOSE &&
            parser_token.start_tag_token === last_tag_token) ||
          (last_token.type === 'TK_CONTENT')
        )) {
        printer.print_newline(false);
      }
    } else { // it's a start-tag
      parser_token.indent_content = !parser_token.custom_beautifier_name;

      if (parser_token.tag_start_char === '<') {
        if (parser_token.tag_name === 'html') {
          parser_token.indent_content = this._options.indent_inner_html;
        } else if (parser_token.tag_name === 'head') {
          parser_token.indent_content = this._options.indent_head_inner_html;
        } else if (parser_token.tag_name === 'body') {
          parser_token.indent_content = this._options.indent_body_inner_html;
        }
      }

      if (!parser_token.is_inline_element && last_token.type !== 'TK_CONTENT') {
        if (parser_token.parent) {
          parser_token.parent.multiline_content = true;
        }
        printer.print_newline(false);
      }
    }
  };

  //To be used for <p> tag special case:
  //var p_closers = ['address', 'article', 'aside', 'blockquote', 'details', 'div', 'dl', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hr', 'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'];

  Beautifier.prototype._do_optional_end_element = function(parser_token) {
    var result = null;
    // NOTE: cases of "if there is no more content in the parent element"
    // are handled automatically by the beautifier.
    // It assumes parent or ancestor close tag closes all children.
    // https://www.w3.org/TR/html5/syntax.html#optional-tags
    if (parser_token.is_empty_element || !parser_token.is_start_tag || !parser_token.parent) {
      return;

    } else if (parser_token.tag_name === 'body') {
      // A head element’s end tag may be omitted if the head element is not immediately followed by a space character or a comment.
      result = result || this._tag_stack.try_pop('head');

      //} else if (parser_token.tag_name === 'body') {
      // DONE: A body element’s end tag may be omitted if the body element is not immediately followed by a comment.

    } else if (parser_token.tag_name === 'li') {
      // An li element’s end tag may be omitted if the li element is immediately followed by another li element or if there is no more content in the parent element.
      result = result || this._tag_stack.try_pop('li', ['ol', 'ul']);

    } else if (parser_token.tag_name === 'dd' || parser_token.tag_name === 'dt') {
      // A dd element’s end tag may be omitted if the dd element is immediately followed by another dd element or a dt element, or if there is no more content in the parent element.
      // A dt element’s end tag may be omitted if the dt element is immediately followed by another dt element or a dd element.
      result = result || this._tag_stack.try_pop('dt', ['dl']);
      result = result || this._tag_stack.try_pop('dd', ['dl']);

      //} else if (p_closers.indexOf(parser_token.tag_name) !== -1) {
      //TODO: THIS IS A BUG FARM. We are not putting this into 1.8.0 as it is likely to blow up.
      //A p element’s end tag may be omitted if the p element is immediately followed by an address, article, aside, blockquote, details, div, dl, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hr, main, nav, ol, p, pre, section, table, or ul element, or if there is no more content in the parent element and the parent element is an HTML element that is not an a, audio, del, ins, map, noscript, or video element, or an autonomous custom element.
      //result = result || this._tag_stack.try_pop('p', ['body']);

    } else if (parser_token.tag_name === 'rp' || parser_token.tag_name === 'rt') {
      // An rt element’s end tag may be omitted if the rt element is immediately followed by an rt or rp element, or if there is no more content in the parent element.
      // An rp element’s end tag may be omitted if the rp element is immediately followed by an rt or rp element, or if there is no more content in the parent element.
      result = result || this._tag_stack.try_pop('rt', ['ruby', 'rtc']);
      result = result || this._tag_stack.try_pop('rp', ['ruby', 'rtc']);

    } else if (parser_token.tag_name === 'optgroup') {
      // An optgroup element’s end tag may be omitted if the optgroup element is immediately followed by another optgroup element, or if there is no more content in the parent element.
      // An option element’s end tag may be omitted if the option element is immediately followed by another option element, or if it is immediately followed by an optgroup element, or if there is no more content in the parent element.
      result = result || this._tag_stack.try_pop('optgroup', ['select']);
      //result = result || this._tag_stack.try_pop('option', ['select']);

    } else if (parser_token.tag_name === 'option') {
      // An option element’s end tag may be omitted if the option element is immediately followed by another option element, or if it is immediately followed by an optgroup element, or if there is no more content in the parent element.
      result = result || this._tag_stack.try_pop('option', ['select', 'datalist', 'optgroup']);

    } else if (parser_token.tag_name === 'colgroup') {
      // DONE: A colgroup element’s end tag may be omitted if the colgroup element is not immediately followed by a space character or a comment.
      // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.
      result = result || this._tag_stack.try_pop('caption', ['table']);

    } else if (parser_token.tag_name === 'thead') {
      // A colgroup element's end tag may be ommitted if a thead, tfoot, tbody, or tr element is started.
      // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.
      result = result || this._tag_stack.try_pop('caption', ['table']);
      result = result || this._tag_stack.try_pop('colgroup', ['table']);

      //} else if (parser_token.tag_name === 'caption') {
      // DONE: A caption element’s end tag may be omitted if the caption element is not immediately followed by a space character or a comment.

    } else if (parser_token.tag_name === 'tbody' || parser_token.tag_name === 'tfoot') {
      // A thead element’s end tag may be omitted if the thead element is immediately followed by a tbody or tfoot element.
      // A tbody element’s end tag may be omitted if the tbody element is immediately followed by a tbody or tfoot element, or if there is no more content in the parent element.
      // A colgroup element's end tag may be ommitted if a thead, tfoot, tbody, or tr element is started.
      // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.
      result = result || this._tag_stack.try_pop('caption', ['table']);
      result = result || this._tag_stack.try_pop('colgroup', ['table']);
      result = result || this._tag_stack.try_pop('thead', ['table']);
      result = result || this._tag_stack.try_pop('tbody', ['table']);

      //} else if (parser_token.tag_name === 'tfoot') {
      // DONE: A tfoot element’s end tag may be omitted if there is no more content in the parent element.

    } else if (parser_token.tag_name === 'tr') {
      // A tr element’s end tag may be omitted if the tr element is immediately followed by another tr element, or if there is no more content in the parent element.
      // A colgroup element's end tag may be ommitted if a thead, tfoot, tbody, or tr element is started.
      // A caption element's end tag may be ommitted if a colgroup, thead, tfoot, tbody, or tr element is started.
      result = result || this._tag_stack.try_pop('caption', ['table']);
      result = result || this._tag_stack.try_pop('colgroup', ['table']);
      result = result || this._tag_stack.try_pop('tr', ['table', 'thead', 'tbody', 'tfoot']);

    } else if (parser_token.tag_name === 'th' || parser_token.tag_name === 'td') {
      // A td element’s end tag may be omitted if the td element is immediately followed by a td or th element, or if there is no more content in the parent element.
      // A th element’s end tag may be omitted if the th element is immediately followed by a td or th element, or if there is no more content in the parent element.
      result = result || this._tag_stack.try_pop('td', ['table', 'thead', 'tbody', 'tfoot', 'tr']);
      result = result || this._tag_stack.try_pop('th', ['table', 'thead', 'tbody', 'tfoot', 'tr']);
    }

    // Start element omission not handled currently
    // A head element’s start tag may be omitted if the element is empty, or if the first thing inside the head element is an element.
    // A tbody element’s start tag may be omitted if the first thing inside the tbody element is a tr element, and if the element is not immediately preceded by a tbody, thead, or tfoot element whose end tag has been omitted. (It can’t be omitted if the element is empty.)
    // A colgroup element’s start tag may be omitted if the first thing inside the colgroup element is a col element, and if the element is not immediately preceded by another colgroup element whose end tag has been omitted. (It can’t be omitted if the element is empty.)

    // Fix up the parent of the parser token
    parser_token.parent = this._tag_stack.get_parser_token();

    return result;
  };

  var Beautifier_1 = Beautifier;

  var beautifier = {
  	Beautifier: Beautifier_1
  };

  var Beautifier$1 = beautifier.Beautifier,
    Options$3 = options$1.Options;

  function style_html(html_source, options, js_beautify, css_beautify) {
    var beautifier = new Beautifier$1(html_source, options, js_beautify, css_beautify);
    return beautifier.beautify();
  }

  var html = style_html;
  var defaultOptions = function() {
    return new Options$3();
  };
  html.defaultOptions = defaultOptions;

  var id = 'ace/mode/javascript_worker';
  var src = "\"no use strict\";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail=\"\";testPath;){var alias=paths[testPath];if(\"string\"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,\"/\")+(tail||alias.main||alias.name);if(alias===!1)return\"\";var i=testPath.lastIndexOf(\"/\");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:\"log\",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:\"error\",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf(\"!\")){var chunks=moduleName.split(\"!\");return window.normalizeModule(parentId,chunks[0])+\"!\"+window.normalizeModule(parentId,chunks[1])}if(\".\"==moduleName.charAt(0)){var base=parentId.split(\"/\").slice(0,-1).join(\"/\");for(moduleName=(base?base+\"/\":\"\")+moduleName;-1!==moduleName.indexOf(\".\")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,\"\").replace(/\\/\\.\\//,\"/\").replace(/[^\\/]+\\/\\.\\.\\//,\"\")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error(\"worker.js acequire() accepts only (parentId, id) as arguments\");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log(\"unable to load \"+id);var path=resolveModuleId(id,window.acequire.tlns);return\".js\"!=path.slice(-3)&&(path+=\".js\"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,\"string\"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),\"function\"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=[\"require\",\"exports\",\"module\"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case\"require\":return req;case\"exports\":return module.exports;case\"module\":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire(\"ace/lib/event_emitter\").EventEmitter,oop=window.acequire(\"ace/lib/oop\"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:\"call\",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:\"event\",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error(\"Unknown command:\"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire(\"ace/lib/es5-shim\"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define(\"ace/range\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return\"Range: [\"+this.start.row+\"/\"+this.start.column+\"] -> [\"+this.end.row+\"/\"+this.end.column+\"]\"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){\"object\"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){\"object\"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||\"\";switch(delta.action){case\"insert\":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case\"remove\":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){\"object\"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?\"unshift\":\"push\"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(acequire,exports){\"use strict\";var oop=acequire(\"./lib/oop\"),EventEmitter=acequire(\"./lib/event_emitter\").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=\"insert\"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal(\"change\",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener(\"change\",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on(\"change\",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"],function(acequire,exports){\"use strict\";var oop=acequire(\"./lib/oop\"),applyDelta=acequire(\"./apply_delta\").applyDelta,EventEmitter=acequire(\"./lib/event_emitter\").EventEmitter,Range=acequire(\"./range\").Range,Anchor=acequire(\"./anchor\").Anchor,Document=function(textOrLines){this.$lines=[\"\"],0===textOrLines.length?this.$lines=[\"\"]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0===\"aaa\".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,\"\\n\").split(\"\\n\")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:\"\\n\",this._signal(\"changeNewLineMode\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\"windows\":return\"\\r\\n\";case\"unix\":return\"\\n\";default:return this.$autoNewLine||\"\\n\"}},this.$autoNewLine=\"\",this.$newLineMode=\"auto\",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal(\"changeNewLineMode\"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return\"\\r\\n\"==text||\"\\r\"==text||\"\\n\"==text},this.getLine=function(row){return this.$lines[row]||\"\"},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||\"\").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\"),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\"),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\"),this.insertMergedLines(position,[\"\",\"\"])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:\"insert\",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([\"\"]),column=0):(lines=[\"\"].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:\"insert\",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:\"remove\",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:\"remove\",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:\"remove\",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:\"remove\",lines:[\"\",\"\"]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert=\"insert\"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal(\"change\",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(\"\"),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:\"insert\"==delta.action?\"remove\":\"insert\",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split(\"\").reverse().join(\"\")},exports.stringRepeat=function(string,count){for(var result=\"\";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,\"\")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,\"\")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&\"object\"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if(\"object\"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if(\"[object Object]\"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,\"\\\\$1\")},exports.escapeHTML=function(str){return str.replace(/&/g,\"&#38;\").replace(/\"/g,\"&#34;\").replace(/'/g,\"&#39;\").replace(/</g,\"&#60;\")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define(\"ace/worker/mirror\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/document\",\"ace/lib/lang\"],function(acequire,exports){\"use strict\";acequire(\"../range\").Range;var Document=acequire(\"../document\").Document,lang=acequire(\"../lib/lang\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\"\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\"change\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\"insert\",start:data[i],lines:data[i+1]};else var d={action:\"remove\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\"ace/mode/javascript/jshint\",[\"require\",\"exports\",\"module\"],function(acequire,exports,module){module.exports=function outer(modules,cache,entry){function newRequire(name,jumped){if(!cache[name]){if(!modules[name]){var currentRequire=\"function\"==typeof acequire&&acequire;if(!jumped&&currentRequire)return currentRequire(name,!0);if(previousRequire)return previousRequire(name,!0);var err=Error(\"Cannot find module '\"+name+\"'\");throw err.code=\"MODULE_NOT_FOUND\",err}var m=cache[name]={exports:{}};modules[name][0].call(m.exports,function(x){var id=modules[name][1][x];return newRequire(id?id:x)},m,m.exports,outer,modules,cache,entry)}return cache[name].exports}for(var previousRequire=\"function\"==typeof acequire&&acequire,i=0;entry.length>i;i++)newRequire(entry[i]);return newRequire(entry[0])}({\"/node_modules/browserify/node_modules/events/events.js\":[function(_dereq_,module){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return\"function\"==typeof arg}function isNumber(arg){return\"number\"==typeof arg}function isObject(arg){return\"object\"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError(\"n must be a positive number\");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),\"error\"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified \"error\" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError(\"listener must be a function\");if(this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[type].length),\"function\"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError(\"listener must be a function\");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit(\"removeListener\",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit(\"removeListener\",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)\"removeListener\"!==key&&this.removeAllListeners(key);return this.removeAllListeners(\"removeListener\"),this._events={},this\n}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],\"/node_modules/jshint/data/ascii-identifier-data.js\":[function(_dereq_,module){for(var identifierStartTable=[],i=0;128>i;i++)identifierStartTable[i]=36===i||i>=65&&90>=i||95===i||i>=97&&122>=i;for(var identifierPartTable=[],i=0;128>i;i++)identifierPartTable[i]=identifierStartTable[i]||i>=48&&57>=i;module.exports={asciiIdentifierStartTable:identifierStartTable,asciiIdentifierPartTable:identifierPartTable}},{}],\"/node_modules/jshint/lodash.js\":[function(_dereq_,module,exports){(function(global){(function(){function baseFindIndex(array,predicate,fromRight){for(var length=array.length,index=fromRight?length:-1;fromRight?index--:length>++index;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;length>++index;)if(array[index]===value)return index;return-1}function baseIsFunction(value){return\"function\"==typeof value||!1}function baseToString(value){return\"string\"==typeof value?value:null==value?\"\":value+\"\"}function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:length>++index;){var other=array[index];if(other!==other)return index}return-1}function isObjectLike(value){return!!value&&\"object\"==typeof value}function lodash(){}function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));length>++index;)array[index]=source[index];return array}function arrayEach(array,iteratee){for(var index=-1,length=array.length;length>++index&&iteratee(array[index],index,array)!==!1;);return array}function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];length>++index;){var value=array[index];predicate(value,index,array)&&(result[++resIndex]=value)}return result}function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);length>++index;)result[index]=iteratee(array[index],index,array);return result}function arrayMax(array){for(var index=-1,length=array.length,result=NEGATIVE_INFINITY;length>++index;){var value=array[index];value>result&&(result=value)}return result}function arraySome(array,predicate){for(var index=-1,length=array.length;length>++index;)if(predicate(array[index],index,array))return!0;return!1}function assignWith(object,source,customizer){var props=keys(source);push.apply(props,getSymbols(source));for(var index=-1,length=props.length;length>++index;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(value!==undefined||key in object)||(object[key]=result)}return object}function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;length>++index;){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;return\"function\"==type?thisArg===undefined?func:bindCallback(func,thisArg,argCount):null==func?identity:\"object\"==type?baseMatches(func):thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseGet(object,path,pathKey){if(null!=object){pathKey!==undefined&&pathKey in toObject(object)&&(path=[pathKey]);for(var index=-1,length=path.length;null!=object&&length>++index;)var result=object=object[path[index]];return result}}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other)return 0!==value||1/value==1/other;var valType=typeof value,othType=typeof other;return\"function\"!=valType&&\"object\"!=valType&&\"function\"!=othType&&\"object\"!=othType||null==value||null==other?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var valWrapped=objIsObj&&hasOwnProperty.call(object,\"__wrapped__\"),othWrapped=othIsObj&&hasOwnProperty.call(other,\"__wrapped__\");if(valWrapped||othWrapped)return equalFunc(valWrapped?object.value():object,othWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsMatch(object,props,values,strictCompareFlags,customizer){for(var index=-1,length=props.length,noCustomizer=!customizer;length>++index;)if(noCustomizer&&strictCompareFlags[index]?values[index]!==object[props[index]]:!(props[index]in object))return!1;for(index=-1;length>++index;){var key=props[index],objValue=object[key],srcValue=values[index];if(noCustomizer&&strictCompareFlags[index])var result=objValue!==undefined||key in object;else result=customizer?customizer(objValue,srcValue,key):undefined,result===undefined&&(result=baseIsEqual(srcValue,objValue,customizer,!0));if(!result)return!1}return!0}function baseMatches(source){var props=keys(source),length=props.length;if(!length)return constant(!0);if(1==length){var key=props[0],value=source[key];if(isStrictComparable(value))return function(object){return null==object?!1:object[key]===value&&(value!==undefined||key in toObject(object))}}for(var values=Array(length),strictCompareFlags=Array(length);length--;)value=source[props[length]],values[length]=value,strictCompareFlags[length]=isStrictComparable(value);return function(object){return null!=object&&baseIsMatch(toObject(object),props,values,strictCompareFlags)}}function baseMatchesProperty(path,value){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(value),pathKey=path+\"\";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),!(!isArr&&isCommon||key in object)){if(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;key=last(path),object=toObject(object)}return object[key]===value?value!==undefined||key in object:baseIsEqual(value,object[key],null,!0)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object))return object;var isSrcArr=isLength(source.length)&&(isArray(source)||isTypedArray(source));if(!isSrcArr){var props=keys(source);push.apply(props,getSymbols(source))}return arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObjectLike(srcValue))stackA||(stackA=[]),stackB||(stackB=[]),baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue),!isSrcArr&&result===undefined||!isCommon&&(result===result?result===value:value!==value)||(object[key]=result)}}),object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){for(var length=stackA.length,srcValue=source[key];length--;)if(stackA[length]==srcValue)return object[key]=stackB[length],undefined;var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue,isLength(srcValue.length)&&(isArray(srcValue)||isTypedArray(srcValue))?result=isArray(value)?value:getLength(value)?arrayCopy(value):[]:isPlainObject(srcValue)||isArguments(srcValue)?result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}:isCommon=!1),stackA.push(srcValue),stackB.push(result),isCommon?object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB):(result===result?result!==value:value===value)&&(object[key]=result)}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+\"\";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);length>++index;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseValues(object,props){for(var index=-1,length=props.length,result=Array(length);length>++index;)result[index]=object[props[index]];return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(\"number\"==typeof value&&value===value&&HALF_MAX_ARRAY_LENGTH>=high){for(;high>low;){var mid=low+high>>>1,computed=array[mid];(retHighest?value>=computed:value>computed)?low=mid+1:high=mid}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsUndef=value===undefined;high>low;){var mid=floor((low+high)/2),computed=iteratee(array[mid]),isReflexive=computed===computed;if(valIsNaN)var setLow=isReflexive||retHighest;else setLow=valIsUndef?isReflexive&&(retHighest||computed!==undefined):retHighest?value>=computed:value>computed;setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(\"function\"!=typeof func)return identity;if(thisArg===undefined)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){return bufferSlice.call(buffer,0)}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2&&sources[length-2],guard=length>2&&sources[2],thisArg=length>1&&sources[length-1];for(\"function\"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer=\"function\"==typeof thisArg?thisArg:null,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?null:customizer,length=1);length>++index;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:length>++index)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:length>++index;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createFindIndex(fromRight){return function(array,predicate,thisArg){return array&&array.length?(predicate=getCallback(predicate,thisArg,3),baseFindIndex(array,predicate,fromRight)):-1}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return\"function\"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length,result=!0;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;result&&arrLength>++index;){var arrValue=array[index],othValue=other[index];if(result=undefined,customizer&&(result=isLoose?customizer(othValue,arrValue,index):customizer(arrValue,othValue,index)),result===undefined)if(isLoose)for(var othIndex=othLength;othIndex--&&(othValue=other[othIndex],!(result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))););else result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}return!!result}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:0==object?1/object==1/other:object==+other;case regexpTag:case stringTag:return object==other+\"\"}return!1}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var skipCtor=isLoose,index=-1;objLength>++index;){var key=objProps[index],result=isLoose?key in other:hasOwnProperty.call(other,key);if(result){var objValue=object[key],othValue=other[key];result=undefined,customizer&&(result=isLoose?customizer(othValue,objValue,key):customizer(objValue,othValue,key)),result===undefined&&(result=objValue&&objValue===othValue||equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB))}if(!result)return!1;skipCtor||(skipCtor=\"constructor\"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&\"constructor\"in object&&\"constructor\"in other&&!(\"function\"==typeof objCtor&&objCtor instanceof objCtor&&\"function\"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;return result=result===callback?baseCallback:result,argCount?result(func,thisArg,argCount):result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;return result=result===indexOf?baseIndexOf:result,collection?result(collection,target,fromIndex):result}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&\"string\"==typeof array[0]&&hasOwnProperty.call(array,\"index\")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){var Ctor=object.constructor;return\"function\"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function isIndex(value,length){return value=+value,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&0==value%1&&length>value}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if(\"number\"==type)var length=getLength(object),prereq=isLength(length)&&isIndex(index,length);else prereq=\"string\"==type&&index in object;if(prereq){var other=object[index];return value===value?value===other:other!==other}return!1}function isKey(value,object){var type=typeof value;if(\"string\"==type&&reIsPlainProp.test(value)||\"number\"==type)return!0;if(isArray(value))return!1;var result=!reIsDeepProp.test(value);return result||null!=object&&value in toObject(object)}function isLength(value){return\"number\"==typeof value&&value>-1&&0==value%1&&MAX_SAFE_INTEGER>=value}function isStrictComparable(value){return value===value&&(0===value?1/value>0:!isObject(value))}function shimIsPlainObject(value){var Ctor;if(lodash.support,!isObjectLike(value)||objToString.call(value)!=objectTag||!hasOwnProperty.call(value,\"constructor\")&&(Ctor=value.constructor,\"function\"==typeof Ctor&&!(Ctor instanceof Ctor)))return!1;var result;return baseForIn(value,function(subValue,key){result=key}),result===undefined||hasOwnProperty.call(value,result)}function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,support=lodash.support,allowIndexes=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object)),index=-1,result=[];propsLength>++index;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,\"$1\"):number||match)}),result}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;if(\"number\"==typeof fromIndex)fromIndex=0>fromIndex?nativeMax(length+fromIndex,0):fromIndex;else if(fromIndex){var index=binaryIndex(array,value),other=array[index];return(value===value?value===other:other!==other)?index:-1}return baseIndexOf(array,value,fromIndex||0)}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function slice(array,start,end){var length=array?array.length:0;return length?(end&&\"number\"!=typeof end&&isIterateeCall(array,start,end)&&(start=0,end=length),baseSlice(array,start,end)):[]}function unzip(array){for(var index=-1,length=(array&&array.length&&arrayMax(arrayMap(array,getLength)))>>>0,result=Array(length);length>++index;)result[index]=arrayMap(array,baseProperty(index));return result}function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;return isLength(length)||(collection=values(collection),length=collection.length),length?(fromIndex=\"number\"!=typeof fromIndex||guard&&isIterateeCall(target,fromIndex,guard)?0:0>fromIndex?nativeMax(length+fromIndex,0):fromIndex||0,\"string\"==typeof collection||!isArray(collection)&&isString(collection)?length>fromIndex&&collection.indexOf(target,fromIndex)>-1:getIndexOf(collection,target,fromIndex)>-1):!1}function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=getCallback(predicate,thisArg,3),func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=null),(\"function\"!=typeof predicate||thisArg!==undefined)&&(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function restParam(func,start){if(\"function\"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(start===undefined?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);length>++index;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;start>++index;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}function clone(value,isDeep,customizer,thisArg){return isDeep&&\"boolean\"!=typeof isDeep&&isIterateeCall(value,isDeep,customizer)?isDeep=!1:\"function\"==typeof isDeep&&(thisArg=customizer,customizer=isDeep,isDeep=!1),customizer=\"function\"==typeof customizer&&bindCallback(customizer,thisArg,1),baseClone(value,isDeep,customizer)}function isArguments(value){var length=isObjectLike(value)?value.length:undefined;return isLength(length)&&objToString.call(value)==argsTag}function isEmpty(value){if(null==value)return!0;var length=getLength(value);return isLength(length)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))?!length:!keys(value).length}function isObject(value){var type=typeof value;return\"function\"==type||!!value&&\"object\"==type}function isNative(value){return null==value?!1:objToString.call(value)==funcTag?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&reIsHostCtor.test(value)}function isNumber(value){return\"number\"==typeof value||isObjectLike(value)&&objToString.call(value)==numberTag}function isString(value){return\"string\"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function toPlainObject(value){return baseCopy(value,keysIn(value))}function has(object,path){if(null==object)return!1;var result=hasOwnProperty.call(object,path);return result||isKey(path)||(path=toPath(path),object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),path=last(path),result=null!=object&&hasOwnProperty.call(object,path)),result}function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object))&&length||0;for(var Ctor=object.constructor,index=-1,isProto=\"function\"==typeof Ctor&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;length>++index;)result[index]=index+\"\";for(var key in object)skipIndexes&&isIndex(key,length)||\"constructor\"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}function values(object){return baseValues(object,keys(object))}function escapeRegExp(string){return string=baseToString(string),string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,\"\\\\$&\"):string}function callback(func,thisArg,guard){return guard&&isIterateeCall(func,thisArg,guard)&&(thisArg=null),baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var undefined,VERSION=\"3.7.0\",FUNC_ERROR_TEXT=\"Expected a function\",argsTag=\"[object Arguments]\",arrayTag=\"[object Array]\",boolTag=\"[object Boolean]\",dateTag=\"[object Date]\",errorTag=\"[object Error]\",funcTag=\"[object Function]\",mapTag=\"[object Map]\",numberTag=\"[object Number]\",objectTag=\"[object Object]\",regexpTag=\"[object RegExp]\",setTag=\"[object Set]\",stringTag=\"[object String]\",weakMapTag=\"[object WeakMap]\",arrayBufferTag=\"[object ArrayBuffer]\",float32Tag=\"[object Float32Array]\",float64Tag=\"[object Float64Array]\",int8Tag=\"[object Int8Array]\",int16Tag=\"[object Int16Array]\",int32Tag=\"[object Int32Array]\",uint8Tag=\"[object Uint8Array]\",uint8ClampedTag=\"[object Uint8ClampedArray]\",uint16Tag=\"[object Uint16Array]\",uint32Tag=\"[object Uint32Array]\",reIsDeepProp=/\\.|\\[(?:[^[\\]]+|([\"'])(?:(?!\\1)[^\\n\\\\]|\\\\.)*?)\\1\\]/,reIsPlainProp=/^\\w*$/,rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g,reRegExpChars=/[.*+?^${}()|[\\]\\/\\\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source),reEscapeChar=/\\\\(\\\\)?/g,reFlags=/\\w*$/,reIsHostCtor=/^\\[object .+?Constructor\\]$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectTypes={\"function\":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&\"object\"==typeof global&&global&&global.Object&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this,arrayProto=Array.prototype,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp(\"^\"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),ArrayBuffer=isNative(ArrayBuffer=root.ArrayBuffer)&&ArrayBuffer,bufferSlice=isNative(bufferSlice=ArrayBuffer&&new ArrayBuffer(0).slice)&&bufferSlice,floor=Math.floor,getOwnPropertySymbols=isNative(getOwnPropertySymbols=Object.getOwnPropertySymbols)&&getOwnPropertySymbols,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,push=arrayProto.push,preventExtensions=isNative(Object.preventExtensions=Object.preventExtensions)&&preventExtensions,propertyIsEnumerable=objectProto.propertyIsEnumerable,Uint8Array=isNative(Uint8Array=root.Uint8Array)&&Uint8Array,Float64Array=function(){try{var func=isNative(func=root.Float64Array)&&func,result=new func(new ArrayBuffer(10),0,1)&&func}catch(e){}return result}(),nativeAssign=function(){var object={1:0},func=preventExtensions&&isNative(func=Object.assign)&&func;try{func(preventExtensions(object),\"xo\")}catch(e){}return!object[1]&&func}(),nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,FLOAT64_BYTES_PER_ELEMENT=Float64Array?Float64Array.BYTES_PER_ELEMENT:0,MAX_SAFE_INTEGER=Math.pow(2,53)-1,support=lodash.support={};(function(x){var Ctor=function(){this.x=x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor)props.push(key);support.funcDecomp=/\\bthis\\b/.test(function(){return this}),support.funcNames=\"string\"==typeof Function.name;try{support.nonEnumArgs=!propertyIsEnumerable.call(arguments,1)}catch(e){support.nonEnumArgs=!0}})(1,0);var baseAssign=nativeAssign||function(object,source){return null==source?object:baseCopy(source,getSymbols(source),baseCopy(source,keys(source),object))},baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor();bufferSlice||(bufferClone=ArrayBuffer&&Uint8Array?function(buffer){var byteLength=buffer.byteLength,floatLength=Float64Array?floor(byteLength/FLOAT64_BYTES_PER_ELEMENT):0,offset=floatLength*FLOAT64_BYTES_PER_ELEMENT,result=new ArrayBuffer(byteLength);if(floatLength){var view=new Float64Array(result,0,floatLength);view.set(new Float64Array(buffer,0,floatLength))}return byteLength!=offset&&(view=new Uint8Array(result,offset),view.set(new Uint8Array(buffer,offset))),result}:constant(null));var getLength=baseProperty(\"length\"),getSymbols=getOwnPropertySymbols?function(object){return getOwnPropertySymbols(toObject(object))}:constant([]),findLastIndex=createFindIndex(!0),zip=restParam(unzip),forEach=createForEach(arrayEach,baseEach),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag},isFunction=baseIsFunction(/x/)||Uint8Array&&!baseIsFunction(Uint8Array)?function(value){return objToString.call(value)==funcTag}:baseIsFunction,isPlainObject=getPrototypeOf?function(value){if(!value||objToString.call(value)!=objectTag)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)}),keys=nativeKeys?function(object){if(object)var Ctor=object.constructor,length=object.length;return\"function\"==typeof Ctor&&Ctor.prototype===object||\"function\"!=typeof object&&isLength(length)?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys,merge=createAssigner(baseMerge);lodash.assign=assign,lodash.callback=callback,lodash.constant=constant,lodash.forEach=forEach,lodash.keys=keys,lodash.keysIn=keysIn,lodash.merge=merge,lodash.property=property,lodash.reject=reject,lodash.restParam=restParam,lodash.slice=slice,lodash.toPlainObject=toPlainObject,lodash.unzip=unzip,lodash.values=values,lodash.zip=zip,lodash.each=forEach,lodash.extend=assign,lodash.iteratee=callback,lodash.clone=clone,lodash.escapeRegExp=escapeRegExp,lodash.findLastIndex=findLastIndex,lodash.has=has,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isEmpty=isEmpty,lodash.isFunction=isFunction,lodash.isNative=isNative,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.last=last,lodash.some=some,lodash.any=some,lodash.contains=includes,lodash.include=includes,lodash.VERSION=VERSION,freeExports&&freeModule?moduleExports?(freeModule.exports=lodash)._=lodash:freeExports._=lodash:root._=lodash\n}).call(this)}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],\"/node_modules/jshint/src/jshint.js\":[function(_dereq_,module,exports){var _=_dereq_(\"../lodash\"),events=_dereq_(\"events\"),vars=_dereq_(\"./vars.js\"),messages=_dereq_(\"./messages.js\"),Lexer=_dereq_(\"./lex.js\").Lexer,reg=_dereq_(\"./reg.js\"),state=_dereq_(\"./state.js\").state,style=_dereq_(\"./style.js\"),options=_dereq_(\"./options.js\"),scopeManager=_dereq_(\"./scope-manager.js\"),JSHINT=function(){\"use strict\";function checkOption(name,t){return name=name.trim(),/^[+-]W\\d{3}$/g.test(name)?!0:-1!==options.validNames.indexOf(name)||\"jslint\"===t.type||_.has(options.removed,name)?!0:(error(\"E001\",t,name),!1)}function isString(obj){return\"[object String]\"===Object.prototype.toString.call(obj)}function isIdentifier(tkn,value){return tkn?tkn.identifier&&tkn.value===value?!0:!1:!1}function isReserved(token){if(!token.reserved)return!1;var meta=token.meta;if(meta&&meta.isFutureReservedWord&&state.inES5()){if(!meta.es5)return!1;if(meta.strictOnly&&!state.option.strict&&!state.isStrict())return!1;if(token.isProperty)return!1}return!0}function supplant(str,data){return str.replace(/\\{([^{}]*)\\}/g,function(a,b){var r=data[b];return\"string\"==typeof r||\"number\"==typeof r?r:a})}function combine(dest,src){Object.keys(src).forEach(function(name){_.has(JSHINT.blacklist,name)||(dest[name]=src[name])})}function processenforceall(){if(state.option.enforceall){for(var enforceopt in options.bool.enforcing)void 0!==state.option[enforceopt]||options.noenforceall[enforceopt]||(state.option[enforceopt]=!0);for(var relaxopt in options.bool.relaxing)void 0===state.option[relaxopt]&&(state.option[relaxopt]=!1)}}function assume(){processenforceall(),state.option.esversion||state.option.moz||(state.option.esversion=state.option.es3?3:state.option.esnext?6:5),state.inES5()&&combine(predefined,vars.ecmaIdentifiers[5]),state.inES6()&&combine(predefined,vars.ecmaIdentifiers[6]),state.option.module&&(state.option.strict===!0&&(state.option.strict=\"global\"),state.inES6()||warning(\"W134\",state.tokens.next,\"module\",6)),state.option.couch&&combine(predefined,vars.couch),state.option.qunit&&combine(predefined,vars.qunit),state.option.rhino&&combine(predefined,vars.rhino),state.option.shelljs&&(combine(predefined,vars.shelljs),combine(predefined,vars.node)),state.option.typed&&combine(predefined,vars.typed),state.option.phantom&&(combine(predefined,vars.phantom),state.option.strict===!0&&(state.option.strict=\"global\")),state.option.prototypejs&&combine(predefined,vars.prototypejs),state.option.node&&(combine(predefined,vars.node),combine(predefined,vars.typed),state.option.strict===!0&&(state.option.strict=\"global\")),state.option.devel&&combine(predefined,vars.devel),state.option.dojo&&combine(predefined,vars.dojo),state.option.browser&&(combine(predefined,vars.browser),combine(predefined,vars.typed)),state.option.browserify&&(combine(predefined,vars.browser),combine(predefined,vars.typed),combine(predefined,vars.browserify),state.option.strict===!0&&(state.option.strict=\"global\")),state.option.nonstandard&&combine(predefined,vars.nonstandard),state.option.jasmine&&combine(predefined,vars.jasmine),state.option.jquery&&combine(predefined,vars.jquery),state.option.mootools&&combine(predefined,vars.mootools),state.option.worker&&combine(predefined,vars.worker),state.option.wsh&&combine(predefined,vars.wsh),state.option.globalstrict&&state.option.strict!==!1&&(state.option.strict=\"global\"),state.option.yui&&combine(predefined,vars.yui),state.option.mocha&&combine(predefined,vars.mocha)}function quit(code,line,chr){var percentage=Math.floor(100*(line/state.lines.length)),message=messages.errors[code].desc;throw{name:\"JSHintError\",line:line,character:chr,message:message+\" (\"+percentage+\"% scanned).\",raw:message,code:code}}function removeIgnoredMessages(){var ignored=state.ignoredLines;_.isEmpty(ignored)||(JSHINT.errors=_.reject(JSHINT.errors,function(err){return ignored[err.line]}))}function warning(code,t,a,b,c,d){var ch,l,w,msg;if(/^W\\d{3}$/.test(code)){if(state.ignored[code])return;msg=messages.warnings[code]}else/E\\d{3}/.test(code)?msg=messages.errors[code]:/I\\d{3}/.test(code)&&(msg=messages.info[code]);return t=t||state.tokens.next||{},\"(end)\"===t.id&&(t=state.tokens.curr),l=t.line||0,ch=t.from||0,w={id:\"(error)\",raw:msg.desc,code:msg.code,evidence:state.lines[l-1]||\"\",line:l,character:ch,scope:JSHINT.scope,a:a,b:b,c:c,d:d},w.reason=supplant(msg.desc,w),JSHINT.errors.push(w),removeIgnoredMessages(),JSHINT.errors.length>=state.option.maxerr&&quit(\"E043\",l,ch),w}function warningAt(m,l,ch,a,b,c,d){return warning(m,{line:l,from:ch},a,b,c,d)}function error(m,t,a,b,c,d){warning(m,t,a,b,c,d)}function errorAt(m,l,ch,a,b,c,d){return error(m,{line:l,from:ch},a,b,c,d)}function addInternalSrc(elem,src){var i;return i={id:\"(internal)\",elem:elem,value:src},JSHINT.internals.push(i),i}function doOption(){var nt=state.tokens.next,body=nt.body.match(/(-\\s+)?[^\\s,:]+(?:\\s*:\\s*(-\\s+)?[^\\s,]+)?/g)||[],predef={};if(\"globals\"===nt.type){body.forEach(function(g,idx){g=g.split(\":\");var key=(g[0]||\"\").trim(),val=(g[1]||\"\").trim();if(\"-\"===key||!key.length){if(idx>0&&idx===body.length-1)return;return error(\"E002\",nt),void 0}\"-\"===key.charAt(0)?(key=key.slice(1),val=!1,JSHINT.blacklist[key]=key,delete predefined[key]):predef[key]=\"true\"===val}),combine(predefined,predef);for(var key in predef)_.has(predef,key)&&(declared[key]=nt)}\"exported\"===nt.type&&body.forEach(function(e,idx){if(!e.length){if(idx>0&&idx===body.length-1)return;return error(\"E002\",nt),void 0}state.funct[\"(scope)\"].addExported(e)}),\"members\"===nt.type&&(membersOnly=membersOnly||{},body.forEach(function(m){var ch1=m.charAt(0),ch2=m.charAt(m.length-1);ch1!==ch2||'\"'!==ch1&&\"'\"!==ch1||(m=m.substr(1,m.length-2).replace('\\\\\"','\"')),membersOnly[m]=!1}));var numvals=[\"maxstatements\",\"maxparams\",\"maxdepth\",\"maxcomplexity\",\"maxerr\",\"maxlen\",\"indent\"];(\"jshint\"===nt.type||\"jslint\"===nt.type)&&(body.forEach(function(g){g=g.split(\":\");var key=(g[0]||\"\").trim(),val=(g[1]||\"\").trim();if(checkOption(key,nt))if(numvals.indexOf(key)>=0)if(\"false\"!==val){if(val=+val,\"number\"!=typeof val||!isFinite(val)||0>=val||Math.floor(val)!==val)return error(\"E032\",nt,g[1].trim()),void 0;state.option[key]=val}else state.option[key]=\"indent\"===key?4:!1;else{if(\"validthis\"===key)return state.funct[\"(global)\"]?void error(\"E009\"):\"true\"!==val&&\"false\"!==val?void error(\"E002\",nt):(state.option.validthis=\"true\"===val,void 0);if(\"quotmark\"!==key)if(\"shadow\"!==key)if(\"unused\"!==key)if(\"latedef\"!==key)if(\"ignore\"!==key)if(\"strict\"!==key){\"module\"===key&&(hasParsedCode(state.funct)||error(\"E055\",state.tokens.next,\"module\"));var esversions={es3:3,es5:5,esnext:6};if(!_.has(esversions,key)){if(\"esversion\"===key){switch(val){case\"5\":state.inES5(!0)&&warning(\"I003\");case\"3\":case\"6\":state.option.moz=!1,state.option.esversion=+val;break;case\"2015\":state.option.moz=!1,state.option.esversion=6;break;default:error(\"E002\",nt)}return hasParsedCode(state.funct)||error(\"E055\",state.tokens.next,\"esversion\"),void 0}var match=/^([+-])(W\\d{3})$/g.exec(key);if(match)return state.ignored[match[2]]=\"-\"===match[1],void 0;var tn;return\"true\"===val||\"false\"===val?(\"jslint\"===nt.type?(tn=options.renamed[key]||key,state.option[tn]=\"true\"===val,void 0!==options.inverted[tn]&&(state.option[tn]=!state.option[tn])):state.option[key]=\"true\"===val,\"newcap\"===key&&(state.option[\"(explicitNewcap)\"]=!0),void 0):(error(\"E002\",nt),void 0)}switch(val){case\"true\":state.option.moz=!1,state.option.esversion=esversions[key];break;case\"false\":state.option.moz||(state.option.esversion=5);break;default:error(\"E002\",nt)}}else switch(val){case\"true\":state.option.strict=!0;break;case\"false\":state.option.strict=!1;break;case\"func\":case\"global\":case\"implied\":state.option.strict=val;break;default:error(\"E002\",nt)}else switch(val){case\"line\":state.ignoredLines[nt.line]=!0,removeIgnoredMessages();break;default:error(\"E002\",nt)}else switch(val){case\"true\":state.option.latedef=!0;break;case\"false\":state.option.latedef=!1;break;case\"nofunc\":state.option.latedef=\"nofunc\";break;default:error(\"E002\",nt)}else switch(val){case\"true\":state.option.unused=!0;break;case\"false\":state.option.unused=!1;break;case\"vars\":case\"strict\":state.option.unused=val;break;default:error(\"E002\",nt)}else switch(val){case\"true\":state.option.shadow=!0;break;case\"outer\":state.option.shadow=\"outer\";break;case\"false\":case\"inner\":state.option.shadow=\"inner\";break;default:error(\"E002\",nt)}else switch(val){case\"true\":case\"false\":state.option.quotmark=\"true\"===val;break;case\"double\":case\"single\":state.option.quotmark=val;break;default:error(\"E002\",nt)}}}),assume())}function peek(p){var t,i=p||0,j=lookahead.length;if(j>i)return lookahead[i];for(;i>=j;)t=lookahead[j],t||(t=lookahead[j]=lex.token()),j+=1;return t||\"(end)\"!==state.tokens.next.id?t:state.tokens.next}function peekIgnoreEOL(){var t,i=0;do t=peek(i++);while(\"(endline)\"===t.id);return t}function advance(id,t){switch(state.tokens.curr.id){case\"(number)\":\".\"===state.tokens.next.id&&warning(\"W005\",state.tokens.curr);break;case\"-\":(\"-\"===state.tokens.next.id||\"--\"===state.tokens.next.id)&&warning(\"W006\");break;case\"+\":(\"+\"===state.tokens.next.id||\"++\"===state.tokens.next.id)&&warning(\"W007\")}for(id&&state.tokens.next.id!==id&&(t?\"(end)\"===state.tokens.next.id?error(\"E019\",t,t.id):error(\"E020\",state.tokens.next,id,t.id,t.line,state.tokens.next.value):(\"(identifier)\"!==state.tokens.next.type||state.tokens.next.value!==id)&&warning(\"W116\",state.tokens.next,id,state.tokens.next.value)),state.tokens.prev=state.tokens.curr,state.tokens.curr=state.tokens.next;;){if(state.tokens.next=lookahead.shift()||lex.token(),state.tokens.next||quit(\"E041\",state.tokens.curr.line),\"(end)\"===state.tokens.next.id||\"(error)\"===state.tokens.next.id)return;if(state.tokens.next.check&&state.tokens.next.check(),state.tokens.next.isSpecial)\"falls through\"===state.tokens.next.type?state.tokens.curr.caseFallsThrough=!0:doOption();else if(\"(endline)\"!==state.tokens.next.id)break}}function isInfix(token){return token.infix||!token.identifier&&!token.template&&!!token.led}function isEndOfExpr(){var curr=state.tokens.curr,next=state.tokens.next;return\";\"===next.id||\"}\"===next.id||\":\"===next.id?!0:isInfix(next)===isInfix(curr)||\"yield\"===curr.id&&state.inMoz()?curr.line!==startLine(next):!1}function isBeginOfExpr(prev){return!prev.left&&\"unary\"!==prev.arity}function expression(rbp,initial){var left,isArray=!1,isObject=!1,isLetExpr=!1;state.nameStack.push(),initial||\"let\"!==state.tokens.next.value||\"(\"!==peek(0).value||(state.inMoz()||warning(\"W118\",state.tokens.next,\"let expressions\"),isLetExpr=!0,state.funct[\"(scope)\"].stack(),advance(\"let\"),advance(\"(\"),state.tokens.prev.fud(),advance(\")\")),\"(end)\"===state.tokens.next.id&&error(\"E006\",state.tokens.curr);var isDangerous=state.option.asi&&state.tokens.prev.line!==startLine(state.tokens.curr)&&_.contains([\"]\",\")\"],state.tokens.prev.id)&&_.contains([\"[\",\"(\"],state.tokens.curr.id);if(isDangerous&&warning(\"W014\",state.tokens.curr,state.tokens.curr.id),advance(),initial&&(state.funct[\"(verb)\"]=state.tokens.curr.value,state.tokens.curr.beginsStmt=!0),initial===!0&&state.tokens.curr.fud)left=state.tokens.curr.fud();else for(state.tokens.curr.nud?left=state.tokens.curr.nud():error(\"E030\",state.tokens.curr,state.tokens.curr.id);(state.tokens.next.lbp>rbp||\"(template)\"===state.tokens.next.type)&&!isEndOfExpr();)isArray=\"Array\"===state.tokens.curr.value,isObject=\"Object\"===state.tokens.curr.value,left&&(left.value||left.first&&left.first.value)&&(\"new\"!==left.value||left.first&&left.first.value&&\".\"===left.first.value)&&(isArray=!1,left.value!==state.tokens.curr.value&&(isObject=!1)),advance(),isArray&&\"(\"===state.tokens.curr.id&&\")\"===state.tokens.next.id&&warning(\"W009\",state.tokens.curr),isObject&&\"(\"===state.tokens.curr.id&&\")\"===state.tokens.next.id&&warning(\"W010\",state.tokens.curr),left&&state.tokens.curr.led?left=state.tokens.curr.led(left):error(\"E033\",state.tokens.curr,state.tokens.curr.id);return isLetExpr&&state.funct[\"(scope)\"].unstack(),state.nameStack.pop(),left}function startLine(token){return token.startLine||token.line}function nobreaknonadjacent(left,right){left=left||state.tokens.curr,right=right||state.tokens.next,state.option.laxbreak||left.line===startLine(right)||warning(\"W014\",right,right.value)}function nolinebreak(t){t=t||state.tokens.curr,t.line!==startLine(state.tokens.next)&&warning(\"E022\",t,t.value)}function nobreakcomma(left,right){left.line!==startLine(right)&&(state.option.laxcomma||(comma.first&&(warning(\"I001\"),comma.first=!1),warning(\"W014\",left,right.value)))}function comma(opts){if(opts=opts||{},opts.peek?nobreakcomma(state.tokens.prev,state.tokens.curr):(nobreakcomma(state.tokens.curr,state.tokens.next),advance(\",\")),state.tokens.next.identifier&&(!opts.property||!state.inES5()))switch(state.tokens.next.value){case\"break\":case\"case\":case\"catch\":case\"continue\":case\"default\":case\"do\":case\"else\":case\"finally\":case\"for\":case\"if\":case\"in\":case\"instanceof\":case\"return\":case\"switch\":case\"throw\":case\"try\":case\"var\":case\"let\":case\"while\":case\"with\":return error(\"E024\",state.tokens.next,state.tokens.next.value),!1}if(\"(punctuator)\"===state.tokens.next.type)switch(state.tokens.next.value){case\"}\":case\"]\":case\",\":if(opts.allowTrailing)return!0;case\")\":return error(\"E024\",state.tokens.next,state.tokens.next.value),!1}return!0}function symbol(s,p){var x=state.syntax[s];return x&&\"object\"==typeof x||(state.syntax[s]=x={id:s,lbp:p,value:s}),x}function delim(s){var x=symbol(s,0);return x.delim=!0,x}function stmt(s,f){var x=delim(s);return x.identifier=x.reserved=!0,x.fud=f,x}function blockstmt(s,f){var x=stmt(s,f);return x.block=!0,x}function reserveName(x){var c=x.id.charAt(0);return(c>=\"a\"&&\"z\">=c||c>=\"A\"&&\"Z\">=c)&&(x.identifier=x.reserved=!0),x}function prefix(s,f){var x=symbol(s,150);return reserveName(x),x.nud=\"function\"==typeof f?f:function(){return this.arity=\"unary\",this.right=expression(150),(\"++\"===this.id||\"--\"===this.id)&&(state.option.plusplus?warning(\"W016\",this,this.id):!this.right||this.right.identifier&&!isReserved(this.right)||\".\"===this.right.id||\"[\"===this.right.id||warning(\"W017\",this),this.right&&this.right.isMetaProperty?error(\"E031\",this):this.right&&this.right.identifier&&state.funct[\"(scope)\"].block.modify(this.right.value,this)),this},x}function type(s,f){var x=delim(s);return x.type=s,x.nud=f,x}function reserve(name,func){var x=type(name,func);return x.identifier=!0,x.reserved=!0,x}function FutureReservedWord(name,meta){var x=type(name,meta&&meta.nud||function(){return this});return meta=meta||{},meta.isFutureReservedWord=!0,x.value=name,x.identifier=!0,x.reserved=!0,x.meta=meta,x}function reservevar(s,v){return reserve(s,function(){return\"function\"==typeof v&&v(this),this})}function infix(s,f,p,w){var x=symbol(s,p);return reserveName(x),x.infix=!0,x.led=function(left){return w||nobreaknonadjacent(state.tokens.prev,state.tokens.curr),\"in\"!==s&&\"instanceof\"!==s||\"!\"!==left.id||warning(\"W018\",left,\"!\"),\"function\"==typeof f?f(left,this):(this.left=left,this.right=expression(p),this)},x}function application(s){var x=symbol(s,42);return x.led=function(left){return nobreaknonadjacent(state.tokens.prev,state.tokens.curr),this.left=left,this.right=doFunction({type:\"arrow\",loneArg:left}),this},x}function relation(s,f){var x=symbol(s,100);return x.led=function(left){nobreaknonadjacent(state.tokens.prev,state.tokens.curr),this.left=left;var right=this.right=expression(100);return isIdentifier(left,\"NaN\")||isIdentifier(right,\"NaN\")?warning(\"W019\",this):f&&f.apply(this,[left,right]),left&&right||quit(\"E041\",state.tokens.curr.line),\"!\"===left.id&&warning(\"W018\",left,\"!\"),\"!\"===right.id&&warning(\"W018\",right,\"!\"),this},x}function isPoorRelation(node){return node&&(\"(number)\"===node.type&&0===+node.value||\"(string)\"===node.type&&\"\"===node.value||\"null\"===node.type&&!state.option.eqnull||\"true\"===node.type||\"false\"===node.type||\"undefined\"===node.type)}function isTypoTypeof(left,right,state){var values;return state.option.notypeof?!1:left&&right?(values=state.inES6()?typeofValues.es6:typeofValues.es3,\"(identifier)\"===right.type&&\"typeof\"===right.value&&\"(string)\"===left.type?!_.contains(values,left.value):!1):!1}function isGlobalEval(left,state){var isGlobal=!1;return\"this\"===left.type&&null===state.funct[\"(context)\"]?isGlobal=!0:\"(identifier)\"===left.type&&(state.option.node&&\"global\"===left.value?isGlobal=!0:!state.option.browser||\"window\"!==left.value&&\"document\"!==left.value||(isGlobal=!0)),isGlobal}function findNativePrototype(left){function walkPrototype(obj){return\"object\"==typeof obj?\"prototype\"===obj.right?obj:walkPrototype(obj.left):void 0}function walkNative(obj){for(;!obj.identifier&&\"object\"==typeof obj.left;)obj=obj.left;return obj.identifier&&natives.indexOf(obj.value)>=0?obj.value:void 0}var natives=[\"Array\",\"ArrayBuffer\",\"Boolean\",\"Collator\",\"DataView\",\"Date\",\"DateTimeFormat\",\"Error\",\"EvalError\",\"Float32Array\",\"Float64Array\",\"Function\",\"Infinity\",\"Intl\",\"Int16Array\",\"Int32Array\",\"Int8Array\",\"Iterator\",\"Number\",\"NumberFormat\",\"Object\",\"RangeError\",\"ReferenceError\",\"RegExp\",\"StopIteration\",\"String\",\"SyntaxError\",\"TypeError\",\"Uint16Array\",\"Uint32Array\",\"Uint8Array\",\"Uint8ClampedArray\",\"URIError\"],prototype=walkPrototype(left);return prototype?walkNative(prototype):void 0}function checkLeftSideAssign(left,assignToken,options){var allowDestructuring=options&&options.allowDestructuring;if(assignToken=assignToken||left,state.option.freeze){var nativeObject=findNativePrototype(left);nativeObject&&warning(\"W121\",left,nativeObject)}return left.identifier&&!left.isMetaProperty&&state.funct[\"(scope)\"].block.reassign(left.value,left),\".\"===left.id?((!left.left||\"arguments\"===left.left.value&&!state.isStrict())&&warning(\"E031\",assignToken),state.nameStack.set(state.tokens.prev),!0):\"{\"===left.id||\"[\"===left.id?(allowDestructuring&&state.tokens.curr.left.destructAssign?state.tokens.curr.left.destructAssign.forEach(function(t){t.id&&state.funct[\"(scope)\"].block.modify(t.id,t.token)}):\"{\"!==left.id&&left.left?\"arguments\"!==left.left.value||state.isStrict()||warning(\"E031\",assignToken):warning(\"E031\",assignToken),\"[\"===left.id&&state.nameStack.set(left.right),!0):left.isMetaProperty?(error(\"E031\",assignToken),!0):left.identifier&&!isReserved(left)?(\"exception\"===state.funct[\"(scope)\"].labeltype(left.value)&&warning(\"W022\",left),state.nameStack.set(left),!0):(left===state.syntax[\"function\"]&&warning(\"W023\",state.tokens.curr),!1)}function assignop(s,f,p){var x=infix(s,\"function\"==typeof f?f:function(left,that){return that.left=left,left&&checkLeftSideAssign(left,that,{allowDestructuring:!0})?(that.right=expression(10),that):(error(\"E031\",that),void 0)},p);return x.exps=!0,x.assign=!0,x}function bitwise(s,f,p){var x=symbol(s,p);return reserveName(x),x.led=\"function\"==typeof f?f:function(left){return state.option.bitwise&&warning(\"W016\",this,this.id),this.left=left,this.right=expression(p),this},x}function bitwiseassignop(s){return assignop(s,function(left,that){return state.option.bitwise&&warning(\"W016\",that,that.id),left&&checkLeftSideAssign(left,that)?(that.right=expression(10),that):(error(\"E031\",that),void 0)},20)}function suffix(s){var x=symbol(s,150);return x.led=function(left){return state.option.plusplus?warning(\"W016\",this,this.id):left.identifier&&!isReserved(left)||\".\"===left.id||\"[\"===left.id||warning(\"W017\",this),left.isMetaProperty?error(\"E031\",this):left&&left.identifier&&state.funct[\"(scope)\"].block.modify(left.value,left),this.left=left,this},x}function optionalidentifier(fnparam,prop,preserve){if(state.tokens.next.identifier){preserve||advance();var curr=state.tokens.curr,val=state.tokens.curr.value;return isReserved(curr)?prop&&state.inES5()?val:fnparam&&\"undefined\"===val?val:(warning(\"W024\",state.tokens.curr,state.tokens.curr.id),val):val}}function identifier(fnparam,prop){var i=optionalidentifier(fnparam,prop,!1);if(i)return i;if(\"...\"===state.tokens.next.value){if(state.inES6(!0)||warning(\"W119\",state.tokens.next,\"spread/rest operator\",\"6\"),advance(),checkPunctuator(state.tokens.next,\"...\"))for(warning(\"E024\",state.tokens.next,\"...\");checkPunctuator(state.tokens.next,\"...\");)advance();return state.tokens.next.identifier?identifier(fnparam,prop):(warning(\"E024\",state.tokens.curr,\"...\"),void 0)}error(\"E030\",state.tokens.next,state.tokens.next.value),\";\"!==state.tokens.next.id&&advance()}function reachable(controlToken){var t,i=0;if(\";\"===state.tokens.next.id&&!controlToken.inBracelessBlock)for(;;){do t=peek(i),i+=1;while(\"(end)\"!==t.id&&\"(comment)\"===t.id);if(t.reach)return;if(\"(endline)\"!==t.id){if(\"function\"===t.id){state.option.latedef===!0&&warning(\"W026\",t);break}warning(\"W027\",t,t.value,controlToken.value);break}}}function parseFinalSemicolon(){if(\";\"!==state.tokens.next.id){if(state.tokens.next.isUnclosed)return advance();var sameLine=startLine(state.tokens.next)===state.tokens.curr.line&&\"(end)\"!==state.tokens.next.id,blockEnd=checkPunctuator(state.tokens.next,\"}\");sameLine&&!blockEnd?errorAt(\"E058\",state.tokens.curr.line,state.tokens.curr.character):state.option.asi||(blockEnd&&!state.option.lastsemic||!sameLine)&&warningAt(\"W033\",state.tokens.curr.line,state.tokens.curr.character)}else advance(\";\")}function statement(){var r,i=indent,t=state.tokens.next,hasOwnScope=!1;if(\";\"===t.id)return advance(\";\"),void 0;var res=isReserved(t);if(res&&t.meta&&t.meta.isFutureReservedWord&&\":\"===peek().id&&(warning(\"W024\",t,t.id),res=!1),t.identifier&&!res&&\":\"===peek().id&&(advance(),advance(\":\"),hasOwnScope=!0,state.funct[\"(scope)\"].stack(),state.funct[\"(scope)\"].block.addBreakLabel(t.value,{token:state.tokens.curr}),state.tokens.next.labelled||\"{\"===state.tokens.next.value||warning(\"W028\",state.tokens.next,t.value,state.tokens.next.value),state.tokens.next.label=t.value,t=state.tokens.next),\"{\"===t.id){var iscase=\"case\"===state.funct[\"(verb)\"]&&\":\"===state.tokens.curr.value;return block(!0,!0,!1,!1,iscase),void 0}return r=expression(0,!0),!r||r.identifier&&\"function\"===r.value||\"(punctuator)\"===r.type&&r.left&&r.left.identifier&&\"function\"===r.left.value||state.isStrict()||\"global\"!==state.option.strict||warning(\"E007\"),t.block||(state.option.expr||r&&r.exps?state.option.nonew&&r&&r.left&&\"(\"===r.id&&\"new\"===r.left.id&&warning(\"W031\",t):warning(\"W030\",state.tokens.curr),parseFinalSemicolon()),indent=i,hasOwnScope&&state.funct[\"(scope)\"].unstack(),r}function statements(){for(var p,a=[];!state.tokens.next.reach&&\"(end)\"!==state.tokens.next.id;)\";\"===state.tokens.next.id?(p=peek(),(!p||\"(\"!==p.id&&\"[\"!==p.id)&&warning(\"W032\"),advance(\";\")):a.push(statement());return a}function directives(){for(var i,p,pn;\"(string)\"===state.tokens.next.id;){if(p=peek(0),\"(endline)\"===p.id){i=1;do pn=peek(i++);while(\"(endline)\"===pn.id);if(\";\"===pn.id)p=pn;else{if(\"[\"===pn.value||\".\"===pn.value)break;state.option.asi&&\"(\"!==pn.value||warning(\"W033\",state.tokens.next)}}else{if(\".\"===p.id||\"[\"===p.id)break;\";\"!==p.id&&warning(\"W033\",p)}advance();var directive=state.tokens.curr.value;(state.directive[directive]||\"use strict\"===directive&&\"implied\"===state.option.strict)&&warning(\"W034\",state.tokens.curr,directive),state.directive[directive]=!0,\";\"===p.id&&advance(\";\")}state.isStrict()&&(state.option[\"(explicitNewcap)\"]||(state.option.newcap=!0),state.option.undef=!0)}function block(ordinary,stmt,isfunc,isfatarrow,iscase){var a,m,t,line,d,b=inblock,old_indent=indent;inblock=ordinary,t=state.tokens.next;var metrics=state.funct[\"(metrics)\"];if(metrics.nestedBlockDepth+=1,metrics.verifyMaxNestedBlockDepthPerFunction(),\"{\"===state.tokens.next.id){if(advance(\"{\"),state.funct[\"(scope)\"].stack(),line=state.tokens.curr.line,\"}\"!==state.tokens.next.id){for(indent+=state.option.indent;!ordinary&&state.tokens.next.from>indent;)indent+=state.option.indent;if(isfunc){m={};for(d in state.directive)_.has(state.directive,d)&&(m[d]=state.directive[d]);directives(),state.option.strict&&state.funct[\"(context)\"][\"(global)\"]&&(m[\"use strict\"]||state.isStrict()||warning(\"E007\"))}a=statements(),metrics.statementCount+=a.length,indent-=state.option.indent}advance(\"}\",t),isfunc&&(state.funct[\"(scope)\"].validateParams(),m&&(state.directive=m)),state.funct[\"(scope)\"].unstack(),indent=old_indent}else if(ordinary)state.funct[\"(noblockscopedvar)\"]=\"for\"!==state.tokens.next.id,state.funct[\"(scope)\"].stack(),(!stmt||state.option.curly)&&warning(\"W116\",state.tokens.next,\"{\",state.tokens.next.value),state.tokens.next.inBracelessBlock=!0,indent+=state.option.indent,a=[statement()],indent-=state.option.indent,state.funct[\"(scope)\"].unstack(),delete state.funct[\"(noblockscopedvar)\"];else if(isfunc){if(state.funct[\"(scope)\"].stack(),m={},!stmt||isfatarrow||state.inMoz()||error(\"W118\",state.tokens.curr,\"function closure expressions\"),!stmt)for(d in state.directive)_.has(state.directive,d)&&(m[d]=state.directive[d]);expression(10),state.option.strict&&state.funct[\"(context)\"][\"(global)\"]&&(m[\"use strict\"]||state.isStrict()||warning(\"E007\")),state.funct[\"(scope)\"].unstack()}else error(\"E021\",state.tokens.next,\"{\",state.tokens.next.value);switch(state.funct[\"(verb)\"]){case\"break\":case\"continue\":case\"return\":case\"throw\":if(iscase)break;default:state.funct[\"(verb)\"]=null}return inblock=b,!ordinary||!state.option.noempty||a&&0!==a.length||warning(\"W035\",state.tokens.prev),metrics.nestedBlockDepth-=1,a}function countMember(m){membersOnly&&\"boolean\"!=typeof membersOnly[m]&&warning(\"W036\",state.tokens.curr,m),\"number\"==typeof member[m]?member[m]+=1:member[m]=1}function comprehensiveArrayExpression(){var res={};res.exps=!0,state.funct[\"(comparray)\"].stack();var reversed=!1;return\"for\"!==state.tokens.next.value&&(reversed=!0,state.inMoz()||warning(\"W116\",state.tokens.next,\"for\",state.tokens.next.value),state.funct[\"(comparray)\"].setState(\"use\"),res.right=expression(10)),advance(\"for\"),\"each\"===state.tokens.next.value&&(advance(\"each\"),state.inMoz()||warning(\"W118\",state.tokens.curr,\"for each\")),advance(\"(\"),state.funct[\"(comparray)\"].setState(\"define\"),res.left=expression(130),_.contains([\"in\",\"of\"],state.tokens.next.value)?advance():error(\"E045\",state.tokens.curr),state.funct[\"(comparray)\"].setState(\"generate\"),expression(10),advance(\")\"),\"if\"===state.tokens.next.value&&(advance(\"if\"),advance(\"(\"),state.funct[\"(comparray)\"].setState(\"filter\"),res.filter=expression(10),advance(\")\")),reversed||(state.funct[\"(comparray)\"].setState(\"use\"),res.right=expression(10)),advance(\"]\"),state.funct[\"(comparray)\"].unstack(),res}function isMethod(){return state.funct[\"(statement)\"]&&\"class\"===state.funct[\"(statement)\"].type||state.funct[\"(context)\"]&&\"class\"===state.funct[\"(context)\"][\"(verb)\"]}function isPropertyName(token){return token.identifier||\"(string)\"===token.id||\"(number)\"===token.id}function propertyName(preserveOrToken){var id,preserve=!0;return\"object\"==typeof preserveOrToken?id=preserveOrToken:(preserve=preserveOrToken,id=optionalidentifier(!1,!0,preserve)),id?\"object\"==typeof id&&(\"(string)\"===id.id||\"(identifier)\"===id.id?id=id.value:\"(number)\"===id.id&&(id=\"\"+id.value)):\"(string)\"===state.tokens.next.id?(id=state.tokens.next.value,preserve||advance()):\"(number)\"===state.tokens.next.id&&(id=\"\"+state.tokens.next.value,preserve||advance()),\"hasOwnProperty\"===id&&warning(\"W001\"),id}function functionparams(options){function addParam(addParamArgs){state.funct[\"(scope)\"].addParam.apply(state.funct[\"(scope)\"],addParamArgs)}var next,ident,t,paramsIds=[],tokens=[],pastDefault=!1,pastRest=!1,arity=0,loneArg=options&&options.loneArg;if(loneArg&&loneArg.identifier===!0)return state.funct[\"(scope)\"].addParam(loneArg.value,loneArg),{arity:1,params:[loneArg.value]};if(next=state.tokens.next,options&&options.parsedOpening||advance(\"(\"),\")\"===state.tokens.next.id)return advance(\")\"),void 0;for(;;){arity++;var currentParams=[];if(_.contains([\"{\",\"[\"],state.tokens.next.id)){tokens=destructuringPattern();for(t in tokens)t=tokens[t],t.id&&(paramsIds.push(t.id),currentParams.push([t.id,t.token]))}else if(checkPunctuator(state.tokens.next,\"...\")&&(pastRest=!0),ident=identifier(!0))paramsIds.push(ident),currentParams.push([ident,state.tokens.curr]);else for(;!checkPunctuators(state.tokens.next,[\",\",\")\"]);)advance();if(pastDefault&&\"=\"!==state.tokens.next.id&&error(\"W138\",state.tokens.current),\"=\"===state.tokens.next.id&&(state.inES6()||warning(\"W119\",state.tokens.next,\"default parameters\",\"6\"),advance(\"=\"),pastDefault=!0,expression(10)),currentParams.forEach(addParam),\",\"!==state.tokens.next.id)return advance(\")\",next),{arity:arity,params:paramsIds};pastRest&&warning(\"W131\",state.tokens.next),comma()}}function functor(name,token,overwrites){var funct={\"(name)\":name,\"(breakage)\":0,\"(loopage)\":0,\"(tokens)\":{},\"(properties)\":{},\"(catch)\":!1,\"(global)\":!1,\"(line)\":null,\"(character)\":null,\"(metrics)\":null,\"(statement)\":null,\"(context)\":null,\"(scope)\":null,\"(comparray)\":null,\"(generator)\":null,\"(arrow)\":null,\"(params)\":null};return token&&_.extend(funct,{\"(line)\":token.line,\"(character)\":token.character,\"(metrics)\":createMetrics(token)}),_.extend(funct,overwrites),funct[\"(context)\"]&&(funct[\"(scope)\"]=funct[\"(context)\"][\"(scope)\"],funct[\"(comparray)\"]=funct[\"(context)\"][\"(comparray)\"]),funct}function isFunctor(token){return\"(scope)\"in token}function hasParsedCode(funct){return funct[\"(global)\"]&&!funct[\"(verb)\"]}function doTemplateLiteral(left){function end(){if(state.tokens.curr.template&&state.tokens.curr.tail&&state.tokens.curr.context===ctx)return!0;var complete=state.tokens.next.template&&state.tokens.next.tail&&state.tokens.next.context===ctx;return complete&&advance(),complete||state.tokens.next.isUnclosed}var ctx=this.context,noSubst=this.noSubst,depth=this.depth;if(!noSubst)for(;!end();)!state.tokens.next.template||state.tokens.next.depth>depth?expression(0):advance();return{id:\"(template)\",type:\"(template)\",tag:left}}function doFunction(options){var f,token,name,statement,classExprBinding,isGenerator,isArrow,ignoreLoopFunc,oldOption=state.option,oldIgnored=state.ignored;options&&(name=options.name,statement=options.statement,classExprBinding=options.classExprBinding,isGenerator=\"generator\"===options.type,isArrow=\"arrow\"===options.type,ignoreLoopFunc=options.ignoreLoopFunc),state.option=Object.create(state.option),state.ignored=Object.create(state.ignored),state.funct=functor(name||state.nameStack.infer(),state.tokens.next,{\"(statement)\":statement,\"(context)\":state.funct,\"(arrow)\":isArrow,\"(generator)\":isGenerator}),f=state.funct,token=state.tokens.curr,token.funct=state.funct,functions.push(state.funct),state.funct[\"(scope)\"].stack(\"functionouter\");var internallyAccessibleName=name||classExprBinding;internallyAccessibleName&&state.funct[\"(scope)\"].block.add(internallyAccessibleName,classExprBinding?\"class\":\"function\",state.tokens.curr,!1),state.funct[\"(scope)\"].stack(\"functionparams\");var paramsInfo=functionparams(options);return paramsInfo?(state.funct[\"(params)\"]=paramsInfo.params,state.funct[\"(metrics)\"].arity=paramsInfo.arity,state.funct[\"(metrics)\"].verifyMaxParametersPerFunction()):state.funct[\"(metrics)\"].arity=0,isArrow&&(state.inES6(!0)||warning(\"W119\",state.tokens.curr,\"arrow function syntax (=>)\",\"6\"),options.loneArg||advance(\"=>\")),block(!1,!0,!0,isArrow),!state.option.noyield&&isGenerator&&\"yielded\"!==state.funct[\"(generator)\"]&&warning(\"W124\",state.tokens.curr),state.funct[\"(metrics)\"].verifyMaxStatementsPerFunction(),state.funct[\"(metrics)\"].verifyMaxComplexityPerFunction(),state.funct[\"(unusedOption)\"]=state.option.unused,state.option=oldOption,state.ignored=oldIgnored,state.funct[\"(last)\"]=state.tokens.curr.line,state.funct[\"(lastcharacter)\"]=state.tokens.curr.character,state.funct[\"(scope)\"].unstack(),state.funct[\"(scope)\"].unstack(),state.funct=state.funct[\"(context)\"],ignoreLoopFunc||state.option.loopfunc||!state.funct[\"(loopage)\"]||f[\"(isCapturing)\"]&&warning(\"W083\",token),f}function createMetrics(functionStartToken){return{statementCount:0,nestedBlockDepth:-1,ComplexityCount:1,arity:0,verifyMaxStatementsPerFunction:function(){state.option.maxstatements&&this.statementCount>state.option.maxstatements&&warning(\"W071\",functionStartToken,this.statementCount)\n},verifyMaxParametersPerFunction:function(){_.isNumber(state.option.maxparams)&&this.arity>state.option.maxparams&&warning(\"W072\",functionStartToken,this.arity)},verifyMaxNestedBlockDepthPerFunction:function(){state.option.maxdepth&&this.nestedBlockDepth>0&&this.nestedBlockDepth===state.option.maxdepth+1&&warning(\"W073\",null,this.nestedBlockDepth)},verifyMaxComplexityPerFunction:function(){var max=state.option.maxcomplexity,cc=this.ComplexityCount;max&&cc>max&&warning(\"W074\",functionStartToken,cc)}}}function increaseComplexityCount(){state.funct[\"(metrics)\"].ComplexityCount+=1}function checkCondAssignment(expr){var id,paren;switch(expr&&(id=expr.id,paren=expr.paren,\",\"===id&&(expr=expr.exprs[expr.exprs.length-1])&&(id=expr.id,paren=paren||expr.paren)),id){case\"=\":case\"+=\":case\"-=\":case\"*=\":case\"%=\":case\"&=\":case\"|=\":case\"^=\":case\"/=\":paren||state.option.boss||warning(\"W084\")}}function checkProperties(props){if(state.inES5())for(var name in props)props[name]&&props[name].setterToken&&!props[name].getterToken&&warning(\"W078\",props[name].setterToken)}function metaProperty(name,c){if(checkPunctuator(state.tokens.next,\".\")){var left=state.tokens.curr.id;advance(\".\");var id=identifier();return state.tokens.curr.isMetaProperty=!0,name!==id?error(\"E057\",state.tokens.prev,left,id):c(),state.tokens.curr}}function destructuringPattern(options){var isAssignment=options&&options.assignment;return state.inES6()||warning(\"W104\",state.tokens.curr,isAssignment?\"destructuring assignment\":\"destructuring binding\",\"6\"),destructuringPatternRecursive(options)}function destructuringPatternRecursive(options){var ids,identifiers=[],openingParsed=options&&options.openingParsed,isAssignment=options&&options.assignment,recursiveOptions=isAssignment?{assignment:isAssignment}:null,firstToken=openingParsed?state.tokens.curr:state.tokens.next,nextInnerDE=function(){var ident;if(checkPunctuators(state.tokens.next,[\"[\",\"{\"])){ids=destructuringPatternRecursive(recursiveOptions);for(var id in ids)id=ids[id],identifiers.push({id:id.id,token:id.token})}else if(checkPunctuator(state.tokens.next,\",\"))identifiers.push({id:null,token:state.tokens.curr});else{if(!checkPunctuator(state.tokens.next,\"(\")){var is_rest=checkPunctuator(state.tokens.next,\"...\");if(isAssignment){var identifierToken=is_rest?peek(0):state.tokens.next;identifierToken.identifier||warning(\"E030\",identifierToken,identifierToken.value);var assignTarget=expression(155);assignTarget&&(checkLeftSideAssign(assignTarget),assignTarget.identifier&&(ident=assignTarget.value))}else ident=identifier();return ident&&identifiers.push({id:ident,token:state.tokens.curr}),is_rest}advance(\"(\"),nextInnerDE(),advance(\")\")}return!1},assignmentProperty=function(){var id;checkPunctuator(state.tokens.next,\"[\")?(advance(\"[\"),expression(10),advance(\"]\"),advance(\":\"),nextInnerDE()):\"(string)\"===state.tokens.next.id||\"(number)\"===state.tokens.next.id?(advance(),advance(\":\"),nextInnerDE()):(id=identifier(),checkPunctuator(state.tokens.next,\":\")?(advance(\":\"),nextInnerDE()):id&&(isAssignment&&checkLeftSideAssign(state.tokens.curr),identifiers.push({id:id,token:state.tokens.curr})))};if(checkPunctuator(firstToken,\"[\")){openingParsed||advance(\"[\"),checkPunctuator(state.tokens.next,\"]\")&&warning(\"W137\",state.tokens.curr);for(var element_after_rest=!1;!checkPunctuator(state.tokens.next,\"]\");)nextInnerDE()&&!element_after_rest&&checkPunctuator(state.tokens.next,\",\")&&(warning(\"W130\",state.tokens.next),element_after_rest=!0),checkPunctuator(state.tokens.next,\"=\")&&(checkPunctuator(state.tokens.prev,\"...\")?advance(\"]\"):advance(\"=\"),\"undefined\"===state.tokens.next.id&&warning(\"W080\",state.tokens.prev,state.tokens.prev.value),expression(10)),checkPunctuator(state.tokens.next,\"]\")||advance(\",\");advance(\"]\")}else if(checkPunctuator(firstToken,\"{\")){for(openingParsed||advance(\"{\"),checkPunctuator(state.tokens.next,\"}\")&&warning(\"W137\",state.tokens.curr);!checkPunctuator(state.tokens.next,\"}\")&&(assignmentProperty(),checkPunctuator(state.tokens.next,\"=\")&&(advance(\"=\"),\"undefined\"===state.tokens.next.id&&warning(\"W080\",state.tokens.prev,state.tokens.prev.value),expression(10)),checkPunctuator(state.tokens.next,\"}\")||(advance(\",\"),!checkPunctuator(state.tokens.next,\"}\"))););advance(\"}\")}return identifiers}function destructuringPatternMatch(tokens,value){var first=value.first;first&&_.zip(tokens,Array.isArray(first)?first:[first]).forEach(function(val){var token=val[0],value=val[1];token&&value?token.first=value:token&&token.first&&!value&&warning(\"W080\",token.first,token.first.value)})}function blockVariableStatement(type,statement,context){var tokens,lone,value,letblock,prefix=context&&context.prefix,inexport=context&&context.inexport,isLet=\"let\"===type,isConst=\"const\"===type;for(state.inES6()||warning(\"W104\",state.tokens.curr,type,\"6\"),isLet&&\"(\"===state.tokens.next.value?(state.inMoz()||warning(\"W118\",state.tokens.next,\"let block\"),advance(\"(\"),state.funct[\"(scope)\"].stack(),letblock=!0):state.funct[\"(noblockscopedvar)\"]&&error(\"E048\",state.tokens.curr,isConst?\"Const\":\"Let\"),statement.first=[];;){var names=[];_.contains([\"{\",\"[\"],state.tokens.next.value)?(tokens=destructuringPattern(),lone=!1):(tokens=[{id:identifier(),token:state.tokens.curr}],lone=!0),!prefix&&isConst&&\"=\"!==state.tokens.next.id&&warning(\"E012\",state.tokens.curr,state.tokens.curr.value);for(var t in tokens)tokens.hasOwnProperty(t)&&(t=tokens[t],state.funct[\"(scope)\"].block.isGlobal()&&predefined[t.id]===!1&&warning(\"W079\",t.token,t.id),t.id&&!state.funct[\"(noblockscopedvar)\"]&&(state.funct[\"(scope)\"].addlabel(t.id,{type:type,token:t.token}),names.push(t.token),lone&&inexport&&state.funct[\"(scope)\"].setExported(t.token.value,t.token)));if(\"=\"===state.tokens.next.id&&(advance(\"=\"),prefix||\"undefined\"!==state.tokens.next.id||warning(\"W080\",state.tokens.prev,state.tokens.prev.value),!prefix&&\"=\"===peek(0).id&&state.tokens.next.identifier&&warning(\"W120\",state.tokens.next,state.tokens.next.value),value=expression(prefix?120:10),lone?tokens[0].first=value:destructuringPatternMatch(names,value)),statement.first=statement.first.concat(names),\",\"!==state.tokens.next.id)break;comma()}return letblock&&(advance(\")\"),block(!0,!0),statement.block=!0,state.funct[\"(scope)\"].unstack()),statement}function classdef(isStatement){return state.inES6()||warning(\"W104\",state.tokens.curr,\"class\",\"6\"),isStatement?(this.name=identifier(),state.funct[\"(scope)\"].addlabel(this.name,{type:\"class\",token:state.tokens.curr})):state.tokens.next.identifier&&\"extends\"!==state.tokens.next.value?(this.name=identifier(),this.namedExpr=!0):this.name=state.nameStack.infer(),classtail(this),this}function classtail(c){var wasInClassBody=state.inClassBody;\"extends\"===state.tokens.next.value&&(advance(\"extends\"),c.heritage=expression(10)),state.inClassBody=!0,advance(\"{\"),c.body=classbody(c),advance(\"}\"),state.inClassBody=wasInClassBody}function classbody(c){for(var name,isStatic,isGenerator,getset,computed,props=Object.create(null),staticProps=Object.create(null),i=0;\"}\"!==state.tokens.next.id;++i)if(name=state.tokens.next,isStatic=!1,isGenerator=!1,getset=null,\";\"!==name.id){if(\"*\"===name.id&&(isGenerator=!0,advance(\"*\"),name=state.tokens.next),\"[\"===name.id)name=computedPropertyName(),computed=!0;else{if(!isPropertyName(name)){warning(\"W052\",state.tokens.next,state.tokens.next.value||state.tokens.next.type),advance();continue}advance(),computed=!1,name.identifier&&\"static\"===name.value&&(checkPunctuator(state.tokens.next,\"*\")&&(isGenerator=!0,advance(\"*\")),(isPropertyName(state.tokens.next)||\"[\"===state.tokens.next.id)&&(computed=\"[\"===state.tokens.next.id,isStatic=!0,name=state.tokens.next,\"[\"===state.tokens.next.id?name=computedPropertyName():advance())),!name.identifier||\"get\"!==name.value&&\"set\"!==name.value||(isPropertyName(state.tokens.next)||\"[\"===state.tokens.next.id)&&(computed=\"[\"===state.tokens.next.id,getset=name,name=state.tokens.next,\"[\"===state.tokens.next.id?name=computedPropertyName():advance())}if(!checkPunctuator(state.tokens.next,\"(\")){for(error(\"E054\",state.tokens.next,state.tokens.next.value);\"}\"!==state.tokens.next.id&&!checkPunctuator(state.tokens.next,\"(\");)advance();\"(\"!==state.tokens.next.value&&doFunction({statement:c})}if(computed||(getset?saveAccessor(getset.value,isStatic?staticProps:props,name.value,name,!0,isStatic):(\"constructor\"===name.value?state.nameStack.set(c):state.nameStack.set(name),saveProperty(isStatic?staticProps:props,name.value,name,!0,isStatic))),getset&&\"constructor\"===name.value){var propDesc=\"get\"===getset.value?\"class getter method\":\"class setter method\";error(\"E049\",name,propDesc,\"constructor\")}else\"prototype\"===name.value&&error(\"E049\",name,\"class method\",\"prototype\");propertyName(name),doFunction({statement:c,type:isGenerator?\"generator\":null,classExprBinding:c.namedExpr?c.name:null})}else warning(\"W032\"),advance(\";\");checkProperties(props)}function saveProperty(props,name,tkn,isClass,isStatic){var msg=[\"key\",\"class method\",\"static class method\"];msg=msg[(isClass||!1)+(isStatic||!1)],tkn.identifier&&(name=tkn.value),props[name]&&\"__proto__\"!==name?warning(\"W075\",state.tokens.next,msg,name):props[name]=Object.create(null),props[name].basic=!0,props[name].basictkn=tkn}function saveAccessor(accessorType,props,name,tkn,isClass,isStatic){var flagName=\"get\"===accessorType?\"getterToken\":\"setterToken\",msg=\"\";isClass?(isStatic&&(msg+=\"static \"),msg+=accessorType+\"ter method\"):msg=\"key\",state.tokens.curr.accessorType=accessorType,state.nameStack.set(tkn),props[name]?(props[name].basic||props[name][flagName])&&\"__proto__\"!==name&&warning(\"W075\",state.tokens.next,msg,name):props[name]=Object.create(null),props[name][flagName]=tkn}function computedPropertyName(){advance(\"[\"),state.inES6()||warning(\"W119\",state.tokens.curr,\"computed property names\",\"6\");var value=expression(10);return advance(\"]\"),value}function checkPunctuators(token,values){return\"(punctuator)\"===token.type?_.contains(values,token.value):!1}function checkPunctuator(token,value){return\"(punctuator)\"===token.type&&token.value===value}function destructuringAssignOrJsonValue(){var block=lookupBlockType();block.notJson?(!state.inES6()&&block.isDestAssign&&warning(\"W104\",state.tokens.curr,\"destructuring assignment\",\"6\"),statements()):(state.option.laxbreak=!0,state.jsonMode=!0,jsonValue())}function jsonValue(){function jsonObject(){var o={},t=state.tokens.next;if(advance(\"{\"),\"}\"!==state.tokens.next.id)for(;;){if(\"(end)\"===state.tokens.next.id)error(\"E026\",state.tokens.next,t.line);else{if(\"}\"===state.tokens.next.id){warning(\"W094\",state.tokens.curr);break}\",\"===state.tokens.next.id?error(\"E028\",state.tokens.next):\"(string)\"!==state.tokens.next.id&&warning(\"W095\",state.tokens.next,state.tokens.next.value)}if(o[state.tokens.next.value]===!0?warning(\"W075\",state.tokens.next,\"key\",state.tokens.next.value):\"__proto__\"===state.tokens.next.value&&!state.option.proto||\"__iterator__\"===state.tokens.next.value&&!state.option.iterator?warning(\"W096\",state.tokens.next,state.tokens.next.value):o[state.tokens.next.value]=!0,advance(),advance(\":\"),jsonValue(),\",\"!==state.tokens.next.id)break;advance(\",\")}advance(\"}\")}function jsonArray(){var t=state.tokens.next;if(advance(\"[\"),\"]\"!==state.tokens.next.id)for(;;){if(\"(end)\"===state.tokens.next.id)error(\"E027\",state.tokens.next,t.line);else{if(\"]\"===state.tokens.next.id){warning(\"W094\",state.tokens.curr);break}\",\"===state.tokens.next.id&&error(\"E028\",state.tokens.next)}if(jsonValue(),\",\"!==state.tokens.next.id)break;advance(\",\")}advance(\"]\")}switch(state.tokens.next.id){case\"{\":jsonObject();break;case\"[\":jsonArray();break;case\"true\":case\"false\":case\"null\":case\"(number)\":case\"(string)\":advance();break;case\"-\":advance(\"-\"),advance(\"(number)\");break;default:error(\"E003\",state.tokens.next)}}var api,declared,functions,inblock,indent,lookahead,lex,member,membersOnly,predefined,stack,urls,bang={\"<\":!0,\"<=\":!0,\"==\":!0,\"===\":!0,\"!==\":!0,\"!=\":!0,\">\":!0,\">=\":!0,\"+\":!0,\"-\":!0,\"*\":!0,\"/\":!0,\"%\":!0},functionicity=[\"closure\",\"exception\",\"global\",\"label\",\"outer\",\"unused\",\"var\"],extraModules=[],emitter=new events.EventEmitter,typeofValues={};typeofValues.legacy=[\"xml\",\"unknown\"],typeofValues.es3=[\"undefined\",\"boolean\",\"number\",\"string\",\"function\",\"object\"],typeofValues.es3=typeofValues.es3.concat(typeofValues.legacy),typeofValues.es6=typeofValues.es3.concat(\"symbol\"),type(\"(number)\",function(){return this}),type(\"(string)\",function(){return this}),state.syntax[\"(identifier)\"]={type:\"(identifier)\",lbp:0,identifier:!0,nud:function(){var v=this.value;return\"=>\"===state.tokens.next.id?this:(state.funct[\"(comparray)\"].check(v)||state.funct[\"(scope)\"].block.use(v,state.tokens.curr),this)},led:function(){error(\"E033\",state.tokens.next,state.tokens.next.value)}};var baseTemplateSyntax={lbp:0,identifier:!1,template:!0};state.syntax[\"(template)\"]=_.extend({type:\"(template)\",nud:doTemplateLiteral,led:doTemplateLiteral,noSubst:!1},baseTemplateSyntax),state.syntax[\"(template middle)\"]=_.extend({type:\"(template middle)\",middle:!0,noSubst:!1},baseTemplateSyntax),state.syntax[\"(template tail)\"]=_.extend({type:\"(template tail)\",tail:!0,noSubst:!1},baseTemplateSyntax),state.syntax[\"(no subst template)\"]=_.extend({type:\"(template)\",nud:doTemplateLiteral,led:doTemplateLiteral,noSubst:!0,tail:!0},baseTemplateSyntax),type(\"(regexp)\",function(){return this}),delim(\"(endline)\"),delim(\"(begin)\"),delim(\"(end)\").reach=!0,delim(\"(error)\").reach=!0,delim(\"}\").reach=!0,delim(\")\"),delim(\"]\"),delim('\"').reach=!0,delim(\"'\").reach=!0,delim(\";\"),delim(\":\").reach=!0,delim(\"#\"),reserve(\"else\"),reserve(\"case\").reach=!0,reserve(\"catch\"),reserve(\"default\").reach=!0,reserve(\"finally\"),reservevar(\"arguments\",function(x){state.isStrict()&&state.funct[\"(global)\"]&&warning(\"E008\",x)}),reservevar(\"eval\"),reservevar(\"false\"),reservevar(\"Infinity\"),reservevar(\"null\"),reservevar(\"this\",function(x){state.isStrict()&&!isMethod()&&!state.option.validthis&&(state.funct[\"(statement)\"]&&state.funct[\"(name)\"].charAt(0)>\"Z\"||state.funct[\"(global)\"])&&warning(\"W040\",x)}),reservevar(\"true\"),reservevar(\"undefined\"),assignop(\"=\",\"assign\",20),assignop(\"+=\",\"assignadd\",20),assignop(\"-=\",\"assignsub\",20),assignop(\"*=\",\"assignmult\",20),assignop(\"/=\",\"assigndiv\",20).nud=function(){error(\"E014\")},assignop(\"%=\",\"assignmod\",20),bitwiseassignop(\"&=\"),bitwiseassignop(\"|=\"),bitwiseassignop(\"^=\"),bitwiseassignop(\"<<=\"),bitwiseassignop(\">>=\"),bitwiseassignop(\">>>=\"),infix(\",\",function(left,that){var expr;if(that.exprs=[left],state.option.nocomma&&warning(\"W127\"),!comma({peek:!0}))return that;for(;;){if(!(expr=expression(10)))break;if(that.exprs.push(expr),\",\"!==state.tokens.next.value||!comma())break}return that},10,!0),infix(\"?\",function(left,that){return increaseComplexityCount(),that.left=left,that.right=expression(10),advance(\":\"),that[\"else\"]=expression(10),that},30);var orPrecendence=40;infix(\"||\",function(left,that){return increaseComplexityCount(),that.left=left,that.right=expression(orPrecendence),that},orPrecendence),infix(\"&&\",\"and\",50),bitwise(\"|\",\"bitor\",70),bitwise(\"^\",\"bitxor\",80),bitwise(\"&\",\"bitand\",90),relation(\"==\",function(left,right){var eqnull=state.option.eqnull&&(\"null\"===(left&&left.value)||\"null\"===(right&&right.value));switch(!0){case!eqnull&&state.option.eqeqeq:this.from=this.character,warning(\"W116\",this,\"===\",\"==\");break;case isPoorRelation(left):warning(\"W041\",this,\"===\",left.value);break;case isPoorRelation(right):warning(\"W041\",this,\"===\",right.value);break;case isTypoTypeof(right,left,state):warning(\"W122\",this,right.value);break;case isTypoTypeof(left,right,state):warning(\"W122\",this,left.value)}return this}),relation(\"===\",function(left,right){return isTypoTypeof(right,left,state)?warning(\"W122\",this,right.value):isTypoTypeof(left,right,state)&&warning(\"W122\",this,left.value),this}),relation(\"!=\",function(left,right){var eqnull=state.option.eqnull&&(\"null\"===(left&&left.value)||\"null\"===(right&&right.value));return!eqnull&&state.option.eqeqeq?(this.from=this.character,warning(\"W116\",this,\"!==\",\"!=\")):isPoorRelation(left)?warning(\"W041\",this,\"!==\",left.value):isPoorRelation(right)?warning(\"W041\",this,\"!==\",right.value):isTypoTypeof(right,left,state)?warning(\"W122\",this,right.value):isTypoTypeof(left,right,state)&&warning(\"W122\",this,left.value),this}),relation(\"!==\",function(left,right){return isTypoTypeof(right,left,state)?warning(\"W122\",this,right.value):isTypoTypeof(left,right,state)&&warning(\"W122\",this,left.value),this}),relation(\"<\"),relation(\">\"),relation(\"<=\"),relation(\">=\"),bitwise(\"<<\",\"shiftleft\",120),bitwise(\">>\",\"shiftright\",120),bitwise(\">>>\",\"shiftrightunsigned\",120),infix(\"in\",\"in\",120),infix(\"instanceof\",\"instanceof\",120),infix(\"+\",function(left,that){var right;return that.left=left,that.right=right=expression(130),left&&right&&\"(string)\"===left.id&&\"(string)\"===right.id?(left.value+=right.value,left.character=right.character,!state.option.scripturl&&reg.javascriptURL.test(left.value)&&warning(\"W050\",left),left):that},130),prefix(\"+\",\"num\"),prefix(\"+++\",function(){return warning(\"W007\"),this.arity=\"unary\",this.right=expression(150),this}),infix(\"+++\",function(left){return warning(\"W007\"),this.left=left,this.right=expression(130),this},130),infix(\"-\",\"sub\",130),prefix(\"-\",\"neg\"),prefix(\"---\",function(){return warning(\"W006\"),this.arity=\"unary\",this.right=expression(150),this}),infix(\"---\",function(left){return warning(\"W006\"),this.left=left,this.right=expression(130),this},130),infix(\"*\",\"mult\",140),infix(\"/\",\"div\",140),infix(\"%\",\"mod\",140),suffix(\"++\"),prefix(\"++\",\"preinc\"),state.syntax[\"++\"].exps=!0,suffix(\"--\"),prefix(\"--\",\"predec\"),state.syntax[\"--\"].exps=!0,prefix(\"delete\",function(){var p=expression(10);return p?(\".\"!==p.id&&\"[\"!==p.id&&warning(\"W051\"),this.first=p,p.identifier&&!state.isStrict()&&(p.forgiveUndef=!0),this):this}).exps=!0,prefix(\"~\",function(){return state.option.bitwise&&warning(\"W016\",this,\"~\"),this.arity=\"unary\",this.right=expression(150),this}),prefix(\"...\",function(){return state.inES6(!0)||warning(\"W119\",this,\"spread/rest operator\",\"6\"),state.tokens.next.identifier||\"(string)\"===state.tokens.next.type||checkPunctuators(state.tokens.next,[\"[\",\"(\"])||error(\"E030\",state.tokens.next,state.tokens.next.value),expression(150),this}),prefix(\"!\",function(){return this.arity=\"unary\",this.right=expression(150),this.right||quit(\"E041\",this.line||0),bang[this.right.id]===!0&&warning(\"W018\",this,\"!\"),this}),prefix(\"typeof\",function(){var p=expression(150);return this.first=this.right=p,p||quit(\"E041\",this.line||0,this.character||0),p.identifier&&(p.forgiveUndef=!0),this}),prefix(\"new\",function(){var mp=metaProperty(\"target\",function(){state.inES6(!0)||warning(\"W119\",state.tokens.prev,\"new.target\",\"6\");for(var inFunction,c=state.funct;c&&(inFunction=!c[\"(global)\"],c[\"(arrow)\"]);)c=c[\"(context)\"];inFunction||warning(\"W136\",state.tokens.prev,\"new.target\")});if(mp)return mp;var i,c=expression(155);if(c&&\"function\"!==c.id)if(c.identifier)switch(c[\"new\"]=!0,c.value){case\"Number\":case\"String\":case\"Boolean\":case\"Math\":case\"JSON\":warning(\"W053\",state.tokens.prev,c.value);break;case\"Symbol\":state.inES6()&&warning(\"W053\",state.tokens.prev,c.value);break;case\"Function\":state.option.evil||warning(\"W054\");break;case\"Date\":case\"RegExp\":case\"this\":break;default:\"function\"!==c.id&&(i=c.value.substr(0,1),state.option.newcap&&(\"A\">i||i>\"Z\")&&!state.funct[\"(scope)\"].isPredefined(c.value)&&warning(\"W055\",state.tokens.curr))}else\".\"!==c.id&&\"[\"!==c.id&&\"(\"!==c.id&&warning(\"W056\",state.tokens.curr);else state.option.supernew||warning(\"W057\",this);return\"(\"===state.tokens.next.id||state.option.supernew||warning(\"W058\",state.tokens.curr,state.tokens.curr.value),this.first=this.right=c,this}),state.syntax[\"new\"].exps=!0,prefix(\"void\").exps=!0,infix(\".\",function(left,that){var m=identifier(!1,!0);return\"string\"==typeof m&&countMember(m),that.left=left,that.right=m,m&&\"hasOwnProperty\"===m&&\"=\"===state.tokens.next.value&&warning(\"W001\"),!left||\"arguments\"!==left.value||\"callee\"!==m&&\"caller\"!==m?state.option.evil||!left||\"document\"!==left.value||\"write\"!==m&&\"writeln\"!==m||warning(\"W060\",left):state.option.noarg?warning(\"W059\",left,m):state.isStrict()&&error(\"E008\"),state.option.evil||\"eval\"!==m&&\"execScript\"!==m||isGlobalEval(left,state)&&warning(\"W061\"),that},160,!0),infix(\"(\",function(left,that){state.option.immed&&left&&!left.immed&&\"function\"===left.id&&warning(\"W062\");var n=0,p=[];if(left&&\"(identifier)\"===left.type&&left.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&-1===\"Array Number String Boolean Date Object Error Symbol\".indexOf(left.value)&&(\"Math\"===left.value?warning(\"W063\",left):state.option.newcap&&warning(\"W064\",left)),\")\"!==state.tokens.next.id)for(;p[p.length]=expression(10),n+=1,\",\"===state.tokens.next.id;)comma();return advance(\")\"),\"object\"==typeof left&&(state.inES5()||\"parseInt\"!==left.value||1!==n||warning(\"W065\",state.tokens.curr),state.option.evil||(\"eval\"===left.value||\"Function\"===left.value||\"execScript\"===left.value?(warning(\"W061\",left),p[0]&&\"(string)\"===[0].id&&addInternalSrc(left,p[0].value)):!p[0]||\"(string)\"!==p[0].id||\"setTimeout\"!==left.value&&\"setInterval\"!==left.value?!p[0]||\"(string)\"!==p[0].id||\".\"!==left.value||\"window\"!==left.left.value||\"setTimeout\"!==left.right&&\"setInterval\"!==left.right||(warning(\"W066\",left),addInternalSrc(left,p[0].value)):(warning(\"W066\",left),addInternalSrc(left,p[0].value))),left.identifier||\".\"===left.id||\"[\"===left.id||\"=>\"===left.id||\"(\"===left.id||\"&&\"===left.id||\"||\"===left.id||\"?\"===left.id||state.inES6()&&left[\"(name)\"]||warning(\"W067\",that)),that.left=left,that},155,!0).exps=!0,prefix(\"(\",function(){var pn1,ret,triggerFnExpr,first,last,pn=state.tokens.next,i=-1,parens=1,opening=state.tokens.curr,preceeding=state.tokens.prev,isNecessary=!state.option.singleGroups;do\"(\"===pn.value?parens+=1:\")\"===pn.value&&(parens-=1),i+=1,pn1=pn,pn=peek(i);while((0!==parens||\")\"!==pn1.value)&&\";\"!==pn.value&&\"(end)\"!==pn.type);if(\"function\"===state.tokens.next.id&&(triggerFnExpr=state.tokens.next.immed=!0),\"=>\"===pn.value)return doFunction({type:\"arrow\",parsedOpening:!0});var exprs=[];if(\")\"!==state.tokens.next.id)for(;exprs.push(expression(10)),\",\"===state.tokens.next.id;)state.option.nocomma&&warning(\"W127\"),comma();return advance(\")\",this),state.option.immed&&exprs[0]&&\"function\"===exprs[0].id&&\"(\"!==state.tokens.next.id&&\".\"!==state.tokens.next.id&&\"[\"!==state.tokens.next.id&&warning(\"W068\",this),exprs.length?(exprs.length>1?(ret=Object.create(state.syntax[\",\"]),ret.exprs=exprs,first=exprs[0],last=exprs[exprs.length-1],isNecessary||(isNecessary=preceeding.assign||preceeding.delim)):(ret=first=last=exprs[0],isNecessary||(isNecessary=opening.beginsStmt&&(\"{\"===ret.id||triggerFnExpr||isFunctor(ret))||triggerFnExpr&&(!isEndOfExpr()||\"}\"!==state.tokens.prev.id)||isFunctor(ret)&&!isEndOfExpr()||\"{\"===ret.id&&\"=>\"===preceeding.id||\"(number)\"===ret.type&&checkPunctuator(pn,\".\")&&/^\\d+$/.test(ret.value))),ret&&(!isNecessary&&(first.left||first.right||ret.exprs)&&(isNecessary=!isBeginOfExpr(preceeding)&&first.lbp<=preceeding.lbp||!isEndOfExpr()&&last.lbp<state.tokens.next.lbp),isNecessary||warning(\"W126\",opening),ret.paren=!0),ret):void 0}),application(\"=>\"),infix(\"[\",function(left,that){var s,e=expression(10);return e&&\"(string)\"===e.type&&(state.option.evil||\"eval\"!==e.value&&\"execScript\"!==e.value||isGlobalEval(left,state)&&warning(\"W061\"),countMember(e.value),!state.option.sub&&reg.identifier.test(e.value)&&(s=state.syntax[e.value],s&&isReserved(s)||warning(\"W069\",state.tokens.prev,e.value))),advance(\"]\",that),e&&\"hasOwnProperty\"===e.value&&\"=\"===state.tokens.next.value&&warning(\"W001\"),that.left=left,that.right=e,that},160,!0),prefix(\"[\",function(){var blocktype=lookupBlockType();if(blocktype.isCompArray)return state.option.esnext||state.inMoz()||warning(\"W118\",state.tokens.curr,\"array comprehension\"),comprehensiveArrayExpression();if(blocktype.isDestAssign)return this.destructAssign=destructuringPattern({openingParsed:!0,assignment:!0}),this;var b=state.tokens.curr.line!==startLine(state.tokens.next);for(this.first=[],b&&(indent+=state.option.indent,state.tokens.next.from===indent+state.option.indent&&(indent+=state.option.indent));\"(end)\"!==state.tokens.next.id;){for(;\",\"===state.tokens.next.id;){if(!state.option.elision){if(state.inES5()){warning(\"W128\");do advance(\",\");while(\",\"===state.tokens.next.id);continue}warning(\"W070\")}advance(\",\")}if(\"]\"===state.tokens.next.id)break;if(this.first.push(expression(10)),\",\"!==state.tokens.next.id)break;if(comma({allowTrailing:!0}),\"]\"===state.tokens.next.id&&!state.inES5()){warning(\"W070\",state.tokens.curr);break}}return b&&(indent-=state.option.indent),advance(\"]\",this),this}),function(x){x.nud=function(){var b,f,i,p,t,nextVal,isGeneratorMethod=!1,props=Object.create(null);b=state.tokens.curr.line!==startLine(state.tokens.next),b&&(indent+=state.option.indent,state.tokens.next.from===indent+state.option.indent&&(indent+=state.option.indent));var blocktype=lookupBlockType();if(blocktype.isDestAssign)return this.destructAssign=destructuringPattern({openingParsed:!0,assignment:!0}),this;for(;\"}\"!==state.tokens.next.id;){if(nextVal=state.tokens.next.value,!state.tokens.next.identifier||\",\"!==peekIgnoreEOL().id&&\"}\"!==peekIgnoreEOL().id)if(\":\"===peek().id||\"get\"!==nextVal&&\"set\"!==nextVal){if(\"*\"===state.tokens.next.value&&\"(punctuator)\"===state.tokens.next.type?(state.inES6()||warning(\"W104\",state.tokens.next,\"generator functions\",\"6\"),advance(\"*\"),isGeneratorMethod=!0):isGeneratorMethod=!1,\"[\"===state.tokens.next.id)i=computedPropertyName(),state.nameStack.set(i);else if(state.nameStack.set(state.tokens.next),i=propertyName(),saveProperty(props,i,state.tokens.next),\"string\"!=typeof i)break;\"(\"===state.tokens.next.value?(state.inES6()||warning(\"W104\",state.tokens.curr,\"concise methods\",\"6\"),doFunction({type:isGeneratorMethod?\"generator\":null})):(advance(\":\"),expression(10))}else advance(nextVal),state.inES5()||error(\"E034\"),i=propertyName(),i||state.inES6()||error(\"E035\"),i&&saveAccessor(nextVal,props,i,state.tokens.curr),t=state.tokens.next,f=doFunction(),p=f[\"(params)\"],\"get\"===nextVal&&i&&p?warning(\"W076\",t,p[0],i):\"set\"!==nextVal||!i||p&&1===p.length||warning(\"W077\",t,i);else state.inES6()||warning(\"W104\",state.tokens.next,\"object short notation\",\"6\"),i=propertyName(!0),saveProperty(props,i,state.tokens.next),expression(10);if(countMember(i),\",\"!==state.tokens.next.id)break;comma({allowTrailing:!0,property:!0}),\",\"===state.tokens.next.id?warning(\"W070\",state.tokens.curr):\"}\"!==state.tokens.next.id||state.inES5()||warning(\"W070\",state.tokens.curr)}return b&&(indent-=state.option.indent),advance(\"}\",this),checkProperties(props),this},x.fud=function(){error(\"E036\",state.tokens.curr)}}(delim(\"{\"));var conststatement=stmt(\"const\",function(context){return blockVariableStatement(\"const\",this,context)});conststatement.exps=!0;var letstatement=stmt(\"let\",function(context){return blockVariableStatement(\"let\",this,context)});letstatement.exps=!0;var varstatement=stmt(\"var\",function(context){var tokens,lone,value,prefix=context&&context.prefix,inexport=context&&context.inexport,implied=context&&context.implied,report=!(context&&context.ignore);for(this.first=[];;){var names=[];_.contains([\"{\",\"[\"],state.tokens.next.value)?(tokens=destructuringPattern(),lone=!1):(tokens=[{id:identifier(),token:state.tokens.curr}],lone=!0),prefix&&implied||!report||!state.option.varstmt||warning(\"W132\",this),this.first=this.first.concat(names);for(var t in tokens)tokens.hasOwnProperty(t)&&(t=tokens[t],!implied&&state.funct[\"(global)\"]&&(predefined[t.id]===!1?warning(\"W079\",t.token,t.id):state.option.futurehostile===!1&&(!state.inES5()&&vars.ecmaIdentifiers[5][t.id]===!1||!state.inES6()&&vars.ecmaIdentifiers[6][t.id]===!1)&&warning(\"W129\",t.token,t.id)),t.id&&(\"for\"===implied?(state.funct[\"(scope)\"].has(t.id)||report&&warning(\"W088\",t.token,t.id),state.funct[\"(scope)\"].block.use(t.id,t.token)):(state.funct[\"(scope)\"].addlabel(t.id,{type:\"var\",token:t.token}),lone&&inexport&&state.funct[\"(scope)\"].setExported(t.id,t.token)),names.push(t.token)));if(\"=\"===state.tokens.next.id&&(state.nameStack.set(state.tokens.curr),advance(\"=\"),prefix||!report||state.funct[\"(loopage)\"]||\"undefined\"!==state.tokens.next.id||warning(\"W080\",state.tokens.prev,state.tokens.prev.value),\"=\"===peek(0).id&&state.tokens.next.identifier&&(!prefix&&report&&!state.funct[\"(params)\"]||-1===state.funct[\"(params)\"].indexOf(state.tokens.next.value))&&warning(\"W120\",state.tokens.next,state.tokens.next.value),value=expression(prefix?120:10),lone?tokens[0].first=value:destructuringPatternMatch(names,value)),\",\"!==state.tokens.next.id)break;comma()}return this});varstatement.exps=!0,blockstmt(\"class\",function(){return classdef.call(this,!0)}),blockstmt(\"function\",function(context){var inexport=context&&context.inexport,generator=!1;\"*\"===state.tokens.next.value&&(advance(\"*\"),state.inES6({strict:!0})?generator=!0:warning(\"W119\",state.tokens.curr,\"function*\",\"6\")),inblock&&warning(\"W082\",state.tokens.curr);var i=optionalidentifier();return state.funct[\"(scope)\"].addlabel(i,{type:\"function\",token:state.tokens.curr}),void 0===i?warning(\"W025\"):inexport&&state.funct[\"(scope)\"].setExported(i,state.tokens.prev),doFunction({name:i,statement:this,type:generator?\"generator\":null,ignoreLoopFunc:inblock}),\"(\"===state.tokens.next.id&&state.tokens.next.line===state.tokens.curr.line&&error(\"E039\"),this}),prefix(\"function\",function(){var generator=!1;\"*\"===state.tokens.next.value&&(state.inES6()||warning(\"W119\",state.tokens.curr,\"function*\",\"6\"),advance(\"*\"),generator=!0);var i=optionalidentifier();return doFunction({name:i,type:generator?\"generator\":null}),this}),blockstmt(\"if\",function(){var t=state.tokens.next;increaseComplexityCount(),state.condition=!0,advance(\"(\");var expr=expression(0);checkCondAssignment(expr);var forinifcheck=null;state.option.forin&&state.forinifcheckneeded&&(state.forinifcheckneeded=!1,forinifcheck=state.forinifchecks[state.forinifchecks.length-1],forinifcheck.type=\"(punctuator)\"===expr.type&&\"!\"===expr.value?\"(negative)\":\"(positive)\"),advance(\")\",t),state.condition=!1;var s=block(!0,!0);return forinifcheck&&\"(negative)\"===forinifcheck.type&&s&&s[0]&&\"(identifier)\"===s[0].type&&\"continue\"===s[0].value&&(forinifcheck.type=\"(negative-with-continue)\"),\"else\"===state.tokens.next.id&&(advance(\"else\"),\"if\"===state.tokens.next.id||\"switch\"===state.tokens.next.id?statement():block(!0,!0)),this}),blockstmt(\"try\",function(){function doCatch(){if(advance(\"catch\"),advance(\"(\"),state.funct[\"(scope)\"].stack(\"catchparams\"),checkPunctuators(state.tokens.next,[\"[\",\"{\"])){var tokens=destructuringPattern();_.each(tokens,function(token){token.id&&state.funct[\"(scope)\"].addParam(token.id,token,\"exception\")})}else\"(identifier)\"!==state.tokens.next.type?warning(\"E030\",state.tokens.next,state.tokens.next.value):state.funct[\"(scope)\"].addParam(identifier(),state.tokens.curr,\"exception\");\"if\"===state.tokens.next.value&&(state.inMoz()||warning(\"W118\",state.tokens.curr,\"catch filter\"),advance(\"if\"),expression(0)),advance(\")\"),block(!1),state.funct[\"(scope)\"].unstack()}var b;for(block(!0);\"catch\"===state.tokens.next.id;)increaseComplexityCount(),b&&!state.inMoz()&&warning(\"W118\",state.tokens.next,\"multiple catch blocks\"),doCatch(),b=!0;return\"finally\"===state.tokens.next.id?(advance(\"finally\"),block(!0),void 0):(b||error(\"E021\",state.tokens.next,\"catch\",state.tokens.next.value),this)}),blockstmt(\"while\",function(){var t=state.tokens.next;return state.funct[\"(breakage)\"]+=1,state.funct[\"(loopage)\"]+=1,increaseComplexityCount(),advance(\"(\"),checkCondAssignment(expression(0)),advance(\")\",t),block(!0,!0),state.funct[\"(breakage)\"]-=1,state.funct[\"(loopage)\"]-=1,this}).labelled=!0,blockstmt(\"with\",function(){var t=state.tokens.next;return state.isStrict()?error(\"E010\",state.tokens.curr):state.option.withstmt||warning(\"W085\",state.tokens.curr),advance(\"(\"),expression(0),advance(\")\",t),block(!0,!0),this}),blockstmt(\"switch\",function(){var t=state.tokens.next,g=!1,noindent=!1;\nfor(state.funct[\"(breakage)\"]+=1,advance(\"(\"),checkCondAssignment(expression(0)),advance(\")\",t),t=state.tokens.next,advance(\"{\"),state.tokens.next.from===indent&&(noindent=!0),noindent||(indent+=state.option.indent),this.cases=[];;)switch(state.tokens.next.id){case\"case\":switch(state.funct[\"(verb)\"]){case\"yield\":case\"break\":case\"case\":case\"continue\":case\"return\":case\"switch\":case\"throw\":break;default:state.tokens.curr.caseFallsThrough||warning(\"W086\",state.tokens.curr,\"case\")}advance(\"case\"),this.cases.push(expression(0)),increaseComplexityCount(),g=!0,advance(\":\"),state.funct[\"(verb)\"]=\"case\";break;case\"default\":switch(state.funct[\"(verb)\"]){case\"yield\":case\"break\":case\"continue\":case\"return\":case\"throw\":break;default:this.cases.length&&(state.tokens.curr.caseFallsThrough||warning(\"W086\",state.tokens.curr,\"default\"))}advance(\"default\"),g=!0,advance(\":\");break;case\"}\":return noindent||(indent-=state.option.indent),advance(\"}\",t),state.funct[\"(breakage)\"]-=1,state.funct[\"(verb)\"]=void 0,void 0;case\"(end)\":return error(\"E023\",state.tokens.next,\"}\"),void 0;default:if(indent+=state.option.indent,g)switch(state.tokens.curr.id){case\",\":return error(\"E040\"),void 0;case\":\":g=!1,statements();break;default:return error(\"E025\",state.tokens.curr),void 0}else{if(\":\"!==state.tokens.curr.id)return error(\"E021\",state.tokens.next,\"case\",state.tokens.next.value),void 0;advance(\":\"),error(\"E024\",state.tokens.curr,\":\"),statements()}indent-=state.option.indent}return this}).labelled=!0,stmt(\"debugger\",function(){return state.option.debug||warning(\"W087\",this),this}).exps=!0,function(){var x=stmt(\"do\",function(){state.funct[\"(breakage)\"]+=1,state.funct[\"(loopage)\"]+=1,increaseComplexityCount(),this.first=block(!0,!0),advance(\"while\");var t=state.tokens.next;return advance(\"(\"),checkCondAssignment(expression(0)),advance(\")\",t),state.funct[\"(breakage)\"]-=1,state.funct[\"(loopage)\"]-=1,this});x.labelled=!0,x.exps=!0}(),blockstmt(\"for\",function(){var s,t=state.tokens.next,letscope=!1,foreachtok=null;\"each\"===t.value&&(foreachtok=t,advance(\"each\"),state.inMoz()||warning(\"W118\",state.tokens.curr,\"for each\")),increaseComplexityCount(),advance(\"(\");var nextop,comma,initializer,i=0,inof=[\"in\",\"of\"],level=0;checkPunctuators(state.tokens.next,[\"{\",\"[\"])&&++level;do{if(nextop=peek(i),++i,checkPunctuators(nextop,[\"{\",\"[\"])?++level:checkPunctuators(nextop,[\"}\",\"]\"])&&--level,0>level)break;0===level&&(!comma&&checkPunctuator(nextop,\",\")?comma=nextop:!initializer&&checkPunctuator(nextop,\"=\")&&(initializer=nextop))}while(level>0||!_.contains(inof,nextop.value)&&\";\"!==nextop.value&&\"(end)\"!==nextop.type);if(_.contains(inof,nextop.value)){state.inES6()||\"of\"!==nextop.value||warning(\"W104\",nextop,\"for of\",\"6\");var ok=!(initializer||comma);if(initializer&&error(\"W133\",comma,nextop.value,\"initializer is forbidden\"),comma&&error(\"W133\",comma,nextop.value,\"more than one ForBinding\"),\"var\"===state.tokens.next.id?(advance(\"var\"),state.tokens.curr.fud({prefix:!0})):\"let\"===state.tokens.next.id||\"const\"===state.tokens.next.id?(advance(state.tokens.next.id),letscope=!0,state.funct[\"(scope)\"].stack(),state.tokens.curr.fud({prefix:!0})):Object.create(varstatement).fud({prefix:!0,implied:\"for\",ignore:!ok}),advance(nextop.value),expression(20),advance(\")\",t),\"in\"===nextop.value&&state.option.forin&&(state.forinifcheckneeded=!0,void 0===state.forinifchecks&&(state.forinifchecks=[]),state.forinifchecks.push({type:\"(none)\"})),state.funct[\"(breakage)\"]+=1,state.funct[\"(loopage)\"]+=1,s=block(!0,!0),\"in\"===nextop.value&&state.option.forin){if(state.forinifchecks&&state.forinifchecks.length>0){var check=state.forinifchecks.pop();(s&&s.length>0&&(\"object\"!=typeof s[0]||\"if\"!==s[0].value)||\"(positive)\"===check.type&&s.length>1||\"(negative)\"===check.type)&&warning(\"W089\",this)}state.forinifcheckneeded=!1}state.funct[\"(breakage)\"]-=1,state.funct[\"(loopage)\"]-=1}else{if(foreachtok&&error(\"E045\",foreachtok),\";\"!==state.tokens.next.id)if(\"var\"===state.tokens.next.id)advance(\"var\"),state.tokens.curr.fud();else if(\"let\"===state.tokens.next.id)advance(\"let\"),letscope=!0,state.funct[\"(scope)\"].stack(),state.tokens.curr.fud();else for(;expression(0,\"for\"),\",\"===state.tokens.next.id;)comma();if(nolinebreak(state.tokens.curr),advance(\";\"),state.funct[\"(loopage)\"]+=1,\";\"!==state.tokens.next.id&&checkCondAssignment(expression(0)),nolinebreak(state.tokens.curr),advance(\";\"),\";\"===state.tokens.next.id&&error(\"E021\",state.tokens.next,\")\",\";\"),\")\"!==state.tokens.next.id)for(;expression(0,\"for\"),\",\"===state.tokens.next.id;)comma();advance(\")\",t),state.funct[\"(breakage)\"]+=1,block(!0,!0),state.funct[\"(breakage)\"]-=1,state.funct[\"(loopage)\"]-=1}return letscope&&state.funct[\"(scope)\"].unstack(),this}).labelled=!0,stmt(\"break\",function(){var v=state.tokens.next.value;return state.option.asi||nolinebreak(this),\";\"===state.tokens.next.id||state.tokens.next.reach||state.tokens.curr.line!==startLine(state.tokens.next)?0===state.funct[\"(breakage)\"]&&warning(\"W052\",state.tokens.next,this.value):(state.funct[\"(scope)\"].funct.hasBreakLabel(v)||warning(\"W090\",state.tokens.next,v),this.first=state.tokens.next,advance()),reachable(this),this}).exps=!0,stmt(\"continue\",function(){var v=state.tokens.next.value;return 0===state.funct[\"(breakage)\"]&&warning(\"W052\",state.tokens.next,this.value),state.funct[\"(loopage)\"]||warning(\"W052\",state.tokens.next,this.value),state.option.asi||nolinebreak(this),\";\"===state.tokens.next.id||state.tokens.next.reach||state.tokens.curr.line===startLine(state.tokens.next)&&(state.funct[\"(scope)\"].funct.hasBreakLabel(v)||warning(\"W090\",state.tokens.next,v),this.first=state.tokens.next,advance()),reachable(this),this}).exps=!0,stmt(\"return\",function(){return this.line===startLine(state.tokens.next)?\";\"===state.tokens.next.id||state.tokens.next.reach||(this.first=expression(0),!this.first||\"(punctuator)\"!==this.first.type||\"=\"!==this.first.value||this.first.paren||state.option.boss||warningAt(\"W093\",this.first.line,this.first.character)):\"(punctuator)\"===state.tokens.next.type&&[\"[\",\"{\",\"+\",\"-\"].indexOf(state.tokens.next.value)>-1&&nolinebreak(this),reachable(this),this}).exps=!0,function(x){x.exps=!0,x.lbp=25}(prefix(\"yield\",function(){var prev=state.tokens.prev;state.inES6(!0)&&!state.funct[\"(generator)\"]?\"(catch)\"===state.funct[\"(name)\"]&&state.funct[\"(context)\"][\"(generator)\"]||error(\"E046\",state.tokens.curr,\"yield\"):state.inES6()||warning(\"W104\",state.tokens.curr,\"yield\",\"6\"),state.funct[\"(generator)\"]=\"yielded\";var delegatingYield=!1;return\"*\"===state.tokens.next.value&&(delegatingYield=!0,advance(\"*\")),this.line!==startLine(state.tokens.next)&&state.inMoz()?state.option.asi||nolinebreak(this):((delegatingYield||\";\"!==state.tokens.next.id&&!state.option.asi&&!state.tokens.next.reach&&state.tokens.next.nud)&&(nobreaknonadjacent(state.tokens.curr,state.tokens.next),this.first=expression(10),\"(punctuator)\"!==this.first.type||\"=\"!==this.first.value||this.first.paren||state.option.boss||warningAt(\"W093\",this.first.line,this.first.character)),state.inMoz()&&\")\"!==state.tokens.next.id&&(prev.lbp>30||!prev.assign&&!isEndOfExpr()||\"yield\"===prev.id)&&error(\"E050\",this)),this})),stmt(\"throw\",function(){return nolinebreak(this),this.first=expression(20),reachable(this),this}).exps=!0,stmt(\"import\",function(){if(state.inES6()||warning(\"W119\",state.tokens.curr,\"import\",\"6\"),\"(string)\"===state.tokens.next.type)return advance(\"(string)\"),this;if(state.tokens.next.identifier){if(this.name=identifier(),state.funct[\"(scope)\"].addlabel(this.name,{type:\"const\",token:state.tokens.curr}),\",\"!==state.tokens.next.value)return advance(\"from\"),advance(\"(string)\"),this;advance(\",\")}if(\"*\"===state.tokens.next.id)advance(\"*\"),advance(\"as\"),state.tokens.next.identifier&&(this.name=identifier(),state.funct[\"(scope)\"].addlabel(this.name,{type:\"const\",token:state.tokens.curr}));else for(advance(\"{\");;){if(\"}\"===state.tokens.next.value){advance(\"}\");break}var importName;if(\"default\"===state.tokens.next.type?(importName=\"default\",advance(\"default\")):importName=identifier(),\"as\"===state.tokens.next.value&&(advance(\"as\"),importName=identifier()),state.funct[\"(scope)\"].addlabel(importName,{type:\"const\",token:state.tokens.curr}),\",\"!==state.tokens.next.value){if(\"}\"===state.tokens.next.value){advance(\"}\");break}error(\"E024\",state.tokens.next,state.tokens.next.value);break}advance(\",\")}return advance(\"from\"),advance(\"(string)\"),this}).exps=!0,stmt(\"export\",function(){var token,identifier,ok=!0;if(state.inES6()||(warning(\"W119\",state.tokens.curr,\"export\",\"6\"),ok=!1),state.funct[\"(scope)\"].block.isGlobal()||(error(\"E053\",state.tokens.curr),ok=!1),\"*\"===state.tokens.next.value)return advance(\"*\"),advance(\"from\"),advance(\"(string)\"),this;if(\"default\"===state.tokens.next.type){state.nameStack.set(state.tokens.next),advance(\"default\");var exportType=state.tokens.next.id;return(\"function\"===exportType||\"class\"===exportType)&&(this.block=!0),token=peek(),expression(10),identifier=token.value,this.block&&(state.funct[\"(scope)\"].addlabel(identifier,{type:exportType,token:token}),state.funct[\"(scope)\"].setExported(identifier,token)),this}if(\"{\"===state.tokens.next.value){advance(\"{\");for(var exportedTokens=[];;){if(state.tokens.next.identifier||error(\"E030\",state.tokens.next,state.tokens.next.value),advance(),exportedTokens.push(state.tokens.curr),\"as\"===state.tokens.next.value&&(advance(\"as\"),state.tokens.next.identifier||error(\"E030\",state.tokens.next,state.tokens.next.value),advance()),\",\"!==state.tokens.next.value){if(\"}\"===state.tokens.next.value){advance(\"}\");break}error(\"E024\",state.tokens.next,state.tokens.next.value);break}advance(\",\")}return\"from\"===state.tokens.next.value?(advance(\"from\"),advance(\"(string)\")):ok&&exportedTokens.forEach(function(token){state.funct[\"(scope)\"].setExported(token.value,token)}),this}if(\"var\"===state.tokens.next.id)advance(\"var\"),state.tokens.curr.fud({inexport:!0});else if(\"let\"===state.tokens.next.id)advance(\"let\"),state.tokens.curr.fud({inexport:!0});else if(\"const\"===state.tokens.next.id)advance(\"const\"),state.tokens.curr.fud({inexport:!0});else if(\"function\"===state.tokens.next.id)this.block=!0,advance(\"function\"),state.syntax[\"function\"].fud({inexport:!0});else if(\"class\"===state.tokens.next.id){this.block=!0,advance(\"class\");var classNameToken=state.tokens.next;state.syntax[\"class\"].fud(),state.funct[\"(scope)\"].setExported(classNameToken.value,classNameToken)}else error(\"E024\",state.tokens.next,state.tokens.next.value);return this}).exps=!0,FutureReservedWord(\"abstract\"),FutureReservedWord(\"boolean\"),FutureReservedWord(\"byte\"),FutureReservedWord(\"char\"),FutureReservedWord(\"class\",{es5:!0,nud:classdef}),FutureReservedWord(\"double\"),FutureReservedWord(\"enum\",{es5:!0}),FutureReservedWord(\"export\",{es5:!0}),FutureReservedWord(\"extends\",{es5:!0}),FutureReservedWord(\"final\"),FutureReservedWord(\"float\"),FutureReservedWord(\"goto\"),FutureReservedWord(\"implements\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"import\",{es5:!0}),FutureReservedWord(\"int\"),FutureReservedWord(\"interface\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"long\"),FutureReservedWord(\"native\"),FutureReservedWord(\"package\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"private\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"protected\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"public\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"short\"),FutureReservedWord(\"static\",{es5:!0,strictOnly:!0}),FutureReservedWord(\"super\",{es5:!0}),FutureReservedWord(\"synchronized\"),FutureReservedWord(\"transient\"),FutureReservedWord(\"volatile\");var lookupBlockType=function(){var pn,pn1,prev,i=-1,bracketStack=0,ret={};checkPunctuators(state.tokens.curr,[\"[\",\"{\"])&&(bracketStack+=1);do{if(prev=-1===i?state.tokens.curr:pn,pn=-1===i?state.tokens.next:peek(i),pn1=peek(i+1),i+=1,checkPunctuators(pn,[\"[\",\"{\"])?bracketStack+=1:checkPunctuators(pn,[\"]\",\"}\"])&&(bracketStack-=1),1===bracketStack&&pn.identifier&&\"for\"===pn.value&&!checkPunctuator(prev,\".\")){ret.isCompArray=!0,ret.notJson=!0;break}if(0===bracketStack&&checkPunctuators(pn,[\"}\",\"]\"])){if(\"=\"===pn1.value){ret.isDestAssign=!0,ret.notJson=!0;break}if(\".\"===pn1.value){ret.notJson=!0;break}}checkPunctuator(pn,\";\")&&(ret.isBlock=!0,ret.notJson=!0)}while(bracketStack>0&&\"(end)\"!==pn.id);return ret},arrayComprehension=function(){function declare(v){var l=_current.variables.filter(function(elt){return elt.value===v?(elt.undef=!1,v):void 0}).length;return 0!==l}function use(v){var l=_current.variables.filter(function(elt){return elt.value!==v||elt.undef?void 0:(elt.unused===!0&&(elt.unused=!1),v)}).length;return 0===l}var _current,CompArray=function(){this.mode=\"use\",this.variables=[]},_carrays=[];return{stack:function(){_current=new CompArray,_carrays.push(_current)},unstack:function(){_current.variables.filter(function(v){v.unused&&warning(\"W098\",v.token,v.raw_text||v.value),v.undef&&state.funct[\"(scope)\"].block.use(v.value,v.token)}),_carrays.splice(-1,1),_current=_carrays[_carrays.length-1]},setState:function(s){_.contains([\"use\",\"define\",\"generate\",\"filter\"],s)&&(_current.mode=s)},check:function(v){return _current?_current&&\"use\"===_current.mode?(use(v)&&_current.variables.push({funct:state.funct,token:state.tokens.curr,value:v,undef:!0,unused:!1}),!0):_current&&\"define\"===_current.mode?(declare(v)||_current.variables.push({funct:state.funct,token:state.tokens.curr,value:v,undef:!1,unused:!0}),!0):_current&&\"generate\"===_current.mode?(state.funct[\"(scope)\"].block.use(v,state.tokens.curr),!0):_current&&\"filter\"===_current.mode?(use(v)&&state.funct[\"(scope)\"].block.use(v,state.tokens.curr),!0):!1:void 0}}},escapeRegex=function(str){return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")},itself=function(s,o,g){function each(obj,cb){obj&&(Array.isArray(obj)||\"object\"!=typeof obj||(obj=Object.keys(obj)),obj.forEach(cb))}var i,k,x,reIgnoreStr,reIgnore,optionKeys,newOptionObj={},newIgnoredObj={};o=_.clone(o),state.reset(),o&&o.scope?JSHINT.scope=o.scope:(JSHINT.errors=[],JSHINT.undefs=[],JSHINT.internals=[],JSHINT.blacklist={},JSHINT.scope=\"(main)\"),predefined=Object.create(null),combine(predefined,vars.ecmaIdentifiers[3]),combine(predefined,vars.reservedVars),combine(predefined,g||{}),declared=Object.create(null);var exported=Object.create(null);if(o)for(each(o.predef||null,function(item){var slice,prop;\"-\"===item[0]?(slice=item.slice(1),JSHINT.blacklist[slice]=slice,delete predefined[slice]):(prop=Object.getOwnPropertyDescriptor(o.predef,item),predefined[item]=prop?prop.value:!1)}),each(o.exported||null,function(item){exported[item]=!0}),delete o.predef,delete o.exported,optionKeys=Object.keys(o),x=0;optionKeys.length>x;x++)if(/^-W\\d{3}$/g.test(optionKeys[x]))newIgnoredObj[optionKeys[x].slice(1)]=!0;else{var optionKey=optionKeys[x];newOptionObj[optionKey]=o[optionKey],(\"esversion\"===optionKey&&5===o[optionKey]||\"es5\"===optionKey&&o[optionKey])&&warning(\"I003\"),\"newcap\"===optionKeys[x]&&o[optionKey]===!1&&(newOptionObj[\"(explicitNewcap)\"]=!0)}state.option=newOptionObj,state.ignored=newIgnoredObj,state.option.indent=state.option.indent||4,state.option.maxerr=state.option.maxerr||50,indent=1;var scopeManagerInst=scopeManager(state,predefined,exported,declared);if(scopeManagerInst.on(\"warning\",function(ev){warning.apply(null,[ev.code,ev.token].concat(ev.data))}),scopeManagerInst.on(\"error\",function(ev){error.apply(null,[ev.code,ev.token].concat(ev.data))}),state.funct=functor(\"(global)\",null,{\"(global)\":!0,\"(scope)\":scopeManagerInst,\"(comparray)\":arrayComprehension(),\"(metrics)\":createMetrics(state.tokens.next)}),functions=[state.funct],urls=[],stack=null,member={},membersOnly=null,inblock=!1,lookahead=[],!isString(s)&&!Array.isArray(s))return errorAt(\"E004\",0),!1;api={get isJSON(){return state.jsonMode},getOption:function(name){return state.option[name]||null},getCache:function(name){return state.cache[name]},setCache:function(name,value){state.cache[name]=value},warn:function(code,data){warningAt.apply(null,[code,data.line,data.char].concat(data.data))},on:function(names,listener){names.split(\" \").forEach(function(name){emitter.on(name,listener)}.bind(this))}},emitter.removeAllListeners(),(extraModules||[]).forEach(function(func){func(api)}),state.tokens.prev=state.tokens.curr=state.tokens.next=state.syntax[\"(begin)\"],o&&o.ignoreDelimiters&&(Array.isArray(o.ignoreDelimiters)||(o.ignoreDelimiters=[o.ignoreDelimiters]),o.ignoreDelimiters.forEach(function(delimiterPair){delimiterPair.start&&delimiterPair.end&&(reIgnoreStr=escapeRegex(delimiterPair.start)+\"[\\\\s\\\\S]*?\"+escapeRegex(delimiterPair.end),reIgnore=RegExp(reIgnoreStr,\"ig\"),s=s.replace(reIgnore,function(match){return match.replace(/./g,\" \")}))})),lex=new Lexer(s),lex.on(\"warning\",function(ev){warningAt.apply(null,[ev.code,ev.line,ev.character].concat(ev.data))}),lex.on(\"error\",function(ev){errorAt.apply(null,[ev.code,ev.line,ev.character].concat(ev.data))}),lex.on(\"fatal\",function(ev){quit(\"E041\",ev.line,ev.from)}),lex.on(\"Identifier\",function(ev){emitter.emit(\"Identifier\",ev)}),lex.on(\"String\",function(ev){emitter.emit(\"String\",ev)}),lex.on(\"Number\",function(ev){emitter.emit(\"Number\",ev)}),lex.start();for(var name in o)_.has(o,name)&&checkOption(name,state.tokens.curr);assume(),combine(predefined,g||{}),comma.first=!0;try{switch(advance(),state.tokens.next.id){case\"{\":case\"[\":destructuringAssignOrJsonValue();break;default:directives(),state.directive[\"use strict\"]&&\"global\"!==state.option.strict&&warning(\"W097\",state.tokens.prev),statements()}\"(end)\"!==state.tokens.next.id&&quit(\"E041\",state.tokens.curr.line),state.funct[\"(scope)\"].unstack()}catch(err){if(!err||\"JSHintError\"!==err.name)throw err;var nt=state.tokens.next||{};JSHINT.errors.push({scope:\"(main)\",raw:err.raw,code:err.code,reason:err.message,line:err.line||nt.line,character:err.character||nt.from},null)}if(\"(main)\"===JSHINT.scope)for(o=o||{},i=0;JSHINT.internals.length>i;i+=1)k=JSHINT.internals[i],o.scope=k.elem,itself(k.value,o,g);return 0===JSHINT.errors.length};return itself.addModule=function(func){extraModules.push(func)},itself.addModule(style.register),itself.data=function(){var fu,f,i,j,n,globals,data={functions:[],options:state.option};itself.errors.length&&(data.errors=itself.errors),state.jsonMode&&(data.json=!0);var impliedGlobals=state.funct[\"(scope)\"].getImpliedGlobals();for(impliedGlobals.length>0&&(data.implieds=impliedGlobals),urls.length>0&&(data.urls=urls),globals=state.funct[\"(scope)\"].getUsedOrDefinedGlobals(),globals.length>0&&(data.globals=globals),i=1;functions.length>i;i+=1){for(f=functions[i],fu={},j=0;functionicity.length>j;j+=1)fu[functionicity[j]]=[];for(j=0;functionicity.length>j;j+=1)0===fu[functionicity[j]].length&&delete fu[functionicity[j]];fu.name=f[\"(name)\"],fu.param=f[\"(params)\"],fu.line=f[\"(line)\"],fu.character=f[\"(character)\"],fu.last=f[\"(last)\"],fu.lastcharacter=f[\"(lastcharacter)\"],fu.metrics={complexity:f[\"(metrics)\"].ComplexityCount,parameters:f[\"(metrics)\"].arity,statements:f[\"(metrics)\"].statementCount},data.functions.push(fu)}var unuseds=state.funct[\"(scope)\"].getUnuseds();unuseds.length>0&&(data.unused=unuseds);for(n in member)if(\"number\"==typeof member[n]){data.member=member;break}return data},itself.jshint=itself,itself}();\"object\"==typeof exports&&exports&&(exports.JSHINT=JSHINT)},{\"../lodash\":\"/node_modules/jshint/lodash.js\",\"./lex.js\":\"/node_modules/jshint/src/lex.js\",\"./messages.js\":\"/node_modules/jshint/src/messages.js\",\"./options.js\":\"/node_modules/jshint/src/options.js\",\"./reg.js\":\"/node_modules/jshint/src/reg.js\",\"./scope-manager.js\":\"/node_modules/jshint/src/scope-manager.js\",\"./state.js\":\"/node_modules/jshint/src/state.js\",\"./style.js\":\"/node_modules/jshint/src/style.js\",\"./vars.js\":\"/node_modules/jshint/src/vars.js\",events:\"/node_modules/browserify/node_modules/events/events.js\"}],\"/node_modules/jshint/src/lex.js\":[function(_dereq_,module,exports){\"use strict\";function asyncTrigger(){var _checks=[];return{push:function(fn){_checks.push(fn)},check:function(){for(var check=0;_checks.length>check;++check)_checks[check]();_checks.splice(0,_checks.length)}}}function Lexer(source){var lines=source;\"string\"==typeof lines&&(lines=lines.replace(/\\r\\n/g,\"\\n\").replace(/\\r/g,\"\\n\").split(\"\\n\")),lines[0]&&\"#!\"===lines[0].substr(0,2)&&(-1!==lines[0].indexOf(\"node\")&&(state.option.node=!0),lines[0]=\"\"),this.emitter=new events.EventEmitter,this.source=source,this.setLines(lines),this.prereg=!0,this.line=0,this.char=1,this.from=1,this.input=\"\",this.inComment=!1,this.context=[],this.templateStarts=[];for(var i=0;state.option.indent>i;i+=1)state.tab+=\" \";this.ignoreLinterErrors=!1}var _=_dereq_(\"../lodash\"),events=_dereq_(\"events\"),reg=_dereq_(\"./reg.js\"),state=_dereq_(\"./state.js\").state,unicodeData=_dereq_(\"../data/ascii-identifier-data.js\"),asciiIdentifierStartTable=unicodeData.asciiIdentifierStartTable,asciiIdentifierPartTable=unicodeData.asciiIdentifierPartTable,Token={Identifier:1,Punctuator:2,NumericLiteral:3,StringLiteral:4,Comment:5,Keyword:6,NullLiteral:7,BooleanLiteral:8,RegExp:9,TemplateHead:10,TemplateMiddle:11,TemplateTail:12,NoSubstTemplate:13},Context={Block:1,Template:2};Lexer.prototype={_lines:[],inContext:function(ctxType){return this.context.length>0&&this.context[this.context.length-1].type===ctxType},pushContext:function(ctxType){this.context.push({type:ctxType})},popContext:function(){return this.context.pop()},isContext:function(context){return this.context.length>0&&this.context[this.context.length-1]===context},currentContext:function(){return this.context.length>0&&this.context[this.context.length-1]},getLines:function(){return this._lines=state.lines,this._lines},setLines:function(val){this._lines=val,state.lines=this._lines},peek:function(i){return this.input.charAt(i||0)},skip:function(i){i=i||1,this.char+=i,this.input=this.input.slice(i)},on:function(names,listener){names.split(\" \").forEach(function(name){this.emitter.on(name,listener)}.bind(this))},trigger:function(){this.emitter.emit.apply(this.emitter,Array.prototype.slice.call(arguments))},triggerAsync:function(type,args,checks,fn){checks.push(function(){fn()&&this.trigger(type,args)}.bind(this))},scanPunctuator:function(){var ch2,ch3,ch4,ch1=this.peek();switch(ch1){case\".\":if(/^[0-9]$/.test(this.peek(1)))return null;if(\".\"===this.peek(1)&&\".\"===this.peek(2))return{type:Token.Punctuator,value:\"...\"};case\"(\":case\")\":case\";\":case\",\":case\"[\":case\"]\":case\":\":case\"~\":case\"?\":return{type:Token.Punctuator,value:ch1};case\"{\":return this.pushContext(Context.Block),{type:Token.Punctuator,value:ch1};case\"}\":return this.inContext(Context.Block)&&this.popContext(),{type:Token.Punctuator,value:ch1};case\"#\":return{type:Token.Punctuator,value:ch1};case\"\":return null}return ch2=this.peek(1),ch3=this.peek(2),ch4=this.peek(3),\">\"===ch1&&\">\"===ch2&&\">\"===ch3&&\"=\"===ch4?{type:Token.Punctuator,value:\">>>=\"}:\"=\"===ch1&&\"=\"===ch2&&\"=\"===ch3?{type:Token.Punctuator,value:\"===\"}:\"!\"===ch1&&\"=\"===ch2&&\"=\"===ch3?{type:Token.Punctuator,value:\"!==\"}:\">\"===ch1&&\">\"===ch2&&\">\"===ch3?{type:Token.Punctuator,value:\">>>\"}:\"<\"===ch1&&\"<\"===ch2&&\"=\"===ch3?{type:Token.Punctuator,value:\"<<=\"}:\">\"===ch1&&\">\"===ch2&&\"=\"===ch3?{type:Token.Punctuator,value:\">>=\"}:\"=\"===ch1&&\">\"===ch2?{type:Token.Punctuator,value:ch1+ch2}:ch1===ch2&&\"+-<>&|\".indexOf(ch1)>=0?{type:Token.Punctuator,value:ch1+ch2}:\"<>=!+-*%&|^\".indexOf(ch1)>=0?\"=\"===ch2?{type:Token.Punctuator,value:ch1+ch2}:{type:Token.Punctuator,value:ch1}:\"/\"===ch1?\"=\"===ch2?{type:Token.Punctuator,value:\"/=\"}:{type:Token.Punctuator,value:\"/\"}:null},scanComments:function(){function commentToken(label,body,opt){var special=[\"jshint\",\"jslint\",\"members\",\"member\",\"globals\",\"global\",\"exported\"],isSpecial=!1,value=label+body,commentType=\"plain\";return opt=opt||{},opt.isMultiline&&(value+=\"*/\"),body=body.replace(/\\n/g,\" \"),\"/*\"===label&&reg.fallsThrough.test(body)&&(isSpecial=!0,commentType=\"falls through\"),special.forEach(function(str){if(!isSpecial&&(\"//\"!==label||\"jshint\"===str)&&(\" \"===body.charAt(str.length)&&body.substr(0,str.length)===str&&(isSpecial=!0,label+=str,body=body.substr(str.length)),isSpecial||\" \"!==body.charAt(0)||\" \"!==body.charAt(str.length+1)||body.substr(1,str.length)!==str||(isSpecial=!0,label=label+\" \"+str,body=body.substr(str.length+1)),isSpecial))switch(str){case\"member\":commentType=\"members\";break;case\"global\":commentType=\"globals\";break;default:var options=body.split(\":\").map(function(v){return v.replace(/^\\s+/,\"\").replace(/\\s+$/,\"\")});if(2===options.length)switch(options[0]){case\"ignore\":switch(options[1]){case\"start\":self.ignoringLinterErrors=!0,isSpecial=!1;break;case\"end\":self.ignoringLinterErrors=!1,isSpecial=!1}}commentType=str}}),{type:Token.Comment,commentType:commentType,value:value,body:body,isSpecial:isSpecial,isMultiline:opt.isMultiline||!1,isMalformed:opt.isMalformed||!1}}var ch1=this.peek(),ch2=this.peek(1),rest=this.input.substr(2),startLine=this.line,startChar=this.char,self=this;if(\"*\"===ch1&&\"/\"===ch2)return this.trigger(\"error\",{code:\"E018\",line:startLine,character:startChar}),this.skip(2),null;if(\"/\"!==ch1||\"*\"!==ch2&&\"/\"!==ch2)return null;if(\"/\"===ch2)return this.skip(this.input.length),commentToken(\"//\",rest);var body=\"\";if(\"*\"===ch2){for(this.inComment=!0,this.skip(2);\"*\"!==this.peek()||\"/\"!==this.peek(1);)if(\"\"===this.peek()){if(body+=\"\\n\",!this.nextLine())return this.trigger(\"error\",{code:\"E017\",line:startLine,character:startChar}),this.inComment=!1,commentToken(\"/*\",body,{isMultiline:!0,isMalformed:!0})}else body+=this.peek(),this.skip();return this.skip(2),this.inComment=!1,commentToken(\"/*\",body,{isMultiline:!0})}},scanKeyword:function(){var result=/^[a-zA-Z_$][a-zA-Z0-9_$]*/.exec(this.input),keywords=[\"if\",\"in\",\"do\",\"var\",\"for\",\"new\",\"try\",\"let\",\"this\",\"else\",\"case\",\"void\",\"with\",\"enum\",\"while\",\"break\",\"catch\",\"throw\",\"const\",\"yield\",\"class\",\"super\",\"return\",\"typeof\",\"delete\",\"switch\",\"export\",\"import\",\"default\",\"finally\",\"extends\",\"function\",\"continue\",\"debugger\",\"instanceof\"];return result&&keywords.indexOf(result[0])>=0?{type:Token.Keyword,value:result[0]}:null},scanIdentifier:function(){function isNonAsciiIdentifierStart(code){return code>256}function isNonAsciiIdentifierPart(code){return code>256}function isHexDigit(str){return/^[0-9a-fA-F]$/.test(str)}function removeEscapeSequences(id){return id.replace(/\\\\u([0-9a-fA-F]{4})/g,function(m0,codepoint){return String.fromCharCode(parseInt(codepoint,16))})}var type,char,id=\"\",index=0,readUnicodeEscapeSequence=function(){if(index+=1,\"u\"!==this.peek(index))return null;var code,ch1=this.peek(index+1),ch2=this.peek(index+2),ch3=this.peek(index+3),ch4=this.peek(index+4);return isHexDigit(ch1)&&isHexDigit(ch2)&&isHexDigit(ch3)&&isHexDigit(ch4)?(code=parseInt(ch1+ch2+ch3+ch4,16),asciiIdentifierPartTable[code]||isNonAsciiIdentifierPart(code)?(index+=5,\"\\\\u\"+ch1+ch2+ch3+ch4):null):null}.bind(this),getIdentifierStart=function(){var chr=this.peek(index),code=chr.charCodeAt(0);return 92===code?readUnicodeEscapeSequence():128>code?asciiIdentifierStartTable[code]?(index+=1,chr):null:isNonAsciiIdentifierStart(code)?(index+=1,chr):null}.bind(this),getIdentifierPart=function(){var chr=this.peek(index),code=chr.charCodeAt(0);return 92===code?readUnicodeEscapeSequence():128>code?asciiIdentifierPartTable[code]?(index+=1,chr):null:isNonAsciiIdentifierPart(code)?(index+=1,chr):null}.bind(this);if(char=getIdentifierStart(),null===char)return null;for(id=char;char=getIdentifierPart(),null!==char;)id+=char;switch(id){case\"true\":case\"false\":type=Token.BooleanLiteral;break;case\"null\":type=Token.NullLiteral;break;default:type=Token.Identifier}return{type:type,value:removeEscapeSequences(id),text:id,tokenLength:id.length}},scanNumericLiteral:function(){function isDecimalDigit(str){return/^[0-9]$/.test(str)}function isOctalDigit(str){return/^[0-7]$/.test(str)}function isBinaryDigit(str){return/^[01]$/.test(str)}function isHexDigit(str){return/^[0-9a-fA-F]$/.test(str)}function isIdentifierStart(ch){return\"$\"===ch||\"_\"===ch||\"\\\\\"===ch||ch>=\"a\"&&\"z\">=ch||ch>=\"A\"&&\"Z\">=ch}var bad,index=0,value=\"\",length=this.input.length,char=this.peek(index),isAllowedDigit=isDecimalDigit,base=10,isLegacy=!1;if(\".\"!==char&&!isDecimalDigit(char))return null;if(\".\"!==char){for(value=this.peek(index),index+=1,char=this.peek(index),\"0\"===value&&((\"x\"===char||\"X\"===char)&&(isAllowedDigit=isHexDigit,base=16,index+=1,value+=char),(\"o\"===char||\"O\"===char)&&(isAllowedDigit=isOctalDigit,base=8,state.inES6(!0)||this.trigger(\"warning\",{code:\"W119\",line:this.line,character:this.char,data:[\"Octal integer literal\",\"6\"]}),index+=1,value+=char),(\"b\"===char||\"B\"===char)&&(isAllowedDigit=isBinaryDigit,base=2,state.inES6(!0)||this.trigger(\"warning\",{code:\"W119\",line:this.line,character:this.char,data:[\"Binary integer literal\",\"6\"]}),index+=1,value+=char),isOctalDigit(char)&&(isAllowedDigit=isOctalDigit,base=8,isLegacy=!0,bad=!1,index+=1,value+=char),!isOctalDigit(char)&&isDecimalDigit(char)&&(index+=1,value+=char));length>index;){if(char=this.peek(index),isLegacy&&isDecimalDigit(char))bad=!0;else if(!isAllowedDigit(char))break;value+=char,index+=1}if(isAllowedDigit!==isDecimalDigit)return!isLegacy&&2>=value.length?{type:Token.NumericLiteral,value:value,isMalformed:!0}:length>index&&(char=this.peek(index),isIdentifierStart(char))?null:{type:Token.NumericLiteral,value:value,base:base,isLegacy:isLegacy,isMalformed:!1}}if(\".\"===char)for(value+=char,index+=1;length>index&&(char=this.peek(index),isDecimalDigit(char));)value+=char,index+=1;if(\"e\"===char||\"E\"===char){if(value+=char,index+=1,char=this.peek(index),(\"+\"===char||\"-\"===char)&&(value+=this.peek(index),index+=1),char=this.peek(index),!isDecimalDigit(char))return null;for(value+=char,index+=1;length>index&&(char=this.peek(index),isDecimalDigit(char));)value+=char,index+=1}return length>index&&(char=this.peek(index),isIdentifierStart(char))?null:{type:Token.NumericLiteral,value:value,base:base,isMalformed:!isFinite(value)}},scanEscapeSequence:function(checks){var allowNewLine=!1,jump=1;this.skip();var char=this.peek();switch(char){case\"'\":this.triggerAsync(\"warning\",{code:\"W114\",line:this.line,character:this.char,data:[\"\\\\'\"]},checks,function(){return state.jsonMode});break;case\"b\":char=\"\\\\b\";break;case\"f\":char=\"\\\\f\";break;case\"n\":char=\"\\\\n\";break;case\"r\":char=\"\\\\r\";break;case\"t\":char=\"\\\\t\";break;case\"0\":char=\"\\\\0\";var n=parseInt(this.peek(1),10);this.triggerAsync(\"warning\",{code:\"W115\",line:this.line,character:this.char},checks,function(){return n>=0&&7>=n&&state.isStrict()});break;case\"u\":var hexCode=this.input.substr(1,4),code=parseInt(hexCode,16);isNaN(code)&&this.trigger(\"warning\",{code:\"W052\",line:this.line,character:this.char,data:[\"u\"+hexCode]}),char=String.fromCharCode(code),jump=5;break;case\"v\":this.triggerAsync(\"warning\",{code:\"W114\",line:this.line,character:this.char,data:[\"\\\\v\"]},checks,function(){return state.jsonMode}),char=\"\u000b\";break;case\"x\":var x=parseInt(this.input.substr(1,2),16);this.triggerAsync(\"warning\",{code:\"W114\",line:this.line,character:this.char,data:[\"\\\\x-\"]},checks,function(){return state.jsonMode}),char=String.fromCharCode(x),jump=3;break;case\"\\\\\":char=\"\\\\\\\\\";break;case'\"':char='\\\\\"';break;case\"/\":break;case\"\":allowNewLine=!0,char=\"\"}return{\"char\":char,jump:jump,allowNewLine:allowNewLine}},scanTemplateLiteral:function(checks){var tokenType,ch,value=\"\",startLine=this.line,startChar=this.char,depth=this.templateStarts.length;if(!state.inES6(!0))return null;if(\"`\"===this.peek())tokenType=Token.TemplateHead,this.templateStarts.push({line:this.line,\"char\":this.char}),depth=this.templateStarts.length,this.skip(1),this.pushContext(Context.Template);else{if(!this.inContext(Context.Template)||\"}\"!==this.peek())return null;tokenType=Token.TemplateMiddle}for(;\"`\"!==this.peek();){for(;\"\"===(ch=this.peek());)if(value+=\"\\n\",!this.nextLine()){var startPos=this.templateStarts.pop();return this.trigger(\"error\",{code:\"E052\",line:startPos.line,character:startPos.char}),{type:tokenType,value:value,startLine:startLine,startChar:startChar,isUnclosed:!0,depth:depth,context:this.popContext()}}if(\"$\"===ch&&\"{\"===this.peek(1))return value+=\"${\",this.skip(2),{type:tokenType,value:value,startLine:startLine,startChar:startChar,isUnclosed:!1,depth:depth,context:this.currentContext()};\nif(\"\\\\\"===ch){var escape=this.scanEscapeSequence(checks);value+=escape.char,this.skip(escape.jump)}else\"`\"!==ch&&(value+=ch,this.skip(1))}return tokenType=tokenType===Token.TemplateHead?Token.NoSubstTemplate:Token.TemplateTail,this.skip(1),this.templateStarts.pop(),{type:tokenType,value:value,startLine:startLine,startChar:startChar,isUnclosed:!1,depth:depth,context:this.popContext()}},scanStringLiteral:function(checks){var quote=this.peek();if('\"'!==quote&&\"'\"!==quote)return null;this.triggerAsync(\"warning\",{code:\"W108\",line:this.line,character:this.char},checks,function(){return state.jsonMode&&'\"'!==quote});var value=\"\",startLine=this.line,startChar=this.char,allowNewLine=!1;for(this.skip();this.peek()!==quote;)if(\"\"===this.peek()){if(allowNewLine?(allowNewLine=!1,this.triggerAsync(\"warning\",{code:\"W043\",line:this.line,character:this.char},checks,function(){return!state.option.multistr}),this.triggerAsync(\"warning\",{code:\"W042\",line:this.line,character:this.char},checks,function(){return state.jsonMode&&state.option.multistr})):this.trigger(\"warning\",{code:\"W112\",line:this.line,character:this.char}),!this.nextLine())return this.trigger(\"error\",{code:\"E029\",line:startLine,character:startChar}),{type:Token.StringLiteral,value:value,startLine:startLine,startChar:startChar,isUnclosed:!0,quote:quote}}else{allowNewLine=!1;var char=this.peek(),jump=1;if(\" \">char&&this.trigger(\"warning\",{code:\"W113\",line:this.line,character:this.char,data:[\"<non-printable>\"]}),\"\\\\\"===char){var parsed=this.scanEscapeSequence(checks);char=parsed.char,jump=parsed.jump,allowNewLine=parsed.allowNewLine}value+=char,this.skip(jump)}return this.skip(),{type:Token.StringLiteral,value:value,startLine:startLine,startChar:startChar,isUnclosed:!1,quote:quote}},scanRegExp:function(){var terminated,index=0,length=this.input.length,char=this.peek(),value=char,body=\"\",flags=[],malformed=!1,isCharSet=!1,scanUnexpectedChars=function(){\" \">char&&(malformed=!0,this.trigger(\"warning\",{code:\"W048\",line:this.line,character:this.char})),\"<\"===char&&(malformed=!0,this.trigger(\"warning\",{code:\"W049\",line:this.line,character:this.char,data:[char]}))}.bind(this);if(!this.prereg||\"/\"!==char)return null;for(index+=1,terminated=!1;length>index;)if(char=this.peek(index),value+=char,body+=char,isCharSet)\"]\"===char&&(\"\\\\\"!==this.peek(index-1)||\"\\\\\"===this.peek(index-2))&&(isCharSet=!1),\"\\\\\"===char&&(index+=1,char=this.peek(index),body+=char,value+=char,scanUnexpectedChars()),index+=1;else{if(\"\\\\\"===char){if(index+=1,char=this.peek(index),body+=char,value+=char,scanUnexpectedChars(),\"/\"===char){index+=1;continue}if(\"[\"===char){index+=1;continue}}if(\"[\"!==char){if(\"/\"===char){body=body.substr(0,body.length-1),terminated=!0,index+=1;break}index+=1}else isCharSet=!0,index+=1}if(!terminated)return this.trigger(\"error\",{code:\"E015\",line:this.line,character:this.from}),void this.trigger(\"fatal\",{line:this.line,from:this.from});for(;length>index&&(char=this.peek(index),/[gim]/.test(char));)flags.push(char),value+=char,index+=1;try{RegExp(body,flags.join(\"\"))}catch(err){malformed=!0,this.trigger(\"error\",{code:\"E016\",line:this.line,character:this.char,data:[err.message]})}return{type:Token.RegExp,value:value,flags:flags,isMalformed:malformed}},scanNonBreakingSpaces:function(){return state.option.nonbsp?this.input.search(/(\\u00A0)/):-1},scanUnsafeChars:function(){return this.input.search(reg.unsafeChars)},next:function(checks){this.from=this.char;var start;if(/\\s/.test(this.peek()))for(start=this.char;/\\s/.test(this.peek());)this.from+=1,this.skip();var match=this.scanComments()||this.scanStringLiteral(checks)||this.scanTemplateLiteral(checks);return match?match:(match=this.scanRegExp()||this.scanPunctuator()||this.scanKeyword()||this.scanIdentifier()||this.scanNumericLiteral(),match?(this.skip(match.tokenLength||match.value.length),match):null)},nextLine:function(){var char;if(this.line>=this.getLines().length)return!1;this.input=this.getLines()[this.line],this.line+=1,this.char=1,this.from=1;var inputTrimmed=this.input.trim(),startsWith=function(){return _.some(arguments,function(prefix){return 0===inputTrimmed.indexOf(prefix)})},endsWith=function(){return _.some(arguments,function(suffix){return-1!==inputTrimmed.indexOf(suffix,inputTrimmed.length-suffix.length)})};if(this.ignoringLinterErrors===!0&&(startsWith(\"/*\",\"//\")||this.inComment&&endsWith(\"*/\")||(this.input=\"\")),char=this.scanNonBreakingSpaces(),char>=0&&this.trigger(\"warning\",{code:\"W125\",line:this.line,character:char+1}),this.input=this.input.replace(/\\t/g,state.tab),char=this.scanUnsafeChars(),char>=0&&this.trigger(\"warning\",{code:\"W100\",line:this.line,character:char}),!this.ignoringLinterErrors&&state.option.maxlen&&state.option.maxlen<this.input.length){var inComment=this.inComment||startsWith.call(inputTrimmed,\"//\")||startsWith.call(inputTrimmed,\"/*\"),shouldTriggerError=!inComment||!reg.maxlenException.test(inputTrimmed);shouldTriggerError&&this.trigger(\"warning\",{code:\"W101\",line:this.line,character:this.input.length})}return!0},start:function(){this.nextLine()},token:function(){function isReserved(token,isProperty){if(!token.reserved)return!1;var meta=token.meta;if(meta&&meta.isFutureReservedWord&&state.inES5()){if(!meta.es5)return!1;if(meta.strictOnly&&!state.option.strict&&!state.isStrict())return!1;if(isProperty)return!1}return!0}for(var token,checks=asyncTrigger(),create=function(type,value,isProperty,token){var obj;if(\"(endline)\"!==type&&\"(end)\"!==type&&(this.prereg=!1),\"(punctuator)\"===type){switch(value){case\".\":case\")\":case\"~\":case\"#\":case\"]\":case\"++\":case\"--\":this.prereg=!1;break;default:this.prereg=!0}obj=Object.create(state.syntax[value]||state.syntax[\"(error)\"])}return\"(identifier)\"===type&&((\"return\"===value||\"case\"===value||\"typeof\"===value)&&(this.prereg=!0),_.has(state.syntax,value)&&(obj=Object.create(state.syntax[value]||state.syntax[\"(error)\"]),isReserved(obj,isProperty&&\"(identifier)\"===type)||(obj=null))),obj||(obj=Object.create(state.syntax[type])),obj.identifier=\"(identifier)\"===type,obj.type=obj.type||type,obj.value=value,obj.line=this.line,obj.character=this.char,obj.from=this.from,obj.identifier&&token&&(obj.raw_text=token.text||token.value),token&&token.startLine&&token.startLine!==this.line&&(obj.startLine=token.startLine),token&&token.context&&(obj.context=token.context),token&&token.depth&&(obj.depth=token.depth),token&&token.isUnclosed&&(obj.isUnclosed=token.isUnclosed),isProperty&&obj.identifier&&(obj.isProperty=isProperty),obj.check=checks.check,obj}.bind(this);;){if(!this.input.length)return this.nextLine()?create(\"(endline)\",\"\"):this.exhausted?null:(this.exhausted=!0,create(\"(end)\",\"\"));if(token=this.next(checks))switch(token.type){case Token.StringLiteral:return this.triggerAsync(\"String\",{line:this.line,\"char\":this.char,from:this.from,startLine:token.startLine,startChar:token.startChar,value:token.value,quote:token.quote},checks,function(){return!0}),create(\"(string)\",token.value,null,token);case Token.TemplateHead:return this.trigger(\"TemplateHead\",{line:this.line,\"char\":this.char,from:this.from,startLine:token.startLine,startChar:token.startChar,value:token.value}),create(\"(template)\",token.value,null,token);case Token.TemplateMiddle:return this.trigger(\"TemplateMiddle\",{line:this.line,\"char\":this.char,from:this.from,startLine:token.startLine,startChar:token.startChar,value:token.value}),create(\"(template middle)\",token.value,null,token);case Token.TemplateTail:return this.trigger(\"TemplateTail\",{line:this.line,\"char\":this.char,from:this.from,startLine:token.startLine,startChar:token.startChar,value:token.value}),create(\"(template tail)\",token.value,null,token);case Token.NoSubstTemplate:return this.trigger(\"NoSubstTemplate\",{line:this.line,\"char\":this.char,from:this.from,startLine:token.startLine,startChar:token.startChar,value:token.value}),create(\"(no subst template)\",token.value,null,token);case Token.Identifier:this.triggerAsync(\"Identifier\",{line:this.line,\"char\":this.char,from:this.form,name:token.value,raw_name:token.text,isProperty:\".\"===state.tokens.curr.id},checks,function(){return!0});case Token.Keyword:case Token.NullLiteral:case Token.BooleanLiteral:return create(\"(identifier)\",token.value,\".\"===state.tokens.curr.id,token);case Token.NumericLiteral:return token.isMalformed&&this.trigger(\"warning\",{code:\"W045\",line:this.line,character:this.char,data:[token.value]}),this.triggerAsync(\"warning\",{code:\"W114\",line:this.line,character:this.char,data:[\"0x-\"]},checks,function(){return 16===token.base&&state.jsonMode}),this.triggerAsync(\"warning\",{code:\"W115\",line:this.line,character:this.char},checks,function(){return state.isStrict()&&8===token.base&&token.isLegacy}),this.trigger(\"Number\",{line:this.line,\"char\":this.char,from:this.from,value:token.value,base:token.base,isMalformed:token.malformed}),create(\"(number)\",token.value);case Token.RegExp:return create(\"(regexp)\",token.value);case Token.Comment:if(state.tokens.curr.comment=!0,token.isSpecial)return{id:\"(comment)\",value:token.value,body:token.body,type:token.commentType,isSpecial:token.isSpecial,line:this.line,character:this.char,from:this.from};break;case\"\":break;default:return create(\"(punctuator)\",token.value)}else this.input.length&&(this.trigger(\"error\",{code:\"E024\",line:this.line,character:this.char,data:[this.peek()]}),this.input=\"\")}}},exports.Lexer=Lexer,exports.Context=Context},{\"../data/ascii-identifier-data.js\":\"/node_modules/jshint/data/ascii-identifier-data.js\",\"../lodash\":\"/node_modules/jshint/lodash.js\",\"./reg.js\":\"/node_modules/jshint/src/reg.js\",\"./state.js\":\"/node_modules/jshint/src/state.js\",events:\"/node_modules/browserify/node_modules/events/events.js\"}],\"/node_modules/jshint/src/messages.js\":[function(_dereq_,module,exports){\"use strict\";var _=_dereq_(\"../lodash\"),errors={E001:\"Bad option: '{a}'.\",E002:\"Bad option value.\",E003:\"Expected a JSON value.\",E004:\"Input is neither a string nor an array of strings.\",E005:\"Input is empty.\",E006:\"Unexpected early end of program.\",E007:'Missing \"use strict\" statement.',E008:\"Strict violation.\",E009:\"Option 'validthis' can't be used in a global scope.\",E010:\"'with' is not allowed in strict mode.\",E011:\"'{a}' has already been declared.\",E012:\"const '{a}' is initialized to 'undefined'.\",E013:\"Attempting to override '{a}' which is a constant.\",E014:\"A regular expression literal can be confused with '/='.\",E015:\"Unclosed regular expression.\",E016:\"Invalid regular expression.\",E017:\"Unclosed comment.\",E018:\"Unbegun comment.\",E019:\"Unmatched '{a}'.\",E020:\"Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.\",E021:\"Expected '{a}' and instead saw '{b}'.\",E022:\"Line breaking error '{a}'.\",E023:\"Missing '{a}'.\",E024:\"Unexpected '{a}'.\",E025:\"Missing ':' on a case clause.\",E026:\"Missing '}' to match '{' from line {a}.\",E027:\"Missing ']' to match '[' from line {a}.\",E028:\"Illegal comma.\",E029:\"Unclosed string.\",E030:\"Expected an identifier and instead saw '{a}'.\",E031:\"Bad assignment.\",E032:\"Expected a small integer or 'false' and instead saw '{a}'.\",E033:\"Expected an operator and instead saw '{a}'.\",E034:\"get/set are ES5 features.\",E035:\"Missing property name.\",E036:\"Expected to see a statement and instead saw a block.\",E037:null,E038:null,E039:\"Function declarations are not invocable. Wrap the whole function invocation in parens.\",E040:\"Each value should have its own case label.\",E041:\"Unrecoverable syntax error.\",E042:\"Stopping.\",E043:\"Too many errors.\",E044:null,E045:\"Invalid for each loop.\",E046:\"A yield statement shall be within a generator function (with syntax: `function*`)\",E047:null,E048:\"{a} declaration not directly within block.\",E049:\"A {a} cannot be named '{b}'.\",E050:\"Mozilla acequires the yield expression to be parenthesized here.\",E051:null,E052:\"Unclosed template literal.\",E053:\"Export declaration must be in global scope.\",E054:\"Class properties must be methods. Expected '(' but instead saw '{a}'.\",E055:\"The '{a}' option cannot be set after any executable code.\",E056:\"'{a}' was used before it was declared, which is illegal for '{b}' variables.\",E057:\"Invalid meta property: '{a}.{b}'.\",E058:\"Missing semicolon.\"},warnings={W001:\"'hasOwnProperty' is a really bad name.\",W002:\"Value of '{a}' may be overwritten in IE 8 and earlier.\",W003:\"'{a}' was used before it was defined.\",W004:\"'{a}' is already defined.\",W005:\"A dot following a number can be confused with a decimal point.\",W006:\"Confusing minuses.\",W007:\"Confusing plusses.\",W008:\"A leading decimal point can be confused with a dot: '{a}'.\",W009:\"The array literal notation [] is preferable.\",W010:\"The object literal notation {} is preferable.\",W011:null,W012:null,W013:null,W014:\"Bad line breaking before '{a}'.\",W015:null,W016:\"Unexpected use of '{a}'.\",W017:\"Bad operand.\",W018:\"Confusing use of '{a}'.\",W019:\"Use the isNaN function to compare with NaN.\",W020:\"Read only.\",W021:\"Reassignment of '{a}', which is is a {b}. Use 'var' or 'let' to declare bindings that may change.\",W022:\"Do not assign to the exception parameter.\",W023:\"Expected an identifier in an assignment and instead saw a function invocation.\",W024:\"Expected an identifier and instead saw '{a}' (a reserved word).\",W025:\"Missing name in function declaration.\",W026:\"Inner functions should be listed at the top of the outer function.\",W027:\"Unreachable '{a}' after '{b}'.\",W028:\"Label '{a}' on {b} statement.\",W030:\"Expected an assignment or function call and instead saw an expression.\",W031:\"Do not use 'new' for side effects.\",W032:\"Unnecessary semicolon.\",W033:\"Missing semicolon.\",W034:'Unnecessary directive \"{a}\".',W035:\"Empty block.\",W036:\"Unexpected /*member '{a}'.\",W037:\"'{a}' is a statement label.\",W038:\"'{a}' used out of scope.\",W039:\"'{a}' is not allowed.\",W040:\"Possible strict violation.\",W041:\"Use '{a}' to compare with '{b}'.\",W042:\"Avoid EOL escaping.\",W043:\"Bad escaping of EOL. Use option multistr if needed.\",W044:\"Bad or unnecessary escaping.\",W045:\"Bad number '{a}'.\",W046:\"Don't use extra leading zeros '{a}'.\",W047:\"A trailing decimal point can be confused with a dot: '{a}'.\",W048:\"Unexpected control character in regular expression.\",W049:\"Unexpected escaped character '{a}' in regular expression.\",W050:\"JavaScript URL.\",W051:\"Variables should not be deleted.\",W052:\"Unexpected '{a}'.\",W053:\"Do not use {a} as a constructor.\",W054:\"The Function constructor is a form of eval.\",W055:\"A constructor name should start with an uppercase letter.\",W056:\"Bad constructor.\",W057:\"Weird construction. Is 'new' necessary?\",W058:\"Missing '()' invoking a constructor.\",W059:\"Avoid arguments.{a}.\",W060:\"document.write can be a form of eval.\",W061:\"eval can be harmful.\",W062:\"Wrap an immediate function invocation in parens to assist the reader in understanding that the expression is the result of a function, and not the function itself.\",W063:\"Math is not a function.\",W064:\"Missing 'new' prefix when invoking a constructor.\",W065:\"Missing radix parameter.\",W066:\"Implied eval. Consider passing a function instead of a string.\",W067:\"Bad invocation.\",W068:\"Wrapping non-IIFE function literals in parens is unnecessary.\",W069:\"['{a}'] is better written in dot notation.\",W070:\"Extra comma. (it breaks older versions of IE)\",W071:\"This function has too many statements. ({a})\",W072:\"This function has too many parameters. ({a})\",W073:\"Blocks are nested too deeply. ({a})\",W074:\"This function's cyclomatic complexity is too high. ({a})\",W075:\"Duplicate {a} '{b}'.\",W076:\"Unexpected parameter '{a}' in get {b} function.\",W077:\"Expected a single parameter in set {a} function.\",W078:\"Setter is defined without getter.\",W079:\"Redefinition of '{a}'.\",W080:\"It's not necessary to initialize '{a}' to 'undefined'.\",W081:null,W082:\"Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.\",W083:\"Don't make functions within a loop.\",W084:\"Assignment in conditional expression\",W085:\"Don't use 'with'.\",W086:\"Expected a 'break' statement before '{a}'.\",W087:\"Forgotten 'debugger' statement?\",W088:\"Creating global 'for' variable. Should be 'for (var {a} ...'.\",W089:\"The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.\",W090:\"'{a}' is not a statement label.\",W091:null,W093:\"Did you mean to return a conditional instead of an assignment?\",W094:\"Unexpected comma.\",W095:\"Expected a string and instead saw {a}.\",W096:\"The '{a}' key may produce unexpected results.\",W097:'Use the function form of \"use strict\".',W098:\"'{a}' is defined but never used.\",W099:null,W100:\"This character may get silently deleted by one or more browsers.\",W101:\"Line is too long.\",W102:null,W103:\"The '{a}' property is deprecated.\",W104:\"'{a}' is available in ES{b} (use 'esversion: {b}') or Mozilla JS extensions (use moz).\",W105:\"Unexpected {a} in '{b}'.\",W106:\"Identifier '{a}' is not in camel case.\",W107:\"Script URL.\",W108:\"Strings must use doublequote.\",W109:\"Strings must use singlequote.\",W110:\"Mixed double and single quotes.\",W112:\"Unclosed string.\",W113:\"Control character in string: {a}.\",W114:\"Avoid {a}.\",W115:\"Octal literals are not allowed in strict mode.\",W116:\"Expected '{a}' and instead saw '{b}'.\",W117:\"'{a}' is not defined.\",W118:\"'{a}' is only available in Mozilla JavaScript extensions (use moz option).\",W119:\"'{a}' is only available in ES{b} (use 'esversion: {b}').\",W120:\"You might be leaking a variable ({a}) here.\",W121:\"Extending prototype of native object: '{a}'.\",W122:\"Invalid typeof value '{a}'\",W123:\"'{a}' is already defined in outer scope.\",W124:\"A generator function shall contain a yield statement.\",W125:\"This line contains non-breaking spaces: http://jshint.com/doc/options/#nonbsp\",W126:\"Unnecessary grouping operator.\",W127:\"Unexpected use of a comma operator.\",W128:\"Empty array elements acequire elision=true.\",W129:\"'{a}' is defined in a future version of JavaScript. Use a different variable name to avoid migration issues.\",W130:\"Invalid element after rest element.\",W131:\"Invalid parameter after rest parameter.\",W132:\"`var` declarations are forbidden. Use `let` or `const` instead.\",W133:\"Invalid for-{a} loop left-hand-side: {b}.\",W134:\"The '{a}' option is only available when linting ECMAScript {b} code.\",W135:\"{a} may not be supported by non-browser environments.\",W136:\"'{a}' must be in function scope.\",W137:\"Empty destructuring.\",W138:\"Regular parameters should not come after default parameters.\"},info={I001:\"Comma warnings can be turned off with 'laxcomma'.\",I002:null,I003:\"ES5 option is now set per default\"};exports.errors={},exports.warnings={},exports.info={},_.each(errors,function(desc,code){exports.errors[code]={code:code,desc:desc}}),_.each(warnings,function(desc,code){exports.warnings[code]={code:code,desc:desc}}),_.each(info,function(desc,code){exports.info[code]={code:code,desc:desc}})},{\"../lodash\":\"/node_modules/jshint/lodash.js\"}],\"/node_modules/jshint/src/name-stack.js\":[function(_dereq_,module){\"use strict\";function NameStack(){this._stack=[]}Object.defineProperty(NameStack.prototype,\"length\",{get:function(){return this._stack.length}}),NameStack.prototype.push=function(){this._stack.push(null)},NameStack.prototype.pop=function(){this._stack.pop()},NameStack.prototype.set=function(token){this._stack[this.length-1]=token},NameStack.prototype.infer=function(){var type,nameToken=this._stack[this.length-1],prefix=\"\";return nameToken&&\"class\"!==nameToken.type||(nameToken=this._stack[this.length-2]),nameToken?(type=nameToken.type,\"(string)\"!==type&&\"(number)\"!==type&&\"(identifier)\"!==type&&\"default\"!==type?\"(expression)\":(nameToken.accessorType&&(prefix=nameToken.accessorType+\" \"),prefix+nameToken.value)):\"(empty)\"},module.exports=NameStack},{}],\"/node_modules/jshint/src/options.js\":[function(_dereq_,module,exports){\"use strict\";exports.bool={enforcing:{bitwise:!0,freeze:!0,camelcase:!0,curly:!0,eqeqeq:!0,futurehostile:!0,notypeof:!0,es3:!0,es5:!0,forin:!0,funcscope:!0,immed:!0,iterator:!0,newcap:!0,noarg:!0,nocomma:!0,noempty:!0,nonbsp:!0,nonew:!0,undef:!0,singleGroups:!1,varstmt:!1,enforceall:!1},relaxing:{asi:!0,multistr:!0,debug:!0,boss:!0,evil:!0,globalstrict:!0,plusplus:!0,proto:!0,scripturl:!0,sub:!0,supernew:!0,laxbreak:!0,laxcomma:!0,validthis:!0,withstmt:!0,moz:!0,noyield:!0,eqnull:!0,lastsemic:!0,loopfunc:!0,expr:!0,esnext:!0,elision:!0},environments:{mootools:!0,couch:!0,jasmine:!0,jquery:!0,node:!0,qunit:!0,rhino:!0,shelljs:!0,prototypejs:!0,yui:!0,mocha:!0,module:!0,wsh:!0,worker:!0,nonstandard:!0,browser:!0,browserify:!0,devel:!0,dojo:!0,typed:!0,phantom:!0},obsolete:{onecase:!0,regexp:!0,regexdash:!0}},exports.val={maxlen:!1,indent:!1,maxerr:!1,predef:!1,globals:!1,quotmark:!1,scope:!1,maxstatements:!1,maxdepth:!1,maxparams:!1,maxcomplexity:!1,shadow:!1,strict:!0,unused:!0,latedef:!1,ignore:!1,ignoreDelimiters:!1,esversion:5},exports.inverted={bitwise:!0,forin:!0,newcap:!0,plusplus:!0,regexp:!0,undef:!0,eqeqeq:!0,strict:!0},exports.validNames=Object.keys(exports.val).concat(Object.keys(exports.bool.relaxing)).concat(Object.keys(exports.bool.enforcing)).concat(Object.keys(exports.bool.obsolete)).concat(Object.keys(exports.bool.environments)),exports.renamed={eqeq:\"eqeqeq\",windows:\"wsh\",sloppy:\"strict\"},exports.removed={nomen:!0,onevar:!0,passfail:!0,white:!0,gcl:!0,smarttabs:!0,trailing:!0},exports.noenforceall={varstmt:!0,strict:!0}},{}],\"/node_modules/jshint/src/reg.js\":[function(_dereq_,module,exports){\"use strict\";exports.unsafeString=/@cc|<\\/?|script|\\]\\s*\\]|<\\s*!|&lt/i,exports.unsafeChars=/[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/,exports.needEsc=/[\\u0000-\\u001f&<\"\\/\\\\\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/,exports.needEscGlobal=/[\\u0000-\\u001f&<\"\\/\\\\\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,exports.starSlash=/\\*\\//,exports.identifier=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,exports.javascriptURL=/^(?:javascript|jscript|ecmascript|vbscript|livescript)\\s*:/i,exports.fallsThrough=/^\\s*falls?\\sthrough\\s*$/,exports.maxlenException=/^(?:(?:\\/\\/|\\/\\*|\\*) ?)?[^ ]+$/},{}],\"/node_modules/jshint/src/scope-manager.js\":[function(_dereq_,module){\"use strict\";var _=_dereq_(\"../lodash\"),events=_dereq_(\"events\"),marker={},scopeManager=function(state,predefined,exported,declared){function _newScope(type){_current={\"(labels)\":Object.create(null),\"(usages)\":Object.create(null),\"(breakLabels)\":Object.create(null),\"(parent)\":_current,\"(type)\":type,\"(params)\":\"functionparams\"===type||\"catchparams\"===type?[]:null},_scopeStack.push(_current)}function warning(code,token){emitter.emit(\"warning\",{code:code,token:token,data:_.slice(arguments,2)})}function error(code,token){emitter.emit(\"warning\",{code:code,token:token,data:_.slice(arguments,2)})}function _setupUsages(labelName){_current[\"(usages)\"][labelName]||(_current[\"(usages)\"][labelName]={\"(modified)\":[],\"(reassigned)\":[],\"(tokens)\":[]})}function _checkForUnused(){if(\"functionparams\"===_current[\"(type)\"])return _checkParams(),void 0;var curentLabels=_current[\"(labels)\"];for(var labelName in curentLabels)curentLabels[labelName]&&\"exception\"!==curentLabels[labelName][\"(type)\"]&&curentLabels[labelName][\"(unused)\"]&&_warnUnused(labelName,curentLabels[labelName][\"(token)\"],\"var\")}function _checkParams(){var params=_current[\"(params)\"];if(params)for(var unused_opt,param=params.pop();param;){var label=_current[\"(labels)\"][param];if(unused_opt=_getUnusedOption(state.funct[\"(unusedOption)\"]),\"undefined\"===param)return;if(label[\"(unused)\"])_warnUnused(param,label[\"(token)\"],\"param\",state.funct[\"(unusedOption)\"]);else if(\"last-param\"===unused_opt)return;param=params.pop()}}function _getLabel(labelName){for(var i=_scopeStack.length-1;i>=0;--i){var scopeLabels=_scopeStack[i][\"(labels)\"];if(scopeLabels[labelName])return scopeLabels}}function usedSoFarInCurrentFunction(labelName){for(var i=_scopeStack.length-1;i>=0;i--){var current=_scopeStack[i];if(current[\"(usages)\"][labelName])return current[\"(usages)\"][labelName];if(current===_currentFunctBody)break}return!1}function _checkOuterShadow(labelName,token){if(\"outer\"===state.option.shadow)for(var isGlobal=\"global\"===_currentFunctBody[\"(type)\"],isNewFunction=\"functionparams\"===_current[\"(type)\"],outsideCurrentFunction=!isGlobal,i=0;_scopeStack.length>i;i++){var stackItem=_scopeStack[i];isNewFunction||_scopeStack[i+1]!==_currentFunctBody||(outsideCurrentFunction=!1),outsideCurrentFunction&&stackItem[\"(labels)\"][labelName]&&warning(\"W123\",token,labelName),stackItem[\"(breakLabels)\"][labelName]&&warning(\"W123\",token,labelName)}}function _latedefWarning(type,labelName,token){state.option.latedef&&(state.option.latedef===!0&&\"function\"===type||\"function\"!==type)&&warning(\"W003\",token,labelName)}var _current,_scopeStack=[];_newScope(\"global\"),_current[\"(predefined)\"]=predefined;var _currentFunctBody=_current,usedPredefinedAndGlobals=Object.create(null),impliedGlobals=Object.create(null),unuseds=[],emitter=new events.EventEmitter,_getUnusedOption=function(unused_opt){return void 0===unused_opt&&(unused_opt=state.option.unused),unused_opt===!0&&(unused_opt=\"last-param\"),unused_opt},_warnUnused=function(name,tkn,type,unused_opt){var line=tkn.line,chr=tkn.from,raw_name=tkn.raw_text||name;unused_opt=_getUnusedOption(unused_opt);var warnable_types={vars:[\"var\"],\"last-param\":[\"var\",\"param\"],strict:[\"var\",\"param\",\"last-param\"]};unused_opt&&warnable_types[unused_opt]&&-1!==warnable_types[unused_opt].indexOf(type)&&warning(\"W098\",{line:line,from:chr},raw_name),(unused_opt||\"var\"===type)&&unuseds.push({name:name,line:line,character:chr})},scopeManagerInst={on:function(names,listener){names.split(\" \").forEach(function(name){emitter.on(name,listener)})},isPredefined:function(labelName){return!this.has(labelName)&&_.has(_scopeStack[0][\"(predefined)\"],labelName)},stack:function(type){var previousScope=_current;_newScope(type),type||\"functionparams\"!==previousScope[\"(type)\"]||(_current[\"(isFuncBody)\"]=!0,_current[\"(context)\"]=_currentFunctBody,_currentFunctBody=_current)},unstack:function(){var i,j,subScope=_scopeStack.length>1?_scopeStack[_scopeStack.length-2]:null,isUnstackingFunctionBody=_current===_currentFunctBody,isUnstackingFunctionParams=\"functionparams\"===_current[\"(type)\"],isUnstackingFunctionOuter=\"functionouter\"===_current[\"(type)\"],currentUsages=_current[\"(usages)\"],currentLabels=_current[\"(labels)\"],usedLabelNameList=Object.keys(currentUsages);for(currentUsages.__proto__&&-1===usedLabelNameList.indexOf(\"__proto__\")&&usedLabelNameList.push(\"__proto__\"),i=0;usedLabelNameList.length>i;i++){var usedLabelName=usedLabelNameList[i],usage=currentUsages[usedLabelName],usedLabel=currentLabels[usedLabelName];if(usedLabel){var usedLabelType=usedLabel[\"(type)\"];if(usedLabel[\"(useOutsideOfScope)\"]&&!state.option.funcscope){var usedTokens=usage[\"(tokens)\"];if(usedTokens)for(j=0;usedTokens.length>j;j++)usedLabel[\"(function)\"]===usedTokens[j][\"(function)\"]&&error(\"W038\",usedTokens[j],usedLabelName)}if(_current[\"(labels)\"][usedLabelName][\"(unused)\"]=!1,\"const\"===usedLabelType&&usage[\"(modified)\"])for(j=0;usage[\"(modified)\"].length>j;j++)error(\"E013\",usage[\"(modified)\"][j],usedLabelName);if((\"function\"===usedLabelType||\"class\"===usedLabelType)&&usage[\"(reassigned)\"])for(j=0;usage[\"(reassigned)\"].length>j;j++)error(\"W021\",usage[\"(reassigned)\"][j],usedLabelName,usedLabelType)}else if(isUnstackingFunctionOuter&&(state.funct[\"(isCapturing)\"]=!0),subScope)if(subScope[\"(usages)\"][usedLabelName]){var subScopeUsage=subScope[\"(usages)\"][usedLabelName];subScopeUsage[\"(modified)\"]=subScopeUsage[\"(modified)\"].concat(usage[\"(modified)\"]),subScopeUsage[\"(tokens)\"]=subScopeUsage[\"(tokens)\"].concat(usage[\"(tokens)\"]),subScopeUsage[\"(reassigned)\"]=subScopeUsage[\"(reassigned)\"].concat(usage[\"(reassigned)\"]),subScopeUsage[\"(onlyUsedSubFunction)\"]=!1}else subScope[\"(usages)\"][usedLabelName]=usage,isUnstackingFunctionBody&&(subScope[\"(usages)\"][usedLabelName][\"(onlyUsedSubFunction)\"]=!0);else if(\"boolean\"==typeof _current[\"(predefined)\"][usedLabelName]){if(delete declared[usedLabelName],usedPredefinedAndGlobals[usedLabelName]=marker,_current[\"(predefined)\"][usedLabelName]===!1&&usage[\"(reassigned)\"])for(j=0;usage[\"(reassigned)\"].length>j;j++)warning(\"W020\",usage[\"(reassigned)\"][j])}else if(usage[\"(tokens)\"])for(j=0;usage[\"(tokens)\"].length>j;j++){var undefinedToken=usage[\"(tokens)\"][j];undefinedToken.forgiveUndef||(state.option.undef&&!undefinedToken.ignoreUndef&&warning(\"W117\",undefinedToken,usedLabelName),impliedGlobals[usedLabelName]?impliedGlobals[usedLabelName].line.push(undefinedToken.line):impliedGlobals[usedLabelName]={name:usedLabelName,line:[undefinedToken.line]})}}if(subScope||Object.keys(declared).forEach(function(labelNotUsed){_warnUnused(labelNotUsed,declared[labelNotUsed],\"var\")}),subScope&&!isUnstackingFunctionBody&&!isUnstackingFunctionParams&&!isUnstackingFunctionOuter){var labelNames=Object.keys(currentLabels);for(i=0;labelNames.length>i;i++){var defLabelName=labelNames[i];currentLabels[defLabelName][\"(blockscoped)\"]||\"exception\"===currentLabels[defLabelName][\"(type)\"]||this.funct.has(defLabelName,{excludeCurrent:!0})||(subScope[\"(labels)\"][defLabelName]=currentLabels[defLabelName],\"global\"!==_currentFunctBody[\"(type)\"]&&(subScope[\"(labels)\"][defLabelName][\"(useOutsideOfScope)\"]=!0),delete currentLabels[defLabelName])}}_checkForUnused(),_scopeStack.pop(),isUnstackingFunctionBody&&(_currentFunctBody=_scopeStack[_.findLastIndex(_scopeStack,function(scope){return scope[\"(isFuncBody)\"]||\"global\"===scope[\"(type)\"]})]),_current=subScope},addParam:function(labelName,token,type){if(type=type||\"param\",\"exception\"===type){var previouslyDefinedLabelType=this.funct.labeltype(labelName);previouslyDefinedLabelType&&\"exception\"!==previouslyDefinedLabelType&&(state.option.node||warning(\"W002\",state.tokens.next,labelName))}if(_.has(_current[\"(labels)\"],labelName)?_current[\"(labels)\"][labelName].duplicated=!0:(_checkOuterShadow(labelName,token,type),_current[\"(labels)\"][labelName]={\"(type)\":type,\"(token)\":token,\"(unused)\":!0},_current[\"(params)\"].push(labelName)),_.has(_current[\"(usages)\"],labelName)){var usage=_current[\"(usages)\"][labelName];usage[\"(onlyUsedSubFunction)\"]?_latedefWarning(type,labelName,token):warning(\"E056\",token,labelName,type)}},validateParams:function(){if(\"global\"!==_currentFunctBody[\"(type)\"]){var isStrict=state.isStrict(),currentFunctParamScope=_currentFunctBody[\"(parent)\"];currentFunctParamScope[\"(params)\"]&&currentFunctParamScope[\"(params)\"].forEach(function(labelName){var label=currentFunctParamScope[\"(labels)\"][labelName];label&&label.duplicated&&(isStrict?warning(\"E011\",label[\"(token)\"],labelName):state.option.shadow!==!0&&warning(\"W004\",label[\"(token)\"],labelName))})}},getUsedOrDefinedGlobals:function(){var list=Object.keys(usedPredefinedAndGlobals);return usedPredefinedAndGlobals.__proto__===marker&&-1===list.indexOf(\"__proto__\")&&list.push(\"__proto__\"),list},getImpliedGlobals:function(){var values=_.values(impliedGlobals),hasProto=!1;return impliedGlobals.__proto__&&(hasProto=values.some(function(value){return\"__proto__\"===value.name}),hasProto||values.push(impliedGlobals.__proto__)),values},getUnuseds:function(){return unuseds},has:function(labelName){return Boolean(_getLabel(labelName))},labeltype:function(labelName){var scopeLabels=_getLabel(labelName);return scopeLabels?scopeLabels[labelName][\"(type)\"]:null},addExported:function(labelName){var globalLabels=_scopeStack[0][\"(labels)\"];if(_.has(declared,labelName))delete declared[labelName];else if(_.has(globalLabels,labelName))globalLabels[labelName][\"(unused)\"]=!1;else{for(var i=1;_scopeStack.length>i;i++){var scope=_scopeStack[i];if(scope[\"(type)\"])break;if(_.has(scope[\"(labels)\"],labelName)&&!scope[\"(labels)\"][labelName][\"(blockscoped)\"])return scope[\"(labels)\"][labelName][\"(unused)\"]=!1,void 0}exported[labelName]=!0}},setExported:function(labelName,token){this.block.use(labelName,token)\n},addlabel:function(labelName,opts){var type=opts.type,token=opts.token,isblockscoped=\"let\"===type||\"const\"===type||\"class\"===type,isexported=\"global\"===(isblockscoped?_current:_currentFunctBody)[\"(type)\"]&&_.has(exported,labelName);if(_checkOuterShadow(labelName,token,type),isblockscoped){var declaredInCurrentScope=_current[\"(labels)\"][labelName];if(declaredInCurrentScope||_current!==_currentFunctBody||\"global\"===_current[\"(type)\"]||(declaredInCurrentScope=!!_currentFunctBody[\"(parent)\"][\"(labels)\"][labelName]),!declaredInCurrentScope&&_current[\"(usages)\"][labelName]){var usage=_current[\"(usages)\"][labelName];usage[\"(onlyUsedSubFunction)\"]?_latedefWarning(type,labelName,token):warning(\"E056\",token,labelName,type)}declaredInCurrentScope?warning(\"E011\",token,labelName):\"outer\"===state.option.shadow&&scopeManagerInst.funct.has(labelName)&&warning(\"W004\",token,labelName),scopeManagerInst.block.add(labelName,type,token,!isexported)}else{var declaredInCurrentFunctionScope=scopeManagerInst.funct.has(labelName);!declaredInCurrentFunctionScope&&usedSoFarInCurrentFunction(labelName)&&_latedefWarning(type,labelName,token),scopeManagerInst.funct.has(labelName,{onlyBlockscoped:!0})?warning(\"E011\",token,labelName):state.option.shadow!==!0&&declaredInCurrentFunctionScope&&\"__proto__\"!==labelName&&\"global\"!==_currentFunctBody[\"(type)\"]&&warning(\"W004\",token,labelName),scopeManagerInst.funct.add(labelName,type,token,!isexported),\"global\"===_currentFunctBody[\"(type)\"]&&(usedPredefinedAndGlobals[labelName]=marker)}},funct:{labeltype:function(labelName,options){for(var onlyBlockscoped=options&&options.onlyBlockscoped,excludeParams=options&&options.excludeParams,currentScopeIndex=_scopeStack.length-(options&&options.excludeCurrent?2:1),i=currentScopeIndex;i>=0;i--){var current=_scopeStack[i];if(current[\"(labels)\"][labelName]&&(!onlyBlockscoped||current[\"(labels)\"][labelName][\"(blockscoped)\"]))return current[\"(labels)\"][labelName][\"(type)\"];var scopeCheck=excludeParams?_scopeStack[i-1]:current;if(scopeCheck&&\"functionparams\"===scopeCheck[\"(type)\"])return null}return null},hasBreakLabel:function(labelName){for(var i=_scopeStack.length-1;i>=0;i--){var current=_scopeStack[i];if(current[\"(breakLabels)\"][labelName])return!0;if(\"functionparams\"===current[\"(type)\"])return!1}return!1},has:function(labelName,options){return Boolean(this.labeltype(labelName,options))},add:function(labelName,type,tok,unused){_current[\"(labels)\"][labelName]={\"(type)\":type,\"(token)\":tok,\"(blockscoped)\":!1,\"(function)\":_currentFunctBody,\"(unused)\":unused}}},block:{isGlobal:function(){return\"global\"===_current[\"(type)\"]},use:function(labelName,token){var paramScope=_currentFunctBody[\"(parent)\"];paramScope&&paramScope[\"(labels)\"][labelName]&&\"param\"===paramScope[\"(labels)\"][labelName][\"(type)\"]&&(scopeManagerInst.funct.has(labelName,{excludeParams:!0,onlyBlockscoped:!0})||(paramScope[\"(labels)\"][labelName][\"(unused)\"]=!1)),token&&(state.ignored.W117||state.option.undef===!1)&&(token.ignoreUndef=!0),_setupUsages(labelName),token&&(token[\"(function)\"]=_currentFunctBody,_current[\"(usages)\"][labelName][\"(tokens)\"].push(token))},reassign:function(labelName,token){this.modify(labelName,token),_current[\"(usages)\"][labelName][\"(reassigned)\"].push(token)},modify:function(labelName,token){_setupUsages(labelName),_current[\"(usages)\"][labelName][\"(modified)\"].push(token)},add:function(labelName,type,tok,unused){_current[\"(labels)\"][labelName]={\"(type)\":type,\"(token)\":tok,\"(blockscoped)\":!0,\"(unused)\":unused}},addBreakLabel:function(labelName,opts){var token=opts.token;scopeManagerInst.funct.hasBreakLabel(labelName)?warning(\"E011\",token,labelName):\"outer\"===state.option.shadow&&(scopeManagerInst.funct.has(labelName)?warning(\"W004\",token,labelName):_checkOuterShadow(labelName,token)),_current[\"(breakLabels)\"][labelName]=token}}};return scopeManagerInst};module.exports=scopeManager},{\"../lodash\":\"/node_modules/jshint/lodash.js\",events:\"/node_modules/browserify/node_modules/events/events.js\"}],\"/node_modules/jshint/src/state.js\":[function(_dereq_,module,exports){\"use strict\";var NameStack=_dereq_(\"./name-stack.js\"),state={syntax:{},isStrict:function(){return this.directive[\"use strict\"]||this.inClassBody||this.option.module||\"implied\"===this.option.strict},inMoz:function(){return this.option.moz},inES6:function(){return this.option.moz||this.option.esversion>=6},inES5:function(strict){return strict?!(this.option.esversion&&5!==this.option.esversion||this.option.moz):!this.option.esversion||this.option.esversion>=5||this.option.moz},reset:function(){this.tokens={prev:null,next:null,curr:null},this.option={},this.funct=null,this.ignored={},this.directive={},this.jsonMode=!1,this.jsonWarnings=[],this.lines=[],this.tab=\"\",this.cache={},this.ignoredLines={},this.forinifcheckneeded=!1,this.nameStack=new NameStack,this.inClassBody=!1}};exports.state=state},{\"./name-stack.js\":\"/node_modules/jshint/src/name-stack.js\"}],\"/node_modules/jshint/src/style.js\":[function(_dereq_,module,exports){\"use strict\";exports.register=function(linter){linter.on(\"Identifier\",function(data){linter.getOption(\"proto\")||\"__proto__\"===data.name&&linter.warn(\"W103\",{line:data.line,\"char\":data.char,data:[data.name,\"6\"]})}),linter.on(\"Identifier\",function(data){linter.getOption(\"iterator\")||\"__iterator__\"===data.name&&linter.warn(\"W103\",{line:data.line,\"char\":data.char,data:[data.name]})}),linter.on(\"Identifier\",function(data){linter.getOption(\"camelcase\")&&data.name.replace(/^_+|_+$/g,\"\").indexOf(\"_\")>-1&&!data.name.match(/^[A-Z0-9_]*$/)&&linter.warn(\"W106\",{line:data.line,\"char\":data.from,data:[data.name]})}),linter.on(\"String\",function(data){var code,quotmark=linter.getOption(\"quotmark\");quotmark&&(\"single\"===quotmark&&\"'\"!==data.quote&&(code=\"W109\"),\"double\"===quotmark&&'\"'!==data.quote&&(code=\"W108\"),quotmark===!0&&(linter.getCache(\"quotmark\")||linter.setCache(\"quotmark\",data.quote),linter.getCache(\"quotmark\")!==data.quote&&(code=\"W110\")),code&&linter.warn(code,{line:data.line,\"char\":data.char}))}),linter.on(\"Number\",function(data){\".\"===data.value.charAt(0)&&linter.warn(\"W008\",{line:data.line,\"char\":data.char,data:[data.value]}),\".\"===data.value.substr(data.value.length-1)&&linter.warn(\"W047\",{line:data.line,\"char\":data.char,data:[data.value]}),/^00+/.test(data.value)&&linter.warn(\"W046\",{line:data.line,\"char\":data.char,data:[data.value]})}),linter.on(\"String\",function(data){var re=/^(?:javascript|jscript|ecmascript|vbscript|livescript)\\s*:/i;linter.getOption(\"scripturl\")||re.test(data.value)&&linter.warn(\"W107\",{line:data.line,\"char\":data.char})})}},{}],\"/node_modules/jshint/src/vars.js\":[function(_dereq_,module,exports){\"use strict\";exports.reservedVars={arguments:!1,NaN:!1},exports.ecmaIdentifiers={3:{Array:!1,Boolean:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,eval:!1,EvalError:!1,Function:!1,hasOwnProperty:!1,isFinite:!1,isNaN:!1,Math:!1,Number:!1,Object:!1,parseInt:!1,parseFloat:!1,RangeError:!1,ReferenceError:!1,RegExp:!1,String:!1,SyntaxError:!1,TypeError:!1,URIError:!1},5:{JSON:!1},6:{Map:!1,Promise:!1,Proxy:!1,Reflect:!1,Set:!1,Symbol:!1,WeakMap:!1,WeakSet:!1}},exports.browser={Audio:!1,Blob:!1,addEventListener:!1,applicationCache:!1,atob:!1,blur:!1,btoa:!1,cancelAnimationFrame:!1,CanvasGradient:!1,CanvasPattern:!1,CanvasRenderingContext2D:!1,CSS:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,Comment:!1,CustomEvent:!1,DOMParser:!1,defaultStatus:!1,Document:!1,document:!1,DocumentFragment:!1,Element:!1,ElementTimeControl:!1,Event:!1,event:!1,fetch:!1,FileReader:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLCollection:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTemplateElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Image:!1,Intl:!1,length:!1,localStorage:!1,location:!1,matchMedia:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,MouseEvent:!1,moveBy:!1,moveTo:!1,MutationObserver:!1,name:!1,Node:!1,NodeFilter:!1,NodeList:!1,Notification:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,performance:!1,print:!1,Range:!1,requestAnimationFrame:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,SVGAElement:!1,SVGAltGlyphDefElement:!1,SVGAltGlyphElement:!1,SVGAltGlyphItemElement:!1,SVGAngle:!1,SVGAnimateColorElement:!1,SVGAnimateElement:!1,SVGAnimateMotionElement:!1,SVGAnimateTransformElement:!1,SVGAnimatedAngle:!1,SVGAnimatedBoolean:!1,SVGAnimatedEnumeration:!1,SVGAnimatedInteger:!1,SVGAnimatedLength:!1,SVGAnimatedLengthList:!1,SVGAnimatedNumber:!1,SVGAnimatedNumberList:!1,SVGAnimatedPathData:!1,SVGAnimatedPoints:!1,SVGAnimatedPreserveAspectRatio:!1,SVGAnimatedRect:!1,SVGAnimatedString:!1,SVGAnimatedTransformList:!1,SVGAnimationElement:!1,SVGCSSRule:!1,SVGCircleElement:!1,SVGClipPathElement:!1,SVGColor:!1,SVGColorProfileElement:!1,SVGColorProfileRule:!1,SVGComponentTransferFunctionElement:!1,SVGCursorElement:!1,SVGDefsElement:!1,SVGDescElement:!1,SVGDocument:!1,SVGElement:!1,SVGElementInstance:!1,SVGElementInstanceList:!1,SVGEllipseElement:!1,SVGExternalResourcesRequired:!1,SVGFEBlendElement:!1,SVGFEColorMatrixElement:!1,SVGFEComponentTransferElement:!1,SVGFECompositeElement:!1,SVGFEConvolveMatrixElement:!1,SVGFEDiffuseLightingElement:!1,SVGFEDisplacementMapElement:!1,SVGFEDistantLightElement:!1,SVGFEFloodElement:!1,SVGFEFuncAElement:!1,SVGFEFuncBElement:!1,SVGFEFuncGElement:!1,SVGFEFuncRElement:!1,SVGFEGaussianBlurElement:!1,SVGFEImageElement:!1,SVGFEMergeElement:!1,SVGFEMergeNodeElement:!1,SVGFEMorphologyElement:!1,SVGFEOffsetElement:!1,SVGFEPointLightElement:!1,SVGFESpecularLightingElement:!1,SVGFESpotLightElement:!1,SVGFETileElement:!1,SVGFETurbulenceElement:!1,SVGFilterElement:!1,SVGFilterPrimitiveStandardAttributes:!1,SVGFitToViewBox:!1,SVGFontElement:!1,SVGFontFaceElement:!1,SVGFontFaceFormatElement:!1,SVGFontFaceNameElement:!1,SVGFontFaceSrcElement:!1,SVGFontFaceUriElement:!1,SVGForeignObjectElement:!1,SVGGElement:!1,SVGGlyphElement:!1,SVGGlyphRefElement:!1,SVGGradientElement:!1,SVGHKernElement:!1,SVGICCColor:!1,SVGImageElement:!1,SVGLangSpace:!1,SVGLength:!1,SVGLengthList:!1,SVGLineElement:!1,SVGLinearGradientElement:!1,SVGLocatable:!1,SVGMPathElement:!1,SVGMarkerElement:!1,SVGMaskElement:!1,SVGMatrix:!1,SVGMetadataElement:!1,SVGMissingGlyphElement:!1,SVGNumber:!1,SVGNumberList:!1,SVGPaint:!1,SVGPathElement:!1,SVGPathSeg:!1,SVGPathSegArcAbs:!1,SVGPathSegArcRel:!1,SVGPathSegClosePath:!1,SVGPathSegCurvetoCubicAbs:!1,SVGPathSegCurvetoCubicRel:!1,SVGPathSegCurvetoCubicSmoothAbs:!1,SVGPathSegCurvetoCubicSmoothRel:!1,SVGPathSegCurvetoQuadraticAbs:!1,SVGPathSegCurvetoQuadraticRel:!1,SVGPathSegCurvetoQuadraticSmoothAbs:!1,SVGPathSegCurvetoQuadraticSmoothRel:!1,SVGPathSegLinetoAbs:!1,SVGPathSegLinetoHorizontalAbs:!1,SVGPathSegLinetoHorizontalRel:!1,SVGPathSegLinetoRel:!1,SVGPathSegLinetoVerticalAbs:!1,SVGPathSegLinetoVerticalRel:!1,SVGPathSegList:!1,SVGPathSegMovetoAbs:!1,SVGPathSegMovetoRel:!1,SVGPatternElement:!1,SVGPoint:!1,SVGPointList:!1,SVGPolygonElement:!1,SVGPolylineElement:!1,SVGPreserveAspectRatio:!1,SVGRadialGradientElement:!1,SVGRect:!1,SVGRectElement:!1,SVGRenderingIntent:!1,SVGSVGElement:!1,SVGScriptElement:!1,SVGSetElement:!1,SVGStopElement:!1,SVGStringList:!1,SVGStylable:!1,SVGStyleElement:!1,SVGSwitchElement:!1,SVGSymbolElement:!1,SVGTRefElement:!1,SVGTSpanElement:!1,SVGTests:!1,SVGTextContentElement:!1,SVGTextElement:!1,SVGTextPathElement:!1,SVGTextPositioningElement:!1,SVGTitleElement:!1,SVGTransform:!1,SVGTransformList:!1,SVGTransformable:!1,SVGURIReference:!1,SVGUnitTypes:!1,SVGUseElement:!1,SVGVKernElement:!1,SVGViewElement:!1,SVGViewSpec:!1,SVGZoomAndPan:!1,Text:!1,TextDecoder:!1,TextEncoder:!1,TimeEvent:!1,top:!1,URL:!1,WebGLActiveInfo:!1,WebGLBuffer:!1,WebGLContextEvent:!1,WebGLFramebuffer:!1,WebGLProgram:!1,WebGLRenderbuffer:!1,WebGLRenderingContext:!1,WebGLShader:!1,WebGLShaderPrecisionFormat:!1,WebGLTexture:!1,WebGLUniformLocation:!1,WebSocket:!1,window:!1,Window:!1,Worker:!1,XDomainRequest:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},exports.devel={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},exports.worker={importScripts:!0,postMessage:!0,self:!0,FileReaderSync:!0},exports.nonstandard={escape:!1,unescape:!1},exports.couch={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},exports.node={__filename:!1,__dirname:!1,GLOBAL:!1,global:!1,module:!1,acequire:!1,Buffer:!0,console:!0,exports:!0,process:!0,setTimeout:!0,clearTimeout:!0,setInterval:!0,clearInterval:!0,setImmediate:!0,clearImmediate:!0},exports.browserify={__filename:!1,__dirname:!1,global:!1,module:!1,acequire:!1,Buffer:!0,exports:!0,process:!0},exports.phantom={phantom:!0,acequire:!0,WebPage:!0,console:!0,exports:!0},exports.qunit={asyncTest:!1,deepEqual:!1,equal:!1,expect:!1,module:!1,notDeepEqual:!1,notEqual:!1,notPropEqual:!1,notStrictEqual:!1,ok:!1,propEqual:!1,QUnit:!1,raises:!1,start:!1,stop:!1,strictEqual:!1,test:!1,\"throws\":!1},exports.rhino={defineClass:!1,deserialize:!1,gc:!1,help:!1,importClass:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,Packages:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},exports.shelljs={target:!1,echo:!1,exit:!1,cd:!1,pwd:!1,ls:!1,find:!1,cp:!1,rm:!1,mv:!1,mkdir:!1,test:!1,cat:!1,sed:!1,grep:!1,which:!1,dirs:!1,pushd:!1,popd:!1,env:!1,exec:!1,chmod:!1,config:!1,error:!1,tempdir:!1},exports.typed={ArrayBuffer:!1,ArrayBufferView:!1,DataView:!1,Float32Array:!1,Float64Array:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,Uint8ClampedArray:!1},exports.wsh={ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0},exports.dojo={dojo:!1,dijit:!1,dojox:!1,define:!1,require:!1},exports.jquery={$:!1,jQuery:!1},exports.mootools={$:!1,$$:!1,Asset:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMEvent:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,IFrame:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1},exports.prototypejs={$:!1,$$:!1,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Class:!1,Enumerable:!1,Element:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},exports.yui={YUI:!1,Y:!1,YUI_config:!1},exports.mocha={mocha:!1,describe:!1,xdescribe:!1,it:!1,xit:!1,context:!1,xcontext:!1,before:!1,after:!1,beforeEach:!1,afterEach:!1,suite:!1,test:!1,setup:!1,teardown:!1,suiteSetup:!1,suiteTeardown:!1},exports.jasmine={jasmine:!1,describe:!1,xdescribe:!1,it:!1,xit:!1,beforeEach:!1,afterEach:!1,setFixtures:!1,loadFixtures:!1,spyOn:!1,expect:!1,runs:!1,waitsFor:!1,waits:!1,beforeAll:!1,afterAll:!1,fail:!1,fdescribe:!1,fit:!1,pending:!1}},{}]},{},[\"/node_modules/jshint/src/jshint.js\"])}),ace.define(\"ace/mode/javascript_worker\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/worker/mirror\",\"ace/mode/javascript/jshint\"],function(acequire,exports,module){\"use strict\";function startRegex(arr){return RegExp(\"^(\"+arr.join(\"|\")+\")\")}var oop=acequire(\"../lib/oop\"),Mirror=acequire(\"../worker/mirror\").Mirror,lint=acequire(\"./javascript/jshint\").JSHINT,disabledWarningsRe=startRegex([\"Bad for in variable '(.+)'.\",'Missing \"use strict\"']),errorsRe=startRegex([\"Unexpected\",\"Expected \",\"Confusing (plus|minus)\",\"\\\\{a\\\\} unterminated regular expression\",\"Unclosed \",\"Unmatched \",\"Unbegun comment\",\"Bad invocation\",\"Missing space after\",\"Missing operator at\"]),infoRe=startRegex([\"Expected an assignment\",\"Bad escapement of EOL\",\"Unexpected comma\",\"Unexpected space\",\"Missing radix parameter.\",\"A leading decimal point can\",\"\\\\['{a}'\\\\] is better written in dot notation.\",\"'{a}' used out of scope\"]),JavaScriptWorker=exports.JavaScriptWorker=function(sender){Mirror.call(this,sender),this.setTimeout(500),this.setOptions()};oop.inherits(JavaScriptWorker,Mirror),function(){this.setOptions=function(options){this.options=options||{esnext:!0,moz:!0,devel:!0,browser:!0,node:!0,laxcomma:!0,laxbreak:!0,lastsemic:!0,onevar:!1,passfail:!1,maxerr:100,expr:!0,multistr:!0,globalstrict:!0},this.doc.getValue()&&this.deferredUpdate.schedule(100)},this.changeOptions=function(newOptions){oop.mixin(this.options,newOptions),this.doc.getValue()&&this.deferredUpdate.schedule(100)},this.isValidJS=function(str){try{eval(\"throw 0;\"+str)}catch(e){if(0===e)return!0}return!1},this.onUpdate=function(){var value=this.doc.getValue();if(value=value.replace(/^#!.*\\n/,\"\\n\"),!value)return this.sender.emit(\"annotate\",[]);var errors=[],maxErrorLevel=this.isValidJS(value)?\"warning\":\"error\";lint(value,this.options,this.options.globals);for(var results=lint.errors,errorAdded=!1,i=0;results.length>i;i++){var error=results[i];if(error){var raw=error.raw,type=\"warning\";if(\"Missing semicolon.\"==raw){var str=error.evidence.substr(error.character);str=str.charAt(str.search(/\\S/)),\"error\"==maxErrorLevel&&str&&/[\\w\\d{(['\"]/.test(str)?(error.reason='Missing \";\" before statement',type=\"error\"):type=\"info\"}else{if(disabledWarningsRe.test(raw))continue;infoRe.test(raw)?type=\"info\":errorsRe.test(raw)?(errorAdded=!0,type=maxErrorLevel):\"'{a}' is not defined.\"==raw?type=\"warning\":\"'{a}' is defined but never used.\"==raw&&(type=\"info\")}errors.push({row:error.line-1,column:error.character-1,text:error.reason,type:type,raw:raw})}}this.sender.emit(\"annotate\",errors)}}.call(JavaScriptWorker.prototype)}),ace.define(\"ace/lib/es5-shim\",[\"require\",\"exports\",\"module\"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,\"sentinel\",{}),\"sentinel\"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(\"function\"!=typeof target)throw new TypeError(\"Function.prototype.bind called on incompatible \"+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,\"__defineGetter__\"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,\"XXX\"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return\"[object Array]\"==_toString(obj)});var boxedString=Object(\"a\"),splitString=\"a\"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,result=[],thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");if(!length&&1==arguments.length)throw new TypeError(\"reduce of empty array with no initial value\");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError(\"reduce of empty array with no initial value\")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");if(!length&&1==arguments.length)throw new TypeError(\"reduceRight of empty array with no initial value\");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError(\"reduceRight of empty array with no initial value\")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT=\"Object.getOwnPropertyDescriptor called on a non-object: \";Object.getOwnPropertyDescriptor=function(object,property){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if(\"object\"!=typeof prototype)throw new TypeError(\"typeof prototype[\"+typeof prototype+\"] != 'object'\");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=\"undefined\"==typeof document||doesDefinePropertyWork(document.createElement(\"div\"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR=\"Property description must be an object: \",ERR_NON_OBJECT_TARGET=\"Object.defineProperty called on non-object: \",ERR_ACCESSORS_NOT_SUPPORTED=\"getters & setters can not be defined on this javascript engine\";Object.defineProperty=function(object,property,descriptor){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(\"object\"!=typeof descriptor&&\"function\"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,\"value\"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,\"get\")&&defineGetter(object,property,descriptor.get),owns(descriptor,\"set\")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return\"function\"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name=\"\";owns(object,name);)name+=\"?\";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(\"Object.keys called on a non-object\");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws=\"\t\\n\u000b\\f\\r   ᠎             　\\u2028\\u2029﻿\";if(!String.prototype.trim||ws.trim()){ws=\"[\"+ws+\"]\";var trimBeginRegexp=RegExp(\"^\"+ws+ws+\"*\"),trimEndRegexp=RegExp(ws+ws+\"*$\");String.prototype.trim=function(){return(this+\"\").replace(trimBeginRegexp,\"\").replace(trimEndRegexp,\"\")}}var toObject=function(o){if(null==o)throw new TypeError(\"can't convert \"+o+\" to object\");return Object(o)}});";

  var javascript = {
  	id: id,
  	src: src
  };

  var id$1 = 'ace/mode/css_worker';
  var src$1 = "\"no use strict\";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail=\"\";testPath;){var alias=paths[testPath];if(\"string\"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,\"/\")+(tail||alias.main||alias.name);if(alias===!1)return\"\";var i=testPath.lastIndexOf(\"/\");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:\"log\",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:\"error\",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf(\"!\")){var chunks=moduleName.split(\"!\");return window.normalizeModule(parentId,chunks[0])+\"!\"+window.normalizeModule(parentId,chunks[1])}if(\".\"==moduleName.charAt(0)){var base=parentId.split(\"/\").slice(0,-1).join(\"/\");for(moduleName=(base?base+\"/\":\"\")+moduleName;-1!==moduleName.indexOf(\".\")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,\"\").replace(/\\/\\.\\//,\"/\").replace(/[^\\/]+\\/\\.\\.\\//,\"\")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error(\"worker.js acequire() accepts only (parentId, id) as arguments\");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log(\"unable to load \"+id);var path=resolveModuleId(id,window.acequire.tlns);return\".js\"!=path.slice(-3)&&(path+=\".js\"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,\"string\"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),\"function\"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=[\"require\",\"exports\",\"module\"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case\"require\":return req;case\"exports\":return module.exports;case\"module\":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire(\"ace/lib/event_emitter\").EventEmitter,oop=window.acequire(\"ace/lib/oop\"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:\"call\",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:\"event\",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error(\"Unknown command:\"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire(\"ace/lib/es5-shim\"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split(\"\").reverse().join(\"\")},exports.stringRepeat=function(string,count){for(var result=\"\";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,\"\")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,\"\")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&\"object\"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if(\"object\"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if(\"[object Object]\"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,\"\\\\$1\")},exports.escapeHTML=function(str){return str.replace(/&/g,\"&#38;\").replace(/\"/g,\"&#34;\").replace(/'/g,\"&#39;\").replace(/</g,\"&#60;\")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define(\"ace/range\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return\"Range: [\"+this.start.row+\"/\"+this.start.column+\"] -> [\"+this.end.row+\"/\"+this.end.column+\"]\"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){\"object\"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){\"object\"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||\"\";switch(delta.action){case\"insert\":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case\"remove\":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){\"object\"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?\"unshift\":\"push\"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(acequire,exports){\"use strict\";var oop=acequire(\"./lib/oop\"),EventEmitter=acequire(\"./lib/event_emitter\").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=\"insert\"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal(\"change\",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener(\"change\",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on(\"change\",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"],function(acequire,exports){\"use strict\";var oop=acequire(\"./lib/oop\"),applyDelta=acequire(\"./apply_delta\").applyDelta,EventEmitter=acequire(\"./lib/event_emitter\").EventEmitter,Range=acequire(\"./range\").Range,Anchor=acequire(\"./anchor\").Anchor,Document=function(textOrLines){this.$lines=[\"\"],0===textOrLines.length?this.$lines=[\"\"]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0===\"aaa\".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,\"\\n\").split(\"\\n\")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:\"\\n\",this._signal(\"changeNewLineMode\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\"windows\":return\"\\r\\n\";case\"unix\":return\"\\n\";default:return this.$autoNewLine||\"\\n\"}},this.$autoNewLine=\"\",this.$newLineMode=\"auto\",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal(\"changeNewLineMode\"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return\"\\r\\n\"==text||\"\\r\"==text||\"\\n\"==text},this.getLine=function(row){return this.$lines[row]||\"\"},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||\"\").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\"),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\"),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\"),this.insertMergedLines(position,[\"\",\"\"])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:\"insert\",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([\"\"]),column=0):(lines=[\"\"].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:\"insert\",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:\"remove\",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:\"remove\",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:\"remove\",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:\"remove\",lines:[\"\",\"\"]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert=\"insert\"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal(\"change\",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(\"\"),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:\"insert\"==delta.action?\"remove\":\"insert\",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define(\"ace/worker/mirror\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/document\",\"ace/lib/lang\"],function(acequire,exports){\"use strict\";acequire(\"../range\").Range;var Document=acequire(\"../document\").Document,lang=acequire(\"../lib/lang\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\"\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\"change\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\"insert\",start:data[i],lines:data[i+1]};else var d={action:\"remove\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\"ace/mode/css/csslint\",[\"require\",\"exports\",\"module\"],function(acequire,exports,module){function objectToString(o){return Object.prototype.toString.call(o)}function clone(parent,circular,depth,prototype){function _clone(parent,depth){if(null===parent)return null;if(0==depth)return parent;var child;if(\"object\"!=typeof parent)return parent;if(util.isArray(parent))child=[];else if(util.isRegExp(parent))child=RegExp(parent.source,util.getRegExpFlags(parent)),parent.lastIndex&&(child.lastIndex=parent.lastIndex);else if(util.isDate(parent))child=new Date(parent.getTime());else{if(useBuffer&&Buffer.isBuffer(parent))return child=new Buffer(parent.length),parent.copy(child),child;child=prototype===void 0?Object.create(Object.getPrototypeOf(parent)):Object.create(prototype)}if(circular){var index=allParents.indexOf(parent);if(-1!=index)return allChildren[index];allParents.push(parent),allChildren.push(child)}for(var i in parent)child[i]=_clone(parent[i],depth-1);return child}var allParents=[],allChildren=[],useBuffer=\"undefined\"!=typeof Buffer;return circular===void 0&&(circular=!0),depth===void 0&&(depth=1/0),_clone(parent,depth)}function Reporter(lines,ruleset){this.messages=[],this.stats=[],this.lines=lines,this.ruleset=ruleset}var parserlib={};(function(){function EventTarget(){this._listeners={}}function StringReader(text){this._input=text.replace(/\\n\\r?/g,\"\\n\"),this._line=1,this._col=1,this._cursor=0}function SyntaxError(message,line,col){this.col=col,this.line=line,this.message=message}function SyntaxUnit(text,line,col,type){this.col=col,this.line=line,this.text=text,this.type=type}function TokenStreamBase(input,tokenData){this._reader=input?new StringReader(\"\"+input):null,this._token=null,this._tokenData=tokenData,this._lt=[],this._ltIndex=0,this._ltIndexCache=[]}EventTarget.prototype={constructor:EventTarget,addListener:function(type,listener){this._listeners[type]||(this._listeners[type]=[]),this._listeners[type].push(listener)},fire:function(event){if(\"string\"==typeof event&&(event={type:event}),event.target!==void 0&&(event.target=this),event.type===void 0)throw Error(\"Event object missing 'type' property.\");if(this._listeners[event.type])for(var listeners=this._listeners[event.type].concat(),i=0,len=listeners.length;len>i;i++)listeners[i].call(this,event)},removeListener:function(type,listener){if(this._listeners[type])for(var listeners=this._listeners[type],i=0,len=listeners.length;len>i;i++)if(listeners[i]===listener){listeners.splice(i,1);break}}},StringReader.prototype={constructor:StringReader,getCol:function(){return this._col},getLine:function(){return this._line},eof:function(){return this._cursor==this._input.length},peek:function(count){var c=null;return count=count===void 0?1:count,this._cursor<this._input.length&&(c=this._input.charAt(this._cursor+count-1)),c},read:function(){var c=null;return this._cursor<this._input.length&&(\"\\n\"==this._input.charAt(this._cursor)?(this._line++,this._col=1):this._col++,c=this._input.charAt(this._cursor++)),c},mark:function(){this._bookmark={cursor:this._cursor,line:this._line,col:this._col}},reset:function(){this._bookmark&&(this._cursor=this._bookmark.cursor,this._line=this._bookmark.line,this._col=this._bookmark.col,delete this._bookmark)},readTo:function(pattern){for(var c,buffer=\"\";buffer.length<pattern.length||buffer.lastIndexOf(pattern)!=buffer.length-pattern.length;){if(c=this.read(),!c)throw Error('Expected \"'+pattern+'\" at line '+this._line+\", col \"+this._col+\".\");buffer+=c}return buffer},readWhile:function(filter){for(var buffer=\"\",c=this.read();null!==c&&filter(c);)buffer+=c,c=this.read();return buffer},readMatch:function(matcher){var source=this._input.substring(this._cursor),value=null;return\"string\"==typeof matcher?0===source.indexOf(matcher)&&(value=this.readCount(matcher.length)):matcher instanceof RegExp&&matcher.test(source)&&(value=this.readCount(RegExp.lastMatch.length)),value},readCount:function(count){for(var buffer=\"\";count--;)buffer+=this.read();return buffer}},SyntaxError.prototype=Error(),SyntaxUnit.fromToken=function(token){return new SyntaxUnit(token.value,token.startLine,token.startCol)},SyntaxUnit.prototype={constructor:SyntaxUnit,valueOf:function(){return this.text},toString:function(){return this.text}},TokenStreamBase.createTokenData=function(tokens){var nameMap=[],typeMap={},tokenData=tokens.concat([]),i=0,len=tokenData.length+1;for(tokenData.UNKNOWN=-1,tokenData.unshift({name:\"EOF\"});len>i;i++)nameMap.push(tokenData[i].name),tokenData[tokenData[i].name]=i,tokenData[i].text&&(typeMap[tokenData[i].text]=i);return tokenData.name=function(tt){return nameMap[tt]},tokenData.type=function(c){return typeMap[c]},tokenData},TokenStreamBase.prototype={constructor:TokenStreamBase,match:function(tokenTypes,channel){tokenTypes instanceof Array||(tokenTypes=[tokenTypes]);\nfor(var tt=this.get(channel),i=0,len=tokenTypes.length;len>i;)if(tt==tokenTypes[i++])return!0;return this.unget(),!1},mustMatch:function(tokenTypes){var token;if(tokenTypes instanceof Array||(tokenTypes=[tokenTypes]),!this.match.apply(this,arguments))throw token=this.LT(1),new SyntaxError(\"Expected \"+this._tokenData[tokenTypes[0]].name+\" at line \"+token.startLine+\", col \"+token.startCol+\".\",token.startLine,token.startCol)},advance:function(tokenTypes,channel){for(;0!==this.LA(0)&&!this.match(tokenTypes,channel);)this.get();return this.LA(0)},get:function(channel){var token,info,tokenInfo=this._tokenData,i=(this._reader,0);if(tokenInfo.length,this._lt.length&&this._ltIndex>=0&&this._ltIndex<this._lt.length){for(i++,this._token=this._lt[this._ltIndex++],info=tokenInfo[this._token.type];void 0!==info.channel&&channel!==info.channel&&this._ltIndex<this._lt.length;)this._token=this._lt[this._ltIndex++],info=tokenInfo[this._token.type],i++;if((void 0===info.channel||channel===info.channel)&&this._ltIndex<=this._lt.length)return this._ltIndexCache.push(i),this._token.type}return token=this._getToken(),token.type>-1&&!tokenInfo[token.type].hide&&(token.channel=tokenInfo[token.type].channel,this._token=token,this._lt.push(token),this._ltIndexCache.push(this._lt.length-this._ltIndex+i),this._lt.length>5&&this._lt.shift(),this._ltIndexCache.length>5&&this._ltIndexCache.shift(),this._ltIndex=this._lt.length),info=tokenInfo[token.type],info&&(info.hide||void 0!==info.channel&&channel!==info.channel)?this.get(channel):token.type},LA:function(index){var tt,total=index;if(index>0){if(index>5)throw Error(\"Too much lookahead.\");for(;total;)tt=this.get(),total--;for(;index>total;)this.unget(),total++}else if(0>index){if(!this._lt[this._ltIndex+index])throw Error(\"Too much lookbehind.\");tt=this._lt[this._ltIndex+index].type}else tt=this._token.type;return tt},LT:function(index){return this.LA(index),this._lt[this._ltIndex+index-1]},peek:function(){return this.LA(1)},token:function(){return this._token},tokenName:function(tokenType){return 0>tokenType||tokenType>this._tokenData.length?\"UNKNOWN_TOKEN\":this._tokenData[tokenType].name},tokenType:function(tokenName){return this._tokenData[tokenName]||-1},unget:function(){if(!this._ltIndexCache.length)throw Error(\"Too much lookahead.\");this._ltIndex-=this._ltIndexCache.pop(),this._token=this._lt[this._ltIndex-1]}},parserlib.util={StringReader:StringReader,SyntaxError:SyntaxError,SyntaxUnit:SyntaxUnit,EventTarget:EventTarget,TokenStreamBase:TokenStreamBase}})(),function(){function Combinator(text,line,col){SyntaxUnit.call(this,text,line,col,Parser.COMBINATOR_TYPE),this.type=\"unknown\",/^\\s+$/.test(text)?this.type=\"descendant\":\">\"==text?this.type=\"child\":\"+\"==text?this.type=\"adjacent-sibling\":\"~\"==text&&(this.type=\"sibling\")}function MediaFeature(name,value){SyntaxUnit.call(this,\"(\"+name+(null!==value?\":\"+value:\"\")+\")\",name.startLine,name.startCol,Parser.MEDIA_FEATURE_TYPE),this.name=name,this.value=value}function MediaQuery(modifier,mediaType,features,line,col){SyntaxUnit.call(this,(modifier?modifier+\" \":\"\")+(mediaType?mediaType:\"\")+(mediaType&&features.length>0?\" and \":\"\")+features.join(\" and \"),line,col,Parser.MEDIA_QUERY_TYPE),this.modifier=modifier,this.mediaType=mediaType,this.features=features}function Parser(options){EventTarget.call(this),this.options=options||{},this._tokenStream=null}function PropertyName(text,hack,line,col){SyntaxUnit.call(this,text,line,col,Parser.PROPERTY_NAME_TYPE),this.hack=hack}function PropertyValue(parts,line,col){SyntaxUnit.call(this,parts.join(\" \"),line,col,Parser.PROPERTY_VALUE_TYPE),this.parts=parts}function PropertyValueIterator(value){this._i=0,this._parts=value.parts,this._marks=[],this.value=value}function PropertyValuePart(text,line,col){SyntaxUnit.call(this,text,line,col,Parser.PROPERTY_VALUE_PART_TYPE),this.type=\"unknown\";var temp;if(/^([+\\-]?[\\d\\.]+)([a-z]+)$/i.test(text))switch(this.type=\"dimension\",this.value=+RegExp.$1,this.units=RegExp.$2,this.units.toLowerCase()){case\"em\":case\"rem\":case\"ex\":case\"px\":case\"cm\":case\"mm\":case\"in\":case\"pt\":case\"pc\":case\"ch\":case\"vh\":case\"vw\":case\"vmax\":case\"vmin\":this.type=\"length\";break;case\"deg\":case\"rad\":case\"grad\":this.type=\"angle\";break;case\"ms\":case\"s\":this.type=\"time\";break;case\"hz\":case\"khz\":this.type=\"frequency\";break;case\"dpi\":case\"dpcm\":this.type=\"resolution\"}else/^([+\\-]?[\\d\\.]+)%$/i.test(text)?(this.type=\"percentage\",this.value=+RegExp.$1):/^([+\\-]?\\d+)$/i.test(text)?(this.type=\"integer\",this.value=+RegExp.$1):/^([+\\-]?[\\d\\.]+)$/i.test(text)?(this.type=\"number\",this.value=+RegExp.$1):/^#([a-f0-9]{3,6})/i.test(text)?(this.type=\"color\",temp=RegExp.$1,3==temp.length?(this.red=parseInt(temp.charAt(0)+temp.charAt(0),16),this.green=parseInt(temp.charAt(1)+temp.charAt(1),16),this.blue=parseInt(temp.charAt(2)+temp.charAt(2),16)):(this.red=parseInt(temp.substring(0,2),16),this.green=parseInt(temp.substring(2,4),16),this.blue=parseInt(temp.substring(4,6),16))):/^rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i.test(text)?(this.type=\"color\",this.red=+RegExp.$1,this.green=+RegExp.$2,this.blue=+RegExp.$3):/^rgb\\(\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*\\)/i.test(text)?(this.type=\"color\",this.red=255*+RegExp.$1/100,this.green=255*+RegExp.$2/100,this.blue=255*+RegExp.$3/100):/^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([\\d\\.]+)\\s*\\)/i.test(text)?(this.type=\"color\",this.red=+RegExp.$1,this.green=+RegExp.$2,this.blue=+RegExp.$3,this.alpha=+RegExp.$4):/^rgba\\(\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*([\\d\\.]+)\\s*\\)/i.test(text)?(this.type=\"color\",this.red=255*+RegExp.$1/100,this.green=255*+RegExp.$2/100,this.blue=255*+RegExp.$3/100,this.alpha=+RegExp.$4):/^hsl\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*\\)/i.test(text)?(this.type=\"color\",this.hue=+RegExp.$1,this.saturation=+RegExp.$2/100,this.lightness=+RegExp.$3/100):/^hsla\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*([\\d\\.]+)\\s*\\)/i.test(text)?(this.type=\"color\",this.hue=+RegExp.$1,this.saturation=+RegExp.$2/100,this.lightness=+RegExp.$3/100,this.alpha=+RegExp.$4):/^url\\([\"']?([^\\)\"']+)[\"']?\\)/i.test(text)?(this.type=\"uri\",this.uri=RegExp.$1):/^([^\\(]+)\\(/i.test(text)?(this.type=\"function\",this.name=RegExp.$1,this.value=text):/^[\"'][^\"']*[\"']/.test(text)?(this.type=\"string\",this.value=eval(text)):Colors[text.toLowerCase()]?(this.type=\"color\",temp=Colors[text.toLowerCase()].substring(1),this.red=parseInt(temp.substring(0,2),16),this.green=parseInt(temp.substring(2,4),16),this.blue=parseInt(temp.substring(4,6),16)):/^[\\,\\/]$/.test(text)?(this.type=\"operator\",this.value=text):/^[a-z\\-_\\u0080-\\uFFFF][a-z0-9\\-_\\u0080-\\uFFFF]*$/i.test(text)&&(this.type=\"identifier\",this.value=text)}function Selector(parts,line,col){SyntaxUnit.call(this,parts.join(\" \"),line,col,Parser.SELECTOR_TYPE),this.parts=parts,this.specificity=Specificity.calculate(this)}function SelectorPart(elementName,modifiers,text,line,col){SyntaxUnit.call(this,text,line,col,Parser.SELECTOR_PART_TYPE),this.elementName=elementName,this.modifiers=modifiers}function SelectorSubPart(text,type,line,col){SyntaxUnit.call(this,text,line,col,Parser.SELECTOR_SUB_PART_TYPE),this.type=type,this.args=[]}function Specificity(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function isHexDigit(c){return null!==c&&h.test(c)}function isDigit(c){return null!==c&&/\\d/.test(c)}function isWhitespace(c){return null!==c&&/\\s/.test(c)}function isNewLine(c){return null!==c&&nl.test(c)}function isNameStart(c){return null!==c&&/[a-z_\\u0080-\\uFFFF\\\\]/i.test(c)}function isNameChar(c){return null!==c&&(isNameStart(c)||/[0-9\\-\\\\]/.test(c))}function isIdentStart(c){return null!==c&&(isNameStart(c)||/\\-\\\\/.test(c))}function mix(receiver,supplier){for(var prop in supplier)supplier.hasOwnProperty(prop)&&(receiver[prop]=supplier[prop]);return receiver}function TokenStream(input){TokenStreamBase.call(this,input,Tokens)}function ValidationError(message,line,col){this.col=col,this.line=line,this.message=message}var EventTarget=parserlib.util.EventTarget,TokenStreamBase=parserlib.util.TokenStreamBase,StringReader=parserlib.util.StringReader,SyntaxError=parserlib.util.SyntaxError,SyntaxUnit=parserlib.util.SyntaxUnit,Colors={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgrey:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",gray:\"#808080\",grey:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgray:\"#d3d3d3\",lightgrey:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370d8\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#d87093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\",activeBorder:\"Active window border.\",activecaption:\"Active window caption.\",appworkspace:\"Background color of multiple document interface.\",background:\"Desktop background.\",buttonface:\"The face background color for 3-D elements that appear 3-D due to one layer of surrounding border.\",buttonhighlight:\"The color of the border facing the light source for 3-D elements that appear 3-D due to one layer of surrounding border.\",buttonshadow:\"The color of the border away from the light source for 3-D elements that appear 3-D due to one layer of surrounding border.\",buttontext:\"Text on push buttons.\",captiontext:\"Text in caption, size box, and scrollbar arrow box.\",graytext:\"Grayed (disabled) text. This color is set to #000 if the current display driver does not support a solid gray color.\",greytext:\"Greyed (disabled) text. This color is set to #000 if the current display driver does not support a solid grey color.\",highlight:\"Item(s) selected in a control.\",highlighttext:\"Text of item(s) selected in a control.\",inactiveborder:\"Inactive window border.\",inactivecaption:\"Inactive window caption.\",inactivecaptiontext:\"Color of text in an inactive caption.\",infobackground:\"Background color for tooltip controls.\",infotext:\"Text color for tooltip controls.\",menu:\"Menu background.\",menutext:\"Text in menus.\",scrollbar:\"Scroll bar gray area.\",threeddarkshadow:\"The color of the darker (generally outer) of the two borders away from the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.\",threedface:\"The face background color for 3-D elements that appear 3-D due to two concentric layers of surrounding border.\",threedhighlight:\"The color of the lighter (generally outer) of the two borders facing the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.\",threedlightshadow:\"The color of the darker (generally inner) of the two borders facing the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.\",threedshadow:\"The color of the lighter (generally inner) of the two borders away from the light source for 3-D elements that appear 3-D due to two concentric layers of surrounding border.\",window:\"Window background.\",windowframe:\"Window frame.\",windowtext:\"Text in windows.\"};Combinator.prototype=new SyntaxUnit,Combinator.prototype.constructor=Combinator,MediaFeature.prototype=new SyntaxUnit,MediaFeature.prototype.constructor=MediaFeature,MediaQuery.prototype=new SyntaxUnit,MediaQuery.prototype.constructor=MediaQuery,Parser.DEFAULT_TYPE=0,Parser.COMBINATOR_TYPE=1,Parser.MEDIA_FEATURE_TYPE=2,Parser.MEDIA_QUERY_TYPE=3,Parser.PROPERTY_NAME_TYPE=4,Parser.PROPERTY_VALUE_TYPE=5,Parser.PROPERTY_VALUE_PART_TYPE=6,Parser.SELECTOR_TYPE=7,Parser.SELECTOR_PART_TYPE=8,Parser.SELECTOR_SUB_PART_TYPE=9,Parser.prototype=function(){var prop,proto=new EventTarget,additions={constructor:Parser,DEFAULT_TYPE:0,COMBINATOR_TYPE:1,MEDIA_FEATURE_TYPE:2,MEDIA_QUERY_TYPE:3,PROPERTY_NAME_TYPE:4,PROPERTY_VALUE_TYPE:5,PROPERTY_VALUE_PART_TYPE:6,SELECTOR_TYPE:7,SELECTOR_PART_TYPE:8,SELECTOR_SUB_PART_TYPE:9,_stylesheet:function(){var count,token,tt,tokenStream=this._tokenStream;for(this.fire(\"startstylesheet\"),this._charset(),this._skipCruft();tokenStream.peek()==Tokens.IMPORT_SYM;)this._import(),this._skipCruft();for(;tokenStream.peek()==Tokens.NAMESPACE_SYM;)this._namespace(),this._skipCruft();for(tt=tokenStream.peek();tt>Tokens.EOF;){try{switch(tt){case Tokens.MEDIA_SYM:this._media(),this._skipCruft();break;case Tokens.PAGE_SYM:this._page(),this._skipCruft();break;case Tokens.FONT_FACE_SYM:this._font_face(),this._skipCruft();break;case Tokens.KEYFRAMES_SYM:this._keyframes(),this._skipCruft();break;case Tokens.VIEWPORT_SYM:this._viewport(),this._skipCruft();break;case Tokens.UNKNOWN_SYM:if(tokenStream.get(),this.options.strict)throw new SyntaxError(\"Unknown @ rule.\",tokenStream.LT(0).startLine,tokenStream.LT(0).startCol);for(this.fire({type:\"error\",error:null,message:\"Unknown @ rule: \"+tokenStream.LT(0).value+\".\",line:tokenStream.LT(0).startLine,col:tokenStream.LT(0).startCol}),count=0;tokenStream.advance([Tokens.LBRACE,Tokens.RBRACE])==Tokens.LBRACE;)count++;for(;count;)tokenStream.advance([Tokens.RBRACE]),count--;break;case Tokens.S:this._readWhitespace();break;default:if(!this._ruleset())switch(tt){case Tokens.CHARSET_SYM:throw token=tokenStream.LT(1),this._charset(!1),new SyntaxError(\"@charset not allowed here.\",token.startLine,token.startCol);case Tokens.IMPORT_SYM:throw token=tokenStream.LT(1),this._import(!1),new SyntaxError(\"@import not allowed here.\",token.startLine,token.startCol);case Tokens.NAMESPACE_SYM:throw token=tokenStream.LT(1),this._namespace(!1),new SyntaxError(\"@namespace not allowed here.\",token.startLine,token.startCol);default:tokenStream.get(),this._unexpectedToken(tokenStream.token())}}}catch(ex){if(!(ex instanceof SyntaxError)||this.options.strict)throw ex;this.fire({type:\"error\",error:ex,message:ex.message,line:ex.line,col:ex.col})}tt=tokenStream.peek()}tt!=Tokens.EOF&&this._unexpectedToken(tokenStream.token()),this.fire(\"endstylesheet\")},_charset:function(emit){var charset,token,line,col,tokenStream=this._tokenStream;tokenStream.match(Tokens.CHARSET_SYM)&&(line=tokenStream.token().startLine,col=tokenStream.token().startCol,this._readWhitespace(),tokenStream.mustMatch(Tokens.STRING),token=tokenStream.token(),charset=token.value,this._readWhitespace(),tokenStream.mustMatch(Tokens.SEMICOLON),emit!==!1&&this.fire({type:\"charset\",charset:charset,line:line,col:col}))},_import:function(emit){var uri,importToken,tokenStream=this._tokenStream,mediaList=[];tokenStream.mustMatch(Tokens.IMPORT_SYM),importToken=tokenStream.token(),this._readWhitespace(),tokenStream.mustMatch([Tokens.STRING,Tokens.URI]),uri=tokenStream.token().value.replace(/^(?:url\\()?[\"']?([^\"']+?)[\"']?\\)?$/,\"$1\"),this._readWhitespace(),mediaList=this._media_query_list(),tokenStream.mustMatch(Tokens.SEMICOLON),this._readWhitespace(),emit!==!1&&this.fire({type:\"import\",uri:uri,media:mediaList,line:importToken.startLine,col:importToken.startCol})},_namespace:function(emit){var line,col,prefix,uri,tokenStream=this._tokenStream;tokenStream.mustMatch(Tokens.NAMESPACE_SYM),line=tokenStream.token().startLine,col=tokenStream.token().startCol,this._readWhitespace(),tokenStream.match(Tokens.IDENT)&&(prefix=tokenStream.token().value,this._readWhitespace()),tokenStream.mustMatch([Tokens.STRING,Tokens.URI]),uri=tokenStream.token().value.replace(/(?:url\\()?[\"']([^\"']+)[\"']\\)?/,\"$1\"),this._readWhitespace(),tokenStream.mustMatch(Tokens.SEMICOLON),this._readWhitespace(),emit!==!1&&this.fire({type:\"namespace\",prefix:prefix,uri:uri,line:line,col:col})},_media:function(){var line,col,mediaList,tokenStream=this._tokenStream;for(tokenStream.mustMatch(Tokens.MEDIA_SYM),line=tokenStream.token().startLine,col=tokenStream.token().startCol,this._readWhitespace(),mediaList=this._media_query_list(),tokenStream.mustMatch(Tokens.LBRACE),this._readWhitespace(),this.fire({type:\"startmedia\",media:mediaList,line:line,col:col});;)if(tokenStream.peek()==Tokens.PAGE_SYM)this._page();else if(tokenStream.peek()==Tokens.FONT_FACE_SYM)this._font_face();else if(tokenStream.peek()==Tokens.VIEWPORT_SYM)this._viewport();else if(!this._ruleset())break;tokenStream.mustMatch(Tokens.RBRACE),this._readWhitespace(),this.fire({type:\"endmedia\",media:mediaList,line:line,col:col})},_media_query_list:function(){var tokenStream=this._tokenStream,mediaList=[];for(this._readWhitespace(),(tokenStream.peek()==Tokens.IDENT||tokenStream.peek()==Tokens.LPAREN)&&mediaList.push(this._media_query());tokenStream.match(Tokens.COMMA);)this._readWhitespace(),mediaList.push(this._media_query());return mediaList},_media_query:function(){var tokenStream=this._tokenStream,type=null,ident=null,token=null,expressions=[];if(tokenStream.match(Tokens.IDENT)&&(ident=tokenStream.token().value.toLowerCase(),\"only\"!=ident&&\"not\"!=ident?(tokenStream.unget(),ident=null):token=tokenStream.token()),this._readWhitespace(),tokenStream.peek()==Tokens.IDENT?(type=this._media_type(),null===token&&(token=tokenStream.token())):tokenStream.peek()==Tokens.LPAREN&&(null===token&&(token=tokenStream.LT(1)),expressions.push(this._media_expression())),null===type&&0===expressions.length)return null;for(this._readWhitespace();tokenStream.match(Tokens.IDENT);)\"and\"!=tokenStream.token().value.toLowerCase()&&this._unexpectedToken(tokenStream.token()),this._readWhitespace(),expressions.push(this._media_expression());return new MediaQuery(ident,type,expressions,token.startLine,token.startCol)},_media_type:function(){return this._media_feature()},_media_expression:function(){var token,tokenStream=this._tokenStream,feature=null,expression=null;return tokenStream.mustMatch(Tokens.LPAREN),this._readWhitespace(),feature=this._media_feature(),this._readWhitespace(),tokenStream.match(Tokens.COLON)&&(this._readWhitespace(),token=tokenStream.LT(1),expression=this._expression()),tokenStream.mustMatch(Tokens.RPAREN),this._readWhitespace(),new MediaFeature(feature,expression?new SyntaxUnit(expression,token.startLine,token.startCol):null)},_media_feature:function(){var tokenStream=this._tokenStream;return tokenStream.mustMatch(Tokens.IDENT),SyntaxUnit.fromToken(tokenStream.token())},_page:function(){var line,col,tokenStream=this._tokenStream,identifier=null,pseudoPage=null;tokenStream.mustMatch(Tokens.PAGE_SYM),line=tokenStream.token().startLine,col=tokenStream.token().startCol,this._readWhitespace(),tokenStream.match(Tokens.IDENT)&&(identifier=tokenStream.token().value,\"auto\"===identifier.toLowerCase()&&this._unexpectedToken(tokenStream.token())),tokenStream.peek()==Tokens.COLON&&(pseudoPage=this._pseudo_page()),this._readWhitespace(),this.fire({type:\"startpage\",id:identifier,pseudo:pseudoPage,line:line,col:col}),this._readDeclarations(!0,!0),this.fire({type:\"endpage\",id:identifier,pseudo:pseudoPage,line:line,col:col})},_margin:function(){var line,col,tokenStream=this._tokenStream,marginSym=this._margin_sym();return marginSym?(line=tokenStream.token().startLine,col=tokenStream.token().startCol,this.fire({type:\"startpagemargin\",margin:marginSym,line:line,col:col}),this._readDeclarations(!0),this.fire({type:\"endpagemargin\",margin:marginSym,line:line,col:col}),!0):!1},_margin_sym:function(){var tokenStream=this._tokenStream;return tokenStream.match([Tokens.TOPLEFTCORNER_SYM,Tokens.TOPLEFT_SYM,Tokens.TOPCENTER_SYM,Tokens.TOPRIGHT_SYM,Tokens.TOPRIGHTCORNER_SYM,Tokens.BOTTOMLEFTCORNER_SYM,Tokens.BOTTOMLEFT_SYM,Tokens.BOTTOMCENTER_SYM,Tokens.BOTTOMRIGHT_SYM,Tokens.BOTTOMRIGHTCORNER_SYM,Tokens.LEFTTOP_SYM,Tokens.LEFTMIDDLE_SYM,Tokens.LEFTBOTTOM_SYM,Tokens.RIGHTTOP_SYM,Tokens.RIGHTMIDDLE_SYM,Tokens.RIGHTBOTTOM_SYM])?SyntaxUnit.fromToken(tokenStream.token()):null},_pseudo_page:function(){var tokenStream=this._tokenStream;return tokenStream.mustMatch(Tokens.COLON),tokenStream.mustMatch(Tokens.IDENT),tokenStream.token().value},_font_face:function(){var line,col,tokenStream=this._tokenStream;tokenStream.mustMatch(Tokens.FONT_FACE_SYM),line=tokenStream.token().startLine,col=tokenStream.token().startCol,this._readWhitespace(),this.fire({type:\"startfontface\",line:line,col:col}),this._readDeclarations(!0),this.fire({type:\"endfontface\",line:line,col:col})},_viewport:function(){var line,col,tokenStream=this._tokenStream;tokenStream.mustMatch(Tokens.VIEWPORT_SYM),line=tokenStream.token().startLine,col=tokenStream.token().startCol,this._readWhitespace(),this.fire({type:\"startviewport\",line:line,col:col}),this._readDeclarations(!0),this.fire({type:\"endviewport\",line:line,col:col})},_operator:function(inFunction){var tokenStream=this._tokenStream,token=null;return(tokenStream.match([Tokens.SLASH,Tokens.COMMA])||inFunction&&tokenStream.match([Tokens.PLUS,Tokens.STAR,Tokens.MINUS]))&&(token=tokenStream.token(),this._readWhitespace()),token?PropertyValuePart.fromToken(token):null},_combinator:function(){var token,tokenStream=this._tokenStream,value=null;return tokenStream.match([Tokens.PLUS,Tokens.GREATER,Tokens.TILDE])&&(token=tokenStream.token(),value=new Combinator(token.value,token.startLine,token.startCol),this._readWhitespace()),value},_unary_operator:function(){var tokenStream=this._tokenStream;return tokenStream.match([Tokens.MINUS,Tokens.PLUS])?tokenStream.token().value:null},_property:function(){var tokenValue,token,line,col,tokenStream=this._tokenStream,value=null,hack=null;return tokenStream.peek()==Tokens.STAR&&this.options.starHack&&(tokenStream.get(),token=tokenStream.token(),hack=token.value,line=token.startLine,col=token.startCol),tokenStream.match(Tokens.IDENT)&&(token=tokenStream.token(),tokenValue=token.value,\"_\"==tokenValue.charAt(0)&&this.options.underscoreHack&&(hack=\"_\",tokenValue=tokenValue.substring(1)),value=new PropertyName(tokenValue,hack,line||token.startLine,col||token.startCol),this._readWhitespace()),value},_ruleset:function(){var tt,selectors,tokenStream=this._tokenStream;try{selectors=this._selectors_group()}catch(ex){if(!(ex instanceof SyntaxError)||this.options.strict)throw ex;if(this.fire({type:\"error\",error:ex,message:ex.message,line:ex.line,col:ex.col}),tt=tokenStream.advance([Tokens.RBRACE]),tt!=Tokens.RBRACE)throw ex;return!0}return selectors&&(this.fire({type:\"startrule\",selectors:selectors,line:selectors[0].line,col:selectors[0].col}),this._readDeclarations(!0),this.fire({type:\"endrule\",selectors:selectors,line:selectors[0].line,col:selectors[0].col})),selectors},_selectors_group:function(){var selector,tokenStream=this._tokenStream,selectors=[];if(selector=this._selector(),null!==selector)for(selectors.push(selector);tokenStream.match(Tokens.COMMA);)this._readWhitespace(),selector=this._selector(),null!==selector?selectors.push(selector):this._unexpectedToken(tokenStream.LT(1));return selectors.length?selectors:null},_selector:function(){var tokenStream=this._tokenStream,selector=[],nextSelector=null,combinator=null,ws=null;if(nextSelector=this._simple_selector_sequence(),null===nextSelector)return null;for(selector.push(nextSelector);;)if(combinator=this._combinator(),null!==combinator)selector.push(combinator),nextSelector=this._simple_selector_sequence(),null===nextSelector?this._unexpectedToken(tokenStream.LT(1)):selector.push(nextSelector);else{if(!this._readWhitespace())break;ws=new Combinator(tokenStream.token().value,tokenStream.token().startLine,tokenStream.token().startCol),combinator=this._combinator(),nextSelector=this._simple_selector_sequence(),null===nextSelector?null!==combinator&&this._unexpectedToken(tokenStream.LT(1)):(null!==combinator?selector.push(combinator):selector.push(ws),selector.push(nextSelector))}return new Selector(selector,selector[0].line,selector[0].col)},_simple_selector_sequence:function(){var line,col,tokenStream=this._tokenStream,elementName=null,modifiers=[],selectorText=\"\",components=[function(){return tokenStream.match(Tokens.HASH)?new SelectorSubPart(tokenStream.token().value,\"id\",tokenStream.token().startLine,tokenStream.token().startCol):null},this._class,this._attrib,this._pseudo,this._negation],i=0,len=components.length,component=null;for(line=tokenStream.LT(1).startLine,col=tokenStream.LT(1).startCol,elementName=this._type_selector(),elementName||(elementName=this._universal()),null!==elementName&&(selectorText+=elementName);;){if(tokenStream.peek()===Tokens.S)break;for(;len>i&&null===component;)component=components[i++].call(this);if(null===component){if(\"\"===selectorText)return null;break}i=0,modifiers.push(component),selectorText+=\"\"+component,component=null}return\"\"!==selectorText?new SelectorPart(elementName,modifiers,selectorText,line,col):null},_type_selector:function(){var tokenStream=this._tokenStream,ns=this._namespace_prefix(),elementName=this._element_name();return elementName?(ns&&(elementName.text=ns+elementName.text,elementName.col-=ns.length),elementName):(ns&&(tokenStream.unget(),ns.length>1&&tokenStream.unget()),null)},_class:function(){var token,tokenStream=this._tokenStream;return tokenStream.match(Tokens.DOT)?(tokenStream.mustMatch(Tokens.IDENT),token=tokenStream.token(),new SelectorSubPart(\".\"+token.value,\"class\",token.startLine,token.startCol-1)):null},_element_name:function(){var token,tokenStream=this._tokenStream;return tokenStream.match(Tokens.IDENT)?(token=tokenStream.token(),new SelectorSubPart(token.value,\"elementName\",token.startLine,token.startCol)):null},_namespace_prefix:function(){var tokenStream=this._tokenStream,value=\"\";return(tokenStream.LA(1)===Tokens.PIPE||tokenStream.LA(2)===Tokens.PIPE)&&(tokenStream.match([Tokens.IDENT,Tokens.STAR])&&(value+=tokenStream.token().value),tokenStream.mustMatch(Tokens.PIPE),value+=\"|\"),value.length?value:null},_universal:function(){var ns,tokenStream=this._tokenStream,value=\"\";return ns=this._namespace_prefix(),ns&&(value+=ns),tokenStream.match(Tokens.STAR)&&(value+=\"*\"),value.length?value:null},_attrib:function(){var ns,token,tokenStream=this._tokenStream,value=null;return tokenStream.match(Tokens.LBRACKET)?(token=tokenStream.token(),value=token.value,value+=this._readWhitespace(),ns=this._namespace_prefix(),ns&&(value+=ns),tokenStream.mustMatch(Tokens.IDENT),value+=tokenStream.token().value,value+=this._readWhitespace(),tokenStream.match([Tokens.PREFIXMATCH,Tokens.SUFFIXMATCH,Tokens.SUBSTRINGMATCH,Tokens.EQUALS,Tokens.INCLUDES,Tokens.DASHMATCH])&&(value+=tokenStream.token().value,value+=this._readWhitespace(),tokenStream.mustMatch([Tokens.IDENT,Tokens.STRING]),value+=tokenStream.token().value,value+=this._readWhitespace()),tokenStream.mustMatch(Tokens.RBRACKET),new SelectorSubPart(value+\"]\",\"attribute\",token.startLine,token.startCol)):null},_pseudo:function(){var line,col,tokenStream=this._tokenStream,pseudo=null,colons=\":\";return tokenStream.match(Tokens.COLON)&&(tokenStream.match(Tokens.COLON)&&(colons+=\":\"),tokenStream.match(Tokens.IDENT)?(pseudo=tokenStream.token().value,line=tokenStream.token().startLine,col=tokenStream.token().startCol-colons.length):tokenStream.peek()==Tokens.FUNCTION&&(line=tokenStream.LT(1).startLine,col=tokenStream.LT(1).startCol-colons.length,pseudo=this._functional_pseudo()),pseudo&&(pseudo=new SelectorSubPart(colons+pseudo,\"pseudo\",line,col))),pseudo},_functional_pseudo:function(){var tokenStream=this._tokenStream,value=null;return tokenStream.match(Tokens.FUNCTION)&&(value=tokenStream.token().value,value+=this._readWhitespace(),value+=this._expression(),tokenStream.mustMatch(Tokens.RPAREN),value+=\")\"),value},_expression:function(){for(var tokenStream=this._tokenStream,value=\"\";tokenStream.match([Tokens.PLUS,Tokens.MINUS,Tokens.DIMENSION,Tokens.NUMBER,Tokens.STRING,Tokens.IDENT,Tokens.LENGTH,Tokens.FREQ,Tokens.ANGLE,Tokens.TIME,Tokens.RESOLUTION,Tokens.SLASH]);)value+=tokenStream.token().value,value+=this._readWhitespace();return value.length?value:null},_negation:function(){var line,col,arg,tokenStream=this._tokenStream,value=\"\",subpart=null;return tokenStream.match(Tokens.NOT)&&(value=tokenStream.token().value,line=tokenStream.token().startLine,col=tokenStream.token().startCol,value+=this._readWhitespace(),arg=this._negation_arg(),value+=arg,value+=this._readWhitespace(),tokenStream.match(Tokens.RPAREN),value+=tokenStream.token().value,subpart=new SelectorSubPart(value,\"not\",line,col),subpart.args.push(arg)),subpart},_negation_arg:function(){var line,col,part,tokenStream=this._tokenStream,args=[this._type_selector,this._universal,function(){return tokenStream.match(Tokens.HASH)?new SelectorSubPart(tokenStream.token().value,\"id\",tokenStream.token().startLine,tokenStream.token().startCol):null},this._class,this._attrib,this._pseudo],arg=null,i=0,len=args.length;for(line=tokenStream.LT(1).startLine,col=tokenStream.LT(1).startCol;len>i&&null===arg;)arg=args[i].call(this),i++;return null===arg&&this._unexpectedToken(tokenStream.LT(1)),part=\"elementName\"==arg.type?new SelectorPart(arg,[],\"\"+arg,line,col):new SelectorPart(null,[arg],\"\"+arg,line,col)},_declaration:function(){var tokenStream=this._tokenStream,property=null,expr=null,prio=null,invalid=null,propertyName=\"\";if(property=this._property(),null!==property){tokenStream.mustMatch(Tokens.COLON),this._readWhitespace(),expr=this._expr(),expr&&0!==expr.length||this._unexpectedToken(tokenStream.LT(1)),prio=this._prio(),propertyName=\"\"+property,(this.options.starHack&&\"*\"==property.hack||this.options.underscoreHack&&\"_\"==property.hack)&&(propertyName=property.text);try{this._validateProperty(propertyName,expr)}catch(ex){invalid=ex}return this.fire({type:\"property\",property:property,value:expr,important:prio,line:property.line,col:property.col,invalid:invalid}),!0}return!1},_prio:function(){var tokenStream=this._tokenStream,result=tokenStream.match(Tokens.IMPORTANT_SYM);return this._readWhitespace(),result},_expr:function(inFunction){var values=(this._tokenStream,[]),value=null,operator=null;if(value=this._term(inFunction),null!==value)for(values.push(value);;){if(operator=this._operator(inFunction),operator&&values.push(operator),value=this._term(inFunction),null===value)break;\nvalues.push(value)}return values.length>0?new PropertyValue(values,values[0].line,values[0].col):null},_term:function(inFunction){var token,line,col,tokenStream=this._tokenStream,unary=null,value=null,endChar=null;return unary=this._unary_operator(),null!==unary&&(line=tokenStream.token().startLine,col=tokenStream.token().startCol),tokenStream.peek()==Tokens.IE_FUNCTION&&this.options.ieFilters?(value=this._ie_function(),null===unary&&(line=tokenStream.token().startLine,col=tokenStream.token().startCol)):inFunction&&tokenStream.match([Tokens.LPAREN,Tokens.LBRACE,Tokens.LBRACKET])?(token=tokenStream.token(),endChar=token.endChar,value=token.value+this._expr(inFunction).text,null===unary&&(line=tokenStream.token().startLine,col=tokenStream.token().startCol),tokenStream.mustMatch(Tokens.type(endChar)),value+=endChar,this._readWhitespace()):tokenStream.match([Tokens.NUMBER,Tokens.PERCENTAGE,Tokens.LENGTH,Tokens.ANGLE,Tokens.TIME,Tokens.FREQ,Tokens.STRING,Tokens.IDENT,Tokens.URI,Tokens.UNICODE_RANGE])?(value=tokenStream.token().value,null===unary&&(line=tokenStream.token().startLine,col=tokenStream.token().startCol),this._readWhitespace()):(token=this._hexcolor(),null===token?(null===unary&&(line=tokenStream.LT(1).startLine,col=tokenStream.LT(1).startCol),null===value&&(value=tokenStream.LA(3)==Tokens.EQUALS&&this.options.ieFilters?this._ie_function():this._function())):(value=token.value,null===unary&&(line=token.startLine,col=token.startCol))),null!==value?new PropertyValuePart(null!==unary?unary+value:value,line,col):null},_function:function(){var lt,tokenStream=this._tokenStream,functionText=null,expr=null;if(tokenStream.match(Tokens.FUNCTION)){if(functionText=tokenStream.token().value,this._readWhitespace(),expr=this._expr(!0),functionText+=expr,this.options.ieFilters&&tokenStream.peek()==Tokens.EQUALS)do for(this._readWhitespace()&&(functionText+=tokenStream.token().value),tokenStream.LA(0)==Tokens.COMMA&&(functionText+=tokenStream.token().value),tokenStream.match(Tokens.IDENT),functionText+=tokenStream.token().value,tokenStream.match(Tokens.EQUALS),functionText+=tokenStream.token().value,lt=tokenStream.peek();lt!=Tokens.COMMA&&lt!=Tokens.S&&lt!=Tokens.RPAREN;)tokenStream.get(),functionText+=tokenStream.token().value,lt=tokenStream.peek();while(tokenStream.match([Tokens.COMMA,Tokens.S]));tokenStream.match(Tokens.RPAREN),functionText+=\")\",this._readWhitespace()}return functionText},_ie_function:function(){var lt,tokenStream=this._tokenStream,functionText=null;if(tokenStream.match([Tokens.IE_FUNCTION,Tokens.FUNCTION])){functionText=tokenStream.token().value;do for(this._readWhitespace()&&(functionText+=tokenStream.token().value),tokenStream.LA(0)==Tokens.COMMA&&(functionText+=tokenStream.token().value),tokenStream.match(Tokens.IDENT),functionText+=tokenStream.token().value,tokenStream.match(Tokens.EQUALS),functionText+=tokenStream.token().value,lt=tokenStream.peek();lt!=Tokens.COMMA&&lt!=Tokens.S&&lt!=Tokens.RPAREN;)tokenStream.get(),functionText+=tokenStream.token().value,lt=tokenStream.peek();while(tokenStream.match([Tokens.COMMA,Tokens.S]));tokenStream.match(Tokens.RPAREN),functionText+=\")\",this._readWhitespace()}return functionText},_hexcolor:function(){var color,tokenStream=this._tokenStream,token=null;if(tokenStream.match(Tokens.HASH)){if(token=tokenStream.token(),color=token.value,!/#[a-f0-9]{3,6}/i.test(color))throw new SyntaxError(\"Expected a hex color but found '\"+color+\"' at line \"+token.startLine+\", col \"+token.startCol+\".\",token.startLine,token.startCol);this._readWhitespace()}return token},_keyframes:function(){var token,tt,name,tokenStream=this._tokenStream,prefix=\"\";for(tokenStream.mustMatch(Tokens.KEYFRAMES_SYM),token=tokenStream.token(),/^@\\-([^\\-]+)\\-/.test(token.value)&&(prefix=RegExp.$1),this._readWhitespace(),name=this._keyframe_name(),this._readWhitespace(),tokenStream.mustMatch(Tokens.LBRACE),this.fire({type:\"startkeyframes\",name:name,prefix:prefix,line:token.startLine,col:token.startCol}),this._readWhitespace(),tt=tokenStream.peek();tt==Tokens.IDENT||tt==Tokens.PERCENTAGE;)this._keyframe_rule(),this._readWhitespace(),tt=tokenStream.peek();this.fire({type:\"endkeyframes\",name:name,prefix:prefix,line:token.startLine,col:token.startCol}),this._readWhitespace(),tokenStream.mustMatch(Tokens.RBRACE)},_keyframe_name:function(){var tokenStream=this._tokenStream;return tokenStream.mustMatch([Tokens.IDENT,Tokens.STRING]),SyntaxUnit.fromToken(tokenStream.token())},_keyframe_rule:function(){var keyList=(this._tokenStream,this._key_list());this.fire({type:\"startkeyframerule\",keys:keyList,line:keyList[0].line,col:keyList[0].col}),this._readDeclarations(!0),this.fire({type:\"endkeyframerule\",keys:keyList,line:keyList[0].line,col:keyList[0].col})},_key_list:function(){var tokenStream=this._tokenStream,keyList=[];for(keyList.push(this._key()),this._readWhitespace();tokenStream.match(Tokens.COMMA);)this._readWhitespace(),keyList.push(this._key()),this._readWhitespace();return keyList},_key:function(){var token,tokenStream=this._tokenStream;if(tokenStream.match(Tokens.PERCENTAGE))return SyntaxUnit.fromToken(tokenStream.token());if(tokenStream.match(Tokens.IDENT)){if(token=tokenStream.token(),/from|to/i.test(token.value))return SyntaxUnit.fromToken(token);tokenStream.unget()}this._unexpectedToken(tokenStream.LT(1))},_skipCruft:function(){for(;this._tokenStream.match([Tokens.S,Tokens.CDO,Tokens.CDC]););},_readDeclarations:function(checkStart,readMargins){var tt,tokenStream=this._tokenStream;this._readWhitespace(),checkStart&&tokenStream.mustMatch(Tokens.LBRACE),this._readWhitespace();try{for(;;){if(tokenStream.match(Tokens.SEMICOLON)||readMargins&&this._margin());else{if(!this._declaration())break;if(!tokenStream.match(Tokens.SEMICOLON))break}this._readWhitespace()}tokenStream.mustMatch(Tokens.RBRACE),this._readWhitespace()}catch(ex){if(!(ex instanceof SyntaxError)||this.options.strict)throw ex;if(this.fire({type:\"error\",error:ex,message:ex.message,line:ex.line,col:ex.col}),tt=tokenStream.advance([Tokens.SEMICOLON,Tokens.RBRACE]),tt==Tokens.SEMICOLON)this._readDeclarations(!1,readMargins);else if(tt!=Tokens.RBRACE)throw ex}},_readWhitespace:function(){for(var tokenStream=this._tokenStream,ws=\"\";tokenStream.match(Tokens.S);)ws+=tokenStream.token().value;return ws},_unexpectedToken:function(token){throw new SyntaxError(\"Unexpected token '\"+token.value+\"' at line \"+token.startLine+\", col \"+token.startCol+\".\",token.startLine,token.startCol)},_verifyEnd:function(){this._tokenStream.LA(1)!=Tokens.EOF&&this._unexpectedToken(this._tokenStream.LT(1))},_validateProperty:function(property,value){Validation.validate(property,value)},parse:function(input){this._tokenStream=new TokenStream(input,Tokens),this._stylesheet()},parseStyleSheet:function(input){return this.parse(input)},parseMediaQuery:function(input){this._tokenStream=new TokenStream(input,Tokens);var result=this._media_query();return this._verifyEnd(),result},parsePropertyValue:function(input){this._tokenStream=new TokenStream(input,Tokens),this._readWhitespace();var result=this._expr();return this._readWhitespace(),this._verifyEnd(),result},parseRule:function(input){this._tokenStream=new TokenStream(input,Tokens),this._readWhitespace();var result=this._ruleset();return this._readWhitespace(),this._verifyEnd(),result},parseSelector:function(input){this._tokenStream=new TokenStream(input,Tokens),this._readWhitespace();var result=this._selector();return this._readWhitespace(),this._verifyEnd(),result},parseStyleAttribute:function(input){input+=\"}\",this._tokenStream=new TokenStream(input,Tokens),this._readDeclarations()}};for(prop in additions)additions.hasOwnProperty(prop)&&(proto[prop]=additions[prop]);return proto}();var Properties={\"align-items\":\"flex-start | flex-end | center | baseline | stretch\",\"align-content\":\"flex-start | flex-end | center | space-between | space-around | stretch\",\"align-self\":\"auto | flex-start | flex-end | center | baseline | stretch\",\"-webkit-align-items\":\"flex-start | flex-end | center | baseline | stretch\",\"-webkit-align-content\":\"flex-start | flex-end | center | space-between | space-around | stretch\",\"-webkit-align-self\":\"auto | flex-start | flex-end | center | baseline | stretch\",\"alignment-adjust\":\"auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical | <percentage> | <length>\",\"alignment-baseline\":\"baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical\",animation:1,\"animation-delay\":{multi:\"<time>\",comma:!0},\"animation-direction\":{multi:\"normal | reverse | alternate | alternate-reverse\",comma:!0},\"animation-duration\":{multi:\"<time>\",comma:!0},\"animation-fill-mode\":{multi:\"none | forwards | backwards | both\",comma:!0},\"animation-iteration-count\":{multi:\"<number> | infinite\",comma:!0},\"animation-name\":{multi:\"none | <ident>\",comma:!0},\"animation-play-state\":{multi:\"running | paused\",comma:!0},\"animation-timing-function\":1,\"-moz-animation-delay\":{multi:\"<time>\",comma:!0},\"-moz-animation-direction\":{multi:\"normal | reverse | alternate | alternate-reverse\",comma:!0},\"-moz-animation-duration\":{multi:\"<time>\",comma:!0},\"-moz-animation-iteration-count\":{multi:\"<number> | infinite\",comma:!0},\"-moz-animation-name\":{multi:\"none | <ident>\",comma:!0},\"-moz-animation-play-state\":{multi:\"running | paused\",comma:!0},\"-ms-animation-delay\":{multi:\"<time>\",comma:!0},\"-ms-animation-direction\":{multi:\"normal | reverse | alternate | alternate-reverse\",comma:!0},\"-ms-animation-duration\":{multi:\"<time>\",comma:!0},\"-ms-animation-iteration-count\":{multi:\"<number> | infinite\",comma:!0},\"-ms-animation-name\":{multi:\"none | <ident>\",comma:!0},\"-ms-animation-play-state\":{multi:\"running | paused\",comma:!0},\"-webkit-animation-delay\":{multi:\"<time>\",comma:!0},\"-webkit-animation-direction\":{multi:\"normal | reverse | alternate | alternate-reverse\",comma:!0},\"-webkit-animation-duration\":{multi:\"<time>\",comma:!0},\"-webkit-animation-fill-mode\":{multi:\"none | forwards | backwards | both\",comma:!0},\"-webkit-animation-iteration-count\":{multi:\"<number> | infinite\",comma:!0},\"-webkit-animation-name\":{multi:\"none | <ident>\",comma:!0},\"-webkit-animation-play-state\":{multi:\"running | paused\",comma:!0},\"-o-animation-delay\":{multi:\"<time>\",comma:!0},\"-o-animation-direction\":{multi:\"normal | reverse | alternate | alternate-reverse\",comma:!0},\"-o-animation-duration\":{multi:\"<time>\",comma:!0},\"-o-animation-iteration-count\":{multi:\"<number> | infinite\",comma:!0},\"-o-animation-name\":{multi:\"none | <ident>\",comma:!0},\"-o-animation-play-state\":{multi:\"running | paused\",comma:!0},appearance:\"icon | window | desktop | workspace | document | tooltip | dialog | button | push-button | hyperlink | radio-button | checkbox | menu-item | tab | menu | menubar | pull-down-menu | pop-up-menu | list-menu | radio-group | checkbox-group | outline-tree | range | field | combo-box | signature | password | normal | none | inherit\",azimuth:function(expression){var part,simple=\"<angle> | leftwards | rightwards | inherit\",direction=\"left-side | far-left | left | center-left | center | center-right | right | far-right | right-side\",behind=!1,valid=!1;if(ValidationTypes.isAny(expression,simple)||(ValidationTypes.isAny(expression,\"behind\")&&(behind=!0,valid=!0),ValidationTypes.isAny(expression,direction)&&(valid=!0,behind||ValidationTypes.isAny(expression,\"behind\"))),expression.hasNext())throw part=expression.next(),valid?new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col):new ValidationError(\"Expected (<'azimuth'>) but found '\"+part+\"'.\",part.line,part.col)},\"backface-visibility\":\"visible | hidden\",background:1,\"background-attachment\":{multi:\"<attachment>\",comma:!0},\"background-clip\":{multi:\"<box>\",comma:!0},\"background-color\":\"<color> | inherit\",\"background-image\":{multi:\"<bg-image>\",comma:!0},\"background-origin\":{multi:\"<box>\",comma:!0},\"background-position\":{multi:\"<bg-position>\",comma:!0},\"background-repeat\":{multi:\"<repeat-style>\"},\"background-size\":{multi:\"<bg-size>\",comma:!0},\"baseline-shift\":\"baseline | sub | super | <percentage> | <length>\",behavior:1,binding:1,bleed:\"<length>\",\"bookmark-label\":\"<content> | <attr> | <string>\",\"bookmark-level\":\"none | <integer>\",\"bookmark-state\":\"open | closed\",\"bookmark-target\":\"none | <uri> | <attr>\",border:\"<border-width> || <border-style> || <color>\",\"border-bottom\":\"<border-width> || <border-style> || <color>\",\"border-bottom-color\":\"<color> | inherit\",\"border-bottom-left-radius\":\"<x-one-radius>\",\"border-bottom-right-radius\":\"<x-one-radius>\",\"border-bottom-style\":\"<border-style>\",\"border-bottom-width\":\"<border-width>\",\"border-collapse\":\"collapse | separate | inherit\",\"border-color\":{multi:\"<color> | inherit\",max:4},\"border-image\":1,\"border-image-outset\":{multi:\"<length> | <number>\",max:4},\"border-image-repeat\":{multi:\"stretch | repeat | round\",max:2},\"border-image-slice\":function(expression){var part,valid=!1,numeric=\"<number> | <percentage>\",fill=!1,count=0,max=4;for(ValidationTypes.isAny(expression,\"fill\")&&(fill=!0,valid=!0);expression.hasNext()&&max>count&&(valid=ValidationTypes.isAny(expression,numeric));)count++;if(fill?valid=!0:ValidationTypes.isAny(expression,\"fill\"),expression.hasNext())throw part=expression.next(),valid?new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col):new ValidationError(\"Expected ([<number> | <percentage>]{1,4} && fill?) but found '\"+part+\"'.\",part.line,part.col)},\"border-image-source\":\"<image> | none\",\"border-image-width\":{multi:\"<length> | <percentage> | <number> | auto\",max:4},\"border-left\":\"<border-width> || <border-style> || <color>\",\"border-left-color\":\"<color> | inherit\",\"border-left-style\":\"<border-style>\",\"border-left-width\":\"<border-width>\",\"border-radius\":function(expression){for(var part,valid=!1,simple=\"<length> | <percentage> | inherit\",slash=!1,count=0,max=8;expression.hasNext()&&max>count;){if(valid=ValidationTypes.isAny(expression,simple),!valid){if(!(\"/\"==expression.peek()&&count>0)||slash)break;slash=!0,max=count+5,expression.next()}count++}if(expression.hasNext())throw part=expression.next(),valid?new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col):new ValidationError(\"Expected (<'border-radius'>) but found '\"+part+\"'.\",part.line,part.col)},\"border-right\":\"<border-width> || <border-style> || <color>\",\"border-right-color\":\"<color> | inherit\",\"border-right-style\":\"<border-style>\",\"border-right-width\":\"<border-width>\",\"border-spacing\":{multi:\"<length> | inherit\",max:2},\"border-style\":{multi:\"<border-style>\",max:4},\"border-top\":\"<border-width> || <border-style> || <color>\",\"border-top-color\":\"<color> | inherit\",\"border-top-left-radius\":\"<x-one-radius>\",\"border-top-right-radius\":\"<x-one-radius>\",\"border-top-style\":\"<border-style>\",\"border-top-width\":\"<border-width>\",\"border-width\":{multi:\"<border-width>\",max:4},bottom:\"<margin-width> | inherit\",\"-moz-box-align\":\"start | end | center | baseline | stretch\",\"-moz-box-decoration-break\":\"slice |clone\",\"-moz-box-direction\":\"normal | reverse | inherit\",\"-moz-box-flex\":\"<number>\",\"-moz-box-flex-group\":\"<integer>\",\"-moz-box-lines\":\"single | multiple\",\"-moz-box-ordinal-group\":\"<integer>\",\"-moz-box-orient\":\"horizontal | vertical | inline-axis | block-axis | inherit\",\"-moz-box-pack\":\"start | end | center | justify\",\"-webkit-box-align\":\"start | end | center | baseline | stretch\",\"-webkit-box-decoration-break\":\"slice |clone\",\"-webkit-box-direction\":\"normal | reverse | inherit\",\"-webkit-box-flex\":\"<number>\",\"-webkit-box-flex-group\":\"<integer>\",\"-webkit-box-lines\":\"single | multiple\",\"-webkit-box-ordinal-group\":\"<integer>\",\"-webkit-box-orient\":\"horizontal | vertical | inline-axis | block-axis | inherit\",\"-webkit-box-pack\":\"start | end | center | justify\",\"box-shadow\":function(expression){var part;if(ValidationTypes.isAny(expression,\"none\")){if(expression.hasNext())throw part=expression.next(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)}else Validation.multiProperty(\"<shadow>\",expression,!0,1/0)},\"box-sizing\":\"content-box | border-box | inherit\",\"break-after\":\"auto | always | avoid | left | right | page | column | avoid-page | avoid-column\",\"break-before\":\"auto | always | avoid | left | right | page | column | avoid-page | avoid-column\",\"break-inside\":\"auto | avoid | avoid-page | avoid-column\",\"caption-side\":\"top | bottom | inherit\",clear:\"none | right | left | both | inherit\",clip:1,color:\"<color> | inherit\",\"color-profile\":1,\"column-count\":\"<integer> | auto\",\"column-fill\":\"auto | balance\",\"column-gap\":\"<length> | normal\",\"column-rule\":\"<border-width> || <border-style> || <color>\",\"column-rule-color\":\"<color>\",\"column-rule-style\":\"<border-style>\",\"column-rule-width\":\"<border-width>\",\"column-span\":\"none | all\",\"column-width\":\"<length> | auto\",columns:1,content:1,\"counter-increment\":1,\"counter-reset\":1,crop:\"<shape> | auto\",cue:\"cue-after | cue-before | inherit\",\"cue-after\":1,\"cue-before\":1,cursor:1,direction:\"ltr | rtl | inherit\",display:\"inline | block | list-item | inline-block | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | grid | inline-grid | none | inherit | -moz-box | -moz-inline-block | -moz-inline-box | -moz-inline-grid | -moz-inline-stack | -moz-inline-table | -moz-grid | -moz-grid-group | -moz-grid-line | -moz-groupbox | -moz-deck | -moz-popup | -moz-stack | -moz-marker | -webkit-box | -webkit-inline-box | -ms-flexbox | -ms-inline-flexbox | flex | -webkit-flex | inline-flex | -webkit-inline-flex\",\"dominant-baseline\":1,\"drop-initial-after-adjust\":\"central | middle | after-edge | text-after-edge | ideographic | alphabetic | mathematical | <percentage> | <length>\",\"drop-initial-after-align\":\"baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical\",\"drop-initial-before-adjust\":\"before-edge | text-before-edge | central | middle | hanging | mathematical | <percentage> | <length>\",\"drop-initial-before-align\":\"caps-height | baseline | use-script | before-edge | text-before-edge | after-edge | text-after-edge | central | middle | ideographic | alphabetic | hanging | mathematical\",\"drop-initial-size\":\"auto | line | <length> | <percentage>\",\"drop-initial-value\":\"initial | <integer>\",elevation:\"<angle> | below | level | above | higher | lower | inherit\",\"empty-cells\":\"show | hide | inherit\",filter:1,fit:\"fill | hidden | meet | slice\",\"fit-position\":1,flex:\"<flex>\",\"flex-basis\":\"<width>\",\"flex-direction\":\"row | row-reverse | column | column-reverse\",\"flex-flow\":\"<flex-direction> || <flex-wrap>\",\"flex-grow\":\"<number>\",\"flex-shrink\":\"<number>\",\"flex-wrap\":\"nowrap | wrap | wrap-reverse\",\"-webkit-flex\":\"<flex>\",\"-webkit-flex-basis\":\"<width>\",\"-webkit-flex-direction\":\"row | row-reverse | column | column-reverse\",\"-webkit-flex-flow\":\"<flex-direction> || <flex-wrap>\",\"-webkit-flex-grow\":\"<number>\",\"-webkit-flex-shrink\":\"<number>\",\"-webkit-flex-wrap\":\"nowrap | wrap | wrap-reverse\",\"-ms-flex\":\"<flex>\",\"-ms-flex-align\":\"start | end | center | stretch | baseline\",\"-ms-flex-direction\":\"row | row-reverse | column | column-reverse | inherit\",\"-ms-flex-order\":\"<number>\",\"-ms-flex-pack\":\"start | end | center | justify\",\"-ms-flex-wrap\":\"nowrap | wrap | wrap-reverse\",\"float\":\"left | right | none | inherit\",\"float-offset\":1,font:1,\"font-family\":1,\"font-size\":\"<absolute-size> | <relative-size> | <length> | <percentage> | inherit\",\"font-size-adjust\":\"<number> | none | inherit\",\"font-stretch\":\"normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded | inherit\",\"font-style\":\"normal | italic | oblique | inherit\",\"font-variant\":\"normal | small-caps | inherit\",\"font-weight\":\"normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit\",\"grid-cell-stacking\":\"columns | rows | layer\",\"grid-column\":1,\"grid-columns\":1,\"grid-column-align\":\"start | end | center | stretch\",\"grid-column-sizing\":1,\"grid-column-span\":\"<integer>\",\"grid-flow\":\"none | rows | columns\",\"grid-layer\":\"<integer>\",\"grid-row\":1,\"grid-rows\":1,\"grid-row-align\":\"start | end | center | stretch\",\"grid-row-span\":\"<integer>\",\"grid-row-sizing\":1,\"hanging-punctuation\":1,height:\"<margin-width> | <content-sizing> | inherit\",\"hyphenate-after\":\"<integer> | auto\",\"hyphenate-before\":\"<integer> | auto\",\"hyphenate-character\":\"<string> | auto\",\"hyphenate-lines\":\"no-limit | <integer>\",\"hyphenate-resource\":1,hyphens:\"none | manual | auto\",icon:1,\"image-orientation\":\"angle | auto\",\"image-rendering\":1,\"image-resolution\":1,\"inline-box-align\":\"initial | last | <integer>\",\"justify-content\":\"flex-start | flex-end | center | space-between | space-around\",\"-webkit-justify-content\":\"flex-start | flex-end | center | space-between | space-around\",left:\"<margin-width> | inherit\",\"letter-spacing\":\"<length> | normal | inherit\",\"line-height\":\"<number> | <length> | <percentage> | normal | inherit\",\"line-break\":\"auto | loose | normal | strict\",\"line-stacking\":1,\"line-stacking-ruby\":\"exclude-ruby | include-ruby\",\"line-stacking-shift\":\"consider-shifts | disregard-shifts\",\"line-stacking-strategy\":\"inline-line-height | block-line-height | max-height | grid-height\",\"list-style\":1,\"list-style-image\":\"<uri> | none | inherit\",\"list-style-position\":\"inside | outside | inherit\",\"list-style-type\":\"disc | circle | square | decimal | decimal-leading-zero | lower-roman | upper-roman | lower-greek | lower-latin | upper-latin | armenian | georgian | lower-alpha | upper-alpha | none | inherit\",margin:{multi:\"<margin-width> | inherit\",max:4},\"margin-bottom\":\"<margin-width> | inherit\",\"margin-left\":\"<margin-width> | inherit\",\"margin-right\":\"<margin-width> | inherit\",\"margin-top\":\"<margin-width> | inherit\",mark:1,\"mark-after\":1,\"mark-before\":1,marks:1,\"marquee-direction\":1,\"marquee-play-count\":1,\"marquee-speed\":1,\"marquee-style\":1,\"max-height\":\"<length> | <percentage> | <content-sizing> | none | inherit\",\"max-width\":\"<length> | <percentage> | <content-sizing> | none | inherit\",\"min-height\":\"<length> | <percentage> | <content-sizing> | contain-floats | -moz-contain-floats | -webkit-contain-floats | inherit\",\"min-width\":\"<length> | <percentage> | <content-sizing> | contain-floats | -moz-contain-floats | -webkit-contain-floats | inherit\",\"move-to\":1,\"nav-down\":1,\"nav-index\":1,\"nav-left\":1,\"nav-right\":1,\"nav-up\":1,opacity:\"<number> | inherit\",order:\"<integer>\",\"-webkit-order\":\"<integer>\",orphans:\"<integer> | inherit\",outline:1,\"outline-color\":\"<color> | invert | inherit\",\"outline-offset\":1,\"outline-style\":\"<border-style> | inherit\",\"outline-width\":\"<border-width> | inherit\",overflow:\"visible | hidden | scroll | auto | inherit\",\"overflow-style\":1,\"overflow-wrap\":\"normal | break-word\",\"overflow-x\":1,\"overflow-y\":1,padding:{multi:\"<padding-width> | inherit\",max:4},\"padding-bottom\":\"<padding-width> | inherit\",\"padding-left\":\"<padding-width> | inherit\",\"padding-right\":\"<padding-width> | inherit\",\"padding-top\":\"<padding-width> | inherit\",page:1,\"page-break-after\":\"auto | always | avoid | left | right | inherit\",\"page-break-before\":\"auto | always | avoid | left | right | inherit\",\"page-break-inside\":\"auto | avoid | inherit\",\"page-policy\":1,pause:1,\"pause-after\":1,\"pause-before\":1,perspective:1,\"perspective-origin\":1,phonemes:1,pitch:1,\"pitch-range\":1,\"play-during\":1,\"pointer-events\":\"auto | none | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | inherit\",position:\"static | relative | absolute | fixed | inherit\",\"presentation-level\":1,\"punctuation-trim\":1,quotes:1,\"rendering-intent\":1,resize:1,rest:1,\"rest-after\":1,\"rest-before\":1,richness:1,right:\"<margin-width> | inherit\",rotation:1,\"rotation-point\":1,\"ruby-align\":1,\"ruby-overhang\":1,\"ruby-position\":1,\"ruby-span\":1,size:1,speak:\"normal | none | spell-out | inherit\",\"speak-header\":\"once | always | inherit\",\"speak-numeral\":\"digits | continuous | inherit\",\"speak-punctuation\":\"code | none | inherit\",\"speech-rate\":1,src:1,stress:1,\"string-set\":1,\"table-layout\":\"auto | fixed | inherit\",\"tab-size\":\"<integer> | <length>\",target:1,\"target-name\":1,\"target-new\":1,\"target-position\":1,\"text-align\":\"left | right | center | justify | inherit\",\"text-align-last\":1,\"text-decoration\":1,\"text-emphasis\":1,\"text-height\":1,\"text-indent\":\"<length> | <percentage> | inherit\",\"text-justify\":\"auto | none | inter-word | inter-ideograph | inter-cluster | distribute | kashida\",\"text-outline\":1,\"text-overflow\":1,\"text-rendering\":\"auto | optimizeSpeed | optimizeLegibility | geometricPrecision | inherit\",\"text-shadow\":1,\"text-transform\":\"capitalize | uppercase | lowercase | none | inherit\",\"text-wrap\":\"normal | none | avoid\",top:\"<margin-width> | inherit\",\"-ms-touch-action\":\"auto | none | pan-x | pan-y\",\"touch-action\":\"auto | none | pan-x | pan-y\",transform:1,\"transform-origin\":1,\"transform-style\":1,transition:1,\"transition-delay\":1,\"transition-duration\":1,\"transition-property\":1,\"transition-timing-function\":1,\"unicode-bidi\":\"normal | embed | isolate | bidi-override | isolate-override | plaintext | inherit\",\"user-modify\":\"read-only | read-write | write-only | inherit\",\"user-select\":\"none | text | toggle | element | elements | all | inherit\",\"vertical-align\":\"auto | use-script | baseline | sub | super | top | text-top | central | middle | bottom | text-bottom | <percentage> | <length>\",visibility:\"visible | hidden | collapse | inherit\",\"voice-balance\":1,\"voice-duration\":1,\"voice-family\":1,\"voice-pitch\":1,\"voice-pitch-range\":1,\"voice-rate\":1,\"voice-stress\":1,\"voice-volume\":1,volume:1,\"white-space\":\"normal | pre | nowrap | pre-wrap | pre-line | inherit | -pre-wrap | -o-pre-wrap | -moz-pre-wrap | -hp-pre-wrap\",\"white-space-collapse\":1,widows:\"<integer> | inherit\",width:\"<length> | <percentage> | <content-sizing> | auto | inherit\",\"word-break\":\"normal | keep-all | break-all\",\"word-spacing\":\"<length> | normal | inherit\",\"word-wrap\":\"normal | break-word\",\"writing-mode\":\"horizontal-tb | vertical-rl | vertical-lr | lr-tb | rl-tb | tb-rl | bt-rl | tb-lr | bt-lr | lr-bt | rl-bt | lr | rl | tb | inherit\",\"z-index\":\"<integer> | auto | inherit\",zoom:\"<number> | <percentage> | normal\"};PropertyName.prototype=new SyntaxUnit,PropertyName.prototype.constructor=PropertyName,PropertyName.prototype.toString=function(){return(this.hack?this.hack:\"\")+this.text},PropertyValue.prototype=new SyntaxUnit,PropertyValue.prototype.constructor=PropertyValue,PropertyValueIterator.prototype.count=function(){return this._parts.length},PropertyValueIterator.prototype.isFirst=function(){return 0===this._i},PropertyValueIterator.prototype.hasNext=function(){return this._i<this._parts.length},PropertyValueIterator.prototype.mark=function(){this._marks.push(this._i)},PropertyValueIterator.prototype.peek=function(count){return this.hasNext()?this._parts[this._i+(count||0)]:null},PropertyValueIterator.prototype.next=function(){return this.hasNext()?this._parts[this._i++]:null},PropertyValueIterator.prototype.previous=function(){return this._i>0?this._parts[--this._i]:null},PropertyValueIterator.prototype.restore=function(){this._marks.length&&(this._i=this._marks.pop())},PropertyValuePart.prototype=new SyntaxUnit,PropertyValuePart.prototype.constructor=PropertyValuePart,PropertyValuePart.fromToken=function(token){return new PropertyValuePart(token.value,token.startLine,token.startCol)};var Pseudos={\":first-letter\":1,\":first-line\":1,\":before\":1,\":after\":1};Pseudos.ELEMENT=1,Pseudos.CLASS=2,Pseudos.isElement=function(pseudo){return 0===pseudo.indexOf(\"::\")||Pseudos[pseudo.toLowerCase()]==Pseudos.ELEMENT},Selector.prototype=new SyntaxUnit,Selector.prototype.constructor=Selector,SelectorPart.prototype=new SyntaxUnit,SelectorPart.prototype.constructor=SelectorPart,SelectorSubPart.prototype=new SyntaxUnit,SelectorSubPart.prototype.constructor=SelectorSubPart,Specificity.prototype={constructor:Specificity,compare:function(other){var i,len,comps=[\"a\",\"b\",\"c\",\"d\"];for(i=0,len=comps.length;len>i;i++){if(this[comps[i]]<other[comps[i]])return-1;if(this[comps[i]]>other[comps[i]])return 1}return 0},valueOf:function(){return 1e3*this.a+100*this.b+10*this.c+this.d},toString:function(){return this.a+\",\"+this.b+\",\"+this.c+\",\"+this.d}},Specificity.calculate=function(selector){function updateValues(part){var i,j,len,num,modifier,elementName=part.elementName?part.elementName.text:\"\";for(elementName&&\"*\"!=elementName.charAt(elementName.length-1)&&d++,i=0,len=part.modifiers.length;len>i;i++)switch(modifier=part.modifiers[i],modifier.type){case\"class\":case\"attribute\":c++;break;case\"id\":b++;break;case\"pseudo\":Pseudos.isElement(modifier.text)?d++:c++;break;case\"not\":for(j=0,num=modifier.args.length;num>j;j++)updateValues(modifier.args[j])}}var i,len,part,b=0,c=0,d=0;for(i=0,len=selector.parts.length;len>i;i++)part=selector.parts[i],part instanceof SelectorPart&&updateValues(part);return new Specificity(0,b,c,d)};var h=/^[0-9a-fA-F]$/,nonascii=/^[\\u0080-\\uFFFF]$/,nl=/\\n|\\r\\n|\\r|\\f/;TokenStream.prototype=mix(new TokenStreamBase,{_getToken:function(){var c,reader=this._reader,token=null,startLine=reader.getLine(),startCol=reader.getCol();for(c=reader.read();c;){switch(c){case\"/\":token=\"*\"==reader.peek()?this.commentToken(c,startLine,startCol):this.charToken(c,startLine,startCol);break;case\"|\":case\"~\":case\"^\":case\"$\":case\"*\":token=\"=\"==reader.peek()?this.comparisonToken(c,startLine,startCol):this.charToken(c,startLine,startCol);break;case'\"':case\"'\":token=this.stringToken(c,startLine,startCol);break;case\"#\":token=isNameChar(reader.peek())?this.hashToken(c,startLine,startCol):this.charToken(c,startLine,startCol);break;case\".\":token=isDigit(reader.peek())?this.numberToken(c,startLine,startCol):this.charToken(c,startLine,startCol);break;case\"-\":token=\"-\"==reader.peek()?this.htmlCommentEndToken(c,startLine,startCol):isNameStart(reader.peek())?this.identOrFunctionToken(c,startLine,startCol):this.charToken(c,startLine,startCol);break;case\"!\":token=this.importantToken(c,startLine,startCol);break;case\"@\":token=this.atRuleToken(c,startLine,startCol);break;case\":\":token=this.notToken(c,startLine,startCol);break;case\"<\":token=this.htmlCommentStartToken(c,startLine,startCol);break;case\"U\":case\"u\":if(\"+\"==reader.peek()){token=this.unicodeRangeToken(c,startLine,startCol);break}default:token=isDigit(c)?this.numberToken(c,startLine,startCol):isWhitespace(c)?this.whitespaceToken(c,startLine,startCol):isIdentStart(c)?this.identOrFunctionToken(c,startLine,startCol):this.charToken(c,startLine,startCol)}break}return token||null!==c||(token=this.createToken(Tokens.EOF,null,startLine,startCol)),token},createToken:function(tt,value,startLine,startCol,options){var reader=this._reader;return options=options||{},{value:value,type:tt,channel:options.channel,endChar:options.endChar,hide:options.hide||!1,startLine:startLine,startCol:startCol,endLine:reader.getLine(),endCol:reader.getCol()}},atRuleToken:function(first,startLine,startCol){var ident,rule=first,reader=this._reader,tt=Tokens.CHAR;return reader.mark(),ident=this.readName(),rule=first+ident,tt=Tokens.type(rule.toLowerCase()),(tt==Tokens.CHAR||tt==Tokens.UNKNOWN)&&(rule.length>1?tt=Tokens.UNKNOWN_SYM:(tt=Tokens.CHAR,rule=first,reader.reset())),this.createToken(tt,rule,startLine,startCol)},charToken:function(c,startLine,startCol){var tt=Tokens.type(c),opts={};return-1==tt?tt=Tokens.CHAR:opts.endChar=Tokens[tt].endChar,this.createToken(tt,c,startLine,startCol,opts)},commentToken:function(first,startLine,startCol){var comment=(this._reader,this.readComment(first));return this.createToken(Tokens.COMMENT,comment,startLine,startCol)},comparisonToken:function(c,startLine,startCol){var reader=this._reader,comparison=c+reader.read(),tt=Tokens.type(comparison)||Tokens.CHAR;return this.createToken(tt,comparison,startLine,startCol)\n},hashToken:function(first,startLine,startCol){var name=(this._reader,this.readName(first));return this.createToken(Tokens.HASH,name,startLine,startCol)},htmlCommentStartToken:function(first,startLine,startCol){var reader=this._reader,text=first;return reader.mark(),text+=reader.readCount(3),\"<!--\"==text?this.createToken(Tokens.CDO,text,startLine,startCol):(reader.reset(),this.charToken(first,startLine,startCol))},htmlCommentEndToken:function(first,startLine,startCol){var reader=this._reader,text=first;return reader.mark(),text+=reader.readCount(2),\"-->\"==text?this.createToken(Tokens.CDC,text,startLine,startCol):(reader.reset(),this.charToken(first,startLine,startCol))},identOrFunctionToken:function(first,startLine,startCol){var reader=this._reader,ident=this.readName(first),tt=Tokens.IDENT;return\"(\"==reader.peek()?(ident+=reader.read(),\"url(\"==ident.toLowerCase()?(tt=Tokens.URI,ident=this.readURI(ident),\"url(\"==ident.toLowerCase()&&(tt=Tokens.FUNCTION)):tt=Tokens.FUNCTION):\":\"==reader.peek()&&\"progid\"==ident.toLowerCase()&&(ident+=reader.readTo(\"(\"),tt=Tokens.IE_FUNCTION),this.createToken(tt,ident,startLine,startCol)},importantToken:function(first,startLine,startCol){var temp,c,reader=this._reader,important=first,tt=Tokens.CHAR;for(reader.mark(),c=reader.read();c;){if(\"/\"==c){if(\"*\"!=reader.peek())break;if(temp=this.readComment(c),\"\"===temp)break}else{if(!isWhitespace(c)){if(/i/i.test(c)){temp=reader.readCount(8),/mportant/i.test(temp)&&(important+=c+temp,tt=Tokens.IMPORTANT_SYM);break}break}important+=c+this.readWhitespace()}c=reader.read()}return tt==Tokens.CHAR?(reader.reset(),this.charToken(first,startLine,startCol)):this.createToken(tt,important,startLine,startCol)},notToken:function(first,startLine,startCol){var reader=this._reader,text=first;return reader.mark(),text+=reader.readCount(4),\":not(\"==text.toLowerCase()?this.createToken(Tokens.NOT,text,startLine,startCol):(reader.reset(),this.charToken(first,startLine,startCol))},numberToken:function(first,startLine,startCol){var ident,reader=this._reader,value=this.readNumber(first),tt=Tokens.NUMBER,c=reader.peek();return isIdentStart(c)?(ident=this.readName(reader.read()),value+=ident,tt=/^em$|^ex$|^px$|^gd$|^rem$|^vw$|^vh$|^vmax$|^vmin$|^ch$|^cm$|^mm$|^in$|^pt$|^pc$/i.test(ident)?Tokens.LENGTH:/^deg|^rad$|^grad$/i.test(ident)?Tokens.ANGLE:/^ms$|^s$/i.test(ident)?Tokens.TIME:/^hz$|^khz$/i.test(ident)?Tokens.FREQ:/^dpi$|^dpcm$/i.test(ident)?Tokens.RESOLUTION:Tokens.DIMENSION):\"%\"==c&&(value+=reader.read(),tt=Tokens.PERCENTAGE),this.createToken(tt,value,startLine,startCol)},stringToken:function(first,startLine,startCol){for(var delim=first,string=first,reader=this._reader,prev=first,tt=Tokens.STRING,c=reader.read();c&&(string+=c,c!=delim||\"\\\\\"==prev);){if(isNewLine(reader.peek())&&\"\\\\\"!=c){tt=Tokens.INVALID;break}prev=c,c=reader.read()}return null===c&&(tt=Tokens.INVALID),this.createToken(tt,string,startLine,startCol)},unicodeRangeToken:function(first,startLine,startCol){var temp,reader=this._reader,value=first,tt=Tokens.CHAR;return\"+\"==reader.peek()&&(reader.mark(),value+=reader.read(),value+=this.readUnicodeRangePart(!0),2==value.length?reader.reset():(tt=Tokens.UNICODE_RANGE,-1==value.indexOf(\"?\")&&\"-\"==reader.peek()&&(reader.mark(),temp=reader.read(),temp+=this.readUnicodeRangePart(!1),1==temp.length?reader.reset():value+=temp))),this.createToken(tt,value,startLine,startCol)},whitespaceToken:function(first,startLine,startCol){var value=(this._reader,first+this.readWhitespace());return this.createToken(Tokens.S,value,startLine,startCol)},readUnicodeRangePart:function(allowQuestionMark){for(var reader=this._reader,part=\"\",c=reader.peek();isHexDigit(c)&&6>part.length;)reader.read(),part+=c,c=reader.peek();if(allowQuestionMark)for(;\"?\"==c&&6>part.length;)reader.read(),part+=c,c=reader.peek();return part},readWhitespace:function(){for(var reader=this._reader,whitespace=\"\",c=reader.peek();isWhitespace(c);)reader.read(),whitespace+=c,c=reader.peek();return whitespace},readNumber:function(first){for(var reader=this._reader,number=first,hasDot=\".\"==first,c=reader.peek();c;){if(isDigit(c))number+=reader.read();else{if(\".\"!=c)break;if(hasDot)break;hasDot=!0,number+=reader.read()}c=reader.peek()}return number},readString:function(){for(var reader=this._reader,delim=reader.read(),string=delim,prev=delim,c=reader.peek();c&&(c=reader.read(),string+=c,c!=delim||\"\\\\\"==prev);){if(isNewLine(reader.peek())&&\"\\\\\"!=c){string=\"\";break}prev=c,c=reader.peek()}return null===c&&(string=\"\"),string},readURI:function(first){var reader=this._reader,uri=first,inner=\"\",c=reader.peek();for(reader.mark();c&&isWhitespace(c);)reader.read(),c=reader.peek();for(inner=\"'\"==c||'\"'==c?this.readString():this.readURL(),c=reader.peek();c&&isWhitespace(c);)reader.read(),c=reader.peek();return\"\"===inner||\")\"!=c?(uri=first,reader.reset()):uri+=inner+reader.read(),uri},readURL:function(){for(var reader=this._reader,url=\"\",c=reader.peek();/^[!#$%&\\\\*-~]$/.test(c);)url+=reader.read(),c=reader.peek();return url},readName:function(first){for(var reader=this._reader,ident=first||\"\",c=reader.peek();;)if(\"\\\\\"==c)ident+=this.readEscape(reader.read()),c=reader.peek();else{if(!c||!isNameChar(c))break;ident+=reader.read(),c=reader.peek()}return ident},readEscape:function(first){var reader=this._reader,cssEscape=first||\"\",i=0,c=reader.peek();if(isHexDigit(c))do cssEscape+=reader.read(),c=reader.peek();while(c&&isHexDigit(c)&&6>++i);return 3==cssEscape.length&&/\\s/.test(c)||7==cssEscape.length||1==cssEscape.length?reader.read():c=\"\",cssEscape+c},readComment:function(first){var reader=this._reader,comment=first||\"\",c=reader.read();if(\"*\"==c){for(;c;){if(comment+=c,comment.length>2&&\"*\"==c&&\"/\"==reader.peek()){comment+=reader.read();break}c=reader.read()}return comment}return\"\"}});var Tokens=[{name:\"CDO\"},{name:\"CDC\"},{name:\"S\",whitespace:!0},{name:\"COMMENT\",comment:!0,hide:!0,channel:\"comment\"},{name:\"INCLUDES\",text:\"~=\"},{name:\"DASHMATCH\",text:\"|=\"},{name:\"PREFIXMATCH\",text:\"^=\"},{name:\"SUFFIXMATCH\",text:\"$=\"},{name:\"SUBSTRINGMATCH\",text:\"*=\"},{name:\"STRING\"},{name:\"IDENT\"},{name:\"HASH\"},{name:\"IMPORT_SYM\",text:\"@import\"},{name:\"PAGE_SYM\",text:\"@page\"},{name:\"MEDIA_SYM\",text:\"@media\"},{name:\"FONT_FACE_SYM\",text:\"@font-face\"},{name:\"CHARSET_SYM\",text:\"@charset\"},{name:\"NAMESPACE_SYM\",text:\"@namespace\"},{name:\"VIEWPORT_SYM\",text:[\"@viewport\",\"@-ms-viewport\"]},{name:\"UNKNOWN_SYM\"},{name:\"KEYFRAMES_SYM\",text:[\"@keyframes\",\"@-webkit-keyframes\",\"@-moz-keyframes\",\"@-o-keyframes\"]},{name:\"IMPORTANT_SYM\"},{name:\"LENGTH\"},{name:\"ANGLE\"},{name:\"TIME\"},{name:\"FREQ\"},{name:\"DIMENSION\"},{name:\"PERCENTAGE\"},{name:\"NUMBER\"},{name:\"URI\"},{name:\"FUNCTION\"},{name:\"UNICODE_RANGE\"},{name:\"INVALID\"},{name:\"PLUS\",text:\"+\"},{name:\"GREATER\",text:\">\"},{name:\"COMMA\",text:\",\"},{name:\"TILDE\",text:\"~\"},{name:\"NOT\"},{name:\"TOPLEFTCORNER_SYM\",text:\"@top-left-corner\"},{name:\"TOPLEFT_SYM\",text:\"@top-left\"},{name:\"TOPCENTER_SYM\",text:\"@top-center\"},{name:\"TOPRIGHT_SYM\",text:\"@top-right\"},{name:\"TOPRIGHTCORNER_SYM\",text:\"@top-right-corner\"},{name:\"BOTTOMLEFTCORNER_SYM\",text:\"@bottom-left-corner\"},{name:\"BOTTOMLEFT_SYM\",text:\"@bottom-left\"},{name:\"BOTTOMCENTER_SYM\",text:\"@bottom-center\"},{name:\"BOTTOMRIGHT_SYM\",text:\"@bottom-right\"},{name:\"BOTTOMRIGHTCORNER_SYM\",text:\"@bottom-right-corner\"},{name:\"LEFTTOP_SYM\",text:\"@left-top\"},{name:\"LEFTMIDDLE_SYM\",text:\"@left-middle\"},{name:\"LEFTBOTTOM_SYM\",text:\"@left-bottom\"},{name:\"RIGHTTOP_SYM\",text:\"@right-top\"},{name:\"RIGHTMIDDLE_SYM\",text:\"@right-middle\"},{name:\"RIGHTBOTTOM_SYM\",text:\"@right-bottom\"},{name:\"RESOLUTION\",state:\"media\"},{name:\"IE_FUNCTION\"},{name:\"CHAR\"},{name:\"PIPE\",text:\"|\"},{name:\"SLASH\",text:\"/\"},{name:\"MINUS\",text:\"-\"},{name:\"STAR\",text:\"*\"},{name:\"LBRACE\",endChar:\"}\",text:\"{\"},{name:\"RBRACE\",text:\"}\"},{name:\"LBRACKET\",endChar:\"]\",text:\"[\"},{name:\"RBRACKET\",text:\"]\"},{name:\"EQUALS\",text:\"=\"},{name:\"COLON\",text:\":\"},{name:\"SEMICOLON\",text:\";\"},{name:\"LPAREN\",endChar:\")\",text:\"(\"},{name:\"RPAREN\",text:\")\"},{name:\"DOT\",text:\".\"}];(function(){var nameMap=[],typeMap={};Tokens.UNKNOWN=-1,Tokens.unshift({name:\"EOF\"});for(var i=0,len=Tokens.length;len>i;i++)if(nameMap.push(Tokens[i].name),Tokens[Tokens[i].name]=i,Tokens[i].text)if(Tokens[i].text instanceof Array)for(var j=0;Tokens[i].text.length>j;j++)typeMap[Tokens[i].text[j]]=i;else typeMap[Tokens[i].text]=i;Tokens.name=function(tt){return nameMap[tt]},Tokens.type=function(c){return typeMap[c]||-1}})();var Validation={validate:function(property,value){var name=(\"\"+property).toLowerCase(),expression=(value.parts,new PropertyValueIterator(value)),spec=Properties[name];if(spec)\"number\"!=typeof spec&&(\"string\"==typeof spec?spec.indexOf(\"||\")>-1?this.groupProperty(spec,expression):this.singleProperty(spec,expression,1):spec.multi?this.multiProperty(spec.multi,expression,spec.comma,spec.max||1/0):\"function\"==typeof spec&&spec(expression));else if(0!==name.indexOf(\"-\"))throw new ValidationError(\"Unknown property '\"+property+\"'.\",property.line,property.col)},singleProperty:function(types,expression,max){for(var part,result=!1,value=expression.value,count=0;expression.hasNext()&&max>count&&(result=ValidationTypes.isAny(expression,types));)count++;if(!result)throw expression.hasNext()&&!expression.isFirst()?(part=expression.peek(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)):new ValidationError(\"Expected (\"+types+\") but found '\"+value+\"'.\",value.line,value.col);if(expression.hasNext())throw part=expression.next(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)},multiProperty:function(types,expression,comma,max){for(var part,result=!1,value=expression.value,count=0;expression.hasNext()&&!result&&max>count&&ValidationTypes.isAny(expression,types);)if(count++,expression.hasNext()){if(comma){if(\",\"!=expression.peek())break;part=expression.next()}}else result=!0;if(!result)throw expression.hasNext()&&!expression.isFirst()?(part=expression.peek(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)):(part=expression.previous(),comma&&\",\"==part?new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col):new ValidationError(\"Expected (\"+types+\") but found '\"+value+\"'.\",value.line,value.col));if(expression.hasNext())throw part=expression.next(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)},groupProperty:function(types,expression){for(var name,part,result=!1,value=expression.value,typeCount=types.split(\"||\").length,groups={count:0},partial=!1;expression.hasNext()&&!result&&(name=ValidationTypes.isAnyOfGroup(expression,types))&&!groups[name];)groups[name]=1,groups.count++,partial=!0,groups.count!=typeCount&&expression.hasNext()||(result=!0);if(!result)throw partial&&expression.hasNext()?(part=expression.peek(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)):new ValidationError(\"Expected (\"+types+\") but found '\"+value+\"'.\",value.line,value.col);if(expression.hasNext())throw part=expression.next(),new ValidationError(\"Expected end of value but found '\"+part+\"'.\",part.line,part.col)}};ValidationError.prototype=Error();var ValidationTypes={isLiteral:function(part,literals){var i,len,text=(\"\"+part.text).toLowerCase(),args=literals.split(\" | \"),found=!1;for(i=0,len=args.length;len>i&&!found;i++)text==args[i].toLowerCase()&&(found=!0);return found},isSimple:function(type){return!!this.simple[type]},isComplex:function(type){return!!this.complex[type]},isAny:function(expression,types){var i,len,args=types.split(\" | \"),found=!1;for(i=0,len=args.length;len>i&&!found&&expression.hasNext();i++)found=this.isType(expression,args[i]);return found},isAnyOfGroup:function(expression,types){var i,len,args=types.split(\" || \"),found=!1;for(i=0,len=args.length;len>i&&!found;i++)found=this.isType(expression,args[i]);return found?args[i-1]:!1},isType:function(expression,type){var part=expression.peek(),result=!1;return\"<\"!=type.charAt(0)?(result=this.isLiteral(part,type),result&&expression.next()):this.simple[type]?(result=this.simple[type](part),result&&expression.next()):result=this.complex[type](expression),result},simple:{\"<absolute-size>\":function(part){return ValidationTypes.isLiteral(part,\"xx-small | x-small | small | medium | large | x-large | xx-large\")},\"<attachment>\":function(part){return ValidationTypes.isLiteral(part,\"scroll | fixed | local\")},\"<attr>\":function(part){return\"function\"==part.type&&\"attr\"==part.name},\"<bg-image>\":function(part){return this[\"<image>\"](part)||this[\"<gradient>\"](part)||\"none\"==part},\"<gradient>\":function(part){return\"function\"==part.type&&/^(?:\\-(?:ms|moz|o|webkit)\\-)?(?:repeating\\-)?(?:radial\\-|linear\\-)?gradient/i.test(part)},\"<box>\":function(part){return ValidationTypes.isLiteral(part,\"padding-box | border-box | content-box\")},\"<content>\":function(part){return\"function\"==part.type&&\"content\"==part.name},\"<relative-size>\":function(part){return ValidationTypes.isLiteral(part,\"smaller | larger\")},\"<ident>\":function(part){return\"identifier\"==part.type},\"<length>\":function(part){return\"function\"==part.type&&/^(?:\\-(?:ms|moz|o|webkit)\\-)?calc/i.test(part)?!0:\"length\"==part.type||\"number\"==part.type||\"integer\"==part.type||\"0\"==part},\"<color>\":function(part){return\"color\"==part.type||\"transparent\"==part},\"<number>\":function(part){return\"number\"==part.type||this[\"<integer>\"](part)},\"<integer>\":function(part){return\"integer\"==part.type},\"<line>\":function(part){return\"integer\"==part.type},\"<angle>\":function(part){return\"angle\"==part.type},\"<uri>\":function(part){return\"uri\"==part.type},\"<image>\":function(part){return this[\"<uri>\"](part)},\"<percentage>\":function(part){return\"percentage\"==part.type||\"0\"==part},\"<border-width>\":function(part){return this[\"<length>\"](part)||ValidationTypes.isLiteral(part,\"thin | medium | thick\")},\"<border-style>\":function(part){return ValidationTypes.isLiteral(part,\"none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset\")},\"<content-sizing>\":function(part){return ValidationTypes.isLiteral(part,\"fill-available | -moz-available | -webkit-fill-available | max-content | -moz-max-content | -webkit-max-content | min-content | -moz-min-content | -webkit-min-content | fit-content | -moz-fit-content | -webkit-fit-content\")},\"<margin-width>\":function(part){return this[\"<length>\"](part)||this[\"<percentage>\"](part)||ValidationTypes.isLiteral(part,\"auto\")},\"<padding-width>\":function(part){return this[\"<length>\"](part)||this[\"<percentage>\"](part)},\"<shape>\":function(part){return\"function\"==part.type&&(\"rect\"==part.name||\"inset-rect\"==part.name)},\"<time>\":function(part){return\"time\"==part.type},\"<flex-grow>\":function(part){return this[\"<number>\"](part)},\"<flex-shrink>\":function(part){return this[\"<number>\"](part)},\"<width>\":function(part){return this[\"<margin-width>\"](part)},\"<flex-basis>\":function(part){return this[\"<width>\"](part)},\"<flex-direction>\":function(part){return ValidationTypes.isLiteral(part,\"row | row-reverse | column | column-reverse\")},\"<flex-wrap>\":function(part){return ValidationTypes.isLiteral(part,\"nowrap | wrap | wrap-reverse\")}},complex:{\"<bg-position>\":function(expression){for(var result=!1,numeric=\"<percentage> | <length>\",xDir=\"left | right\",yDir=\"top | bottom\",count=0;expression.peek(count)&&\",\"!=expression.peek(count);)count++;return 3>count?ValidationTypes.isAny(expression,xDir+\" | center | \"+numeric)?(result=!0,ValidationTypes.isAny(expression,yDir+\" | center | \"+numeric)):ValidationTypes.isAny(expression,yDir)&&(result=!0,ValidationTypes.isAny(expression,xDir+\" | center\")):ValidationTypes.isAny(expression,xDir)?ValidationTypes.isAny(expression,yDir)?(result=!0,ValidationTypes.isAny(expression,numeric)):ValidationTypes.isAny(expression,numeric)&&(ValidationTypes.isAny(expression,yDir)?(result=!0,ValidationTypes.isAny(expression,numeric)):ValidationTypes.isAny(expression,\"center\")&&(result=!0)):ValidationTypes.isAny(expression,yDir)?ValidationTypes.isAny(expression,xDir)?(result=!0,ValidationTypes.isAny(expression,numeric)):ValidationTypes.isAny(expression,numeric)&&(ValidationTypes.isAny(expression,xDir)?(result=!0,ValidationTypes.isAny(expression,numeric)):ValidationTypes.isAny(expression,\"center\")&&(result=!0)):ValidationTypes.isAny(expression,\"center\")&&ValidationTypes.isAny(expression,xDir+\" | \"+yDir)&&(result=!0,ValidationTypes.isAny(expression,numeric)),result},\"<bg-size>\":function(expression){var result=!1,numeric=\"<percentage> | <length> | auto\";return ValidationTypes.isAny(expression,\"cover | contain\")?result=!0:ValidationTypes.isAny(expression,numeric)&&(result=!0,ValidationTypes.isAny(expression,numeric)),result},\"<repeat-style>\":function(expression){var part,result=!1,values=\"repeat | space | round | no-repeat\";return expression.hasNext()&&(part=expression.next(),ValidationTypes.isLiteral(part,\"repeat-x | repeat-y\")?result=!0:ValidationTypes.isLiteral(part,values)&&(result=!0,expression.hasNext()&&ValidationTypes.isLiteral(expression.peek(),values)&&expression.next())),result},\"<shadow>\":function(expression){var result=!1,count=0,inset=!1,color=!1;if(expression.hasNext()){for(ValidationTypes.isAny(expression,\"inset\")&&(inset=!0),ValidationTypes.isAny(expression,\"<color>\")&&(color=!0);ValidationTypes.isAny(expression,\"<length>\")&&4>count;)count++;expression.hasNext()&&(color||ValidationTypes.isAny(expression,\"<color>\"),inset||ValidationTypes.isAny(expression,\"inset\")),result=count>=2&&4>=count}return result},\"<x-one-radius>\":function(expression){var result=!1,simple=\"<length> | <percentage> | inherit\";return ValidationTypes.isAny(expression,simple)&&(result=!0,ValidationTypes.isAny(expression,simple)),result},\"<flex>\":function(expression){var part,result=!1;if(ValidationTypes.isAny(expression,\"none | inherit\")?result=!0:ValidationTypes.isType(expression,\"<flex-grow>\")?expression.peek()?ValidationTypes.isType(expression,\"<flex-shrink>\")?result=expression.peek()?ValidationTypes.isType(expression,\"<flex-basis>\"):!0:ValidationTypes.isType(expression,\"<flex-basis>\")&&(result=null===expression.peek()):result=!0:ValidationTypes.isType(expression,\"<flex-basis>\")&&(result=!0),!result)throw part=expression.peek(),new ValidationError(\"Expected (none | [ <flex-grow> <flex-shrink>? || <flex-basis> ]) but found '\"+expression.value.text+\"'.\",part.line,part.col);return result}}};parserlib.css={Colors:Colors,Combinator:Combinator,Parser:Parser,PropertyName:PropertyName,PropertyValue:PropertyValue,PropertyValuePart:PropertyValuePart,MediaFeature:MediaFeature,MediaQuery:MediaQuery,Selector:Selector,SelectorPart:SelectorPart,SelectorSubPart:SelectorSubPart,Specificity:Specificity,TokenStream:TokenStream,Tokens:Tokens,ValidationError:ValidationError}}(),function(){for(var prop in parserlib)exports[prop]=parserlib[prop]}();var util={isArray:function(ar){return Array.isArray(ar)||\"object\"==typeof ar&&\"[object Array]\"===objectToString(ar)},isDate:function(d){return\"object\"==typeof d&&\"[object Date]\"===objectToString(d)},isRegExp:function(re){return\"object\"==typeof re&&\"[object RegExp]\"===objectToString(re)},getRegExpFlags:function(re){var flags=\"\";return re.global&&(flags+=\"g\"),re.ignoreCase&&(flags+=\"i\"),re.multiline&&(flags+=\"m\"),flags}};\"object\"==typeof module&&(module.exports=clone),clone.clonePrototype=function(parent){if(null===parent)return null;var c=function(){};return c.prototype=parent,new c};var CSSLint=function(){function applyEmbeddedRuleset(text,ruleset){var valueMap,embedded=text&&text.match(embeddedRuleset),rules=embedded&&embedded[1];return rules&&(valueMap={\"true\":2,\"\":1,\"false\":0,2:2,1:1,0:0},rules.toLowerCase().split(\",\").forEach(function(rule){var pair=rule.split(\":\"),property=pair[0]||\"\",value=pair[1]||\"\";ruleset[property.trim()]=valueMap[value.trim()]})),ruleset}var rules=[],formatters=[],embeddedRuleset=/\\/\\*csslint([^\\*]*)\\*\\//,api=new parserlib.util.EventTarget;return api.version=\"@VERSION@\",api.addRule=function(rule){rules.push(rule),rules[rule.id]=rule},api.clearRules=function(){rules=[]},api.getRules=function(){return[].concat(rules).sort(function(a,b){return a.id>b.id?1:0})},api.getRuleset=function(){for(var ruleset={},i=0,len=rules.length;len>i;)ruleset[rules[i++].id]=1;return ruleset},api.addFormatter=function(formatter){formatters[formatter.id]=formatter},api.getFormatter=function(formatId){return formatters[formatId]},api.format=function(results,filename,formatId,options){var formatter=this.getFormatter(formatId),result=null;return formatter&&(result=formatter.startFormat(),result+=formatter.formatResults(results,filename,options||{}),result+=formatter.endFormat()),result},api.hasFormat=function(formatId){return formatters.hasOwnProperty(formatId)},api.verify=function(text,ruleset){var reporter,lines,report,i=0,parser=new parserlib.css.Parser({starHack:!0,ieFilters:!0,underscoreHack:!0,strict:!1});lines=text.replace(/\\n\\r?/g,\"$split$\").split(\"$split$\"),ruleset||(ruleset=this.getRuleset()),embeddedRuleset.test(text)&&(ruleset=clone(ruleset),ruleset=applyEmbeddedRuleset(text,ruleset)),reporter=new Reporter(lines,ruleset),ruleset.errors=2;for(i in ruleset)ruleset.hasOwnProperty(i)&&ruleset[i]&&rules[i]&&rules[i].init(parser,reporter);try{parser.parse(text)}catch(ex){reporter.error(\"Fatal error, cannot continue: \"+ex.message,ex.line,ex.col,{})}return report={messages:reporter.messages,stats:reporter.stats,ruleset:reporter.ruleset},report.messages.sort(function(a,b){return a.rollup&&!b.rollup?1:!a.rollup&&b.rollup?-1:a.line-b.line}),report},api}();Reporter.prototype={constructor:Reporter,error:function(message,line,col,rule){this.messages.push({type:\"error\",line:line,col:col,message:message,evidence:this.lines[line-1],rule:rule||{}})},warn:function(message,line,col,rule){this.report(message,line,col,rule)},report:function(message,line,col,rule){this.messages.push({type:2===this.ruleset[rule.id]?\"error\":\"warning\",line:line,col:col,message:message,evidence:this.lines[line-1],rule:rule})},info:function(message,line,col,rule){this.messages.push({type:\"info\",line:line,col:col,message:message,evidence:this.lines[line-1],rule:rule})},rollupError:function(message,rule){this.messages.push({type:\"error\",rollup:!0,message:message,rule:rule})},rollupWarn:function(message,rule){this.messages.push({type:\"warning\",rollup:!0,message:message,rule:rule})},stat:function(name,value){this.stats[name]=value}},CSSLint._Reporter=Reporter,CSSLint.Util={mix:function(receiver,supplier){var prop;for(prop in supplier)supplier.hasOwnProperty(prop)&&(receiver[prop]=supplier[prop]);return prop},indexOf:function(values,value){if(values.indexOf)return values.indexOf(value);for(var i=0,len=values.length;len>i;i++)if(values[i]===value)return i;return-1},forEach:function(values,func){if(values.forEach)return values.forEach(func);for(var i=0,len=values.length;len>i;i++)func(values[i],i,values)}},CSSLint.addRule({id:\"adjoining-classes\",name:\"Disallow adjoining classes\",desc:\"Don't use adjoining classes.\",browsers:\"IE6\",init:function(parser,reporter){var rule=this;parser.addListener(\"startrule\",function(event){var selector,part,modifier,classCount,i,j,k,selectors=event.selectors;for(i=0;selectors.length>i;i++)for(selector=selectors[i],j=0;selector.parts.length>j;j++)if(part=selector.parts[j],part.type===parser.SELECTOR_PART_TYPE)for(classCount=0,k=0;part.modifiers.length>k;k++)modifier=part.modifiers[k],\"class\"===modifier.type&&classCount++,classCount>1&&reporter.report(\"Don't use adjoining classes.\",part.line,part.col,rule)})}}),CSSLint.addRule({id:\"box-model\",name:\"Beware of broken box size\",desc:\"Don't use width or height when using padding or border.\",browsers:\"All\",init:function(parser,reporter){function startRule(){properties={},boxSizing=!1}function endRule(){var prop,value;if(!boxSizing){if(properties.height)for(prop in heightProperties)heightProperties.hasOwnProperty(prop)&&properties[prop]&&(value=properties[prop].value,(\"padding\"!==prop||2!==value.parts.length||0!==value.parts[0].value)&&reporter.report(\"Using height with \"+prop+\" can sometimes make elements larger than you expect.\",properties[prop].line,properties[prop].col,rule));if(properties.width)for(prop in widthProperties)widthProperties.hasOwnProperty(prop)&&properties[prop]&&(value=properties[prop].value,(\"padding\"!==prop||2!==value.parts.length||0!==value.parts[1].value)&&reporter.report(\"Using width with \"+prop+\" can sometimes make elements larger than you expect.\",properties[prop].line,properties[prop].col,rule))}}var properties,rule=this,widthProperties={border:1,\"border-left\":1,\"border-right\":1,padding:1,\"padding-left\":1,\"padding-right\":1},heightProperties={border:1,\"border-bottom\":1,\"border-top\":1,padding:1,\"padding-bottom\":1,\"padding-top\":1},boxSizing=!1;parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"property\",function(event){var name=event.property.text.toLowerCase();heightProperties[name]||widthProperties[name]?/^0\\S*$/.test(event.value)||\"border\"===name&&\"none\"==\"\"+event.value||(properties[name]={line:event.property.line,col:event.property.col,value:event.value}):/^(width|height)/i.test(name)&&/^(length|percentage)/.test(event.value.parts[0].type)?properties[name]=1:\"box-sizing\"===name&&(boxSizing=!0)}),parser.addListener(\"endrule\",endRule),parser.addListener(\"endfontface\",endRule),parser.addListener(\"endpage\",endRule),parser.addListener(\"endpagemargin\",endRule),parser.addListener(\"endkeyframerule\",endRule)}}),CSSLint.addRule({id:\"box-sizing\",name:\"Disallow use of box-sizing\",desc:\"The box-sizing properties isn't supported in IE6 and IE7.\",browsers:\"IE6, IE7\",tags:[\"Compatibility\"],init:function(parser,reporter){var rule=this;parser.addListener(\"property\",function(event){var name=event.property.text.toLowerCase();\"box-sizing\"===name&&reporter.report(\"The box-sizing property isn't supported in IE6 and IE7.\",event.line,event.col,rule)})}}),CSSLint.addRule({id:\"bulletproof-font-face\",name:\"Use the bulletproof @font-face syntax\",desc:\"Use the bulletproof @font-face syntax to avoid 404's in old IE (http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax).\",browsers:\"All\",init:function(parser,reporter){var line,col,rule=this,fontFaceRule=!1,firstSrc=!0,ruleFailed=!1;parser.addListener(\"startfontface\",function(){fontFaceRule=!0}),parser.addListener(\"property\",function(event){if(fontFaceRule){var propertyName=(\"\"+event.property).toLowerCase(),value=\"\"+event.value;if(line=event.line,col=event.col,\"src\"===propertyName){var regex=/^\\s?url\\(['\"].+\\.eot\\?.*['\"]\\)\\s*format\\(['\"]embedded-opentype['\"]\\).*$/i;!value.match(regex)&&firstSrc?(ruleFailed=!0,firstSrc=!1):value.match(regex)&&!firstSrc&&(ruleFailed=!1)}}}),parser.addListener(\"endfontface\",function(){fontFaceRule=!1,ruleFailed&&reporter.report(\"@font-face declaration doesn't follow the fontspring bulletproof syntax.\",line,col,rule)})}}),CSSLint.addRule({id:\"compatible-vendor-prefixes\",name:\"Require compatible vendor prefixes\",desc:\"Include all compatible vendor prefixes to reach a wider range of users.\",browsers:\"All\",init:function(parser,reporter){var compatiblePrefixes,properties,prop,variations,prefixed,i,len,rule=this,inKeyFrame=!1,arrayPush=Array.prototype.push,applyTo=[];compatiblePrefixes={animation:\"webkit moz\",\"animation-delay\":\"webkit moz\",\"animation-direction\":\"webkit moz\",\"animation-duration\":\"webkit moz\",\"animation-fill-mode\":\"webkit moz\",\"animation-iteration-count\":\"webkit moz\",\"animation-name\":\"webkit moz\",\"animation-play-state\":\"webkit moz\",\"animation-timing-function\":\"webkit moz\",appearance:\"webkit moz\",\"border-end\":\"webkit moz\",\"border-end-color\":\"webkit moz\",\"border-end-style\":\"webkit moz\",\"border-end-width\":\"webkit moz\",\"border-image\":\"webkit moz o\",\"border-radius\":\"webkit\",\"border-start\":\"webkit moz\",\"border-start-color\":\"webkit moz\",\"border-start-style\":\"webkit moz\",\"border-start-width\":\"webkit moz\",\"box-align\":\"webkit moz ms\",\"box-direction\":\"webkit moz ms\",\"box-flex\":\"webkit moz ms\",\"box-lines\":\"webkit ms\",\"box-ordinal-group\":\"webkit moz ms\",\"box-orient\":\"webkit moz ms\",\"box-pack\":\"webkit moz ms\",\"box-sizing\":\"webkit moz\",\"box-shadow\":\"webkit moz\",\"column-count\":\"webkit moz ms\",\"column-gap\":\"webkit moz ms\",\"column-rule\":\"webkit moz ms\",\"column-rule-color\":\"webkit moz ms\",\"column-rule-style\":\"webkit moz ms\",\"column-rule-width\":\"webkit moz ms\",\"column-width\":\"webkit moz ms\",hyphens:\"epub moz\",\"line-break\":\"webkit ms\",\"margin-end\":\"webkit moz\",\"margin-start\":\"webkit moz\",\"marquee-speed\":\"webkit wap\",\"marquee-style\":\"webkit wap\",\"padding-end\":\"webkit moz\",\"padding-start\":\"webkit moz\",\"tab-size\":\"moz o\",\"text-size-adjust\":\"webkit ms\",transform:\"webkit moz ms o\",\"transform-origin\":\"webkit moz ms o\",transition:\"webkit moz o\",\"transition-delay\":\"webkit moz o\",\"transition-duration\":\"webkit moz o\",\"transition-property\":\"webkit moz o\",\"transition-timing-function\":\"webkit moz o\",\"user-modify\":\"webkit moz\",\"user-select\":\"webkit moz ms\",\"word-break\":\"epub ms\",\"writing-mode\":\"epub ms\"};for(prop in compatiblePrefixes)if(compatiblePrefixes.hasOwnProperty(prop)){for(variations=[],prefixed=compatiblePrefixes[prop].split(\" \"),i=0,len=prefixed.length;len>i;i++)variations.push(\"-\"+prefixed[i]+\"-\"+prop);compatiblePrefixes[prop]=variations,arrayPush.apply(applyTo,variations)}parser.addListener(\"startrule\",function(){properties=[]}),parser.addListener(\"startkeyframes\",function(event){inKeyFrame=event.prefix||!0}),parser.addListener(\"endkeyframes\",function(){inKeyFrame=!1}),parser.addListener(\"property\",function(event){var name=event.property;CSSLint.Util.indexOf(applyTo,name.text)>-1&&(inKeyFrame&&\"string\"==typeof inKeyFrame&&0===name.text.indexOf(\"-\"+inKeyFrame+\"-\")||properties.push(name))}),parser.addListener(\"endrule\",function(){if(properties.length){var i,len,name,prop,variations,value,full,actual,item,propertiesSpecified,propertyGroups={};for(i=0,len=properties.length;len>i;i++){name=properties[i];for(prop in compatiblePrefixes)compatiblePrefixes.hasOwnProperty(prop)&&(variations=compatiblePrefixes[prop],CSSLint.Util.indexOf(variations,name.text)>-1&&(propertyGroups[prop]||(propertyGroups[prop]={full:variations.slice(0),actual:[],actualNodes:[]}),-1===CSSLint.Util.indexOf(propertyGroups[prop].actual,name.text)&&(propertyGroups[prop].actual.push(name.text),propertyGroups[prop].actualNodes.push(name))))}for(prop in propertyGroups)if(propertyGroups.hasOwnProperty(prop)&&(value=propertyGroups[prop],full=value.full,actual=value.actual,full.length>actual.length))for(i=0,len=full.length;len>i;i++)item=full[i],-1===CSSLint.Util.indexOf(actual,item)&&(propertiesSpecified=1===actual.length?actual[0]:2===actual.length?actual.join(\" and \"):actual.join(\", \"),reporter.report(\"The property \"+item+\" is compatible with \"+propertiesSpecified+\" and should be included as well.\",value.actualNodes[0].line,value.actualNodes[0].col,rule))}})}}),CSSLint.addRule({id:\"display-property-grouping\",name:\"Require properties appropriate for display\",desc:\"Certain properties shouldn't be used with certain display property values.\",browsers:\"All\",init:function(parser,reporter){function reportProperty(name,display,msg){properties[name]&&(\"string\"!=typeof propertiesToCheck[name]||properties[name].value.toLowerCase()!==propertiesToCheck[name])&&reporter.report(msg||name+\" can't be used with display: \"+display+\".\",properties[name].line,properties[name].col,rule)}function startRule(){properties={}}function endRule(){var display=properties.display?properties.display.value:null;if(display)switch(display){case\"inline\":reportProperty(\"height\",display),reportProperty(\"width\",display),reportProperty(\"margin\",display),reportProperty(\"margin-top\",display),reportProperty(\"margin-bottom\",display),reportProperty(\"float\",display,\"display:inline has no effect on floated elements (but may be used to fix the IE6 double-margin bug).\");break;case\"block\":reportProperty(\"vertical-align\",display);\nbreak;case\"inline-block\":reportProperty(\"float\",display);break;default:0===display.indexOf(\"table-\")&&(reportProperty(\"margin\",display),reportProperty(\"margin-left\",display),reportProperty(\"margin-right\",display),reportProperty(\"margin-top\",display),reportProperty(\"margin-bottom\",display),reportProperty(\"float\",display))}}var properties,rule=this,propertiesToCheck={display:1,\"float\":\"none\",height:1,width:1,margin:1,\"margin-left\":1,\"margin-right\":1,\"margin-bottom\":1,\"margin-top\":1,padding:1,\"padding-left\":1,\"padding-right\":1,\"padding-bottom\":1,\"padding-top\":1,\"vertical-align\":1};parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"property\",function(event){var name=event.property.text.toLowerCase();propertiesToCheck[name]&&(properties[name]={value:event.value.text,line:event.property.line,col:event.property.col})}),parser.addListener(\"endrule\",endRule),parser.addListener(\"endfontface\",endRule),parser.addListener(\"endkeyframerule\",endRule),parser.addListener(\"endpagemargin\",endRule),parser.addListener(\"endpage\",endRule)}}),CSSLint.addRule({id:\"duplicate-background-images\",name:\"Disallow duplicate background images\",desc:\"Every background-image should be unique. Use a common class for e.g. sprites.\",browsers:\"All\",init:function(parser,reporter){var rule=this,stack={};parser.addListener(\"property\",function(event){var i,len,name=event.property.text,value=event.value;if(name.match(/background/i))for(i=0,len=value.parts.length;len>i;i++)\"uri\"===value.parts[i].type&&(stack[value.parts[i].uri]===void 0?stack[value.parts[i].uri]=event:reporter.report(\"Background image '\"+value.parts[i].uri+\"' was used multiple times, first declared at line \"+stack[value.parts[i].uri].line+\", col \"+stack[value.parts[i].uri].col+\".\",event.line,event.col,rule))})}}),CSSLint.addRule({id:\"duplicate-properties\",name:\"Disallow duplicate properties\",desc:\"Duplicate properties must appear one after the other.\",browsers:\"All\",init:function(parser,reporter){function startRule(){properties={}}var properties,lastProperty,rule=this;parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"property\",function(event){var property=event.property,name=property.text.toLowerCase();!properties[name]||lastProperty===name&&properties[name]!==event.value.text||reporter.report(\"Duplicate property '\"+event.property+\"' found.\",event.line,event.col,rule),properties[name]=event.value.text,lastProperty=name})}}),CSSLint.addRule({id:\"empty-rules\",name:\"Disallow empty rules\",desc:\"Rules without any properties specified should be removed.\",browsers:\"All\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"startrule\",function(){count=0}),parser.addListener(\"property\",function(){count++}),parser.addListener(\"endrule\",function(event){var selectors=event.selectors;0===count&&reporter.report(\"Rule is empty.\",selectors[0].line,selectors[0].col,rule)})}}),CSSLint.addRule({id:\"errors\",name:\"Parsing Errors\",desc:\"This rule looks for recoverable syntax errors.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"error\",function(event){reporter.error(event.message,event.line,event.col,rule)})}}),CSSLint.addRule({id:\"fallback-colors\",name:\"Require fallback colors\",desc:\"For older browsers that don't support RGBA, HSL, or HSLA, provide a fallback color.\",browsers:\"IE6,IE7,IE8\",init:function(parser,reporter){function startRule(){properties={},lastProperty=null}var lastProperty,properties,rule=this,propertiesToCheck={color:1,background:1,\"border-color\":1,\"border-top-color\":1,\"border-right-color\":1,\"border-bottom-color\":1,\"border-left-color\":1,border:1,\"border-top\":1,\"border-right\":1,\"border-bottom\":1,\"border-left\":1,\"background-color\":1};parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"property\",function(event){var property=event.property,name=property.text.toLowerCase(),parts=event.value.parts,i=0,colorType=\"\",len=parts.length;if(propertiesToCheck[name])for(;len>i;)\"color\"===parts[i].type&&(\"alpha\"in parts[i]||\"hue\"in parts[i]?(/([^\\)]+)\\(/.test(parts[i])&&(colorType=RegExp.$1.toUpperCase()),lastProperty&&lastProperty.property.text.toLowerCase()===name&&\"compat\"===lastProperty.colorType||reporter.report(\"Fallback \"+name+\" (hex or RGB) should precede \"+colorType+\" \"+name+\".\",event.line,event.col,rule)):event.colorType=\"compat\"),i++;lastProperty=event})}}),CSSLint.addRule({id:\"floats\",name:\"Disallow too many floats\",desc:\"This rule tests if the float property is used too many times\",browsers:\"All\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"property\",function(event){\"float\"===event.property.text.toLowerCase()&&\"none\"!==event.value.text.toLowerCase()&&count++}),parser.addListener(\"endstylesheet\",function(){reporter.stat(\"floats\",count),count>=10&&reporter.rollupWarn(\"Too many floats (\"+count+\"), you're probably using them for layout. Consider using a grid system instead.\",rule)})}}),CSSLint.addRule({id:\"font-faces\",name:\"Don't use too many web fonts\",desc:\"Too many different web fonts in the same stylesheet.\",browsers:\"All\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"startfontface\",function(){count++}),parser.addListener(\"endstylesheet\",function(){count>5&&reporter.rollupWarn(\"Too many @font-face declarations (\"+count+\").\",rule)})}}),CSSLint.addRule({id:\"font-sizes\",name:\"Disallow too many font sizes\",desc:\"Checks the number of font-size declarations.\",browsers:\"All\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"property\",function(event){\"font-size\"==\"\"+event.property&&count++}),parser.addListener(\"endstylesheet\",function(){reporter.stat(\"font-sizes\",count),count>=10&&reporter.rollupWarn(\"Too many font-size declarations (\"+count+\"), abstraction needed.\",rule)})}}),CSSLint.addRule({id:\"gradients\",name:\"Require all gradient definitions\",desc:\"When using a vendor-prefixed gradient, make sure to use them all.\",browsers:\"All\",init:function(parser,reporter){var gradients,rule=this;parser.addListener(\"startrule\",function(){gradients={moz:0,webkit:0,oldWebkit:0,o:0}}),parser.addListener(\"property\",function(event){/\\-(moz|o|webkit)(?:\\-(?:linear|radial))\\-gradient/i.test(event.value)?gradients[RegExp.$1]=1:/\\-webkit\\-gradient/i.test(event.value)&&(gradients.oldWebkit=1)}),parser.addListener(\"endrule\",function(event){var missing=[];gradients.moz||missing.push(\"Firefox 3.6+\"),gradients.webkit||missing.push(\"Webkit (Safari 5+, Chrome)\"),gradients.oldWebkit||missing.push(\"Old Webkit (Safari 4+, Chrome)\"),gradients.o||missing.push(\"Opera 11.1+\"),missing.length&&4>missing.length&&reporter.report(\"Missing vendor-prefixed CSS gradients for \"+missing.join(\", \")+\".\",event.selectors[0].line,event.selectors[0].col,rule)})}}),CSSLint.addRule({id:\"ids\",name:\"Disallow IDs in selectors\",desc:\"Selectors should not contain IDs.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"startrule\",function(event){var selector,part,modifier,idCount,i,j,k,selectors=event.selectors;for(i=0;selectors.length>i;i++){for(selector=selectors[i],idCount=0,j=0;selector.parts.length>j;j++)if(part=selector.parts[j],part.type===parser.SELECTOR_PART_TYPE)for(k=0;part.modifiers.length>k;k++)modifier=part.modifiers[k],\"id\"===modifier.type&&idCount++;1===idCount?reporter.report(\"Don't use IDs in selectors.\",selector.line,selector.col,rule):idCount>1&&reporter.report(idCount+\" IDs in the selector, really?\",selector.line,selector.col,rule)}})}}),CSSLint.addRule({id:\"import\",name:\"Disallow @import\",desc:\"Don't use @import, use <link> instead.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"import\",function(event){reporter.report(\"@import prevents parallel downloads, use <link> instead.\",event.line,event.col,rule)})}}),CSSLint.addRule({id:\"important\",name:\"Disallow !important\",desc:\"Be careful when using !important declaration\",browsers:\"All\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"property\",function(event){event.important===!0&&(count++,reporter.report(\"Use of !important\",event.line,event.col,rule))}),parser.addListener(\"endstylesheet\",function(){reporter.stat(\"important\",count),count>=10&&reporter.rollupWarn(\"Too many !important declarations (\"+count+\"), try to use less than 10 to avoid specificity issues.\",rule)})}}),CSSLint.addRule({id:\"known-properties\",name:\"Require use of known properties\",desc:\"Properties should be known (listed in CSS3 specification) or be a vendor-prefixed property.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"property\",function(event){event.invalid&&reporter.report(event.invalid.message,event.line,event.col,rule)})}}),CSSLint.addRule({id:\"order-alphabetical\",name:\"Alphabetical order\",desc:\"Assure properties are in alphabetical order\",browsers:\"All\",init:function(parser,reporter){var properties,rule=this,startRule=function(){properties=[]};parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"property\",function(event){var name=event.property.text,lowerCasePrefixLessName=name.toLowerCase().replace(/^-.*?-/,\"\");properties.push(lowerCasePrefixLessName)}),parser.addListener(\"endrule\",function(event){var currentProperties=properties.join(\",\"),expectedProperties=properties.sort().join(\",\");currentProperties!==expectedProperties&&reporter.report(\"Rule doesn't have all its properties in alphabetical ordered.\",event.line,event.col,rule)})}}),CSSLint.addRule({id:\"outline-none\",name:\"Disallow outline: none\",desc:\"Use of outline: none or outline: 0 should be limited to :focus rules.\",browsers:\"All\",tags:[\"Accessibility\"],init:function(parser,reporter){function startRule(event){lastRule=event.selectors?{line:event.line,col:event.col,selectors:event.selectors,propCount:0,outline:!1}:null}function endRule(){lastRule&&lastRule.outline&&(-1===(\"\"+lastRule.selectors).toLowerCase().indexOf(\":focus\")?reporter.report(\"Outlines should only be modified using :focus.\",lastRule.line,lastRule.col,rule):1===lastRule.propCount&&reporter.report(\"Outlines shouldn't be hidden unless other visual changes are made.\",lastRule.line,lastRule.col,rule))}var lastRule,rule=this;parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"property\",function(event){var name=event.property.text.toLowerCase(),value=event.value;lastRule&&(lastRule.propCount++,\"outline\"!==name||\"none\"!=\"\"+value&&\"0\"!=\"\"+value||(lastRule.outline=!0))}),parser.addListener(\"endrule\",endRule),parser.addListener(\"endfontface\",endRule),parser.addListener(\"endpage\",endRule),parser.addListener(\"endpagemargin\",endRule),parser.addListener(\"endkeyframerule\",endRule)}}),CSSLint.addRule({id:\"overqualified-elements\",name:\"Disallow overqualified elements\",desc:\"Don't use classes or IDs with elements (a.foo or a#foo).\",browsers:\"All\",init:function(parser,reporter){var rule=this,classes={};parser.addListener(\"startrule\",function(event){var selector,part,modifier,i,j,k,selectors=event.selectors;for(i=0;selectors.length>i;i++)for(selector=selectors[i],j=0;selector.parts.length>j;j++)if(part=selector.parts[j],part.type===parser.SELECTOR_PART_TYPE)for(k=0;part.modifiers.length>k;k++)modifier=part.modifiers[k],part.elementName&&\"id\"===modifier.type?reporter.report(\"Element (\"+part+\") is overqualified, just use \"+modifier+\" without element name.\",part.line,part.col,rule):\"class\"===modifier.type&&(classes[modifier]||(classes[modifier]=[]),classes[modifier].push({modifier:modifier,part:part}))}),parser.addListener(\"endstylesheet\",function(){var prop;for(prop in classes)classes.hasOwnProperty(prop)&&1===classes[prop].length&&classes[prop][0].part.elementName&&reporter.report(\"Element (\"+classes[prop][0].part+\") is overqualified, just use \"+classes[prop][0].modifier+\" without element name.\",classes[prop][0].part.line,classes[prop][0].part.col,rule)})}}),CSSLint.addRule({id:\"qualified-headings\",name:\"Disallow qualified headings\",desc:\"Headings should not be qualified (namespaced).\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"startrule\",function(event){var selector,part,i,j,selectors=event.selectors;for(i=0;selectors.length>i;i++)for(selector=selectors[i],j=0;selector.parts.length>j;j++)part=selector.parts[j],part.type===parser.SELECTOR_PART_TYPE&&part.elementName&&/h[1-6]/.test(\"\"+part.elementName)&&j>0&&reporter.report(\"Heading (\"+part.elementName+\") should not be qualified.\",part.line,part.col,rule)})}}),CSSLint.addRule({id:\"regex-selectors\",name:\"Disallow selectors that look like regexs\",desc:\"Selectors that look like regular expressions are slow and should be avoided.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"startrule\",function(event){var selector,part,modifier,i,j,k,selectors=event.selectors;for(i=0;selectors.length>i;i++)for(selector=selectors[i],j=0;selector.parts.length>j;j++)if(part=selector.parts[j],part.type===parser.SELECTOR_PART_TYPE)for(k=0;part.modifiers.length>k;k++)modifier=part.modifiers[k],\"attribute\"===modifier.type&&/([\\~\\|\\^\\$\\*]=)/.test(modifier)&&reporter.report(\"Attribute selectors with \"+RegExp.$1+\" are slow!\",modifier.line,modifier.col,rule)})}}),CSSLint.addRule({id:\"rules-count\",name:\"Rules Count\",desc:\"Track how many rules there are.\",browsers:\"All\",init:function(parser,reporter){var count=0;parser.addListener(\"startrule\",function(){count++}),parser.addListener(\"endstylesheet\",function(){reporter.stat(\"rule-count\",count)})}}),CSSLint.addRule({id:\"selector-max-approaching\",name:\"Warn when approaching the 4095 selector limit for IE\",desc:\"Will warn when selector count is >= 3800 selectors.\",browsers:\"IE\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"startrule\",function(event){count+=event.selectors.length}),parser.addListener(\"endstylesheet\",function(){count>=3800&&reporter.report(\"You have \"+count+\" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring.\",0,0,rule)})}}),CSSLint.addRule({id:\"selector-max\",name:\"Error when past the 4095 selector limit for IE\",desc:\"Will error when selector count is > 4095.\",browsers:\"IE\",init:function(parser,reporter){var rule=this,count=0;parser.addListener(\"startrule\",function(event){count+=event.selectors.length}),parser.addListener(\"endstylesheet\",function(){count>4095&&reporter.report(\"You have \"+count+\" selectors. Internet Explorer supports a maximum of 4095 selectors per stylesheet. Consider refactoring.\",0,0,rule)})}}),CSSLint.addRule({id:\"selector-newline\",name:\"Disallow new-line characters in selectors\",desc:\"New-line characters in selectors are usually a forgotten comma and not a descendant combinator.\",browsers:\"All\",init:function(parser,reporter){function startRule(event){var i,len,selector,p,n,pLen,part,part2,type,currentLine,nextLine,selectors=event.selectors;for(i=0,len=selectors.length;len>i;i++)for(selector=selectors[i],p=0,pLen=selector.parts.length;pLen>p;p++)for(n=p+1;pLen>n;n++)part=selector.parts[p],part2=selector.parts[n],type=part.type,currentLine=part.line,nextLine=part2.line,\"descendant\"===type&&nextLine>currentLine&&reporter.report(\"newline character found in selector (forgot a comma?)\",currentLine,selectors[i].parts[0].col,rule)}var rule=this;parser.addListener(\"startrule\",startRule)}}),CSSLint.addRule({id:\"shorthand\",name:\"Require shorthand properties\",desc:\"Use shorthand properties where possible.\",browsers:\"All\",init:function(parser,reporter){function startRule(){properties={}}function endRule(event){var prop,i,len,total;for(prop in mapping)if(mapping.hasOwnProperty(prop)){for(total=0,i=0,len=mapping[prop].length;len>i;i++)total+=properties[mapping[prop][i]]?1:0;total===mapping[prop].length&&reporter.report(\"The properties \"+mapping[prop].join(\", \")+\" can be replaced by \"+prop+\".\",event.line,event.col,rule)}}var prop,i,len,properties,rule=this,propertiesToCheck={},mapping={margin:[\"margin-top\",\"margin-bottom\",\"margin-left\",\"margin-right\"],padding:[\"padding-top\",\"padding-bottom\",\"padding-left\",\"padding-right\"]};for(prop in mapping)if(mapping.hasOwnProperty(prop))for(i=0,len=mapping[prop].length;len>i;i++)propertiesToCheck[mapping[prop][i]]=prop;parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"property\",function(event){var name=(\"\"+event.property).toLowerCase();propertiesToCheck[name]&&(properties[name]=1)}),parser.addListener(\"endrule\",endRule),parser.addListener(\"endfontface\",endRule)}}),CSSLint.addRule({id:\"star-property-hack\",name:\"Disallow properties with a star prefix\",desc:\"Checks for the star property hack (targets IE6/7)\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"property\",function(event){var property=event.property;\"*\"===property.hack&&reporter.report(\"Property with star prefix found.\",event.property.line,event.property.col,rule)})}}),CSSLint.addRule({id:\"text-indent\",name:\"Disallow negative text-indent\",desc:\"Checks for text indent less than -99px\",browsers:\"All\",init:function(parser,reporter){function startRule(){textIndent=!1,direction=\"inherit\"}function endRule(){textIndent&&\"ltr\"!==direction&&reporter.report(\"Negative text-indent doesn't work well with RTL. If you use text-indent for image replacement explicitly set direction for that item to ltr.\",textIndent.line,textIndent.col,rule)}var textIndent,direction,rule=this;parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"property\",function(event){var name=(\"\"+event.property).toLowerCase(),value=event.value;\"text-indent\"===name&&-99>value.parts[0].value?textIndent=event.property:\"direction\"===name&&\"ltr\"==\"\"+value&&(direction=\"ltr\")}),parser.addListener(\"endrule\",endRule),parser.addListener(\"endfontface\",endRule)}}),CSSLint.addRule({id:\"underscore-property-hack\",name:\"Disallow properties with an underscore prefix\",desc:\"Checks for the underscore property hack (targets IE6)\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"property\",function(event){var property=event.property;\"_\"===property.hack&&reporter.report(\"Property with underscore prefix found.\",event.property.line,event.property.col,rule)})}}),CSSLint.addRule({id:\"unique-headings\",name:\"Headings should only be defined once\",desc:\"Headings should be defined only once.\",browsers:\"All\",init:function(parser,reporter){var rule=this,headings={h1:0,h2:0,h3:0,h4:0,h5:0,h6:0};parser.addListener(\"startrule\",function(event){var selector,part,pseudo,i,j,selectors=event.selectors;for(i=0;selectors.length>i;i++)if(selector=selectors[i],part=selector.parts[selector.parts.length-1],part.elementName&&/(h[1-6])/i.test(\"\"+part.elementName)){for(j=0;part.modifiers.length>j;j++)if(\"pseudo\"===part.modifiers[j].type){pseudo=!0;break}pseudo||(headings[RegExp.$1]++,headings[RegExp.$1]>1&&reporter.report(\"Heading (\"+part.elementName+\") has already been defined.\",part.line,part.col,rule))}}),parser.addListener(\"endstylesheet\",function(){var prop,messages=[];for(prop in headings)headings.hasOwnProperty(prop)&&headings[prop]>1&&messages.push(headings[prop]+\" \"+prop+\"s\");messages.length&&reporter.rollupWarn(\"You have \"+messages.join(\", \")+\" defined in this stylesheet.\",rule)})}}),CSSLint.addRule({id:\"universal-selector\",name:\"Disallow universal selector\",desc:\"The universal selector (*) is known to be slow.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"startrule\",function(event){var selector,part,i,selectors=event.selectors;for(i=0;selectors.length>i;i++)selector=selectors[i],part=selector.parts[selector.parts.length-1],\"*\"===part.elementName&&reporter.report(rule.desc,part.line,part.col,rule)})}}),CSSLint.addRule({id:\"unqualified-attributes\",name:\"Disallow unqualified attribute selectors\",desc:\"Unqualified attribute selectors are known to be slow.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"startrule\",function(event){var selector,part,modifier,i,k,selectors=event.selectors;for(i=0;selectors.length>i;i++)if(selector=selectors[i],part=selector.parts[selector.parts.length-1],part.type===parser.SELECTOR_PART_TYPE)for(k=0;part.modifiers.length>k;k++)modifier=part.modifiers[k],\"attribute\"!==modifier.type||part.elementName&&\"*\"!==part.elementName||reporter.report(rule.desc,part.line,part.col,rule)})}}),CSSLint.addRule({id:\"vendor-prefix\",name:\"Require standard property with vendor prefix\",desc:\"When using a vendor-prefixed property, make sure to include the standard one.\",browsers:\"All\",init:function(parser,reporter){function startRule(){properties={},num=1}function endRule(){var prop,i,len,needed,actual,needsStandard=[];for(prop in properties)propertiesToCheck[prop]&&needsStandard.push({actual:prop,needed:propertiesToCheck[prop]});for(i=0,len=needsStandard.length;len>i;i++)needed=needsStandard[i].needed,actual=needsStandard[i].actual,properties[needed]?properties[needed][0].pos<properties[actual][0].pos&&reporter.report(\"Standard property '\"+needed+\"' should come after vendor-prefixed property '\"+actual+\"'.\",properties[actual][0].name.line,properties[actual][0].name.col,rule):reporter.report(\"Missing standard property '\"+needed+\"' to go along with '\"+actual+\"'.\",properties[actual][0].name.line,properties[actual][0].name.col,rule)}var properties,num,rule=this,propertiesToCheck={\"-webkit-border-radius\":\"border-radius\",\"-webkit-border-top-left-radius\":\"border-top-left-radius\",\"-webkit-border-top-right-radius\":\"border-top-right-radius\",\"-webkit-border-bottom-left-radius\":\"border-bottom-left-radius\",\"-webkit-border-bottom-right-radius\":\"border-bottom-right-radius\",\"-o-border-radius\":\"border-radius\",\"-o-border-top-left-radius\":\"border-top-left-radius\",\"-o-border-top-right-radius\":\"border-top-right-radius\",\"-o-border-bottom-left-radius\":\"border-bottom-left-radius\",\"-o-border-bottom-right-radius\":\"border-bottom-right-radius\",\"-moz-border-radius\":\"border-radius\",\"-moz-border-radius-topleft\":\"border-top-left-radius\",\"-moz-border-radius-topright\":\"border-top-right-radius\",\"-moz-border-radius-bottomleft\":\"border-bottom-left-radius\",\"-moz-border-radius-bottomright\":\"border-bottom-right-radius\",\"-moz-column-count\":\"column-count\",\"-webkit-column-count\":\"column-count\",\"-moz-column-gap\":\"column-gap\",\"-webkit-column-gap\":\"column-gap\",\"-moz-column-rule\":\"column-rule\",\"-webkit-column-rule\":\"column-rule\",\"-moz-column-rule-style\":\"column-rule-style\",\"-webkit-column-rule-style\":\"column-rule-style\",\"-moz-column-rule-color\":\"column-rule-color\",\"-webkit-column-rule-color\":\"column-rule-color\",\"-moz-column-rule-width\":\"column-rule-width\",\"-webkit-column-rule-width\":\"column-rule-width\",\"-moz-column-width\":\"column-width\",\"-webkit-column-width\":\"column-width\",\"-webkit-column-span\":\"column-span\",\"-webkit-columns\":\"columns\",\"-moz-box-shadow\":\"box-shadow\",\"-webkit-box-shadow\":\"box-shadow\",\"-moz-transform\":\"transform\",\"-webkit-transform\":\"transform\",\"-o-transform\":\"transform\",\"-ms-transform\":\"transform\",\"-moz-transform-origin\":\"transform-origin\",\"-webkit-transform-origin\":\"transform-origin\",\"-o-transform-origin\":\"transform-origin\",\"-ms-transform-origin\":\"transform-origin\",\"-moz-box-sizing\":\"box-sizing\",\"-webkit-box-sizing\":\"box-sizing\"};parser.addListener(\"startrule\",startRule),parser.addListener(\"startfontface\",startRule),parser.addListener(\"startpage\",startRule),parser.addListener(\"startpagemargin\",startRule),parser.addListener(\"startkeyframerule\",startRule),parser.addListener(\"property\",function(event){var name=event.property.text.toLowerCase();properties[name]||(properties[name]=[]),properties[name].push({name:event.property,value:event.value,pos:num++})}),parser.addListener(\"endrule\",endRule),parser.addListener(\"endfontface\",endRule),parser.addListener(\"endpage\",endRule),parser.addListener(\"endpagemargin\",endRule),parser.addListener(\"endkeyframerule\",endRule)}}),CSSLint.addRule({id:\"zero-units\",name:\"Disallow units for 0 values\",desc:\"You don't need to specify units when a value is 0.\",browsers:\"All\",init:function(parser,reporter){var rule=this;parser.addListener(\"property\",function(event){for(var parts=event.value.parts,i=0,len=parts.length;len>i;)!parts[i].units&&\"percentage\"!==parts[i].type||0!==parts[i].value||\"time\"===parts[i].type||reporter.report(\"Values of 0 shouldn't have units specified.\",parts[i].line,parts[i].col,rule),i++})}}),function(){var xmlEscape=function(str){return str&&str.constructor===String?str.replace(/[\\\"&><]/g,function(match){switch(match){case'\"':return\"&quot;\";case\"&\":return\"&amp;\";case\"<\":return\"&lt;\";case\">\":return\"&gt;\"}}):\"\"};CSSLint.addFormatter({id:\"checkstyle-xml\",name:\"Checkstyle XML format\",startFormat:function(){return'<?xml version=\"1.0\" encoding=\"utf-8\"?><checkstyle>'},endFormat:function(){return\"</checkstyle>\"},readError:function(filename,message){return'<file name=\"'+xmlEscape(filename)+'\"><error line=\"0\" column=\"0\" severty=\"error\" message=\"'+xmlEscape(message)+'\"></error></file>'},formatResults:function(results,filename){var messages=results.messages,output=[],generateSource=function(rule){return rule&&\"name\"in rule?\"net.csslint.\"+rule.name.replace(/\\s/g,\"\"):\"\"};return messages.length>0&&(output.push('<file name=\"'+filename+'\">'),CSSLint.Util.forEach(messages,function(message){message.rollup||output.push('<error line=\"'+message.line+'\" column=\"'+message.col+'\" severity=\"'+message.type+'\"'+' message=\"'+xmlEscape(message.message)+'\" source=\"'+generateSource(message.rule)+'\"/>')}),output.push(\"</file>\")),output.join(\"\")}})}(),CSSLint.addFormatter({id:\"compact\",name:\"Compact, 'porcelain' format\",startFormat:function(){return\"\"},endFormat:function(){return\"\"},formatResults:function(results,filename,options){var messages=results.messages,output=\"\";options=options||{};var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1)};return 0===messages.length?options.quiet?\"\":filename+\": Lint Free!\":(CSSLint.Util.forEach(messages,function(message){output+=message.rollup?filename+\": \"+capitalize(message.type)+\" - \"+message.message+\"\\n\":filename+\": \"+\"line \"+message.line+\", col \"+message.col+\", \"+capitalize(message.type)+\" - \"+message.message+\" (\"+message.rule.id+\")\\n\"}),output)}}),CSSLint.addFormatter({id:\"csslint-xml\",name:\"CSSLint XML format\",startFormat:function(){return'<?xml version=\"1.0\" encoding=\"utf-8\"?><csslint>'},endFormat:function(){return\"</csslint>\"},formatResults:function(results,filename){var messages=results.messages,output=[],escapeSpecialCharacters=function(str){return str&&str.constructor===String?str.replace(/\\\"/g,\"'\").replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\"):\"\"};return messages.length>0&&(output.push('<file name=\"'+filename+'\">'),CSSLint.Util.forEach(messages,function(message){message.rollup?output.push('<issue severity=\"'+message.type+'\" reason=\"'+escapeSpecialCharacters(message.message)+'\" evidence=\"'+escapeSpecialCharacters(message.evidence)+'\"/>'):output.push('<issue line=\"'+message.line+'\" char=\"'+message.col+'\" severity=\"'+message.type+'\"'+' reason=\"'+escapeSpecialCharacters(message.message)+'\" evidence=\"'+escapeSpecialCharacters(message.evidence)+'\"/>')}),output.push(\"</file>\")),output.join(\"\")}}),CSSLint.addFormatter({id:\"junit-xml\",name:\"JUNIT XML format\",startFormat:function(){return'<?xml version=\"1.0\" encoding=\"utf-8\"?><testsuites>'},endFormat:function(){return\"</testsuites>\"},formatResults:function(results,filename){var messages=results.messages,output=[],tests={error:0,failure:0},generateSource=function(rule){return rule&&\"name\"in rule?\"net.csslint.\"+rule.name.replace(/\\s/g,\"\"):\"\"},escapeSpecialCharacters=function(str){return str&&str.constructor===String?str.replace(/\\\"/g,\"'\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\"):\"\"};return messages.length>0&&(messages.forEach(function(message){var type=\"warning\"===message.type?\"error\":message.type;message.rollup||(output.push('<testcase time=\"0\" name=\"'+generateSource(message.rule)+'\">'),output.push(\"<\"+type+' message=\"'+escapeSpecialCharacters(message.message)+'\"><![CDATA['+message.line+\":\"+message.col+\":\"+escapeSpecialCharacters(message.evidence)+\"]]></\"+type+\">\"),output.push(\"</testcase>\"),tests[type]+=1)}),output.unshift('<testsuite time=\"0\" tests=\"'+messages.length+'\" skipped=\"0\" errors=\"'+tests.error+'\" failures=\"'+tests.failure+'\" package=\"net.csslint\" name=\"'+filename+'\">'),output.push(\"</testsuite>\")),output.join(\"\")}}),CSSLint.addFormatter({id:\"lint-xml\",name:\"Lint XML format\",startFormat:function(){return'<?xml version=\"1.0\" encoding=\"utf-8\"?><lint>'},endFormat:function(){return\"</lint>\"},formatResults:function(results,filename){var messages=results.messages,output=[],escapeSpecialCharacters=function(str){return str&&str.constructor===String?str.replace(/\\\"/g,\"'\").replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\"):\"\"};return messages.length>0&&(output.push('<file name=\"'+filename+'\">'),CSSLint.Util.forEach(messages,function(message){message.rollup?output.push('<issue severity=\"'+message.type+'\" reason=\"'+escapeSpecialCharacters(message.message)+'\" evidence=\"'+escapeSpecialCharacters(message.evidence)+'\"/>'):output.push('<issue line=\"'+message.line+'\" char=\"'+message.col+'\" severity=\"'+message.type+'\"'+' reason=\"'+escapeSpecialCharacters(message.message)+'\" evidence=\"'+escapeSpecialCharacters(message.evidence)+'\"/>')}),output.push(\"</file>\")),output.join(\"\")}}),CSSLint.addFormatter({id:\"text\",name:\"Plain Text\",startFormat:function(){return\"\"},endFormat:function(){return\"\"},formatResults:function(results,filename,options){var messages=results.messages,output=\"\";if(options=options||{},0===messages.length)return options.quiet?\"\":\"\\n\\ncsslint: No errors in \"+filename+\".\";output=\"\\n\\ncsslint: There \",output+=1===messages.length?\"is 1 problem\":\"are \"+messages.length+\" problems\",output+=\" in \"+filename+\".\";var pos=filename.lastIndexOf(\"/\"),shortFilename=filename;return-1===pos&&(pos=filename.lastIndexOf(\"\\\\\")),pos>-1&&(shortFilename=filename.substring(pos+1)),CSSLint.Util.forEach(messages,function(message,i){output=output+\"\\n\\n\"+shortFilename,message.rollup?(output+=\"\\n\"+(i+1)+\": \"+message.type,output+=\"\\n\"+message.message):(output+=\"\\n\"+(i+1)+\": \"+message.type+\" at line \"+message.line+\", col \"+message.col,output+=\"\\n\"+message.message,output+=\"\\n\"+message.evidence)}),output}}),module.exports.CSSLint=CSSLint}),ace.define(\"ace/mode/css_worker\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/worker/mirror\",\"ace/mode/css/csslint\"],function(acequire,exports){\"use strict\";var oop=acequire(\"../lib/oop\"),lang=acequire(\"../lib/lang\"),Mirror=acequire(\"../worker/mirror\").Mirror,CSSLint=acequire(\"./css/csslint\").CSSLint,Worker=exports.Worker=function(sender){Mirror.call(this,sender),this.setTimeout(400),this.ruleset=null,this.setDisabledRules(\"ids|order-alphabetical\"),this.setInfoRules(\"adjoining-classes|qualified-headings|zero-units|gradients|import|outline-none|vendor-prefix\")};oop.inherits(Worker,Mirror),function(){this.setInfoRules=function(ruleNames){\"string\"==typeof ruleNames&&(ruleNames=ruleNames.split(\"|\")),this.infoRules=lang.arrayToMap(ruleNames),this.doc.getValue()&&this.deferredUpdate.schedule(100)},this.setDisabledRules=function(ruleNames){if(ruleNames){\"string\"==typeof ruleNames&&(ruleNames=ruleNames.split(\"|\"));\nvar all={};CSSLint.getRules().forEach(function(x){all[x.id]=!0}),ruleNames.forEach(function(x){delete all[x]}),this.ruleset=all}else this.ruleset=null;this.doc.getValue()&&this.deferredUpdate.schedule(100)},this.onUpdate=function(){var value=this.doc.getValue();if(!value)return this.sender.emit(\"annotate\",[]);var infoRules=this.infoRules,result=CSSLint.verify(value,this.ruleset);this.sender.emit(\"annotate\",result.messages.map(function(msg){return{row:msg.line-1,column:msg.col-1,text:msg.message,type:infoRules[msg.rule.id]?\"info\":msg.type,rule:msg.rule.name}}))}}.call(Worker.prototype)}),ace.define(\"ace/lib/es5-shim\",[\"require\",\"exports\",\"module\"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,\"sentinel\",{}),\"sentinel\"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(\"function\"!=typeof target)throw new TypeError(\"Function.prototype.bind called on incompatible \"+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,\"__defineGetter__\"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,\"XXX\"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return\"[object Array]\"==_toString(obj)});var boxedString=Object(\"a\"),splitString=\"a\"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,result=[],thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");if(!length&&1==arguments.length)throw new TypeError(\"reduce of empty array with no initial value\");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError(\"reduce of empty array with no initial value\")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");if(!length&&1==arguments.length)throw new TypeError(\"reduceRight of empty array with no initial value\");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError(\"reduceRight of empty array with no initial value\")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT=\"Object.getOwnPropertyDescriptor called on a non-object: \";Object.getOwnPropertyDescriptor=function(object,property){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if(\"object\"!=typeof prototype)throw new TypeError(\"typeof prototype[\"+typeof prototype+\"] != 'object'\");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=\"undefined\"==typeof document||doesDefinePropertyWork(document.createElement(\"div\"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR=\"Property description must be an object: \",ERR_NON_OBJECT_TARGET=\"Object.defineProperty called on non-object: \",ERR_ACCESSORS_NOT_SUPPORTED=\"getters & setters can not be defined on this javascript engine\";Object.defineProperty=function(object,property,descriptor){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(\"object\"!=typeof descriptor&&\"function\"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,\"value\"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,\"get\")&&defineGetter(object,property,descriptor.get),owns(descriptor,\"set\")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return\"function\"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name=\"\";owns(object,name);)name+=\"?\";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(\"Object.keys called on a non-object\");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws=\"\t\\n\u000b\\f\\r   ᠎             　\\u2028\\u2029﻿\";if(!String.prototype.trim||ws.trim()){ws=\"[\"+ws+\"]\";var trimBeginRegexp=RegExp(\"^\"+ws+ws+\"*\"),trimEndRegexp=RegExp(ws+ws+\"*$\");String.prototype.trim=function(){return(this+\"\").replace(trimBeginRegexp,\"\").replace(trimEndRegexp,\"\")}}var toObject=function(o){if(null==o)throw new TypeError(\"can't convert \"+o+\" to object\");return Object(o)}});";

  var css = {
  	id: id$1,
  	src: src$1
  };

  var id$2 = 'ace/mode/html_worker';
  var src$2 = "\"no use strict\";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail=\"\";testPath;){var alias=paths[testPath];if(\"string\"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,\"/\")+(tail||alias.main||alias.name);if(alias===!1)return\"\";var i=testPath.lastIndexOf(\"/\");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:\"log\",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:\"error\",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf(\"!\")){var chunks=moduleName.split(\"!\");return window.normalizeModule(parentId,chunks[0])+\"!\"+window.normalizeModule(parentId,chunks[1])}if(\".\"==moduleName.charAt(0)){var base=parentId.split(\"/\").slice(0,-1).join(\"/\");for(moduleName=(base?base+\"/\":\"\")+moduleName;-1!==moduleName.indexOf(\".\")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,\"\").replace(/\\/\\.\\//,\"/\").replace(/[^\\/]+\\/\\.\\.\\//,\"\")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error(\"worker.js acequire() accepts only (parentId, id) as arguments\");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log(\"unable to load \"+id);var path=resolveModuleId(id,window.acequire.tlns);return\".js\"!=path.slice(-3)&&(path+=\".js\"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,\"string\"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),\"function\"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=[\"require\",\"exports\",\"module\"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case\"require\":return req;case\"exports\":return module.exports;case\"module\":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire(\"ace/lib/event_emitter\").EventEmitter,oop=window.acequire(\"ace/lib/oop\"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:\"call\",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:\"event\",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error(\"Unknown command:\"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire(\"ace/lib/es5-shim\"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split(\"\").reverse().join(\"\")},exports.stringRepeat=function(string,count){for(var result=\"\";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,\"\")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,\"\")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&\"object\"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if(\"object\"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if(\"[object Object]\"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,\"\\\\$1\")},exports.escapeHTML=function(str){return str.replace(/&/g,\"&#38;\").replace(/\"/g,\"&#34;\").replace(/'/g,\"&#39;\").replace(/</g,\"&#60;\")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define(\"ace/range\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return\"Range: [\"+this.start.row+\"/\"+this.start.column+\"] -> [\"+this.end.row+\"/\"+this.end.column+\"]\"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){\"object\"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){\"object\"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||\"\";switch(delta.action){case\"insert\":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case\"remove\":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"],function(acequire,exports){\"use strict\";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){\"object\"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?\"unshift\":\"push\"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"],function(acequire,exports){\"use strict\";var oop=acequire(\"./lib/oop\"),EventEmitter=acequire(\"./lib/event_emitter\").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=\"insert\"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal(\"change\",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener(\"change\",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on(\"change\",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"],function(acequire,exports){\"use strict\";var oop=acequire(\"./lib/oop\"),applyDelta=acequire(\"./apply_delta\").applyDelta,EventEmitter=acequire(\"./lib/event_emitter\").EventEmitter,Range=acequire(\"./range\").Range,Anchor=acequire(\"./anchor\").Anchor,Document=function(textOrLines){this.$lines=[\"\"],0===textOrLines.length?this.$lines=[\"\"]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0===\"aaa\".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,\"\\n\").split(\"\\n\")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:\"\\n\",this._signal(\"changeNewLineMode\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\"windows\":return\"\\r\\n\";case\"unix\":return\"\\n\";default:return this.$autoNewLine||\"\\n\"}},this.$autoNewLine=\"\",this.$newLineMode=\"auto\",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal(\"changeNewLineMode\"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return\"\\r\\n\"==text||\"\\r\"==text||\"\\n\"==text},this.getLine=function(row){return this.$lines[row]||\"\"},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||\"\").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\"),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\"),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\"),this.insertMergedLines(position,[\"\",\"\"])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:\"insert\",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([\"\"]),column=0):(lines=[\"\"].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:\"insert\",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:\"remove\",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:\"remove\",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:\"remove\",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:\"remove\",lines:[\"\",\"\"]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert=\"insert\"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal(\"change\",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(\"\"),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:\"insert\"==delta.action?\"remove\":\"insert\",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define(\"ace/worker/mirror\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/document\",\"ace/lib/lang\"],function(acequire,exports){\"use strict\";acequire(\"../range\").Range;var Document=acequire(\"../document\").Document,lang=acequire(\"../lib/lang\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\"\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\"change\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\"insert\",start:data[i],lines:data[i+1]};else var d={action:\"remove\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\"ace/mode/html/saxparser\",[\"require\",\"exports\",\"module\"],function(acequire,exports,module){module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=\"function\"==typeof acequire&&acequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i=\"function\"==typeof acequire&&acequire,o=0;r.length>o;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){function isScopeMarker(node){return\"http://www.w3.org/1999/xhtml\"===node.namespaceURI?\"applet\"===node.localName||\"caption\"===node.localName||\"marquee\"===node.localName||\"object\"===node.localName||\"table\"===node.localName||\"td\"===node.localName||\"th\"===node.localName:\"http://www.w3.org/1998/Math/MathML\"===node.namespaceURI?\"mi\"===node.localName||\"mo\"===node.localName||\"mn\"===node.localName||\"ms\"===node.localName||\"mtext\"===node.localName||\"annotation-xml\"===node.localName:\"http://www.w3.org/2000/svg\"===node.namespaceURI?\"foreignObject\"===node.localName||\"desc\"===node.localName||\"title\"===node.localName:void 0}function isListItemScopeMarker(node){return isScopeMarker(node)||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"ol\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"ul\"===node.localName}function isTableScopeMarker(node){return\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"table\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"html\"===node.localName}function isTableBodyScopeMarker(node){return\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"tbody\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"tfoot\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"thead\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"html\"===node.localName}function isTableRowScopeMarker(node){return\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"tr\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"html\"===node.localName}function isButtonScopeMarker(node){return isScopeMarker(node)||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"button\"===node.localName}function isSelectScopeMarker(node){return!(\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"optgroup\"===node.localName||\"http://www.w3.org/1999/xhtml\"===node.namespaceURI&&\"option\"===node.localName)}function ElementStack(){this.elements=[],this.rootNode=null,this.headElement=null,this.bodyElement=null}ElementStack.prototype._inScope=function(localName,isMarker){for(var i=this.elements.length-1;i>=0;i--){var node=this.elements[i];if(node.localName===localName)return!0;if(isMarker(node))return!1}},ElementStack.prototype.push=function(item){this.elements.push(item)},ElementStack.prototype.pushHtmlElement=function(item){this.rootNode=item.node,this.push(item)},ElementStack.prototype.pushHeadElement=function(item){this.headElement=item.node,this.push(item)},ElementStack.prototype.pushBodyElement=function(item){this.bodyElement=item.node,this.push(item)},ElementStack.prototype.pop=function(){return this.elements.pop()},ElementStack.prototype.remove=function(item){this.elements.splice(this.elements.indexOf(item),1)},ElementStack.prototype.popUntilPopped=function(localName){var element;do element=this.pop();while(element.localName!=localName)},ElementStack.prototype.popUntilTableScopeMarker=function(){for(;!isTableScopeMarker(this.top);)this.pop()},ElementStack.prototype.popUntilTableBodyScopeMarker=function(){for(;!isTableBodyScopeMarker(this.top);)this.pop()},ElementStack.prototype.popUntilTableRowScopeMarker=function(){for(;!isTableRowScopeMarker(this.top);)this.pop()},ElementStack.prototype.item=function(index){return this.elements[index]},ElementStack.prototype.contains=function(element){return-1!==this.elements.indexOf(element)},ElementStack.prototype.inScope=function(localName){return this._inScope(localName,isScopeMarker)},ElementStack.prototype.inListItemScope=function(localName){return this._inScope(localName,isListItemScopeMarker)},ElementStack.prototype.inTableScope=function(localName){return this._inScope(localName,isTableScopeMarker)},ElementStack.prototype.inButtonScope=function(localName){return this._inScope(localName,isButtonScopeMarker)},ElementStack.prototype.inSelectScope=function(localName){return this._inScope(localName,isSelectScopeMarker)},ElementStack.prototype.hasNumberedHeaderElementInScope=function(){for(var i=this.elements.length-1;i>=0;i--){var node=this.elements[i];if(node.isNumberedHeader())return!0;if(isScopeMarker(node))return!1}},ElementStack.prototype.furthestBlockForFormattingElement=function(element){for(var furthestBlock=null,i=this.elements.length-1;i>=0;i--){var node=this.elements[i];\nif(node.node===element)break;node.isSpecial()&&(furthestBlock=node)}return furthestBlock},ElementStack.prototype.findIndex=function(localName){for(var i=this.elements.length-1;i>=0;i--)if(this.elements[i].localName==localName)return i;return-1},ElementStack.prototype.remove_openElements_until=function(callback){for(var element,finished=!1;!finished;)element=this.elements.pop(),finished=callback(element);return element},Object.defineProperty(ElementStack.prototype,\"top\",{get:function(){return this.elements[this.elements.length-1]}}),Object.defineProperty(ElementStack.prototype,\"length\",{get:function(){return this.elements.length}}),exports.ElementStack=ElementStack},{}],2:[function(_dereq_,module,exports){function isAlphaNumeric(c){return c>=\"0\"&&\"9\">=c||c>=\"a\"&&\"z\">=c||c>=\"A\"&&\"Z\">=c}function isHexDigit(c){return c>=\"0\"&&\"9\">=c||c>=\"a\"&&\"f\">=c||c>=\"A\"&&\"F\">=c}function isDecimalDigit(c){return c>=\"0\"&&\"9\">=c}var entities=_dereq_(\"html5-entities\"),InputStream=_dereq_(\"./InputStream\").InputStream,namedEntityPrefixes={};Object.keys(entities).forEach(function(entityKey){for(var i=0;entityKey.length>i;i++)namedEntityPrefixes[entityKey.substring(0,i+1)]=!0});var EntityParser={};EntityParser.consumeEntity=function(buffer,tokenizer,additionalAllowedCharacter){var decodedCharacter=\"\",consumedCharacters=\"\",ch=buffer.char();if(ch===InputStream.EOF)return!1;if(consumedCharacters+=ch,\"\t\"==ch||\"\\n\"==ch||\"\u000b\"==ch||\" \"==ch||\"<\"==ch||\"&\"==ch)return buffer.unget(consumedCharacters),!1;if(additionalAllowedCharacter===ch)return buffer.unget(consumedCharacters),!1;if(\"#\"==ch){if(ch=buffer.shift(1),ch===InputStream.EOF)return tokenizer._parseError(\"expected-numeric-entity-but-got-eof\"),buffer.unget(consumedCharacters),!1;consumedCharacters+=ch;var radix=10,isDigit=isDecimalDigit;if(\"x\"==ch||\"X\"==ch){if(radix=16,isDigit=isHexDigit,ch=buffer.shift(1),ch===InputStream.EOF)return tokenizer._parseError(\"expected-numeric-entity-but-got-eof\"),buffer.unget(consumedCharacters),!1;consumedCharacters+=ch}if(isDigit(ch)){for(var code=\"\";ch!==InputStream.EOF&&isDigit(ch);)code+=ch,ch=buffer.char();code=parseInt(code,radix);var replacement=this.replaceEntityNumbers(code);if(replacement&&(tokenizer._parseError(\"invalid-numeric-entity-replaced\"),code=replacement),code>65535&&1114111>=code){code-=65536;var first=((1047552&code)>>10)+55296,second=(1023&code)+56320;decodedCharacter=String.fromCharCode(first,second)}else decodedCharacter=String.fromCharCode(code);return\";\"!==ch&&(tokenizer._parseError(\"numeric-entity-without-semicolon\"),buffer.unget(ch)),decodedCharacter}return buffer.unget(consumedCharacters),tokenizer._parseError(\"expected-numeric-entity\"),!1}if(ch>=\"a\"&&\"z\">=ch||ch>=\"A\"&&\"Z\">=ch){for(var mostRecentMatch=\"\";namedEntityPrefixes[consumedCharacters]&&(entities[consumedCharacters]&&(mostRecentMatch=consumedCharacters),\";\"!=ch)&&(ch=buffer.char(),ch!==InputStream.EOF);)consumedCharacters+=ch;return mostRecentMatch?(decodedCharacter=entities[mostRecentMatch],\";\"===ch||!additionalAllowedCharacter||!isAlphaNumeric(ch)&&\"=\"!==ch?(consumedCharacters.length>mostRecentMatch.length&&buffer.unget(consumedCharacters.substring(mostRecentMatch.length)),\";\"!==ch&&tokenizer._parseError(\"named-entity-without-semicolon\"),decodedCharacter):(buffer.unget(consumedCharacters),!1)):(tokenizer._parseError(\"expected-named-entity\"),buffer.unget(consumedCharacters),!1)}},EntityParser.replaceEntityNumbers=function(c){switch(c){case 0:return 65533;case 19:return 16;case 128:return 8364;case 129:return 129;case 130:return 8218;case 131:return 402;case 132:return 8222;case 133:return 8230;case 134:return 8224;case 135:return 8225;case 136:return 710;case 137:return 8240;case 138:return 352;case 139:return 8249;case 140:return 338;case 141:return 141;case 142:return 381;case 143:return 143;case 144:return 144;case 145:return 8216;case 146:return 8217;case 147:return 8220;case 148:return 8221;case 149:return 8226;case 150:return 8211;case 151:return 8212;case 152:return 732;case 153:return 8482;case 154:return 353;case 155:return 8250;case 156:return 339;case 157:return 157;case 158:return 382;case 159:return 376;default:if(c>=55296&&57343>=c||c>1114111)return 65533;if(c>=1&&8>=c||c>=14&&31>=c||c>=127&&159>=c||c>=64976&&65007>=c||11==c||65534==c||131070==c||3145726==c||196607==c||262142==c||262143==c||327678==c||327679==c||393214==c||393215==c||458750==c||458751==c||524286==c||524287==c||589822==c||589823==c||655358==c||655359==c||720894==c||720895==c||786430==c||786431==c||851966==c||851967==c||917502==c||917503==c||983038==c||983039==c||1048574==c||1048575==c||1114110==c||1114111==c)return c}},exports.EntityParser=EntityParser},{\"./InputStream\":3,\"html5-entities\":12}],3:[function(_dereq_,module,exports){function InputStream(){this.data=\"\",this.start=0,this.committed=0,this.eof=!1,this.lastLocation={line:0,column:0}}InputStream.EOF=-1,InputStream.DRAIN=-2,InputStream.prototype={slice:function(){if(this.start>=this.data.length){if(!this.eof)throw InputStream.DRAIN;return InputStream.EOF}return this.data.slice(this.start,this.data.length)},\"char\":function(){if(!this.eof&&this.start>=this.data.length-1)throw InputStream.DRAIN;if(this.start>=this.data.length)return InputStream.EOF;var ch=this.data[this.start++];return\"\\r\"===ch&&(ch=\"\\n\"),ch},advance:function(amount){if(this.start+=amount,this.start>=this.data.length){if(!this.eof)throw InputStream.DRAIN;return InputStream.EOF}this.committed>this.data.length/2&&(this.lastLocation=this.location(),this.data=this.data.slice(this.committed),this.start=this.start-this.committed,this.committed=0)},matchWhile:function(re){if(this.eof&&this.start>=this.data.length)return\"\";var r=RegExp(\"^\"+re+\"+\"),m=r.exec(this.slice());if(m){if(!this.eof&&m[0].length==this.data.length-this.start)throw InputStream.DRAIN;return this.advance(m[0].length),m[0]}return\"\"},matchUntil:function(re){var m,s;if(s=this.slice(),s===InputStream.EOF)return\"\";if(m=RegExp(re+(this.eof?\"|$\":\"\")).exec(s)){var t=this.data.slice(this.start,this.start+m.index);return this.advance(m.index),t.replace(/\\r/g,\"\\n\").replace(/\\n{2,}/g,\"\\n\")}throw InputStream.DRAIN},append:function(data){this.data+=data},shift:function(n){if(!this.eof&&this.start+n>=this.data.length)throw InputStream.DRAIN;if(this.eof&&this.start>=this.data.length)return InputStream.EOF;var d=\"\"+this.data.slice(this.start,this.start+n);return this.advance(Math.min(n,this.data.length-this.start)),d},peek:function(n){if(!this.eof&&this.start+n>=this.data.length)throw InputStream.DRAIN;return this.eof&&this.start>=this.data.length?InputStream.EOF:\"\"+this.data.slice(this.start,Math.min(this.start+n,this.data.length))},length:function(){return this.data.length-this.start-1},unget:function(d){d!==InputStream.EOF&&(this.start-=d.length)},undo:function(){this.start=this.committed},commit:function(){this.committed=this.start},location:function(){var lastLine=this.lastLocation.line,lastColumn=this.lastLocation.column,read=this.data.slice(0,this.committed),newlines=read.match(/\\n/g),line=newlines?lastLine+newlines.length:lastLine,column=newlines?read.length-read.lastIndexOf(\"\\n\")-1:lastColumn+read.length;return{line:line,column:column}}},exports.InputStream=InputStream},{}],4:[function(_dereq_,module,exports){function StackItem(namespaceURI,localName,attributes,node){this.localName=localName,this.namespaceURI=namespaceURI,this.attributes=attributes,this.node=node}function getAttribute(item,name){for(var i=0;item.attributes.length>i;i++)if(item.attributes[i].nodeName==name)return item.attributes[i].nodeValue;return null}var SpecialElements={\"http://www.w3.org/1999/xhtml\":[\"address\",\"applet\",\"area\",\"article\",\"aside\",\"base\",\"basefont\",\"bgsound\",\"blockquote\",\"body\",\"br\",\"button\",\"caption\",\"center\",\"col\",\"colgroup\",\"dd\",\"details\",\"dir\",\"div\",\"dl\",\"dt\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"frame\",\"frameset\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"iframe\",\"img\",\"input\",\"isindex\",\"li\",\"link\",\"listing\",\"main\",\"marquee\",\"menu\",\"menuitem\",\"meta\",\"nav\",\"noembed\",\"noframes\",\"noscript\",\"object\",\"ol\",\"p\",\"param\",\"plaintext\",\"pre\",\"script\",\"section\",\"select\",\"source\",\"style\",\"summary\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"title\",\"tr\",\"track\",\"ul\",\"wbr\",\"xmp\"],\"http://www.w3.org/1998/Math/MathML\":[\"mi\",\"mo\",\"mn\",\"ms\",\"mtext\",\"annotation-xml\"],\"http://www.w3.org/2000/svg\":[\"foreignObject\",\"desc\",\"title\"]};StackItem.prototype.isSpecial=function(){return this.namespaceURI in SpecialElements&&SpecialElements[this.namespaceURI].indexOf(this.localName)>-1},StackItem.prototype.isFosterParenting=function(){return\"http://www.w3.org/1999/xhtml\"===this.namespaceURI?\"table\"===this.localName||\"tbody\"===this.localName||\"tfoot\"===this.localName||\"thead\"===this.localName||\"tr\"===this.localName:!1},StackItem.prototype.isNumberedHeader=function(){return\"http://www.w3.org/1999/xhtml\"===this.namespaceURI?\"h1\"===this.localName||\"h2\"===this.localName||\"h3\"===this.localName||\"h4\"===this.localName||\"h5\"===this.localName||\"h6\"===this.localName:!1},StackItem.prototype.isForeign=function(){return\"http://www.w3.org/1999/xhtml\"!=this.namespaceURI},StackItem.prototype.isHtmlIntegrationPoint=function(){if(\"http://www.w3.org/1998/Math/MathML\"===this.namespaceURI){if(\"annotation-xml\"!==this.localName)return!1;var encoding=getAttribute(this,\"encoding\");return encoding?(encoding=encoding.toLowerCase(),\"text/html\"===encoding||\"application/xhtml+xml\"===encoding):!1}return\"http://www.w3.org/2000/svg\"===this.namespaceURI?\"foreignObject\"===this.localName||\"desc\"===this.localName||\"title\"===this.localName:!1},StackItem.prototype.isMathMLTextIntegrationPoint=function(){return\"http://www.w3.org/1998/Math/MathML\"===this.namespaceURI?\"mi\"===this.localName||\"mo\"===this.localName||\"mn\"===this.localName||\"ms\"===this.localName||\"mtext\"===this.localName:!1},exports.StackItem=StackItem},{}],5:[function(_dereq_,module,exports){function isWhitespace(c){return\" \"===c||\"\\n\"===c||\"\t\"===c||\"\\r\"===c||\"\\f\"===c}function isAlpha(c){return c>=\"A\"&&\"Z\">=c||c>=\"a\"&&\"z\">=c}function Tokenizer(tokenHandler){this._tokenHandler=tokenHandler,this._state=Tokenizer.DATA,this._inputStream=new InputStream,this._currentToken=null,this._temporaryBuffer=\"\",this._additionalAllowedCharacter=\"\"}var InputStream=_dereq_(\"./InputStream\").InputStream,EntityParser=_dereq_(\"./EntityParser\").EntityParser;Tokenizer.prototype._parseError=function(code,args){this._tokenHandler.parseError(code,args)},Tokenizer.prototype._emitToken=function(token){if(\"StartTag\"===token.type)for(var i=1;token.data.length>i;i++)token.data[i].nodeName||token.data.splice(i--,1);else\"EndTag\"===token.type&&(token.selfClosing&&this._parseError(\"self-closing-flag-on-end-tag\"),0!==token.data.length&&this._parseError(\"attributes-in-end-tag\"));this._tokenHandler.processToken(token),\"StartTag\"===token.type&&token.selfClosing&&!this._tokenHandler.isSelfClosingFlagAcknowledged()&&this._parseError(\"non-void-element-with-trailing-solidus\",{name:token.name})},Tokenizer.prototype._emitCurrentToken=function(){this._state=Tokenizer.DATA,this._emitToken(this._currentToken)},Tokenizer.prototype._currentAttribute=function(){return this._currentToken.data[this._currentToken.data.length-1]},Tokenizer.prototype.setState=function(state){this._state=state},Tokenizer.prototype.tokenize=function(source){function data_state(buffer){var data=buffer.char();if(data===InputStream.EOF)return tokenizer._emitToken({type:\"EOF\",data:null}),!1;if(\"&\"===data)tokenizer.setState(character_reference_in_data_state);else if(\"<\"===data)tokenizer.setState(tag_open_state);else if(\"\\0\"===data)tokenizer._emitToken({type:\"Characters\",data:data}),buffer.commit();else{var chars=buffer.matchUntil(\"&|<|\\0\");tokenizer._emitToken({type:\"Characters\",data:data+chars}),buffer.commit()}return!0}function character_reference_in_data_state(buffer){var character=EntityParser.consumeEntity(buffer,tokenizer);return tokenizer.setState(data_state),tokenizer._emitToken({type:\"Characters\",data:character||\"&\"}),!0}function rcdata_state(buffer){var data=buffer.char();if(data===InputStream.EOF)return tokenizer._emitToken({type:\"EOF\",data:null}),!1;if(\"&\"===data)tokenizer.setState(character_reference_in_rcdata_state);else if(\"<\"===data)tokenizer.setState(rcdata_less_than_sign_state);else if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),buffer.commit();else{var chars=buffer.matchUntil(\"&|<|\\0\");tokenizer._emitToken({type:\"Characters\",data:data+chars}),buffer.commit()}return!0}function character_reference_in_rcdata_state(buffer){var character=EntityParser.consumeEntity(buffer,tokenizer);return tokenizer.setState(rcdata_state),tokenizer._emitToken({type:\"Characters\",data:character||\"&\"}),!0}function rawtext_state(buffer){var data=buffer.char();if(data===InputStream.EOF)return tokenizer._emitToken({type:\"EOF\",data:null}),!1;if(\"<\"===data)tokenizer.setState(rawtext_less_than_sign_state);else if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),buffer.commit();else{var chars=buffer.matchUntil(\"<|\\0\");tokenizer._emitToken({type:\"Characters\",data:data+chars})}return!0}function plaintext_state(buffer){var data=buffer.char();if(data===InputStream.EOF)return tokenizer._emitToken({type:\"EOF\",data:null}),!1;if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),buffer.commit();else{var chars=buffer.matchUntil(\"\\0\");tokenizer._emitToken({type:\"Characters\",data:data+chars})}return!0}function script_data_state(buffer){var data=buffer.char();if(data===InputStream.EOF)return tokenizer._emitToken({type:\"EOF\",data:null}),!1;if(\"<\"===data)tokenizer.setState(script_data_less_than_sign_state);else if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),buffer.commit();else{var chars=buffer.matchUntil(\"<|\\0\");tokenizer._emitToken({type:\"Characters\",data:data+chars})}return!0}function rcdata_less_than_sign_state(buffer){var data=buffer.char();return\"/\"===data?(this._temporaryBuffer=\"\",tokenizer.setState(rcdata_end_tag_open_state)):(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),buffer.unget(data),tokenizer.setState(rcdata_state)),!0}function rcdata_end_tag_open_state(buffer){var data=buffer.char();return isAlpha(data)?(this._temporaryBuffer+=data,tokenizer.setState(rcdata_end_tag_name_state)):(tokenizer._emitToken({type:\"Characters\",data:\"</\"}),buffer.unget(data),tokenizer.setState(rcdata_state)),!0}function rcdata_end_tag_name_state(buffer){var appropriate=tokenizer._currentToken&&tokenizer._currentToken.name===this._temporaryBuffer.toLowerCase(),data=buffer.char();return isWhitespace(data)&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:this._temporaryBuffer,data:[],selfClosing:!1},tokenizer.setState(before_attribute_name_state)):\"/\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:this._temporaryBuffer,data:[],selfClosing:!1},tokenizer.setState(self_closing_tag_state)):\">\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:this._temporaryBuffer,data:[],selfClosing:!1},tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):isAlpha(data)?(this._temporaryBuffer+=data,buffer.commit()):(tokenizer._emitToken({type:\"Characters\",data:\"</\"+this._temporaryBuffer}),buffer.unget(data),tokenizer.setState(rcdata_state)),!0}function rawtext_less_than_sign_state(buffer){var data=buffer.char();return\"/\"===data?(this._temporaryBuffer=\"\",tokenizer.setState(rawtext_end_tag_open_state)):(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),buffer.unget(data),tokenizer.setState(rawtext_state)),!0}function rawtext_end_tag_open_state(buffer){var data=buffer.char();return isAlpha(data)?(this._temporaryBuffer+=data,tokenizer.setState(rawtext_end_tag_name_state)):(tokenizer._emitToken({type:\"Characters\",data:\"</\"}),buffer.unget(data),tokenizer.setState(rawtext_state)),!0}function rawtext_end_tag_name_state(buffer){var appropriate=tokenizer._currentToken&&tokenizer._currentToken.name===this._temporaryBuffer.toLowerCase(),data=buffer.char();return isWhitespace(data)&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:this._temporaryBuffer,data:[],selfClosing:!1},tokenizer.setState(before_attribute_name_state)):\"/\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:this._temporaryBuffer,data:[],selfClosing:!1},tokenizer.setState(self_closing_tag_state)):\">\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:this._temporaryBuffer,data:[],selfClosing:!1},tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):isAlpha(data)?(this._temporaryBuffer+=data,buffer.commit()):(tokenizer._emitToken({type:\"Characters\",data:\"</\"+this._temporaryBuffer}),buffer.unget(data),tokenizer.setState(rawtext_state)),!0}function script_data_less_than_sign_state(buffer){var data=buffer.char();return\"/\"===data?(this._temporaryBuffer=\"\",tokenizer.setState(script_data_end_tag_open_state)):\"!\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"<!\"}),tokenizer.setState(script_data_escape_start_state)):(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),buffer.unget(data),tokenizer.setState(script_data_state)),!0}function script_data_end_tag_open_state(buffer){var data=buffer.char();return isAlpha(data)?(this._temporaryBuffer+=data,tokenizer.setState(script_data_end_tag_name_state)):(tokenizer._emitToken({type:\"Characters\",data:\"</\"}),buffer.unget(data),tokenizer.setState(script_data_state)),!0}function script_data_end_tag_name_state(buffer){var appropriate=tokenizer._currentToken&&tokenizer._currentToken.name===this._temporaryBuffer.toLowerCase(),data=buffer.char();return isWhitespace(data)&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:\"script\",data:[],selfClosing:!1},tokenizer.setState(before_attribute_name_state)):\"/\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:\"script\",data:[],selfClosing:!1},tokenizer.setState(self_closing_tag_state)):\">\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:\"script\",data:[],selfClosing:!1},tokenizer._emitCurrentToken()):isAlpha(data)?(this._temporaryBuffer+=data,buffer.commit()):(tokenizer._emitToken({type:\"Characters\",data:\"</\"+this._temporaryBuffer}),buffer.unget(data),tokenizer.setState(script_data_state)),!0}function script_data_escape_start_state(buffer){var data=buffer.char();return\"-\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"-\"}),tokenizer.setState(script_data_escape_start_dash_state)):(buffer.unget(data),tokenizer.setState(script_data_state)),!0}function script_data_escape_start_dash_state(buffer){var data=buffer.char();return\"-\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"-\"}),tokenizer.setState(script_data_escaped_dash_dash_state)):(buffer.unget(data),tokenizer.setState(script_data_state)),!0}function script_data_escaped_state(buffer){var data=buffer.char();if(data===InputStream.EOF)buffer.unget(data),tokenizer.setState(data_state);else if(\"-\"===data)tokenizer._emitToken({type:\"Characters\",data:\"-\"}),tokenizer.setState(script_data_escaped_dash_state);else if(\"<\"===data)tokenizer.setState(script_data_escaped_less_then_sign_state);else if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),buffer.commit();else{var chars=buffer.matchUntil(\"<|-|\\0\");tokenizer._emitToken({type:\"Characters\",data:data+chars})}return!0}function script_data_escaped_dash_state(buffer){var data=buffer.char();return data===InputStream.EOF?(buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"-\"}),tokenizer.setState(script_data_escaped_dash_dash_state)):\"<\"===data?tokenizer.setState(script_data_escaped_less_then_sign_state):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),tokenizer.setState(script_data_escaped_state)):(tokenizer._emitToken({type:\"Characters\",data:data}),tokenizer.setState(script_data_escaped_state)),!0}function script_data_escaped_dash_dash_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-script\"),buffer.unget(data),tokenizer.setState(data_state)):\"<\"===data?tokenizer.setState(script_data_escaped_less_then_sign_state):\">\"===data?(tokenizer._emitToken({type:\"Characters\",data:\">\"}),tokenizer.setState(script_data_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),tokenizer.setState(script_data_escaped_state)):(tokenizer._emitToken({type:\"Characters\",data:data}),tokenizer.setState(script_data_escaped_state)),!0}function script_data_escaped_less_then_sign_state(buffer){var data=buffer.char();return\"/\"===data?(this._temporaryBuffer=\"\",tokenizer.setState(script_data_escaped_end_tag_open_state)):isAlpha(data)?(tokenizer._emitToken({type:\"Characters\",data:\"<\"+data}),this._temporaryBuffer=data,tokenizer.setState(script_data_double_escape_start_state)):(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),buffer.unget(data),tokenizer.setState(script_data_escaped_state)),!0}function script_data_escaped_end_tag_open_state(buffer){var data=buffer.char();return isAlpha(data)?(this._temporaryBuffer=data,tokenizer.setState(script_data_escaped_end_tag_name_state)):(tokenizer._emitToken({type:\"Characters\",data:\"</\"}),buffer.unget(data),tokenizer.setState(script_data_escaped_state)),!0}function script_data_escaped_end_tag_name_state(buffer){var appropriate=tokenizer._currentToken&&tokenizer._currentToken.name===this._temporaryBuffer.toLowerCase(),data=buffer.char();return isWhitespace(data)&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:\"script\",data:[],selfClosing:!1},tokenizer.setState(before_attribute_name_state)):\"/\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:\"script\",data:[],selfClosing:!1},tokenizer.setState(self_closing_tag_state)):\">\"===data&&appropriate?(tokenizer._currentToken={type:\"EndTag\",name:\"script\",data:[],selfClosing:!1},tokenizer.setState(data_state),tokenizer._emitCurrentToken()):isAlpha(data)?(this._temporaryBuffer+=data,buffer.commit()):(tokenizer._emitToken({type:\"Characters\",data:\"</\"+this._temporaryBuffer}),buffer.unget(data),tokenizer.setState(script_data_escaped_state)),!0}function script_data_double_escape_start_state(buffer){var data=buffer.char();return isWhitespace(data)||\"/\"===data||\">\"===data?(tokenizer._emitToken({type:\"Characters\",data:data}),\"script\"===this._temporaryBuffer.toLowerCase()?tokenizer.setState(script_data_double_escaped_state):tokenizer.setState(script_data_escaped_state)):isAlpha(data)?(tokenizer._emitToken({type:\"Characters\",data:data}),this._temporaryBuffer+=data,buffer.commit()):(buffer.unget(data),tokenizer.setState(script_data_escaped_state)),!0}function script_data_double_escaped_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-script\"),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"-\"}),tokenizer.setState(script_data_double_escaped_dash_state)):\"<\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),tokenizer.setState(script_data_double_escaped_less_than_sign_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),buffer.commit()):(tokenizer._emitToken({type:\"Characters\",data:data}),buffer.commit()),!0}function script_data_double_escaped_dash_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-script\"),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"-\"}),tokenizer.setState(script_data_double_escaped_dash_dash_state)):\"<\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),tokenizer.setState(script_data_double_escaped_less_than_sign_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),tokenizer.setState(script_data_double_escaped_state)):(tokenizer._emitToken({type:\"Characters\",data:data}),tokenizer.setState(script_data_double_escaped_state)),!0}function script_data_double_escaped_dash_dash_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-script\"),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"-\"}),buffer.commit()):\"<\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"<\"}),tokenizer.setState(script_data_double_escaped_less_than_sign_state)):\">\"===data?(tokenizer._emitToken({type:\"Characters\",data:\">\"}),tokenizer.setState(script_data_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._emitToken({type:\"Characters\",data:\"�\"}),tokenizer.setState(script_data_double_escaped_state)):(tokenizer._emitToken({type:\"Characters\",data:data}),tokenizer.setState(script_data_double_escaped_state)),!0}function script_data_double_escaped_less_than_sign_state(buffer){var data=buffer.char();return\"/\"===data?(tokenizer._emitToken({type:\"Characters\",data:\"/\"}),this._temporaryBuffer=\"\",tokenizer.setState(script_data_double_escape_end_state)):(buffer.unget(data),tokenizer.setState(script_data_double_escaped_state)),!0}function script_data_double_escape_end_state(buffer){var data=buffer.char();return isWhitespace(data)||\"/\"===data||\">\"===data?(tokenizer._emitToken({type:\"Characters\",data:data}),\"script\"===this._temporaryBuffer.toLowerCase()?tokenizer.setState(script_data_escaped_state):tokenizer.setState(script_data_double_escaped_state)):isAlpha(data)?(tokenizer._emitToken({type:\"Characters\",data:data}),this._temporaryBuffer+=data,buffer.commit()):(buffer.unget(data),tokenizer.setState(script_data_double_escaped_state)),!0}function tag_open_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"bare-less-than-sign-at-eof\"),tokenizer._emitToken({type:\"Characters\",data:\"<\"}),buffer.unget(data),tokenizer.setState(data_state)):isAlpha(data)?(tokenizer._currentToken={type:\"StartTag\",name:data.toLowerCase(),data:[]},tokenizer.setState(tag_name_state)):\"!\"===data?tokenizer.setState(markup_declaration_open_state):\"/\"===data?tokenizer.setState(close_tag_open_state):\">\"===data?(tokenizer._parseError(\"expected-tag-name-but-got-right-bracket\"),tokenizer._emitToken({type:\"Characters\",data:\"<>\"}),tokenizer.setState(data_state)):\"?\"===data?(tokenizer._parseError(\"expected-tag-name-but-got-question-mark\"),buffer.unget(data),tokenizer.setState(bogus_comment_state)):(tokenizer._parseError(\"expected-tag-name\"),tokenizer._emitToken({type:\"Characters\",data:\"<\"}),buffer.unget(data),tokenizer.setState(data_state)),!0}function close_tag_open_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"expected-closing-tag-but-got-eof\"),tokenizer._emitToken({type:\"Characters\",data:\"</\"}),buffer.unget(data),tokenizer.setState(data_state)):isAlpha(data)?(tokenizer._currentToken={type:\"EndTag\",name:data.toLowerCase(),data:[]},tokenizer.setState(tag_name_state)):\">\"===data?(tokenizer._parseError(\"expected-closing-tag-but-got-right-bracket\"),tokenizer.setState(data_state)):(tokenizer._parseError(\"expected-closing-tag-but-got-char\",{data:data}),buffer.unget(data),tokenizer.setState(bogus_comment_state)),!0}function tag_name_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-tag-name\"),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)?tokenizer.setState(before_attribute_name_state):isAlpha(data)?tokenizer._currentToken.name+=data.toLowerCase():\">\"===data?tokenizer._emitCurrentToken():\"/\"===data?tokenizer.setState(self_closing_tag_state):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.name+=\"�\"):tokenizer._currentToken.name+=data,buffer.commit(),!0}function before_attribute_name_state(buffer){var data=buffer.char();if(data===InputStream.EOF)tokenizer._parseError(\"expected-attribute-name-but-got-eof\"),buffer.unget(data),tokenizer.setState(data_state);else{if(isWhitespace(data))return!0;isAlpha(data)?(tokenizer._currentToken.data.push({nodeName:data.toLowerCase(),nodeValue:\"\"}),tokenizer.setState(attribute_name_state)):\">\"===data?tokenizer._emitCurrentToken():\"/\"===data?tokenizer.setState(self_closing_tag_state):\"'\"===data||'\"'===data||\"=\"===data||\"<\"===data?(tokenizer._parseError(\"invalid-character-in-attribute-name\"),tokenizer._currentToken.data.push({nodeName:data,nodeValue:\"\"}),tokenizer.setState(attribute_name_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data.push({nodeName:\"�\",nodeValue:\"\"})):(tokenizer._currentToken.data.push({nodeName:data,nodeValue:\"\"}),tokenizer.setState(attribute_name_state))}return!0}function attribute_name_state(buffer){var data=buffer.char(),leavingThisState=!0,shouldEmit=!1;if(data===InputStream.EOF?(tokenizer._parseError(\"eof-in-attribute-name\"),buffer.unget(data),tokenizer.setState(data_state),shouldEmit=!0):\"=\"===data?tokenizer.setState(before_attribute_value_state):isAlpha(data)?(tokenizer._currentAttribute().nodeName+=data.toLowerCase(),leavingThisState=!1):\">\"===data?shouldEmit=!0:isWhitespace(data)?tokenizer.setState(after_attribute_name_state):\"/\"===data?tokenizer.setState(self_closing_tag_state):\"'\"===data||'\"'===data?(tokenizer._parseError(\"invalid-character-in-attribute-name\"),tokenizer._currentAttribute().nodeName+=data,leavingThisState=!1):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentAttribute().nodeName+=\"�\"):(tokenizer._currentAttribute().nodeName+=data,leavingThisState=!1),leavingThisState){for(var attributes=tokenizer._currentToken.data,currentAttribute=attributes[attributes.length-1],i=attributes.length-2;i>=0;i--)if(currentAttribute.nodeName===attributes[i].nodeName){tokenizer._parseError(\"duplicate-attribute\",{name:currentAttribute.nodeName}),currentAttribute.nodeName=null;break}shouldEmit&&tokenizer._emitCurrentToken()}else buffer.commit();return!0}function after_attribute_name_state(buffer){var data=buffer.char();if(data===InputStream.EOF)tokenizer._parseError(\"expected-end-of-tag-but-got-eof\"),buffer.unget(data),tokenizer.setState(data_state);else{if(isWhitespace(data))return!0;\"=\"===data?tokenizer.setState(before_attribute_value_state):\">\"===data?tokenizer._emitCurrentToken():isAlpha(data)?(tokenizer._currentToken.data.push({nodeName:data,nodeValue:\"\"}),tokenizer.setState(attribute_name_state)):\"/\"===data?tokenizer.setState(self_closing_tag_state):\"'\"===data||'\"'===data||\"<\"===data?(tokenizer._parseError(\"invalid-character-after-attribute-name\"),tokenizer._currentToken.data.push({nodeName:data,nodeValue:\"\"}),tokenizer.setState(attribute_name_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data.push({nodeName:\"�\",nodeValue:\"\"})):(tokenizer._currentToken.data.push({nodeName:data,nodeValue:\"\"}),tokenizer.setState(attribute_name_state))}return!0}function before_attribute_value_state(buffer){var data=buffer.char();if(data===InputStream.EOF)tokenizer._parseError(\"expected-attribute-value-but-got-eof\"),buffer.unget(data),tokenizer.setState(data_state);else{if(isWhitespace(data))return!0;'\"'===data?tokenizer.setState(attribute_value_double_quoted_state):\"&\"===data?(tokenizer.setState(attribute_value_unquoted_state),buffer.unget(data)):\"'\"===data?tokenizer.setState(attribute_value_single_quoted_state):\">\"===data?(tokenizer._parseError(\"expected-attribute-value-but-got-right-bracket\"),tokenizer._emitCurrentToken()):\"=\"===data||\"<\"===data||\"`\"===data?(tokenizer._parseError(\"unexpected-character-in-unquoted-attribute-value\"),tokenizer._currentAttribute().nodeValue+=data,tokenizer.setState(attribute_value_unquoted_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentAttribute().nodeValue+=\"�\"):(tokenizer._currentAttribute().nodeValue+=data,tokenizer.setState(attribute_value_unquoted_state))}return!0\n}function attribute_value_double_quoted_state(buffer){var data=buffer.char();if(data===InputStream.EOF)tokenizer._parseError(\"eof-in-attribute-value-double-quote\"),buffer.unget(data),tokenizer.setState(data_state);else if('\"'===data)tokenizer.setState(after_attribute_value_state);else if(\"&\"===data)this._additionalAllowedCharacter='\"',tokenizer.setState(character_reference_in_attribute_value_state);else if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentAttribute().nodeValue+=\"�\";else{var s=buffer.matchUntil('[\\0\"&]');data+=s,tokenizer._currentAttribute().nodeValue+=data}return!0}function attribute_value_single_quoted_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-attribute-value-single-quote\"),buffer.unget(data),tokenizer.setState(data_state)):\"'\"===data?tokenizer.setState(after_attribute_value_state):\"&\"===data?(this._additionalAllowedCharacter=\"'\",tokenizer.setState(character_reference_in_attribute_value_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentAttribute().nodeValue+=\"�\"):tokenizer._currentAttribute().nodeValue+=data+buffer.matchUntil(\"\\0|['&]\"),!0}function attribute_value_unquoted_state(buffer){var data=buffer.char();if(data===InputStream.EOF)tokenizer._parseError(\"eof-after-attribute-value\"),buffer.unget(data),tokenizer.setState(data_state);else if(isWhitespace(data))tokenizer.setState(before_attribute_name_state);else if(\"&\"===data)this._additionalAllowedCharacter=\">\",tokenizer.setState(character_reference_in_attribute_value_state);else if(\">\"===data)tokenizer._emitCurrentToken();else if('\"'===data||\"'\"===data||\"=\"===data||\"`\"===data||\"<\"===data)tokenizer._parseError(\"unexpected-character-in-unquoted-attribute-value\"),tokenizer._currentAttribute().nodeValue+=data,buffer.commit();else if(\"\\0\"===data)tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentAttribute().nodeValue+=\"�\";else{var o=buffer.matchUntil(\"\\0|[\t\\n\u000b\\f \\r&<>\\\"'=`]\");o===InputStream.EOF&&(tokenizer._parseError(\"eof-in-attribute-value-no-quotes\"),tokenizer._emitCurrentToken()),buffer.commit(),tokenizer._currentAttribute().nodeValue+=data+o}return!0}function character_reference_in_attribute_value_state(buffer){var character=EntityParser.consumeEntity(buffer,tokenizer,this._additionalAllowedCharacter);return this._currentAttribute().nodeValue+=character||\"&\",'\"'===this._additionalAllowedCharacter?tokenizer.setState(attribute_value_double_quoted_state):\"'\"===this._additionalAllowedCharacter?tokenizer.setState(attribute_value_single_quoted_state):\">\"===this._additionalAllowedCharacter&&tokenizer.setState(attribute_value_unquoted_state),!0}function after_attribute_value_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-after-attribute-value\"),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)?tokenizer.setState(before_attribute_name_state):\">\"===data?(tokenizer.setState(data_state),tokenizer._emitCurrentToken()):\"/\"===data?tokenizer.setState(self_closing_tag_state):(tokenizer._parseError(\"unexpected-character-after-attribute-value\"),buffer.unget(data),tokenizer.setState(before_attribute_name_state)),!0}function self_closing_tag_state(buffer){var c=buffer.char();return c===InputStream.EOF?(tokenizer._parseError(\"unexpected-eof-after-solidus-in-tag\"),buffer.unget(c),tokenizer.setState(data_state)):\">\"===c?(tokenizer._currentToken.selfClosing=!0,tokenizer.setState(data_state),tokenizer._emitCurrentToken()):(tokenizer._parseError(\"unexpected-character-after-solidus-in-tag\"),buffer.unget(c),tokenizer.setState(before_attribute_name_state)),!0}function bogus_comment_state(buffer){var data=buffer.matchUntil(\">\");return data=data.replace(/\\u0000/g,\"�\"),buffer.char(),tokenizer._emitToken({type:\"Comment\",data:data}),tokenizer.setState(data_state),!0}function markup_declaration_open_state(buffer){var chars=buffer.shift(2);if(\"--\"===chars)tokenizer._currentToken={type:\"Comment\",data:\"\"},tokenizer.setState(comment_start_state);else{var newchars=buffer.shift(5);if(newchars===InputStream.EOF||chars===InputStream.EOF)return tokenizer._parseError(\"expected-dashes-or-doctype\"),tokenizer.setState(bogus_comment_state),buffer.unget(chars),!0;chars+=newchars,\"DOCTYPE\"===chars.toUpperCase()?(tokenizer._currentToken={type:\"Doctype\",name:\"\",publicId:null,systemId:null,forceQuirks:!1},tokenizer.setState(doctype_state)):tokenizer._tokenHandler.isCdataSectionAllowed()&&\"[CDATA[\"===chars?tokenizer.setState(cdata_section_state):(tokenizer._parseError(\"expected-dashes-or-doctype\"),buffer.unget(chars),tokenizer.setState(bogus_comment_state))}return!0}function cdata_section_state(buffer){var data=buffer.matchUntil(\"]]>\");return buffer.shift(3),data&&tokenizer._emitToken({type:\"Characters\",data:data}),tokenizer.setState(data_state),!0}function comment_start_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-comment\"),tokenizer._emitToken(tokenizer._currentToken),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?tokenizer.setState(comment_start_dash_state):\">\"===data?(tokenizer._parseError(\"incorrect-comment\"),tokenizer._emitToken(tokenizer._currentToken),tokenizer.setState(data_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data+=\"�\"):(tokenizer._currentToken.data+=data,tokenizer.setState(comment_state)),!0}function comment_start_dash_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-comment\"),tokenizer._emitToken(tokenizer._currentToken),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?tokenizer.setState(comment_end_state):\">\"===data?(tokenizer._parseError(\"incorrect-comment\"),tokenizer._emitToken(tokenizer._currentToken),tokenizer.setState(data_state)):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data+=\"�\"):(tokenizer._currentToken.data+=\"-\"+data,tokenizer.setState(comment_state)),!0}function comment_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-comment\"),tokenizer._emitToken(tokenizer._currentToken),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?tokenizer.setState(comment_end_dash_state):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data+=\"�\"):(tokenizer._currentToken.data+=data,buffer.commit()),!0}function comment_end_dash_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-comment-end-dash\"),tokenizer._emitToken(tokenizer._currentToken),buffer.unget(data),tokenizer.setState(data_state)):\"-\"===data?tokenizer.setState(comment_end_state):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data+=\"-�\",tokenizer.setState(comment_state)):(tokenizer._currentToken.data+=\"-\"+data+buffer.matchUntil(\"\\0|-\"),buffer.char()),!0}function comment_end_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-comment-double-dash\"),tokenizer._emitToken(tokenizer._currentToken),buffer.unget(data),tokenizer.setState(data_state)):\">\"===data?(tokenizer._emitToken(tokenizer._currentToken),tokenizer.setState(data_state)):\"!\"===data?(tokenizer._parseError(\"unexpected-bang-after-double-dash-in-comment\"),tokenizer.setState(comment_end_bang_state)):\"-\"===data?(tokenizer._parseError(\"unexpected-dash-after-double-dash-in-comment\"),tokenizer._currentToken.data+=data):\"\\0\"===data?(tokenizer._parseError(\"invalid-codepoint\"),tokenizer._currentToken.data+=\"--�\",tokenizer.setState(comment_state)):(tokenizer._parseError(\"unexpected-char-in-comment\"),tokenizer._currentToken.data+=\"--\"+data,tokenizer.setState(comment_state)),!0}function comment_end_bang_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-comment-end-bang-state\"),tokenizer._emitToken(tokenizer._currentToken),buffer.unget(data),tokenizer.setState(data_state)):\">\"===data?(tokenizer._emitToken(tokenizer._currentToken),tokenizer.setState(data_state)):\"-\"===data?(tokenizer._currentToken.data+=\"--!\",tokenizer.setState(comment_end_dash_state)):(tokenizer._currentToken.data+=\"--!\"+data,tokenizer.setState(comment_state)),!0}function doctype_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"expected-doctype-name-but-got-eof\"),tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):isWhitespace(data)?tokenizer.setState(before_doctype_name_state):(tokenizer._parseError(\"need-space-after-doctype\"),buffer.unget(data),tokenizer.setState(before_doctype_name_state)),!0}function before_doctype_name_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"expected-doctype-name-but-got-eof\"),tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):isWhitespace(data)||(\">\"===data?(tokenizer._parseError(\"expected-doctype-name-but-got-right-bracket\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(data_state),tokenizer._emitCurrentToken()):(isAlpha(data)&&(data=data.toLowerCase()),tokenizer._currentToken.name=data,tokenizer.setState(doctype_name_state))),!0}function doctype_name_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer._parseError(\"eof-in-doctype-name\"),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):isWhitespace(data)?tokenizer.setState(after_doctype_name_state):\">\"===data?(tokenizer.setState(data_state),tokenizer._emitCurrentToken()):(isAlpha(data)&&(data=data.toLowerCase()),tokenizer._currentToken.name+=data,buffer.commit()),!0}function after_doctype_name_state(buffer){var data=buffer.char();if(data===InputStream.EOF)tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer._parseError(\"eof-in-doctype\"),tokenizer.setState(data_state),tokenizer._emitCurrentToken();else if(isWhitespace(data));else if(\">\"===data)tokenizer.setState(data_state),tokenizer._emitCurrentToken();else{if([\"p\",\"P\"].indexOf(data)>-1){var expected=[[\"u\",\"U\"],[\"b\",\"B\"],[\"l\",\"L\"],[\"i\",\"I\"],[\"c\",\"C\"]],matched=expected.every(function(expected){return data=buffer.char(),expected.indexOf(data)>-1});if(matched)return tokenizer.setState(after_doctype_public_keyword_state),!0}else if([\"s\",\"S\"].indexOf(data)>-1){var expected=[[\"y\",\"Y\"],[\"s\",\"S\"],[\"t\",\"T\"],[\"e\",\"E\"],[\"m\",\"M\"]],matched=expected.every(function(expected){return data=buffer.char(),expected.indexOf(data)>-1});if(matched)return tokenizer.setState(after_doctype_system_keyword_state),!0}buffer.unget(data),tokenizer._currentToken.forceQuirks=!0,data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):(tokenizer._parseError(\"expected-space-or-right-bracket-in-doctype\",{data:data}),tokenizer.setState(bogus_doctype_state))}return!0}function after_doctype_public_keyword_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):isWhitespace(data)?tokenizer.setState(before_doctype_public_identifier_state):\"'\"===data||'\"'===data?(tokenizer._parseError(\"unexpected-char-in-doctype\"),buffer.unget(data),tokenizer.setState(before_doctype_public_identifier_state)):(buffer.unget(data),tokenizer.setState(before_doctype_public_identifier_state)),!0}function before_doctype_public_identifier_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):isWhitespace(data)||('\"'===data?(tokenizer._currentToken.publicId=\"\",tokenizer.setState(doctype_public_identifier_double_quoted_state)):\"'\"===data?(tokenizer._currentToken.publicId=\"\",tokenizer.setState(doctype_public_identifier_single_quoted_state)):\">\"===data?(tokenizer._parseError(\"unexpected-end-of-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(data_state),tokenizer._emitCurrentToken()):(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(bogus_doctype_state))),!0}function doctype_public_identifier_double_quoted_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):'\"'===data?tokenizer.setState(after_doctype_public_identifier_state):\">\"===data?(tokenizer._parseError(\"unexpected-end-of-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(data_state),tokenizer._emitCurrentToken()):tokenizer._currentToken.publicId+=data,!0}function doctype_public_identifier_single_quoted_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,buffer.unget(data),tokenizer.setState(data_state),tokenizer._emitCurrentToken()):\"'\"===data?tokenizer.setState(after_doctype_public_identifier_state):\">\"===data?(tokenizer._parseError(\"unexpected-end-of-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(data_state),tokenizer._emitCurrentToken()):tokenizer._currentToken.publicId+=data,!0}function after_doctype_public_identifier_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)?tokenizer.setState(between_doctype_public_and_system_identifiers_state):\">\"===data?(tokenizer.setState(data_state),tokenizer._emitCurrentToken()):'\"'===data?(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer._currentToken.systemId=\"\",tokenizer.setState(doctype_system_identifier_double_quoted_state)):\"'\"===data?(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer._currentToken.systemId=\"\",tokenizer.setState(doctype_system_identifier_single_quoted_state)):(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(bogus_doctype_state)),!0}function between_doctype_public_and_system_identifiers_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)||(\">\"===data?(tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):'\"'===data?(tokenizer._currentToken.systemId=\"\",tokenizer.setState(doctype_system_identifier_double_quoted_state)):\"'\"===data?(tokenizer._currentToken.systemId=\"\",tokenizer.setState(doctype_system_identifier_single_quoted_state)):(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(bogus_doctype_state))),!0}function after_doctype_system_keyword_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)?tokenizer.setState(before_doctype_system_identifier_state):\"'\"===data||'\"'===data?(tokenizer._parseError(\"unexpected-char-in-doctype\"),buffer.unget(data),tokenizer.setState(before_doctype_system_identifier_state)):(buffer.unget(data),tokenizer.setState(before_doctype_system_identifier_state)),!0}function before_doctype_system_identifier_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)||('\"'===data?(tokenizer._currentToken.systemId=\"\",tokenizer.setState(doctype_system_identifier_double_quoted_state)):\"'\"===data?(tokenizer._currentToken.systemId=\"\",tokenizer.setState(doctype_system_identifier_single_quoted_state)):\">\"===data?(tokenizer._parseError(\"unexpected-end-of-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer.setState(bogus_doctype_state))),!0}function doctype_system_identifier_double_quoted_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):'\"'===data?tokenizer.setState(after_doctype_system_identifier_state):\">\"===data?(tokenizer._parseError(\"unexpected-end-of-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):tokenizer._currentToken.systemId+=data,!0}function doctype_system_identifier_single_quoted_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):\"'\"===data?tokenizer.setState(after_doctype_system_identifier_state):\">\"===data?(tokenizer._parseError(\"unexpected-end-of-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):tokenizer._currentToken.systemId+=data,!0}function after_doctype_system_identifier_state(buffer){var data=buffer.char();return data===InputStream.EOF?(tokenizer._parseError(\"eof-in-doctype\"),tokenizer._currentToken.forceQuirks=!0,tokenizer._emitCurrentToken(),buffer.unget(data),tokenizer.setState(data_state)):isWhitespace(data)||(\">\"===data?(tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):(tokenizer._parseError(\"unexpected-char-in-doctype\"),tokenizer.setState(bogus_doctype_state))),!0}function bogus_doctype_state(buffer){var data=buffer.char();return data===InputStream.EOF?(buffer.unget(data),tokenizer._emitCurrentToken(),tokenizer.setState(data_state)):\">\"===data&&(tokenizer._emitCurrentToken(),tokenizer.setState(data_state)),!0}Tokenizer.DATA=data_state,Tokenizer.RCDATA=rcdata_state,Tokenizer.RAWTEXT=rawtext_state,Tokenizer.SCRIPT_DATA=script_data_state,Tokenizer.PLAINTEXT=plaintext_state,this._state=Tokenizer.DATA,this._inputStream.append(source),this._tokenHandler.startTokenization(this),this._inputStream.eof=!0;for(var tokenizer=this;this._state.call(this,this._inputStream););},Object.defineProperty(Tokenizer.prototype,\"lineNumber\",{get:function(){return this._inputStream.location().line}}),Object.defineProperty(Tokenizer.prototype,\"columnNumber\",{get:function(){return this._inputStream.location().column}}),exports.Tokenizer=Tokenizer},{\"./EntityParser\":2,\"./InputStream\":3}],6:[function(_dereq_,module,exports){function isWhitespace(ch){return\" \"===ch||\"\\n\"===ch||\"\t\"===ch||\"\\r\"===ch||\"\\f\"===ch}function isWhitespaceOrReplacementCharacter(ch){return isWhitespace(ch)||\"�\"===ch}function isAllWhitespace(characters){for(var i=0;characters.length>i;i++){var ch=characters[i];if(!isWhitespace(ch))return!1}return!0}function isAllWhitespaceOrReplacementCharacters(characters){for(var i=0;characters.length>i;i++){var ch=characters[i];if(!isWhitespaceOrReplacementCharacter(ch))return!1}return!0}function getAttribute(node,name){for(var i=0;node.attributes.length>i;i++){var attribute=node.attributes[i];if(attribute.nodeName===name)return attribute}return null}function CharacterBuffer(characters){this.characters=characters,this.current=0,this.end=this.characters.length}function TreeBuilder(){this.tokenizer=null,this.errorHandler=null,this.scriptingEnabled=!1,this.document=null,this.head=null,this.form=null,this.openElements=new ElementStack,this.activeFormattingElements=[],this.insertionMode=null,this.insertionModeName=\"\",this.originalInsertionMode=\"\",this.inQuirksMode=!1,this.compatMode=\"no quirks\",this.framesetOk=!0,this.redirectAttachToFosterParent=!1,this.selfClosingFlagAcknowledged=!1,this.context=\"\",this.pendingTableCharacters=[],this.shouldSkipLeadingNewline=!1;var tree=this,modes=this.insertionModes={};modes.base={end_tag_handlers:{\"-default\":\"endTagOther\"},start_tag_handlers:{\"-default\":\"startTagOther\"},processEOF:function(){tree.generateImpliedEndTags(),tree.openElements.length>2?tree.parseError(\"expected-closing-tag-but-got-eof\"):2==tree.openElements.length&&\"body\"!=tree.openElements.item(1).localName?tree.parseError(\"expected-closing-tag-but-got-eof\"):tree.context&&tree.openElements.length>1},processComment:function(data){tree.insertComment(data,tree.currentStackItem().node)},processDoctype:function(){tree.parseError(\"unexpected-doctype\")},processStartTag:function(name,attributes,selfClosing){if(this[this.start_tag_handlers[name]])this[this.start_tag_handlers[name]](name,attributes,selfClosing);else{if(!this[this.start_tag_handlers[\"-default\"]])throw Error(\"No handler found for \"+name);this[this.start_tag_handlers[\"-default\"]](name,attributes,selfClosing)}},processEndTag:function(name){if(this[this.end_tag_handlers[name]])this[this.end_tag_handlers[name]](name);else{if(!this[this.end_tag_handlers[\"-default\"]])throw Error(\"No handler found for \"+name);this[this.end_tag_handlers[\"-default\"]](name)}},startTagHtml:function(name,attributes){modes.inBody.startTagHtml(name,attributes)}},modes.initial=Object.create(modes.base),modes.initial.processEOF=function(){tree.parseError(\"expected-doctype-but-got-eof\"),this.anythingElse(),tree.insertionMode.processEOF()},modes.initial.processComment=function(data){tree.insertComment(data,tree.document)},modes.initial.processDoctype=function(name,publicId,systemId,forceQuirks){function publicIdStartsWith(string){return 0===publicId.toLowerCase().indexOf(string)}tree.insertDoctype(name||\"\",publicId||\"\",systemId||\"\"),forceQuirks||\"html\"!=name||null!=publicId&&([\"+//silmaril//dtd html pro v0r11 19970101//\",\"-//advasoft ltd//dtd html 3.0 aswedit + extensions//\",\"-//as//dtd html 3.0 aswedit + extensions//\",\"-//ietf//dtd html 2.0 level 1//\",\"-//ietf//dtd html 2.0 level 2//\",\"-//ietf//dtd html 2.0 strict level 1//\",\"-//ietf//dtd html 2.0 strict level 2//\",\"-//ietf//dtd html 2.0 strict//\",\"-//ietf//dtd html 2.0//\",\"-//ietf//dtd html 2.1e//\",\"-//ietf//dtd html 3.0//\",\"-//ietf//dtd html 3.0//\",\"-//ietf//dtd html 3.2 final//\",\"-//ietf//dtd html 3.2//\",\"-//ietf//dtd html 3//\",\"-//ietf//dtd html level 0//\",\"-//ietf//dtd html level 0//\",\"-//ietf//dtd html level 1//\",\"-//ietf//dtd html level 1//\",\"-//ietf//dtd html level 2//\",\"-//ietf//dtd html level 2//\",\"-//ietf//dtd html level 3//\",\"-//ietf//dtd html level 3//\",\"-//ietf//dtd html strict level 0//\",\"-//ietf//dtd html strict level 0//\",\"-//ietf//dtd html strict level 1//\",\"-//ietf//dtd html strict level 1//\",\"-//ietf//dtd html strict level 2//\",\"-//ietf//dtd html strict level 2//\",\"-//ietf//dtd html strict level 3//\",\"-//ietf//dtd html strict level 3//\",\"-//ietf//dtd html strict//\",\"-//ietf//dtd html strict//\",\"-//ietf//dtd html strict//\",\"-//ietf//dtd html//\",\"-//ietf//dtd html//\",\"-//ietf//dtd html//\",\"-//metrius//dtd metrius presentational//\",\"-//microsoft//dtd internet explorer 2.0 html strict//\",\"-//microsoft//dtd internet explorer 2.0 html//\",\"-//microsoft//dtd internet explorer 2.0 tables//\",\"-//microsoft//dtd internet explorer 3.0 html strict//\",\"-//microsoft//dtd internet explorer 3.0 html//\",\"-//microsoft//dtd internet explorer 3.0 tables//\",\"-//netscape comm. corp.//dtd html//\",\"-//netscape comm. corp.//dtd strict html//\",\"-//o'reilly and associates//dtd html 2.0//\",\"-//o'reilly and associates//dtd html extended 1.0//\",\"-//spyglass//dtd html 2.0 extended//\",\"-//sq//dtd html 2.0 hotmetal + extensions//\",\"-//sun microsystems corp.//dtd hotjava html//\",\"-//sun microsystems corp.//dtd hotjava strict html//\",\"-//w3c//dtd html 3 1995-03-24//\",\"-//w3c//dtd html 3.2 draft//\",\"-//w3c//dtd html 3.2 final//\",\"-//w3c//dtd html 3.2//\",\"-//w3c//dtd html 3.2s draft//\",\"-//w3c//dtd html 4.0 frameset//\",\"-//w3c//dtd html 4.0 transitional//\",\"-//w3c//dtd html experimental 19960712//\",\"-//w3c//dtd html experimental 970421//\",\"-//w3c//dtd w3 html//\",\"-//w3o//dtd w3 html 3.0//\",\"-//webtechs//dtd mozilla html 2.0//\",\"-//webtechs//dtd mozilla html//\",\"html\"].some(publicIdStartsWith)||[\"-//w3o//dtd w3 html strict 3.0//en//\",\"-/w3c/dtd html 4.0 transitional/en\",\"html\"].indexOf(publicId.toLowerCase())>-1||null==systemId&&[\"-//w3c//dtd html 4.01 transitional//\",\"-//w3c//dtd html 4.01 frameset//\"].some(publicIdStartsWith))||null!=systemId&&\"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd\"==systemId.toLowerCase()?(tree.compatMode=\"quirks\",tree.parseError(\"quirky-doctype\")):null!=publicId&&([\"-//w3c//dtd xhtml 1.0 transitional//\",\"-//w3c//dtd xhtml 1.0 frameset//\"].some(publicIdStartsWith)||null!=systemId&&[\"-//w3c//dtd html 4.01 transitional//\",\"-//w3c//dtd html 4.01 frameset//\"].indexOf(publicId.toLowerCase())>-1)?(tree.compatMode=\"limited quirks\",tree.parseError(\"almost-standards-doctype\")):\"-//W3C//DTD HTML 4.0//EN\"==publicId&&(null==systemId||\"http://www.w3.org/TR/REC-html40/strict.dtd\"==systemId)||\"-//W3C//DTD HTML 4.01//EN\"==publicId&&(null==systemId||\"http://www.w3.org/TR/html4/strict.dtd\"==systemId)||\"-//W3C//DTD XHTML 1.0 Strict//EN\"==publicId&&\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"==systemId||\"-//W3C//DTD XHTML 1.1//EN\"==publicId&&\"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\"==systemId||(null!=systemId&&\"about:legacy-compat\"!=systemId||null!=publicId)&&tree.parseError(\"unknown-doctype\"),tree.setInsertionMode(\"beforeHTML\")},modes.initial.processCharacters=function(buffer){buffer.skipLeadingWhitespace(),buffer.length&&(tree.parseError(\"expected-doctype-but-got-chars\"),this.anythingElse(),tree.insertionMode.processCharacters(buffer))},modes.initial.processStartTag=function(name,attributes,selfClosing){tree.parseError(\"expected-doctype-but-got-start-tag\",{name:name}),this.anythingElse(),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.initial.processEndTag=function(name){tree.parseError(\"expected-doctype-but-got-end-tag\",{name:name}),this.anythingElse(),tree.insertionMode.processEndTag(name)},modes.initial.anythingElse=function(){tree.compatMode=\"quirks\",tree.setInsertionMode(\"beforeHTML\")},modes.beforeHTML=Object.create(modes.base),modes.beforeHTML.start_tag_handlers={html:\"startTagHtml\",\"-default\":\"startTagOther\"},modes.beforeHTML.processEOF=function(){this.anythingElse(),tree.insertionMode.processEOF()},modes.beforeHTML.processComment=function(data){tree.insertComment(data,tree.document)},modes.beforeHTML.processCharacters=function(buffer){buffer.skipLeadingWhitespace(),buffer.length&&(this.anythingElse(),tree.insertionMode.processCharacters(buffer))},modes.beforeHTML.startTagHtml=function(name,attributes){tree.insertHtmlElement(attributes),tree.setInsertionMode(\"beforeHead\")},modes.beforeHTML.startTagOther=function(name,attributes,selfClosing){this.anythingElse(),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.beforeHTML.processEndTag=function(name){this.anythingElse(),tree.insertionMode.processEndTag(name)},modes.beforeHTML.anythingElse=function(){tree.insertHtmlElement(),tree.setInsertionMode(\"beforeHead\")},modes.afterAfterBody=Object.create(modes.base),modes.afterAfterBody.start_tag_handlers={html:\"startTagHtml\",\"-default\":\"startTagOther\"},modes.afterAfterBody.processComment=function(data){tree.insertComment(data,tree.document)},modes.afterAfterBody.processDoctype=function(data){modes.inBody.processDoctype(data)},modes.afterAfterBody.startTagHtml=function(data,attributes){modes.inBody.startTagHtml(data,attributes)},modes.afterAfterBody.startTagOther=function(name,attributes,selfClosing){tree.parseError(\"unexpected-start-tag\",{name:name}),tree.setInsertionMode(\"inBody\"),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.afterAfterBody.endTagOther=function(name){tree.parseError(\"unexpected-end-tag\",{name:name}),tree.setInsertionMode(\"inBody\"),tree.insertionMode.processEndTag(name)},modes.afterAfterBody.processCharacters=function(data){return isAllWhitespace(data.characters)?(modes.inBody.processCharacters(data),void 0):(tree.parseError(\"unexpected-char-after-body\"),tree.setInsertionMode(\"inBody\"),tree.insertionMode.processCharacters(data))},modes.afterBody=Object.create(modes.base),modes.afterBody.end_tag_handlers={html:\"endTagHtml\",\"-default\":\"endTagOther\"},modes.afterBody.processComment=function(data){tree.insertComment(data,tree.openElements.rootNode)},modes.afterBody.processCharacters=function(data){return isAllWhitespace(data.characters)?(modes.inBody.processCharacters(data),void 0):(tree.parseError(\"unexpected-char-after-body\"),tree.setInsertionMode(\"inBody\"),tree.insertionMode.processCharacters(data))},modes.afterBody.processStartTag=function(name,attributes,selfClosing){tree.parseError(\"unexpected-start-tag-after-body\",{name:name}),tree.setInsertionMode(\"inBody\"),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.afterBody.endTagHtml=function(){tree.context?tree.parseError(\"end-html-in-innerhtml\"):tree.setInsertionMode(\"afterAfterBody\")},modes.afterBody.endTagOther=function(name){tree.parseError(\"unexpected-end-tag-after-body\",{name:name}),tree.setInsertionMode(\"inBody\"),tree.insertionMode.processEndTag(name)},modes.afterFrameset=Object.create(modes.base),modes.afterFrameset.start_tag_handlers={html:\"startTagHtml\",noframes:\"startTagNoframes\",\"-default\":\"startTagOther\"},modes.afterFrameset.end_tag_handlers={html:\"endTagHtml\",\"-default\":\"endTagOther\"},modes.afterFrameset.processCharacters=function(buffer){for(var characters=buffer.takeRemaining(),whitespace=\"\",i=0;characters.length>i;i++){var ch=characters[i];isWhitespace(ch)&&(whitespace+=ch)}whitespace&&tree.insertText(whitespace),whitespace.length<characters.length&&tree.parseError(\"expected-eof-but-got-char\")},modes.afterFrameset.startTagNoframes=function(name,attributes){modes.inHead.processStartTag(name,attributes)},modes.afterFrameset.startTagOther=function(name){tree.parseError(\"unexpected-start-tag-after-frameset\",{name:name})},modes.afterFrameset.endTagHtml=function(){tree.setInsertionMode(\"afterAfterFrameset\")},modes.afterFrameset.endTagOther=function(name){tree.parseError(\"unexpected-end-tag-after-frameset\",{name:name})},modes.beforeHead=Object.create(modes.base),modes.beforeHead.start_tag_handlers={html:\"startTagHtml\",head:\"startTagHead\",\"-default\":\"startTagOther\"},modes.beforeHead.end_tag_handlers={html:\"endTagImplyHead\",head:\"endTagImplyHead\",body:\"endTagImplyHead\",br:\"endTagImplyHead\",\"-default\":\"endTagOther\"},modes.beforeHead.processEOF=function(){this.startTagHead(\"head\",[]),tree.insertionMode.processEOF()},modes.beforeHead.processCharacters=function(buffer){buffer.skipLeadingWhitespace(),buffer.length&&(this.startTagHead(\"head\",[]),tree.insertionMode.processCharacters(buffer))},modes.beforeHead.startTagHead=function(name,attributes){tree.insertHeadElement(attributes),tree.setInsertionMode(\"inHead\")},modes.beforeHead.startTagOther=function(name,attributes,selfClosing){this.startTagHead(\"head\",[]),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.beforeHead.endTagImplyHead=function(name){this.startTagHead(\"head\",[]),tree.insertionMode.processEndTag(name)},modes.beforeHead.endTagOther=function(name){tree.parseError(\"end-tag-after-implied-root\",{name:name})},modes.inHead=Object.create(modes.base),modes.inHead.start_tag_handlers={html:\"startTagHtml\",head:\"startTagHead\",title:\"startTagTitle\",script:\"startTagScript\",style:\"startTagNoFramesStyle\",noscript:\"startTagNoScript\",noframes:\"startTagNoFramesStyle\",base:\"startTagBaseBasefontBgsoundLink\",basefont:\"startTagBaseBasefontBgsoundLink\",bgsound:\"startTagBaseBasefontBgsoundLink\",link:\"startTagBaseBasefontBgsoundLink\",meta:\"startTagMeta\",\"-default\":\"startTagOther\"},modes.inHead.end_tag_handlers={head:\"endTagHead\",html:\"endTagHtmlBodyBr\",body:\"endTagHtmlBodyBr\",br:\"endTagHtmlBodyBr\",\"-default\":\"endTagOther\"},modes.inHead.processEOF=function(){var name=tree.currentStackItem().localName;\n-1!=[\"title\",\"style\",\"script\"].indexOf(name)&&(tree.parseError(\"expected-named-closing-tag-but-got-eof\",{name:name}),tree.popElement()),this.anythingElse(),tree.insertionMode.processEOF()},modes.inHead.processCharacters=function(buffer){var leadingWhitespace=buffer.takeLeadingWhitespace();leadingWhitespace&&tree.insertText(leadingWhitespace),buffer.length&&(this.anythingElse(),tree.insertionMode.processCharacters(buffer))},modes.inHead.startTagHtml=function(name,attributes){modes.inBody.processStartTag(name,attributes)},modes.inHead.startTagHead=function(){tree.parseError(\"two-heads-are-not-better-than-one\")},modes.inHead.startTagTitle=function(name,attributes){tree.processGenericRCDATAStartTag(name,attributes)},modes.inHead.startTagNoScript=function(name,attributes){return tree.scriptingEnabled?tree.processGenericRawTextStartTag(name,attributes):(tree.insertElement(name,attributes),tree.setInsertionMode(\"inHeadNoscript\"),void 0)},modes.inHead.startTagNoFramesStyle=function(name,attributes){tree.processGenericRawTextStartTag(name,attributes)},modes.inHead.startTagScript=function(name,attributes){tree.insertElement(name,attributes),tree.tokenizer.setState(Tokenizer.SCRIPT_DATA),tree.originalInsertionMode=tree.insertionModeName,tree.setInsertionMode(\"text\")},modes.inHead.startTagBaseBasefontBgsoundLink=function(name,attributes){tree.insertSelfClosingElement(name,attributes)},modes.inHead.startTagMeta=function(name,attributes){tree.insertSelfClosingElement(name,attributes)},modes.inHead.startTagOther=function(name,attributes,selfClosing){this.anythingElse(),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.inHead.endTagHead=function(){\"head\"==tree.openElements.item(tree.openElements.length-1).localName?tree.openElements.pop():tree.parseError(\"unexpected-end-tag\",{name:\"head\"}),tree.setInsertionMode(\"afterHead\")},modes.inHead.endTagHtmlBodyBr=function(name){this.anythingElse(),tree.insertionMode.processEndTag(name)},modes.inHead.endTagOther=function(name){tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inHead.anythingElse=function(){this.endTagHead(\"head\")},modes.afterHead=Object.create(modes.base),modes.afterHead.start_tag_handlers={html:\"startTagHtml\",head:\"startTagHead\",body:\"startTagBody\",frameset:\"startTagFrameset\",base:\"startTagFromHead\",link:\"startTagFromHead\",meta:\"startTagFromHead\",script:\"startTagFromHead\",style:\"startTagFromHead\",title:\"startTagFromHead\",\"-default\":\"startTagOther\"},modes.afterHead.end_tag_handlers={body:\"endTagBodyHtmlBr\",html:\"endTagBodyHtmlBr\",br:\"endTagBodyHtmlBr\",\"-default\":\"endTagOther\"},modes.afterHead.processEOF=function(){this.anythingElse(),tree.insertionMode.processEOF()},modes.afterHead.processCharacters=function(buffer){var leadingWhitespace=buffer.takeLeadingWhitespace();leadingWhitespace&&tree.insertText(leadingWhitespace),buffer.length&&(this.anythingElse(),tree.insertionMode.processCharacters(buffer))},modes.afterHead.startTagHtml=function(name,attributes){modes.inBody.processStartTag(name,attributes)},modes.afterHead.startTagBody=function(name,attributes){tree.framesetOk=!1,tree.insertBodyElement(attributes),tree.setInsertionMode(\"inBody\")},modes.afterHead.startTagFrameset=function(name,attributes){tree.insertElement(name,attributes),tree.setInsertionMode(\"inFrameset\")},modes.afterHead.startTagFromHead=function(name,attributes,selfClosing){tree.parseError(\"unexpected-start-tag-out-of-my-head\",{name:name}),tree.openElements.push(tree.head),modes.inHead.processStartTag(name,attributes,selfClosing),tree.openElements.remove(tree.head)},modes.afterHead.startTagHead=function(name){tree.parseError(\"unexpected-start-tag\",{name:name})},modes.afterHead.startTagOther=function(name,attributes,selfClosing){this.anythingElse(),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.afterHead.endTagBodyHtmlBr=function(name){this.anythingElse(),tree.insertionMode.processEndTag(name)},modes.afterHead.endTagOther=function(name){tree.parseError(\"unexpected-end-tag\",{name:name})},modes.afterHead.anythingElse=function(){tree.insertBodyElement([]),tree.setInsertionMode(\"inBody\"),tree.framesetOk=!0},modes.inBody=Object.create(modes.base),modes.inBody.start_tag_handlers={html:\"startTagHtml\",head:\"startTagMisplaced\",base:\"startTagProcessInHead\",basefont:\"startTagProcessInHead\",bgsound:\"startTagProcessInHead\",link:\"startTagProcessInHead\",meta:\"startTagProcessInHead\",noframes:\"startTagProcessInHead\",script:\"startTagProcessInHead\",style:\"startTagProcessInHead\",title:\"startTagProcessInHead\",body:\"startTagBody\",form:\"startTagForm\",plaintext:\"startTagPlaintext\",a:\"startTagA\",button:\"startTagButton\",xmp:\"startTagXmp\",table:\"startTagTable\",hr:\"startTagHr\",image:\"startTagImage\",input:\"startTagInput\",textarea:\"startTagTextarea\",select:\"startTagSelect\",isindex:\"startTagIsindex\",applet:\"startTagAppletMarqueeObject\",marquee:\"startTagAppletMarqueeObject\",object:\"startTagAppletMarqueeObject\",li:\"startTagListItem\",dd:\"startTagListItem\",dt:\"startTagListItem\",address:\"startTagCloseP\",article:\"startTagCloseP\",aside:\"startTagCloseP\",blockquote:\"startTagCloseP\",center:\"startTagCloseP\",details:\"startTagCloseP\",dir:\"startTagCloseP\",div:\"startTagCloseP\",dl:\"startTagCloseP\",fieldset:\"startTagCloseP\",figcaption:\"startTagCloseP\",figure:\"startTagCloseP\",footer:\"startTagCloseP\",header:\"startTagCloseP\",hgroup:\"startTagCloseP\",main:\"startTagCloseP\",menu:\"startTagCloseP\",nav:\"startTagCloseP\",ol:\"startTagCloseP\",p:\"startTagCloseP\",section:\"startTagCloseP\",summary:\"startTagCloseP\",ul:\"startTagCloseP\",listing:\"startTagPreListing\",pre:\"startTagPreListing\",b:\"startTagFormatting\",big:\"startTagFormatting\",code:\"startTagFormatting\",em:\"startTagFormatting\",font:\"startTagFormatting\",i:\"startTagFormatting\",s:\"startTagFormatting\",small:\"startTagFormatting\",strike:\"startTagFormatting\",strong:\"startTagFormatting\",tt:\"startTagFormatting\",u:\"startTagFormatting\",nobr:\"startTagNobr\",area:\"startTagVoidFormatting\",br:\"startTagVoidFormatting\",embed:\"startTagVoidFormatting\",img:\"startTagVoidFormatting\",keygen:\"startTagVoidFormatting\",wbr:\"startTagVoidFormatting\",param:\"startTagParamSourceTrack\",source:\"startTagParamSourceTrack\",track:\"startTagParamSourceTrack\",iframe:\"startTagIFrame\",noembed:\"startTagRawText\",noscript:\"startTagRawText\",h1:\"startTagHeading\",h2:\"startTagHeading\",h3:\"startTagHeading\",h4:\"startTagHeading\",h5:\"startTagHeading\",h6:\"startTagHeading\",caption:\"startTagMisplaced\",col:\"startTagMisplaced\",colgroup:\"startTagMisplaced\",frame:\"startTagMisplaced\",frameset:\"startTagFrameset\",tbody:\"startTagMisplaced\",td:\"startTagMisplaced\",tfoot:\"startTagMisplaced\",th:\"startTagMisplaced\",thead:\"startTagMisplaced\",tr:\"startTagMisplaced\",option:\"startTagOptionOptgroup\",optgroup:\"startTagOptionOptgroup\",math:\"startTagMath\",svg:\"startTagSVG\",rt:\"startTagRpRt\",rp:\"startTagRpRt\",\"-default\":\"startTagOther\"},modes.inBody.end_tag_handlers={p:\"endTagP\",body:\"endTagBody\",html:\"endTagHtml\",address:\"endTagBlock\",article:\"endTagBlock\",aside:\"endTagBlock\",blockquote:\"endTagBlock\",button:\"endTagBlock\",center:\"endTagBlock\",details:\"endTagBlock\",dir:\"endTagBlock\",div:\"endTagBlock\",dl:\"endTagBlock\",fieldset:\"endTagBlock\",figcaption:\"endTagBlock\",figure:\"endTagBlock\",footer:\"endTagBlock\",header:\"endTagBlock\",hgroup:\"endTagBlock\",listing:\"endTagBlock\",main:\"endTagBlock\",menu:\"endTagBlock\",nav:\"endTagBlock\",ol:\"endTagBlock\",pre:\"endTagBlock\",section:\"endTagBlock\",summary:\"endTagBlock\",ul:\"endTagBlock\",form:\"endTagForm\",applet:\"endTagAppletMarqueeObject\",marquee:\"endTagAppletMarqueeObject\",object:\"endTagAppletMarqueeObject\",dd:\"endTagListItem\",dt:\"endTagListItem\",li:\"endTagListItem\",h1:\"endTagHeading\",h2:\"endTagHeading\",h3:\"endTagHeading\",h4:\"endTagHeading\",h5:\"endTagHeading\",h6:\"endTagHeading\",a:\"endTagFormatting\",b:\"endTagFormatting\",big:\"endTagFormatting\",code:\"endTagFormatting\",em:\"endTagFormatting\",font:\"endTagFormatting\",i:\"endTagFormatting\",nobr:\"endTagFormatting\",s:\"endTagFormatting\",small:\"endTagFormatting\",strike:\"endTagFormatting\",strong:\"endTagFormatting\",tt:\"endTagFormatting\",u:\"endTagFormatting\",br:\"endTagBr\",\"-default\":\"endTagOther\"},modes.inBody.processCharacters=function(buffer){tree.shouldSkipLeadingNewline&&(tree.shouldSkipLeadingNewline=!1,buffer.skipAtMostOneLeadingNewline()),tree.reconstructActiveFormattingElements();var characters=buffer.takeRemaining();characters=characters.replace(/\\u0000/g,function(){return tree.parseError(\"invalid-codepoint\"),\"\"}),characters&&(tree.insertText(characters),tree.framesetOk&&!isAllWhitespaceOrReplacementCharacters(characters)&&(tree.framesetOk=!1))},modes.inBody.startTagHtml=function(name,attributes){tree.parseError(\"non-html-root\"),tree.addAttributesToElement(tree.openElements.rootNode,attributes)},modes.inBody.startTagProcessInHead=function(name,attributes){modes.inHead.processStartTag(name,attributes)},modes.inBody.startTagBody=function(name,attributes){tree.parseError(\"unexpected-start-tag\",{name:\"body\"}),1==tree.openElements.length||\"body\"!=tree.openElements.item(1).localName?assert.ok(tree.context):(tree.framesetOk=!1,tree.addAttributesToElement(tree.openElements.bodyElement,attributes))},modes.inBody.startTagFrameset=function(name,attributes){if(tree.parseError(\"unexpected-start-tag\",{name:\"frameset\"}),1==tree.openElements.length||\"body\"!=tree.openElements.item(1).localName)assert.ok(tree.context);else if(tree.framesetOk){for(tree.detachFromParent(tree.openElements.bodyElement);tree.openElements.length>1;)tree.openElements.pop();tree.insertElement(name,attributes),tree.setInsertionMode(\"inFrameset\")}},modes.inBody.startTagCloseP=function(name,attributes){tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.insertElement(name,attributes)},modes.inBody.startTagPreListing=function(name,attributes){tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.insertElement(name,attributes),tree.framesetOk=!1,tree.shouldSkipLeadingNewline=!0},modes.inBody.startTagForm=function(name,attributes){tree.form?tree.parseError(\"unexpected-start-tag\",{name:name}):(tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.insertElement(name,attributes),tree.form=tree.currentStackItem())},modes.inBody.startTagRpRt=function(name,attributes){tree.openElements.inScope(\"ruby\")&&(tree.generateImpliedEndTags(),\"ruby\"!=tree.currentStackItem().localName&&tree.parseError(\"unexpected-start-tag\",{name:name})),tree.insertElement(name,attributes)},modes.inBody.startTagListItem=function(name,attributes){for(var stopNames={li:[\"li\"],dd:[\"dd\",\"dt\"],dt:[\"dd\",\"dt\"]},stopName=stopNames[name],els=tree.openElements,i=els.length-1;i>=0;i--){var node=els.item(i);if(-1!=stopName.indexOf(node.localName)){tree.insertionMode.processEndTag(node.localName);break}if(node.isSpecial()&&\"p\"!==node.localName&&\"address\"!==node.localName&&\"div\"!==node.localName)break}tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.insertElement(name,attributes),tree.framesetOk=!1},modes.inBody.startTagPlaintext=function(name,attributes){tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.insertElement(name,attributes),tree.tokenizer.setState(Tokenizer.PLAINTEXT)},modes.inBody.startTagHeading=function(name,attributes){tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.currentStackItem().isNumberedHeader()&&(tree.parseError(\"unexpected-start-tag\",{name:name}),tree.popElement()),tree.insertElement(name,attributes)},modes.inBody.startTagA=function(name,attributes){var activeA=tree.elementInActiveFormattingElements(\"a\");activeA&&(tree.parseError(\"unexpected-start-tag-implies-end-tag\",{startName:\"a\",endName:\"a\"}),tree.adoptionAgencyEndTag(\"a\"),tree.openElements.contains(activeA)&&tree.openElements.remove(activeA),tree.removeElementFromActiveFormattingElements(activeA)),tree.reconstructActiveFormattingElements(),tree.insertFormattingElement(name,attributes)},modes.inBody.startTagFormatting=function(name,attributes){tree.reconstructActiveFormattingElements(),tree.insertFormattingElement(name,attributes)},modes.inBody.startTagNobr=function(name,attributes){tree.reconstructActiveFormattingElements(),tree.openElements.inScope(\"nobr\")&&(tree.parseError(\"unexpected-start-tag-implies-end-tag\",{startName:\"nobr\",endName:\"nobr\"}),this.processEndTag(\"nobr\"),tree.reconstructActiveFormattingElements()),tree.insertFormattingElement(name,attributes)},modes.inBody.startTagButton=function(name,attributes){tree.openElements.inScope(\"button\")?(tree.parseError(\"unexpected-start-tag-implies-end-tag\",{startName:\"button\",endName:\"button\"}),this.processEndTag(\"button\"),tree.insertionMode.processStartTag(name,attributes)):(tree.framesetOk=!1,tree.reconstructActiveFormattingElements(),tree.insertElement(name,attributes))},modes.inBody.startTagAppletMarqueeObject=function(name,attributes){tree.reconstructActiveFormattingElements(),tree.insertElement(name,attributes),tree.activeFormattingElements.push(Marker),tree.framesetOk=!1},modes.inBody.endTagAppletMarqueeObject=function(name){tree.openElements.inScope(name)?(tree.generateImpliedEndTags(),tree.currentStackItem().localName!=name&&tree.parseError(\"end-tag-too-early\",{name:name}),tree.openElements.popUntilPopped(name),tree.clearActiveFormattingElements()):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inBody.startTagXmp=function(name,attributes){tree.openElements.inButtonScope(\"p\")&&this.processEndTag(\"p\"),tree.reconstructActiveFormattingElements(),tree.processGenericRawTextStartTag(name,attributes),tree.framesetOk=!1},modes.inBody.startTagTable=function(name,attributes){\"quirks\"!==tree.compatMode&&tree.openElements.inButtonScope(\"p\")&&this.processEndTag(\"p\"),tree.insertElement(name,attributes),tree.setInsertionMode(\"inTable\"),tree.framesetOk=!1},modes.inBody.startTagVoidFormatting=function(name,attributes){tree.reconstructActiveFormattingElements(),tree.insertSelfClosingElement(name,attributes),tree.framesetOk=!1},modes.inBody.startTagParamSourceTrack=function(name,attributes){tree.insertSelfClosingElement(name,attributes)},modes.inBody.startTagHr=function(name,attributes){tree.openElements.inButtonScope(\"p\")&&this.endTagP(\"p\"),tree.insertSelfClosingElement(name,attributes),tree.framesetOk=!1},modes.inBody.startTagImage=function(name,attributes){tree.parseError(\"unexpected-start-tag-treated-as\",{originalName:\"image\",newName:\"img\"}),this.processStartTag(\"img\",attributes)},modes.inBody.startTagInput=function(name,attributes){var currentFramesetOk=tree.framesetOk;this.startTagVoidFormatting(name,attributes);for(var key in attributes)if(\"type\"==attributes[key].nodeName){\"hidden\"==attributes[key].nodeValue.toLowerCase()&&(tree.framesetOk=currentFramesetOk);break}},modes.inBody.startTagIsindex=function(name,attributes){if(tree.parseError(\"deprecated-tag\",{name:\"isindex\"}),tree.selfClosingFlagAcknowledged=!0,!tree.form){var formAttributes=[],inputAttributes=[],prompt=\"This is a searchable index. Enter search keywords: \";for(var key in attributes)switch(attributes[key].nodeName){case\"action\":formAttributes.push({nodeName:\"action\",nodeValue:attributes[key].nodeValue});break;case\"prompt\":prompt=attributes[key].nodeValue;break;case\"name\":break;default:inputAttributes.push({nodeName:attributes[key].nodeName,nodeValue:attributes[key].nodeValue})}inputAttributes.push({nodeName:\"name\",nodeValue:\"isindex\"}),this.processStartTag(\"form\",formAttributes),this.processStartTag(\"hr\"),this.processStartTag(\"label\"),this.processCharacters(new CharacterBuffer(prompt)),this.processStartTag(\"input\",inputAttributes),this.processEndTag(\"label\"),this.processStartTag(\"hr\"),this.processEndTag(\"form\")}},modes.inBody.startTagTextarea=function(name,attributes){tree.insertElement(name,attributes),tree.tokenizer.setState(Tokenizer.RCDATA),tree.originalInsertionMode=tree.insertionModeName,tree.shouldSkipLeadingNewline=!0,tree.framesetOk=!1,tree.setInsertionMode(\"text\")},modes.inBody.startTagIFrame=function(name,attributes){tree.framesetOk=!1,this.startTagRawText(name,attributes)},modes.inBody.startTagRawText=function(name,attributes){tree.processGenericRawTextStartTag(name,attributes)},modes.inBody.startTagSelect=function(name,attributes){tree.reconstructActiveFormattingElements(),tree.insertElement(name,attributes),tree.framesetOk=!1;var insertionModeName=tree.insertionModeName;\"inTable\"==insertionModeName||\"inCaption\"==insertionModeName||\"inColumnGroup\"==insertionModeName||\"inTableBody\"==insertionModeName||\"inRow\"==insertionModeName||\"inCell\"==insertionModeName?tree.setInsertionMode(\"inSelectInTable\"):tree.setInsertionMode(\"inSelect\")},modes.inBody.startTagMisplaced=function(name){tree.parseError(\"unexpected-start-tag-ignored\",{name:name})},modes.inBody.endTagMisplaced=function(name){tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inBody.endTagBr=function(name){tree.parseError(\"unexpected-end-tag-treated-as\",{originalName:\"br\",newName:\"br element\"}),tree.reconstructActiveFormattingElements(),tree.insertElement(name,[]),tree.popElement()},modes.inBody.startTagOptionOptgroup=function(name,attributes){\"option\"==tree.currentStackItem().localName&&tree.popElement(),tree.reconstructActiveFormattingElements(),tree.insertElement(name,attributes)},modes.inBody.startTagOther=function(name,attributes){tree.reconstructActiveFormattingElements(),tree.insertElement(name,attributes)},modes.inBody.endTagOther=function(name){for(var node,i=tree.openElements.length-1;i>0;i--){if(node=tree.openElements.item(i),node.localName==name){tree.generateImpliedEndTags(name),tree.currentStackItem().localName!=name&&tree.parseError(\"unexpected-end-tag\",{name:name}),tree.openElements.remove_openElements_until(function(x){return x===node});break}if(node.isSpecial()){tree.parseError(\"unexpected-end-tag\",{name:name});break}}},modes.inBody.startTagMath=function(name,attributes,selfClosing){tree.reconstructActiveFormattingElements(),attributes=tree.adjustMathMLAttributes(attributes),attributes=tree.adjustForeignAttributes(attributes),tree.insertForeignElement(name,attributes,\"http://www.w3.org/1998/Math/MathML\",selfClosing)},modes.inBody.startTagSVG=function(name,attributes,selfClosing){tree.reconstructActiveFormattingElements(),attributes=tree.adjustSVGAttributes(attributes),attributes=tree.adjustForeignAttributes(attributes),tree.insertForeignElement(name,attributes,\"http://www.w3.org/2000/svg\",selfClosing)},modes.inBody.endTagP=function(name){tree.openElements.inButtonScope(\"p\")?(tree.generateImpliedEndTags(\"p\"),\"p\"!=tree.currentStackItem().localName&&tree.parseError(\"unexpected-implied-end-tag\",{name:\"p\"}),tree.openElements.popUntilPopped(name)):(tree.parseError(\"unexpected-end-tag\",{name:\"p\"}),this.startTagCloseP(\"p\",[]),this.endTagP(\"p\"))},modes.inBody.endTagBody=function(name){return tree.openElements.inScope(\"body\")?(\"body\"!=tree.currentStackItem().localName&&tree.parseError(\"expected-one-end-tag-but-got-another\",{expectedName:tree.currentStackItem().localName,gotName:name}),tree.setInsertionMode(\"afterBody\"),void 0):(tree.parseError(\"unexpected-end-tag\",{name:name}),void 0)},modes.inBody.endTagHtml=function(name){return tree.openElements.inScope(\"body\")?(\"body\"!=tree.currentStackItem().localName&&tree.parseError(\"expected-one-end-tag-but-got-another\",{expectedName:tree.currentStackItem().localName,gotName:name}),tree.setInsertionMode(\"afterBody\"),tree.insertionMode.processEndTag(name),void 0):(tree.parseError(\"unexpected-end-tag\",{name:name}),void 0)},modes.inBody.endTagBlock=function(name){tree.openElements.inScope(name)?(tree.generateImpliedEndTags(),tree.currentStackItem().localName!=name&&tree.parseError(\"end-tag-too-early\",{name:name}),tree.openElements.popUntilPopped(name)):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inBody.endTagForm=function(name){var node=tree.form;tree.form=null,node&&tree.openElements.inScope(name)?(tree.generateImpliedEndTags(),tree.currentStackItem()!=node&&tree.parseError(\"end-tag-too-early-ignored\",{name:\"form\"}),tree.openElements.remove(node)):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inBody.endTagListItem=function(name){tree.openElements.inListItemScope(name)?(tree.generateImpliedEndTags(name),tree.currentStackItem().localName!=name&&tree.parseError(\"end-tag-too-early\",{name:name}),tree.openElements.popUntilPopped(name)):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inBody.endTagHeading=function(name){return tree.openElements.hasNumberedHeaderElementInScope()?(tree.generateImpliedEndTags(),tree.currentStackItem().localName!=name&&tree.parseError(\"end-tag-too-early\",{name:name}),tree.openElements.remove_openElements_until(function(e){return e.isNumberedHeader()}),void 0):(tree.parseError(\"unexpected-end-tag\",{name:name}),void 0)},modes.inBody.endTagFormatting=function(name,attributes){tree.adoptionAgencyEndTag(name)||this.endTagOther(name,attributes)},modes.inCaption=Object.create(modes.base),modes.inCaption.start_tag_handlers={html:\"startTagHtml\",caption:\"startTagTableElement\",col:\"startTagTableElement\",colgroup:\"startTagTableElement\",tbody:\"startTagTableElement\",td:\"startTagTableElement\",tfoot:\"startTagTableElement\",thead:\"startTagTableElement\",tr:\"startTagTableElement\",\"-default\":\"startTagOther\"},modes.inCaption.end_tag_handlers={caption:\"endTagCaption\",table:\"endTagTable\",body:\"endTagIgnore\",col:\"endTagIgnore\",colgroup:\"endTagIgnore\",html:\"endTagIgnore\",tbody:\"endTagIgnore\",td:\"endTagIgnore\",tfood:\"endTagIgnore\",thead:\"endTagIgnore\",tr:\"endTagIgnore\",\"-default\":\"endTagOther\"},modes.inCaption.processCharacters=function(data){modes.inBody.processCharacters(data)},modes.inCaption.startTagTableElement=function(name,attributes){tree.parseError(\"unexpected-end-tag\",{name:name});var ignoreEndTag=!tree.openElements.inTableScope(\"caption\");tree.insertionMode.processEndTag(\"caption\"),ignoreEndTag||tree.insertionMode.processStartTag(name,attributes)},modes.inCaption.startTagOther=function(name,attributes,selfClosing){modes.inBody.processStartTag(name,attributes,selfClosing)},modes.inCaption.endTagCaption=function(name){tree.openElements.inTableScope(\"caption\")?(tree.generateImpliedEndTags(),\"caption\"!=tree.currentStackItem().localName&&tree.parseError(\"expected-one-end-tag-but-got-another\",{gotName:\"caption\",expectedName:tree.currentStackItem().localName}),tree.openElements.popUntilPopped(\"caption\"),tree.clearActiveFormattingElements(),tree.setInsertionMode(\"inTable\")):(assert.ok(tree.context),tree.parseError(\"unexpected-end-tag\",{name:name}))},modes.inCaption.endTagTable=function(name){tree.parseError(\"unexpected-end-table-in-caption\");var ignoreEndTag=!tree.openElements.inTableScope(\"caption\");tree.insertionMode.processEndTag(\"caption\"),ignoreEndTag||tree.insertionMode.processEndTag(name)},modes.inCaption.endTagIgnore=function(name){tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inCaption.endTagOther=function(name){modes.inBody.processEndTag(name)},modes.inCell=Object.create(modes.base),modes.inCell.start_tag_handlers={html:\"startTagHtml\",caption:\"startTagTableOther\",col:\"startTagTableOther\",colgroup:\"startTagTableOther\",tbody:\"startTagTableOther\",td:\"startTagTableOther\",tfoot:\"startTagTableOther\",th:\"startTagTableOther\",thead:\"startTagTableOther\",tr:\"startTagTableOther\",\"-default\":\"startTagOther\"},modes.inCell.end_tag_handlers={td:\"endTagTableCell\",th:\"endTagTableCell\",body:\"endTagIgnore\",caption:\"endTagIgnore\",col:\"endTagIgnore\",colgroup:\"endTagIgnore\",html:\"endTagIgnore\",table:\"endTagImply\",tbody:\"endTagImply\",tfoot:\"endTagImply\",thead:\"endTagImply\",tr:\"endTagImply\",\"-default\":\"endTagOther\"},modes.inCell.processCharacters=function(data){modes.inBody.processCharacters(data)},modes.inCell.startTagTableOther=function(name,attributes,selfClosing){tree.openElements.inTableScope(\"td\")||tree.openElements.inTableScope(\"th\")?(this.closeCell(),tree.insertionMode.processStartTag(name,attributes,selfClosing)):tree.parseError(\"unexpected-start-tag\",{name:name})},modes.inCell.startTagOther=function(name,attributes,selfClosing){modes.inBody.processStartTag(name,attributes,selfClosing)},modes.inCell.endTagTableCell=function(name){tree.openElements.inTableScope(name)?(tree.generateImpliedEndTags(name),tree.currentStackItem().localName!=name.toLowerCase()?(tree.parseError(\"unexpected-cell-end-tag\",{name:name}),tree.openElements.popUntilPopped(name)):tree.popElement(),tree.clearActiveFormattingElements(),tree.setInsertionMode(\"inRow\")):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inCell.endTagIgnore=function(name){tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inCell.endTagImply=function(name){tree.openElements.inTableScope(name)?(this.closeCell(),tree.insertionMode.processEndTag(name)):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inCell.endTagOther=function(name){modes.inBody.processEndTag(name)},modes.inCell.closeCell=function(){tree.openElements.inTableScope(\"td\")?this.endTagTableCell(\"td\"):tree.openElements.inTableScope(\"th\")&&this.endTagTableCell(\"th\")},modes.inColumnGroup=Object.create(modes.base),modes.inColumnGroup.start_tag_handlers={html:\"startTagHtml\",col:\"startTagCol\",\"-default\":\"startTagOther\"},modes.inColumnGroup.end_tag_handlers={colgroup:\"endTagColgroup\",col:\"endTagCol\",\"-default\":\"endTagOther\"},modes.inColumnGroup.ignoreEndTagColgroup=function(){return\"html\"==tree.currentStackItem().localName},modes.inColumnGroup.processCharacters=function(buffer){var leadingWhitespace=buffer.takeLeadingWhitespace();if(leadingWhitespace&&tree.insertText(leadingWhitespace),buffer.length){var ignoreEndTag=this.ignoreEndTagColgroup();this.endTagColgroup(\"colgroup\"),ignoreEndTag||tree.insertionMode.processCharacters(buffer)}},modes.inColumnGroup.startTagCol=function(name,attributes){tree.insertSelfClosingElement(name,attributes)},modes.inColumnGroup.startTagOther=function(name,attributes,selfClosing){var ignoreEndTag=this.ignoreEndTagColgroup();this.endTagColgroup(\"colgroup\"),ignoreEndTag||tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.inColumnGroup.endTagColgroup=function(name){this.ignoreEndTagColgroup()?(assert.ok(tree.context),tree.parseError(\"unexpected-end-tag\",{name:name})):(tree.popElement(),tree.setInsertionMode(\"inTable\"))},modes.inColumnGroup.endTagCol=function(){tree.parseError(\"no-end-tag\",{name:\"col\"})},modes.inColumnGroup.endTagOther=function(name){var ignoreEndTag=this.ignoreEndTagColgroup();this.endTagColgroup(\"colgroup\"),ignoreEndTag||tree.insertionMode.processEndTag(name)},modes.inForeignContent=Object.create(modes.base),modes.inForeignContent.processStartTag=function(name,attributes,selfClosing){if(-1!=[\"b\",\"big\",\"blockquote\",\"body\",\"br\",\"center\",\"code\",\"dd\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"hr\",\"i\",\"img\",\"li\",\"listing\",\"menu\",\"meta\",\"nobr\",\"ol\",\"p\",\"pre\",\"ruby\",\"s\",\"small\",\"span\",\"strong\",\"strike\",\"sub\",\"sup\",\"table\",\"tt\",\"u\",\"ul\",\"var\"].indexOf(name)||\"font\"==name&&attributes.some(function(attr){return[\"color\",\"face\",\"size\"].indexOf(attr.nodeName)>=0})){for(tree.parseError(\"unexpected-html-element-in-foreign-content\",{name:name});tree.currentStackItem().isForeign()&&!tree.currentStackItem().isHtmlIntegrationPoint()&&!tree.currentStackItem().isMathMLTextIntegrationPoint();)tree.openElements.pop();return tree.insertionMode.processStartTag(name,attributes,selfClosing),void 0}\"http://www.w3.org/1998/Math/MathML\"==tree.currentStackItem().namespaceURI&&(attributes=tree.adjustMathMLAttributes(attributes)),\"http://www.w3.org/2000/svg\"==tree.currentStackItem().namespaceURI&&(name=tree.adjustSVGTagNameCase(name),attributes=tree.adjustSVGAttributes(attributes)),attributes=tree.adjustForeignAttributes(attributes),tree.insertForeignElement(name,attributes,tree.currentStackItem().namespaceURI,selfClosing)},modes.inForeignContent.processEndTag=function(name){var node=tree.currentStackItem(),index=tree.openElements.length-1;for(node.localName.toLowerCase()!=name&&tree.parseError(\"unexpected-end-tag\",{name:name});;){if(0===index)break;if(node.localName.toLowerCase()==name){for(;tree.openElements.pop()!=node;);break}if(index-=1,node=tree.openElements.item(index),!node.isForeign()){tree.insertionMode.processEndTag(name);break}}},modes.inForeignContent.processCharacters=function(buffer){var characters=buffer.takeRemaining();characters=characters.replace(/\\u0000/g,function(){return tree.parseError(\"invalid-codepoint\"),\"�\"}),tree.framesetOk&&!isAllWhitespaceOrReplacementCharacters(characters)&&(tree.framesetOk=!1),tree.insertText(characters)},modes.inHeadNoscript=Object.create(modes.base),modes.inHeadNoscript.start_tag_handlers={html:\"startTagHtml\",basefont:\"startTagBasefontBgsoundLinkMetaNoframesStyle\",bgsound:\"startTagBasefontBgsoundLinkMetaNoframesStyle\",link:\"startTagBasefontBgsoundLinkMetaNoframesStyle\",meta:\"startTagBasefontBgsoundLinkMetaNoframesStyle\",noframes:\"startTagBasefontBgsoundLinkMetaNoframesStyle\",style:\"startTagBasefontBgsoundLinkMetaNoframesStyle\",head:\"startTagHeadNoscript\",noscript:\"startTagHeadNoscript\",\"-default\":\"startTagOther\"},modes.inHeadNoscript.end_tag_handlers={noscript:\"endTagNoscript\",br:\"endTagBr\",\"-default\":\"endTagOther\"},modes.inHeadNoscript.processCharacters=function(buffer){var leadingWhitespace=buffer.takeLeadingWhitespace();leadingWhitespace&&tree.insertText(leadingWhitespace),buffer.length&&(tree.parseError(\"unexpected-char-in-frameset\"),this.anythingElse(),tree.insertionMode.processCharacters(buffer))},modes.inHeadNoscript.processComment=function(data){modes.inHead.processComment(data)},modes.inHeadNoscript.startTagBasefontBgsoundLinkMetaNoframesStyle=function(name,attributes){modes.inHead.processStartTag(name,attributes)},modes.inHeadNoscript.startTagHeadNoscript=function(name){tree.parseError(\"unexpected-start-tag-in-frameset\",{name:name})},modes.inHeadNoscript.startTagOther=function(name,attributes){tree.parseError(\"unexpected-start-tag-in-frameset\",{name:name}),this.anythingElse(),tree.insertionMode.processStartTag(name,attributes)},modes.inHeadNoscript.endTagBr=function(name,attributes){tree.parseError(\"unexpected-end-tag-in-frameset\",{name:name}),this.anythingElse(),tree.insertionMode.processEndTag(name,attributes)},modes.inHeadNoscript.endTagNoscript=function(){tree.popElement(),tree.setInsertionMode(\"inHead\")},modes.inHeadNoscript.endTagOther=function(name){tree.parseError(\"unexpected-end-tag-in-frameset\",{name:name})},modes.inHeadNoscript.anythingElse=function(){tree.popElement(),tree.setInsertionMode(\"inHead\")},modes.inFrameset=Object.create(modes.base),modes.inFrameset.start_tag_handlers={html:\"startTagHtml\",frameset:\"startTagFrameset\",frame:\"startTagFrame\",noframes:\"startTagNoframes\",\"-default\":\"startTagOther\"},modes.inFrameset.end_tag_handlers={frameset:\"endTagFrameset\",noframes:\"endTagNoframes\",\"-default\":\"endTagOther\"},modes.inFrameset.processCharacters=function(){tree.parseError(\"unexpected-char-in-frameset\")},modes.inFrameset.startTagFrameset=function(name,attributes){tree.insertElement(name,attributes)},modes.inFrameset.startTagFrame=function(name,attributes){tree.insertSelfClosingElement(name,attributes)},modes.inFrameset.startTagNoframes=function(name,attributes){modes.inBody.processStartTag(name,attributes)},modes.inFrameset.startTagOther=function(name){tree.parseError(\"unexpected-start-tag-in-frameset\",{name:name})},modes.inFrameset.endTagFrameset=function(){\"html\"==tree.currentStackItem().localName?tree.parseError(\"unexpected-frameset-in-frameset-innerhtml\"):tree.popElement(),tree.context||\"frameset\"==tree.currentStackItem().localName||tree.setInsertionMode(\"afterFrameset\")},modes.inFrameset.endTagNoframes=function(name){modes.inBody.processEndTag(name)},modes.inFrameset.endTagOther=function(name){tree.parseError(\"unexpected-end-tag-in-frameset\",{name:name})},modes.inTable=Object.create(modes.base),modes.inTable.start_tag_handlers={html:\"startTagHtml\",caption:\"startTagCaption\",colgroup:\"startTagColgroup\",col:\"startTagCol\",table:\"startTagTable\",tbody:\"startTagRowGroup\",tfoot:\"startTagRowGroup\",thead:\"startTagRowGroup\",td:\"startTagImplyTbody\",th:\"startTagImplyTbody\",tr:\"startTagImplyTbody\",style:\"startTagStyleScript\",script:\"startTagStyleScript\",input:\"startTagInput\",form:\"startTagForm\",\"-default\":\"startTagOther\"},modes.inTable.end_tag_handlers={table:\"endTagTable\",body:\"endTagIgnore\",caption:\"endTagIgnore\",col:\"endTagIgnore\",colgroup:\"endTagIgnore\",html:\"endTagIgnore\",tbody:\"endTagIgnore\",td:\"endTagIgnore\",tfoot:\"endTagIgnore\",th:\"endTagIgnore\",thead:\"endTagIgnore\",tr:\"endTagIgnore\",\"-default\":\"endTagOther\"},modes.inTable.processCharacters=function(data){if(tree.currentStackItem().isFosterParenting()){var originalInsertionMode=tree.insertionModeName;\ntree.setInsertionMode(\"inTableText\"),tree.originalInsertionMode=originalInsertionMode,tree.insertionMode.processCharacters(data)}else tree.redirectAttachToFosterParent=!0,modes.inBody.processCharacters(data),tree.redirectAttachToFosterParent=!1},modes.inTable.startTagCaption=function(name,attributes){tree.openElements.popUntilTableScopeMarker(),tree.activeFormattingElements.push(Marker),tree.insertElement(name,attributes),tree.setInsertionMode(\"inCaption\")},modes.inTable.startTagColgroup=function(name,attributes){tree.openElements.popUntilTableScopeMarker(),tree.insertElement(name,attributes),tree.setInsertionMode(\"inColumnGroup\")},modes.inTable.startTagCol=function(name,attributes){this.startTagColgroup(\"colgroup\",[]),tree.insertionMode.processStartTag(name,attributes)},modes.inTable.startTagRowGroup=function(name,attributes){tree.openElements.popUntilTableScopeMarker(),tree.insertElement(name,attributes),tree.setInsertionMode(\"inTableBody\")},modes.inTable.startTagImplyTbody=function(name,attributes){this.startTagRowGroup(\"tbody\",[]),tree.insertionMode.processStartTag(name,attributes)},modes.inTable.startTagTable=function(name,attributes){tree.parseError(\"unexpected-start-tag-implies-end-tag\",{startName:\"table\",endName:\"table\"}),tree.insertionMode.processEndTag(\"table\"),tree.context||tree.insertionMode.processStartTag(name,attributes)},modes.inTable.startTagStyleScript=function(name,attributes){modes.inHead.processStartTag(name,attributes)},modes.inTable.startTagInput=function(name,attributes){for(var key in attributes)if(\"type\"==attributes[key].nodeName.toLowerCase()){if(\"hidden\"==attributes[key].nodeValue.toLowerCase())return tree.parseError(\"unexpected-hidden-input-in-table\"),tree.insertElement(name,attributes),tree.openElements.pop(),void 0;break}this.startTagOther(name,attributes)},modes.inTable.startTagForm=function(name,attributes){tree.parseError(\"unexpected-form-in-table\"),tree.form||(tree.insertElement(name,attributes),tree.form=tree.currentStackItem(),tree.openElements.pop())},modes.inTable.startTagOther=function(name,attributes,selfClosing){tree.parseError(\"unexpected-start-tag-implies-table-voodoo\",{name:name}),tree.redirectAttachToFosterParent=!0,modes.inBody.processStartTag(name,attributes,selfClosing),tree.redirectAttachToFosterParent=!1},modes.inTable.endTagTable=function(name){tree.openElements.inTableScope(name)?(tree.generateImpliedEndTags(),tree.currentStackItem().localName!=name&&tree.parseError(\"end-tag-too-early-named\",{gotName:\"table\",expectedName:tree.currentStackItem().localName}),tree.openElements.popUntilPopped(\"table\"),tree.resetInsertionMode()):(assert.ok(tree.context),tree.parseError(\"unexpected-end-tag\",{name:name}))},modes.inTable.endTagIgnore=function(name){tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inTable.endTagOther=function(name){tree.parseError(\"unexpected-end-tag-implies-table-voodoo\",{name:name}),tree.redirectAttachToFosterParent=!0,modes.inBody.processEndTag(name),tree.redirectAttachToFosterParent=!1},modes.inTableText=Object.create(modes.base),modes.inTableText.flushCharacters=function(){var characters=tree.pendingTableCharacters.join(\"\");isAllWhitespace(characters)?tree.insertText(characters):(tree.redirectAttachToFosterParent=!0,tree.reconstructActiveFormattingElements(),tree.insertText(characters),tree.framesetOk=!1,tree.redirectAttachToFosterParent=!1),tree.pendingTableCharacters=[]},modes.inTableText.processComment=function(data){this.flushCharacters(),tree.setInsertionMode(tree.originalInsertionMode),tree.insertionMode.processComment(data)},modes.inTableText.processEOF=function(){this.flushCharacters(),tree.setInsertionMode(tree.originalInsertionMode),tree.insertionMode.processEOF()},modes.inTableText.processCharacters=function(buffer){var characters=buffer.takeRemaining();characters=characters.replace(/\\u0000/g,function(){return tree.parseError(\"invalid-codepoint\"),\"\"}),characters&&tree.pendingTableCharacters.push(characters)},modes.inTableText.processStartTag=function(name,attributes,selfClosing){this.flushCharacters(),tree.setInsertionMode(tree.originalInsertionMode),tree.insertionMode.processStartTag(name,attributes,selfClosing)},modes.inTableText.processEndTag=function(name,attributes){this.flushCharacters(),tree.setInsertionMode(tree.originalInsertionMode),tree.insertionMode.processEndTag(name,attributes)},modes.inTableBody=Object.create(modes.base),modes.inTableBody.start_tag_handlers={html:\"startTagHtml\",tr:\"startTagTr\",td:\"startTagTableCell\",th:\"startTagTableCell\",caption:\"startTagTableOther\",col:\"startTagTableOther\",colgroup:\"startTagTableOther\",tbody:\"startTagTableOther\",tfoot:\"startTagTableOther\",thead:\"startTagTableOther\",\"-default\":\"startTagOther\"},modes.inTableBody.end_tag_handlers={table:\"endTagTable\",tbody:\"endTagTableRowGroup\",tfoot:\"endTagTableRowGroup\",thead:\"endTagTableRowGroup\",body:\"endTagIgnore\",caption:\"endTagIgnore\",col:\"endTagIgnore\",colgroup:\"endTagIgnore\",html:\"endTagIgnore\",td:\"endTagIgnore\",th:\"endTagIgnore\",tr:\"endTagIgnore\",\"-default\":\"endTagOther\"},modes.inTableBody.processCharacters=function(data){modes.inTable.processCharacters(data)},modes.inTableBody.startTagTr=function(name,attributes){tree.openElements.popUntilTableBodyScopeMarker(),tree.insertElement(name,attributes),tree.setInsertionMode(\"inRow\")},modes.inTableBody.startTagTableCell=function(name,attributes){tree.parseError(\"unexpected-cell-in-table-body\",{name:name}),this.startTagTr(\"tr\",[]),tree.insertionMode.processStartTag(name,attributes)},modes.inTableBody.startTagTableOther=function(name,attributes){tree.openElements.inTableScope(\"tbody\")||tree.openElements.inTableScope(\"thead\")||tree.openElements.inTableScope(\"tfoot\")?(tree.openElements.popUntilTableBodyScopeMarker(),this.endTagTableRowGroup(tree.currentStackItem().localName),tree.insertionMode.processStartTag(name,attributes)):tree.parseError(\"unexpected-start-tag\",{name:name})},modes.inTableBody.startTagOther=function(name,attributes){modes.inTable.processStartTag(name,attributes)},modes.inTableBody.endTagTableRowGroup=function(name){tree.openElements.inTableScope(name)?(tree.openElements.popUntilTableBodyScopeMarker(),tree.popElement(),tree.setInsertionMode(\"inTable\")):tree.parseError(\"unexpected-end-tag-in-table-body\",{name:name})},modes.inTableBody.endTagTable=function(name){tree.openElements.inTableScope(\"tbody\")||tree.openElements.inTableScope(\"thead\")||tree.openElements.inTableScope(\"tfoot\")?(tree.openElements.popUntilTableBodyScopeMarker(),this.endTagTableRowGroup(tree.currentStackItem().localName),tree.insertionMode.processEndTag(name)):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inTableBody.endTagIgnore=function(name){tree.parseError(\"unexpected-end-tag-in-table-body\",{name:name})},modes.inTableBody.endTagOther=function(name){modes.inTable.processEndTag(name)},modes.inSelect=Object.create(modes.base),modes.inSelect.start_tag_handlers={html:\"startTagHtml\",option:\"startTagOption\",optgroup:\"startTagOptgroup\",select:\"startTagSelect\",input:\"startTagInput\",keygen:\"startTagInput\",textarea:\"startTagInput\",script:\"startTagScript\",\"-default\":\"startTagOther\"},modes.inSelect.end_tag_handlers={option:\"endTagOption\",optgroup:\"endTagOptgroup\",select:\"endTagSelect\",caption:\"endTagTableElements\",table:\"endTagTableElements\",tbody:\"endTagTableElements\",tfoot:\"endTagTableElements\",thead:\"endTagTableElements\",tr:\"endTagTableElements\",td:\"endTagTableElements\",th:\"endTagTableElements\",\"-default\":\"endTagOther\"},modes.inSelect.processCharacters=function(buffer){var data=buffer.takeRemaining();data=data.replace(/\\u0000/g,function(){return tree.parseError(\"invalid-codepoint\"),\"\"}),data&&tree.insertText(data)},modes.inSelect.startTagOption=function(name,attributes){\"option\"==tree.currentStackItem().localName&&tree.popElement(),tree.insertElement(name,attributes)},modes.inSelect.startTagOptgroup=function(name,attributes){\"option\"==tree.currentStackItem().localName&&tree.popElement(),\"optgroup\"==tree.currentStackItem().localName&&tree.popElement(),tree.insertElement(name,attributes)},modes.inSelect.endTagOption=function(name){return\"option\"!==tree.currentStackItem().localName?(tree.parseError(\"unexpected-end-tag-in-select\",{name:name}),void 0):(tree.popElement(),void 0)},modes.inSelect.endTagOptgroup=function(){\"option\"==tree.currentStackItem().localName&&\"optgroup\"==tree.openElements.item(tree.openElements.length-2).localName&&tree.popElement(),\"optgroup\"==tree.currentStackItem().localName?tree.popElement():tree.parseError(\"unexpected-end-tag-in-select\",{name:\"optgroup\"})},modes.inSelect.startTagSelect=function(){tree.parseError(\"unexpected-select-in-select\"),this.endTagSelect(\"select\")},modes.inSelect.endTagSelect=function(name){tree.openElements.inTableScope(\"select\")?(tree.openElements.popUntilPopped(\"select\"),tree.resetInsertionMode()):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inSelect.startTagInput=function(name,attributes){tree.parseError(\"unexpected-input-in-select\"),tree.openElements.inSelectScope(\"select\")&&(this.endTagSelect(\"select\"),tree.insertionMode.processStartTag(name,attributes))},modes.inSelect.startTagScript=function(name,attributes){modes.inHead.processStartTag(name,attributes)},modes.inSelect.endTagTableElements=function(name){tree.parseError(\"unexpected-end-tag-in-select\",{name:name}),tree.openElements.inTableScope(name)&&(this.endTagSelect(\"select\"),tree.insertionMode.processEndTag(name))},modes.inSelect.startTagOther=function(name){tree.parseError(\"unexpected-start-tag-in-select\",{name:name})},modes.inSelect.endTagOther=function(name){tree.parseError(\"unexpected-end-tag-in-select\",{name:name})},modes.inSelectInTable=Object.create(modes.base),modes.inSelectInTable.start_tag_handlers={caption:\"startTagTable\",table:\"startTagTable\",tbody:\"startTagTable\",tfoot:\"startTagTable\",thead:\"startTagTable\",tr:\"startTagTable\",td:\"startTagTable\",th:\"startTagTable\",\"-default\":\"startTagOther\"},modes.inSelectInTable.end_tag_handlers={caption:\"endTagTable\",table:\"endTagTable\",tbody:\"endTagTable\",tfoot:\"endTagTable\",thead:\"endTagTable\",tr:\"endTagTable\",td:\"endTagTable\",th:\"endTagTable\",\"-default\":\"endTagOther\"},modes.inSelectInTable.processCharacters=function(data){modes.inSelect.processCharacters(data)},modes.inSelectInTable.startTagTable=function(name,attributes){tree.parseError(\"unexpected-table-element-start-tag-in-select-in-table\",{name:name}),this.endTagOther(\"select\"),tree.insertionMode.processStartTag(name,attributes)},modes.inSelectInTable.startTagOther=function(name,attributes,selfClosing){modes.inSelect.processStartTag(name,attributes,selfClosing)},modes.inSelectInTable.endTagTable=function(name){tree.parseError(\"unexpected-table-element-end-tag-in-select-in-table\",{name:name}),tree.openElements.inTableScope(name)&&(this.endTagOther(\"select\"),tree.insertionMode.processEndTag(name))},modes.inSelectInTable.endTagOther=function(name){modes.inSelect.processEndTag(name)},modes.inRow=Object.create(modes.base),modes.inRow.start_tag_handlers={html:\"startTagHtml\",td:\"startTagTableCell\",th:\"startTagTableCell\",caption:\"startTagTableOther\",col:\"startTagTableOther\",colgroup:\"startTagTableOther\",tbody:\"startTagTableOther\",tfoot:\"startTagTableOther\",thead:\"startTagTableOther\",tr:\"startTagTableOther\",\"-default\":\"startTagOther\"},modes.inRow.end_tag_handlers={tr:\"endTagTr\",table:\"endTagTable\",tbody:\"endTagTableRowGroup\",tfoot:\"endTagTableRowGroup\",thead:\"endTagTableRowGroup\",body:\"endTagIgnore\",caption:\"endTagIgnore\",col:\"endTagIgnore\",colgroup:\"endTagIgnore\",html:\"endTagIgnore\",td:\"endTagIgnore\",th:\"endTagIgnore\",\"-default\":\"endTagOther\"},modes.inRow.processCharacters=function(data){modes.inTable.processCharacters(data)},modes.inRow.startTagTableCell=function(name,attributes){tree.openElements.popUntilTableRowScopeMarker(),tree.insertElement(name,attributes),tree.setInsertionMode(\"inCell\"),tree.activeFormattingElements.push(Marker)},modes.inRow.startTagTableOther=function(name,attributes){var ignoreEndTag=this.ignoreEndTagTr();this.endTagTr(\"tr\"),ignoreEndTag||tree.insertionMode.processStartTag(name,attributes)},modes.inRow.startTagOther=function(name,attributes,selfClosing){modes.inTable.processStartTag(name,attributes,selfClosing)},modes.inRow.endTagTr=function(name){this.ignoreEndTagTr()?(assert.ok(tree.context),tree.parseError(\"unexpected-end-tag\",{name:name})):(tree.openElements.popUntilTableRowScopeMarker(),tree.popElement(),tree.setInsertionMode(\"inTableBody\"))},modes.inRow.endTagTable=function(name){var ignoreEndTag=this.ignoreEndTagTr();this.endTagTr(\"tr\"),ignoreEndTag||tree.insertionMode.processEndTag(name)},modes.inRow.endTagTableRowGroup=function(name){tree.openElements.inTableScope(name)?(this.endTagTr(\"tr\"),tree.insertionMode.processEndTag(name)):tree.parseError(\"unexpected-end-tag\",{name:name})},modes.inRow.endTagIgnore=function(name){tree.parseError(\"unexpected-end-tag-in-table-row\",{name:name})},modes.inRow.endTagOther=function(name){modes.inTable.processEndTag(name)},modes.inRow.ignoreEndTagTr=function(){return!tree.openElements.inTableScope(\"tr\")},modes.afterAfterFrameset=Object.create(modes.base),modes.afterAfterFrameset.start_tag_handlers={html:\"startTagHtml\",noframes:\"startTagNoFrames\",\"-default\":\"startTagOther\"},modes.afterAfterFrameset.processEOF=function(){},modes.afterAfterFrameset.processComment=function(data){tree.insertComment(data,tree.document)},modes.afterAfterFrameset.processCharacters=function(buffer){for(var characters=buffer.takeRemaining(),whitespace=\"\",i=0;characters.length>i;i++){var ch=characters[i];isWhitespace(ch)&&(whitespace+=ch)}whitespace&&(tree.reconstructActiveFormattingElements(),tree.insertText(whitespace)),whitespace.length<characters.length&&tree.parseError(\"expected-eof-but-got-char\")},modes.afterAfterFrameset.startTagNoFrames=function(name,attributes){modes.inHead.processStartTag(name,attributes)},modes.afterAfterFrameset.startTagOther=function(name){tree.parseError(\"expected-eof-but-got-start-tag\",{name:name})},modes.afterAfterFrameset.processEndTag=function(name){tree.parseError(\"expected-eof-but-got-end-tag\",{name:name})},modes.text=Object.create(modes.base),modes.text.start_tag_handlers={\"-default\":\"startTagOther\"},modes.text.end_tag_handlers={script:\"endTagScript\",\"-default\":\"endTagOther\"},modes.text.processCharacters=function(buffer){tree.shouldSkipLeadingNewline&&(tree.shouldSkipLeadingNewline=!1,buffer.skipAtMostOneLeadingNewline());var data=buffer.takeRemaining();data&&tree.insertText(data)},modes.text.processEOF=function(){tree.parseError(\"expected-named-closing-tag-but-got-eof\",{name:tree.currentStackItem().localName}),tree.openElements.pop(),tree.setInsertionMode(tree.originalInsertionMode),tree.insertionMode.processEOF()},modes.text.startTagOther=function(name){throw\"Tried to process start tag \"+name+\" in RCDATA/RAWTEXT mode\"},modes.text.endTagScript=function(){var node=tree.openElements.pop();assert.ok(\"script\"==node.localName),tree.setInsertionMode(tree.originalInsertionMode)},modes.text.endTagOther=function(){tree.openElements.pop(),tree.setInsertionMode(tree.originalInsertionMode)}}function formatMessage(format,args){return format.replace(RegExp(\"{[0-9a-z-]+}\",\"gi\"),function(match){return args[match.slice(1,-1)]||match})}var assert=_dereq_(\"assert\"),messages=_dereq_(\"./messages.json\"),constants=_dereq_(\"./constants\");_dereq_(\"events\").EventEmitter;var Tokenizer=_dereq_(\"./Tokenizer\").Tokenizer,ElementStack=_dereq_(\"./ElementStack\").ElementStack,StackItem=_dereq_(\"./StackItem\").StackItem,Marker={};CharacterBuffer.prototype.skipAtMostOneLeadingNewline=function(){\"\\n\"===this.characters[this.current]&&this.current++},CharacterBuffer.prototype.skipLeadingWhitespace=function(){for(;isWhitespace(this.characters[this.current]);)if(++this.current==this.end)return},CharacterBuffer.prototype.skipLeadingNonWhitespace=function(){for(;!isWhitespace(this.characters[this.current]);)if(++this.current==this.end)return},CharacterBuffer.prototype.takeRemaining=function(){return this.characters.substring(this.current)},CharacterBuffer.prototype.takeLeadingWhitespace=function(){var start=this.current;return this.skipLeadingWhitespace(),start===this.current?\"\":this.characters.substring(start,this.current-start)},Object.defineProperty(CharacterBuffer.prototype,\"length\",{get:function(){return this.end-this.current}}),TreeBuilder.prototype.setInsertionMode=function(name){this.insertionMode=this.insertionModes[name],this.insertionModeName=name},TreeBuilder.prototype.adoptionAgencyEndTag=function(name){function isActiveFormattingElement(el){return el===formattingElement}for(var formattingElement,outerIterationLimit=8,innerIterationLimit=3,outerLoopCounter=0;outerIterationLimit>outerLoopCounter++;){if(formattingElement=this.elementInActiveFormattingElements(name),!formattingElement||this.openElements.contains(formattingElement)&&!this.openElements.inScope(formattingElement.localName))return this.parseError(\"adoption-agency-1.1\",{name:name}),!1;if(!this.openElements.contains(formattingElement))return this.parseError(\"adoption-agency-1.2\",{name:name}),this.removeElementFromActiveFormattingElements(formattingElement),!0;this.openElements.inScope(formattingElement.localName)||this.parseError(\"adoption-agency-4.4\",{name:name}),formattingElement!=this.currentStackItem()&&this.parseError(\"adoption-agency-1.3\",{name:name});var furthestBlock=this.openElements.furthestBlockForFormattingElement(formattingElement.node);if(!furthestBlock)return this.openElements.remove_openElements_until(isActiveFormattingElement),this.removeElementFromActiveFormattingElements(formattingElement),!0;for(var afeIndex=this.openElements.elements.indexOf(formattingElement),commonAncestor=this.openElements.item(afeIndex-1),bookmark=this.activeFormattingElements.indexOf(formattingElement),node=furthestBlock,lastNode=furthestBlock,index=this.openElements.elements.indexOf(node),innerLoopCounter=0;innerIterationLimit>innerLoopCounter++;)if(index-=1,node=this.openElements.item(index),0>this.activeFormattingElements.indexOf(node))this.openElements.elements.splice(index,1);else{if(node==formattingElement)break;lastNode==furthestBlock&&(bookmark=this.activeFormattingElements.indexOf(node)+1);var clone=this.createElement(node.namespaceURI,node.localName,node.attributes),newNode=new StackItem(node.namespaceURI,node.localName,node.attributes,clone);this.activeFormattingElements[this.activeFormattingElements.indexOf(node)]=newNode,this.openElements.elements[this.openElements.elements.indexOf(node)]=newNode,node=newNode,this.detachFromParent(lastNode.node),this.attachNode(lastNode.node,node.node),lastNode=node}this.detachFromParent(lastNode.node),commonAncestor.isFosterParenting()?this.insertIntoFosterParent(lastNode.node):this.attachNode(lastNode.node,commonAncestor.node);var clone=this.createElement(\"http://www.w3.org/1999/xhtml\",formattingElement.localName,formattingElement.attributes),formattingClone=new StackItem(formattingElement.namespaceURI,formattingElement.localName,formattingElement.attributes,clone);this.reparentChildren(furthestBlock.node,clone),this.attachNode(clone,furthestBlock.node),this.removeElementFromActiveFormattingElements(formattingElement),this.activeFormattingElements.splice(Math.min(bookmark,this.activeFormattingElements.length),0,formattingClone),this.openElements.remove(formattingElement),this.openElements.elements.splice(this.openElements.elements.indexOf(furthestBlock)+1,0,formattingClone)}return!0},TreeBuilder.prototype.start=function(){throw\"Not mplemented\"},TreeBuilder.prototype.startTokenization=function(tokenizer){if(this.tokenizer=tokenizer,this.compatMode=\"no quirks\",this.originalInsertionMode=\"initial\",this.framesetOk=!0,this.openElements=new ElementStack,this.activeFormattingElements=[],this.start(),this.context){switch(this.context){case\"title\":case\"textarea\":this.tokenizer.setState(Tokenizer.RCDATA);break;case\"style\":case\"xmp\":case\"iframe\":case\"noembed\":case\"noframes\":this.tokenizer.setState(Tokenizer.RAWTEXT);break;case\"script\":this.tokenizer.setState(Tokenizer.SCRIPT_DATA);break;case\"noscript\":this.scriptingEnabled&&this.tokenizer.setState(Tokenizer.RAWTEXT);break;case\"plaintext\":this.tokenizer.setState(Tokenizer.PLAINTEXT)}this.insertHtmlElement(),this.resetInsertionMode()}else this.setInsertionMode(\"initial\")},TreeBuilder.prototype.processToken=function(token){this.selfClosingFlagAcknowledged=!1;var insertionMode,currentNode=this.openElements.top||null;switch(insertionMode=!currentNode||!currentNode.isForeign()||currentNode.isMathMLTextIntegrationPoint()&&(\"StartTag\"==token.type&&!(token.name in{mglyph:0,malignmark:0})||\"Characters\"===token.type)||\"http://www.w3.org/1998/Math/MathML\"==currentNode.namespaceURI&&\"annotation-xml\"==currentNode.localName&&\"StartTag\"==token.type&&\"svg\"==token.name||currentNode.isHtmlIntegrationPoint()&&token.type in{StartTag:0,Characters:0}||\"EOF\"==token.type?this.insertionMode:this.insertionModes.inForeignContent,token.type){case\"Characters\":var buffer=new CharacterBuffer(token.data);insertionMode.processCharacters(buffer);break;case\"Comment\":insertionMode.processComment(token.data);break;case\"StartTag\":insertionMode.processStartTag(token.name,token.data,token.selfClosing);break;case\"EndTag\":insertionMode.processEndTag(token.name);break;case\"Doctype\":insertionMode.processDoctype(token.name,token.publicId,token.systemId,token.forceQuirks);break;case\"EOF\":insertionMode.processEOF()}},TreeBuilder.prototype.isCdataSectionAllowed=function(){return this.openElements.length>0&&this.currentStackItem().isForeign()},TreeBuilder.prototype.isSelfClosingFlagAcknowledged=function(){return this.selfClosingFlagAcknowledged},TreeBuilder.prototype.createElement=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.attachNode=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.attachNodeToFosterParent=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.detachFromParent=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.addAttributesToElement=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.insertHtmlElement=function(attributes){var root=this.createElement(\"http://www.w3.org/1999/xhtml\",\"html\",attributes);return this.attachNode(root,this.document),this.openElements.pushHtmlElement(new StackItem(\"http://www.w3.org/1999/xhtml\",\"html\",attributes,root)),root},TreeBuilder.prototype.insertHeadElement=function(attributes){var element=this.createElement(\"http://www.w3.org/1999/xhtml\",\"head\",attributes);return this.head=new StackItem(\"http://www.w3.org/1999/xhtml\",\"head\",attributes,element),this.attachNode(element,this.openElements.top.node),this.openElements.pushHeadElement(this.head),element},TreeBuilder.prototype.insertBodyElement=function(attributes){var element=this.createElement(\"http://www.w3.org/1999/xhtml\",\"body\",attributes);return this.attachNode(element,this.openElements.top.node),this.openElements.pushBodyElement(new StackItem(\"http://www.w3.org/1999/xhtml\",\"body\",attributes,element)),element},TreeBuilder.prototype.insertIntoFosterParent=function(node){var tableIndex=this.openElements.findIndex(\"table\"),tableElement=this.openElements.item(tableIndex).node;return 0===tableIndex?this.attachNode(node,tableElement):(this.attachNodeToFosterParent(node,tableElement,this.openElements.item(tableIndex-1).node),void 0)},TreeBuilder.prototype.insertElement=function(name,attributes,namespaceURI,selfClosing){namespaceURI||(namespaceURI=\"http://www.w3.org/1999/xhtml\");var element=this.createElement(namespaceURI,name,attributes);this.shouldFosterParent()?this.insertIntoFosterParent(element):this.attachNode(element,this.openElements.top.node),selfClosing||this.openElements.push(new StackItem(namespaceURI,name,attributes,element))},TreeBuilder.prototype.insertFormattingElement=function(name,attributes){this.insertElement(name,attributes,\"http://www.w3.org/1999/xhtml\"),this.appendElementToActiveFormattingElements(this.currentStackItem())},TreeBuilder.prototype.insertSelfClosingElement=function(name,attributes){this.selfClosingFlagAcknowledged=!0,this.insertElement(name,attributes,\"http://www.w3.org/1999/xhtml\",!0)},TreeBuilder.prototype.insertForeignElement=function(name,attributes,namespaceURI,selfClosing){selfClosing&&(this.selfClosingFlagAcknowledged=!0),this.insertElement(name,attributes,namespaceURI,selfClosing)},TreeBuilder.prototype.insertComment=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.insertDoctype=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.insertText=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.currentStackItem=function(){return this.openElements.top},TreeBuilder.prototype.popElement=function(){return this.openElements.pop()},TreeBuilder.prototype.shouldFosterParent=function(){return this.redirectAttachToFosterParent&&this.currentStackItem().isFosterParenting()},TreeBuilder.prototype.generateImpliedEndTags=function(exclude){var name=this.openElements.top.localName;-1!=[\"dd\",\"dt\",\"li\",\"option\",\"optgroup\",\"p\",\"rp\",\"rt\"].indexOf(name)&&name!=exclude&&(this.popElement(),this.generateImpliedEndTags(exclude))},TreeBuilder.prototype.reconstructActiveFormattingElements=function(){if(0!==this.activeFormattingElements.length){var i=this.activeFormattingElements.length-1,entry=this.activeFormattingElements[i];if(entry!=Marker&&!this.openElements.contains(entry)){for(;entry!=Marker&&!this.openElements.contains(entry)&&(i-=1,entry=this.activeFormattingElements[i]););for(;;){i+=1,entry=this.activeFormattingElements[i],this.insertElement(entry.localName,entry.attributes);var element=this.currentStackItem();if(this.activeFormattingElements[i]=element,element==this.activeFormattingElements[this.activeFormattingElements.length-1])break}}}},TreeBuilder.prototype.ensureNoahsArkCondition=function(item){var kNoahsArkCapacity=3;if(!(kNoahsArkCapacity>this.activeFormattingElements.length)){for(var candidates=[],newItemAttributeCount=item.attributes.length,i=this.activeFormattingElements.length-1;i>=0;i--){var candidate=this.activeFormattingElements[i];if(candidate===Marker)break;item.localName===candidate.localName&&item.namespaceURI===candidate.namespaceURI&&candidate.attributes.length==newItemAttributeCount&&candidates.push(candidate)}if(!(kNoahsArkCapacity>candidates.length)){for(var remainingCandidates=[],attributes=item.attributes,i=0;attributes.length>i;i++){for(var attribute=attributes[i],j=0;candidates.length>j;j++){var candidate=candidates[j],candidateAttribute=getAttribute(candidate,attribute.nodeName);candidateAttribute&&candidateAttribute.nodeValue===attribute.nodeValue&&remainingCandidates.push(candidate)}if(kNoahsArkCapacity>remainingCandidates.length)return;candidates=remainingCandidates,remainingCandidates=[]}for(var i=kNoahsArkCapacity-1;candidates.length>i;i++)this.removeElementFromActiveFormattingElements(candidates[i])}}},TreeBuilder.prototype.appendElementToActiveFormattingElements=function(item){this.ensureNoahsArkCondition(item),this.activeFormattingElements.push(item)},TreeBuilder.prototype.removeElementFromActiveFormattingElements=function(item){var index=this.activeFormattingElements.indexOf(item);index>=0&&this.activeFormattingElements.splice(index,1)},TreeBuilder.prototype.elementInActiveFormattingElements=function(name){for(var els=this.activeFormattingElements,i=els.length-1;i>=0&&els[i]!=Marker;i--)if(els[i].localName==name)return els[i];return!1},TreeBuilder.prototype.clearActiveFormattingElements=function(){for(;0!==this.activeFormattingElements.length&&this.activeFormattingElements.pop()!=Marker;);},TreeBuilder.prototype.reparentChildren=function(){throw Error(\"Not implemented\")},TreeBuilder.prototype.setFragmentContext=function(context){this.context=context},TreeBuilder.prototype.parseError=function(code,args){if(this.errorHandler){var message=formatMessage(messages[code],args);this.errorHandler.error(message,this.tokenizer._inputStream.location(),code)}},TreeBuilder.prototype.resetInsertionMode=function(){for(var last=!1,node=null,i=this.openElements.length-1;i>=0;i--){if(node=this.openElements.item(i),0===i&&(assert.ok(this.context),last=!0,node=new StackItem(\"http://www.w3.org/1999/xhtml\",this.context,[],null)),\"http://www.w3.org/1999/xhtml\"===node.namespaceURI){if(\"select\"===node.localName)return this.setInsertionMode(\"inSelect\");if(\"td\"===node.localName||\"th\"===node.localName)return this.setInsertionMode(\"inCell\");if(\"tr\"===node.localName)return this.setInsertionMode(\"inRow\");if(\"tbody\"===node.localName||\"thead\"===node.localName||\"tfoot\"===node.localName)return this.setInsertionMode(\"inTableBody\");if(\"caption\"===node.localName)return this.setInsertionMode(\"inCaption\");if(\"colgroup\"===node.localName)return this.setInsertionMode(\"inColumnGroup\");if(\"table\"===node.localName)return this.setInsertionMode(\"inTable\");if(\"head\"===node.localName&&!last)return this.setInsertionMode(\"inHead\");if(\"body\"===node.localName)return this.setInsertionMode(\"inBody\");if(\"frameset\"===node.localName)return this.setInsertionMode(\"inFrameset\");if(\"html\"===node.localName)return this.openElements.headElement?this.setInsertionMode(\"afterHead\"):this.setInsertionMode(\"beforeHead\")}if(last)return this.setInsertionMode(\"inBody\")}},TreeBuilder.prototype.processGenericRCDATAStartTag=function(name,attributes){this.insertElement(name,attributes),this.tokenizer.setState(Tokenizer.RCDATA),this.originalInsertionMode=this.insertionModeName,this.setInsertionMode(\"text\")},TreeBuilder.prototype.processGenericRawTextStartTag=function(name,attributes){this.insertElement(name,attributes),this.tokenizer.setState(Tokenizer.RAWTEXT),this.originalInsertionMode=this.insertionModeName,this.setInsertionMode(\"text\")},TreeBuilder.prototype.adjustMathMLAttributes=function(attributes){return attributes.forEach(function(a){a.namespaceURI=\"http://www.w3.org/1998/Math/MathML\",constants.MATHMLAttributeMap[a.nodeName]&&(a.nodeName=constants.MATHMLAttributeMap[a.nodeName])}),attributes},TreeBuilder.prototype.adjustSVGTagNameCase=function(name){return constants.SVGTagMap[name]||name},TreeBuilder.prototype.adjustSVGAttributes=function(attributes){return attributes.forEach(function(a){a.namespaceURI=\"http://www.w3.org/2000/svg\",constants.SVGAttributeMap[a.nodeName]&&(a.nodeName=constants.SVGAttributeMap[a.nodeName])}),attributes},TreeBuilder.prototype.adjustForeignAttributes=function(attributes){for(var i=0;attributes.length>i;i++){var attribute=attributes[i],adjusted=constants.ForeignAttributeMap[attribute.nodeName];adjusted&&(attribute.nodeName=adjusted.localName,attribute.prefix=adjusted.prefix,attribute.namespaceURI=adjusted.namespaceURI)}return attributes},exports.TreeBuilder=TreeBuilder},{\"./ElementStack\":1,\"./StackItem\":4,\"./Tokenizer\":5,\"./constants\":7,\"./messages.json\":8,assert:13,events:16}],7:[function(_dereq_,module,exports){exports.SVGTagMap={altglyph:\"altGlyph\",altglyphdef:\"altGlyphDef\",altglyphitem:\"altGlyphItem\",animatecolor:\"animateColor\",animatemotion:\"animateMotion\",animatetransform:\"animateTransform\",clippath:\"clipPath\",feblend:\"feBlend\",fecolormatrix:\"feColorMatrix\",fecomponenttransfer:\"feComponentTransfer\",fecomposite:\"feComposite\",feconvolvematrix:\"feConvolveMatrix\",fediffuselighting:\"feDiffuseLighting\",fedisplacementmap:\"feDisplacementMap\",fedistantlight:\"feDistantLight\",feflood:\"feFlood\",fefunca:\"feFuncA\",fefuncb:\"feFuncB\",fefuncg:\"feFuncG\",fefuncr:\"feFuncR\",fegaussianblur:\"feGaussianBlur\",feimage:\"feImage\",femerge:\"feMerge\",femergenode:\"feMergeNode\",femorphology:\"feMorphology\",feoffset:\"feOffset\",fepointlight:\"fePointLight\",fespecularlighting:\"feSpecularLighting\",fespotlight:\"feSpotLight\",fetile:\"feTile\",feturbulence:\"feTurbulence\",foreignobject:\"foreignObject\",glyphref:\"glyphRef\",lineargradient:\"linearGradient\",radialgradient:\"radialGradient\",textpath:\"textPath\"},exports.MATHMLAttributeMap={definitionurl:\"definitionURL\"},exports.SVGAttributeMap={attributename:\"attributeName\",attributetype:\"attributeType\",basefrequency:\"baseFrequency\",baseprofile:\"baseProfile\",calcmode:\"calcMode\",clippathunits:\"clipPathUnits\",contentscripttype:\"contentScriptType\",contentstyletype:\"contentStyleType\",diffuseconstant:\"diffuseConstant\",edgemode:\"edgeMode\",externalresourcesacequired:\"externalResourcesRequired\",filterres:\"filterRes\",filterunits:\"filterUnits\",glyphref:\"glyphRef\",gradienttransform:\"gradientTransform\",gradientunits:\"gradientUnits\",kernelmatrix:\"kernelMatrix\",kernelunitlength:\"kernelUnitLength\",keypoints:\"keyPoints\",keysplines:\"keySplines\",keytimes:\"keyTimes\",lengthadjust:\"lengthAdjust\",limitingconeangle:\"limitingConeAngle\",markerheight:\"markerHeight\",markerunits:\"markerUnits\",markerwidth:\"markerWidth\",maskcontentunits:\"maskContentUnits\",maskunits:\"maskUnits\",numoctaves:\"numOctaves\",pathlength:\"pathLength\",patterncontentunits:\"patternContentUnits\",patterntransform:\"patternTransform\",patternunits:\"patternUnits\",pointsatx:\"pointsAtX\",pointsaty:\"pointsAtY\",pointsatz:\"pointsAtZ\",preservealpha:\"preserveAlpha\",preserveaspectratio:\"preserveAspectRatio\",primitiveunits:\"primitiveUnits\",refx:\"refX\",refy:\"refY\",repeatcount:\"repeatCount\",repeatdur:\"repeatDur\",acequiredextensions:\"acequiredExtensions\",acequiredfeatures:\"acequiredFeatures\",specularconstant:\"specularConstant\",specularexponent:\"specularExponent\",spreadmethod:\"spreadMethod\",startoffset:\"startOffset\",stddeviation:\"stdDeviation\",stitchtiles:\"stitchTiles\",surfacescale:\"surfaceScale\",systemlanguage:\"systemLanguage\",tablevalues:\"tableValues\",targetx:\"targetX\",targety:\"targetY\",textlength:\"textLength\",viewbox:\"viewBox\",viewtarget:\"viewTarget\",xchannelselector:\"xChannelSelector\",ychannelselector:\"yChannelSelector\",zoomandpan:\"zoomAndPan\"},exports.ForeignAttributeMap={\"xlink:actuate\":{prefix:\"xlink\",localName:\"actuate\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xlink:arcrole\":{prefix:\"xlink\",localName:\"arcrole\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xlink:href\":{prefix:\"xlink\",localName:\"href\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xlink:role\":{prefix:\"xlink\",localName:\"role\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xlink:show\":{prefix:\"xlink\",localName:\"show\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xlink:title\":{prefix:\"xlink\",localName:\"title\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xlink:type\":{prefix:\"xlink\",localName:\"title\",namespaceURI:\"http://www.w3.org/1999/xlink\"},\"xml:base\":{prefix:\"xml\",localName:\"base\",namespaceURI:\"http://www.w3.org/XML/1998/namespace\"},\"xml:lang\":{prefix:\"xml\",localName:\"lang\",namespaceURI:\"http://www.w3.org/XML/1998/namespace\"},\"xml:space\":{prefix:\"xml\",localName:\"space\",namespaceURI:\"http://www.w3.org/XML/1998/namespace\"},xmlns:{prefix:null,localName:\"xmlns\",namespaceURI:\"http://www.w3.org/2000/xmlns/\"},\"xmlns:xlink\":{prefix:\"xmlns\",localName:\"xlink\",namespaceURI:\"http://www.w3.org/2000/xmlns/\"}}\n},{}],8:[function(_dereq_,module){module.exports={\"null-character\":\"Null character in input stream, replaced with U+FFFD.\",\"invalid-codepoint\":\"Invalid codepoint in stream\",\"incorrectly-placed-solidus\":\"Solidus (/) incorrectly placed in tag.\",\"incorrect-cr-newline-entity\":\"Incorrect CR newline entity, replaced with LF.\",\"illegal-windows-1252-entity\":\"Entity used with illegal number (windows-1252 reference).\",\"cant-convert-numeric-entity\":\"Numeric entity couldn't be converted to character (codepoint U+{charAsInt}).\",\"invalid-numeric-entity-replaced\":\"Numeric entity represents an illegal codepoint. Expanded to the C1 controls range.\",\"numeric-entity-without-semicolon\":\"Numeric entity didn't end with ';'.\",\"expected-numeric-entity-but-got-eof\":\"Numeric entity expected. Got end of file instead.\",\"expected-numeric-entity\":\"Numeric entity expected but none found.\",\"named-entity-without-semicolon\":\"Named entity didn't end with ';'.\",\"expected-named-entity\":\"Named entity expected. Got none.\",\"attributes-in-end-tag\":\"End tag contains unexpected attributes.\",\"self-closing-flag-on-end-tag\":\"End tag contains unexpected self-closing flag.\",\"bare-less-than-sign-at-eof\":\"End of file after <.\",\"expected-tag-name-but-got-right-bracket\":\"Expected tag name. Got '>' instead.\",\"expected-tag-name-but-got-question-mark\":\"Expected tag name. Got '?' instead. (HTML doesn't support processing instructions.)\",\"expected-tag-name\":\"Expected tag name. Got something else instead.\",\"expected-closing-tag-but-got-right-bracket\":\"Expected closing tag. Got '>' instead. Ignoring '</>'.\",\"expected-closing-tag-but-got-eof\":\"Expected closing tag. Unexpected end of file.\",\"expected-closing-tag-but-got-char\":\"Expected closing tag. Unexpected character '{data}' found.\",\"eof-in-tag-name\":\"Unexpected end of file in the tag name.\",\"expected-attribute-name-but-got-eof\":\"Unexpected end of file. Expected attribute name instead.\",\"eof-in-attribute-name\":\"Unexpected end of file in attribute name.\",\"invalid-character-in-attribute-name\":\"Invalid character in attribute name.\",\"duplicate-attribute\":\"Dropped duplicate attribute '{name}' on tag.\",\"expected-end-of-tag-but-got-eof\":\"Unexpected end of file. Expected = or end of tag.\",\"expected-attribute-value-but-got-eof\":\"Unexpected end of file. Expected attribute value.\",\"expected-attribute-value-but-got-right-bracket\":\"Expected attribute value. Got '>' instead.\",\"unexpected-character-in-unquoted-attribute-value\":\"Unexpected character in unquoted attribute\",\"invalid-character-after-attribute-name\":\"Unexpected character after attribute name.\",\"unexpected-character-after-attribute-value\":\"Unexpected character after attribute value.\",\"eof-in-attribute-value-double-quote\":'Unexpected end of file in attribute value (\").',\"eof-in-attribute-value-single-quote\":\"Unexpected end of file in attribute value (').\",\"eof-in-attribute-value-no-quotes\":\"Unexpected end of file in attribute value.\",\"eof-after-attribute-value\":\"Unexpected end of file after attribute value.\",\"unexpected-eof-after-solidus-in-tag\":\"Unexpected end of file in tag. Expected >.\",\"unexpected-character-after-solidus-in-tag\":\"Unexpected character after / in tag. Expected >.\",\"expected-dashes-or-doctype\":\"Expected '--' or 'DOCTYPE'. Not found.\",\"unexpected-bang-after-double-dash-in-comment\":\"Unexpected ! after -- in comment.\",\"incorrect-comment\":\"Incorrect comment.\",\"eof-in-comment\":\"Unexpected end of file in comment.\",\"eof-in-comment-end-dash\":\"Unexpected end of file in comment (-).\",\"unexpected-dash-after-double-dash-in-comment\":\"Unexpected '-' after '--' found in comment.\",\"eof-in-comment-double-dash\":\"Unexpected end of file in comment (--).\",\"eof-in-comment-end-bang-state\":\"Unexpected end of file in comment.\",\"unexpected-char-in-comment\":\"Unexpected character in comment found.\",\"need-space-after-doctype\":\"No space after literal string 'DOCTYPE'.\",\"expected-doctype-name-but-got-right-bracket\":\"Unexpected > character. Expected DOCTYPE name.\",\"expected-doctype-name-but-got-eof\":\"Unexpected end of file. Expected DOCTYPE name.\",\"eof-in-doctype-name\":\"Unexpected end of file in DOCTYPE name.\",\"eof-in-doctype\":\"Unexpected end of file in DOCTYPE.\",\"expected-space-or-right-bracket-in-doctype\":\"Expected space or '>'. Got '{data}'.\",\"unexpected-end-of-doctype\":\"Unexpected end of DOCTYPE.\",\"unexpected-char-in-doctype\":\"Unexpected character in DOCTYPE.\",\"eof-in-bogus-doctype\":\"Unexpected end of file in bogus doctype.\",\"eof-in-innerhtml\":\"Unexpected EOF in inner html mode.\",\"unexpected-doctype\":\"Unexpected DOCTYPE. Ignored.\",\"non-html-root\":\"html needs to be the first start tag.\",\"expected-doctype-but-got-eof\":\"Unexpected End of file. Expected DOCTYPE.\",\"unknown-doctype\":\"Erroneous DOCTYPE. Expected <!DOCTYPE html>.\",\"quirky-doctype\":\"Quirky doctype. Expected <!DOCTYPE html>.\",\"almost-standards-doctype\":\"Almost standards mode doctype. Expected <!DOCTYPE html>.\",\"obsolete-doctype\":\"Obsolete doctype. Expected <!DOCTYPE html>.\",\"expected-doctype-but-got-chars\":\"Non-space characters found without seeing a doctype first. Expected e.g. <!DOCTYPE html>.\",\"expected-doctype-but-got-start-tag\":\"Start tag seen without seeing a doctype first. Expected e.g. <!DOCTYPE html>.\",\"expected-doctype-but-got-end-tag\":\"End tag seen without seeing a doctype first. Expected e.g. <!DOCTYPE html>.\",\"end-tag-after-implied-root\":\"Unexpected end tag ({name}) after the (implied) root element.\",\"expected-named-closing-tag-but-got-eof\":\"Unexpected end of file. Expected end tag ({name}).\",\"two-heads-are-not-better-than-one\":\"Unexpected start tag head in existing head. Ignored.\",\"unexpected-end-tag\":\"Unexpected end tag ({name}). Ignored.\",\"unexpected-implied-end-tag\":\"End tag {name} implied, but there were open elements.\",\"unexpected-start-tag-out-of-my-head\":\"Unexpected start tag ({name}) that can be in head. Moved.\",\"unexpected-start-tag\":\"Unexpected start tag ({name}).\",\"missing-end-tag\":\"Missing end tag ({name}).\",\"missing-end-tags\":\"Missing end tags ({name}).\",\"unexpected-start-tag-implies-end-tag\":\"Unexpected start tag ({startName}) implies end tag ({endName}).\",\"unexpected-start-tag-treated-as\":\"Unexpected start tag ({originalName}). Treated as {newName}.\",\"deprecated-tag\":\"Unexpected start tag {name}. Don't use it!\",\"unexpected-start-tag-ignored\":\"Unexpected start tag {name}. Ignored.\",\"expected-one-end-tag-but-got-another\":\"Unexpected end tag ({gotName}). Missing end tag ({expectedName}).\",\"end-tag-too-early\":\"End tag ({name}) seen too early. Expected other end tag.\",\"end-tag-too-early-named\":\"Unexpected end tag ({gotName}). Expected end tag ({expectedName}.\",\"end-tag-too-early-ignored\":\"End tag ({name}) seen too early. Ignored.\",\"adoption-agency-1.1\":\"End tag ({name}) violates step 1, paragraph 1 of the adoption agency algorithm.\",\"adoption-agency-1.2\":\"End tag ({name}) violates step 1, paragraph 2 of the adoption agency algorithm.\",\"adoption-agency-1.3\":\"End tag ({name}) violates step 1, paragraph 3 of the adoption agency algorithm.\",\"adoption-agency-4.4\":\"End tag ({name}) violates step 4, paragraph 4 of the adoption agency algorithm.\",\"unexpected-end-tag-treated-as\":\"Unexpected end tag ({originalName}). Treated as {newName}.\",\"no-end-tag\":\"This element ({name}) has no end tag.\",\"unexpected-implied-end-tag-in-table\":\"Unexpected implied end tag ({name}) in the table phase.\",\"unexpected-implied-end-tag-in-table-body\":\"Unexpected implied end tag ({name}) in the table body phase.\",\"unexpected-char-implies-table-voodoo\":\"Unexpected non-space characters in table context caused voodoo mode.\",\"unexpected-hidden-input-in-table\":\"Unexpected input with type hidden in table context.\",\"unexpected-form-in-table\":\"Unexpected form in table context.\",\"unexpected-start-tag-implies-table-voodoo\":\"Unexpected start tag ({name}) in table context caused voodoo mode.\",\"unexpected-end-tag-implies-table-voodoo\":\"Unexpected end tag ({name}) in table context caused voodoo mode.\",\"unexpected-cell-in-table-body\":\"Unexpected table cell start tag ({name}) in the table body phase.\",\"unexpected-cell-end-tag\":\"Got table cell end tag ({name}) while acequired end tags are missing.\",\"unexpected-end-tag-in-table-body\":\"Unexpected end tag ({name}) in the table body phase. Ignored.\",\"unexpected-implied-end-tag-in-table-row\":\"Unexpected implied end tag ({name}) in the table row phase.\",\"unexpected-end-tag-in-table-row\":\"Unexpected end tag ({name}) in the table row phase. Ignored.\",\"unexpected-select-in-select\":\"Unexpected select start tag in the select phase treated as select end tag.\",\"unexpected-input-in-select\":\"Unexpected input start tag in the select phase.\",\"unexpected-start-tag-in-select\":\"Unexpected start tag token ({name}) in the select phase. Ignored.\",\"unexpected-end-tag-in-select\":\"Unexpected end tag ({name}) in the select phase. Ignored.\",\"unexpected-table-element-start-tag-in-select-in-table\":\"Unexpected table element start tag ({name}) in the select in table phase.\",\"unexpected-table-element-end-tag-in-select-in-table\":\"Unexpected table element end tag ({name}) in the select in table phase.\",\"unexpected-char-after-body\":\"Unexpected non-space characters in the after body phase.\",\"unexpected-start-tag-after-body\":\"Unexpected start tag token ({name}) in the after body phase.\",\"unexpected-end-tag-after-body\":\"Unexpected end tag token ({name}) in the after body phase.\",\"unexpected-char-in-frameset\":\"Unepxected characters in the frameset phase. Characters ignored.\",\"unexpected-start-tag-in-frameset\":\"Unexpected start tag token ({name}) in the frameset phase. Ignored.\",\"unexpected-frameset-in-frameset-innerhtml\":\"Unexpected end tag token (frameset in the frameset phase (innerHTML).\",\"unexpected-end-tag-in-frameset\":\"Unexpected end tag token ({name}) in the frameset phase. Ignored.\",\"unexpected-char-after-frameset\":\"Unexpected non-space characters in the after frameset phase. Ignored.\",\"unexpected-start-tag-after-frameset\":\"Unexpected start tag ({name}) in the after frameset phase. Ignored.\",\"unexpected-end-tag-after-frameset\":\"Unexpected end tag ({name}) in the after frameset phase. Ignored.\",\"expected-eof-but-got-char\":\"Unexpected non-space characters. Expected end of file.\",\"expected-eof-but-got-start-tag\":\"Unexpected start tag ({name}). Expected end of file.\",\"expected-eof-but-got-end-tag\":\"Unexpected end tag ({name}). Expected end of file.\",\"unexpected-end-table-in-caption\":\"Unexpected end table tag in caption. Generates implied end caption.\",\"end-html-in-innerhtml\":\"Unexpected html end tag in inner html mode.\",\"eof-in-table\":\"Unexpected end of file. Expected table content.\",\"eof-in-script\":\"Unexpected end of file. Expected script content.\",\"non-void-element-with-trailing-solidus\":\"Trailing solidus not allowed on element {name}.\",\"unexpected-html-element-in-foreign-content\":'HTML start tag \"{name}\" in a foreign namespace context.',\"unexpected-start-tag-in-table\":\"Unexpected {name}. Expected table content.\"}},{}],9:[function(_dereq_,module,exports){function SAXParser(){this.contentHandler=null,this._errorHandler=null,this._treeBuilder=new SAXTreeBuilder,this._tokenizer=new Tokenizer(this._treeBuilder),this._scriptingEnabled=!1}var SAXTreeBuilder=_dereq_(\"./SAXTreeBuilder\").SAXTreeBuilder,Tokenizer=_dereq_(\"../Tokenizer\").Tokenizer,TreeParser=_dereq_(\"./TreeParser\").TreeParser;SAXParser.prototype.parse=function(source){this._tokenizer.tokenize(source);var document=this._treeBuilder.document;document&&new TreeParser(this.contentHandler).parse(document)},SAXParser.prototype.parseFragment=function(source,context){this._treeBuilder.setFragmentContext(context),this._tokenizer.tokenize(source);var fragment=this._treeBuilder.getFragment();fragment&&new TreeParser(this.contentHandler).parse(fragment)},Object.defineProperty(SAXParser.prototype,\"scriptingEnabled\",{get:function(){return this._scriptingEnabled},set:function(value){this._scriptingEnabled=value,this._treeBuilder.scriptingEnabled=value}}),Object.defineProperty(SAXParser.prototype,\"errorHandler\",{get:function(){return this._errorHandler},set:function(value){this._errorHandler=value,this._treeBuilder.errorHandler=value}}),exports.SAXParser=SAXParser},{\"../Tokenizer\":5,\"./SAXTreeBuilder\":10,\"./TreeParser\":11}],10:[function(_dereq_,module,exports){function SAXTreeBuilder(){TreeBuilder.call(this)}function getAttribute(node,name){for(var i=0;node.attributes.length>i;i++){var attribute=node.attributes[i];if(attribute.nodeName===name)return attribute.nodeValue}}function Node(locator){locator?(this.columnNumber=locator.columnNumber,this.lineNumber=locator.lineNumber):(this.columnNumber=-1,this.lineNumber=-1),this.parentNode=null,this.nextSibling=null,this.firstChild=null}function ParentNode(locator){Node.call(this,locator),this.lastChild=null,this._endLocator=null}function Document(locator){ParentNode.call(this,locator),this.nodeType=NodeType.DOCUMENT}function DocumentFragment(){ParentNode.call(this,new Locator),this.nodeType=NodeType.DOCUMENT_FRAGMENT}function Element(locator,uri,localName,qName,atts,prefixMappings){ParentNode.call(this,locator),this.uri=uri,this.localName=localName,this.qName=qName,this.attributes=atts,this.prefixMappings=prefixMappings,this.nodeType=NodeType.ELEMENT}function Characters(locator,data){Node.call(this,locator),this.data=data,this.nodeType=NodeType.CHARACTERS}function IgnorableWhitespace(locator,data){Node.call(this,locator),this.data=data,this.nodeType=NodeType.IGNORABLE_WHITESPACE}function Comment(locator,data){Node.call(this,locator),this.data=data,this.nodeType=NodeType.COMMENT}function CDATA(locator){ParentNode.call(this,locator),this.nodeType=NodeType.CDATA}function Entity(name){ParentNode.call(this),this.name=name,this.nodeType=NodeType.ENTITY}function SkippedEntity(name){Node.call(this),this.name=name,this.nodeType=NodeType.SKIPPED_ENTITY}function ProcessingInstruction(target,data){Node.call(this),this.target=target,this.data=data}function DTD(name,publicIdentifier,systemIdentifier){ParentNode.call(this),this.name=name,this.publicIdentifier=publicIdentifier,this.systemIdentifier=systemIdentifier,this.nodeType=NodeType.DTD}var util=_dereq_(\"util\"),TreeBuilder=_dereq_(\"../TreeBuilder\").TreeBuilder;util.inherits(SAXTreeBuilder,TreeBuilder),SAXTreeBuilder.prototype.start=function(){this.document=new Document(this.tokenizer)},SAXTreeBuilder.prototype.end=function(){this.document.endLocator=this.tokenizer},SAXTreeBuilder.prototype.insertDoctype=function(name,publicId,systemId){var doctype=new DTD(this.tokenizer,name,publicId,systemId);doctype.endLocator=this.tokenizer,this.document.appendChild(doctype)},SAXTreeBuilder.prototype.createElement=function(namespaceURI,localName,attributes){var element=new Element(this.tokenizer,namespaceURI,localName,localName,attributes||[]);return element},SAXTreeBuilder.prototype.insertComment=function(data,parent){parent||(parent=this.currentStackItem());var comment=new Comment(this.tokenizer,data);parent.appendChild(comment)},SAXTreeBuilder.prototype.appendCharacters=function(parent,data){var text=new Characters(this.tokenizer,data);parent.appendChild(text)},SAXTreeBuilder.prototype.insertText=function(data){if(this.redirectAttachToFosterParent&&this.openElements.top.isFosterParenting()){var tableIndex=this.openElements.findIndex(\"table\"),tableItem=this.openElements.item(tableIndex),table=tableItem.node;if(0===tableIndex)return this.appendCharacters(table,data);var text=new Characters(this.tokenizer,data),parent=table.parentNode;if(parent)return parent.insertBetween(text,table.previousSibling,table),void 0;var stackParent=this.openElements.item(tableIndex-1).node;return stackParent.appendChild(text),void 0}this.appendCharacters(this.currentStackItem().node,data)},SAXTreeBuilder.prototype.attachNode=function(node,parent){parent.appendChild(node)},SAXTreeBuilder.prototype.attachNodeToFosterParent=function(child,table,stackParent){var parent=table.parentNode;parent?parent.insertBetween(child,table.previousSibling,table):stackParent.appendChild(child)},SAXTreeBuilder.prototype.detachFromParent=function(element){element.detach()},SAXTreeBuilder.prototype.reparentChildren=function(oldParent,newParent){newParent.appendChildren(oldParent.firstChild)},SAXTreeBuilder.prototype.getFragment=function(){var fragment=new DocumentFragment;return this.reparentChildren(this.openElements.rootNode,fragment),fragment},SAXTreeBuilder.prototype.addAttributesToElement=function(element,attributes){for(var i=0;attributes.length>i;i++){var attribute=attributes[i];getAttribute(element,attribute.nodeName)||element.attributes.push(attribute)}};var NodeType={CDATA:1,CHARACTERS:2,COMMENT:3,DOCUMENT:4,DOCUMENT_FRAGMENT:5,DTD:6,ELEMENT:7,ENTITY:8,IGNORABLE_WHITESPACE:9,PROCESSING_INSTRUCTION:10,SKIPPED_ENTITY:11};Node.prototype.visit=function(){throw Error(\"Not Implemented\")},Node.prototype.revisit=function(){},Node.prototype.detach=function(){null!==this.parentNode&&(this.parentNode.removeChild(this),this.parentNode=null)},Object.defineProperty(Node.prototype,\"previousSibling\",{get:function(){for(var prev=null,next=this.parentNode.firstChild;;){if(this==next)return prev;prev=next,next=next.nextSibling}}}),ParentNode.prototype=Object.create(Node.prototype),ParentNode.prototype.insertBefore=function(child,sibling){if(!sibling)return this.appendChild(child);if(child.detach(),child.parentNode=this,this.firstChild==sibling)child.nextSibling=sibling,this.firstChild=child;else{for(var prev=this.firstChild,next=this.firstChild.nextSibling;next!=sibling;)prev=next,next=next.nextSibling;prev.nextSibling=child,child.nextSibling=next}return child},ParentNode.prototype.insertBetween=function(child,prev,next){return next?(child.detach(),child.parentNode=this,child.nextSibling=next,prev?prev.nextSibling=child:firstChild=child,child):this.appendChild(child)},ParentNode.prototype.appendChild=function(child){return child.detach(),child.parentNode=this,this.firstChild?this.lastChild.nextSibling=child:this.firstChild=child,this.lastChild=child,child},ParentNode.prototype.appendChildren=function(parent){var child=parent.firstChild;if(child){var another=parent;this.firstChild?this.lastChild.nextSibling=child:this.firstChild=child,this.lastChild=another.lastChild;do child.parentNode=this;while(child=child.nextSibling);another.firstChild=null,another.lastChild=null}},ParentNode.prototype.removeChild=function(node){if(this.firstChild==node)this.firstChild=node.nextSibling,this.lastChild==node&&(this.lastChild=null);else{for(var prev=this.firstChild,next=this.firstChild.nextSibling;next!=node;)prev=next,next=next.nextSibling;prev.nextSibling=node.nextSibling,this.lastChild==node&&(this.lastChild=prev)}return node.parentNode=null,node},Object.defineProperty(ParentNode.prototype,\"endLocator\",{get:function(){return this._endLocator},set:function(endLocator){this._endLocator={lineNumber:endLocator.lineNumber,columnNumber:endLocator.columnNumber}}}),Document.prototype=Object.create(ParentNode.prototype),Document.prototype.visit=function(treeParser){treeParser.startDocument(this)},Document.prototype.revisit=function(treeParser){treeParser.endDocument(this.endLocator)},DocumentFragment.prototype=Object.create(ParentNode.prototype),DocumentFragment.prototype.visit=function(){},Element.prototype=Object.create(ParentNode.prototype),Element.prototype.visit=function(treeParser){if(this.prefixMappings)for(var key in prefixMappings){var mapping=prefixMappings[key];treeParser.startPrefixMapping(mapping.getPrefix(),mapping.getUri(),this)}treeParser.startElement(this.uri,this.localName,this.qName,this.attributes,this)},Element.prototype.revisit=function(treeParser){if(treeParser.endElement(this.uri,this.localName,this.qName,this.endLocator),this.prefixMappings)for(var key in prefixMappings){var mapping=prefixMappings[key];treeParser.endPrefixMapping(mapping.getPrefix(),this.endLocator)}},Characters.prototype=Object.create(Node.prototype),Characters.prototype.visit=function(treeParser){treeParser.characters(this.data,0,this.data.length,this)},IgnorableWhitespace.prototype=Object.create(Node.prototype),IgnorableWhitespace.prototype.visit=function(treeParser){treeParser.ignorableWhitespace(this.data,0,this.data.length,this)},Comment.prototype=Object.create(Node.prototype),Comment.prototype.visit=function(treeParser){treeParser.comment(this.data,0,this.data.length,this)},CDATA.prototype=Object.create(ParentNode.prototype),CDATA.prototype.visit=function(treeParser){treeParser.startCDATA(this)},CDATA.prototype.revisit=function(treeParser){treeParser.endCDATA(this.endLocator)},Entity.prototype=Object.create(ParentNode.prototype),Entity.prototype.visit=function(treeParser){treeParser.startEntity(this.name,this)},Entity.prototype.revisit=function(treeParser){treeParser.endEntity(this.name)},SkippedEntity.prototype=Object.create(Node.prototype),SkippedEntity.prototype.visit=function(treeParser){treeParser.skippedEntity(this.name,this)},ProcessingInstruction.prototype=Object.create(Node.prototype),ProcessingInstruction.prototype.visit=function(treeParser){treeParser.processingInstruction(this.target,this.data,this)},ProcessingInstruction.prototype.getNodeType=function(){return NodeType.PROCESSING_INSTRUCTION},DTD.prototype=Object.create(ParentNode.prototype),DTD.prototype.visit=function(treeParser){treeParser.startDTD(this.name,this.publicIdentifier,this.systemIdentifier,this)},DTD.prototype.revisit=function(treeParser){treeParser.endDTD()},exports.SAXTreeBuilder=SAXTreeBuilder},{\"../TreeBuilder\":6,util:20}],11:[function(_dereq_,module,exports){function TreeParser(contentHandler,lexicalHandler){if(this.contentHandler,this.lexicalHandler,this.locatorDelegate,!contentHandler)throw new IllegalArgumentException(\"contentHandler was null.\");this.contentHandler=contentHandler,this.lexicalHandler=lexicalHandler?lexicalHandler:new NullLexicalHandler}function NullLexicalHandler(){}TreeParser.prototype.parse=function(node){this.contentHandler.documentLocator=this;for(var next,current=node;;)if(current.visit(this),next=current.firstChild)current=next;else for(;;){if(current.revisit(this),current==node)return;if(next=current.nextSibling){current=next;break}current=current.parentNode}},TreeParser.prototype.characters=function(ch,start,length,locator){this.locatorDelegate=locator,this.contentHandler.characters(ch,start,length)},TreeParser.prototype.endDocument=function(locator){this.locatorDelegate=locator,this.contentHandler.endDocument()},TreeParser.prototype.endElement=function(uri,localName,qName,locator){this.locatorDelegate=locator,this.contentHandler.endElement(uri,localName,qName)},TreeParser.prototype.endPrefixMapping=function(prefix,locator){this.locatorDelegate=locator,this.contentHandler.endPrefixMapping(prefix)},TreeParser.prototype.ignorableWhitespace=function(ch,start,length,locator){this.locatorDelegate=locator,this.contentHandler.ignorableWhitespace(ch,start,length)},TreeParser.prototype.processingInstruction=function(target,data,locator){this.locatorDelegate=locator,this.contentHandler.processingInstruction(target,data)},TreeParser.prototype.skippedEntity=function(name,locator){this.locatorDelegate=locator,this.contentHandler.skippedEntity(name)},TreeParser.prototype.startDocument=function(locator){this.locatorDelegate=locator,this.contentHandler.startDocument()},TreeParser.prototype.startElement=function(uri,localName,qName,atts,locator){this.locatorDelegate=locator,this.contentHandler.startElement(uri,localName,qName,atts)},TreeParser.prototype.startPrefixMapping=function(prefix,uri,locator){this.locatorDelegate=locator,this.contentHandler.startPrefixMapping(prefix,uri)},TreeParser.prototype.comment=function(ch,start,length,locator){this.locatorDelegate=locator,this.lexicalHandler.comment(ch,start,length)},TreeParser.prototype.endCDATA=function(locator){this.locatorDelegate=locator,this.lexicalHandler.endCDATA()},TreeParser.prototype.endDTD=function(locator){this.locatorDelegate=locator,this.lexicalHandler.endDTD()},TreeParser.prototype.endEntity=function(name,locator){this.locatorDelegate=locator,this.lexicalHandler.endEntity(name)},TreeParser.prototype.startCDATA=function(locator){this.locatorDelegate=locator,this.lexicalHandler.startCDATA()},TreeParser.prototype.startDTD=function(name,publicId,systemId,locator){this.locatorDelegate=locator,this.lexicalHandler.startDTD(name,publicId,systemId)},TreeParser.prototype.startEntity=function(name,locator){this.locatorDelegate=locator,this.lexicalHandler.startEntity(name)},Object.defineProperty(TreeParser.prototype,\"columnNumber\",{get:function(){return this.locatorDelegate?this.locatorDelegate.columnNumber:-1}}),Object.defineProperty(TreeParser.prototype,\"lineNumber\",{get:function(){return this.locatorDelegate?this.locatorDelegate.lineNumber:-1}}),NullLexicalHandler.prototype.comment=function(){},NullLexicalHandler.prototype.endCDATA=function(){},NullLexicalHandler.prototype.endDTD=function(){},NullLexicalHandler.prototype.endEntity=function(){},NullLexicalHandler.prototype.startCDATA=function(){},NullLexicalHandler.prototype.startDTD=function(){},NullLexicalHandler.prototype.startEntity=function(){},exports.TreeParser=TreeParser},{}],12:[function(_dereq_,module){module.exports={\"Aacute;\":\"Á\",Aacute:\"Á\",\"aacute;\":\"á\",aacute:\"á\",\"Abreve;\":\"Ă\",\"abreve;\":\"ă\",\"ac;\":\"∾\",\"acd;\":\"∿\",\"acE;\":\"∾̳\",\"Acirc;\":\"Â\",Acirc:\"Â\",\"acirc;\":\"â\",acirc:\"â\",\"acute;\":\"´\",acute:\"´\",\"Acy;\":\"А\",\"acy;\":\"а\",\"AElig;\":\"Æ\",AElig:\"Æ\",\"aelig;\":\"æ\",aelig:\"æ\",\"af;\":\"⁡\",\"Afr;\":\"𝔄\",\"afr;\":\"𝔞\",\"Agrave;\":\"À\",Agrave:\"À\",\"agrave;\":\"à\",agrave:\"à\",\"alefsym;\":\"ℵ\",\"aleph;\":\"ℵ\",\"Alpha;\":\"Α\",\"alpha;\":\"α\",\"Amacr;\":\"Ā\",\"amacr;\":\"ā\",\"amalg;\":\"⨿\",\"amp;\":\"&\",amp:\"&\",\"AMP;\":\"&\",AMP:\"&\",\"andand;\":\"⩕\",\"And;\":\"⩓\",\"and;\":\"∧\",\"andd;\":\"⩜\",\"andslope;\":\"⩘\",\"andv;\":\"⩚\",\"ang;\":\"∠\",\"ange;\":\"⦤\",\"angle;\":\"∠\",\"angmsdaa;\":\"⦨\",\"angmsdab;\":\"⦩\",\"angmsdac;\":\"⦪\",\"angmsdad;\":\"⦫\",\"angmsdae;\":\"⦬\",\"angmsdaf;\":\"⦭\",\"angmsdag;\":\"⦮\",\"angmsdah;\":\"⦯\",\"angmsd;\":\"∡\",\"angrt;\":\"∟\",\"angrtvb;\":\"⊾\",\"angrtvbd;\":\"⦝\",\"angsph;\":\"∢\",\"angst;\":\"Å\",\"angzarr;\":\"⍼\",\"Aogon;\":\"Ą\",\"aogon;\":\"ą\",\"Aopf;\":\"𝔸\",\"aopf;\":\"𝕒\",\"apacir;\":\"⩯\",\"ap;\":\"≈\",\"apE;\":\"⩰\",\"ape;\":\"≊\",\"apid;\":\"≋\",\"apos;\":\"'\",\"ApplyFunction;\":\"⁡\",\"approx;\":\"≈\",\"approxeq;\":\"≊\",\"Aring;\":\"Å\",Aring:\"Å\",\"aring;\":\"å\",aring:\"å\",\"Ascr;\":\"𝒜\",\"ascr;\":\"𝒶\",\"Assign;\":\"≔\",\"ast;\":\"*\",\"asymp;\":\"≈\",\"asympeq;\":\"≍\",\"Atilde;\":\"Ã\",Atilde:\"Ã\",\"atilde;\":\"ã\",atilde:\"ã\",\"Auml;\":\"Ä\",Auml:\"Ä\",\"auml;\":\"ä\",auml:\"ä\",\"awconint;\":\"∳\",\"awint;\":\"⨑\",\"backcong;\":\"≌\",\"backepsilon;\":\"϶\",\"backprime;\":\"‵\",\"backsim;\":\"∽\",\"backsimeq;\":\"⋍\",\"Backslash;\":\"∖\",\"Barv;\":\"⫧\",\"barvee;\":\"⊽\",\"barwed;\":\"⌅\",\"Barwed;\":\"⌆\",\"barwedge;\":\"⌅\",\"bbrk;\":\"⎵\",\"bbrktbrk;\":\"⎶\",\"bcong;\":\"≌\",\"Bcy;\":\"Б\",\"bcy;\":\"б\",\"bdquo;\":\"„\",\"becaus;\":\"∵\",\"because;\":\"∵\",\"Because;\":\"∵\",\"bemptyv;\":\"⦰\",\"bepsi;\":\"϶\",\"bernou;\":\"ℬ\",\"Bernoullis;\":\"ℬ\",\"Beta;\":\"Β\",\"beta;\":\"β\",\"beth;\":\"ℶ\",\"between;\":\"≬\",\"Bfr;\":\"𝔅\",\"bfr;\":\"𝔟\",\"bigcap;\":\"⋂\",\"bigcirc;\":\"◯\",\"bigcup;\":\"⋃\",\"bigodot;\":\"⨀\",\"bigoplus;\":\"⨁\",\"bigotimes;\":\"⨂\",\"bigsqcup;\":\"⨆\",\"bigstar;\":\"★\",\"bigtriangledown;\":\"▽\",\"bigtriangleup;\":\"△\",\"biguplus;\":\"⨄\",\"bigvee;\":\"⋁\",\"bigwedge;\":\"⋀\",\"bkarow;\":\"⤍\",\"blacklozenge;\":\"⧫\",\"blacksquare;\":\"▪\",\"blacktriangle;\":\"▴\",\"blacktriangledown;\":\"▾\",\"blacktriangleleft;\":\"◂\",\"blacktriangleright;\":\"▸\",\"blank;\":\"␣\",\"blk12;\":\"▒\",\"blk14;\":\"░\",\"blk34;\":\"▓\",\"block;\":\"█\",\"bne;\":\"=⃥\",\"bnequiv;\":\"≡⃥\",\"bNot;\":\"⫭\",\"bnot;\":\"⌐\",\"Bopf;\":\"𝔹\",\"bopf;\":\"𝕓\",\"bot;\":\"⊥\",\"bottom;\":\"⊥\",\"bowtie;\":\"⋈\",\"boxbox;\":\"⧉\",\"boxdl;\":\"┐\",\"boxdL;\":\"╕\",\"boxDl;\":\"╖\",\"boxDL;\":\"╗\",\"boxdr;\":\"┌\",\"boxdR;\":\"╒\",\"boxDr;\":\"╓\",\"boxDR;\":\"╔\",\"boxh;\":\"─\",\"boxH;\":\"═\",\"boxhd;\":\"┬\",\"boxHd;\":\"╤\",\"boxhD;\":\"╥\",\"boxHD;\":\"╦\",\"boxhu;\":\"┴\",\"boxHu;\":\"╧\",\"boxhU;\":\"╨\",\"boxHU;\":\"╩\",\"boxminus;\":\"⊟\",\"boxplus;\":\"⊞\",\"boxtimes;\":\"⊠\",\"boxul;\":\"┘\",\"boxuL;\":\"╛\",\"boxUl;\":\"╜\",\"boxUL;\":\"╝\",\"boxur;\":\"└\",\"boxuR;\":\"╘\",\"boxUr;\":\"╙\",\"boxUR;\":\"╚\",\"boxv;\":\"│\",\"boxV;\":\"║\",\"boxvh;\":\"┼\",\"boxvH;\":\"╪\",\"boxVh;\":\"╫\",\"boxVH;\":\"╬\",\"boxvl;\":\"┤\",\"boxvL;\":\"╡\",\"boxVl;\":\"╢\",\"boxVL;\":\"╣\",\"boxvr;\":\"├\",\"boxvR;\":\"╞\",\"boxVr;\":\"╟\",\"boxVR;\":\"╠\",\"bprime;\":\"‵\",\"breve;\":\"˘\",\"Breve;\":\"˘\",\"brvbar;\":\"¦\",brvbar:\"¦\",\"bscr;\":\"𝒷\",\"Bscr;\":\"ℬ\",\"bsemi;\":\"⁏\",\"bsim;\":\"∽\",\"bsime;\":\"⋍\",\"bsolb;\":\"⧅\",\"bsol;\":\"\\\\\",\"bsolhsub;\":\"⟈\",\"bull;\":\"•\",\"bullet;\":\"•\",\"bump;\":\"≎\",\"bumpE;\":\"⪮\",\"bumpe;\":\"≏\",\"Bumpeq;\":\"≎\",\"bumpeq;\":\"≏\",\"Cacute;\":\"Ć\",\"cacute;\":\"ć\",\"capand;\":\"⩄\",\"capbrcup;\":\"⩉\",\"capcap;\":\"⩋\",\"cap;\":\"∩\",\"Cap;\":\"⋒\",\"capcup;\":\"⩇\",\"capdot;\":\"⩀\",\"CapitalDifferentialD;\":\"ⅅ\",\"caps;\":\"∩︀\",\"caret;\":\"⁁\",\"caron;\":\"ˇ\",\"Cayleys;\":\"ℭ\",\"ccaps;\":\"⩍\",\"Ccaron;\":\"Č\",\"ccaron;\":\"č\",\"Ccedil;\":\"Ç\",Ccedil:\"Ç\",\"ccedil;\":\"ç\",ccedil:\"ç\",\"Ccirc;\":\"Ĉ\",\"ccirc;\":\"ĉ\",\"Cconint;\":\"∰\",\"ccups;\":\"⩌\",\"ccupssm;\":\"⩐\",\"Cdot;\":\"Ċ\",\"cdot;\":\"ċ\",\"cedil;\":\"¸\",cedil:\"¸\",\"Cedilla;\":\"¸\",\"cemptyv;\":\"⦲\",\"cent;\":\"¢\",cent:\"¢\",\"centerdot;\":\"·\",\"CenterDot;\":\"·\",\"cfr;\":\"𝔠\",\"Cfr;\":\"ℭ\",\"CHcy;\":\"Ч\",\"chcy;\":\"ч\",\"check;\":\"✓\",\"checkmark;\":\"✓\",\"Chi;\":\"Χ\",\"chi;\":\"χ\",\"circ;\":\"ˆ\",\"circeq;\":\"≗\",\"circlearrowleft;\":\"↺\",\"circlearrowright;\":\"↻\",\"circledast;\":\"⊛\",\"circledcirc;\":\"⊚\",\"circleddash;\":\"⊝\",\"CircleDot;\":\"⊙\",\"circledR;\":\"®\",\"circledS;\":\"Ⓢ\",\"CircleMinus;\":\"⊖\",\"CirclePlus;\":\"⊕\",\"CircleTimes;\":\"⊗\",\"cir;\":\"○\",\"cirE;\":\"⧃\",\"cire;\":\"≗\",\"cirfnint;\":\"⨐\",\"cirmid;\":\"⫯\",\"cirscir;\":\"⧂\",\"ClockwiseContourIntegral;\":\"∲\",\"CloseCurlyDoubleQuote;\":\"”\",\"CloseCurlyQuote;\":\"’\",\"clubs;\":\"♣\",\"clubsuit;\":\"♣\",\"colon;\":\":\",\"Colon;\":\"∷\",\"Colone;\":\"⩴\",\"colone;\":\"≔\",\"coloneq;\":\"≔\",\"comma;\":\",\",\"commat;\":\"@\",\"comp;\":\"∁\",\"compfn;\":\"∘\",\"complement;\":\"∁\",\"complexes;\":\"ℂ\",\"cong;\":\"≅\",\"congdot;\":\"⩭\",\"Congruent;\":\"≡\",\"conint;\":\"∮\",\"Conint;\":\"∯\",\"ContourIntegral;\":\"∮\",\"copf;\":\"𝕔\",\"Copf;\":\"ℂ\",\"coprod;\":\"∐\",\"Coproduct;\":\"∐\",\"copy;\":\"©\",copy:\"©\",\"COPY;\":\"©\",COPY:\"©\",\"copysr;\":\"℗\",\"CounterClockwiseContourIntegral;\":\"∳\",\"crarr;\":\"↵\",\"cross;\":\"✗\",\"Cross;\":\"⨯\",\"Cscr;\":\"𝒞\",\"cscr;\":\"𝒸\",\"csub;\":\"⫏\",\"csube;\":\"⫑\",\"csup;\":\"⫐\",\"csupe;\":\"⫒\",\"ctdot;\":\"⋯\",\"cudarrl;\":\"⤸\",\"cudarrr;\":\"⤵\",\"cuepr;\":\"⋞\",\"cuesc;\":\"⋟\",\"cularr;\":\"↶\",\"cularrp;\":\"⤽\",\"cupbrcap;\":\"⩈\",\"cupcap;\":\"⩆\",\"CupCap;\":\"≍\",\"cup;\":\"∪\",\"Cup;\":\"⋓\",\"cupcup;\":\"⩊\",\"cupdot;\":\"⊍\",\"cupor;\":\"⩅\",\"cups;\":\"∪︀\",\"curarr;\":\"↷\",\"curarrm;\":\"⤼\",\"curlyeqprec;\":\"⋞\",\"curlyeqsucc;\":\"⋟\",\"curlyvee;\":\"⋎\",\"curlywedge;\":\"⋏\",\"curren;\":\"¤\",curren:\"¤\",\"curvearrowleft;\":\"↶\",\"curvearrowright;\":\"↷\",\"cuvee;\":\"⋎\",\"cuwed;\":\"⋏\",\"cwconint;\":\"∲\",\"cwint;\":\"∱\",\"cylcty;\":\"⌭\",\"dagger;\":\"†\",\"Dagger;\":\"‡\",\"daleth;\":\"ℸ\",\"darr;\":\"↓\",\"Darr;\":\"↡\",\"dArr;\":\"⇓\",\"dash;\":\"‐\",\"Dashv;\":\"⫤\",\"dashv;\":\"⊣\",\"dbkarow;\":\"⤏\",\"dblac;\":\"˝\",\"Dcaron;\":\"Ď\",\"dcaron;\":\"ď\",\"Dcy;\":\"Д\",\"dcy;\":\"д\",\"ddagger;\":\"‡\",\"ddarr;\":\"⇊\",\"DD;\":\"ⅅ\",\"dd;\":\"ⅆ\",\"DDotrahd;\":\"⤑\",\"ddotseq;\":\"⩷\",\"deg;\":\"°\",deg:\"°\",\"Del;\":\"∇\",\"Delta;\":\"Δ\",\"delta;\":\"δ\",\"demptyv;\":\"⦱\",\"dfisht;\":\"⥿\",\"Dfr;\":\"𝔇\",\"dfr;\":\"𝔡\",\"dHar;\":\"⥥\",\"dharl;\":\"⇃\",\"dharr;\":\"⇂\",\"DiacriticalAcute;\":\"´\",\"DiacriticalDot;\":\"˙\",\"DiacriticalDoubleAcute;\":\"˝\",\"DiacriticalGrave;\":\"`\",\"DiacriticalTilde;\":\"˜\",\"diam;\":\"⋄\",\"diamond;\":\"⋄\",\"Diamond;\":\"⋄\",\"diamondsuit;\":\"♦\",\"diams;\":\"♦\",\"die;\":\"¨\",\"DifferentialD;\":\"ⅆ\",\"digamma;\":\"ϝ\",\"disin;\":\"⋲\",\"div;\":\"÷\",\"divide;\":\"÷\",divide:\"÷\",\"divideontimes;\":\"⋇\",\"divonx;\":\"⋇\",\"DJcy;\":\"Ђ\",\"djcy;\":\"ђ\",\"dlcorn;\":\"⌞\",\"dlcrop;\":\"⌍\",\"dollar;\":\"$\",\"Dopf;\":\"𝔻\",\"dopf;\":\"𝕕\",\"Dot;\":\"¨\",\"dot;\":\"˙\",\"DotDot;\":\"⃜\",\"doteq;\":\"≐\",\"doteqdot;\":\"≑\",\"DotEqual;\":\"≐\",\"dotminus;\":\"∸\",\"dotplus;\":\"∔\",\"dotsquare;\":\"⊡\",\"doublebarwedge;\":\"⌆\",\"DoubleContourIntegral;\":\"∯\",\"DoubleDot;\":\"¨\",\"DoubleDownArrow;\":\"⇓\",\"DoubleLeftArrow;\":\"⇐\",\"DoubleLeftRightArrow;\":\"⇔\",\"DoubleLeftTee;\":\"⫤\",\"DoubleLongLeftArrow;\":\"⟸\",\"DoubleLongLeftRightArrow;\":\"⟺\",\"DoubleLongRightArrow;\":\"⟹\",\"DoubleRightArrow;\":\"⇒\",\"DoubleRightTee;\":\"⊨\",\"DoubleUpArrow;\":\"⇑\",\"DoubleUpDownArrow;\":\"⇕\",\"DoubleVerticalBar;\":\"∥\",\"DownArrowBar;\":\"⤓\",\"downarrow;\":\"↓\",\"DownArrow;\":\"↓\",\"Downarrow;\":\"⇓\",\"DownArrowUpArrow;\":\"⇵\",\"DownBreve;\":\"̑\",\"downdownarrows;\":\"⇊\",\"downharpoonleft;\":\"⇃\",\"downharpoonright;\":\"⇂\",\"DownLeftRightVector;\":\"⥐\",\"DownLeftTeeVector;\":\"⥞\",\"DownLeftVectorBar;\":\"⥖\",\"DownLeftVector;\":\"↽\",\"DownRightTeeVector;\":\"⥟\",\"DownRightVectorBar;\":\"⥗\",\"DownRightVector;\":\"⇁\",\"DownTeeArrow;\":\"↧\",\"DownTee;\":\"⊤\",\"drbkarow;\":\"⤐\",\"drcorn;\":\"⌟\",\"drcrop;\":\"⌌\",\"Dscr;\":\"𝒟\",\"dscr;\":\"𝒹\",\"DScy;\":\"Ѕ\",\"dscy;\":\"ѕ\",\"dsol;\":\"⧶\",\"Dstrok;\":\"Đ\",\"dstrok;\":\"đ\",\"dtdot;\":\"⋱\",\"dtri;\":\"▿\",\"dtrif;\":\"▾\",\"duarr;\":\"⇵\",\"duhar;\":\"⥯\",\"dwangle;\":\"⦦\",\"DZcy;\":\"Џ\",\"dzcy;\":\"џ\",\"dzigrarr;\":\"⟿\",\"Eacute;\":\"É\",Eacute:\"É\",\"eacute;\":\"é\",eacute:\"é\",\"easter;\":\"⩮\",\"Ecaron;\":\"Ě\",\"ecaron;\":\"ě\",\"Ecirc;\":\"Ê\",Ecirc:\"Ê\",\"ecirc;\":\"ê\",ecirc:\"ê\",\"ecir;\":\"≖\",\"ecolon;\":\"≕\",\"Ecy;\":\"Э\",\"ecy;\":\"э\",\"eDDot;\":\"⩷\",\"Edot;\":\"Ė\",\"edot;\":\"ė\",\"eDot;\":\"≑\",\"ee;\":\"ⅇ\",\"efDot;\":\"≒\",\"Efr;\":\"𝔈\",\"efr;\":\"𝔢\",\"eg;\":\"⪚\",\"Egrave;\":\"È\",Egrave:\"È\",\"egrave;\":\"è\",egrave:\"è\",\"egs;\":\"⪖\",\"egsdot;\":\"⪘\",\"el;\":\"⪙\",\"Element;\":\"∈\",\"elinters;\":\"⏧\",\"ell;\":\"ℓ\",\"els;\":\"⪕\",\"elsdot;\":\"⪗\",\"Emacr;\":\"Ē\",\"emacr;\":\"ē\",\"empty;\":\"∅\",\"emptyset;\":\"∅\",\"EmptySmallSquare;\":\"◻\",\"emptyv;\":\"∅\",\"EmptyVerySmallSquare;\":\"▫\",\"emsp13;\":\" \",\"emsp14;\":\" \",\"emsp;\":\" \",\"ENG;\":\"Ŋ\",\"eng;\":\"ŋ\",\"ensp;\":\" \",\"Eogon;\":\"Ę\",\"eogon;\":\"ę\",\"Eopf;\":\"𝔼\",\"eopf;\":\"𝕖\",\"epar;\":\"⋕\",\"eparsl;\":\"⧣\",\"eplus;\":\"⩱\",\"epsi;\":\"ε\",\"Epsilon;\":\"Ε\",\"epsilon;\":\"ε\",\"epsiv;\":\"ϵ\",\"eqcirc;\":\"≖\",\"eqcolon;\":\"≕\",\"eqsim;\":\"≂\",\"eqslantgtr;\":\"⪖\",\"eqslantless;\":\"⪕\",\"Equal;\":\"⩵\",\"equals;\":\"=\",\"EqualTilde;\":\"≂\",\"equest;\":\"≟\",\"Equilibrium;\":\"⇌\",\"equiv;\":\"≡\",\"equivDD;\":\"⩸\",\"eqvparsl;\":\"⧥\",\"erarr;\":\"⥱\",\"erDot;\":\"≓\",\"escr;\":\"ℯ\",\"Escr;\":\"ℰ\",\"esdot;\":\"≐\",\"Esim;\":\"⩳\",\"esim;\":\"≂\",\"Eta;\":\"Η\",\"eta;\":\"η\",\"ETH;\":\"Ð\",ETH:\"Ð\",\"eth;\":\"ð\",eth:\"ð\",\"Euml;\":\"Ë\",Euml:\"Ë\",\"euml;\":\"ë\",euml:\"ë\",\"euro;\":\"€\",\"excl;\":\"!\",\"exist;\":\"∃\",\"Exists;\":\"∃\",\"expectation;\":\"ℰ\",\"exponentiale;\":\"ⅇ\",\"ExponentialE;\":\"ⅇ\",\"fallingdotseq;\":\"≒\",\"Fcy;\":\"Ф\",\"fcy;\":\"ф\",\"female;\":\"♀\",\"ffilig;\":\"ﬃ\",\"fflig;\":\"ﬀ\",\"ffllig;\":\"ﬄ\",\"Ffr;\":\"𝔉\",\"ffr;\":\"𝔣\",\"filig;\":\"ﬁ\",\"FilledSmallSquare;\":\"◼\",\"FilledVerySmallSquare;\":\"▪\",\"fjlig;\":\"fj\",\"flat;\":\"♭\",\"fllig;\":\"ﬂ\",\"fltns;\":\"▱\",\"fnof;\":\"ƒ\",\"Fopf;\":\"𝔽\",\"fopf;\":\"𝕗\",\"forall;\":\"∀\",\"ForAll;\":\"∀\",\"fork;\":\"⋔\",\"forkv;\":\"⫙\",\"Fouriertrf;\":\"ℱ\",\"fpartint;\":\"⨍\",\"frac12;\":\"½\",frac12:\"½\",\"frac13;\":\"⅓\",\"frac14;\":\"¼\",frac14:\"¼\",\"frac15;\":\"⅕\",\"frac16;\":\"⅙\",\"frac18;\":\"⅛\",\"frac23;\":\"⅔\",\"frac25;\":\"⅖\",\"frac34;\":\"¾\",frac34:\"¾\",\"frac35;\":\"⅗\",\"frac38;\":\"⅜\",\"frac45;\":\"⅘\",\"frac56;\":\"⅚\",\"frac58;\":\"⅝\",\"frac78;\":\"⅞\",\"frasl;\":\"⁄\",\"frown;\":\"⌢\",\"fscr;\":\"𝒻\",\"Fscr;\":\"ℱ\",\"gacute;\":\"ǵ\",\"Gamma;\":\"Γ\",\"gamma;\":\"γ\",\"Gammad;\":\"Ϝ\",\"gammad;\":\"ϝ\",\"gap;\":\"⪆\",\"Gbreve;\":\"Ğ\",\"gbreve;\":\"ğ\",\"Gcedil;\":\"Ģ\",\"Gcirc;\":\"Ĝ\",\"gcirc;\":\"ĝ\",\"Gcy;\":\"Г\",\"gcy;\":\"г\",\"Gdot;\":\"Ġ\",\"gdot;\":\"ġ\",\"ge;\":\"≥\",\"gE;\":\"≧\",\"gEl;\":\"⪌\",\"gel;\":\"⋛\",\"geq;\":\"≥\",\"geqq;\":\"≧\",\"geqslant;\":\"⩾\",\"gescc;\":\"⪩\",\"ges;\":\"⩾\",\"gesdot;\":\"⪀\",\"gesdoto;\":\"⪂\",\"gesdotol;\":\"⪄\",\"gesl;\":\"⋛︀\",\"gesles;\":\"⪔\",\"Gfr;\":\"𝔊\",\"gfr;\":\"𝔤\",\"gg;\":\"≫\",\"Gg;\":\"⋙\",\"ggg;\":\"⋙\",\"gimel;\":\"ℷ\",\"GJcy;\":\"Ѓ\",\"gjcy;\":\"ѓ\",\"gla;\":\"⪥\",\"gl;\":\"≷\",\"glE;\":\"⪒\",\"glj;\":\"⪤\",\"gnap;\":\"⪊\",\"gnapprox;\":\"⪊\",\"gne;\":\"⪈\",\"gnE;\":\"≩\",\"gneq;\":\"⪈\",\"gneqq;\":\"≩\",\"gnsim;\":\"⋧\",\"Gopf;\":\"𝔾\",\"gopf;\":\"𝕘\",\"grave;\":\"`\",\"GreaterEqual;\":\"≥\",\"GreaterEqualLess;\":\"⋛\",\"GreaterFullEqual;\":\"≧\",\"GreaterGreater;\":\"⪢\",\"GreaterLess;\":\"≷\",\"GreaterSlantEqual;\":\"⩾\",\"GreaterTilde;\":\"≳\",\"Gscr;\":\"𝒢\",\"gscr;\":\"ℊ\",\"gsim;\":\"≳\",\"gsime;\":\"⪎\",\"gsiml;\":\"⪐\",\"gtcc;\":\"⪧\",\"gtcir;\":\"⩺\",\"gt;\":\">\",gt:\">\",\"GT;\":\">\",GT:\">\",\"Gt;\":\"≫\",\"gtdot;\":\"⋗\",\"gtlPar;\":\"⦕\",\"gtquest;\":\"⩼\",\"gtrapprox;\":\"⪆\",\"gtrarr;\":\"⥸\",\"gtrdot;\":\"⋗\",\"gtreqless;\":\"⋛\",\"gtreqqless;\":\"⪌\",\"gtrless;\":\"≷\",\"gtrsim;\":\"≳\",\"gvertneqq;\":\"≩︀\",\"gvnE;\":\"≩︀\",\"Hacek;\":\"ˇ\",\"hairsp;\":\" \",\"half;\":\"½\",\"hamilt;\":\"ℋ\",\"HARDcy;\":\"Ъ\",\"hardcy;\":\"ъ\",\"harrcir;\":\"⥈\",\"harr;\":\"↔\",\"hArr;\":\"⇔\",\"harrw;\":\"↭\",\"Hat;\":\"^\",\"hbar;\":\"ℏ\",\"Hcirc;\":\"Ĥ\",\"hcirc;\":\"ĥ\",\"hearts;\":\"♥\",\"heartsuit;\":\"♥\",\"hellip;\":\"…\",\"hercon;\":\"⊹\",\"hfr;\":\"𝔥\",\"Hfr;\":\"ℌ\",\"HilbertSpace;\":\"ℋ\",\"hksearow;\":\"⤥\",\"hkswarow;\":\"⤦\",\"hoarr;\":\"⇿\",\"homtht;\":\"∻\",\"hookleftarrow;\":\"↩\",\"hookrightarrow;\":\"↪\",\"hopf;\":\"𝕙\",\"Hopf;\":\"ℍ\",\"horbar;\":\"―\",\"HorizontalLine;\":\"─\",\"hscr;\":\"𝒽\",\"Hscr;\":\"ℋ\",\"hslash;\":\"ℏ\",\"Hstrok;\":\"Ħ\",\"hstrok;\":\"ħ\",\"HumpDownHump;\":\"≎\",\"HumpEqual;\":\"≏\",\"hybull;\":\"⁃\",\"hyphen;\":\"‐\",\"Iacute;\":\"Í\",Iacute:\"Í\",\"iacute;\":\"í\",iacute:\"í\",\"ic;\":\"⁣\",\"Icirc;\":\"Î\",Icirc:\"Î\",\"icirc;\":\"î\",icirc:\"î\",\"Icy;\":\"И\",\"icy;\":\"и\",\"Idot;\":\"İ\",\"IEcy;\":\"Е\",\"iecy;\":\"е\",\"iexcl;\":\"¡\",iexcl:\"¡\",\"iff;\":\"⇔\",\"ifr;\":\"𝔦\",\"Ifr;\":\"ℑ\",\"Igrave;\":\"Ì\",Igrave:\"Ì\",\"igrave;\":\"ì\",igrave:\"ì\",\"ii;\":\"ⅈ\",\"iiiint;\":\"⨌\",\"iiint;\":\"∭\",\"iinfin;\":\"⧜\",\"iiota;\":\"℩\",\"IJlig;\":\"Ĳ\",\"ijlig;\":\"ĳ\",\"Imacr;\":\"Ī\",\"imacr;\":\"ī\",\"image;\":\"ℑ\",\"ImaginaryI;\":\"ⅈ\",\"imagline;\":\"ℐ\",\"imagpart;\":\"ℑ\",\"imath;\":\"ı\",\"Im;\":\"ℑ\",\"imof;\":\"⊷\",\"imped;\":\"Ƶ\",\"Implies;\":\"⇒\",\"incare;\":\"℅\",\"in;\":\"∈\",\"infin;\":\"∞\",\"infintie;\":\"⧝\",\"inodot;\":\"ı\",\"intcal;\":\"⊺\",\"int;\":\"∫\",\"Int;\":\"∬\",\"integers;\":\"ℤ\",\"Integral;\":\"∫\",\"intercal;\":\"⊺\",\"Intersection;\":\"⋂\",\"intlarhk;\":\"⨗\",\"intprod;\":\"⨼\",\"InvisibleComma;\":\"⁣\",\"InvisibleTimes;\":\"⁢\",\"IOcy;\":\"Ё\",\"iocy;\":\"ё\",\"Iogon;\":\"Į\",\"iogon;\":\"į\",\"Iopf;\":\"𝕀\",\"iopf;\":\"𝕚\",\"Iota;\":\"Ι\",\"iota;\":\"ι\",\"iprod;\":\"⨼\",\"iquest;\":\"¿\",iquest:\"¿\",\"iscr;\":\"𝒾\",\"Iscr;\":\"ℐ\",\"isin;\":\"∈\",\"isindot;\":\"⋵\",\"isinE;\":\"⋹\",\"isins;\":\"⋴\",\"isinsv;\":\"⋳\",\"isinv;\":\"∈\",\"it;\":\"⁢\",\"Itilde;\":\"Ĩ\",\"itilde;\":\"ĩ\",\"Iukcy;\":\"І\",\"iukcy;\":\"і\",\"Iuml;\":\"Ï\",Iuml:\"Ï\",\"iuml;\":\"ï\",iuml:\"ï\",\"Jcirc;\":\"Ĵ\",\"jcirc;\":\"ĵ\",\"Jcy;\":\"Й\",\"jcy;\":\"й\",\"Jfr;\":\"𝔍\",\"jfr;\":\"𝔧\",\"jmath;\":\"ȷ\",\"Jopf;\":\"𝕁\",\"jopf;\":\"𝕛\",\"Jscr;\":\"𝒥\",\"jscr;\":\"𝒿\",\"Jsercy;\":\"Ј\",\"jsercy;\":\"ј\",\"Jukcy;\":\"Є\",\"jukcy;\":\"є\",\"Kappa;\":\"Κ\",\"kappa;\":\"κ\",\"kappav;\":\"ϰ\",\"Kcedil;\":\"Ķ\",\"kcedil;\":\"ķ\",\"Kcy;\":\"К\",\"kcy;\":\"к\",\"Kfr;\":\"𝔎\",\"kfr;\":\"𝔨\",\"kgreen;\":\"ĸ\",\"KHcy;\":\"Х\",\"khcy;\":\"х\",\"KJcy;\":\"Ќ\",\"kjcy;\":\"ќ\",\"Kopf;\":\"𝕂\",\"kopf;\":\"𝕜\",\"Kscr;\":\"𝒦\",\"kscr;\":\"𝓀\",\"lAarr;\":\"⇚\",\"Lacute;\":\"Ĺ\",\"lacute;\":\"ĺ\",\"laemptyv;\":\"⦴\",\"lagran;\":\"ℒ\",\"Lambda;\":\"Λ\",\"lambda;\":\"λ\",\"lang;\":\"⟨\",\"Lang;\":\"⟪\",\"langd;\":\"⦑\",\"langle;\":\"⟨\",\"lap;\":\"⪅\",\"Laplacetrf;\":\"ℒ\",\"laquo;\":\"«\",laquo:\"«\",\"larrb;\":\"⇤\",\"larrbfs;\":\"⤟\",\"larr;\":\"←\",\"Larr;\":\"↞\",\"lArr;\":\"⇐\",\"larrfs;\":\"⤝\",\"larrhk;\":\"↩\",\"larrlp;\":\"↫\",\"larrpl;\":\"⤹\",\"larrsim;\":\"⥳\",\"larrtl;\":\"↢\",\"latail;\":\"⤙\",\"lAtail;\":\"⤛\",\"lat;\":\"⪫\",\"late;\":\"⪭\",\"lates;\":\"⪭︀\",\"lbarr;\":\"⤌\",\"lBarr;\":\"⤎\",\"lbbrk;\":\"❲\",\"lbrace;\":\"{\",\"lbrack;\":\"[\",\"lbrke;\":\"⦋\",\"lbrksld;\":\"⦏\",\"lbrkslu;\":\"⦍\",\"Lcaron;\":\"Ľ\",\"lcaron;\":\"ľ\",\"Lcedil;\":\"Ļ\",\"lcedil;\":\"ļ\",\"lceil;\":\"⌈\",\"lcub;\":\"{\",\"Lcy;\":\"Л\",\"lcy;\":\"л\",\"ldca;\":\"⤶\",\"ldquo;\":\"“\",\"ldquor;\":\"„\",\"ldrdhar;\":\"⥧\",\"ldrushar;\":\"⥋\",\"ldsh;\":\"↲\",\"le;\":\"≤\",\"lE;\":\"≦\",\"LeftAngleBracket;\":\"⟨\",\"LeftArrowBar;\":\"⇤\",\"leftarrow;\":\"←\",\"LeftArrow;\":\"←\",\"Leftarrow;\":\"⇐\",\"LeftArrowRightArrow;\":\"⇆\",\"leftarrowtail;\":\"↢\",\"LeftCeiling;\":\"⌈\",\"LeftDoubleBracket;\":\"⟦\",\"LeftDownTeeVector;\":\"⥡\",\"LeftDownVectorBar;\":\"⥙\",\"LeftDownVector;\":\"⇃\",\"LeftFloor;\":\"⌊\",\"leftharpoondown;\":\"↽\",\"leftharpoonup;\":\"↼\",\"leftleftarrows;\":\"⇇\",\"leftrightarrow;\":\"↔\",\"LeftRightArrow;\":\"↔\",\"Leftrightarrow;\":\"⇔\",\"leftrightarrows;\":\"⇆\",\"leftrightharpoons;\":\"⇋\",\"leftrightsquigarrow;\":\"↭\",\"LeftRightVector;\":\"⥎\",\"LeftTeeArrow;\":\"↤\",\"LeftTee;\":\"⊣\",\"LeftTeeVector;\":\"⥚\",\"leftthreetimes;\":\"⋋\",\"LeftTriangleBar;\":\"⧏\",\"LeftTriangle;\":\"⊲\",\"LeftTriangleEqual;\":\"⊴\",\"LeftUpDownVector;\":\"⥑\",\"LeftUpTeeVector;\":\"⥠\",\"LeftUpVectorBar;\":\"⥘\",\"LeftUpVector;\":\"↿\",\"LeftVectorBar;\":\"⥒\",\"LeftVector;\":\"↼\",\"lEg;\":\"⪋\",\"leg;\":\"⋚\",\"leq;\":\"≤\",\"leqq;\":\"≦\",\"leqslant;\":\"⩽\",\"lescc;\":\"⪨\",\"les;\":\"⩽\",\"lesdot;\":\"⩿\",\"lesdoto;\":\"⪁\",\"lesdotor;\":\"⪃\",\"lesg;\":\"⋚︀\",\"lesges;\":\"⪓\",\"lessapprox;\":\"⪅\",\"lessdot;\":\"⋖\",\"lesseqgtr;\":\"⋚\",\"lesseqqgtr;\":\"⪋\",\"LessEqualGreater;\":\"⋚\",\"LessFullEqual;\":\"≦\",\"LessGreater;\":\"≶\",\"lessgtr;\":\"≶\",\"LessLess;\":\"⪡\",\"lesssim;\":\"≲\",\"LessSlantEqual;\":\"⩽\",\"LessTilde;\":\"≲\",\"lfisht;\":\"⥼\",\"lfloor;\":\"⌊\",\"Lfr;\":\"𝔏\",\"lfr;\":\"𝔩\",\"lg;\":\"≶\",\"lgE;\":\"⪑\",\"lHar;\":\"⥢\",\"lhard;\":\"↽\",\"lharu;\":\"↼\",\"lharul;\":\"⥪\",\"lhblk;\":\"▄\",\"LJcy;\":\"Љ\",\"ljcy;\":\"љ\",\"llarr;\":\"⇇\",\"ll;\":\"≪\",\"Ll;\":\"⋘\",\"llcorner;\":\"⌞\",\"Lleftarrow;\":\"⇚\",\"llhard;\":\"⥫\",\"lltri;\":\"◺\",\"Lmidot;\":\"Ŀ\",\"lmidot;\":\"ŀ\",\"lmoustache;\":\"⎰\",\"lmoust;\":\"⎰\",\"lnap;\":\"⪉\",\"lnapprox;\":\"⪉\",\"lne;\":\"⪇\",\"lnE;\":\"≨\",\"lneq;\":\"⪇\",\"lneqq;\":\"≨\",\"lnsim;\":\"⋦\",\"loang;\":\"⟬\",\"loarr;\":\"⇽\",\"lobrk;\":\"⟦\",\"longleftarrow;\":\"⟵\",\"LongLeftArrow;\":\"⟵\",\"Longleftarrow;\":\"⟸\",\"longleftrightarrow;\":\"⟷\",\"LongLeftRightArrow;\":\"⟷\",\"Longleftrightarrow;\":\"⟺\",\"longmapsto;\":\"⟼\",\"longrightarrow;\":\"⟶\",\"LongRightArrow;\":\"⟶\",\"Longrightarrow;\":\"⟹\",\"looparrowleft;\":\"↫\",\"looparrowright;\":\"↬\",\"lopar;\":\"⦅\",\"Lopf;\":\"𝕃\",\"lopf;\":\"𝕝\",\"loplus;\":\"⨭\",\"lotimes;\":\"⨴\",\"lowast;\":\"∗\",\"lowbar;\":\"_\",\"LowerLeftArrow;\":\"↙\",\"LowerRightArrow;\":\"↘\",\"loz;\":\"◊\",\"lozenge;\":\"◊\",\"lozf;\":\"⧫\",\"lpar;\":\"(\",\"lparlt;\":\"⦓\",\"lrarr;\":\"⇆\",\"lrcorner;\":\"⌟\",\"lrhar;\":\"⇋\",\"lrhard;\":\"⥭\",\"lrm;\":\"‎\",\"lrtri;\":\"⊿\",\"lsaquo;\":\"‹\",\"lscr;\":\"𝓁\",\"Lscr;\":\"ℒ\",\"lsh;\":\"↰\",\"Lsh;\":\"↰\",\"lsim;\":\"≲\",\"lsime;\":\"⪍\",\"lsimg;\":\"⪏\",\"lsqb;\":\"[\",\"lsquo;\":\"‘\",\"lsquor;\":\"‚\",\"Lstrok;\":\"Ł\",\"lstrok;\":\"ł\",\"ltcc;\":\"⪦\",\"ltcir;\":\"⩹\",\"lt;\":\"<\",lt:\"<\",\"LT;\":\"<\",LT:\"<\",\"Lt;\":\"≪\",\"ltdot;\":\"⋖\",\"lthree;\":\"⋋\",\"ltimes;\":\"⋉\",\"ltlarr;\":\"⥶\",\"ltquest;\":\"⩻\",\"ltri;\":\"◃\",\"ltrie;\":\"⊴\",\"ltrif;\":\"◂\",\"ltrPar;\":\"⦖\",\"lurdshar;\":\"⥊\",\"luruhar;\":\"⥦\",\"lvertneqq;\":\"≨︀\",\"lvnE;\":\"≨︀\",\"macr;\":\"¯\",macr:\"¯\",\"male;\":\"♂\",\"malt;\":\"✠\",\"maltese;\":\"✠\",\"Map;\":\"⤅\",\"map;\":\"↦\",\"mapsto;\":\"↦\",\"mapstodown;\":\"↧\",\"mapstoleft;\":\"↤\",\"mapstoup;\":\"↥\",\"marker;\":\"▮\",\"mcomma;\":\"⨩\",\"Mcy;\":\"М\",\"mcy;\":\"м\",\"mdash;\":\"—\",\"mDDot;\":\"∺\",\"measuredangle;\":\"∡\",\"MediumSpace;\":\" \",\"Mellintrf;\":\"ℳ\",\"Mfr;\":\"𝔐\",\"mfr;\":\"𝔪\",\"mho;\":\"℧\",\"micro;\":\"µ\",micro:\"µ\",\"midast;\":\"*\",\"midcir;\":\"⫰\",\"mid;\":\"∣\",\"middot;\":\"·\",middot:\"·\",\"minusb;\":\"⊟\",\"minus;\":\"−\",\"minusd;\":\"∸\",\"minusdu;\":\"⨪\",\"MinusPlus;\":\"∓\",\"mlcp;\":\"⫛\",\"mldr;\":\"…\",\"mnplus;\":\"∓\",\"models;\":\"⊧\",\"Mopf;\":\"𝕄\",\"mopf;\":\"𝕞\",\"mp;\":\"∓\",\"mscr;\":\"𝓂\",\"Mscr;\":\"ℳ\",\"mstpos;\":\"∾\",\"Mu;\":\"Μ\",\"mu;\":\"μ\",\"multimap;\":\"⊸\",\"mumap;\":\"⊸\",\"nabla;\":\"∇\",\"Nacute;\":\"Ń\",\"nacute;\":\"ń\",\"nang;\":\"∠⃒\",\"nap;\":\"≉\",\"napE;\":\"⩰̸\",\"napid;\":\"≋̸\",\"napos;\":\"ŉ\",\"napprox;\":\"≉\",\"natural;\":\"♮\",\"naturals;\":\"ℕ\",\"natur;\":\"♮\",\"nbsp;\":\" \",nbsp:\" \",\"nbump;\":\"≎̸\",\"nbumpe;\":\"≏̸\",\"ncap;\":\"⩃\",\"Ncaron;\":\"Ň\",\"ncaron;\":\"ň\",\"Ncedil;\":\"Ņ\",\"ncedil;\":\"ņ\",\"ncong;\":\"≇\",\"ncongdot;\":\"⩭̸\",\"ncup;\":\"⩂\",\"Ncy;\":\"Н\",\"ncy;\":\"н\",\"ndash;\":\"–\",\"nearhk;\":\"⤤\",\"nearr;\":\"↗\",\"neArr;\":\"⇗\",\"nearrow;\":\"↗\",\"ne;\":\"≠\",\"nedot;\":\"≐̸\",\"NegativeMediumSpace;\":\"​\",\"NegativeThickSpace;\":\"​\",\"NegativeThinSpace;\":\"​\",\"NegativeVeryThinSpace;\":\"​\",\"nequiv;\":\"≢\",\"nesear;\":\"⤨\",\"nesim;\":\"≂̸\",\"NestedGreaterGreater;\":\"≫\",\"NestedLessLess;\":\"≪\",\"NewLine;\":\"\\n\",\"nexist;\":\"∄\",\"nexists;\":\"∄\",\"Nfr;\":\"𝔑\",\"nfr;\":\"𝔫\",\"ngE;\":\"≧̸\",\"nge;\":\"≱\",\"ngeq;\":\"≱\",\"ngeqq;\":\"≧̸\",\"ngeqslant;\":\"⩾̸\",\"nges;\":\"⩾̸\",\"nGg;\":\"⋙̸\",\"ngsim;\":\"≵\",\"nGt;\":\"≫⃒\",\"ngt;\":\"≯\",\"ngtr;\":\"≯\",\"nGtv;\":\"≫̸\",\"nharr;\":\"↮\",\"nhArr;\":\"⇎\",\"nhpar;\":\"⫲\",\"ni;\":\"∋\",\"nis;\":\"⋼\",\"nisd;\":\"⋺\",\"niv;\":\"∋\",\"NJcy;\":\"Њ\",\"njcy;\":\"њ\",\"nlarr;\":\"↚\",\"nlArr;\":\"⇍\",\"nldr;\":\"‥\",\"nlE;\":\"≦̸\",\"nle;\":\"≰\",\"nleftarrow;\":\"↚\",\"nLeftarrow;\":\"⇍\",\"nleftrightarrow;\":\"↮\",\"nLeftrightarrow;\":\"⇎\",\"nleq;\":\"≰\",\"nleqq;\":\"≦̸\",\"nleqslant;\":\"⩽̸\",\"nles;\":\"⩽̸\",\"nless;\":\"≮\",\"nLl;\":\"⋘̸\",\"nlsim;\":\"≴\",\"nLt;\":\"≪⃒\",\"nlt;\":\"≮\",\"nltri;\":\"⋪\",\"nltrie;\":\"⋬\",\"nLtv;\":\"≪̸\",\"nmid;\":\"∤\",\"NoBreak;\":\"⁠\",\"NonBreakingSpace;\":\" \",\"nopf;\":\"𝕟\",\"Nopf;\":\"ℕ\",\"Not;\":\"⫬\",\"not;\":\"¬\",not:\"¬\",\"NotCongruent;\":\"≢\",\"NotCupCap;\":\"≭\",\"NotDoubleVerticalBar;\":\"∦\",\"NotElement;\":\"∉\",\"NotEqual;\":\"≠\",\"NotEqualTilde;\":\"≂̸\",\"NotExists;\":\"∄\",\"NotGreater;\":\"≯\",\"NotGreaterEqual;\":\"≱\",\"NotGreaterFullEqual;\":\"≧̸\",\"NotGreaterGreater;\":\"≫̸\",\"NotGreaterLess;\":\"≹\",\"NotGreaterSlantEqual;\":\"⩾̸\",\"NotGreaterTilde;\":\"≵\",\"NotHumpDownHump;\":\"≎̸\",\"NotHumpEqual;\":\"≏̸\",\"notin;\":\"∉\",\"notindot;\":\"⋵̸\",\"notinE;\":\"⋹̸\",\"notinva;\":\"∉\",\"notinvb;\":\"⋷\",\"notinvc;\":\"⋶\",\"NotLeftTriangleBar;\":\"⧏̸\",\"NotLeftTriangle;\":\"⋪\",\"NotLeftTriangleEqual;\":\"⋬\",\"NotLess;\":\"≮\",\"NotLessEqual;\":\"≰\",\"NotLessGreater;\":\"≸\",\"NotLessLess;\":\"≪̸\",\"NotLessSlantEqual;\":\"⩽̸\",\"NotLessTilde;\":\"≴\",\"NotNestedGreaterGreater;\":\"⪢̸\",\"NotNestedLessLess;\":\"⪡̸\",\"notni;\":\"∌\",\"notniva;\":\"∌\",\"notnivb;\":\"⋾\",\"notnivc;\":\"⋽\",\"NotPrecedes;\":\"⊀\",\"NotPrecedesEqual;\":\"⪯̸\",\"NotPrecedesSlantEqual;\":\"⋠\",\"NotReverseElement;\":\"∌\",\"NotRightTriangleBar;\":\"⧐̸\",\"NotRightTriangle;\":\"⋫\",\"NotRightTriangleEqual;\":\"⋭\",\"NotSquareSubset;\":\"⊏̸\",\"NotSquareSubsetEqual;\":\"⋢\",\"NotSquareSuperset;\":\"⊐̸\",\"NotSquareSupersetEqual;\":\"⋣\",\"NotSubset;\":\"⊂⃒\",\"NotSubsetEqual;\":\"⊈\",\"NotSucceeds;\":\"⊁\",\"NotSucceedsEqual;\":\"⪰̸\",\"NotSucceedsSlantEqual;\":\"⋡\",\"NotSucceedsTilde;\":\"≿̸\",\"NotSuperset;\":\"⊃⃒\",\"NotSupersetEqual;\":\"⊉\",\"NotTilde;\":\"≁\",\"NotTildeEqual;\":\"≄\",\"NotTildeFullEqual;\":\"≇\",\"NotTildeTilde;\":\"≉\",\"NotVerticalBar;\":\"∤\",\"nparallel;\":\"∦\",\"npar;\":\"∦\",\"nparsl;\":\"⫽⃥\",\"npart;\":\"∂̸\",\"npolint;\":\"⨔\",\"npr;\":\"⊀\",\"nprcue;\":\"⋠\",\"nprec;\":\"⊀\",\"npreceq;\":\"⪯̸\",\"npre;\":\"⪯̸\",\"nrarrc;\":\"⤳̸\",\"nrarr;\":\"↛\",\"nrArr;\":\"⇏\",\"nrarrw;\":\"↝̸\",\"nrightarrow;\":\"↛\",\"nRightarrow;\":\"⇏\",\"nrtri;\":\"⋫\",\"nrtrie;\":\"⋭\",\"nsc;\":\"⊁\",\"nsccue;\":\"⋡\",\"nsce;\":\"⪰̸\",\"Nscr;\":\"𝒩\",\"nscr;\":\"𝓃\",\"nshortmid;\":\"∤\",\"nshortparallel;\":\"∦\",\"nsim;\":\"≁\",\"nsime;\":\"≄\",\"nsimeq;\":\"≄\",\"nsmid;\":\"∤\",\"nspar;\":\"∦\",\"nsqsube;\":\"⋢\",\"nsqsupe;\":\"⋣\",\"nsub;\":\"⊄\",\"nsubE;\":\"⫅̸\",\"nsube;\":\"⊈\",\"nsubset;\":\"⊂⃒\",\"nsubseteq;\":\"⊈\",\"nsubseteqq;\":\"⫅̸\",\"nsucc;\":\"⊁\",\"nsucceq;\":\"⪰̸\",\"nsup;\":\"⊅\",\"nsupE;\":\"⫆̸\",\"nsupe;\":\"⊉\",\"nsupset;\":\"⊃⃒\",\"nsupseteq;\":\"⊉\",\"nsupseteqq;\":\"⫆̸\",\"ntgl;\":\"≹\",\"Ntilde;\":\"Ñ\",Ntilde:\"Ñ\",\"ntilde;\":\"ñ\",ntilde:\"ñ\",\"ntlg;\":\"≸\",\"ntriangleleft;\":\"⋪\",\"ntrianglelefteq;\":\"⋬\",\"ntriangleright;\":\"⋫\",\"ntrianglerighteq;\":\"⋭\",\"Nu;\":\"Ν\",\"nu;\":\"ν\",\"num;\":\"#\",\"numero;\":\"№\",\"numsp;\":\" \",\"nvap;\":\"≍⃒\",\"nvdash;\":\"⊬\",\"nvDash;\":\"⊭\",\"nVdash;\":\"⊮\",\"nVDash;\":\"⊯\",\"nvge;\":\"≥⃒\",\"nvgt;\":\">⃒\",\"nvHarr;\":\"⤄\",\"nvinfin;\":\"⧞\",\"nvlArr;\":\"⤂\",\"nvle;\":\"≤⃒\",\"nvlt;\":\"<⃒\",\"nvltrie;\":\"⊴⃒\",\"nvrArr;\":\"⤃\",\"nvrtrie;\":\"⊵⃒\",\"nvsim;\":\"∼⃒\",\"nwarhk;\":\"⤣\",\"nwarr;\":\"↖\",\"nwArr;\":\"⇖\",\"nwarrow;\":\"↖\",\"nwnear;\":\"⤧\",\"Oacute;\":\"Ó\",Oacute:\"Ó\",\"oacute;\":\"ó\",oacute:\"ó\",\"oast;\":\"⊛\",\"Ocirc;\":\"Ô\",Ocirc:\"Ô\",\"ocirc;\":\"ô\",ocirc:\"ô\",\"ocir;\":\"⊚\",\"Ocy;\":\"О\",\"ocy;\":\"о\",\"odash;\":\"⊝\",\"Odblac;\":\"Ő\",\"odblac;\":\"ő\",\"odiv;\":\"⨸\",\"odot;\":\"⊙\",\"odsold;\":\"⦼\",\"OElig;\":\"Œ\",\"oelig;\":\"œ\",\"ofcir;\":\"⦿\",\"Ofr;\":\"𝔒\",\"ofr;\":\"𝔬\",\"ogon;\":\"˛\",\"Ograve;\":\"Ò\",Ograve:\"Ò\",\"ograve;\":\"ò\",ograve:\"ò\",\"ogt;\":\"⧁\",\"ohbar;\":\"⦵\",\"ohm;\":\"Ω\",\"oint;\":\"∮\",\"olarr;\":\"↺\",\"olcir;\":\"⦾\",\"olcross;\":\"⦻\",\"oline;\":\"‾\",\"olt;\":\"⧀\",\"Omacr;\":\"Ō\",\"omacr;\":\"ō\",\"Omega;\":\"Ω\",\"omega;\":\"ω\",\"Omicron;\":\"Ο\",\"omicron;\":\"ο\",\"omid;\":\"⦶\",\"ominus;\":\"⊖\",\"Oopf;\":\"𝕆\",\"oopf;\":\"𝕠\",\"opar;\":\"⦷\",\"OpenCurlyDoubleQuote;\":\"“\",\"OpenCurlyQuote;\":\"‘\",\"operp;\":\"⦹\",\"oplus;\":\"⊕\",\"orarr;\":\"↻\",\"Or;\":\"⩔\",\"or;\":\"∨\",\"ord;\":\"⩝\",\"order;\":\"ℴ\",\"orderof;\":\"ℴ\",\"ordf;\":\"ª\",ordf:\"ª\",\"ordm;\":\"º\",ordm:\"º\",\"origof;\":\"⊶\",\"oror;\":\"⩖\",\"orslope;\":\"⩗\",\"orv;\":\"⩛\",\"oS;\":\"Ⓢ\",\"Oscr;\":\"𝒪\",\"oscr;\":\"ℴ\",\"Oslash;\":\"Ø\",Oslash:\"Ø\",\"oslash;\":\"ø\",oslash:\"ø\",\"osol;\":\"⊘\",\"Otilde;\":\"Õ\",Otilde:\"Õ\",\"otilde;\":\"õ\",otilde:\"õ\",\"otimesas;\":\"⨶\",\"Otimes;\":\"⨷\",\"otimes;\":\"⊗\",\"Ouml;\":\"Ö\",Ouml:\"Ö\",\"ouml;\":\"ö\",ouml:\"ö\",\"ovbar;\":\"⌽\",\"OverBar;\":\"‾\",\"OverBrace;\":\"⏞\",\"OverBracket;\":\"⎴\",\"OverParenthesis;\":\"⏜\",\"para;\":\"¶\",para:\"¶\",\"parallel;\":\"∥\",\"par;\":\"∥\",\"parsim;\":\"⫳\",\"parsl;\":\"⫽\",\"part;\":\"∂\",\"PartialD;\":\"∂\",\"Pcy;\":\"П\",\"pcy;\":\"п\",\"percnt;\":\"%\",\"period;\":\".\",\"permil;\":\"‰\",\"perp;\":\"⊥\",\"pertenk;\":\"‱\",\"Pfr;\":\"𝔓\",\"pfr;\":\"𝔭\",\"Phi;\":\"Φ\",\"phi;\":\"φ\",\"phiv;\":\"ϕ\",\"phmmat;\":\"ℳ\",\"phone;\":\"☎\",\"Pi;\":\"Π\",\"pi;\":\"π\",\"pitchfork;\":\"⋔\",\"piv;\":\"ϖ\",\"planck;\":\"ℏ\",\"planckh;\":\"ℎ\",\"plankv;\":\"ℏ\",\"plusacir;\":\"⨣\",\"plusb;\":\"⊞\",\"pluscir;\":\"⨢\",\"plus;\":\"+\",\"plusdo;\":\"∔\",\"plusdu;\":\"⨥\",\"pluse;\":\"⩲\",\"PlusMinus;\":\"±\",\"plusmn;\":\"±\",plusmn:\"±\",\"plussim;\":\"⨦\",\"plustwo;\":\"⨧\",\"pm;\":\"±\",\"Poincareplane;\":\"ℌ\",\"pointint;\":\"⨕\",\"popf;\":\"𝕡\",\"Popf;\":\"ℙ\",\"pound;\":\"£\",pound:\"£\",\"prap;\":\"⪷\",\"Pr;\":\"⪻\",\"pr;\":\"≺\",\"prcue;\":\"≼\",\"precapprox;\":\"⪷\",\"prec;\":\"≺\",\"preccurlyeq;\":\"≼\",\"Precedes;\":\"≺\",\"PrecedesEqual;\":\"⪯\",\"PrecedesSlantEqual;\":\"≼\",\"PrecedesTilde;\":\"≾\",\"preceq;\":\"⪯\",\"precnapprox;\":\"⪹\",\"precneqq;\":\"⪵\",\"precnsim;\":\"⋨\",\"pre;\":\"⪯\",\"prE;\":\"⪳\",\"precsim;\":\"≾\",\"prime;\":\"′\",\"Prime;\":\"″\",\"primes;\":\"ℙ\",\"prnap;\":\"⪹\",\"prnE;\":\"⪵\",\"prnsim;\":\"⋨\",\"prod;\":\"∏\",\"Product;\":\"∏\",\"profalar;\":\"⌮\",\"profline;\":\"⌒\",\"profsurf;\":\"⌓\",\"prop;\":\"∝\",\"Proportional;\":\"∝\",\"Proportion;\":\"∷\",\"propto;\":\"∝\",\"prsim;\":\"≾\",\"prurel;\":\"⊰\",\"Pscr;\":\"𝒫\",\"pscr;\":\"𝓅\",\"Psi;\":\"Ψ\",\"psi;\":\"ψ\",\"puncsp;\":\" \",\"Qfr;\":\"𝔔\",\"qfr;\":\"𝔮\",\"qint;\":\"⨌\",\"qopf;\":\"𝕢\",\"Qopf;\":\"ℚ\",\"qprime;\":\"⁗\",\"Qscr;\":\"𝒬\",\"qscr;\":\"𝓆\",\"quaternions;\":\"ℍ\",\"quatint;\":\"⨖\",\"quest;\":\"?\",\"questeq;\":\"≟\",\"quot;\":'\"',quot:'\"',\"QUOT;\":'\"',QUOT:'\"',\"rAarr;\":\"⇛\",\"race;\":\"∽̱\",\"Racute;\":\"Ŕ\",\"racute;\":\"ŕ\",\"radic;\":\"√\",\"raemptyv;\":\"⦳\",\"rang;\":\"⟩\",\"Rang;\":\"⟫\",\"rangd;\":\"⦒\",\"range;\":\"⦥\",\"rangle;\":\"⟩\",\"raquo;\":\"»\",raquo:\"»\",\"rarrap;\":\"⥵\",\"rarrb;\":\"⇥\",\"rarrbfs;\":\"⤠\",\"rarrc;\":\"⤳\",\"rarr;\":\"→\",\"Rarr;\":\"↠\",\"rArr;\":\"⇒\",\"rarrfs;\":\"⤞\",\"rarrhk;\":\"↪\",\"rarrlp;\":\"↬\",\"rarrpl;\":\"⥅\",\"rarrsim;\":\"⥴\",\"Rarrtl;\":\"⤖\",\"rarrtl;\":\"↣\",\"rarrw;\":\"↝\",\"ratail;\":\"⤚\",\"rAtail;\":\"⤜\",\"ratio;\":\"∶\",\"rationals;\":\"ℚ\",\"rbarr;\":\"⤍\",\"rBarr;\":\"⤏\",\"RBarr;\":\"⤐\",\"rbbrk;\":\"❳\",\"rbrace;\":\"}\",\"rbrack;\":\"]\",\"rbrke;\":\"⦌\",\"rbrksld;\":\"⦎\",\"rbrkslu;\":\"⦐\",\"Rcaron;\":\"Ř\",\"rcaron;\":\"ř\",\"Rcedil;\":\"Ŗ\",\"rcedil;\":\"ŗ\",\"rceil;\":\"⌉\",\"rcub;\":\"}\",\"Rcy;\":\"Р\",\"rcy;\":\"р\",\"rdca;\":\"⤷\",\"rdldhar;\":\"⥩\",\"rdquo;\":\"”\",\"rdquor;\":\"”\",\"rdsh;\":\"↳\",\"real;\":\"ℜ\",\"realine;\":\"ℛ\",\"realpart;\":\"ℜ\",\"reals;\":\"ℝ\",\"Re;\":\"ℜ\",\"rect;\":\"▭\",\"reg;\":\"®\",reg:\"®\",\"REG;\":\"®\",REG:\"®\",\"ReverseElement;\":\"∋\",\"ReverseEquilibrium;\":\"⇋\",\"ReverseUpEquilibrium;\":\"⥯\",\"rfisht;\":\"⥽\",\"rfloor;\":\"⌋\",\"rfr;\":\"𝔯\",\"Rfr;\":\"ℜ\",\"rHar;\":\"⥤\",\"rhard;\":\"⇁\",\"rharu;\":\"⇀\",\"rharul;\":\"⥬\",\"Rho;\":\"Ρ\",\"rho;\":\"ρ\",\"rhov;\":\"ϱ\",\"RightAngleBracket;\":\"⟩\",\"RightArrowBar;\":\"⇥\",\"rightarrow;\":\"→\",\"RightArrow;\":\"→\",\"Rightarrow;\":\"⇒\",\"RightArrowLeftArrow;\":\"⇄\",\"rightarrowtail;\":\"↣\",\"RightCeiling;\":\"⌉\",\"RightDoubleBracket;\":\"⟧\",\"RightDownTeeVector;\":\"⥝\",\"RightDownVectorBar;\":\"⥕\",\"RightDownVector;\":\"⇂\",\"RightFloor;\":\"⌋\",\"rightharpoondown;\":\"⇁\",\"rightharpoonup;\":\"⇀\",\"rightleftarrows;\":\"⇄\",\"rightleftharpoons;\":\"⇌\",\"rightrightarrows;\":\"⇉\",\"rightsquigarrow;\":\"↝\",\"RightTeeArrow;\":\"↦\",\"RightTee;\":\"⊢\",\"RightTeeVector;\":\"⥛\",\"rightthreetimes;\":\"⋌\",\"RightTriangleBar;\":\"⧐\",\"RightTriangle;\":\"⊳\",\"RightTriangleEqual;\":\"⊵\",\"RightUpDownVector;\":\"⥏\",\"RightUpTeeVector;\":\"⥜\",\"RightUpVectorBar;\":\"⥔\",\"RightUpVector;\":\"↾\",\"RightVectorBar;\":\"⥓\",\"RightVector;\":\"⇀\",\"ring;\":\"˚\",\"risingdotseq;\":\"≓\",\"rlarr;\":\"⇄\",\"rlhar;\":\"⇌\",\"rlm;\":\"‏\",\"rmoustache;\":\"⎱\",\"rmoust;\":\"⎱\",\"rnmid;\":\"⫮\",\"roang;\":\"⟭\",\"roarr;\":\"⇾\",\"robrk;\":\"⟧\",\"ropar;\":\"⦆\",\"ropf;\":\"𝕣\",\"Ropf;\":\"ℝ\",\"roplus;\":\"⨮\",\"rotimes;\":\"⨵\",\"RoundImplies;\":\"⥰\",\"rpar;\":\")\",\"rpargt;\":\"⦔\",\"rppolint;\":\"⨒\",\"rrarr;\":\"⇉\",\"Rrightarrow;\":\"⇛\",\"rsaquo;\":\"›\",\"rscr;\":\"𝓇\",\"Rscr;\":\"ℛ\",\"rsh;\":\"↱\",\"Rsh;\":\"↱\",\"rsqb;\":\"]\",\"rsquo;\":\"’\",\"rsquor;\":\"’\",\"rthree;\":\"⋌\",\"rtimes;\":\"⋊\",\"rtri;\":\"▹\",\"rtrie;\":\"⊵\",\"rtrif;\":\"▸\",\"rtriltri;\":\"⧎\",\"RuleDelayed;\":\"⧴\",\"ruluhar;\":\"⥨\",\"rx;\":\"℞\",\"Sacute;\":\"Ś\",\"sacute;\":\"ś\",\"sbquo;\":\"‚\",\"scap;\":\"⪸\",\"Scaron;\":\"Š\",\"scaron;\":\"š\",\"Sc;\":\"⪼\",\"sc;\":\"≻\",\"sccue;\":\"≽\",\"sce;\":\"⪰\",\"scE;\":\"⪴\",\"Scedil;\":\"Ş\",\"scedil;\":\"ş\",\"Scirc;\":\"Ŝ\",\"scirc;\":\"ŝ\",\"scnap;\":\"⪺\",\"scnE;\":\"⪶\",\"scnsim;\":\"⋩\",\"scpolint;\":\"⨓\",\"scsim;\":\"≿\",\"Scy;\":\"С\",\"scy;\":\"с\",\"sdotb;\":\"⊡\",\"sdot;\":\"⋅\",\"sdote;\":\"⩦\",\"searhk;\":\"⤥\",\"searr;\":\"↘\",\"seArr;\":\"⇘\",\"searrow;\":\"↘\",\"sect;\":\"§\",sect:\"§\",\"semi;\":\";\",\"seswar;\":\"⤩\",\"setminus;\":\"∖\",\"setmn;\":\"∖\",\"sext;\":\"✶\",\"Sfr;\":\"𝔖\",\"sfr;\":\"𝔰\",\"sfrown;\":\"⌢\",\"sharp;\":\"♯\",\"SHCHcy;\":\"Щ\",\"shchcy;\":\"щ\",\"SHcy;\":\"Ш\",\"shcy;\":\"ш\",\"ShortDownArrow;\":\"↓\",\"ShortLeftArrow;\":\"←\",\"shortmid;\":\"∣\",\"shortparallel;\":\"∥\",\"ShortRightArrow;\":\"→\",\"ShortUpArrow;\":\"↑\",\"shy;\":\"­\",shy:\"­\",\"Sigma;\":\"Σ\",\"sigma;\":\"σ\",\"sigmaf;\":\"ς\",\"sigmav;\":\"ς\",\"sim;\":\"∼\",\"simdot;\":\"⩪\",\"sime;\":\"≃\",\"simeq;\":\"≃\",\"simg;\":\"⪞\",\"simgE;\":\"⪠\",\"siml;\":\"⪝\",\"simlE;\":\"⪟\",\"simne;\":\"≆\",\"simplus;\":\"⨤\",\"simrarr;\":\"⥲\",\"slarr;\":\"←\",\"SmallCircle;\":\"∘\",\"smallsetminus;\":\"∖\",\"smashp;\":\"⨳\",\"smeparsl;\":\"⧤\",\"smid;\":\"∣\",\"smile;\":\"⌣\",\"smt;\":\"⪪\",\"smte;\":\"⪬\",\"smtes;\":\"⪬︀\",\"SOFTcy;\":\"Ь\",\"softcy;\":\"ь\",\"solbar;\":\"⌿\",\"solb;\":\"⧄\",\"sol;\":\"/\",\"Sopf;\":\"𝕊\",\"sopf;\":\"𝕤\",\"spades;\":\"♠\",\"spadesuit;\":\"♠\",\"spar;\":\"∥\",\"sqcap;\":\"⊓\",\"sqcaps;\":\"⊓︀\",\"sqcup;\":\"⊔\",\"sqcups;\":\"⊔︀\",\"Sqrt;\":\"√\",\"sqsub;\":\"⊏\",\"sqsube;\":\"⊑\",\"sqsubset;\":\"⊏\",\"sqsubseteq;\":\"⊑\",\"sqsup;\":\"⊐\",\"sqsupe;\":\"⊒\",\"sqsupset;\":\"⊐\",\"sqsupseteq;\":\"⊒\",\"square;\":\"□\",\"Square;\":\"□\",\"SquareIntersection;\":\"⊓\",\"SquareSubset;\":\"⊏\",\"SquareSubsetEqual;\":\"⊑\",\"SquareSuperset;\":\"⊐\",\"SquareSupersetEqual;\":\"⊒\",\"SquareUnion;\":\"⊔\",\"squarf;\":\"▪\",\"squ;\":\"□\",\"squf;\":\"▪\",\"srarr;\":\"→\",\"Sscr;\":\"𝒮\",\"sscr;\":\"𝓈\",\"ssetmn;\":\"∖\",\"ssmile;\":\"⌣\",\"sstarf;\":\"⋆\",\"Star;\":\"⋆\",\"star;\":\"☆\",\"starf;\":\"★\",\"straightepsilon;\":\"ϵ\",\"straightphi;\":\"ϕ\",\"strns;\":\"¯\",\"sub;\":\"⊂\",\"Sub;\":\"⋐\",\"subdot;\":\"⪽\",\"subE;\":\"⫅\",\"sube;\":\"⊆\",\"subedot;\":\"⫃\",\"submult;\":\"⫁\",\"subnE;\":\"⫋\",\"subne;\":\"⊊\",\"subplus;\":\"⪿\",\"subrarr;\":\"⥹\",\"subset;\":\"⊂\",\"Subset;\":\"⋐\",\"subseteq;\":\"⊆\",\"subseteqq;\":\"⫅\",\"SubsetEqual;\":\"⊆\",\"subsetneq;\":\"⊊\",\"subsetneqq;\":\"⫋\",\"subsim;\":\"⫇\",\"subsub;\":\"⫕\",\"subsup;\":\"⫓\",\"succapprox;\":\"⪸\",\"succ;\":\"≻\",\"succcurlyeq;\":\"≽\",\"Succeeds;\":\"≻\",\"SucceedsEqual;\":\"⪰\",\"SucceedsSlantEqual;\":\"≽\",\"SucceedsTilde;\":\"≿\",\"succeq;\":\"⪰\",\"succnapprox;\":\"⪺\",\"succneqq;\":\"⪶\",\"succnsim;\":\"⋩\",\"succsim;\":\"≿\",\"SuchThat;\":\"∋\",\"sum;\":\"∑\",\"Sum;\":\"∑\",\"sung;\":\"♪\",\"sup1;\":\"¹\",sup1:\"¹\",\"sup2;\":\"²\",sup2:\"²\",\"sup3;\":\"³\",sup3:\"³\",\"sup;\":\"⊃\",\"Sup;\":\"⋑\",\"supdot;\":\"⪾\",\"supdsub;\":\"⫘\",\"supE;\":\"⫆\",\"supe;\":\"⊇\",\"supedot;\":\"⫄\",\"Superset;\":\"⊃\",\"SupersetEqual;\":\"⊇\",\"suphsol;\":\"⟉\",\"suphsub;\":\"⫗\",\"suplarr;\":\"⥻\",\"supmult;\":\"⫂\",\"supnE;\":\"⫌\",\"supne;\":\"⊋\",\"supplus;\":\"⫀\",\"supset;\":\"⊃\",\"Supset;\":\"⋑\",\"supseteq;\":\"⊇\",\"supseteqq;\":\"⫆\",\"supsetneq;\":\"⊋\",\"supsetneqq;\":\"⫌\",\"supsim;\":\"⫈\",\"supsub;\":\"⫔\",\"supsup;\":\"⫖\",\"swarhk;\":\"⤦\",\"swarr;\":\"↙\",\"swArr;\":\"⇙\",\"swarrow;\":\"↙\",\"swnwar;\":\"⤪\",\"szlig;\":\"ß\",szlig:\"ß\",\"Tab;\":\"\t\",\"target;\":\"⌖\",\"Tau;\":\"Τ\",\"tau;\":\"τ\",\"tbrk;\":\"⎴\",\"Tcaron;\":\"Ť\",\"tcaron;\":\"ť\",\"Tcedil;\":\"Ţ\",\"tcedil;\":\"ţ\",\"Tcy;\":\"Т\",\"tcy;\":\"т\",\"tdot;\":\"⃛\",\"telrec;\":\"⌕\",\"Tfr;\":\"𝔗\",\"tfr;\":\"𝔱\",\"there4;\":\"∴\",\"therefore;\":\"∴\",\"Therefore;\":\"∴\",\"Theta;\":\"Θ\",\"theta;\":\"θ\",\"thetasym;\":\"ϑ\",\"thetav;\":\"ϑ\",\"thickapprox;\":\"≈\",\"thicksim;\":\"∼\",\"ThickSpace;\":\"  \",\"ThinSpace;\":\" \",\"thinsp;\":\" \",\"thkap;\":\"≈\",\"thksim;\":\"∼\",\"THORN;\":\"Þ\",THORN:\"Þ\",\"thorn;\":\"þ\",thorn:\"þ\",\"tilde;\":\"˜\",\"Tilde;\":\"∼\",\"TildeEqual;\":\"≃\",\"TildeFullEqual;\":\"≅\",\"TildeTilde;\":\"≈\",\"timesbar;\":\"⨱\",\"timesb;\":\"⊠\",\"times;\":\"×\",times:\"×\",\"timesd;\":\"⨰\",\"tint;\":\"∭\",\"toea;\":\"⤨\",\"topbot;\":\"⌶\",\"topcir;\":\"⫱\",\"top;\":\"⊤\",\"Topf;\":\"𝕋\",\"topf;\":\"𝕥\",\"topfork;\":\"⫚\",\"tosa;\":\"⤩\",\"tprime;\":\"‴\",\"trade;\":\"™\",\"TRADE;\":\"™\",\"triangle;\":\"▵\",\"triangledown;\":\"▿\",\"triangleleft;\":\"◃\",\"trianglelefteq;\":\"⊴\",\"triangleq;\":\"≜\",\"triangleright;\":\"▹\",\"trianglerighteq;\":\"⊵\",\"tridot;\":\"◬\",\"trie;\":\"≜\",\"triminus;\":\"⨺\",\"TripleDot;\":\"⃛\",\"triplus;\":\"⨹\",\"trisb;\":\"⧍\",\"tritime;\":\"⨻\",\"trpezium;\":\"⏢\",\"Tscr;\":\"𝒯\",\"tscr;\":\"𝓉\",\"TScy;\":\"Ц\",\"tscy;\":\"ц\",\"TSHcy;\":\"Ћ\",\"tshcy;\":\"ћ\",\"Tstrok;\":\"Ŧ\",\"tstrok;\":\"ŧ\",\"twixt;\":\"≬\",\"twoheadleftarrow;\":\"↞\",\"twoheadrightarrow;\":\"↠\",\"Uacute;\":\"Ú\",Uacute:\"Ú\",\"uacute;\":\"ú\",uacute:\"ú\",\"uarr;\":\"↑\",\"Uarr;\":\"↟\",\"uArr;\":\"⇑\",\"Uarrocir;\":\"⥉\",\"Ubrcy;\":\"Ў\",\"ubrcy;\":\"ў\",\"Ubreve;\":\"Ŭ\",\"ubreve;\":\"ŭ\",\"Ucirc;\":\"Û\",Ucirc:\"Û\",\"ucirc;\":\"û\",ucirc:\"û\",\"Ucy;\":\"У\",\"ucy;\":\"у\",\"udarr;\":\"⇅\",\"Udblac;\":\"Ű\",\"udblac;\":\"ű\",\"udhar;\":\"⥮\",\"ufisht;\":\"⥾\",\"Ufr;\":\"𝔘\",\"ufr;\":\"𝔲\",\"Ugrave;\":\"Ù\",Ugrave:\"Ù\",\"ugrave;\":\"ù\",ugrave:\"ù\",\"uHar;\":\"⥣\",\"uharl;\":\"↿\",\"uharr;\":\"↾\",\"uhblk;\":\"▀\",\"ulcorn;\":\"⌜\",\"ulcorner;\":\"⌜\",\"ulcrop;\":\"⌏\",\"ultri;\":\"◸\",\"Umacr;\":\"Ū\",\"umacr;\":\"ū\",\"uml;\":\"¨\",uml:\"¨\",\"UnderBar;\":\"_\",\"UnderBrace;\":\"⏟\",\"UnderBracket;\":\"⎵\",\"UnderParenthesis;\":\"⏝\",\"Union;\":\"⋃\",\"UnionPlus;\":\"⊎\",\"Uogon;\":\"Ų\",\"uogon;\":\"ų\",\"Uopf;\":\"𝕌\",\"uopf;\":\"𝕦\",\"UpArrowBar;\":\"⤒\",\"uparrow;\":\"↑\",\"UpArrow;\":\"↑\",\"Uparrow;\":\"⇑\",\"UpArrowDownArrow;\":\"⇅\",\"updownarrow;\":\"↕\",\"UpDownArrow;\":\"↕\",\"Updownarrow;\":\"⇕\",\"UpEquilibrium;\":\"⥮\",\"upharpoonleft;\":\"↿\",\"upharpoonright;\":\"↾\",\"uplus;\":\"⊎\",\"UpperLeftArrow;\":\"↖\",\"UpperRightArrow;\":\"↗\",\"upsi;\":\"υ\",\"Upsi;\":\"ϒ\",\"upsih;\":\"ϒ\",\"Upsilon;\":\"Υ\",\"upsilon;\":\"υ\",\"UpTeeArrow;\":\"↥\",\"UpTee;\":\"⊥\",\"upuparrows;\":\"⇈\",\"urcorn;\":\"⌝\",\"urcorner;\":\"⌝\",\"urcrop;\":\"⌎\",\"Uring;\":\"Ů\",\"uring;\":\"ů\",\"urtri;\":\"◹\",\"Uscr;\":\"𝒰\",\"uscr;\":\"𝓊\",\"utdot;\":\"⋰\",\"Utilde;\":\"Ũ\",\"utilde;\":\"ũ\",\"utri;\":\"▵\",\"utrif;\":\"▴\",\"uuarr;\":\"⇈\",\"Uuml;\":\"Ü\",Uuml:\"Ü\",\"uuml;\":\"ü\",uuml:\"ü\",\"uwangle;\":\"⦧\",\"vangrt;\":\"⦜\",\"varepsilon;\":\"ϵ\",\"varkappa;\":\"ϰ\",\"varnothing;\":\"∅\",\"varphi;\":\"ϕ\",\"varpi;\":\"ϖ\",\"varpropto;\":\"∝\",\"varr;\":\"↕\",\"vArr;\":\"⇕\",\"varrho;\":\"ϱ\",\"varsigma;\":\"ς\",\"varsubsetneq;\":\"⊊︀\",\"varsubsetneqq;\":\"⫋︀\",\"varsupsetneq;\":\"⊋︀\",\"varsupsetneqq;\":\"⫌︀\",\"vartheta;\":\"ϑ\",\"vartriangleleft;\":\"⊲\",\"vartriangleright;\":\"⊳\",\"vBar;\":\"⫨\",\"Vbar;\":\"⫫\",\"vBarv;\":\"⫩\",\"Vcy;\":\"В\",\"vcy;\":\"в\",\"vdash;\":\"⊢\",\"vDash;\":\"⊨\",\"Vdash;\":\"⊩\",\"VDash;\":\"⊫\",\"Vdashl;\":\"⫦\",\"veebar;\":\"⊻\",\"vee;\":\"∨\",\"Vee;\":\"⋁\",\"veeeq;\":\"≚\",\"vellip;\":\"⋮\",\"verbar;\":\"|\",\"Verbar;\":\"‖\",\"vert;\":\"|\",\"Vert;\":\"‖\",\"VerticalBar;\":\"∣\",\"VerticalLine;\":\"|\",\"VerticalSeparator;\":\"❘\",\"VerticalTilde;\":\"≀\",\"VeryThinSpace;\":\" \",\"Vfr;\":\"𝔙\",\"vfr;\":\"𝔳\",\"vltri;\":\"⊲\",\"vnsub;\":\"⊂⃒\",\"vnsup;\":\"⊃⃒\",\"Vopf;\":\"𝕍\",\"vopf;\":\"𝕧\",\"vprop;\":\"∝\",\"vrtri;\":\"⊳\",\"Vscr;\":\"𝒱\",\"vscr;\":\"𝓋\",\"vsubnE;\":\"⫋︀\",\"vsubne;\":\"⊊︀\",\"vsupnE;\":\"⫌︀\",\"vsupne;\":\"⊋︀\",\"Vvdash;\":\"⊪\",\"vzigzag;\":\"⦚\",\"Wcirc;\":\"Ŵ\",\"wcirc;\":\"ŵ\",\"wedbar;\":\"⩟\",\"wedge;\":\"∧\",\"Wedge;\":\"⋀\",\"wedgeq;\":\"≙\",\"weierp;\":\"℘\",\"Wfr;\":\"𝔚\",\"wfr;\":\"𝔴\",\"Wopf;\":\"𝕎\",\"wopf;\":\"𝕨\",\"wp;\":\"℘\",\"wr;\":\"≀\",\"wreath;\":\"≀\",\"Wscr;\":\"𝒲\",\"wscr;\":\"𝓌\",\"xcap;\":\"⋂\",\"xcirc;\":\"◯\",\"xcup;\":\"⋃\",\"xdtri;\":\"▽\",\"Xfr;\":\"𝔛\",\"xfr;\":\"𝔵\",\"xharr;\":\"⟷\",\"xhArr;\":\"⟺\",\"Xi;\":\"Ξ\",\"xi;\":\"ξ\",\"xlarr;\":\"⟵\",\"xlArr;\":\"⟸\",\"xmap;\":\"⟼\",\"xnis;\":\"⋻\",\"xodot;\":\"⨀\",\"Xopf;\":\"𝕏\",\"xopf;\":\"𝕩\",\"xoplus;\":\"⨁\",\"xotime;\":\"⨂\",\"xrarr;\":\"⟶\",\"xrArr;\":\"⟹\",\"Xscr;\":\"𝒳\",\"xscr;\":\"𝓍\",\"xsqcup;\":\"⨆\",\"xuplus;\":\"⨄\",\"xutri;\":\"△\",\"xvee;\":\"⋁\",\"xwedge;\":\"⋀\",\"Yacute;\":\"Ý\",Yacute:\"Ý\",\"yacute;\":\"ý\",yacute:\"ý\",\"YAcy;\":\"Я\",\"yacy;\":\"я\",\"Ycirc;\":\"Ŷ\",\"ycirc;\":\"ŷ\",\"Ycy;\":\"Ы\",\"ycy;\":\"ы\",\"yen;\":\"¥\",yen:\"¥\",\"Yfr;\":\"𝔜\",\"yfr;\":\"𝔶\",\"YIcy;\":\"Ї\",\"yicy;\":\"ї\",\"Yopf;\":\"𝕐\",\"yopf;\":\"𝕪\",\"Yscr;\":\"𝒴\",\"yscr;\":\"𝓎\",\"YUcy;\":\"Ю\",\"yucy;\":\"ю\",\"yuml;\":\"ÿ\",yuml:\"ÿ\",\"Yuml;\":\"Ÿ\",\"Zacute;\":\"Ź\",\"zacute;\":\"ź\",\"Zcaron;\":\"Ž\",\"zcaron;\":\"ž\",\"Zcy;\":\"З\",\"zcy;\":\"з\",\"Zdot;\":\"Ż\",\"zdot;\":\"ż\",\"zeetrf;\":\"ℨ\",\"ZeroWidthSpace;\":\"​\",\"Zeta;\":\"Ζ\",\"zeta;\":\"ζ\",\"zfr;\":\"𝔷\",\"Zfr;\":\"ℨ\",\"ZHcy;\":\"Ж\",\"zhcy;\":\"ж\",\"zigrarr;\":\"⇝\",\"zopf;\":\"𝕫\",\"Zopf;\":\"ℤ\",\"Zscr;\":\"𝒵\",\"zscr;\":\"𝓏\",\"zwj;\":\"‍\",\"zwnj;\":\"‌\"}\n},{}],13:[function(_dereq_,module){function replacer(key,value){return util.isUndefined(value)?\"\"+value:!util.isNumber(value)||!isNaN(value)&&isFinite(value)?util.isFunction(value)||util.isRegExp(value)?\"\"+value:value:\"\"+value}function truncate(s,n){return util.isString(s)?n>s.length?s:s.slice(0,n):s}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+\" \"+self.operator+\" \"+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}function ok(value,message){value||fail(value,!0,message,\"==\",assert.ok)}function _deepEqual(actual,expected){if(actual===expected)return!0;if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return!1;for(var i=0;actual.length>i;i++)if(actual[i]!==expected[i])return!1;return!0}return util.isDate(actual)&&util.isDate(expected)?actual.getTime()===expected.getTime():util.isRegExp(actual)&&util.isRegExp(expected)?actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase:util.isObject(actual)||util.isObject(expected)?objEquiv(actual,expected):actual==expected}function isArguments(object){return\"[object Arguments]\"==Object.prototype.toString.call(object)}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(isArguments(a))return isArguments(b)?(a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b)):!1;try{var key,i,ka=objectKeys(a),kb=objectKeys(b)}catch(e){return!1}if(ka.length!=kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!_deepEqual(a[key],b[key]))return!1;return!0}function expectedException(actual,expected){return actual&&expected?\"[object RegExp]\"==Object.prototype.toString.call(expected)?expected.test(actual):actual instanceof expected?!0:expected.call({},actual)===!0?!0:!1:!1}function _throws(shouldThrow,block,expected,message){var actual;util.isString(expected)&&(message=expected,expected=null);try{block()}catch(e){actual=e}if(message=(expected&&expected.name?\" (\"+expected.name+\").\":\".\")+(message?\" \"+message:\".\"),shouldThrow&&!actual&&fail(actual,expected,\"Missing expected exception\"+message),!shouldThrow&&expectedException(actual,expected)&&fail(actual,expected,\"Got unwanted exception\"+message),shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual)throw actual}var util=_dereq_(\"util/\"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(options){this.name=\"AssertionError\",this.actual=options.actual,this.expected=options.expected,this.operator=options.operator,options.message?(this.message=options.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,stackStartFunction);else{var err=Error();if(err.stack){var out=err.stack,fn_name=stackStartFunction.name,idx=out.indexOf(\"\\n\"+fn_name);if(idx>=0){var next_line=out.indexOf(\"\\n\",idx+1);out=out.substring(next_line+1)}this.stack=out}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(actual,expected,message){actual!=expected&&fail(actual,expected,message,\"==\",assert.equal)},assert.notEqual=function(actual,expected,message){actual==expected&&fail(actual,expected,message,\"!=\",assert.notEqual)},assert.deepEqual=function(actual,expected,message){_deepEqual(actual,expected)||fail(actual,expected,message,\"deepEqual\",assert.deepEqual)},assert.notDeepEqual=function(actual,expected,message){_deepEqual(actual,expected)&&fail(actual,expected,message,\"notDeepEqual\",assert.notDeepEqual)},assert.strictEqual=function(actual,expected,message){actual!==expected&&fail(actual,expected,message,\"===\",assert.strictEqual)},assert.notStrictEqual=function(actual,expected,message){actual===expected&&fail(actual,expected,message,\"!==\",assert.notStrictEqual)},assert.throws=function(){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(err){if(err)throw err};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)hasOwn.call(obj,key)&&keys.push(key);return keys}},{\"util/\":15}],14:[function(_dereq_,module){module.exports=function(arg){return arg&&\"object\"==typeof arg&&\"function\"==typeof arg.copy&&\"function\"==typeof arg.fill&&\"function\"==typeof arg.readUInt8}},{}],15:[function(_dereq_,module,exports){(function(process,global){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?\"\u001b[\"+inspect.colors[style][0]+\"m\"+str+\"\u001b[\"+inspect.colors[style][1]+\"m\":str}function stylizeNoColor(str){return str}function arrayToHash(array){var hash={};return array.forEach(function(val){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf(\"message\")>=0||keys.indexOf(\"description\")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?\": \"+value.name:\"\";return ctx.stylize(\"[Function\"+name+\"]\",\"special\")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),\"regexp\");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),\"date\");if(isError(value))return formatError(value)}var base=\"\",array=!1,braces=[\"{\",\"}\"];if(isArray(value)&&(array=!0,braces=[\"[\",\"]\"]),isFunction(value)){var n=value.name?\": \"+value.name:\"\";base=\" [Function\"+n+\"]\"}if(isRegExp(value)&&(base=\" \"+RegExp.prototype.toString.call(value)),isDate(value)&&(base=\" \"+Date.prototype.toUTCString.call(value)),isError(value)&&(base=\" \"+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(0>recurseTimes)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),\"regexp\"):ctx.stylize(\"[Object]\",\"special\");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize(\"undefined\",\"undefined\");if(isString(value)){var simple=\"'\"+JSON.stringify(value).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return ctx.stylize(simple,\"string\")}return isNumber(value)?ctx.stylize(\"\"+value,\"number\"):isBoolean(value)?ctx.stylize(\"\"+value,\"boolean\"):isNull(value)?ctx.stylize(\"null\",\"null\"):void 0}function formatError(value){return\"[\"+Error.prototype.toString.call(value)+\"]\"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;l>i;++i)hasOwnProperty(value,i+\"\")?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,i+\"\",!0)):output.push(\"\");return keys.forEach(function(key){key.match(/^\\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize(\"[Getter/Setter]\",\"special\"):ctx.stylize(\"[Getter]\",\"special\"):desc.set&&(str=ctx.stylize(\"[Setter]\",\"special\")),hasOwnProperty(visibleKeys,key)||(name=\"[\"+key+\"]\"),str||(0>ctx.seen.indexOf(desc.value)?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf(\"\\n\")>-1&&(str=array?str.split(\"\\n\").map(function(line){return\"  \"+line}).join(\"\\n\").substr(2):\"\\n\"+str.split(\"\\n\").map(function(line){return\"   \"+line}).join(\"\\n\"))):str=ctx.stylize(\"[Circular]\",\"special\")),isUndefined(name)){if(array&&key.match(/^\\d+$/))return str;name=JSON.stringify(\"\"+key),name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,\"name\")):(name=name.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),name=ctx.stylize(name,\"string\"))}return name+\": \"+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf(\"\\n\")>=0&&numLinesEst++,prev+cur.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1},0);return length>60?braces[0]+(\"\"===base?\"\":base+\"\\n \")+\" \"+output.join(\",\\n  \")+\" \"+braces[1]:braces[0]+base+\" \"+output.join(\", \")+\" \"+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return\"boolean\"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return\"number\"==typeof arg}function isString(arg){return\"string\"==typeof arg}function isSymbol(arg){return\"symbol\"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&\"[object RegExp]\"===objectToString(re)}function isObject(arg){return\"object\"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&\"[object Date]\"===objectToString(d)}function isError(e){return isObject(e)&&(\"[object Error]\"===objectToString(e)||e instanceof Error)}function isFunction(arg){return\"function\"==typeof arg}function isPrimitive(arg){return null===arg||\"boolean\"==typeof arg||\"number\"==typeof arg||\"string\"==typeof arg||\"symbol\"==typeof arg||arg===void 0}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return 10>n?\"0\"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(\":\");return[d.getDate(),months[d.getMonth()],time].join(\" \")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;arguments.length>i;i++)objects.push(inspect(arguments[i]));return objects.join(\" \")}for(var i=1,args=arguments,len=args.length,str=(f+\"\").replace(formatRegExp,function(x){if(\"%%\"===x)return\"%\";if(i>=len)return x;switch(x){case\"%s\":return args[i++]+\"\";case\"%d\":return Number(args[i++]);case\"%j\":try{return JSON.stringify(args[i++])}catch(_){return\"[Circular]\"}default:return x}}),x=args[i];len>i;x=args[++i])str+=isNull(x)||!isObject(x)?\" \"+x:\" \"+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||\"\"),set=set.toUpperCase(),!debugs[set])if(RegExp(\"\\\\b\"+set+\"\\\\b\",\"i\").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error(\"%s %d: %s\",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:\"cyan\",number:\"yellow\",\"boolean\":\"yellow\",undefined:\"grey\",\"null\":\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=_dereq_(\"./support/isBuffer\");var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];exports.log=function(){console.log(\"%s - %s\",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=_dereq_(\"inherits\"),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(this,_dereq_(\"/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{\"./support/isBuffer\":14,\"/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js\":18,inherits:17}],16:[function(_dereq_,module){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return\"function\"==typeof arg}function isNumber(arg){return\"number\"==typeof arg}function isObject(arg){return\"object\"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError(\"n must be a positive number\");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),\"error\"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length))throw er=arguments[1],er instanceof Error?er:TypeError('Uncaught, unspecified \"error\" event.');if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError(\"listener must be a function\");if(this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[type].length),console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError(\"listener must be a function\");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit(\"removeListener\",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit(\"removeListener\",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)\"removeListener\"!==key&&this.removeAllListeners(key);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],17:[function(_dereq_,module){module.exports=\"function\"==typeof Object.create?function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],18:[function(_dereq_,module){function noop(){}var process=module.exports={};process.nextTick=function(){var canSetImmediate=\"undefined\"!=typeof window&&window.setImmediate,canPost=\"undefined\"!=typeof window&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};if(canPost){var queue=[];return window.addEventListener(\"message\",function(ev){var source=ev.source;if((source===window||null===source)&&\"process-tick\"===ev.data&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function(fn){queue.push(fn),window.postMessage(\"process-tick\",\"*\")}}return function(fn){setTimeout(fn,0)}}(),process.title=\"browser\",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.once=noop,process.off=noop,process.emit=noop,process.binding=function(){throw Error(\"process.binding is not supported\")},process.cwd=function(){return\"/\"},process.chdir=function(){throw Error(\"process.chdir is not supported\")}},{}],19:[function(_dereq_,module){module.exports=_dereq_(14)},{}],20:[function(_dereq_,module){module.exports=_dereq_(15)},{\"./support/isBuffer\":19,\"/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js\":18,inherits:17}]},{},[9])(9)}),ace.define(\"ace/mode/html_worker\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/worker/mirror\",\"ace/mode/html/saxparser\"],function(acequire,exports){\"use strict\";var oop=acequire(\"../lib/oop\");acequire(\"../lib/lang\");var Mirror=acequire(\"../worker/mirror\").Mirror,SAXParser=acequire(\"./html/saxparser\").SAXParser,errorTypes={\"expected-doctype-but-got-start-tag\":\"info\",\"expected-doctype-but-got-chars\":\"info\",\"non-html-root\":\"info\"},Worker=exports.Worker=function(sender){Mirror.call(this,sender),this.setTimeout(400),this.context=null};oop.inherits(Worker,Mirror),function(){this.setOptions=function(options){this.context=options.context},this.onUpdate=function(){var value=this.doc.getValue();if(value){var parser=new SAXParser,errors=[],noop=function(){};parser.contentHandler={startDocument:noop,endDocument:noop,startElement:noop,endElement:noop,characters:noop},parser.errorHandler={error:function(message,location,code){errors.push({row:location.line,column:location.column,text:message,type:errorTypes[code]||\"error\"})}},this.context?parser.parseFragment(value,this.context):parser.parse(value),this.sender.emit(\"error\",errors)}}}.call(Worker.prototype)}),ace.define(\"ace/lib/es5-shim\",[\"require\",\"exports\",\"module\"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,\"sentinel\",{}),\"sentinel\"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(\"function\"!=typeof target)throw new TypeError(\"Function.prototype.bind called on incompatible \"+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,\"__defineGetter__\"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,\"XXX\"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return\"[object Array]\"==_toString(obj)});var boxedString=Object(\"a\"),splitString=\"a\"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,result=[],thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0,thisp=arguments[1];if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");if(!length&&1==arguments.length)throw new TypeError(\"reduce of empty array with no initial value\");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError(\"reduce of empty array with no initial value\")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):object,length=self.length>>>0;if(\"[object Function]\"!=_toString(fun))throw new TypeError(fun+\" is not a function\");if(!length&&1==arguments.length)throw new TypeError(\"reduceRight of empty array with no initial value\");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError(\"reduceRight of empty array with no initial value\")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&\"[object String]\"==_toString(this)?this.split(\"\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT=\"Object.getOwnPropertyDescriptor called on a non-object: \";Object.getOwnPropertyDescriptor=function(object,property){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if(\"object\"!=typeof prototype)throw new TypeError(\"typeof prototype[\"+typeof prototype+\"] != 'object'\");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=\"undefined\"==typeof document||doesDefinePropertyWork(document.createElement(\"div\"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR=\"Property description must be an object: \",ERR_NON_OBJECT_TARGET=\"Object.defineProperty called on non-object: \",ERR_ACCESSORS_NOT_SUPPORTED=\"getters & setters can not be defined on this javascript engine\";Object.defineProperty=function(object,property,descriptor){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(\"object\"!=typeof descriptor&&\"function\"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,\"value\"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,\"get\")&&defineGetter(object,property,descriptor.get),owns(descriptor,\"set\")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object\n});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return\"function\"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name=\"\";owns(object,name);)name+=\"?\";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if(\"object\"!=typeof object&&\"function\"!=typeof object||null===object)throw new TypeError(\"Object.keys called on a non-object\");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws=\"\t\\n\u000b\\f\\r   ᠎             　\\u2028\\u2029﻿\";if(!String.prototype.trim||ws.trim()){ws=\"[\"+ws+\"]\";var trimBeginRegexp=RegExp(\"^\"+ws+ws+\"*\"),trimEndRegexp=RegExp(ws+ws+\"*$\");String.prototype.trim=function(){return(this+\"\").replace(trimBeginRegexp,\"\").replace(trimEndRegexp,\"\")}}var toObject=function(o){if(null==o)throw new TypeError(\"can't convert \"+o+\" to object\");return Object(o)}});";

  var html$1 = {
  	id: id$2,
  	src: src$2
  };

  ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;

  var DocCommentHighlightRules = function() {
      this.$rules = {
          "start" : [ {
              token : "comment.doc.tag",
              regex : "@[\\w\\d_]+" // TODO: fix email addresses
          }, 
          DocCommentHighlightRules.getTagRule(),
          {
              defaultToken : "comment.doc",
              caseInsensitive: true
          }]
      };
  };

  oop.inherits(DocCommentHighlightRules, TextHighlightRules);

  DocCommentHighlightRules.getTagRule = function(start) {
      return {
          token : "comment.doc.tag.storage.type",
          regex : "\\b(?:TODO|FIXME|XXX|HACK)\\b"
      };
  };

  DocCommentHighlightRules.getStartRule = function(start) {
      return {
          token : "comment.doc", // doc comment
          regex : "\\/\\*(?=\\*)",
          next  : start
      };
  };

  DocCommentHighlightRules.getEndRule = function (start) {
      return {
          token : "comment.doc", // closing comment
          regex : "\\*\\/",
          next  : start
      };
  };


  exports.DocCommentHighlightRules = DocCommentHighlightRules;

  });

  ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var DocCommentHighlightRules = acequire("./doc_comment_highlight_rules").DocCommentHighlightRules;
  var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;
  var identifierRe = "[a-zA-Z\\$_\u00a1-\uffff][a-zA-Z\\d\\$_\u00a1-\uffff]*";

  var JavaScriptHighlightRules = function(options) {
      var keywordMapper = this.createKeywordMapper({
          "variable.language":
              "Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|"  + // Constructors
              "Namespace|QName|XML|XMLList|"                                             + // E4X
              "ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|"   +
              "Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|"                    +
              "Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|"   + // Errors
              "SyntaxError|TypeError|URIError|"                                          +
              "decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|" + // Non-constructor functions
              "isNaN|parseFloat|parseInt|"                                               +
              "JSON|Math|"                                                               + // Other
              "this|arguments|prototype|window|document"                                 , // Pseudo
          "keyword":
              "const|yield|import|get|set|async|await|" +
              "break|case|catch|continue|default|delete|do|else|finally|for|function|" +
              "if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|" +
              "__parent__|__count__|escape|unescape|with|__proto__|" +
              "class|enum|extends|super|export|implements|private|public|interface|package|protected|static",
          "storage.type":
              "const|let|var|function",
          "constant.language":
              "null|Infinity|NaN|undefined",
          "support.function":
              "alert",
          "constant.language.boolean": "true|false"
      }, "identifier");
      var kwBeforeRe = "case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void";

      var escapedRe = "\\\\(?:x[0-9a-fA-F]{2}|" + // hex
          "u[0-9a-fA-F]{4}|" + // unicode
          "u{[0-9a-fA-F]{1,6}}|" + // es6 unicode
          "[0-2][0-7]{0,2}|" + // oct
          "3[0-7][0-7]?|" + // oct
          "[4-7][0-7]?|" + //oct
          ".)";

      this.$rules = {
          "no_regex" : [
              DocCommentHighlightRules.getStartRule("doc-start"),
              comments("no_regex"),
              {
                  token : "string",
                  regex : "'(?=.)",
                  next  : "qstring"
              }, {
                  token : "string",
                  regex : '"(?=.)',
                  next  : "qqstring"
              }, {
                  token : "constant.numeric", // hexadecimal, octal and binary
                  regex : /0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/
              }, {
                  token : "constant.numeric", // decimal integers and floats
                  regex : /(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/
              }, {
                  token : [
                      "storage.type", "punctuation.operator", "support.function",
                      "punctuation.operator", "entity.name.function", "text","keyword.operator"
                  ],
                  regex : "(" + identifierRe + ")(\\.)(prototype)(\\.)(" + identifierRe +")(\\s*)(=)",
                  next: "function_arguments"
              }, {
                  token : [
                      "storage.type", "punctuation.operator", "entity.name.function", "text",
                      "keyword.operator", "text", "storage.type", "text", "paren.lparen"
                  ],
                  regex : "(" + identifierRe + ")(\\.)(" + identifierRe +")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : [
                      "entity.name.function", "text", "keyword.operator", "text", "storage.type",
                      "text", "paren.lparen"
                  ],
                  regex : "(" + identifierRe +")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : [
                      "storage.type", "punctuation.operator", "entity.name.function", "text",
                      "keyword.operator", "text",
                      "storage.type", "text", "entity.name.function", "text", "paren.lparen"
                  ],
                  regex : "(" + identifierRe + ")(\\.)(" + identifierRe +")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : [
                      "storage.type", "text", "entity.name.function", "text", "paren.lparen"
                  ],
                  regex : "(function)(\\s+)(" + identifierRe + ")(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : [
                      "entity.name.function", "text", "punctuation.operator",
                      "text", "storage.type", "text", "paren.lparen"
                  ],
                  regex : "(" + identifierRe + ")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : [
                      "text", "text", "storage.type", "text", "paren.lparen"
                  ],
                  regex : "(:)(\\s*)(function)(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : "keyword",
                  regex : "from(?=\\s*('|\"))"
              }, {
                  token : "keyword",
                  regex : "(?:" + kwBeforeRe + ")\\b",
                  next : "start"
              }, {
                  token : ["support.constant"],
                  regex : /that\b/
              }, {
                  token : ["storage.type", "punctuation.operator", "support.function.firebug"],
                  regex : /(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/
              }, {
                  token : keywordMapper,
                  regex : identifierRe
              }, {
                  token : "punctuation.operator",
                  regex : /[.](?![.])/,
                  next  : "property"
              }, {
                  token : "storage.type",
                  regex : /=>/
              }, {
                  token : "keyword.operator",
                  regex : /--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,
                  next  : "start"
              }, {
                  token : "punctuation.operator",
                  regex : /[?:,;.]/,
                  next  : "start"
              }, {
                  token : "paren.lparen",
                  regex : /[\[({]/,
                  next  : "start"
              }, {
                  token : "paren.rparen",
                  regex : /[\])}]/
              }, {
                  token: "comment",
                  regex: /^#!.*$/
              }
          ],
          property: [{
                  token : "text",
                  regex : "\\s+"
              }, {
                  token : [
                      "storage.type", "punctuation.operator", "entity.name.function", "text",
                      "keyword.operator", "text",
                      "storage.type", "text", "entity.name.function", "text", "paren.lparen"
                  ],
                  regex : "(" + identifierRe + ")(\\.)(" + identifierRe +")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",
                  next: "function_arguments"
              }, {
                  token : "punctuation.operator",
                  regex : /[.](?![.])/
              }, {
                  token : "support.function",
                  regex : /(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/
              }, {
                  token : "support.function.dom",
                  regex : /(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/
              }, {
                  token :  "support.constant",
                  regex : /(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/
              }, {
                  token : "identifier",
                  regex : identifierRe
              }, {
                  regex: "",
                  token: "empty",
                  next: "no_regex"
              }
          ],
          "start": [
              DocCommentHighlightRules.getStartRule("doc-start"),
              comments("start"),
              {
                  token: "string.regexp",
                  regex: "\\/",
                  next: "regex"
              }, {
                  token : "text",
                  regex : "\\s+|^$",
                  next : "start"
              }, {
                  token: "empty",
                  regex: "",
                  next: "no_regex"
              }
          ],
          "regex": [
              {
                  token: "regexp.keyword.operator",
                  regex: "\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"
              }, {
                  token: "string.regexp",
                  regex: "/[sxngimy]*",
                  next: "no_regex"
              }, {
                  token : "invalid",
                  regex: /\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/
              }, {
                  token : "constant.language.escape",
                  regex: /\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/
              }, {
                  token : "constant.language.delimiter",
                  regex: /\|/
              }, {
                  token: "constant.language.escape",
                  regex: /\[\^?/,
                  next: "regex_character_class"
              }, {
                  token: "empty",
                  regex: "$",
                  next: "no_regex"
              }, {
                  defaultToken: "string.regexp"
              }
          ],
          "regex_character_class": [
              {
                  token: "regexp.charclass.keyword.operator",
                  regex: "\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"
              }, {
                  token: "constant.language.escape",
                  regex: "]",
                  next: "regex"
              }, {
                  token: "constant.language.escape",
                  regex: "-"
              }, {
                  token: "empty",
                  regex: "$",
                  next: "no_regex"
              }, {
                  defaultToken: "string.regexp.charachterclass"
              }
          ],
          "function_arguments": [
              {
                  token: "variable.parameter",
                  regex: identifierRe
              }, {
                  token: "punctuation.operator",
                  regex: "[, ]+"
              }, {
                  token: "punctuation.operator",
                  regex: "$"
              }, {
                  token: "empty",
                  regex: "",
                  next: "no_regex"
              }
          ],
          "qqstring" : [
              {
                  token : "constant.language.escape",
                  regex : escapedRe
              }, {
                  token : "string",
                  regex : "\\\\$",
                  consumeLineEnd  : true
              }, {
                  token : "string",
                  regex : '"|$',
                  next  : "no_regex"
              }, {
                  defaultToken: "string"
              }
          ],
          "qstring" : [
              {
                  token : "constant.language.escape",
                  regex : escapedRe
              }, {
                  token : "string",
                  regex : "\\\\$",
                  consumeLineEnd  : true
              }, {
                  token : "string",
                  regex : "'|$",
                  next  : "no_regex"
              }, {
                  defaultToken: "string"
              }
          ]
      };


      if (!options || !options.noES6) {
          this.$rules.no_regex.unshift({
              regex: "[{}]", onMatch: function(val, state, stack) {
                  this.next = val == "{" ? this.nextState : "";
                  if (val == "{" && stack.length) {
                      stack.unshift("start", state);
                  }
                  else if (val == "}" && stack.length) {
                      stack.shift();
                      this.next = stack.shift();
                      if (this.next.indexOf("string") != -1 || this.next.indexOf("jsx") != -1)
                          return "paren.quasi.end";
                  }
                  return val == "{" ? "paren.lparen" : "paren.rparen";
              },
              nextState: "start"
          }, {
              token : "string.quasi.start",
              regex : /`/,
              push  : [{
                  token : "constant.language.escape",
                  regex : escapedRe
              }, {
                  token : "paren.quasi.start",
                  regex : /\${/,
                  push  : "start"
              }, {
                  token : "string.quasi.end",
                  regex : /`/,
                  next  : "pop"
              }, {
                  defaultToken: "string.quasi"
              }]
          });

          if (!options || options.jsx != false)
              JSX.call(this);
      }

      this.embedRules(DocCommentHighlightRules, "doc-",
          [ DocCommentHighlightRules.getEndRule("no_regex") ]);

      this.normalizeRules();
  };

  oop.inherits(JavaScriptHighlightRules, TextHighlightRules);

  function JSX() {
      var tagRegex = identifierRe.replace("\\d", "\\d\\-");
      var jsxTag = {
          onMatch : function(val, state, stack) {
              var offset = val.charAt(1) == "/" ? 2 : 1;
              if (offset == 1) {
                  if (state != this.nextState)
                      stack.unshift(this.next, this.nextState, 0);
                  else
                      stack.unshift(this.next);
                  stack[2]++;
              } else if (offset == 2) {
                  if (state == this.nextState) {
                      stack[1]--;
                      if (!stack[1] || stack[1] < 0) {
                          stack.shift();
                          stack.shift();
                      }
                  }
              }
              return [{
                  type: "meta.tag.punctuation." + (offset == 1 ? "" : "end-") + "tag-open.xml",
                  value: val.slice(0, offset)
              }, {
                  type: "meta.tag.tag-name.xml",
                  value: val.substr(offset)
              }];
          },
          regex : "</?" + tagRegex + "",
          next: "jsxAttributes",
          nextState: "jsx"
      };
      this.$rules.start.unshift(jsxTag);
      var jsxJsRule = {
          regex: "{",
          token: "paren.quasi.start",
          push: "start"
      };
      this.$rules.jsx = [
          jsxJsRule,
          jsxTag,
          {include : "reference"},
          {defaultToken: "string"}
      ];
      this.$rules.jsxAttributes = [{
          token : "meta.tag.punctuation.tag-close.xml",
          regex : "/?>",
          onMatch : function(value, currentState, stack) {
              if (currentState == stack[0])
                  stack.shift();
              if (value.length == 2) {
                  if (stack[0] == this.nextState)
                      stack[1]--;
                  if (!stack[1] || stack[1] < 0) {
                      stack.splice(0, 2);
                  }
              }
              this.next = stack[0] || "start";
              return [{type: this.token, value: value}];
          },
          nextState: "jsx"
      },
      jsxJsRule,
      comments("jsxAttributes"),
      {
          token : "entity.other.attribute-name.xml",
          regex : tagRegex
      }, {
          token : "keyword.operator.attribute-equals.xml",
          regex : "="
      }, {
          token : "text.tag-whitespace.xml",
          regex : "\\s+"
      }, {
          token : "string.attribute-value.xml",
          regex : "'",
          stateName : "jsx_attr_q",
          push : [
              {token : "string.attribute-value.xml", regex: "'", next: "pop"},
              {include : "reference"},
              {defaultToken : "string.attribute-value.xml"}
          ]
      }, {
          token : "string.attribute-value.xml",
          regex : '"',
          stateName : "jsx_attr_qq",
          push : [
              {token : "string.attribute-value.xml", regex: '"', next: "pop"},
              {include : "reference"},
              {defaultToken : "string.attribute-value.xml"}
          ]
      },
      jsxTag
      ];
      this.$rules.reference = [{
          token : "constant.language.escape.reference.xml",
          regex : "(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"
      }];
  }

  function comments(next) {
      return [
          {
              token : "comment", // multi line comment
              regex : /\/\*/,
              next: [
                  DocCommentHighlightRules.getTagRule(),
                  {token : "comment", regex : "\\*\\/", next : next || "pop"},
                  {defaultToken : "comment", caseInsensitive: true}
              ]
          }, {
              token : "comment",
              regex : "\\/\\/",
              next: [
                  DocCommentHighlightRules.getTagRule(),
                  {token : "comment", regex : "$|^", next : next || "pop"},
                  {defaultToken : "comment", caseInsensitive: true}
              ]
          }
      ];
  }
  exports.JavaScriptHighlightRules = JavaScriptHighlightRules;
  });

  ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"], function(acequire, exports, module) {

  var Range = acequire("../range").Range;

  var MatchingBraceOutdent = function() {};

  (function() {

      this.checkOutdent = function(line, input) {
          if (! /^\s+$/.test(line))
              return false;

          return /^\s*\}/.test(input);
      };

      this.autoOutdent = function(doc, row) {
          var line = doc.getLine(row);
          var match = line.match(/^(\s*\})/);

          if (!match) return 0;

          var column = match[1].length;
          var openBracePos = doc.findMatchingBracket({row: row, column: column});

          if (!openBracePos || openBracePos.row == row) return 0;

          var indent = this.$getIndent(doc.getLine(openBracePos.row));
          doc.replace(new Range(row, 0, row, column-1), indent);
      };

      this.$getIndent = function(line) {
          return line.match(/^\s*/)[0];
      };

  }).call(MatchingBraceOutdent.prototype);

  exports.MatchingBraceOutdent = MatchingBraceOutdent;
  });

  ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var Range = acequire("../../range").Range;
  var BaseFoldMode = acequire("./fold_mode").FoldMode;

  var FoldMode = exports.FoldMode = function(commentRegex) {
      if (commentRegex) {
          this.foldingStartMarker = new RegExp(
              this.foldingStartMarker.source.replace(/\|[^|]*?$/, "|" + commentRegex.start)
          );
          this.foldingStopMarker = new RegExp(
              this.foldingStopMarker.source.replace(/\|[^|]*?$/, "|" + commentRegex.end)
          );
      }
  };
  oop.inherits(FoldMode, BaseFoldMode);

  (function() {
      
      this.foldingStartMarker = /([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/;
      this.foldingStopMarker = /^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/;
      this.singleLineBlockCommentRe= /^\s*(\/\*).*\*\/\s*$/;
      this.tripleStarBlockCommentRe = /^\s*(\/\*\*\*).*\*\/\s*$/;
      this.startRegionRe = /^\s*(\/\*|\/\/)#?region\b/;
      this._getFoldWidgetBase = this.getFoldWidget;
      this.getFoldWidget = function(session, foldStyle, row) {
          var line = session.getLine(row);
      
          if (this.singleLineBlockCommentRe.test(line)) {
              if (!this.startRegionRe.test(line) && !this.tripleStarBlockCommentRe.test(line))
                  return "";
          }
      
          var fw = this._getFoldWidgetBase(session, foldStyle, row);
      
          if (!fw && this.startRegionRe.test(line))
              return "start"; // lineCommentRegionStart
      
          return fw;
      };

      this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {
          var line = session.getLine(row);
          
          if (this.startRegionRe.test(line))
              return this.getCommentRegionBlock(session, line, row);
          
          var match = line.match(this.foldingStartMarker);
          if (match) {
              var i = match.index;

              if (match[1])
                  return this.openingBracketBlock(session, match[1], row, i);
                  
              var range = session.getCommentFoldRange(row, i + match[0].length, 1);
              
              if (range && !range.isMultiLine()) {
                  if (forceMultiline) {
                      range = this.getSectionRange(session, row);
                  } else if (foldStyle != "all")
                      range = null;
              }
              
              return range;
          }

          if (foldStyle === "markbegin")
              return;

          var match = line.match(this.foldingStopMarker);
          if (match) {
              var i = match.index + match[0].length;

              if (match[1])
                  return this.closingBracketBlock(session, match[1], row, i);

              return session.getCommentFoldRange(row, i, -1);
          }
      };
      
      this.getSectionRange = function(session, row) {
          var line = session.getLine(row);
          var startIndent = line.search(/\S/);
          var startRow = row;
          var startColumn = line.length;
          row = row + 1;
          var endRow = row;
          var maxRow = session.getLength();
          while (++row < maxRow) {
              line = session.getLine(row);
              var indent = line.search(/\S/);
              if (indent === -1)
                  continue;
              if  (startIndent > indent)
                  break;
              var subRange = this.getFoldWidgetRange(session, "all", row);
              
              if (subRange) {
                  if (subRange.start.row <= startRow) {
                      break;
                  } else if (subRange.isMultiLine()) {
                      row = subRange.end.row;
                  } else if (startIndent == indent) {
                      break;
                  }
              }
              endRow = row;
          }
          
          return new Range(startRow, startColumn, endRow, session.getLine(endRow).length);
      };
      this.getCommentRegionBlock = function(session, line, row) {
          var startColumn = line.search(/\s*$/);
          var maxRow = session.getLength();
          var startRow = row;
          
          var re = /^\s*(?:\/\*|\/\/|--)#?(end)?region\b/;
          var depth = 1;
          while (++row < maxRow) {
              line = session.getLine(row);
              var m = re.exec(line);
              if (!m) continue;
              if (m[1]) depth--;
              else depth++;

              if (!depth) break;
          }

          var endRow = row;
          if (endRow > startRow) {
              return new Range(startRow, startColumn, endRow, line.length);
          }
      };

  }).call(FoldMode.prototype);

  });

  ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var TextMode = acequire("./text").Mode;
  var JavaScriptHighlightRules = acequire("./javascript_highlight_rules").JavaScriptHighlightRules;
  var MatchingBraceOutdent = acequire("./matching_brace_outdent").MatchingBraceOutdent;
  var WorkerClient = acequire("../worker/worker_client").WorkerClient;
  var CstyleBehaviour = acequire("./behaviour/cstyle").CstyleBehaviour;
  var CStyleFoldMode = acequire("./folding/cstyle").FoldMode;

  var Mode = function() {
      this.HighlightRules = JavaScriptHighlightRules;
      
      this.$outdent = new MatchingBraceOutdent();
      this.$behaviour = new CstyleBehaviour();
      this.foldingRules = new CStyleFoldMode();
  };
  oop.inherits(Mode, TextMode);

  (function() {

      this.lineCommentStart = "//";
      this.blockComment = {start: "/*", end: "*/"};
      this.$quotes = {'"': '"', "'": "'", "`": "`"};

      this.getNextLineIndent = function(state, line, tab) {
          var indent = this.$getIndent(line);

          var tokenizedLine = this.getTokenizer().getLineTokens(line, state);
          var tokens = tokenizedLine.tokens;
          var endState = tokenizedLine.state;

          if (tokens.length && tokens[tokens.length-1].type == "comment") {
              return indent;
          }

          if (state == "start" || state == "no_regex") {
              var match = line.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);
              if (match) {
                  indent += tab;
              }
          } else if (state == "doc-start") {
              if (endState == "start" || endState == "no_regex") {
                  return "";
              }
              var match = line.match(/^\s*(\/?)\*/);
              if (match) {
                  if (match[1]) {
                      indent += " ";
                  }
                  indent += "* ";
              }
          }

          return indent;
      };

      this.checkOutdent = function(state, line, input) {
          return this.$outdent.checkOutdent(line, input);
      };

      this.autoOutdent = function(state, doc, row) {
          this.$outdent.autoOutdent(doc, row);
      };

      this.createWorker = function(session) {
          var worker = new WorkerClient(["ace"], javascript, "JavaScriptWorker");
          worker.attachToDocument(session.getDocument());

          worker.on("annotate", function(results) {
              session.setAnnotations(results.data);
          });

          worker.on("terminate", function() {
              session.clearAnnotations();
          });

          return worker;
      };

      this.$id = "ace/mode/javascript";
  }).call(Mode.prototype);

  exports.Mode = Mode;
  });

  ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var lang = acequire("../lib/lang");
  var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;
  var supportType = exports.supportType = "align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|min-height|min-width|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index";
  var supportFunction = exports.supportFunction = "rgb|rgba|url|attr|counter|counters";
  var supportConstant = exports.supportConstant = "absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero";
  var supportConstantColor = exports.supportConstantColor = "aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen";
  var supportConstantFonts = exports.supportConstantFonts = "arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace";

  var numRe = exports.numRe = "\\-?(?:(?:[0-9]+(?:\\.[0-9]+)?)|(?:\\.[0-9]+))";
  var pseudoElements = exports.pseudoElements = "(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b";
  var pseudoClasses  = exports.pseudoClasses =  "(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|acequired|root|target|valid|visited)\\b";

  var CssHighlightRules = function() {

      var keywordMapper = this.createKeywordMapper({
          "support.function": supportFunction,
          "support.constant": supportConstant,
          "support.type": supportType,
          "support.constant.color": supportConstantColor,
          "support.constant.fonts": supportConstantFonts
      }, "text", true);

      this.$rules = {
          "start" : [{
              include : ["strings", "url", "comments"]
          }, {
              token: "paren.lparen",
              regex: "\\{",
              next:  "ruleset"
          }, {
              token: "paren.rparen",
              regex: "\\}"
          }, {
              token: "string",
              regex: "@",
              next:  "media"
          }, {
              token: "keyword",
              regex: "#[a-z0-9-_]+"
          }, {
              token: "keyword",
              regex: "%"
          }, {
              token: "variable",
              regex: "\\.[a-z0-9-_]+"
          }, {
              token: "string",
              regex: ":[a-z0-9-_]+"
          }, {
              token : "constant.numeric",
              regex : numRe
          }, {
              token: "constant",
              regex: "[a-z0-9-_]+"
          }, {
              caseInsensitive: true
          }],

          "media": [{
              include : ["strings", "url", "comments"]
          }, {
              token: "paren.lparen",
              regex: "\\{",
              next:  "start"
          }, {
              token: "paren.rparen",
              regex: "\\}",
              next:  "start"
          }, {
              token: "string",
              regex: ";",
              next:  "start"
          }, {
              token: "keyword",
              regex: "(?:media|supports|document|charset|import|namespace|media|supports|document"
                  + "|page|font|keyframes|viewport|counter-style|font-feature-values"
                  + "|swash|ornaments|annotation|stylistic|styleset|character-variant)"
          }],

          "comments" : [{
              token: "comment", // multi line comment
              regex: "\\/\\*",
              push: [{
                  token : "comment",
                  regex : "\\*\\/",
                  next : "pop"
              }, {
                  defaultToken : "comment"
              }]
          }],

          "ruleset" : [{
              regex : "-(webkit|ms|moz|o)-",
              token : "text"
          }, {
              token : "paren.rparen",
              regex : "\\}",
              next : "start"
          }, {
              include : ["strings", "url", "comments"]
          }, {
              token : ["constant.numeric", "keyword"],
              regex : "(" + numRe + ")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"
          }, {
              token : "constant.numeric",
              regex : numRe
          }, {
              token : "constant.numeric",  // hex6 color
              regex : "#[a-f0-9]{6}"
          }, {
              token : "constant.numeric", // hex3 color
              regex : "#[a-f0-9]{3}"
          }, {
              token : ["punctuation", "entity.other.attribute-name.pseudo-element.css"],
              regex : pseudoElements
          }, {
              token : ["punctuation", "entity.other.attribute-name.pseudo-class.css"],
              regex : pseudoClasses
          }, {
              include: "url"
          }, {
              token : keywordMapper,
              regex : "\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"
          }, {
              caseInsensitive: true
          }],

          url: [{
              token : "support.function",
              regex : "(?:url(:?-prefix)?|domain|regexp)\\(",
              push: [{
                  token : "support.function",
                  regex : "\\)",
                  next : "pop"
              }, {
                  defaultToken: "string"
              }]
          }],

          strings: [{
              token : "string.start",
              regex : "'",
              push : [{
                  token : "string.end",
                  regex : "'|$",
                  next: "pop"
              }, {
                  include : "escapes"
              }, {
                  token : "constant.language.escape",
                  regex : /\\$/,
                  consumeLineEnd: true
              }, {
                  defaultToken: "string"
              }]
          }, {
              token : "string.start",
              regex : '"',
              push : [{
                  token : "string.end",
                  regex : '"|$',
                  next: "pop"
              }, {
                  include : "escapes"
              }, {
                  token : "constant.language.escape",
                  regex : /\\$/,
                  consumeLineEnd: true
              }, {
                  defaultToken: "string"
              }]
          }],
          escapes: [{
              token : "constant.language.escape",
              regex : /\\([a-fA-F\d]{1,6}|[^a-fA-F\d])/
          }]

      };

      this.normalizeRules();
  };

  oop.inherits(CssHighlightRules, TextHighlightRules);

  exports.CssHighlightRules = CssHighlightRules;

  });

  ace.define("ace/mode/css_completions",["require","exports","module"], function(acequire, exports, module) {

  var propertyMap = {
      "background": {"#$0": 1},
      "background-color": {"#$0": 1, "transparent": 1, "fixed": 1},
      "background-image": {"url('/$0')": 1},
      "background-repeat": {"repeat": 1, "repeat-x": 1, "repeat-y": 1, "no-repeat": 1, "inherit": 1},
      "background-position": {"bottom":2, "center":2, "left":2, "right":2, "top":2, "inherit":2},
      "background-attachment": {"scroll": 1, "fixed": 1},
      "background-size": {"cover": 1, "contain": 1},
      "background-clip": {"border-box": 1, "padding-box": 1, "content-box": 1},
      "background-origin": {"border-box": 1, "padding-box": 1, "content-box": 1},
      "border": {"solid $0": 1, "dashed $0": 1, "dotted $0": 1, "#$0": 1},
      "border-color": {"#$0": 1},
      "border-style": {"solid":2, "dashed":2, "dotted":2, "double":2, "groove":2, "hidden":2, "inherit":2, "inset":2, "none":2, "outset":2, "ridged":2},
      "border-collapse": {"collapse": 1, "separate": 1},
      "bottom": {"px": 1, "em": 1, "%": 1},
      "clear": {"left": 1, "right": 1, "both": 1, "none": 1},
      "color": {"#$0": 1, "rgb(#$00,0,0)": 1},
      "cursor": {"default": 1, "pointer": 1, "move": 1, "text": 1, "wait": 1, "help": 1, "progress": 1, "n-resize": 1, "ne-resize": 1, "e-resize": 1, "se-resize": 1, "s-resize": 1, "sw-resize": 1, "w-resize": 1, "nw-resize": 1},
      "display": {"none": 1, "block": 1, "inline": 1, "inline-block": 1, "table-cell": 1},
      "empty-cells": {"show": 1, "hide": 1},
      "float": {"left": 1, "right": 1, "none": 1},
      "font-family": {"Arial":2,"Comic Sans MS":2,"Consolas":2,"Courier New":2,"Courier":2,"Georgia":2,"Monospace":2,"Sans-Serif":2, "Segoe UI":2,"Tahoma":2,"Times New Roman":2,"Trebuchet MS":2,"Verdana": 1},
      "font-size": {"px": 1, "em": 1, "%": 1},
      "font-weight": {"bold": 1, "normal": 1},
      "font-style": {"italic": 1, "normal": 1},
      "font-variant": {"normal": 1, "small-caps": 1},
      "height": {"px": 1, "em": 1, "%": 1},
      "left": {"px": 1, "em": 1, "%": 1},
      "letter-spacing": {"normal": 1},
      "line-height": {"normal": 1},
      "list-style-type": {"none": 1, "disc": 1, "circle": 1, "square": 1, "decimal": 1, "decimal-leading-zero": 1, "lower-roman": 1, "upper-roman": 1, "lower-greek": 1, "lower-latin": 1, "upper-latin": 1, "georgian": 1, "lower-alpha": 1, "upper-alpha": 1},
      "margin": {"px": 1, "em": 1, "%": 1},
      "margin-right": {"px": 1, "em": 1, "%": 1},
      "margin-left": {"px": 1, "em": 1, "%": 1},
      "margin-top": {"px": 1, "em": 1, "%": 1},
      "margin-bottom": {"px": 1, "em": 1, "%": 1},
      "max-height": {"px": 1, "em": 1, "%": 1},
      "max-width": {"px": 1, "em": 1, "%": 1},
      "min-height": {"px": 1, "em": 1, "%": 1},
      "min-width": {"px": 1, "em": 1, "%": 1},
      "overflow": {"hidden": 1, "visible": 1, "auto": 1, "scroll": 1},
      "overflow-x": {"hidden": 1, "visible": 1, "auto": 1, "scroll": 1},
      "overflow-y": {"hidden": 1, "visible": 1, "auto": 1, "scroll": 1},
      "padding": {"px": 1, "em": 1, "%": 1},
      "padding-top": {"px": 1, "em": 1, "%": 1},
      "padding-right": {"px": 1, "em": 1, "%": 1},
      "padding-bottom": {"px": 1, "em": 1, "%": 1},
      "padding-left": {"px": 1, "em": 1, "%": 1},
      "page-break-after": {"auto": 1, "always": 1, "avoid": 1, "left": 1, "right": 1},
      "page-break-before": {"auto": 1, "always": 1, "avoid": 1, "left": 1, "right": 1},
      "position": {"absolute": 1, "relative": 1, "fixed": 1, "static": 1},
      "right": {"px": 1, "em": 1, "%": 1},
      "table-layout": {"fixed": 1, "auto": 1},
      "text-decoration": {"none": 1, "underline": 1, "line-through": 1, "blink": 1},
      "text-align": {"left": 1, "right": 1, "center": 1, "justify": 1},
      "text-transform": {"capitalize": 1, "uppercase": 1, "lowercase": 1, "none": 1},
      "top": {"px": 1, "em": 1, "%": 1},
      "vertical-align": {"top": 1, "bottom": 1},
      "visibility": {"hidden": 1, "visible": 1},
      "white-space": {"nowrap": 1, "normal": 1, "pre": 1, "pre-line": 1, "pre-wrap": 1},
      "width": {"px": 1, "em": 1, "%": 1},
      "word-spacing": {"normal": 1},
      "filter": {"alpha(opacity=$0100)": 1},

      "text-shadow": {"$02px 2px 2px #777": 1},
      "text-overflow": {"ellipsis-word": 1, "clip": 1, "ellipsis": 1},
      "-moz-border-radius": 1,
      "-moz-border-radius-topright": 1,
      "-moz-border-radius-bottomright": 1,
      "-moz-border-radius-topleft": 1,
      "-moz-border-radius-bottomleft": 1,
      "-webkit-border-radius": 1,
      "-webkit-border-top-right-radius": 1,
      "-webkit-border-top-left-radius": 1,
      "-webkit-border-bottom-right-radius": 1,
      "-webkit-border-bottom-left-radius": 1,
      "-moz-box-shadow": 1,
      "-webkit-box-shadow": 1,
      "transform": {"rotate($00deg)": 1, "skew($00deg)": 1},
      "-moz-transform": {"rotate($00deg)": 1, "skew($00deg)": 1},
      "-webkit-transform": {"rotate($00deg)": 1, "skew($00deg)": 1 }
  };

  var CssCompletions = function() {

  };

  (function() {

      this.completionsDefined = false;

      this.defineCompletions = function() {
          if (document) {
              var style = document.createElement('c').style;

              for (var i in style) {
                  if (typeof style[i] !== 'string')
                      continue;

                  var name = i.replace(/[A-Z]/g, function(x) {
                      return '-' + x.toLowerCase();
                  });

                  if (!propertyMap.hasOwnProperty(name))
                      propertyMap[name] = 1;
              }
          }

          this.completionsDefined = true;
      };

      this.getCompletions = function(state, session, pos, prefix) {
          if (!this.completionsDefined) {
              this.defineCompletions();
          }

          var token = session.getTokenAt(pos.row, pos.column);

          if (!token)
              return [];
          if (state==='ruleset'){
              var line = session.getLine(pos.row).substr(0, pos.column);
              if (/:[^;]+$/.test(line)) {
                  /([\w\-]+):[^:]*$/.test(line);

                  return this.getPropertyValueCompletions(state, session, pos, prefix);
              } else {
                  return this.getPropertyCompletions(state, session, pos, prefix);
              }
          }

          return [];
      };

      this.getPropertyCompletions = function(state, session, pos, prefix) {
          var properties = Object.keys(propertyMap);
          return properties.map(function(property){
              return {
                  caption: property,
                  snippet: property + ': $0;',
                  meta: "property",
                  score: Number.MAX_VALUE
              };
          });
      };

      this.getPropertyValueCompletions = function(state, session, pos, prefix) {
          var line = session.getLine(pos.row).substr(0, pos.column);
          var property = (/([\w\-]+):[^:]*$/.exec(line) || {})[1];

          if (!property)
              return [];
          var values = [];
          if (property in propertyMap && typeof propertyMap[property] === "object") {
              values = Object.keys(propertyMap[property]);
          }
          return values.map(function(value){
              return {
                  caption: value,
                  snippet: value,
                  meta: "property value",
                  score: Number.MAX_VALUE
              };
          });
      };

  }).call(CssCompletions.prototype);

  exports.CssCompletions = CssCompletions;
  });

  ace.define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var Behaviour = acequire("../behaviour").Behaviour;
  var CstyleBehaviour = acequire("./cstyle").CstyleBehaviour;
  var TokenIterator = acequire("../../token_iterator").TokenIterator;

  var CssBehaviour = function () {

      this.inherit(CstyleBehaviour);

      this.add("colon", "insertion", function (state, action, editor, session, text) {
          if (text === ':') {
              var cursor = editor.getCursorPosition();
              var iterator = new TokenIterator(session, cursor.row, cursor.column);
              var token = iterator.getCurrentToken();
              if (token && token.value.match(/\s+/)) {
                  token = iterator.stepBackward();
              }
              if (token && token.type === 'support.type') {
                  var line = session.doc.getLine(cursor.row);
                  var rightChar = line.substring(cursor.column, cursor.column + 1);
                  if (rightChar === ':') {
                      return {
                         text: '',
                         selection: [1, 1]
                      };
                  }
                  if (!line.substring(cursor.column).match(/^\s*;/)) {
                      return {
                         text: ':;',
                         selection: [1, 1]
                      };
                  }
              }
          }
      });

      this.add("colon", "deletion", function (state, action, editor, session, range) {
          var selected = session.doc.getTextRange(range);
          if (!range.isMultiLine() && selected === ':') {
              var cursor = editor.getCursorPosition();
              var iterator = new TokenIterator(session, cursor.row, cursor.column);
              var token = iterator.getCurrentToken();
              if (token && token.value.match(/\s+/)) {
                  token = iterator.stepBackward();
              }
              if (token && token.type === 'support.type') {
                  var line = session.doc.getLine(range.start.row);
                  var rightChar = line.substring(range.end.column, range.end.column + 1);
                  if (rightChar === ';') {
                      range.end.column ++;
                      return range;
                  }
              }
          }
      });

      this.add("semicolon", "insertion", function (state, action, editor, session, text) {
          if (text === ';') {
              var cursor = editor.getCursorPosition();
              var line = session.doc.getLine(cursor.row);
              var rightChar = line.substring(cursor.column, cursor.column + 1);
              if (rightChar === ';') {
                  return {
                     text: '',
                     selection: [1, 1]
                  };
              }
          }
      });

  };
  oop.inherits(CssBehaviour, CstyleBehaviour);

  exports.CssBehaviour = CssBehaviour;
  });

  ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/css_completions","ace/mode/behaviour/css","ace/mode/folding/cstyle"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var TextMode = acequire("./text").Mode;
  var CssHighlightRules = acequire("./css_highlight_rules").CssHighlightRules;
  var MatchingBraceOutdent = acequire("./matching_brace_outdent").MatchingBraceOutdent;
  var WorkerClient = acequire("../worker/worker_client").WorkerClient;
  var CssCompletions = acequire("./css_completions").CssCompletions;
  var CssBehaviour = acequire("./behaviour/css").CssBehaviour;
  var CStyleFoldMode = acequire("./folding/cstyle").FoldMode;

  var Mode = function() {
      this.HighlightRules = CssHighlightRules;
      this.$outdent = new MatchingBraceOutdent();
      this.$behaviour = new CssBehaviour();
      this.$completer = new CssCompletions();
      this.foldingRules = new CStyleFoldMode();
  };
  oop.inherits(Mode, TextMode);

  (function() {

      this.foldingRules = "cStyle";
      this.blockComment = {start: "/*", end: "*/"};

      this.getNextLineIndent = function(state, line, tab) {
          var indent = this.$getIndent(line);
          var tokens = this.getTokenizer().getLineTokens(line, state).tokens;
          if (tokens.length && tokens[tokens.length-1].type == "comment") {
              return indent;
          }

          var match = line.match(/^.*\{\s*$/);
          if (match) {
              indent += tab;
          }

          return indent;
      };

      this.checkOutdent = function(state, line, input) {
          return this.$outdent.checkOutdent(line, input);
      };

      this.autoOutdent = function(state, doc, row) {
          this.$outdent.autoOutdent(doc, row);
      };

      this.getCompletions = function(state, session, pos, prefix) {
          return this.$completer.getCompletions(state, session, pos, prefix);
      };

      this.createWorker = function(session) {
          var worker = new WorkerClient(["ace"], css, "Worker");
          worker.attachToDocument(session.getDocument());

          worker.on("annotate", function(e) {
              session.setAnnotations(e.data);
          });

          worker.on("terminate", function() {
              session.clearAnnotations();
          });

          return worker;
      };

      this.$id = "ace/mode/css";
  }).call(Mode.prototype);

  exports.Mode = Mode;

  });

  ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var TextHighlightRules = acequire("./text_highlight_rules").TextHighlightRules;

  var XmlHighlightRules = function(normalize) {
      var tagRegex = "[_:a-zA-Z\xc0-\uffff][-_:.a-zA-Z0-9\xc0-\uffff]*";

      this.$rules = {
          start : [
              {token : "string.cdata.xml", regex : "<\\!\\[CDATA\\[", next : "cdata"},
              {
                  token : ["punctuation.instruction.xml", "keyword.instruction.xml"],
                  regex : "(<\\?)(" + tagRegex + ")", next : "processing_instruction"
              },
              {token : "comment.start.xml", regex : "<\\!--", next : "comment"},
              {
                  token : ["xml-pe.doctype.xml", "xml-pe.doctype.xml"],
                  regex : "(<\\!)(DOCTYPE)(?=[\\s])", next : "doctype", caseInsensitive: true
              },
              {include : "tag"},
              {token : "text.end-tag-open.xml", regex: "</"},
              {token : "text.tag-open.xml", regex: "<"},
              {include : "reference"},
              {defaultToken : "text.xml"}
          ],

          processing_instruction : [{
              token : "entity.other.attribute-name.decl-attribute-name.xml",
              regex : tagRegex
          }, {
              token : "keyword.operator.decl-attribute-equals.xml",
              regex : "="
          }, {
              include: "whitespace"
          }, {
              include: "string"
          }, {
              token : "punctuation.xml-decl.xml",
              regex : "\\?>",
              next : "start"
          }],

          doctype : [
              {include : "whitespace"},
              {include : "string"},
              {token : "xml-pe.doctype.xml", regex : ">", next : "start"},
              {token : "xml-pe.xml", regex : "[-_a-zA-Z0-9:]+"},
              {token : "punctuation.int-subset", regex : "\\[", push : "int_subset"}
          ],

          int_subset : [{
              token : "text.xml",
              regex : "\\s+"
          }, {
              token: "punctuation.int-subset.xml",
              regex: "]",
              next: "pop"
          }, {
              token : ["punctuation.markup-decl.xml", "keyword.markup-decl.xml"],
              regex : "(<\\!)(" + tagRegex + ")",
              push : [{
                  token : "text",
                  regex : "\\s+"
              },
              {
                  token : "punctuation.markup-decl.xml",
                  regex : ">",
                  next : "pop"
              },
              {include : "string"}]
          }],

          cdata : [
              {token : "string.cdata.xml", regex : "\\]\\]>", next : "start"},
              {token : "text.xml", regex : "\\s+"},
              {token : "text.xml", regex : "(?:[^\\]]|\\](?!\\]>))+"}
          ],

          comment : [
              {token : "comment.end.xml", regex : "-->", next : "start"},
              {defaultToken : "comment.xml"}
          ],

          reference : [{
              token : "constant.language.escape.reference.xml",
              regex : "(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"
          }],

          attr_reference : [{
              token : "constant.language.escape.reference.attribute-value.xml",
              regex : "(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"
          }],

          tag : [{
              token : ["meta.tag.punctuation.tag-open.xml", "meta.tag.punctuation.end-tag-open.xml", "meta.tag.tag-name.xml"],
              regex : "(?:(<)|(</))((?:" + tagRegex + ":)?" + tagRegex + ")",
              next: [
                  {include : "attributes"},
                  {token : "meta.tag.punctuation.tag-close.xml", regex : "/?>", next : "start"}
              ]
          }],

          tag_whitespace : [
              {token : "text.tag-whitespace.xml", regex : "\\s+"}
          ],
          whitespace : [
              {token : "text.whitespace.xml", regex : "\\s+"}
          ],
          string: [{
              token : "string.xml",
              regex : "'",
              push : [
                  {token : "string.xml", regex: "'", next: "pop"},
                  {defaultToken : "string.xml"}
              ]
          }, {
              token : "string.xml",
              regex : '"',
              push : [
                  {token : "string.xml", regex: '"', next: "pop"},
                  {defaultToken : "string.xml"}
              ]
          }],

          attributes: [{
              token : "entity.other.attribute-name.xml",
              regex : tagRegex
          }, {
              token : "keyword.operator.attribute-equals.xml",
              regex : "="
          }, {
              include: "tag_whitespace"
          }, {
              include: "attribute_value"
          }],

          attribute_value: [{
              token : "string.attribute-value.xml",
              regex : "'",
              push : [
                  {token : "string.attribute-value.xml", regex: "'", next: "pop"},
                  {include : "attr_reference"},
                  {defaultToken : "string.attribute-value.xml"}
              ]
          }, {
              token : "string.attribute-value.xml",
              regex : '"',
              push : [
                  {token : "string.attribute-value.xml", regex: '"', next: "pop"},
                  {include : "attr_reference"},
                  {defaultToken : "string.attribute-value.xml"}
              ]
          }]
      };

      if (this.constructor === XmlHighlightRules)
          this.normalizeRules();
  };


  (function() {

      this.embedTagRules = function(HighlightRules, prefix, tag){
          this.$rules.tag.unshift({
              token : ["meta.tag.punctuation.tag-open.xml", "meta.tag." + tag + ".tag-name.xml"],
              regex : "(<)(" + tag + "(?=\\s|>|$))",
              next: [
                  {include : "attributes"},
                  {token : "meta.tag.punctuation.tag-close.xml", regex : "/?>", next : prefix + "start"}
              ]
          });

          this.$rules[tag + "-end"] = [
              {include : "attributes"},
              {token : "meta.tag.punctuation.tag-close.xml", regex : "/?>",  next: "start",
                  onMatch : function(value, currentState, stack) {
                      stack.splice(0);
                      return this.token;
              }}
          ];

          this.embedRules(HighlightRules, prefix, [{
              token: ["meta.tag.punctuation.end-tag-open.xml", "meta.tag." + tag + ".tag-name.xml"],
              regex : "(</)(" + tag + "(?=\\s|>|$))",
              next: tag + "-end"
          }, {
              token: "string.cdata.xml",
              regex : "<\\!\\[CDATA\\["
          }, {
              token: "string.cdata.xml",
              regex : "\\]\\]>"
          }]);
      };

  }).call(TextHighlightRules.prototype);

  oop.inherits(XmlHighlightRules, TextHighlightRules);

  exports.XmlHighlightRules = XmlHighlightRules;
  });

  ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var lang = acequire("../lib/lang");
  var CssHighlightRules = acequire("./css_highlight_rules").CssHighlightRules;
  var JavaScriptHighlightRules = acequire("./javascript_highlight_rules").JavaScriptHighlightRules;
  var XmlHighlightRules = acequire("./xml_highlight_rules").XmlHighlightRules;

  var tagMap = lang.createMap({
      a           : 'anchor',
      button 	    : 'form',
      form        : 'form',
      img         : 'image',
      input       : 'form',
      label       : 'form',
      option      : 'form',
      script      : 'script',
      select      : 'form',
      textarea    : 'form',
      style       : 'style',
      table       : 'table',
      tbody       : 'table',
      td          : 'table',
      tfoot       : 'table',
      th          : 'table',
      tr          : 'table'
  });

  var HtmlHighlightRules = function() {
      XmlHighlightRules.call(this);

      this.addRules({
          attributes: [{
              include : "tag_whitespace"
          }, {
              token : "entity.other.attribute-name.xml",
              regex : "[-_a-zA-Z0-9:.]+"
          }, {
              token : "keyword.operator.attribute-equals.xml",
              regex : "=",
              push : [{
                  include: "tag_whitespace"
              }, {
                  token : "string.unquoted.attribute-value.html",
                  regex : "[^<>='\"`\\s]+",
                  next : "pop"
              }, {
                  token : "empty",
                  regex : "",
                  next : "pop"
              }]
          }, {
              include : "attribute_value"
          }],
          tag: [{
              token : function(start, tag) {
                  var group = tagMap[tag];
                  return ["meta.tag.punctuation." + (start == "<" ? "" : "end-") + "tag-open.xml",
                      "meta.tag" + (group ? "." + group : "") + ".tag-name.xml"];
              },
              regex : "(</?)([-_a-zA-Z0-9:.]+)",
              next: "tag_stuff"
          }],
          tag_stuff: [
              {include : "attributes"},
              {token : "meta.tag.punctuation.tag-close.xml", regex : "/?>", next : "start"}
          ]
      });

      this.embedTagRules(CssHighlightRules, "css-", "style");
      this.embedTagRules(new JavaScriptHighlightRules({jsx: false}).getRules(), "js-", "script");

      if (this.constructor === HtmlHighlightRules)
          this.normalizeRules();
  };

  oop.inherits(HtmlHighlightRules, XmlHighlightRules);

  exports.HtmlHighlightRules = HtmlHighlightRules;
  });

  ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var Behaviour = acequire("../behaviour").Behaviour;
  var TokenIterator = acequire("../../token_iterator").TokenIterator;
  var lang = acequire("../../lib/lang");

  function is(token, type) {
      return token.type.lastIndexOf(type + ".xml") > -1;
  }

  var XmlBehaviour = function () {

      this.add("string_dquotes", "insertion", function (state, action, editor, session, text) {
          if (text == '"' || text == "'") {
              var quote = text;
              var selected = session.doc.getTextRange(editor.getSelectionRange());
              if (selected !== "" && selected !== "'" && selected != '"' && editor.getWrapBehavioursEnabled()) {
                  return {
                      text: quote + selected + quote,
                      selection: false
                  };
              }

              var cursor = editor.getCursorPosition();
              var line = session.doc.getLine(cursor.row);
              var rightChar = line.substring(cursor.column, cursor.column + 1);
              var iterator = new TokenIterator(session, cursor.row, cursor.column);
              var token = iterator.getCurrentToken();

              if (rightChar == quote && (is(token, "attribute-value") || is(token, "string"))) {
                  return {
                      text: "",
                      selection: [1, 1]
                  };
              }

              if (!token)
                  token = iterator.stepBackward();

              if (!token)
                  return;

              while (is(token, "tag-whitespace") || is(token, "whitespace")) {
                  token = iterator.stepBackward();
              }
              var rightSpace = !rightChar || rightChar.match(/\s/);
              if (is(token, "attribute-equals") && (rightSpace || rightChar == '>') || (is(token, "decl-attribute-equals") && (rightSpace || rightChar == '?'))) {
                  return {
                      text: quote + quote,
                      selection: [1, 1]
                  };
              }
          }
      });

      this.add("string_dquotes", "deletion", function(state, action, editor, session, range) {
          var selected = session.doc.getTextRange(range);
          if (!range.isMultiLine() && (selected == '"' || selected == "'")) {
              var line = session.doc.getLine(range.start.row);
              var rightChar = line.substring(range.start.column + 1, range.start.column + 2);
              if (rightChar == selected) {
                  range.end.column++;
                  return range;
              }
          }
      });

      this.add("autoclosing", "insertion", function (state, action, editor, session, text) {
          if (text == '>') {
              var position = editor.getSelectionRange().start;
              var iterator = new TokenIterator(session, position.row, position.column);
              var token = iterator.getCurrentToken() || iterator.stepBackward();
              if (!token || !(is(token, "tag-name") || is(token, "tag-whitespace") || is(token, "attribute-name") || is(token, "attribute-equals") || is(token, "attribute-value")))
                  return;
              if (is(token, "reference.attribute-value"))
                  return;
              if (is(token, "attribute-value")) {
                  var firstChar = token.value.charAt(0);
                  if (firstChar == '"' || firstChar == "'") {
                      var lastChar = token.value.charAt(token.value.length - 1);
                      var tokenEnd = iterator.getCurrentTokenColumn() + token.value.length;
                      if (tokenEnd > position.column || tokenEnd == position.column && firstChar != lastChar)
                          return;
                  }
              }
              while (!is(token, "tag-name")) {
                  token = iterator.stepBackward();
                  if (token.value == "<") {
                      token = iterator.stepForward();
                      break;
                  }
              }

              var tokenRow = iterator.getCurrentTokenRow();
              var tokenColumn = iterator.getCurrentTokenColumn();
              if (is(iterator.stepBackward(), "end-tag-open"))
                  return;

              var element = token.value;
              if (tokenRow == position.row)
                  element = element.substring(0, position.column - tokenColumn);

              if (this.voidElements.hasOwnProperty(element.toLowerCase()))
                   return;

              return {
                 text: ">" + "</" + element + ">",
                 selection: [1, 1]
              };
          }
      });

      this.add("autoindent", "insertion", function (state, action, editor, session, text) {
          if (text == "\n") {
              var cursor = editor.getCursorPosition();
              var line = session.getLine(cursor.row);
              var iterator = new TokenIterator(session, cursor.row, cursor.column);
              var token = iterator.getCurrentToken();

              if (token && token.type.indexOf("tag-close") !== -1) {
                  if (token.value == "/>")
                      return;
                  while (token && token.type.indexOf("tag-name") === -1) {
                      token = iterator.stepBackward();
                  }

                  if (!token) {
                      return;
                  }

                  var tag = token.value;
                  var row = iterator.getCurrentTokenRow();
                  token = iterator.stepBackward();
                  if (!token || token.type.indexOf("end-tag") !== -1) {
                      return;
                  }

                  if (this.voidElements && !this.voidElements[tag]) {
                      var nextToken = session.getTokenAt(cursor.row, cursor.column+1);
                      var line = session.getLine(row);
                      var nextIndent = this.$getIndent(line);
                      var indent = nextIndent + session.getTabString();

                      if (nextToken && nextToken.value === "</") {
                          return {
                              text: "\n" + indent + "\n" + nextIndent,
                              selection: [1, indent.length, 1, indent.length]
                          };
                      } else {
                          return {
                              text: "\n" + indent
                          };
                      }
                  }
              }
          }
      });

  };

  oop.inherits(XmlBehaviour, Behaviour);

  exports.XmlBehaviour = XmlBehaviour;
  });

  ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var BaseFoldMode = acequire("./fold_mode").FoldMode;

  var FoldMode = exports.FoldMode = function(defaultMode, subModes) {
      this.defaultMode = defaultMode;
      this.subModes = subModes;
  };
  oop.inherits(FoldMode, BaseFoldMode);

  (function() {


      this.$getMode = function(state) {
          if (typeof state != "string") 
              state = state[0];
          for (var key in this.subModes) {
              if (state.indexOf(key) === 0)
                  return this.subModes[key];
          }
          return null;
      };
      
      this.$tryMode = function(state, session, foldStyle, row) {
          var mode = this.$getMode(state);
          return (mode ? mode.getFoldWidget(session, foldStyle, row) : "");
      };

      this.getFoldWidget = function(session, foldStyle, row) {
          return (
              this.$tryMode(session.getState(row-1), session, foldStyle, row) ||
              this.$tryMode(session.getState(row), session, foldStyle, row) ||
              this.defaultMode.getFoldWidget(session, foldStyle, row)
          );
      };

      this.getFoldWidgetRange = function(session, foldStyle, row) {
          var mode = this.$getMode(session.getState(row-1));
          
          if (!mode || !mode.getFoldWidget(session, foldStyle, row))
              mode = this.$getMode(session.getState(row));
          
          if (!mode || !mode.getFoldWidget(session, foldStyle, row))
              mode = this.defaultMode;
          
          return mode.getFoldWidgetRange(session, foldStyle, row);
      };

  }).call(FoldMode.prototype);

  });

  ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var lang = acequire("../../lib/lang");
  var Range = acequire("../../range").Range;
  var BaseFoldMode = acequire("./fold_mode").FoldMode;
  var TokenIterator = acequire("../../token_iterator").TokenIterator;

  var FoldMode = exports.FoldMode = function(voidElements, optionalEndTags) {
      BaseFoldMode.call(this);
      this.voidElements = voidElements || {};
      this.optionalEndTags = oop.mixin({}, this.voidElements);
      if (optionalEndTags)
          oop.mixin(this.optionalEndTags, optionalEndTags);
      
  };
  oop.inherits(FoldMode, BaseFoldMode);

  var Tag = function() {
      this.tagName = "";
      this.closing = false;
      this.selfClosing = false;
      this.start = {row: 0, column: 0};
      this.end = {row: 0, column: 0};
  };

  function is(token, type) {
      return token.type.lastIndexOf(type + ".xml") > -1;
  }

  (function() {

      this.getFoldWidget = function(session, foldStyle, row) {
          var tag = this._getFirstTagInLine(session, row);

          if (!tag)
              return this.getCommentFoldWidget(session, row);

          if (tag.closing || (!tag.tagName && tag.selfClosing))
              return foldStyle == "markbeginend" ? "end" : "";

          if (!tag.tagName || tag.selfClosing || this.voidElements.hasOwnProperty(tag.tagName.toLowerCase()))
              return "";

          if (this._findEndTagInLine(session, row, tag.tagName, tag.end.column))
              return "";

          return "start";
      };

      this.getCommentFoldWidget = function(session, row) {
          if (/comment/.test(session.getState(row)) && /<!-/.test(session.getLine(row)))
              return "start";
          return "";
      };
      this._getFirstTagInLine = function(session, row) {
          var tokens = session.getTokens(row);
          var tag = new Tag();

          for (var i = 0; i < tokens.length; i++) {
              var token = tokens[i];
              if (is(token, "tag-open")) {
                  tag.end.column = tag.start.column + token.value.length;
                  tag.closing = is(token, "end-tag-open");
                  token = tokens[++i];
                  if (!token)
                      return null;
                  tag.tagName = token.value;
                  tag.end.column += token.value.length;
                  for (i++; i < tokens.length; i++) {
                      token = tokens[i];
                      tag.end.column += token.value.length;
                      if (is(token, "tag-close")) {
                          tag.selfClosing = token.value == '/>';
                          break;
                      }
                  }
                  return tag;
              } else if (is(token, "tag-close")) {
                  tag.selfClosing = token.value == '/>';
                  return tag;
              }
              tag.start.column += token.value.length;
          }

          return null;
      };

      this._findEndTagInLine = function(session, row, tagName, startColumn) {
          var tokens = session.getTokens(row);
          var column = 0;
          for (var i = 0; i < tokens.length; i++) {
              var token = tokens[i];
              column += token.value.length;
              if (column < startColumn)
                  continue;
              if (is(token, "end-tag-open")) {
                  token = tokens[i + 1];
                  if (token && token.value == tagName)
                      return true;
              }
          }
          return false;
      };
      this._readTagForward = function(iterator) {
          var token = iterator.getCurrentToken();
          if (!token)
              return null;

          var tag = new Tag();
          do {
              if (is(token, "tag-open")) {
                  tag.closing = is(token, "end-tag-open");
                  tag.start.row = iterator.getCurrentTokenRow();
                  tag.start.column = iterator.getCurrentTokenColumn();
              } else if (is(token, "tag-name")) {
                  tag.tagName = token.value;
              } else if (is(token, "tag-close")) {
                  tag.selfClosing = token.value == "/>";
                  tag.end.row = iterator.getCurrentTokenRow();
                  tag.end.column = iterator.getCurrentTokenColumn() + token.value.length;
                  iterator.stepForward();
                  return tag;
              }
          } while(token = iterator.stepForward());

          return null;
      };
      
      this._readTagBackward = function(iterator) {
          var token = iterator.getCurrentToken();
          if (!token)
              return null;

          var tag = new Tag();
          do {
              if (is(token, "tag-open")) {
                  tag.closing = is(token, "end-tag-open");
                  tag.start.row = iterator.getCurrentTokenRow();
                  tag.start.column = iterator.getCurrentTokenColumn();
                  iterator.stepBackward();
                  return tag;
              } else if (is(token, "tag-name")) {
                  tag.tagName = token.value;
              } else if (is(token, "tag-close")) {
                  tag.selfClosing = token.value == "/>";
                  tag.end.row = iterator.getCurrentTokenRow();
                  tag.end.column = iterator.getCurrentTokenColumn() + token.value.length;
              }
          } while(token = iterator.stepBackward());

          return null;
      };
      
      this._pop = function(stack, tag) {
          while (stack.length) {
              
              var top = stack[stack.length-1];
              if (!tag || top.tagName == tag.tagName) {
                  return stack.pop();
              }
              else if (this.optionalEndTags.hasOwnProperty(top.tagName)) {
                  stack.pop();
                  continue;
              } else {
                  return null;
              }
          }
      };
      
      this.getFoldWidgetRange = function(session, foldStyle, row) {
          var firstTag = this._getFirstTagInLine(session, row);
          
          if (!firstTag) {
              return this.getCommentFoldWidget(session, row)
                  && session.getCommentFoldRange(row, session.getLine(row).length);
          }
          
          var isBackward = firstTag.closing || firstTag.selfClosing;
          var stack = [];
          var tag;
          
          if (!isBackward) {
              var iterator = new TokenIterator(session, row, firstTag.start.column);
              var start = {
                  row: row,
                  column: firstTag.start.column + firstTag.tagName.length + 2
              };
              if (firstTag.start.row == firstTag.end.row)
                  start.column = firstTag.end.column;
              while (tag = this._readTagForward(iterator)) {
                  if (tag.selfClosing) {
                      if (!stack.length) {
                          tag.start.column += tag.tagName.length + 2;
                          tag.end.column -= 2;
                          return Range.fromPoints(tag.start, tag.end);
                      } else
                          continue;
                  }
                  
                  if (tag.closing) {
                      this._pop(stack, tag);
                      if (stack.length == 0)
                          return Range.fromPoints(start, tag.start);
                  }
                  else {
                      stack.push(tag);
                  }
              }
          }
          else {
              var iterator = new TokenIterator(session, row, firstTag.end.column);
              var end = {
                  row: row,
                  column: firstTag.start.column
              };
              
              while (tag = this._readTagBackward(iterator)) {
                  if (tag.selfClosing) {
                      if (!stack.length) {
                          tag.start.column += tag.tagName.length + 2;
                          tag.end.column -= 2;
                          return Range.fromPoints(tag.start, tag.end);
                      } else
                          continue;
                  }
                  
                  if (!tag.closing) {
                      this._pop(stack, tag);
                      if (stack.length == 0) {
                          tag.start.column += tag.tagName.length + 2;
                          if (tag.start.row == tag.end.row && tag.start.column < tag.end.column)
                              tag.start.column = tag.end.column;
                          return Range.fromPoints(tag.start, end);
                      }
                  }
                  else {
                      stack.push(tag);
                  }
              }
          }
          
      };

  }).call(FoldMode.prototype);

  });

  ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"], function(acequire, exports, module) {

  var oop = acequire("../../lib/oop");
  var MixedFoldMode = acequire("./mixed").FoldMode;
  var XmlFoldMode = acequire("./xml").FoldMode;
  var CStyleFoldMode = acequire("./cstyle").FoldMode;

  var FoldMode = exports.FoldMode = function(voidElements, optionalTags) {
      MixedFoldMode.call(this, new XmlFoldMode(voidElements, optionalTags), {
          "js-": new CStyleFoldMode(),
          "css-": new CStyleFoldMode()
      });
  };

  oop.inherits(FoldMode, MixedFoldMode);

  });

  ace.define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"], function(acequire, exports, module) {

  var TokenIterator = acequire("../token_iterator").TokenIterator;

  var commonAttributes = [
      "accesskey",
      "class",
      "contenteditable",
      "contextmenu",
      "dir",
      "draggable",
      "dropzone",
      "hidden",
      "id",
      "inert",
      "itemid",
      "itemprop",
      "itemref",
      "itemscope",
      "itemtype",
      "lang",
      "spellcheck",
      "style",
      "tabindex",
      "title",
      "translate"
  ];

  var eventAttributes = [
      "onabort",
      "onblur",
      "oncancel",
      "oncanplay",
      "oncanplaythrough",
      "onchange",
      "onclick",
      "onclose",
      "oncontextmenu",
      "oncuechange",
      "ondblclick",
      "ondrag",
      "ondragend",
      "ondragenter",
      "ondragleave",
      "ondragover",
      "ondragstart",
      "ondrop",
      "ondurationchange",
      "onemptied",
      "onended",
      "onerror",
      "onfocus",
      "oninput",
      "oninvalid",
      "onkeydown",
      "onkeypress",
      "onkeyup",
      "onload",
      "onloadeddata",
      "onloadedmetadata",
      "onloadstart",
      "onmousedown",
      "onmousemove",
      "onmouseout",
      "onmouseover",
      "onmouseup",
      "onmousewheel",
      "onpause",
      "onplay",
      "onplaying",
      "onprogress",
      "onratechange",
      "onreset",
      "onscroll",
      "onseeked",
      "onseeking",
      "onselect",
      "onshow",
      "onstalled",
      "onsubmit",
      "onsuspend",
      "ontimeupdate",
      "onvolumechange",
      "onwaiting"
  ];

  var globalAttributes = commonAttributes.concat(eventAttributes);

  var attributeMap = {
      "html": {"manifest": 1},
      "head": {},
      "title": {},
      "base": {"href": 1, "target": 1},
      "link": {"href": 1, "hreflang": 1, "rel": {"stylesheet": 1, "icon": 1}, "media": {"all": 1, "screen": 1, "print": 1}, "type": {"text/css": 1, "image/png": 1, "image/jpeg": 1, "image/gif": 1}, "sizes": 1},
      "meta": {"http-equiv": {"content-type": 1}, "name": {"description": 1, "keywords": 1}, "content": {"text/html; charset=UTF-8": 1}, "charset": 1},
      "style": {"type": 1, "media": {"all": 1, "screen": 1, "print": 1}, "scoped": 1},
      "script": {"charset": 1, "type": {"text/javascript": 1}, "src": 1, "defer": 1, "async": 1},
      "noscript": {"href": 1},
      "body": {"onafterprint": 1, "onbeforeprint": 1, "onbeforeunload": 1, "onhashchange": 1, "onmessage": 1, "onoffline": 1, "onpopstate": 1, "onredo": 1, "onresize": 1, "onstorage": 1, "onundo": 1, "onunload": 1},
      "section": {},
      "nav": {},
      "article": {"pubdate": 1},
      "aside": {},
      "h1": {},
      "h2": {},
      "h3": {},
      "h4": {},
      "h5": {},
      "h6": {},
      "header": {},
      "footer": {},
      "address": {},
      "main": {},
      "p": {},
      "hr": {},
      "pre": {},
      "blockquote": {"cite": 1},
      "ol": {"start": 1, "reversed": 1},
      "ul": {},
      "li": {"value": 1},
      "dl": {},
      "dt": {},
      "dd": {},
      "figure": {},
      "figcaption": {},
      "div": {},
      "a": {"href": 1, "target": {"_blank": 1, "top": 1}, "ping": 1, "rel": {"nofollow": 1, "alternate": 1, "author": 1, "bookmark": 1, "help": 1, "license": 1, "next": 1, "noreferrer": 1, "prefetch": 1, "prev": 1, "search": 1, "tag": 1}, "media": 1, "hreflang": 1, "type": 1},
      "em": {},
      "strong": {},
      "small": {},
      "s": {},
      "cite": {},
      "q": {"cite": 1},
      "dfn": {},
      "abbr": {},
      "data": {},
      "time": {"datetime": 1},
      "code": {},
      "var": {},
      "samp": {},
      "kbd": {},
      "sub": {},
      "sup": {},
      "i": {},
      "b": {},
      "u": {},
      "mark": {},
      "ruby": {},
      "rt": {},
      "rp": {},
      "bdi": {},
      "bdo": {},
      "span": {},
      "br": {},
      "wbr": {},
      "ins": {"cite": 1, "datetime": 1},
      "del": {"cite": 1, "datetime": 1},
      "img": {"alt": 1, "src": 1, "height": 1, "width": 1, "usemap": 1, "ismap": 1},
      "iframe": {"name": 1, "src": 1, "height": 1, "width": 1, "sandbox": {"allow-same-origin": 1, "allow-top-navigation": 1, "allow-forms": 1, "allow-scripts": 1}, "seamless": {"seamless": 1}},
      "embed": {"src": 1, "height": 1, "width": 1, "type": 1},
      "object": {"param": 1, "data": 1, "type": 1, "height" : 1, "width": 1, "usemap": 1, "name": 1, "form": 1, "classid": 1},
      "param": {"name": 1, "value": 1},
      "video": {"src": 1, "autobuffer": 1, "autoplay": {"autoplay": 1}, "loop": {"loop": 1}, "controls": {"controls": 1}, "width": 1, "height": 1, "poster": 1, "muted": {"muted": 1}, "preload": {"auto": 1, "metadata": 1, "none": 1}},
      "audio": {"src": 1, "autobuffer": 1, "autoplay": {"autoplay": 1}, "loop": {"loop": 1}, "controls": {"controls": 1}, "muted": {"muted": 1}, "preload": {"auto": 1, "metadata": 1, "none": 1 }},
      "source": {"src": 1, "type": 1, "media": 1},
      "track": {"kind": 1, "src": 1, "srclang": 1, "label": 1, "default": 1},
      "canvas": {"width": 1, "height": 1},
      "map": {"name": 1},
      "area": {"shape": 1, "coords": 1, "href": 1, "hreflang": 1, "alt": 1, "target": 1, "media": 1, "rel": 1, "ping": 1, "type": 1},
      "svg": {},
      "math": {},
      "table": {"summary": 1},
      "caption": {},
      "colgroup": {"span": 1},
      "col": {"span": 1},
      "tbody": {},
      "thead": {},
      "tfoot": {},
      "tr": {},
      "td": {"headers": 1, "rowspan": 1, "colspan": 1},
      "th": {"headers": 1, "rowspan": 1, "colspan": 1, "scope": 1},
      "form": {"accept-charset": 1, "action": 1, "autocomplete": 1, "enctype": {"multipart/form-data": 1, "application/x-www-form-urlencoded": 1}, "method": {"get": 1, "post": 1}, "name": 1, "novalidate": 1, "target": {"_blank": 1, "top": 1}},
      "fieldset": {"disabled": 1, "form": 1, "name": 1},
      "legend": {},
      "label": {"form": 1, "for": 1},
      "input": {
          "type": {"text": 1, "password": 1, "hidden": 1, "checkbox": 1, "submit": 1, "radio": 1, "file": 1, "button": 1, "reset": 1, "image": 31, "color": 1, "date": 1, "datetime": 1, "datetime-local": 1, "email": 1, "month": 1, "number": 1, "range": 1, "search": 1, "tel": 1, "time": 1, "url": 1, "week": 1},
          "accept": 1, "alt": 1, "autocomplete": {"on": 1, "off": 1}, "autofocus": {"autofocus": 1}, "checked": {"checked": 1}, "disabled": {"disabled": 1}, "form": 1, "formaction": 1, "formenctype": {"application/x-www-form-urlencoded": 1, "multipart/form-data": 1, "text/plain": 1}, "formmethod": {"get": 1, "post": 1}, "formnovalidate": {"formnovalidate": 1}, "formtarget": {"_blank": 1, "_self": 1, "_parent": 1, "_top": 1}, "height": 1, "list": 1, "max": 1, "maxlength": 1, "min": 1, "multiple": {"multiple": 1}, "name": 1, "pattern": 1, "placeholder": 1, "readonly": {"readonly": 1}, "acequired": {"acequired": 1}, "size": 1, "src": 1, "step": 1, "width": 1, "files": 1, "value": 1},
      "button": {"autofocus": 1, "disabled": {"disabled": 1}, "form": 1, "formaction": 1, "formenctype": 1, "formmethod": 1, "formnovalidate": 1, "formtarget": 1, "name": 1, "value": 1, "type": {"button": 1, "submit": 1}},
      "select": {"autofocus": 1, "disabled": 1, "form": 1, "multiple": {"multiple": 1}, "name": 1, "size": 1, "readonly":{"readonly": 1}},
      "datalist": {},
      "optgroup": {"disabled": 1, "label": 1},
      "option": {"disabled": 1, "selected": 1, "label": 1, "value": 1},
      "textarea": {"autofocus": {"autofocus": 1}, "disabled": {"disabled": 1}, "form": 1, "maxlength": 1, "name": 1, "placeholder": 1, "readonly": {"readonly": 1}, "acequired": {"acequired": 1}, "rows": 1, "cols": 1, "wrap": {"on": 1, "off": 1, "hard": 1, "soft": 1}},
      "keygen": {"autofocus": 1, "challenge": {"challenge": 1}, "disabled": {"disabled": 1}, "form": 1, "keytype": {"rsa": 1, "dsa": 1, "ec": 1}, "name": 1},
      "output": {"for": 1, "form": 1, "name": 1},
      "progress": {"value": 1, "max": 1},
      "meter": {"value": 1, "min": 1, "max": 1, "low": 1, "high": 1, "optimum": 1},
      "details": {"open": 1},
      "summary": {},
      "command": {"type": 1, "label": 1, "icon": 1, "disabled": 1, "checked": 1, "radiogroup": 1, "command": 1},
      "menu": {"type": 1, "label": 1},
      "dialog": {"open": 1}
  };

  var elements = Object.keys(attributeMap);

  function is(token, type) {
      return token.type.lastIndexOf(type + ".xml") > -1;
  }

  function findTagName(session, pos) {
      var iterator = new TokenIterator(session, pos.row, pos.column);
      var token = iterator.getCurrentToken();
      while (token && !is(token, "tag-name")){
          token = iterator.stepBackward();
      }
      if (token)
          return token.value;
  }

  function findAttributeName(session, pos) {
      var iterator = new TokenIterator(session, pos.row, pos.column);
      var token = iterator.getCurrentToken();
      while (token && !is(token, "attribute-name")){
          token = iterator.stepBackward();
      }
      if (token)
          return token.value;
  }

  var HtmlCompletions = function() {

  };

  (function() {

      this.getCompletions = function(state, session, pos, prefix) {
          var token = session.getTokenAt(pos.row, pos.column);

          if (!token)
              return [];
          if (is(token, "tag-name") || is(token, "tag-open") || is(token, "end-tag-open"))
              return this.getTagCompletions(state, session, pos, prefix);
          if (is(token, "tag-whitespace") || is(token, "attribute-name"))
              return this.getAttributeCompletions(state, session, pos, prefix);
          if (is(token, "attribute-value"))
              return this.getAttributeValueCompletions(state, session, pos, prefix);
          var line = session.getLine(pos.row).substr(0, pos.column);
          if (/&[a-z]*$/i.test(line))
              return this.getHTMLEntityCompletions(state, session, pos, prefix);

          return [];
      };

      this.getTagCompletions = function(state, session, pos, prefix) {
          return elements.map(function(element){
              return {
                  value: element,
                  meta: "tag",
                  score: Number.MAX_VALUE
              };
          });
      };

      this.getAttributeCompletions = function(state, session, pos, prefix) {
          var tagName = findTagName(session, pos);
          if (!tagName)
              return [];
          var attributes = globalAttributes;
          if (tagName in attributeMap) {
              attributes = attributes.concat(Object.keys(attributeMap[tagName]));
          }
          return attributes.map(function(attribute){
              return {
                  caption: attribute,
                  snippet: attribute + '="$0"',
                  meta: "attribute",
                  score: Number.MAX_VALUE
              };
          });
      };

      this.getAttributeValueCompletions = function(state, session, pos, prefix) {
          var tagName = findTagName(session, pos);
          var attributeName = findAttributeName(session, pos);
          
          if (!tagName)
              return [];
          var values = [];
          if (tagName in attributeMap && attributeName in attributeMap[tagName] && typeof attributeMap[tagName][attributeName] === "object") {
              values = Object.keys(attributeMap[tagName][attributeName]);
          }
          return values.map(function(value){
              return {
                  caption: value,
                  snippet: value,
                  meta: "attribute value",
                  score: Number.MAX_VALUE
              };
          });
      };

      this.getHTMLEntityCompletions = function(state, session, pos, prefix) {
          var values = ['Aacute;', 'aacute;', 'Acirc;', 'acirc;', 'acute;', 'AElig;', 'aelig;', 'Agrave;', 'agrave;', 'alefsym;', 'Alpha;', 'alpha;', 'amp;', 'and;', 'ang;', 'Aring;', 'aring;', 'asymp;', 'Atilde;', 'atilde;', 'Auml;', 'auml;', 'bdquo;', 'Beta;', 'beta;', 'brvbar;', 'bull;', 'cap;', 'Ccedil;', 'ccedil;', 'cedil;', 'cent;', 'Chi;', 'chi;', 'circ;', 'clubs;', 'cong;', 'copy;', 'crarr;', 'cup;', 'curren;', 'Dagger;', 'dagger;', 'dArr;', 'darr;', 'deg;', 'Delta;', 'delta;', 'diams;', 'divide;', 'Eacute;', 'eacute;', 'Ecirc;', 'ecirc;', 'Egrave;', 'egrave;', 'empty;', 'emsp;', 'ensp;', 'Epsilon;', 'epsilon;', 'equiv;', 'Eta;', 'eta;', 'ETH;', 'eth;', 'Euml;', 'euml;', 'euro;', 'exist;', 'fnof;', 'forall;', 'frac12;', 'frac14;', 'frac34;', 'frasl;', 'Gamma;', 'gamma;', 'ge;', 'gt;', 'hArr;', 'harr;', 'hearts;', 'hellip;', 'Iacute;', 'iacute;', 'Icirc;', 'icirc;', 'iexcl;', 'Igrave;', 'igrave;', 'image;', 'infin;', 'int;', 'Iota;', 'iota;', 'iquest;', 'isin;', 'Iuml;', 'iuml;', 'Kappa;', 'kappa;', 'Lambda;', 'lambda;', 'lang;', 'laquo;', 'lArr;', 'larr;', 'lceil;', 'ldquo;', 'le;', 'lfloor;', 'lowast;', 'loz;', 'lrm;', 'lsaquo;', 'lsquo;', 'lt;', 'macr;', 'mdash;', 'micro;', 'middot;', 'minus;', 'Mu;', 'mu;', 'nabla;', 'nbsp;', 'ndash;', 'ne;', 'ni;', 'not;', 'notin;', 'nsub;', 'Ntilde;', 'ntilde;', 'Nu;', 'nu;', 'Oacute;', 'oacute;', 'Ocirc;', 'ocirc;', 'OElig;', 'oelig;', 'Ograve;', 'ograve;', 'oline;', 'Omega;', 'omega;', 'Omicron;', 'omicron;', 'oplus;', 'or;', 'ordf;', 'ordm;', 'Oslash;', 'oslash;', 'Otilde;', 'otilde;', 'otimes;', 'Ouml;', 'ouml;', 'para;', 'part;', 'permil;', 'perp;', 'Phi;', 'phi;', 'Pi;', 'pi;', 'piv;', 'plusmn;', 'pound;', 'Prime;', 'prime;', 'prod;', 'prop;', 'Psi;', 'psi;', 'quot;', 'radic;', 'rang;', 'raquo;', 'rArr;', 'rarr;', 'rceil;', 'rdquo;', 'real;', 'reg;', 'rfloor;', 'Rho;', 'rho;', 'rlm;', 'rsaquo;', 'rsquo;', 'sbquo;', 'Scaron;', 'scaron;', 'sdot;', 'sect;', 'shy;', 'Sigma;', 'sigma;', 'sigmaf;', 'sim;', 'spades;', 'sub;', 'sube;', 'sum;', 'sup;', 'sup1;', 'sup2;', 'sup3;', 'supe;', 'szlig;', 'Tau;', 'tau;', 'there4;', 'Theta;', 'theta;', 'thetasym;', 'thinsp;', 'THORN;', 'thorn;', 'tilde;', 'times;', 'trade;', 'Uacute;', 'uacute;', 'uArr;', 'uarr;', 'Ucirc;', 'ucirc;', 'Ugrave;', 'ugrave;', 'uml;', 'upsih;', 'Upsilon;', 'upsilon;', 'Uuml;', 'uuml;', 'weierp;', 'Xi;', 'xi;', 'Yacute;', 'yacute;', 'yen;', 'Yuml;', 'yuml;', 'Zeta;', 'zeta;', 'zwj;', 'zwnj;'];

          return values.map(function(value){
              return {
                  caption: value,
                  snippet: value,
                  meta: "html entity",
                  score: Number.MAX_VALUE
              };
          });
      };

  }).call(HtmlCompletions.prototype);

  exports.HtmlCompletions = HtmlCompletions;
  });

  ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"], function(acequire, exports, module) {

  var oop = acequire("../lib/oop");
  var lang = acequire("../lib/lang");
  var TextMode = acequire("./text").Mode;
  var JavaScriptMode = acequire("./javascript").Mode;
  var CssMode = acequire("./css").Mode;
  var HtmlHighlightRules = acequire("./html_highlight_rules").HtmlHighlightRules;
  var XmlBehaviour = acequire("./behaviour/xml").XmlBehaviour;
  var HtmlFoldMode = acequire("./folding/html").FoldMode;
  var HtmlCompletions = acequire("./html_completions").HtmlCompletions;
  var WorkerClient = acequire("../worker/worker_client").WorkerClient;
  var voidElements = ["area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "meta", "menuitem", "param", "source", "track", "wbr"];
  var optionalEndTags = ["li", "dt", "dd", "p", "rt", "rp", "optgroup", "option", "colgroup", "td", "th"];

  var Mode = function(options) {
      this.fragmentContext = options && options.fragmentContext;
      this.HighlightRules = HtmlHighlightRules;
      this.$behaviour = new XmlBehaviour();
      this.$completer = new HtmlCompletions();
      
      this.createModeDelegates({
          "js-": JavaScriptMode,
          "css-": CssMode
      });
      
      this.foldingRules = new HtmlFoldMode(this.voidElements, lang.arrayToMap(optionalEndTags));
  };
  oop.inherits(Mode, TextMode);

  (function() {

      this.blockComment = {start: "<!--", end: "-->"};

      this.voidElements = lang.arrayToMap(voidElements);

      this.getNextLineIndent = function(state, line, tab) {
          return this.$getIndent(line);
      };

      this.checkOutdent = function(state, line, input) {
          return false;
      };

      this.getCompletions = function(state, session, pos, prefix) {
          return this.$completer.getCompletions(state, session, pos, prefix);
      };

      this.createWorker = function(session) {
          if (this.constructor != Mode)
              return;
          var worker = new WorkerClient(["ace"], html$1, "Worker");
          worker.attachToDocument(session.getDocument());

          if (this.fragmentContext)
              worker.call("setOptions", [{context: this.fragmentContext}]);

          worker.on("error", function(e) {
              session.setAnnotations(e.data);
          });

          worker.on("terminate", function() {
              session.clearAnnotations();
          });

          return worker;
      };

      this.$id = "ace/mode/html";
  }).call(Mode.prototype);

  exports.Mode = Mode;
  });

  ace.define("ace/theme/chrome",["require","exports","module","ace/lib/dom"], function(acequire, exports, module) {

  exports.isDark = false;
  exports.cssClass = "ace-chrome";
  exports.cssText = ".ace-chrome .ace_gutter {\
background: #ebebeb;\
color: #333;\
overflow : hidden;\
}\
.ace-chrome .ace_print-margin {\
width: 1px;\
background: #e8e8e8;\
}\
.ace-chrome {\
background-color: #FFFFFF;\
color: black;\
}\
.ace-chrome .ace_cursor {\
color: black;\
}\
.ace-chrome .ace_invisible {\
color: rgb(191, 191, 191);\
}\
.ace-chrome .ace_constant.ace_buildin {\
color: rgb(88, 72, 246);\
}\
.ace-chrome .ace_constant.ace_language {\
color: rgb(88, 92, 246);\
}\
.ace-chrome .ace_constant.ace_library {\
color: rgb(6, 150, 14);\
}\
.ace-chrome .ace_invalid {\
background-color: rgb(153, 0, 0);\
color: white;\
}\
.ace-chrome .ace_fold {\
}\
.ace-chrome .ace_support.ace_function {\
color: rgb(60, 76, 114);\
}\
.ace-chrome .ace_support.ace_constant {\
color: rgb(6, 150, 14);\
}\
.ace-chrome .ace_support.ace_type,\
.ace-chrome .ace_support.ace_class\
.ace-chrome .ace_support.ace_other {\
color: rgb(109, 121, 222);\
}\
.ace-chrome .ace_variable.ace_parameter {\
font-style:italic;\
color:#FD971F;\
}\
.ace-chrome .ace_keyword.ace_operator {\
color: rgb(104, 118, 135);\
}\
.ace-chrome .ace_comment {\
color: #236e24;\
}\
.ace-chrome .ace_comment.ace_doc {\
color: #236e24;\
}\
.ace-chrome .ace_comment.ace_doc.ace_tag {\
color: #236e24;\
}\
.ace-chrome .ace_constant.ace_numeric {\
color: rgb(0, 0, 205);\
}\
.ace-chrome .ace_variable {\
color: rgb(49, 132, 149);\
}\
.ace-chrome .ace_xml-pe {\
color: rgb(104, 104, 91);\
}\
.ace-chrome .ace_entity.ace_name.ace_function {\
color: #0000A2;\
}\
.ace-chrome .ace_heading {\
color: rgb(12, 7, 255);\
}\
.ace-chrome .ace_list {\
color:rgb(185, 6, 144);\
}\
.ace-chrome .ace_marker-layer .ace_selection {\
background: rgb(181, 213, 255);\
}\
.ace-chrome .ace_marker-layer .ace_step {\
background: rgb(252, 255, 0);\
}\
.ace-chrome .ace_marker-layer .ace_stack {\
background: rgb(164, 229, 101);\
}\
.ace-chrome .ace_marker-layer .ace_bracket {\
margin: -1px 0 0 -1px;\
border: 1px solid rgb(192, 192, 192);\
}\
.ace-chrome .ace_marker-layer .ace_active-line {\
background: rgba(0, 0, 0, 0.07);\
}\
.ace-chrome .ace_gutter-active-line {\
background-color : #dcdcdc;\
}\
.ace-chrome .ace_marker-layer .ace_selected-word {\
background: rgb(250, 250, 255);\
border: 1px solid rgb(200, 200, 250);\
}\
.ace-chrome .ace_storage,\
.ace-chrome .ace_keyword,\
.ace-chrome .ace_meta.ace_tag {\
color: rgb(147, 15, 128);\
}\
.ace-chrome .ace_string.ace_regex {\
color: rgb(255, 0, 0)\
}\
.ace-chrome .ace_string {\
color: #1A1AA6;\
}\
.ace-chrome .ace_entity.ace_other.ace_attribute-name {\
color: #994409;\
}\
.ace-chrome .ace_indent-guide {\
background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\
}\
";

  var dom = acequire("../lib/dom");
  dom.importCssString(exports.cssText, exports.cssClass);
  });

  window.ace = brace;
  /** @typedef {import('jodit/src/Config').Config & import('jodit/src/plugins')} Config */

  /** @typedef {import('jodit').IJodit} Jodit */

  var SourceEditorPlugin =
  /*#__PURE__*/
  function () {
    _createClass(SourceEditorPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'source-editor';
      }
    }]);

    function SourceEditorPlugin(options) {
      _classCallCheck(this, SourceEditorPlugin);

      options.theme = options.theme || 'ace/theme/chrome';
      autoBind(this);
    }
    /**
     * @param {Config} config
     */


    _createClass(SourceEditorPlugin, [{
      key: "apply",
      value: function apply(config) {
        config.sourceEditorNativeOptions = config.sourceEditorNativeOptions || {};
        Object.assign(config.sourceEditorNativeOptions, {
          mode: 'ace/mode/html',
          theme: this.options.theme
        });
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "init",
      value: function init(jodit) {
        if (jodit.options.beautifyHTML) {
          // NOTE: Unfortunately jodit gets beautify function from window global. :(
          window.html_beautify = html;
        }

        jodit.events.on('aceInited', this.onAceEditorReady);
      }
    }, {
      key: "onAceEditorReady",
      value: function onAceEditorReady() {
        var source = this.jodit.__plugins.source;
        /** @type {import('brace').Editor} */

        var aceEditor = source.aceEditor;
        aceEditor.setShowPrintMargin(false);
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "beforeDestruct",
      value: function beforeDestruct(jodit) {
        jodit.events.off('aceInited', this.onAceEditorReady);
      }
    }]);

    return SourceEditorPlugin;
  }();

  var scrollparent = createCommonjsModule(function (module) {
  (function (root, factory) {
    if ( module.exports) {
      module.exports = factory();
    } else {
      root.Scrollparent = factory();
    }
  }(commonjsGlobal, function () {
    var regex = /(auto|scroll)/;

    var parents = function (node, ps) {
      if (node.parentNode === null) { return ps; }

      return parents(node.parentNode, ps.concat([node]));
    };

    var style = function (node, prop) {
      return getComputedStyle(node, null).getPropertyValue(prop);
    };

    var overflow = function (node) {
      return style(node, "overflow") + style(node, "overflow-y") + style(node, "overflow-x");
    };

    var scroll = function (node) {
     return regex.test(overflow(node));
    };

    var scrollParent = function (node) {
      if (!(node instanceof HTMLElement || node instanceof SVGElement)) {
        return ;
      }

      var ps = parents(node.parentNode, []);

      for (var i = 0; i < ps.length; i += 1) {
        if (scroll(ps[i])) {
          return ps[i];
        }
      }

      return document.scrollingElement || document.documentElement;
    };

    return scrollParent;
  }));
  });

  var JODIT_RECALC_POPUP_POSITION_EVENT = 'recalcPositionPopup';
  var JODIT_DEFAULT_EVENT_NAMESPACE$1 = 'JoditEventDefaultNamespace';
  /** @typedef {import('jodit').IJodit} Jodit */

  var TablePopupsPlugin =
  /*#__PURE__*/
  function () {
    _createClass(TablePopupsPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'table-popups';
      }
    }]);

    function TablePopupsPlugin() {
      _classCallCheck(this, TablePopupsPlugin);

      autoBind(this);
    }
    /**
     * @param {Jodit} jodit
     */


    _createClass(TablePopupsPlugin, [{
      key: "init",
      value: function init(jodit) {
        var self = this;
        var afterInitHook = jodit.afterInitHook;

        jodit.afterInitHook = function () {
          afterInitHook.apply(this, arguments);
          self.observeTables(jodit);
          self.scrollContainer = scrollparent(jodit.container);
          if (self.scrollContainer) self.addScrollHandler(jodit);
        };
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "observeTables",
      value: function observeTables(jodit) {
        var Jodit = jodit.constructor;
        var table = jodit.__plugins.table;
        var query = Jodit.modules.Helpers.$$;
        query('table', jodit.editor).forEach(function (tableEl) {
          if (table[table.__key]) return;
          table.observe(tableEl);
        });
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "addScrollHandler",
      value: function addScrollHandler(jodit) {
        var _jodit$events$getStor = jodit.events.getStore(jodit.events).get(JODIT_RECALC_POPUP_POSITION_EVENT, JODIT_DEFAULT_EVENT_NAMESPACE$1),
            _jodit$events$getStor2 = _slicedToArray(_jodit$events$getStor, 1),
            eventDesc = _jodit$events$getStor2[0];

        var recalcPopupPosition = eventDesc && eventDesc.originalCallback;
        if (!recalcPopupPosition) return;
        this.scrollHandler = this.createScrollHandler(recalcPopupPosition);
        jodit.events.on(this.scrollContainer, 'scroll', this.scrollHandler);
      }
      /**
       * @param {Function} recalcPopupPosition
       */

    }, {
      key: "createScrollHandler",
      value: function createScrollHandler(recalcPopupPosition) {
        return scrollHandler.bind(this);

        function scrollHandler() {
          var inlinePopup = this.jodit.__plugins.inlinePopup;
          if (!inlinePopup || !inlinePopup.isShown) return;
          return recalcPopupPosition.call(inlinePopup);
        }
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "beforeDestruct",
      value: function beforeDestruct(jodit) {
        if (this.scrollContainer && this.scrollHandler) {
          jodit.events.off(this.scrollContainer, 'scroll', this.scrollHandler);
        }
      }
    }]);

    return TablePopupsPlugin;
  }();

  //
  //
  //
  //
  var _id = 'joditToolbar';
  var _buttons = [[['source', 'Source']], [['undo', 'Undo'], ['redo', 'Redo'], ['cut', 'Cut selection'], ['copyformat', 'Paint format']], [['paragraph', 'Style'], ['font', 'Font'], ['fontsize', 'Font size']], [['bold', 'Bold'], ['italic', 'Italic'], ['underline', 'Underline'], ['strikethrough', 'Strikethrough']], [['brush', 'Text color']], [['link', 'Insert link...'], ['table', 'Insert table'], ['image', 'Image'], ['tooltip', 'Tooltip'], ['symbol', 'Insert special character'], ['hr', 'Horizontal line']], [['ol', 'Numbered list'], ['ul', 'Bulleted list'], ['outdent', 'Decrease indent'], ['indent', 'Increase indent']], [['align', 'Alignment']], [['subscript', 'Subscript'], ['superscript', 'Superscript']], [['eraser', 'Clear formatting']]];
  var script$1 = {
    get $containerId() {
      return "#".concat(_id);
    },

    get $buttons() {
      return _buttons;
    },

    computed: {
      id: function id() {
        return _id;
      },
      buttons: function buttons() {
        return _buttons;
      }
    }
  };

  function normalizeComponent$1(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
      if (typeof shadowMode !== 'boolean') {
          createInjectorSSR = createInjector;
          createInjector = shadowMode;
          shadowMode = false;
      }
      // Vue.extend constructor export interop.
      const options = typeof script === 'function' ? script.options : script;
      // render functions
      if (template && template.render) {
          options.render = template.render;
          options.staticRenderFns = template.staticRenderFns;
          options._compiled = true;
          // functional template
          if (isFunctionalTemplate) {
              options.functional = true;
          }
      }
      // scopedId
      if (scopeId) {
          options._scopeId = scopeId;
      }
      let hook;
      if (moduleIdentifier) {
          // server build
          hook = function (context) {
              // 2.3 injection
              context =
                  context || // cached call
                      (this.$vnode && this.$vnode.ssrContext) || // stateful
                      (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional
              // 2.2 with runInNewContext: true
              if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {
                  context = __VUE_SSR_CONTEXT__;
              }
              // inject component styles
              if (style) {
                  style.call(this, createInjectorSSR(context));
              }
              // register component module identifier for async chunk inference
              if (context && context._registeredComponents) {
                  context._registeredComponents.add(moduleIdentifier);
              }
          };
          // used by ssr in case component is cached and beforeCreate
          // never gets called
          options._ssrRegister = hook;
      }
      else if (style) {
          hook = shadowMode
              ? function (context) {
                  style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
              }
              : function (context) {
                  style.call(this, createInjector(context));
              };
      }
      if (hook) {
          if (options.functional) {
              // register for functional component in vue file
              const originalRender = options.render;
              options.render = function renderWithStyleInjection(h, context) {
                  hook.call(context);
                  return originalRender(h, context);
              };
          }
          else {
              // inject component registration as beforeCreate hook
              const existing = options.beforeCreate;
              options.beforeCreate = existing ? [].concat(existing, hook) : [hook];
          }
      }
      return script;
  }

  const isOldIE = typeof navigator !== 'undefined' &&
      /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());

  /* script */
  var __vue_script__$1 = script$1;
  /* template */

  var __vue_render__$1 = function __vue_render__() {
    var _vm = this;

    var _h = _vm.$createElement;

    var _c = _vm._self._c || _h;

    return _c('div', {
      staticClass: "jodit_toolbar_container",
      attrs: {
        "id": _vm.id
      }
    });
  };

  var __vue_staticRenderFns__$1 = [];
  /* style */

  var __vue_inject_styles__$1 = undefined;
  /* scoped */

  var __vue_scope_id__$1 = undefined;
  /* module identifier */

  var __vue_module_identifier__$1 = undefined;
  /* functional template */

  var __vue_is_functional_template__$1 = false;
  /* style inject */

  /* style inject SSR */

  /* style inject shadow dom */

  var Toolbar = normalizeComponent$1({
    render: __vue_render__$1,
    staticRenderFns: __vue_staticRenderFns__$1
  }, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, false, undefined, undefined, undefined);

  /** @typedef {import('jodit').IJodit} Jodit */

  var ToolbarBuilderPlugin =
  /*#__PURE__*/
  function () {
    _createClass(ToolbarBuilderPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'toolbar-builder';
      }
    }]);

    function ToolbarBuilderPlugin(options) {
      _classCallCheck(this, ToolbarBuilderPlugin);

      options.buttons = options.buttons || [];
      options.separator = options.separator || '|';
      autoBind(this);
    }
    /**
     * @param {Config} config
     * @param {*} Jodit
     */


    _createClass(ToolbarBuilderPlugin, [{
      key: "apply",
      value: function apply(config, Jodit) {
        var _this = this;

        var language = config.language || 'en';
        config.language = uniqueId_1("".concat(language, "_"));
        Jodit.lang[config.language] = cloneDeep_1(Jodit.lang[language]);
        this.options.language = config.language;
        config.buttons = [];
        this.options.buttons.forEach(function (it) {
          return _this.addGroup(config, Jodit, it);
        });
      }
    }, {
      key: "addGroup",
      value: function addGroup(config, Jodit) {
        var _this2 = this;

        var controls = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
        var buttons = controls.reduce(function (acc, _ref) {
          var _ref2 = _slicedToArray(_ref, 2),
              name = _ref2[0],
              tooltip = _ref2[1];

          var control = config.controls[name];
          var lang = Jodit.lang[_this2.options.language];
          if (!control) return acc;
          control.tooltip = control.tooltip || tooltip;
          Object.assign(lang, _defineProperty({}, control.tooltip, tooltip));
          Object.assign(control, {
            hotkeys: []
          });
          acc.push(name);
          return acc;
        }, []);

        if (config.buttons.length > 0 && buttons.length > 0) {
          config.buttons.push(this.options.separator);
        }

        config.buttons = config.buttons.concat(buttons);
      }
    }]);

    return ToolbarBuilderPlugin;
  }();

  var JODIT_DEFAULT_EVENT_NAMESPACE$2 = 'JoditEventDefaultNamespace';
  var JODIT_POPUP_ARROW = '.jodit_popup_triangle';
  var JODIT_POPUP_TRIGGER_EVENTS = ['mousedown', 'touchend'];
  var JODIT_TOOLBAR_BUTTON = '.jodit_toolbar_btn';
  var toggle = Symbol('toggle');

  var hide$1 = function hide(el) {
    return el.style.display = 'none';
  };

  var isToolbarButton = function isToolbarButton(el) {
    return el.matches(JODIT_TOOLBAR_BUTTON);
  };
  /** @typedef {import('jodit/src/Config').Config & import('jodit/src/plugins')} Config */

  /** @typedef {import('jodit').IJodit} Jodit */

  /** @typedef {import('jodit').IComponent} Component */


  var ToolbarPopupsPlugin =
  /*#__PURE__*/
  function () {
    _createClass(ToolbarPopupsPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'toolbar-popups';
      }
    }]);

    function ToolbarPopupsPlugin(options) {
      _classCallCheck(this, ToolbarPopupsPlugin);

      options.popupOpenClass = options.popupOpenClass || 'popup_open';
      autoBind(this);
      this.popups = new Map();
    }
    /**
     * @param {Jodit} jodit
     */


    _createClass(ToolbarPopupsPlugin, [{
      key: "init",
      value: function init(jodit) {
        jodit.events.on('beforeOpenPopup', this.beforeOpenPopup);
      }
      /**
       * @param {Component} popup
       */

    }, {
      key: "beforeOpenPopup",
      value: function beforeOpenPopup(popup) {
        var self = this;
        if (!isToolbarButton(popup.target)) return;
        hide$1(popup.container);
        this.popups.set(popup.target, popup);
        var calcPosition = popup.calcPosition,
            doClose = popup.doClose;

        popup.calcPosition = function () {
          calcPosition.apply(this, arguments);
          self.onOpenPopup(popup);
        };

        popup.doClose = function () {
          doClose.apply(this, arguments);
          self.onClosePopup(popup);
        };

        var _this$jodit$events$ge = this.jodit.events.getStore(popup.target).get(JODIT_POPUP_TRIGGER_EVENTS[0], JODIT_DEFAULT_EVENT_NAMESPACE$2),
            _this$jodit$events$ge2 = _slicedToArray(_this$jodit$events$ge, 1),
            eventDesc = _this$jodit$events$ge2[0];

        var oldListener = eventDesc && eventDesc.originalCallback;
        if (!oldListener || oldListener[toggle]) return;
        replaceListener$1(this.jodit, popup.target, JODIT_POPUP_TRIGGER_EVENTS.join(' '), this.createToggleAction(popup.target, oldListener), oldListener);
      }
      /**
       * @param {Component} popup
       */

    }, {
      key: "onOpenPopup",
      value: function onOpenPopup(popup) {
        popup.target.classList.add(this.options.popupOpenClass);
        var arrow = popup.container.querySelector(JODIT_POPUP_ARROW);
        if (arrow) arrow.style.marginLeft = 0;
        Object.assign(popup.container.style, {
          marginLeft: 0,
          display: 'initial'
        });
      }
      /**
       * @param {Component} popup
       */

    }, {
      key: "onClosePopup",
      value: function onClosePopup(popup) {
        this.popups["delete"](popup.target, popup);
        popup.target.classList.remove(this.options.popupOpenClass);
      }
      /**
       * @param {Object} target
       * @param {EventListener} listener
       * @returns {EventListener}
       */

    }, {
      key: "createToggleAction",
      value: function createToggleAction(target, listener) {
        var self = this;
        return Object.assign(togglePopup, _defineProperty({}, toggle, true));

        function togglePopup() {
          var popup = self.popups.get(target);

          if (popup && popup.isOpened) {
            popup.close();
            return;
          }

          return listener.apply(this, arguments);
        }
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "beforeDestruct",
      value: function beforeDestruct(jodit) {
        jodit.events.off('beforeOpenPopup', this.beforeOpenPopup);
      }
    }]);

    return ToolbarPopupsPlugin;
  }();

  function replaceListener$1(jodit, target, events, listener, oldListener) {
    jodit.events.off(target, events, oldListener).on(target, events, listener);
  }

  var TOOLTIP_CONTROL = 'tooltip';
  var TOOLTIP_TAG = 'span';
  var TOOLTIP_ATTR = 'data-tooltip';
  var TOOLTIP_CLASS = 'tce-jodit-tooltip';
  var TOOLTIP_POPUP_FORM = "\n  <form class=\"jodit_form\">\n    <textarea name=\"tooltip\" placeholder=\"Tooltip\"></textarea>\n    <input name=\"text\" type=\"text\" placeholder=\"Text\">\n    <div style=\"text-align: right\">\n      <button name=\"delete\" type=\"button\">Delete</button>\n      <button name=\"submit\" type=\"submit\">Submit</button>\n    </div>\n  </form>";

  var isTooltipNode = function isTooltipNode(node) {
    if (!node || !isFunction_1(node.hasAttribute)) return false;
    return node.hasAttribute(TOOLTIP_ATTR);
  };
  /** @typedef {import('jodit').IJodit} Jodit */

  /** @typedef {import('jodit').IToolbarButton} Button */

  /** @typedef {import('jodit').IControlType<Jodit,Button} Control */


  var TooltipPlugin =
  /*#__PURE__*/
  function () {
    _createClass(TooltipPlugin, null, [{
      key: "pluginName",
      get: function get() {
        return 'tooltip';
      }
    }]);

    function TooltipPlugin() {
      _classCallCheck(this, TooltipPlugin);

      autoBind(this);
    }
    /**
     * @param {Config} config
     */


    _createClass(TooltipPlugin, [{
      key: "apply",
      value: function apply(_ref) {
        var controls = _ref.controls;
        controls[TOOLTIP_CONTROL] = {
          popup: this.createTooltipPopup,
          isDisable: this.isDisabled,
          isActive: this.isActive
        };
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "isDisabled",
      value: function isDisabled(jodit) {
        var Jodit = jodit.constructor,
            editor = jodit.editor,
            selection = jodit.selection;
        if (!jodit.isInited || !selection.isFocused()) return;
        var start = selection.sel.anchorNode;
        if (start.nodeType !== Node.ELEMENT_NODE) start = start.parentElement;
        var Dom = Jodit.modules.Dom;
        return Dom.up(start, function (el) {
          return el.matches('table');
        }, editor);
      }
      /**
       * @param {Jodit} jodit
       */

    }, {
      key: "isActive",
      value: function isActive(jodit) {
        var Jodit = jodit.constructor,
            editor = jodit.editor,
            selection = jodit.selection;
        if (!jodit.isInited || !selection.isFocused()) return;
        var start = selection.sel.anchorNode;
        if (start.nodeType !== Node.ELEMENT_NODE) start = start.parentElement;
        var Dom = Jodit.modules.Dom;
        return Dom.up(start, function (el) {
          return el.matches(".".concat(TOOLTIP_CLASS));
        }, editor);
      }
      /**
       * @param {Jodit} jodit
       * @param {Node} current
       * @param {Control} self
       * @param {Function} close
       */

    }, {
      key: "createTooltipPopup",
      value: function createTooltipPopup(jodit, current, self, close) {
        var _this = this;

        var Jodit = jodit.constructor,
            events = jodit.events,
            selection = jodit.selection;
        var val = Jodit.modules.Helpers.val;
        var form = jodit.create.fromHTML(TOOLTIP_POPUP_FORM);
        var deleteButton = form.querySelector('button[name=delete]');
        current = Jodit.modules.Dom.up(current, isTooltipNode, jodit.editor);

        if (current) {
          var tooltipValue = current.getAttribute(TOOLTIP_ATTR) || '';
          val(form, 'textarea[name=tooltip]', tooltipValue);
          val(form, 'input[name=text]', current.innerText);
        } else {
          var sel = selection.sel;
          val(form, 'input[name=text]', sel ? sel.toString() : '');
          deleteButton.style.display = 'none';
        }

        this.selectionInfo = selection.save();
        events.on(form, 'submit', function (event) {
          return _this.attachTooltip(event, current, close);
        });
        events.on(deleteButton, 'click', function (event) {
          return _this.detachTooltip(event, current, close);
        });
        return form;
      }
      /**
       * @param {Event} event
       * @param {Node} current
       * @param {Function} close
       */

    }, {
      key: "attachTooltip",
      value: function attachTooltip(event, current, close) {
        var _this$jodit = this.jodit,
            Jodit = _this$jodit.constructor,
            selection = _this$jodit.selection;
        var val = Jodit.modules.Helpers.val;
        event.preventDefault();
        selection.restore(this.selectionInfo);
        this.selectionInfo = null;
        var tooltipElement = current || document.createElement(TOOLTIP_TAG);
        var tooltipValue = val(event.target, 'textarea[name=tooltip]');
        var innerText = val(event.target, 'input[name=text]');
        tooltipElement.setAttribute(TOOLTIP_ATTR, tooltipValue);
        tooltipElement.classList.add(TOOLTIP_CLASS);
        tooltipElement.innerText = innerText;
        if (!current && innerText) selection.insertNode(tooltipElement);
        close();
      }
      /**
       * @param {Event} event
       * @param {Node} current
       * @param {Function} close
       */

    }, {
      key: "detachTooltip",
      value: function detachTooltip(event, current, close) {
        var _this$jodit2 = this.jodit,
            Jodit = _this$jodit2.constructor,
            selection = _this$jodit2.selection;
        event.preventDefault();
        if (current) Jodit.modules.Dom.unwrap(current);
        selection.restore(this.selectionInfo);
        this.selectionInfo = null;
        close();
      }
    }]);

    return TooltipPlugin;
  }();

  //
  //       caused by: https://github.com/xdan/jodit/blob/3.2.55/src/modules/helpers/checker/isJoditObject.ts#L18

  Object.defineProperty(Jodit, 'name', {
    value: 'Jodit'
  });
  var JODIT_READY_EVENT = 'joditReady';
  /** @type {import('jodit/src/Config').Config & import('jodit/src/plugins')} */

  var joditConfig = {
    autofocus: true,
    addNewLineOnDBLClick: false,
    showTooltipDelay: 350,
    colorPickerDefaultTab: 'color',
    disablePlugins: ['fullsize'],
    language: 'en'
  };
  extend(Jodit);
  var plugins = [{
    use: TooltipPlugin
  }, {
    use: ToolbarBuilderPlugin,
    options: {
      buttons: Toolbar.$buttons
    }
  }, {
    use: ExternalToolbarPlugin,
    options: {
      readyEvent: JODIT_READY_EVENT,
      toolbarContainer: Toolbar.$containerId
    }
  }, {
    use: FontControlsPlugin
  }, {
    use: MdiIconsPlugin
  }, {
    use: ToolbarPopupsPlugin
  }, {
    use: SourceEditorPlugin
  }, {
    use: TablePopupsPlugin
  }, {
    use: AutofocusPlugin,
    options: {
      readyEvent: JODIT_READY_EVENT
    }
  }];
  var script$2 = {
    props: {
      value: {
        type: String,
        required: true
      },
      minHeight: {
        type: Number,
        required: true
      },
      placeholder: {
        type: String,
        "default": 'Insert text here...'
      },
      readonly: {
        type: Boolean,
        "default": false
      }
    },
    computed: {
      config: function config(vm) {
        return Object.assign({}, joditConfig, {
          minHeight: vm.minHeight,
          placeholder: vm.placeholder,
          plugins: plugins
        });
      }
    },
    methods: {
      input: function input(value) {
        var innerText = this.$refs.jodit.$el.innerText;
        return this.$emit('input', innerText ? value : '');
      }
    },
    watch: {
      readonly: function readonly(state) {
        var editor = this.$refs.jodit.editor;
        if (!editor) return;
        editor.setReadOnly(state);
        if (!state) editor.selection.focus();
      }
    },
    components: {
      JoditVue: JoditVue
    }
  };

  /* script */
  var __vue_script__$2 = script$2;
  /* template */

  var __vue_render__$2 = function __vue_render__() {
    var _vm = this;

    var _h = _vm.$createElement;

    var _c = _vm._self._c || _h;

    return _c('div', {
      staticClass: "jodit_wrapper"
    }, [_c('jodit-vue', {
      ref: "jodit",
      attrs: {
        "config": _vm.config,
        "value": _vm.value
      },
      on: {
        "input": _vm.input
      }
    })], 1);
  };

  var __vue_staticRenderFns__$2 = [];
  /* style */

  var __vue_inject_styles__$2 = undefined;
  /* scoped */

  var __vue_scope_id__$2 = "data-v-13b42c81";
  /* module identifier */

  var __vue_module_identifier__$2 = undefined;
  /* functional template */

  var __vue_is_functional_template__$2 = false;
  /* style inject */

  /* style inject SSR */

  /* style inject shadow dom */

  var JoditEditor = normalizeComponent$1({
    render: __vue_render__$2,
    staticRenderFns: __vue_staticRenderFns__$2
  }, __vue_inject_styles__$2, __vue_script__$2, __vue_scope_id__$2, __vue_is_functional_template__$2, __vue_module_identifier__$2, false, undefined, undefined, undefined);

  //
  var script$3 = {
    name: 'tce-jodit-html',
    props: {
      element: {
        type: Object,
        required: true
      },
      isFocused: {
        type: Boolean,
        "default": false
      },
      isDragged: {
        type: Boolean,
        "default": false
      },
      showPlaceholder: {
        type: Boolean,
        "default": true
      }
    },
    data: function data(vm) {
      var _ref, _vm$element, _vm$element$data;

      return {
        content: (_ref = (_vm$element = vm.element) === null || _vm$element === void 0 ? void 0 : (_vm$element$data = _vm$element.data) === null || _vm$element$data === void 0 ? void 0 : _vm$element$data.content) !== null && _ref !== void 0 ? _ref : '',
        readonly: false
      };
    },
    computed: {
      hasChanges: function hasChanges() {
        var _ref2, _this$element, _this$element$data;

        var previousValue = (_ref2 = (_this$element = this.element) === null || _this$element === void 0 ? void 0 : (_this$element$data = _this$element.data) === null || _this$element$data === void 0 ? void 0 : _this$element$data.content) !== null && _ref2 !== void 0 ? _ref2 : '';
        return previousValue !== this.content;
      }
    },
    methods: {
      save: function save() {
        if (!this.hasChanges) return;
        this.$emit('save', {
          content: this.content
        });
      }
    },
    watch: {
      element: function element(val) {
        var _this = this;

        // Make sure that component state is kept
        // until events (i.e. focusout => save) are triggered
        setTimeout(function () {
          var _ref3, _val$data;

          if (_this.isFocused) return;
          _this.content = (_ref3 = val === null || val === void 0 ? void 0 : (_val$data = val.data) === null || _val$data === void 0 ? void 0 : _val$data.content) !== null && _ref3 !== void 0 ? _ref3 : '';
        }, 0);
      },
      isFocused: function isFocused(val, oldVal) {
        if (oldVal && !val) this.save();
      },
      isDragged: function isDragged(state, oldState) {
        if (state) {
          this.readonly = true;
        } else if (!state && oldState) {
          this.readonly = false;
        }
      },
      content: debounce_1(function () {
        this.save();
      }, 4000)
    },
    components: {
      JoditEditor: JoditEditor
    }
  };

  /* script */
  var __vue_script__$3 = script$3;
  /* template */

  var __vue_render__$3 = function __vue_render__() {
    var _vm = this;

    var _h = _vm.$createElement;

    var _c = _vm._self._c || _h;

    return _c('div', {
      staticClass: "tce-jodit-html"
    }, [!_vm.isFocused && !_vm.content && _vm.showPlaceholder ? _c('div', {
      staticClass: "jodit-html-placeholder"
    }, [_vm._m(0), _vm._v(" "), _vm._m(1)]) : [_vm.isFocused ? _c('jodit-editor', {
      attrs: {
        "min-height": _vm.$el.clientHeight,
        "readonly": _vm.readonly
      },
      model: {
        value: _vm.content,
        callback: function callback($$v) {
          _vm.content = $$v;
        },
        expression: "content"
      }
    }) : _c('div', {
      staticClass: "jodit_container"
    }, [_c('div', {
      staticClass: "jodit_wysiwyg",
      domProps: {
        "innerHTML": _vm._s(_vm.content)
      }
    })])]], 2);
  };

  var __vue_staticRenderFns__$3 = [function () {
    var _vm = this;

    var _h = _vm.$createElement;

    var _c = _vm._self._c || _h;

    return _c('div', {
      staticClass: "placeholder-avatar"
    }, [_c('span', [_vm._v("<")]), _vm._v(" "), _c('span', {
      staticClass: "divider"
    }, [_vm._v("/")]), _vm._v(" "), _c('span', [_vm._v(">")])]);
  }, function () {
    var _vm = this;

    var _h = _vm.$createElement;

    var _c = _vm._self._c || _h;

    return _c('div', {
      staticClass: "message"
    }, [_c('span', {
      staticClass: "heading"
    }, [_vm._v("HTML component")]), _vm._v(" "), _c('span', [_vm._v("Select to edit")])]);
  }];
  /* style */

  var __vue_inject_styles__$3 = undefined;
  /* scoped */

  var __vue_scope_id__$3 = "data-v-0b75dd64";
  /* module identifier */

  var __vue_module_identifier__$3 = undefined;
  /* functional template */

  var __vue_is_functional_template__$3 = false;
  /* style inject */

  /* style inject SSR */

  /* style inject shadow dom */

  var Edit = normalizeComponent$1({
    render: __vue_render__$3,
    staticRenderFns: __vue_staticRenderFns__$3
  }, __vue_inject_styles__$3, __vue_script__$3, __vue_scope_id__$3, __vue_is_functional_template__$3, __vue_module_identifier__$3, false, undefined, undefined, undefined);

  var plugin__default = {
    initState: function initState() {
      return {};
    },
    components: {
      Edit: Edit,
      Toolbar: Toolbar
    }
  };

  var plugin$1 = /*#__PURE__*/Object.freeze({
    __proto__: null,
    Edit: Edit,
    Toolbar: Toolbar,
    'default': plugin__default
  });

  function _slicedToArray$1(arr, i) {
    return _arrayWithHoles$1(arr) || _iterableToArrayLimit$1(arr, i) || _nonIterableRest$1();
  }

  function _arrayWithHoles$1(arr) {
    if (Array.isArray(arr)) return arr;
  }

  function _iterableToArrayLimit$1(arr, i) {
    if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) {
      return;
    }

    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"] != null) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  function _nonIterableRest$1() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  }

  /**
   * Special language-specific overrides.
   *
   * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt
   *
   * @type {Object}
   */
  var LANGUAGES = {
    tr: {
      regexp: /\u0130|\u0049|\u0049\u0307/g,
      map: {
        '\u0130': '\u0069',
        '\u0049': '\u0131',
        '\u0049\u0307': '\u0069'
      }
    },
    az: {
      regexp: /[\u0130]/g,
      map: {
        '\u0130': '\u0069',
        '\u0049': '\u0131',
        '\u0049\u0307': '\u0069'
      }
    },
    lt: {
      regexp: /[\u0049\u004A\u012E\u00CC\u00CD\u0128]/g,
      map: {
        '\u0049': '\u0069\u0307',
        '\u004A': '\u006A\u0307',
        '\u012E': '\u012F\u0307',
        '\u00CC': '\u0069\u0307\u0300',
        '\u00CD': '\u0069\u0307\u0301',
        '\u0128': '\u0069\u0307\u0303'
      }
    }
  };

  /**
   * Lowercase a string.
   *
   * @param  {String} str
   * @return {String}
   */
  var lowerCase = function (str, locale) {
    var lang = LANGUAGES[locale];

    str = str == null ? '' : String(str);

    if (lang) {
      str = str.replace(lang.regexp, function (m) { return lang.map[m] });
    }

    return str.toLowerCase()
  };

  var nonWordRegexp = /[^A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]+/g;

  var camelCaseRegexp = /([a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A])/g;

  var camelCaseUpperRegexp = /([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A])([A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A][a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A])/g;

  /**
   * Sentence case a string.
   *
   * @param  {string} str
   * @param  {string} locale
   * @param  {string} replacement
   * @return {string}
   */
  var noCase = function (str, locale, replacement) {
    if (str == null) {
      return ''
    }

    replacement = typeof replacement !== 'string' ? ' ' : replacement;

    function replace (match, index, value) {
      if (index === 0 || index === (value.length - match.length)) {
        return ''
      }

      return replacement
    }

    str = String(str)
      // Support camel case ("camelCase" -> "camel Case").
      .replace(camelCaseRegexp, '$1 $2')
      // Support odd camel case ("CAMELCase" -> "CAMEL Case").
      .replace(camelCaseUpperRegexp, '$1 $2')
      // Remove all non-word characters and replace with a single space.
      .replace(nonWordRegexp, replace);

    // Lower case the entire string.
    return lowerCase(str, locale)
  };

  /**
   * Param case a string.
   *
   * @param  {string} value
   * @param  {string} [locale]
   * @return {string}
   */
  var paramCase = function (value, locale) {
    return noCase(value, locale, '-')
  };

  var hasProp = function hasProp(obj, prop) {
    return Object.prototype.hasOwnProperty.call(obj, prop);
  };

  var isFunction$3 = function isFunction(arg) {
    return typeof arg === 'function';
  };
  var _pluginOptions$initSt = plugin__default.initState,
      initState = _pluginOptions$initSt === void 0 ? function () {
    return {};
  } : _pluginOptions$initSt,
      _pluginOptions$compon = plugin__default.components,
      components = _pluginOptions$compon === void 0 ? {} : _pluginOptions$compon;
  var options$2 = Object.assign({
    version: version,
    initState: initState,
    components: components
  }, tailor);
  var install$1 = function install(Vue) {
    if (hasProp(plugin$1, 'install')) {
      isFunction$3(_missingExportShim) && _missingExportShim(Vue);
    }

    Object.entries(components).forEach(function (_ref) {
      var _ref2 = _slicedToArray$1(_ref, 2),
          name$1 = _ref2[0],
          component = _ref2[1];

      name$1 = paramCase(name$1);
      if (name$1 === 'edit') Vue.component(name, component);
      Vue.component("".concat(name, "--").concat(name$1), component);
    });
  };

  exports.Edit = Edit;
  exports.Toolbar = Toolbar;
  exports.default = install$1;
  exports.install = install$1;
  exports.options = options$2;

  Object.defineProperty(exports, '__esModule', { value: true });

})));
